{"version":3,"sources":["./node_modules/wcwidth/index.js","./node_modules/jquery.terminal/js/jquery.terminal.js","./node_modules/clone/clone.js","./node_modules/wcwidth/combining.js","./node_modules/defaults/index.js"],"names":["defaults","require","combining","DEFAULTS","nul","control","module","exports","wcwidth","str","wcswidth","config","opts","s","i","length","n","charCodeAt","ucs","bisearch","min","max","mid","Math","floor","ctx","sprintf","cache","hasOwnProperty","arguments","parse","format","call","parse_tree","argv","cursor","tree_length","node_type","arg","output","k","match","pad","pad_character","pad_length","get_type","push","test","toString","String","fromCharCode","parseInt","toExponential","parseFloat","toFixed","slice","toUpperCase","charAt","str_repeat","join","fmt","_fmt","arg_names","exec","field_list","replacement_field","field_match","vsprintf","_argv","splice","apply","variable","Object","prototype","toLowerCase","input","multiplier","global","self","window","factory","undefined","root","define","jquery","$","debug","DelayQueue","callbacks","Callbacks","resolved","resolve","fire","add","fn","omap","o","result","each","v","text_length","map","text","get","reduce","a","b","Clone","clone_object","object","tmp","isArray","clone_array","key","array","is_function","Array","Error","item","bind","clone","Map","clear","forEach","value","delete","localStorage","hasLS","testKey","storage","setItem","removeItem","error","hasCookies","document","cookie","split","e","isLS","wls","c","wc","dt","Date","setTime","getTime","toGMTString","rls","rc","nn","ca","indexOf","dls","dc","extend","Storage","set","remove","debounce","FUNC_ERROR_TEXT","isObject","type","now","func","wait","options","nativeMax","nativeMin","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","leadingEdge","setTimeout","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","cancel","clearTimeout","flush","debounced","isInvoking","jQuery","everyTime","interval","label","times","belay","timer","oneTime","stopTime","guid","regex","powers","timeParse","trim","num","mult","element","counter","isFunction","isNaN","constructor","Number","$timers","$timerID","handler","inProgress","setInterval","timers","ret","lab","clearInterval","_fn","navigator","userAgent","one","els","undef","nativeSplit","compliantExecNpcg","separator","limit","flags","ignoreCase","multiline","extended","sticky","lastLastIndex","separator2","lastIndex","lastLength","RegExp","source","index","replace","caret","pos","target","isContentEditable","contentEditable","getSelection","is","focus","range1","getRangeAt","range2","cloneRange","selectNodeContents","setEnd","endContainer","endOffset","selectionStart","selection","createRange","body","createTextRange","moveToElementText","setEndPoint","range","duplicate","bookmark","getBookmark","moveToBookmark","moveStart","collapse","focusNode","setSelectionRange","select","make_callback_plugin","factory_settings","init","noop","destroy","name","callback","trigger","unbind","data_name","$this","fireWith","data","has","removeData","resizer","settings","prefix","first","on","ResizeObserver","observe","iframe","addClass","appendTo","contentWindow","observer","unobserve","find","off","touch_scroll","origin","previous","originalEvent","tagName","touches","current","preventDefault","jquery_resolve","defer","Deferred","promise","unpromise","catch","done","then","promises","filter","when","is_fully_in_viewport","is_visible","node","container","box","getBoundingClientRect","viewport","top","bottom","height","IntersectionObserver","item_observer","entries","isIntersecting","ratio","entity_re","combine_chr_re","astral_symbols_re","emoji_re","mobile_re","tablet_re","format_split_re","format_parts_re","format_re","format_exist_re","format_full_re","format_begin_re","format_start_re","format_end_re","self_closing_re","color_re","url_re","url_nf_re","email_re","url_full_re","email_full_re","command_re","extended_command_re","format_exec_re","float_re","re_re","string_re","unclosed_strings_re","broken_image","use_broken_image","animation_supported","animation","domPrefixes","elm","createElement","style","animationName","agent","is_IE","is_IEMobile","is_ch_unit_supported","div","width","is_css_variables_supported","CSS","supports","is_android","is_key_native","KeyboardEvent","proto","getOwnPropertyDescriptor","is_browser","is_mobile","check","substr","platform","maxTouchPoints","vendor","opera","ch_unit_bug","base","ch","space","abs","css","obj","isPlainObject","keys","setProperty","getPropertyValue","a11y_hide","attr","role","excepctions","alert_exception","terminal","Exception","message","exception_message","scrollbar_event","left","offset","outerWidth","clientX","fileName","Cycle","rotate","skip","defined","append","front","restart","Boolean","Stack","is_array","size","pop","concat","WorkerCache","validation","action","onCache","_onCache","_action","_validation","_cache","validate","valid","History","memory","enabled","storage_key","JSON","stringify","new_data","reset","last","end","position","next","old","purge","enable","disable","toggle","cmd_index","cmd","mask","caseSensitiveSearch","historySize","prompt","history","onPositionChange","onCommandChange","inputStyle","mobileDelete","onPaste","clickTimeout","holdTimeout","holdRepeatTimeout","mobileIngoreAutoSpace","repeatTimeoutKeys","tabindex","tabs","mobile_ignore_key","maybe_data","id","wrapper","cursor_line","clip","$node","autocapitalize","autocorrect","spellcheck","insertAfter","val","html","blur","removeAllRanges","num_chars","char_width","last_rendered_prompt","prompt_last_line","just_prompt_len","extra_prompt_margin","prompt_len","prompt_node","reverse_search","rev_search_str","reverse_search_position","backup_prompt","command","last_command","kill_text","formatted_position","restart_animation","paste_count","line_marker","line_marker_re","empty_marker_re","get_char_pos","closest","parent","prevAll","prevUntil","key_mapping","ie_key_fix","get_key","combo","ctrlKey","metaKey","shiftKey","altKey","keycodes","letter","reversed_keycodes","which","keymap","default_keymap","delete_forward","clipboard","hold","historyFilter","prev_command","no_keydown","commands","draw_prompt","insert","backspace_key","up_arrow","prev_history","down_arrow","next_history","len","reverse_history_search","draw_reverse_prompt","redraw","right","re","bare_text","return_true","home","paste_event","delete_backward","get_selected_html","text_to_clipboard","delete_character_forward","delete_word_forward","substring","m","delete_character_backward","delete_word_backward","isenabled","paste","fix_textarea","first_up_history","have_newlines","string","have_wrapping","lengths","line","wrap","simple_split_command_line","formatted","lines","split_equal","escape_regex","unescape_brackets","formatting","strip","before","col","column","prev","splitted","left_over","diff","after","$line","ending","next_broken","lastIndexOf","sum","mobile_focus","$clip","fix_cursor","getComputedStyle","_class","className","position_only","removeClass","new_cursor","insertBefore","animating","blink","toggleClass","clear_reverse_state","history_data","save_string","j","get_char_width","$prompt","get_num_chars","process_cmd_line","skip_empty","nextUntil","escape_brackets","first_len","strlen","cmd_line_worker","_previous_value","_cols","split_command_line","skip_formatted_position","escape_formatting","format_options","unixFormattingEscapeBrackets","apply_formatters","normalize","stack","encoded","encode","allowedAttributes","partition","raw","is_multiline","start","is_emoji_formatting","is_formatting","draw_cursor_line","end_line","cursor_end_line","empty_cursor","before_str","c_before","cursor_len","lines_after","last_ins","lines_before","display","original_string","from_last","last_len","new_pos","line_index","current_len","msg","strings","redrawError","in_line","find_position","make_guess","cmp","search_pos","guess","next_guess","codepoint_len","binary_search","chars","split_characters","prev_prompt_data","crlf","have_formatting","format_split","encoded_last_line","last_line","spans","hide","show","fire_change_command","option","stay","removed","silent","new_keymap","original","bare_command","doc","keypress_event","keydown_event","input_event","include_prompt","__set_prompt_margin","user_prompt","should_redraw","relative","refresh","display_position","command_len","new_formatted_pos","visible","resize","new_num_chars","invoke_key","shortcut","ctrl","shift","alt","meta","Event","documentElement","keyCode","new_mask","skip_keypress","dead_key","single_key","no_keypress","no_key","backspace","process","hold_pause","skip_insert","prev_key","is_backspace","is_single","is_delay_key","specials","clear_reverse_search_key","skip_keydown","fake","exception","keydown","clear_hold","is_terminal_selected","keypress","normalized","inArray","event","chr","skip_input","get_next_character","keycode","was_down","count","$target","is_prompt","down","button","count_selfclosing_formatting","entities","render_entities","_","hex","code","entity","safe","char_len","make_re_fn","starts_with","make_next_char_fun","tests","m1","m2","match_entity","match_combo","match_emoji","astral_match","normalize_position","acc","char_width_prop","extra_css","bare","wide_characters","specs","arr","spec","make_string","compare_fn","more_args","startContainer","parentNode","term","sel","rangeCount","appendChild","cloneContents","innerHTML","with_selection","ranges","addRange","process_selected_line","$self","hasClass","process_div","process_selected_html","stdout","$html","$cmd_lines","support_copy","queryCommandSupported","$textarea","had_focus","writeText","execCommand","$text","get_textarea_selection","textarea","selectionEnd","clear_textarea_selection","common_string","matchCase","string_case","candidate","candidateLower","currentLower","trigger_terminal_change","terminals","onTerminalChange","setBaseAndExtent","setStart","childNodes","process_command","quotes","rest","args_quotes","version","date","color_names","valid_color","color","unclosed_strings","special","tracking_replace","rex","replacement","new_string","rep_string","new_position","last_index","c0","rep_len","iterate_formatting","is_space","is_open_formatting","is_escape_bracket","is_text","not_formatting","opening","next_iteration","char","is_next_space","prev_space","is_last","in_text","space_count","re_ent","braket","start_index","end_index","start_formatting","end_formatting","prev_index","semicolons","amp","keep_words","prev_format","first_index","line_length","last_bracket","can_break","stripped","text_len","after_index","new_index","closed_formatting","matched","sp","nested_formatting","get_inherit_style","ignore","__inherit__","test_lengths","formatter","__no_warn__","warn","should_format","props","have_any","some","prop","formatters","apply_function_formatter","__meta__","found_position","partials","this_len","length_before","loop","after_len","position_partial","partial","linksNoReferrer","linksNoFollow","escape","anyLinks","filter_attr_names","names","allowed","filters","clean_data","add_attrs","attrs","rel_attr","rel","unshift","is_path","url","with_url_validation","valid_href","valid_src","background","data_text","pre_process_link","pre_process_image","style_str","text_decoration","extra","columns","cols","no_formatting","column_limit","whole","bracket","active","last_id","parse_argument","strict","parse_string","quote","parse_arguments","split_arguments","parse_command","split_command","parse_options","boolean","token","single","extended_command","invokeMethods","deferred","change_hash","reject","eval","iterator","Symbol","replacer","search","new_formatter","Terminal_Exception","hidden","warnings","console","log","ids","jrpc","method","params","success","validJSONRPC","response","isNumeric","request","ajax","beforeSend","jxhr","status","jqXHR","content_type","getResponseHeader","json","contentType","dataType","async","terminal_ready","get_char_size","rect","visiblity","temp","char_size","get_num_rows","all","same","same_case","is_promise","version_set","copyright","version_string","reg","name_ver","signatures","exit","maskChar","checkArity","exceptionHandler","pauseEvents","softPause","mousewheel","touchscroll","cancelableAjax","processArguments","processRPCResponse","completionEscape","convertLinks","scrollObject","historyState","importHistory","echoCommand","scrollOnEcho","login","outputLimit","unixFormatting","escapeBrackets","ansiParser","ansiArt","onAjaxError","pasteImage","scrollBottomOffset","wordAutocomplete","caseSensitiveAutocomplete","describe","onRPCError","doubleTab","doubleTabEchoCommand","completion","onInit","onClear","onBlur","onFocus","onExit","onPush","onPop","renderHandler","onAfterRedraw","onEchoCommand","onFlush","onBeforeCommand","onAfterCommand","onBeforeEcho","onAfterEcho","onBeforeLogin","onAfterLogout","onBeforeLogout","comletionParameters","wrongPasswordTryAgain","wrongPassword","ajaxAbortError","wrongArity","commandNotFound","oneRPCWithIgnore","oneInterpreterFunction","loginFunctionMissing","noTokenError","serverResponse","wrongGreetings","notWhileLogin","loginIsNotAFunction","canExitError","invalidCompletion","invalidSelector","invalidTerminalId","password","recursiveLoop","notAString","invalidStrings","defunctTerminal","requests","save_state","hash_commands","fire_hash_change","first_instance","init_interpreter","StorageHelper","get_processed_command","preprocess_value","is_node","unmount","prepare_render","finalize","replaceWith","render","echo","get_node","Element","display_object","print_line","url_spec","pause","file","resume","display_json_rpc_error","at","make_basic_json_rpc","auth","interpreter","display_exception","ajax_error","make_object_interpreter","arity","fallback","user_command","onCommandNotFound","xhr","responseText","make_json_rpc_object","jrpc_success","jrpc_request","jrpc_response","procs","field","interpreter_object","proc","args_len","help","found","make_interpreter","user_intrp","rpc_count","fn_interpreter","recur","interpreters","new_obj","make_json_rpc_login","user","passwd","output_buffer","NEW_LINE","format_cache","buffer_line","use_cache","useCache","format_buff","newline","links","escaped","should_wrap","string_cache","process_line","line_settings","stringify_value","endsWith","parts","prev_exec_cmd","words","keepWords","update","scroll","command_line","detached_output","empty","detach","lines_to_show","rows","pivot","fire_event","limit_lines","$lines","for_remove","parents","show_greetings","greetings","signature","make_label_error","echo_command","get_command","have_scrollbar","fill","restore_state","command_idx","import_view","export_view","maybe_update_hash","location","hash","first_command","resume_callbacks","init_state","execHash","after_exec","saved_change_hash","invoke","force_awake","paused","ghost","level","logout","in_login","get_token","set_token","global_logout","clear_loging_storage","global_login_fn","initialize","prefix_name","maybe_append_name","interpreter_name","prepare_top_interpreter","login_name","context_callback_proxy","terminal_init_keymap","fun","init_queue","onStart","skip_local","scroll_to_view","scroll_to","it","make_cursor_visible","hashchange","decodeURIComponent","was_paused","onPause","user_key_down","get_position","set_command","orignal","caseSensitive","before_cursor","complete","word","scroll_to_bottom","key_down","tab_count","r","readyState","abort","key_press","typed","finish_typing_fn","typeing_animation","delay","onFinish","get_prompt","char_i","set_prompt","new_prompt","typed_prompt","typed_message","ready","queue","selector","body_terminal","terminal_id","scrollTop","user_export","view","when_ready","ignore_hash","state","d","cmd_ready","delayed_commands","autologin","infinite","logins","popUserPass","login_callback","set_mask","pass","cmd_strings","double_quotes","single_quote","prev_string","sensitive","slash","matched_strings","pre","post","to_insert","set_position","reverse","common","set_interpreter","overwrite_interpreter","numChars","numRows","num_rows","geometry","old_width","old_height","history_state","run","setImmediate","clear_history_state","x","animate","freeze","frozen","clear_cache","is_bottom","get_output","new_num_rows","appending_to_partial","children","cmd_prompt","cmd_outer","last_row","last_row_rect","partial_width","prompt_margin","round","cmd_cursor","self_offset","e1","e2","remove_line","arg_defined","locals","img","Image","onerror","src","last_newline","echo_ready","old_value","string_old_val","string_val","typing","speed","finish","lineNumber","trace","amount","local","local_name","intrp","read","infiniteLogin","push_settings","object_or_name","font_resizer","blur_terminal","focus_terminal","visibility_observer","scroll_marker","is_bottom_observer","mutation_observer","disconnect","$body","removeAttr","defunct","elem","scrollHeight","is_bottom_detected","scroll_height","scroll_top","offsetHeight","command_queue","need_char_size_recalculate","old_enabled","ignoreSystemDescribe","base_interpreter","parseObject","proxy","is_type","echo_image","image","data_uri","blob","URL","webkitURL","createObjectURL","ignoreEvents","Blob","clipboardData","items","getAsFile","getAsString","getData","onResize","elementFromPoint","clientY","$win","addEventListener","move","SENSITIVITY","HOLD_TIME","touch_event","point","y","diff_x","diff_y","click","ignore_elements","mousedown","mouseup","timeout","dblclick","is_context_event","buttons","event_name","cmd_offset","cmd_rect","top_limit","pageY","pageX","content_width","diff_h","diff_w","ceil","href","calculate_char_size","create_resizers","bottom_detect","intersections","intersectionRatio","create_bottom_detect","marker","observe_visibility","was_enabled","visibility_checker","in_dom","MutationObsrv","MutationObserver","WebKitMutationObserver","childList","exec_spec","delta","stopPropagation","onmousewheel","wheelDelta","deltaY","detail","circular","depth","allParents","allChildren","useBuffer","Buffer","Infinity","_clone","child","__isArray","__isRegExp","__getRegExpFlags","__isDate","isBuffer","allocUnsafe","copy","getPrototypeOf","create","clonePrototype","__objToStr"],"mappings":"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","file":"jquery-terminal.js","sourcesContent":["\"use strict\"\n\nvar defaults = require('defaults')\nvar combining = require('./combining')\n\nvar DEFAULTS = {\n  nul: 0,\n  control: 0\n}\n\nmodule.exports = function wcwidth(str) {\n  return wcswidth(str, DEFAULTS)\n}\n\nmodule.exports.config = function(opts) {\n  opts = defaults(opts || {}, DEFAULTS)\n  return function wcwidth(str) {\n    return wcswidth(str, opts)\n  }\n}\n\n/*\n *  The following functions define the column width of an ISO 10646\n *  character as follows:\n *  - The null character (U+0000) has a column width of 0.\n *  - Other C0/C1 control characters and DEL will lead to a return value\n *    of -1.\n *  - Non-spacing and enclosing combining characters (general category\n *    code Mn or Me in the\n *    Unicode database) have a column width of 0.\n *  - SOFT HYPHEN (U+00AD) has a column width of 1.\n *  - Other format characters (general category code Cf in the Unicode\n *    database) and ZERO WIDTH\n *    SPACE (U+200B) have a column width of 0.\n *  - Hangul Jamo medial vowels and final consonants (U+1160-U+11FF)\n *    have a column width of 0.\n *  - Spacing characters in the East Asian Wide (W) or East Asian\n *    Full-width (F) category as\n *    defined in Unicode Technical Report #11 have a column width of 2.\n *  - All remaining characters (including all printable ISO 8859-1 and\n *    WGL4 characters, Unicode control characters, etc.) have a column\n *    width of 1.\n *  This implementation assumes that characters are encoded in ISO 10646.\n*/\n\nfunction wcswidth(str, opts) {\n  if (typeof str !== 'string') return wcwidth(str, opts)\n\n  var s = 0\n  for (var i = 0; i < str.length; i++) {\n    var n = wcwidth(str.charCodeAt(i), opts)\n    if (n < 0) return -1\n    s += n\n  }\n\n  return s\n}\n\nfunction wcwidth(ucs, opts) {\n  // test for 8-bit control characters\n  if (ucs === 0) return opts.nul\n  if (ucs < 32 || (ucs >= 0x7f && ucs < 0xa0)) return opts.control\n\n  // binary search in table of non-spacing characters\n  if (bisearch(ucs)) return 0\n\n  // if we arrive here, ucs is not a combining or C0/C1 control character\n  return 1 +\n      (ucs >= 0x1100 &&\n       (ucs <= 0x115f ||                       // Hangul Jamo init. consonants\n        ucs == 0x2329 || ucs == 0x232a ||\n        (ucs >= 0x2e80 && ucs <= 0xa4cf &&\n         ucs != 0x303f) ||                     // CJK ... Yi\n        (ucs >= 0xac00 && ucs <= 0xd7a3) ||    // Hangul Syllables\n        (ucs >= 0xf900 && ucs <= 0xfaff) ||    // CJK Compatibility Ideographs\n        (ucs >= 0xfe10 && ucs <= 0xfe19) ||    // Vertical forms\n        (ucs >= 0xfe30 && ucs <= 0xfe6f) ||    // CJK Compatibility Forms\n        (ucs >= 0xff00 && ucs <= 0xff60) ||    // Fullwidth Forms\n        (ucs >= 0xffe0 && ucs <= 0xffe6) ||\n        (ucs >= 0x20000 && ucs <= 0x2fffd) ||\n        (ucs >= 0x30000 && ucs <= 0x3fffd)));\n}\n\nfunction bisearch(ucs) {\n  var min = 0\n  var max = combining.length - 1\n  var mid\n\n  if (ucs < combining[0][0] || ucs > combining[max][1]) return false\n\n  while (max >= min) {\n    mid = Math.floor((min + max) / 2)\n    if (ucs > combining[mid][1]) min = mid + 1\n    else if (ucs < combining[mid][0]) max = mid - 1\n    else return true\n  }\n\n  return false\n}\n","/**@license\n *       __ _____                     ________                              __\n *      / // _  /__ __ _____ ___ __ _/__  ___/__ ___ ______ __ __  __ ___  / /\n *  __ / // // // // // _  // _// // / / // _  // _//     // //  \\/ // _ \\/ /\n * /  / // // // // // ___// / / // / / // ___// / / / / // // /\\  // // / /__\n * \\___//____ \\\\___//____//_/ _\\_  / /_//____//_/ /_/ /_//_//_/ /_/ \\__\\_\\___/\n *           \\/              /____/                              version 2.24.0\n *\n * This file is part of jQuery Terminal. https://terminal.jcubic.pl\n *\n * Copyright (c) 2010-2021 Jakub T. Jankiewicz <https://jcubic.pl/m>e\n * Released under the MIT license\n *\n * Contains:\n *\n * Storage plugin Distributed under the MIT License\n * modified to work from Data URIs that block storage and cookies in Chrome\n * Copyright (c) 2010 Dave Schindler\n *\n * jQuery Timers licenced with the WTFPL\n * <http://jquery.offput.ca/timers/>\n *\n * Cross-Browser Split 1.1.1\n * Copyright 2007-2012 Steven Levithan <stevenlevithan.com>\n * Available under the MIT License\n *\n * jQuery Caret\n * Copyright (c) 2009, Gideon Sireling\n * 3 clause BSD License\n *\n * sprintf.js\n * Copyright (c) 2007-2013 Alexandru Marasteanu <hello at alexei dot ro>\n * licensed under 3 clause BSD license\n *\n * debounce function from Lodash\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * The MIT License\n *\n * emoji regex v9.0.0 by Mathias Bynens\n * MIT license\n *\n * broken image by Sophia Bai from the Noun Project (CC-BY)\n *\n * Date: Sat, 22 May 2021 11:55:42 +0000\n */\n/* global define, Map */\n/* eslint-disable */\n/* istanbul ignore next */\n(function(ctx) {\n    var sprintf = function() {\n        if (!sprintf.cache.hasOwnProperty(arguments[0])) {\n            sprintf.cache[arguments[0]] = sprintf.parse(arguments[0]);\n        }\n        return sprintf.format.call(null, sprintf.cache[arguments[0]], arguments);\n    };\n    sprintf.format = function(parse_tree, argv) {\n        var cursor = 1, tree_length = parse_tree.length, node_type = '', arg, output = [], i, k, match, pad, pad_character, pad_length;\n        for (i = 0; i < tree_length; i++) {\n            node_type = get_type(parse_tree[i]);\n            if (node_type === 'string') {\n                output.push(parse_tree[i]);\n            }\n            else if (node_type === 'array') {\n                match = parse_tree[i]; // convenience purposes only\n                if (match[2]) { // keyword argument\n                    arg = argv[cursor];\n                    for (k = 0; k < match[2].length; k++) {\n                        if (!arg.hasOwnProperty(match[2][k])) {\n                            throw(sprintf('[sprintf] property \"%s\" does not exist', match[2][k]));\n                        }\n                        arg = arg[match[2][k]];\n                    }\n                }\n                else if (match[1]) { // positional argument (explicit)\n                    arg = argv[match[1]];\n                }\n                else { // positional argument (implicit)\n                    arg = argv[cursor++];\n                }\n\n                if (/[^s]/.test(match[8]) && (get_type(arg) !== 'number')) {\n                    throw(sprintf('[sprintf] expecting number but found %s', get_type(arg)));\n                }\n                switch (match[8]) {\n                    case 'b': arg = arg.toString(2); break;\n                    case 'c': arg = String.fromCharCode(arg); break;\n                    case 'd': arg = parseInt(arg, 10); break;\n                    case 'e': arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential(); break;\n                    case 'f': arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg); break;\n                    case 'o': arg = arg.toString(8); break;\n                    case 's': arg = ((arg = String(arg)) && match[7] ? arg.slice(0, match[7]) : arg); break;\n                    case 'u': arg = arg >>> 0; break;\n                    case 'x': arg = arg.toString(16); break;\n                    case 'X': arg = arg.toString(16).toUpperCase(); break;\n                }\n                arg = (/[def]/.test(match[8]) && match[3] && arg >= 0 ? ' +' + arg : arg);\n                pad_character = match[4] ? match[4] === '0' ? '0' : match[4].charAt(1) : ' ';\n                pad_length = match[6] - String(arg).length;\n                pad = match[6] ? str_repeat(pad_character, pad_length) : '';\n                output.push(match[5] ? arg + pad : pad + arg);\n            }\n        }\n        return output.join('');\n    };\n\n    sprintf.cache = {};\n\n    sprintf.parse = function(fmt) {\n        var _fmt = fmt, match = [], parse_tree = [], arg_names = 0;\n        while (_fmt) {\n            if ((match = /^[^\\x25]+/.exec(_fmt)) !== null) {\n                parse_tree.push(match[0]);\n            }\n            else if ((match = /^\\x25{2}/.exec(_fmt)) !== null) {\n                parse_tree.push('%');\n            }\n            else if ((match = /^\\x25(?:([1-9]\\d*)\\$|\\(([^\\)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-fosuxX])/.exec(_fmt)) !== null) {\n                if (match[2]) {\n                    arg_names |= 1;\n                    var field_list = [], replacement_field = match[2], field_match = [];\n                    if ((field_match = /^([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\n                        field_list.push(field_match[1]);\n                        while ((replacement_field = replacement_field.slice(field_match[0].length)) !== '') {\n                            if ((field_match = /^\\.([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\n                                field_list.push(field_match[1]);\n                            }\n                            else if ((field_match = /^\\[(\\d+)\\]/.exec(replacement_field)) !== null) {\n                                field_list.push(field_match[1]);\n                            }\n                            else {\n                                throw('[sprintf] huh?');\n                            }\n                        }\n                    }\n                    else {\n                        throw('[sprintf] huh?');\n                    }\n                    match[2] = field_list;\n                }\n                else {\n                    arg_names |= 2;\n                }\n                if (arg_names === 3) {\n                    throw('[sprintf] mixing positional and named placeholders is not (yet) supported');\n                }\n                parse_tree.push(match);\n            }\n            else {\n                throw('[sprintf] huh?');\n            }\n            _fmt = _fmt.slice(match[0].length);\n        }\n        return parse_tree;\n    };\n\n    var vsprintf = function(fmt, argv, _argv) {\n        _argv = argv.slice(0);\n        _argv.splice(0, 0, fmt);\n        return sprintf.apply(null, _argv);\n    };\n\n    /**\n     * helpers\n     */\n    function get_type(variable) {\n        return Object.prototype.toString.call(variable).slice(8, -1).toLowerCase();\n    }\n\n    function str_repeat(input, multiplier) {\n        for (var output = []; multiplier > 0; output[--multiplier] = input) {/* do nothing */}\n        return output.join('');\n    }\n\n    /**\n     * export to either browser or node.js\n     */\n    ctx.sprintf = sprintf;\n    ctx.vsprintf = vsprintf;\n})(typeof global !== \"undefined\" ? global : self || window);\n// -----------------------------------------------------------------------\n/* eslint-enable */\n// UMD taken from https://github.com/umdjs/umd\n(function(factory, undefined) {\n    var root = typeof window !== 'undefined' ? window : self || global;\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        // istanbul ignore next\n        define(['jquery', 'wcwidth'], function(jquery, wcwidth) {\n            factory(jquery, wcwidth, root);\n            return jquery;\n        });\n    } else if (typeof module === 'object' && module.exports) {\n        // Node/CommonJS\n        module.exports = function(root, jQuery, wcwidth) {\n            if (jQuery === undefined) {\n                // require('jQuery') returns a factory that requires window to\n                // build a jQuery instance, we normalize how we use modules\n                // that require this pattern but the window provided is a noop\n                // if it's defined (how jquery works)\n                if (typeof window !== 'undefined') {\n                    jQuery = require('jquery');\n                } else {\n                    jQuery = require('jquery')(root);\n                }\n            }\n            if (wcwidth === undefined) {\n                wcwidth = require('wcwidth');\n            }\n            factory(jQuery, wcwidth, root);\n            return jQuery;\n        };\n    } else {\n        // Browser\n        // istanbul ignore next\n        factory(root.jQuery, root.wcwidth, root);\n    }\n})(function($, wcwidth, root, undefined) {\n    'use strict';\n    // -----------------------------------------------------------------------\n    // :: debug functions\n    // -----------------------------------------------------------------------\n    /* eslint-disable */\n    /* istanbul ignore next */\n    function debug(str) {\n        if (false) {\n            console.log(str);\n            //$.terminal.active().echo(str);\n        }\n    }\n    /* eslint-enable */\n    // -----------------------------------------------------------------------\n    // :: Replacemenet for jQuery 2 deferred objects\n    // -----------------------------------------------------------------------\n    function DelayQueue() {\n        var callbacks = $.Callbacks();\n        var resolved = false;\n        this.resolve = function() {\n            callbacks.fire();\n            resolved = true;\n        };\n        this.add = function(fn) {\n            if (resolved) {\n                fn();\n            } else {\n                callbacks.add(fn);\n            }\n        };\n    }\n    // -----------------------------------------------------------------------\n    // :: map object to object\n    // -----------------------------------------------------------------------\n    $.omap = function(o, fn) {\n        var result = {};\n        $.each(o, function(k, v) {\n            result[k] = fn.call(o, k, v);\n        });\n        return result;\n    };\n    $.fn.text_length = function() {\n        return this.map(function() {\n            return $(this).text().length;\n        }).get().reduce(function(a, b) {\n            return a + b;\n        }, 0);\n    };\n    // -----------------------------------------------------------------------\n    // :: Deep clone of objects and arrays\n    // -----------------------------------------------------------------------\n    var Clone = {\n        clone_object: function(object) {\n            var tmp = {};\n            if (typeof object === 'object') {\n                if ($.isArray(object)) {\n                    return this.clone_array(object);\n                } else if (object === null) {\n                    return object;\n                } else {\n                    for (var key in object) {\n                        if ($.isArray(object[key])) {\n                            tmp[key] = this.clone_array(object[key]);\n                        } else if (typeof object[key] === 'object') {\n                            tmp[key] = this.clone_object(object[key]);\n                        } else {\n                            tmp[key] = object[key];\n                        }\n                    }\n                }\n            }\n            return tmp;\n        },\n        clone_array: function(array) {\n            if (!is_function(Array.prototype.map)) {\n                throw new Error(\"Your browser don't support ES5 array map \" +\n                                'use es5-shim');\n            }\n            return array.slice(0).map(function(item) {\n                if (typeof item === 'object') {\n                    return this.clone_object(item);\n                } else {\n                    return item;\n                }\n            }.bind(this));\n        }\n    };\n    var clone = function(object) {\n        return Clone.clone_object(object);\n    };\n    // -----------------------------------------------------------------------\n    // IE11 polyfill\n    // -----------------------------------------------------------------------\n    /* eslint-disable */\n    if ('Map' in root && !('clear' in Map.prototype)) {\n        Map.prototype.clear = function() {\n            this.forEach(function(value, key, map) {\n                map.delete(key);\n            });\n        };\n    }\n    // -----------------------------------------------------------------------\n    // :: Storage plugin\n    // -----------------------------------------------------------------------\n    var localStorage;\n    /* istanbul ignore next */\n    (function() {\n        var hasLS = function() {\n            try {\n                var testKey = 'test', storage = window.localStorage;\n                storage.setItem(testKey, '1');\n                storage.removeItem(testKey);\n                return true;\n            } catch (error) {\n                return false;\n            }\n        };\n        var hasCookies = function() {\n            try {\n                document.cookie.split(';');\n                return true;\n            } catch (e) {\n                return false;\n            }\n        };\n        // Private data\n        var isLS = hasLS();\n        // Private functions\n        function wls(n, v) {\n            var c;\n            if (typeof n === 'string' && typeof v === 'string') {\n                localStorage[n] = v;\n                return true;\n            } else if (typeof n === 'object' && typeof v === 'undefined') {\n                for (c in n) {\n                    if (n.hasOwnProperty(c)) {\n                        localStorage[c] = n[c];\n                    }\n                }\n                return true;\n            }\n            return false;\n        }\n        function wc(n, v) {\n            var dt, e, c;\n            dt = new Date();\n            dt.setTime(dt.getTime() + 31536000000);\n            e = '; expires=' + dt.toGMTString();\n            if (typeof n === 'string' && typeof v === 'string') {\n                document.cookie = n + '=' + v + e + '; path=/';\n                return true;\n            } else if (typeof n === 'object' && typeof v === 'undefined') {\n                for (c in n) {\n                    if (n.hasOwnProperty(c)) {\n                        document.cookie = c + '=' + n[c] + e + '; path=/';\n                    }\n                }\n                return true;\n            }\n            return false;\n        }\n        function rls(n) {\n            return localStorage[n];\n        }\n        function rc(n) {\n            var nn, ca, i, c;\n            nn = n + '=';\n            ca = document.cookie.split(';');\n            for (i = 0; i < ca.length; i++) {\n                c = ca[i];\n                while (c.charAt(0) === ' ') {\n                    c = c.slice(1, c.length);\n                }\n                if (c.indexOf(nn) === 0) {\n                    return c.slice(nn.length, c.length);\n                }\n            }\n            return null;\n        }\n        function dls(n) {\n            return delete localStorage[n];\n        }\n        function dc(n) {\n            return wc(n, '', -1);\n        }\n        /**\n         * Public API\n         * $.Storage.set(\"name\", \"value\")\n         * $.Storage.set({\"name1\":\"value1\", \"name2\":\"value2\", etc})\n         * $.Storage.get(\"name\")\n         * $.Storage.remove(\"name\")\n         */\n        if (!hasCookies() && !isLS) {\n            localStorage = {};\n            $.extend({\n                Storage: {\n                    set: wls,\n                    get: rls,\n                    remove: dls\n                }\n            });\n        } else {\n            if (isLS) {\n                localStorage = window.localStorage;\n            }\n            $.extend({\n                Storage: {\n                    set: isLS ? wls : wc,\n                    get: isLS ? rls : rc,\n                    remove: isLS ? dls : dc\n                }\n            });\n        }\n    })();\n    // -----------------------------------------------------------------------\n    // :: Debounce from Lodash\n    // -----------------------------------------------------------------------\n    /* istanbul ignore next */\n    var debounce = (function() {\n        var FUNC_ERROR_TEXT = 'Expected a function';\n        function isObject(value) {\n            var type = typeof value;\n            return value != null && (type == 'object' || type == 'function');\n        }\n        function now() {\n            return Date.now();\n        }\n        return function debounce(func, wait, options) {\n            var nativeMax = Math.max,\n                nativeMin = Math.min;\n\n            var lastArgs,\n                lastThis,\n                maxWait,\n                result,\n                timerId,\n                lastCallTime,\n                lastInvokeTime = 0,\n                leading = false,\n                maxing = false,\n                trailing = true;\n\n            if (typeof func != 'function') {\n                throw new TypeError(FUNC_ERROR_TEXT);\n            }\n            wait = wait || 0;\n            if (isObject(options)) {\n                leading = !!options.leading;\n                maxing = 'maxWait' in options;\n                maxWait = maxing ? nativeMax(options.maxWait || 0, wait) : maxWait;\n                trailing = 'trailing' in options ? !!options.trailing : trailing;\n            }\n\n            function invokeFunc(time) {\n                var args = lastArgs,\n                    thisArg = lastThis;\n\n                lastArgs = lastThis = undefined;\n                lastInvokeTime = time;\n                result = func.apply(thisArg, args);\n                return result;\n            }\n\n            function leadingEdge(time) {\n                // Reset any `maxWait` timer.\n                lastInvokeTime = time;\n                // Start the timer for the trailing edge.\n                timerId = setTimeout(timerExpired, wait);\n                // Invoke the leading edge.\n                return leading ? invokeFunc(time) : result;\n            }\n\n            function remainingWait(time) {\n                var timeSinceLastCall = time - lastCallTime,\n                    timeSinceLastInvoke = time - lastInvokeTime,\n                    timeWaiting = wait - timeSinceLastCall;\n\n                return maxing\n                    ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n                    : timeWaiting;\n            }\n\n            function shouldInvoke(time) {\n                var timeSinceLastCall = time - lastCallTime,\n                    timeSinceLastInvoke = time - lastInvokeTime;\n\n                // Either this is the first call, activity has stopped and we're at the\n                // trailing edge, the system time has gone backwards and we're treating\n                // it as the trailing edge, or we've hit the `maxWait` limit.\n                return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n                        (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n            }\n\n            function timerExpired() {\n                var time = now();\n                if (shouldInvoke(time)) {\n                    return trailingEdge(time);\n                }\n                // Restart the timer.\n                timerId = setTimeout(timerExpired, remainingWait(time));\n            }\n\n            function trailingEdge(time) {\n                timerId = undefined;\n\n                // Only invoke if we have `lastArgs` which means `func` has been\n                // debounced at least once.\n                if (trailing && lastArgs) {\n                    return invokeFunc(time);\n                }\n                lastArgs = lastThis = undefined;\n                return result;\n            }\n\n            function cancel() {\n                if (timerId !== undefined) {\n                    clearTimeout(timerId);\n                }\n                lastInvokeTime = 0;\n                lastArgs = lastCallTime = lastThis = timerId = undefined;\n            }\n\n            function flush() {\n                return timerId === undefined ? result : trailingEdge(now());\n            }\n\n            function debounced() {\n                var time = now(),\n                    isInvoking = shouldInvoke(time);\n\n                lastArgs = arguments;\n                lastThis = this;\n                lastCallTime = time;\n\n                if (isInvoking) {\n                    if (timerId === undefined) {\n                        return leadingEdge(lastCallTime);\n                    }\n                    if (maxing) {\n                        // Handle invocations in a tight loop.\n                        timerId = setTimeout(timerExpired, wait);\n                        return invokeFunc(lastCallTime);\n                    }\n                }\n                if (timerId === undefined) {\n                    timerId = setTimeout(timerExpired, wait);\n                }\n                return result;\n            }\n            debounced.cancel = cancel;\n            debounced.flush = flush;\n            return debounced;\n        };\n    })();\n    // -----------------------------------------------------------------------\n    // :: jQuery Timers\n    // -----------------------------------------------------------------------\n    var jQuery = $;\n    /* istanbul ignore next */\n    (function($) {\n        jQuery.fn.extend({\n            everyTime: function(interval, label, fn, times, belay) {\n                return this.each(function() {\n                    jQuery.timer.add(this, interval, label, fn, times, belay);\n                });\n            },\n            oneTime: function(interval, label, fn) {\n                return this.each(function() {\n                    jQuery.timer.add(this, interval, label, fn, 1);\n                });\n            },\n            stopTime: function(label, fn) {\n                return this.each(function() {\n                    jQuery.timer.remove(this, label, fn);\n                });\n            }\n        });\n\n        jQuery.extend({\n            timer: {\n                guid: 1,\n                global: {},\n                regex: /^([0-9]+)\\s*(.*s)?$/,\n                powers: {\n                    // Yeah this is major overkill...\n                    'ms': 1,\n                    'cs': 10,\n                    'ds': 100,\n                    's': 1000,\n                    'das': 10000,\n                    'hs': 100000,\n                    'ks': 1000000\n                },\n                timeParse: function(value) {\n                    if (value === undefined || value === null) {\n                        return null;\n                    }\n                    var result = this.regex.exec(jQuery.trim(value.toString()));\n                    if (result[2]) {\n                        var num = parseInt(result[1], 10);\n                        var mult = this.powers[result[2]] || 1;\n                        return num * mult;\n                    } else {\n                        return value;\n                    }\n                },\n                add: function(element, interval, label, fn, times, belay) {\n                    var counter = 0;\n\n                    if (jQuery.isFunction(label)) {\n                        if (!times) {\n                            times = fn;\n                        }\n                        fn = label;\n                        label = interval;\n                    }\n\n                    interval = jQuery.timer.timeParse(interval);\n\n                    if (typeof interval !== 'number' ||\n                        isNaN(interval) ||\n                        interval <= 0) {\n                        return;\n                    }\n                    if (times && times.constructor !== Number) {\n                        belay = !!times;\n                        times = 0;\n                    }\n\n                    times = times || 0;\n                    belay = belay || false;\n\n                    if (!element.$timers) {\n                        element.$timers = {};\n                    }\n                    if (!element.$timers[label]) {\n                        element.$timers[label] = {};\n                    }\n                    fn.$timerID = fn.$timerID || this.guid++;\n\n                    var handler = function() {\n                        if (belay && handler.inProgress) {\n                            return;\n                        }\n                        handler.inProgress = true;\n                        if ((++counter > times && times !== 0) ||\n                            fn.call(element, counter) === false) {\n                            jQuery.timer.remove(element, label, fn);\n                        }\n                        handler.inProgress = false;\n                    };\n\n                    handler.$timerID = fn.$timerID;\n\n                    if (!element.$timers[label][fn.$timerID]) {\n                        element.$timers[label][fn.$timerID] = setInterval(handler, interval);\n                    }\n\n                    if (!this.global[label]) {\n                        this.global[label] = [];\n                    }\n                    this.global[label].push(element);\n\n                },\n                remove: function(element, label, fn) {\n                    var timers = element.$timers, ret;\n\n                    if (timers) {\n\n                        if (!label) {\n                            for (var lab in timers) {\n                                if (timers.hasOwnProperty(lab)) {\n                                    this.remove(element, lab, fn);\n                                }\n                            }\n                        } else if (timers[label]) {\n                            if (fn) {\n                                if (fn.$timerID) {\n                                    clearInterval(timers[label][fn.$timerID]);\n                                    delete timers[label][fn.$timerID];\n                                }\n                            } else {\n                                for (var _fn in timers[label]) {\n                                    if (timers[label].hasOwnProperty(_fn)) {\n                                        clearInterval(timers[label][_fn]);\n                                        delete timers[label][_fn];\n                                    }\n                                }\n                            }\n\n                            for (ret in timers[label]) {\n                                if (timers[label].hasOwnProperty(ret)) {\n                                    break;\n                                }\n                            }\n                            if (!ret) {\n                                ret = null;\n                                delete timers[label];\n                            }\n                        }\n\n                        for (ret in timers) {\n                            if (timers.hasOwnProperty(ret)) {\n                                break;\n                            }\n                        }\n                        if (!ret) {\n                            element.$timers = null;\n                        }\n                    }\n                }\n            }\n        });\n        if (/(msie) ([\\w.]+)/.exec(navigator.userAgent.toLowerCase())) {\n            $(window).one('unload', function() {\n                var global = jQuery.timer.global;\n                for (var label in global) {\n                    if (global.hasOwnProperty(label)) {\n                        var els = global[label], i = els.length;\n                        while (--i) {\n                            jQuery.timer.remove(els[i], label);\n                        }\n                    }\n                }\n            });\n        }\n    })(jQuery);\n    // -----------------------------------------------------------------------\n    // :: CROSS BROWSER SPLIT\n    // -----------------------------------------------------------------------\n    /* istanbul ignore next */\n    (function(undef) {\n        // prevent double include\n\n        if (!String.prototype.split.toString().match(/\\[native/)) {\n            return;\n        }\n\n        var nativeSplit = String.prototype.split,\n        compliantExecNpcg = /()??/.exec(\"\")[1] === undef, // NPCG: nonparticipating capturing group\n        self;\n\n        self = function(str, separator, limit) {\n            // If `separator` is not a regex, use `nativeSplit`\n            if (Object.prototype.toString.call(separator) !== \"[object RegExp]\") {\n                return nativeSplit.call(str, separator, limit);\n            }\n            var output = [],\n            flags = (separator.ignoreCase ? \"i\" : \"\") +\n                (separator.multiline  ? \"m\" : \"\") +\n                (separator.extended   ? \"x\" : \"\") + // Proposed for ES6\n                (separator.sticky     ? \"y\" : \"\"), // Firefox 3+\n                lastLastIndex = 0,\n            // Make `global` and avoid `lastIndex` issues by working with a copy\n            separator2, match, lastIndex, lastLength;\n            separator = new RegExp(separator.source, flags + \"g\");\n            str += \"\"; // Type-convert\n            if (!compliantExecNpcg) {\n                // Doesn't need flags gy, but they don't hurt\n                separator2 = new RegExp(\"^\" + separator.source + \"$(?!\\\\s)\", flags);\n            }\n            /* Values for `limit`, per the spec:\n             * If undefined: 4294967295 // Math.pow(2, 32) - 1\n             * If 0, Infinity, or NaN: 0\n             * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;\n             * If negative number: 4294967296 - Math.floor(Math.abs(limit))\n             * If other: Type-convert, then use the above rules\n             */\n            // ? Math.pow(2, 32) - 1 : ToUint32(limit)\n            limit = limit === undef ? -1 >>> 0 : limit >>> 0;\n            while (match = separator.exec(str)) {\n                    // `separator.lastIndex` is not reliable cross-browser\n                    lastIndex = match.index + match[0].length;\n                    if (lastIndex > lastLastIndex) {\n                        output.push(str.slice(lastLastIndex, match.index));\n                        // Fix browsers whose `exec` methods don't consistently return `undefined` for\n                        // nonparticipating capturing groups\n                        if (!compliantExecNpcg && match.length > 1) {\n                            match[0].replace(separator2, function() {\n                                for (var i = 1; i < arguments.length - 2; i++) {\n                                    if (arguments[i] === undef) {\n                                        match[i] = undef;\n                                    }\n                                }\n                            });\n                        }\n                        if (match.length > 1 && match.index < str.length) {\n                            Array.prototype.push.apply(output, match.slice(1));\n                        }\n                        lastLength = match[0].length;\n                        lastLastIndex = lastIndex;\n                        if (output.length >= limit) {\n                            break;\n                        }\n                    }\n                    if (separator.lastIndex === match.index) {\n                        separator.lastIndex++; // Avoid an infinite loop\n                    }\n                }\n            if (lastLastIndex === str.length) {\n                if (lastLength || !separator.test(\"\")) {\n                    output.push(\"\");\n                }\n            } else {\n                output.push(str.slice(lastLastIndex));\n            }\n            return output.length > limit ? output.slice(0, limit) : output;\n        };\n\n        // For convenience\n        String.prototype.split = function(separator, limit) {\n            return self(this, separator, limit);\n        };\n\n        return self;\n\n    })();\n    // -----------------------------------------------------------------------\n    // :: jQuery Caret\n    // -----------------------------------------------------------------------\n    /* istanbul ignore next */\n    $.fn.caret = function(pos) {\n        var target = this[0];\n        var isContentEditable = target.contentEditable === 'true';\n        //get\n        if (arguments.length === 0) {\n            //HTML5\n            if (window.getSelection) {\n                //contenteditable\n                if (isContentEditable) {\n                    if (!this.is(':focus')) {\n                        target.focus();\n                    }\n                    var range1 = window.getSelection().getRangeAt(0),\n                    range2 = range1.cloneRange();\n                    range2.selectNodeContents(target);\n                    range2.setEnd(range1.endContainer, range1.endOffset);\n                    return range2.toString().length;\n                }\n                //textarea\n                return target.selectionStart;\n            }\n            //IE<9\n            if (document.selection) {\n                target.focus();\n                //contenteditable\n                if (isContentEditable) {\n                    var range1 = document.selection.createRange(),\n                    range2 = document.body.createTextRange();\n                    range2.moveToElementText(target);\n                    range2.setEndPoint('EndToEnd', range1);\n                    return range2.text.length;\n                }\n                //textarea\n                var pos = 0,\n                range = target.createTextRange(),\n                range2 = document.selection.createRange().duplicate(),\n                bookmark = range2.getBookmark();\n                range.moveToBookmark(bookmark);\n                while (range.moveStart('character', -1) !== 0) pos++;\n                return pos;\n            }\n            //not supported\n            return 0;\n        }\n        //set\n        if (pos === -1)\n            pos = this[isContentEditable? 'text' : 'val']().length;\n        //HTML5\n        if (window.getSelection) {\n            //contenteditable\n            if (isContentEditable) {\n                if (!this.is(':focus')) {\n                    target.focus();\n                }\n                var selection = window.getSelection();\n                selection.collapse(selection.focusNode, pos);\n            }\n            //textarea\n            else\n                target.setSelectionRange(pos, pos);\n        }\n        //IE<9\n        else if (document.body.createTextRange) {\n            var range = document.body.createTextRange();\n            range.moveToElementText(target);\n            range.moveStart('character', pos);\n            range.collapse(true);\n            range.select();\n        }\n        if (!isContentEditable && !this.is(':focus')) {\n            target.focus();\n        }\n        return pos;\n    };\n    /* eslint-enable */\n    // -----------------------------------------------------------------------\n    // :: callback based event handler plugin generator\n    // -----------------------------------------------------------------------\n    function make_callback_plugin(options) {\n        var factory_settings = $.extend({\n            init: $.noop,\n            destroy: $.noop,\n            name: 'event'\n        }, options);\n        return function(callback, options) {\n            var trigger = arguments.length === 0;\n            var unbind = arguments[0] === \"unbind\";\n            if (!trigger && !unbind && !is_function(callback)) {\n                throw new Error('Invalid argument, it need to a function or string ' +\n                                '\"unbind\" or no arguments.');\n            }\n            if (unbind) {\n                callback = is_function(arguments[1]) ? arguments[1] : null;\n            }\n            var data_name = 'callbacks_' + factory_settings.name;\n            return this.each(function() {\n                var $this = $(this);\n                var callbacks;\n                function handler(arg) {\n                    callbacks.fireWith($this, [arg]);\n                }\n                if (trigger || unbind) {\n                    callbacks = $this.data(data_name);\n                    if (trigger) {\n                        callbacks && callbacks.fire();\n                    } else {\n                        if (callback && callbacks) {\n                            callbacks.remove(callback);\n                            if (!callbacks.has()) {\n                                callbacks = null;\n                            }\n                        } else {\n                            callbacks = null;\n                        }\n                        if (!callbacks) {\n                            $this.removeData(data_name);\n                            factory_settings.destroy.call(this, handler, options);\n                        }\n                    }\n                } else if ($this.data(data_name)) {\n                    $(this).data(data_name).add(callback);\n                } else {\n                    callbacks = $.Callbacks();\n                    callbacks.add(callback);\n                    $this.data(data_name, callbacks);\n                    factory_settings.init.call(this, handler, options);\n                }\n            });\n        };\n    }\n    // -----------------------------------------------------------------------\n    // :: Cross-browser resize element plugin using sentinel iframe or\n    // :: resizeObserver\n    // -----------------------------------------------------------------------\n    $.fn.resizer = make_callback_plugin({\n        name: 'resize',\n        init: function(handler, options) {\n            var settings = $.extend({\n                prefix: ''\n            }, options);\n            var $this = $(this);\n            var resizer;\n            var first = true;\n            if ($this.is('body')) {\n                $(window).on('resize.resizer', handler);\n            } else if (window.ResizeObserver) {\n                resizer = new ResizeObserver(function() {\n                    if (!first) {\n                        handler();\n                    }\n                    first = false;\n                });\n                resizer.observe(this);\n                $this.data('observer', resizer);\n            } else {\n                var iframe = $('<iframe/>').addClass(settings.prefix + 'resizer')\n                    .appendTo(this)[0];\n                $(iframe.contentWindow).on('resize', handler);\n            }\n        },\n        destroy: function() {\n            var $this = $(this);\n            if (window.ResizeObserver) {\n                var observer = $this.data('observer');\n                if (observer) {\n                    observer.unobserve(this);\n                    $this.removeData('observer');\n                }\n            } else {\n                var iframe = $this.find('> iframe[class$=\"resizer\"]');\n                if (iframe.length) {\n                    // just in case of memory leaks in IE\n                    $(iframe[0].contentWindow).off('resize').remove();\n                    iframe.remove();\n                } else if ($this.is('body')) {\n                    $(window).off('resize.resizer');\n                }\n            }\n        }\n    });\n    // -----------------------------------------------------------------------\n    // :: mobile friendly scroll that work without scrollbar (for less)\n    // -----------------------------------------------------------------------\n    $.fn.touch_scroll = make_callback_plugin({\n        name: 'touch',\n        init: function(handler) {\n            var origin;\n            var previous;\n            $(this).on('touchstart.scroll', function(e) {\n                e = e.originalEvent;\n                if (e.target.tagName.toLowerCase() !== 'a' && e.touches.length === 1) {\n                    previous = origin = e.touches[0];\n                }\n            }).on('touchmove.scroll', function(e) {\n                e = e.originalEvent;\n                if (origin && e.touches.length === 1) {\n                    var current = e.touches[0];\n                    var ret = handler({\n                        origin: origin,\n                        previous: previous,\n                        current: current\n                    });\n                    if (ret === false) {\n                        e.preventDefault();\n                    }\n                    previous = current;\n                }\n            }).on('touchend.scroll', function() {\n                if (origin || previous) {\n                    origin = previous = null;\n                }\n            });\n        },\n        destroy: function() {\n            $(this).off('touchstart.scroll touchmove.scroll touchend.scroll');\n        }\n    });\n    // -----------------------------------------------------------------------\n    function jquery_resolve(value) {\n        var defer = jQuery.Deferred();\n        defer.resolve(value);\n        return defer.promise();\n    }\n    // -----------------------------------------------------------------------\n    function unpromise(value, callback, error) {\n        if (value !== undefined) {\n            if (is_function(value.catch)) {\n                value.catch(error);\n            }\n            if (is_function(value.done)) {\n                return value.done(callback);\n            } else if (is_function(value.then)) {\n                return value.then(callback);\n            } else if (value instanceof Array) {\n                var promises = value.filter(function(value) {\n                    return value && (is_function(value.done) || is_function(value.then));\n                });\n                if (promises.length) {\n                    var result = $.when.apply($, value).then(callback);\n                    if (is_function(value.catch)) {\n                        result.catch(error);\n                    }\n                    return result;\n                }\n            }\n            return callback(value);\n        }\n    }\n    // -----------------------------------------------------------------------\n    // :: based on https://github.com/zeusdeux/isInViewport\n    // :: work only vertically and on dom elements\n    // -----------------------------------------------------------------------\n    $.fn.is_fully_in_viewport = (function() {\n        function is_visible(node, container) {\n            var box = node.getBoundingClientRect();\n            var viewport = container[0].getBoundingClientRect();\n            var top = box.top - viewport.top;\n            var bottom = box.bottom - viewport.top;\n            var height = container.height();\n            return bottom > 0 && top <= height;\n        }\n        if (root.IntersectionObserver) {\n            return function(container) {\n                var node = this[0];\n                var defer = jQuery.Deferred();\n                var item_observer = new root.IntersectionObserver(function(entries) {\n                    defer.resolve(entries[0].isIntersecting && entries[0].ratio === 1);\n                    item_observer.unobserve(node);\n                }, {\n                    root: container[0]\n                });\n                item_observer.observe(node);\n                return defer.promise();\n            };\n        } else {\n            return function(container) {\n                return jquery_resolve(is_visible(this[0], container));\n            };\n        }\n    })();\n    // -------------------------------------------------------------------------\n    /* eslint-disable */\n    var entity_re = /(&(?:[a-z\\d]+|#\\d+|#x[a-f\\d]+);)/i;\n    // regex that match single character at begining and folowing combine character\n    // https://en.wikipedia.org/wiki/Combining_character\n    var combine_chr_re = /(.(?:[\\u0300-\\u036F]|[\\u1AB0-\\u1abE]|[\\u1DC0-\\u1DF9]|[\\u1DFB-\\u1DFF]|[\\u20D0-\\u20F0]|[\\uFE20-\\uFE2F])+)/;\n    // source: https://mathiasbynens.be/notes/javascript-unicode\n    var astral_symbols_re = /([\\uD800-\\uDBFF][\\uDC00-\\uDFFF])/;\n    // source: https://github.com/mathiasbynens/emoji-regex\n    var emoji_re = /(\\uD83C\\uDFF4\\uDB40\\uDC67\\uDB40\\uDC62(?:\\uDB40\\uDC77\\uDB40\\uDC6C\\uDB40\\uDC73|\\uDB40\\uDC73\\uDB40\\uDC63\\uDB40\\uDC74|\\uDB40\\uDC65\\uDB40\\uDC6E\\uDB40\\uDC67)\\uDB40\\uDC7F|\\uD83D\\uDC69\\u200D\\uD83D\\uDC69\\u200D(?:\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC67\\u200D(?:\\uD83D[\\uDC66\\uDC67]))|\\uD83D\\uDC68(?:\\uD83C\\uDFFF\\u200D(?:\\uD83E\\uDD1D\\u200D\\uD83D\\uDC68(?:\\uD83C[\\uDFFB-\\uDFFE])|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFE\\u200D(?:\\uD83E\\uDD1D\\u200D\\uD83D\\uDC68(?:\\uD83C[\\uDFFB-\\uDFFD\\uDFFF])|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFD\\u200D(?:\\uD83E\\uDD1D\\u200D\\uD83D\\uDC68(?:\\uD83C[\\uDFFB\\uDFFC\\uDFFE\\uDFFF])|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFC\\u200D(?:\\uD83E\\uDD1D\\u200D\\uD83D\\uDC68(?:\\uD83C[\\uDFFB\\uDFFD-\\uDFFF])|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFB\\u200D(?:\\uD83E\\uDD1D\\u200D\\uD83D\\uDC68(?:\\uD83C[\\uDFFC-\\uDFFF])|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\u200D(?:\\u2764\\uFE0F\\u200D(?:\\uD83D\\uDC8B\\u200D)?\\uD83D\\uDC68|(?:\\uD83D[\\uDC68\\uDC69])\\u200D(?:\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC67\\u200D(?:\\uD83D[\\uDC66\\uDC67]))|\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC67\\u200D(?:\\uD83D[\\uDC66\\uDC67])|(?:\\uD83D[\\uDC68\\uDC69])\\u200D(?:\\uD83D[\\uDC66\\uDC67])|[\\u2695\\u2696\\u2708]\\uFE0F|\\uD83D[\\uDC66\\uDC67]|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|(?:\\uD83C\\uDFFF\\u200D[\\u2695\\u2696\\u2708]|\\uD83C\\uDFFE\\u200D[\\u2695\\u2696\\u2708]|\\uD83C\\uDFFD\\u200D[\\u2695\\u2696\\u2708]|\\uD83C\\uDFFC\\u200D[\\u2695\\u2696\\u2708]|\\uD83C\\uDFFB\\u200D[\\u2695\\u2696\\u2708])\\uFE0F|\\uD83C[\\uDFFB-\\uDFFF])|\\uD83E\\uDDD1(?:(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D(?:\\uD83E\\uDD1D\\u200D\\uD83E\\uDDD1(?:\\uD83C[\\uDFFB-\\uDFFF])|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF84\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\u200D(?:\\uD83E\\uDD1D\\u200D\\uD83E\\uDDD1|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF84\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD]))|\\uD83D\\uDC69(?:\\u200D(?:\\u2764\\uFE0F\\u200D(?:\\uD83D\\uDC8B\\u200D(?:\\uD83D[\\uDC68\\uDC69])|\\uD83D[\\uDC68\\uDC69])|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFF\\u200D(?:\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFE\\u200D(?:\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFD\\u200D(?:\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFC\\u200D(?:\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFB\\u200D(?:\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD]))|\\uD83D\\uDC69\\uD83C\\uDFFF\\u200D\\uD83E\\uDD1D\\u200D(?:\\uD83D[\\uDC68\\uDC69])(?:\\uD83C[\\uDFFB-\\uDFFE])|\\uD83D\\uDC69\\uD83C\\uDFFE\\u200D\\uD83E\\uDD1D\\u200D(?:\\uD83D[\\uDC68\\uDC69])(?:\\uD83C[\\uDFFB-\\uDFFD\\uDFFF])|\\uD83D\\uDC69\\uD83C\\uDFFD\\u200D\\uD83E\\uDD1D\\u200D(?:\\uD83D[\\uDC68\\uDC69])(?:\\uD83C[\\uDFFB\\uDFFC\\uDFFE\\uDFFF])|\\uD83D\\uDC69\\uD83C\\uDFFC\\u200D\\uD83E\\uDD1D\\u200D(?:\\uD83D[\\uDC68\\uDC69])(?:\\uD83C[\\uDFFB\\uDFFD-\\uDFFF])|\\uD83D\\uDC69\\uD83C\\uDFFB\\u200D\\uD83E\\uDD1D\\u200D(?:\\uD83D[\\uDC68\\uDC69])(?:\\uD83C[\\uDFFC-\\uDFFF])|\\uD83D\\uDC69\\u200D\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC69\\u200D\\uD83D\\uDC69\\u200D(?:\\uD83D[\\uDC66\\uDC67])|(?:\\uD83D\\uDC41\\uFE0F\\u200D\\uD83D\\uDDE8|\\uD83D\\uDC69(?:\\uD83C\\uDFFF\\u200D[\\u2695\\u2696\\u2708]|\\uD83C\\uDFFE\\u200D[\\u2695\\u2696\\u2708]|\\uD83C\\uDFFD\\u200D[\\u2695\\u2696\\u2708]|\\uD83C\\uDFFC\\u200D[\\u2695\\u2696\\u2708]|\\uD83C\\uDFFB\\u200D[\\u2695\\u2696\\u2708]|\\u200D[\\u2695\\u2696\\u2708])|\\uD83C\\uDFF3\\uFE0F\\u200D\\u26A7|\\uD83E\\uDDD1(?:(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D[\\u2695\\u2696\\u2708]|\\u200D[\\u2695\\u2696\\u2708])|\\uD83D\\uDC3B\\u200D\\u2744|(?:\\uD83C[\\uDFC3\\uDFC4\\uDFCA]|\\uD83D[\\uDC6E\\uDC70\\uDC71\\uDC73\\uDC77\\uDC81\\uDC82\\uDC86\\uDC87\\uDE45-\\uDE47\\uDE4B\\uDE4D\\uDE4E\\uDEA3\\uDEB4-\\uDEB6]|\\uD83E[\\uDD26\\uDD35\\uDD37-\\uDD39\\uDD3D\\uDD3E\\uDDB8\\uDDB9\\uDDCD-\\uDDCF\\uDDD6-\\uDDDD])(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D[\\u2640\\u2642]|(?:\\u26F9|\\uD83C[\\uDFCB\\uDFCC]|\\uD83D\\uDD75)(?:\\uFE0F\\u200D[\\u2640\\u2642]|(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D[\\u2640\\u2642])|\\uD83C\\uDFF4\\u200D\\u2620|(?:\\uD83C[\\uDFC3\\uDFC4\\uDFCA]|\\uD83D[\\uDC6E-\\uDC71\\uDC73\\uDC77\\uDC81\\uDC82\\uDC86\\uDC87\\uDE45-\\uDE47\\uDE4B\\uDE4D\\uDE4E\\uDEA3\\uDEB4-\\uDEB6]|\\uD83E[\\uDD26\\uDD35\\uDD37-\\uDD39\\uDD3C-\\uDD3E\\uDDB8\\uDDB9\\uDDCD-\\uDDCF\\uDDD6-\\uDDDF])\\u200D[\\u2640\\u2642])\\uFE0F|\\uD83D\\uDC69\\u200D\\uD83D\\uDC67\\u200D(?:\\uD83D[\\uDC66\\uDC67])|\\uD83C\\uDFF3\\uFE0F\\u200D\\uD83C\\uDF08|\\uD83D\\uDC69\\u200D\\uD83D\\uDC67|\\uD83D\\uDC69\\u200D\\uD83D\\uDC66|\\uD83D\\uDC15\\u200D\\uD83E\\uDDBA|\\uD83C\\uDDFD\\uD83C\\uDDF0|\\uD83C\\uDDF6\\uD83C\\uDDE6|\\uD83C\\uDDF4\\uD83C\\uDDF2|\\uD83D\\uDC08\\u200D\\u2B1B|\\uD83E\\uDDD1(?:\\uD83C[\\uDFFB-\\uDFFF])|\\uD83D\\uDC69(?:\\uD83C[\\uDFFB-\\uDFFF])|\\uD83C\\uDDFF(?:\\uD83C[\\uDDE6\\uDDF2\\uDDFC])|\\uD83C\\uDDFE(?:\\uD83C[\\uDDEA\\uDDF9])|\\uD83C\\uDDFC(?:\\uD83C[\\uDDEB\\uDDF8])|\\uD83C\\uDDFB(?:\\uD83C[\\uDDE6\\uDDE8\\uDDEA\\uDDEC\\uDDEE\\uDDF3\\uDDFA])|\\uD83C\\uDDFA(?:\\uD83C[\\uDDE6\\uDDEC\\uDDF2\\uDDF3\\uDDF8\\uDDFE\\uDDFF])|\\uD83C\\uDDF9(?:\\uD83C[\\uDDE6\\uDDE8\\uDDE9\\uDDEB-\\uDDED\\uDDEF-\\uDDF4\\uDDF7\\uDDF9\\uDDFB\\uDDFC\\uDDFF])|\\uD83C\\uDDF8(?:\\uD83C[\\uDDE6-\\uDDEA\\uDDEC-\\uDDF4\\uDDF7-\\uDDF9\\uDDFB\\uDDFD-\\uDDFF])|\\uD83C\\uDDF7(?:\\uD83C[\\uDDEA\\uDDF4\\uDDF8\\uDDFA\\uDDFC])|\\uD83C\\uDDF5(?:\\uD83C[\\uDDE6\\uDDEA-\\uDDED\\uDDF0-\\uDDF3\\uDDF7-\\uDDF9\\uDDFC\\uDDFE])|\\uD83C\\uDDF3(?:\\uD83C[\\uDDE6\\uDDE8\\uDDEA-\\uDDEC\\uDDEE\\uDDF1\\uDDF4\\uDDF5\\uDDF7\\uDDFA\\uDDFF])|\\uD83C\\uDDF2(?:\\uD83C[\\uDDE6\\uDDE8-\\uDDED\\uDDF0-\\uDDFF])|\\uD83C\\uDDF1(?:\\uD83C[\\uDDE6-\\uDDE8\\uDDEE\\uDDF0\\uDDF7-\\uDDFB\\uDDFE])|\\uD83C\\uDDF0(?:\\uD83C[\\uDDEA\\uDDEC-\\uDDEE\\uDDF2\\uDDF3\\uDDF5\\uDDF7\\uDDFC\\uDDFE\\uDDFF])|\\uD83C\\uDDEF(?:\\uD83C[\\uDDEA\\uDDF2\\uDDF4\\uDDF5])|\\uD83C\\uDDEE(?:\\uD83C[\\uDDE8-\\uDDEA\\uDDF1-\\uDDF4\\uDDF6-\\uDDF9])|\\uD83C\\uDDED(?:\\uD83C[\\uDDF0\\uDDF2\\uDDF3\\uDDF7\\uDDF9\\uDDFA])|\\uD83C\\uDDEC(?:\\uD83C[\\uDDE6\\uDDE7\\uDDE9-\\uDDEE\\uDDF1-\\uDDF3\\uDDF5-\\uDDFA\\uDDFC\\uDDFE])|\\uD83C\\uDDEB(?:\\uD83C[\\uDDEE-\\uDDF0\\uDDF2\\uDDF4\\uDDF7])|\\uD83C\\uDDEA(?:\\uD83C[\\uDDE6\\uDDE8\\uDDEA\\uDDEC\\uDDED\\uDDF7-\\uDDFA])|\\uD83C\\uDDE9(?:\\uD83C[\\uDDEA\\uDDEC\\uDDEF\\uDDF0\\uDDF2\\uDDF4\\uDDFF])|\\uD83C\\uDDE8(?:\\uD83C[\\uDDE6\\uDDE8\\uDDE9\\uDDEB-\\uDDEE\\uDDF0-\\uDDF5\\uDDF7\\uDDFA-\\uDDFF])|\\uD83C\\uDDE7(?:\\uD83C[\\uDDE6\\uDDE7\\uDDE9-\\uDDEF\\uDDF1-\\uDDF4\\uDDF6-\\uDDF9\\uDDFB\\uDDFC\\uDDFE\\uDDFF])|\\uD83C\\uDDE6(?:\\uD83C[\\uDDE8-\\uDDEC\\uDDEE\\uDDF1\\uDDF2\\uDDF4\\uDDF6-\\uDDFA\\uDDFC\\uDDFD\\uDDFF])|[#\\*0-9]\\uFE0F\\u20E3|(?:\\uD83C[\\uDFC3\\uDFC4\\uDFCA]|\\uD83D[\\uDC6E\\uDC70\\uDC71\\uDC73\\uDC77\\uDC81\\uDC82\\uDC86\\uDC87\\uDE45-\\uDE47\\uDE4B\\uDE4D\\uDE4E\\uDEA3\\uDEB4-\\uDEB6]|\\uD83E[\\uDD26\\uDD35\\uDD37-\\uDD39\\uDD3D\\uDD3E\\uDDB8\\uDDB9\\uDDCD-\\uDDCF\\uDDD6-\\uDDDD])(?:\\uD83C[\\uDFFB-\\uDFFF])|(?:\\u26F9|\\uD83C[\\uDFCB\\uDFCC]|\\uD83D\\uDD75)(?:\\uD83C[\\uDFFB-\\uDFFF])|(?:[\\u261D\\u270A-\\u270D]|\\uD83C[\\uDF85\\uDFC2\\uDFC7]|\\uD83D[\\uDC42\\uDC43\\uDC46-\\uDC50\\uDC66\\uDC67\\uDC6B-\\uDC6D\\uDC72\\uDC74-\\uDC76\\uDC78\\uDC7C\\uDC83\\uDC85\\uDCAA\\uDD74\\uDD7A\\uDD90\\uDD95\\uDD96\\uDE4C\\uDE4F\\uDEC0\\uDECC]|\\uD83E[\\uDD0C\\uDD0F\\uDD18-\\uDD1C\\uDD1E\\uDD1F\\uDD30-\\uDD34\\uDD36\\uDD77\\uDDB5\\uDDB6\\uDDBB\\uDDD2-\\uDDD5])(?:\\uD83C[\\uDFFB-\\uDFFF])|(?:[\\u231A\\u231B\\u23E9-\\u23EC\\u23F0\\u23F3\\u25FD\\u25FE\\u2614\\u2615\\u2648-\\u2653\\u267F\\u2693\\u26A1\\u26AA\\u26AB\\u26BD\\u26BE\\u26C4\\u26C5\\u26CE\\u26D4\\u26EA\\u26F2\\u26F3\\u26F5\\u26FA\\u26FD\\u2705\\u270A\\u270B\\u2728\\u274C\\u274E\\u2753-\\u2755\\u2757\\u2795-\\u2797\\u27B0\\u27BF\\u2B1B\\u2B1C\\u2B50\\u2B55]|\\uD83C[\\uDC04\\uDCCF\\uDD8E\\uDD91-\\uDD9A\\uDDE6-\\uDDFF\\uDE01\\uDE1A\\uDE2F\\uDE32-\\uDE36\\uDE38-\\uDE3A\\uDE50\\uDE51\\uDF00-\\uDF20\\uDF2D-\\uDF35\\uDF37-\\uDF7C\\uDF7E-\\uDF93\\uDFA0-\\uDFCA\\uDFCF-\\uDFD3\\uDFE0-\\uDFF0\\uDFF4\\uDFF8-\\uDFFF]|\\uD83D[\\uDC00-\\uDC3E\\uDC40\\uDC42-\\uDCFC\\uDCFF-\\uDD3D\\uDD4B-\\uDD4E\\uDD50-\\uDD67\\uDD7A\\uDD95\\uDD96\\uDDA4\\uDDFB-\\uDE4F\\uDE80-\\uDEC5\\uDECC\\uDED0-\\uDED2\\uDED5-\\uDED7\\uDEEB\\uDEEC\\uDEF4-\\uDEFC\\uDFE0-\\uDFEB]|\\uD83E[\\uDD0C-\\uDD3A\\uDD3C-\\uDD45\\uDD47-\\uDD78\\uDD7A-\\uDDCB\\uDDCD-\\uDDFF\\uDE70-\\uDE74\\uDE78-\\uDE7A\\uDE80-\\uDE86\\uDE90-\\uDEA8\\uDEB0-\\uDEB6\\uDEC0-\\uDEC2\\uDED0-\\uDED6])|(?:[#\\*0-9\\xA9\\xAE\\u203C\\u2049\\u2122\\u2139\\u2194-\\u2199\\u21A9\\u21AA\\u231A\\u231B\\u2328\\u23CF\\u23E9-\\u23F3\\u23F8-\\u23FA\\u24C2\\u25AA\\u25AB\\u25B6\\u25C0\\u25FB-\\u25FE\\u2600-\\u2604\\u260E\\u2611\\u2614\\u2615\\u2618\\u261D\\u2620\\u2622\\u2623\\u2626\\u262A\\u262E\\u262F\\u2638-\\u263A\\u2640\\u2642\\u2648-\\u2653\\u265F\\u2660\\u2663\\u2665\\u2666\\u2668\\u267B\\u267E\\u267F\\u2692-\\u2697\\u2699\\u269B\\u269C\\u26A0\\u26A1\\u26A7\\u26AA\\u26AB\\u26B0\\u26B1\\u26BD\\u26BE\\u26C4\\u26C5\\u26C8\\u26CE\\u26CF\\u26D1\\u26D3\\u26D4\\u26E9\\u26EA\\u26F0-\\u26F5\\u26F7-\\u26FA\\u26FD\\u2702\\u2705\\u2708-\\u270D\\u270F\\u2712\\u2714\\u2716\\u271D\\u2721\\u2728\\u2733\\u2734\\u2744\\u2747\\u274C\\u274E\\u2753-\\u2755\\u2757\\u2763\\u2764\\u2795-\\u2797\\u27A1\\u27B0\\u27BF\\u2934\\u2935\\u2B05-\\u2B07\\u2B1B\\u2B1C\\u2B50\\u2B55\\u3030\\u303D\\u3297\\u3299]|\\uD83C[\\uDC04\\uDCCF\\uDD70\\uDD71\\uDD7E\\uDD7F\\uDD8E\\uDD91-\\uDD9A\\uDDE6-\\uDDFF\\uDE01\\uDE02\\uDE1A\\uDE2F\\uDE32-\\uDE3A\\uDE50\\uDE51\\uDF00-\\uDF21\\uDF24-\\uDF93\\uDF96\\uDF97\\uDF99-\\uDF9B\\uDF9E-\\uDFF0\\uDFF3-\\uDFF5\\uDFF7-\\uDFFF]|\\uD83D[\\uDC00-\\uDCFD\\uDCFF-\\uDD3D\\uDD49-\\uDD4E\\uDD50-\\uDD67\\uDD6F\\uDD70\\uDD73-\\uDD7A\\uDD87\\uDD8A-\\uDD8D\\uDD90\\uDD95\\uDD96\\uDDA4\\uDDA5\\uDDA8\\uDDB1\\uDDB2\\uDDBC\\uDDC2-\\uDDC4\\uDDD1-\\uDDD3\\uDDDC-\\uDDDE\\uDDE1\\uDDE3\\uDDE8\\uDDEF\\uDDF3\\uDDFA-\\uDE4F\\uDE80-\\uDEC5\\uDECB-\\uDED2\\uDED5-\\uDED7\\uDEE0-\\uDEE5\\uDEE9\\uDEEB\\uDEEC\\uDEF0\\uDEF3-\\uDEFC\\uDFE0-\\uDFEB]|\\uD83E[\\uDD0C-\\uDD3A\\uDD3C-\\uDD45\\uDD47-\\uDD78\\uDD7A-\\uDDCB\\uDDCD-\\uDDFF\\uDE70-\\uDE74\\uDE78-\\uDE7A\\uDE80-\\uDE86\\uDE90-\\uDEA8\\uDEB0-\\uDEB6\\uDEC0-\\uDEC2\\uDED0-\\uDED6])\\uFE0F?|(?:[\\u261D\\u26F9\\u270A-\\u270D]|\\uD83C[\\uDF85\\uDFC2-\\uDFC4\\uDFC7\\uDFCA-\\uDFCC]|\\uD83D[\\uDC42\\uDC43\\uDC46-\\uDC50\\uDC66-\\uDC78\\uDC7C\\uDC81-\\uDC83\\uDC85-\\uDC87\\uDC8F\\uDC91\\uDCAA\\uDD74\\uDD75\\uDD7A\\uDD90\\uDD95\\uDD96\\uDE45-\\uDE47\\uDE4B-\\uDE4F\\uDEA3\\uDEB4-\\uDEB6\\uDEC0\\uDECC]|\\uD83E[\\uDD0C\\uDD0F\\uDD18-\\uDD1F\\uDD26\\uDD30-\\uDD39\\uDD3C-\\uDD3E\\uDD77\\uDDB5\\uDDB6\\uDDB8\\uDDB9\\uDDBB\\uDDCD-\\uDDCF\\uDDD1-\\uDDDD]))/;\n    // https://stackoverflow.com/questions/11381673/detecting-a-mobile-browser\n    var mobile_re = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i;\n    var tablet_re = /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i;\n    var format_split_re = /(\\[\\[(?:-?[@!gbiuso])*;[^;]*;[^\\]]*\\](?:[^\\]\\\\]*(?:\\\\\\\\)*\\\\\\][^\\]]*|[^\\]]*|[^[]*\\[[^\\]]*)\\]?)/i;\n    var format_parts_re = /\\[\\[((?:-?[@!gbiuso])*);([^;]*);([^;\\]]*);?([^;\\]]*);?([^\\]]*)\\]([^\\]\\\\]*\\\\\\][^\\]]*|[^\\]]*|[^[]*\\[[^\\]]+)\\]?/gi;\n    var format_re = /\\[\\[((?:-?[@!gbiuso])*;[^;\\]]*;[^;\\]]*(?:;|[^\\]()]*);?[^\\]]*)\\]([^\\]]*\\\\\\][^\\]]*|[^\\]]*|[^[]*\\[[^\\]]*)\\]?/gi;\n    var format_exist_re = /\\[\\[((?:-?[@!gbiuso])*;[^;\\]]*;[^;\\]]*(?:;|[^\\]()]*);?[^\\]]*)\\]([^\\]]*\\\\\\][^\\]]*|[^\\]]*|[^[]*\\[[^\\]]*)\\]/gi;\n    var format_full_re = /^(\\[\\[(?:(?:-?[@!gbiuso])*;[^;\\]]*;[^;\\]]*(?:;|[^\\]()]*);?[^\\]]*)\\])([^\\]]*\\\\\\][^\\]]*|[^\\]]*|[^[]*\\[[^\\]]*)(\\])$/i;\n    var format_begin_re = /(\\[\\[(?:-?[@!gbiuso])*;[^;]*;[^\\]]*\\])/i;\n    var format_start_re = /^(\\[\\[(?:-?[@!gbiuso])*;[^;]*;[^\\]]*\\])/i;\n    var format_end_re = /\\[\\[(?:-?[@!gbiuso])*;[^;]*;[^\\]]*\\]?$/i;\n    var self_closing_re = /^(?:\\[\\[)?[^;]*@[^;]*;/;\n    var color_re = /^(?:#([0-9a-f]{3}|[0-9a-f]{4}|[0-9a-f]{6}|[0-9a-f]{8})|rgba?\\([^)]+\\)|hsla?\\([^)]+\\))$/i;\n    var url_re = /(\\bhttps?:\\/\\/(?:(?:(?!&[^;]+;)|(?=&amp;))[^\\s\"'<>\\][)])+)/gi;\n    var url_nf_re = /\\b(?![^\"\\s[\\]]*])(https?:\\/\\/(?:(?:(?!&[^;]+;)|(?=&amp;))[^\\s\"'<>\\][)])+)/gi;\n    var email_re = /((([^<>('\")[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,})))/g;\n    var url_full_re = /^(https?:\\/\\/(?:(?:(?!&[^;]+;)|(?=&amp;))[^\\s\"'<>\\][)])+)$/gi;\n    var email_full_re = /^((([^<>('\")[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,})))$/g;\n    var command_re = /((?:\"[^\"\\\\]*(?:\\\\[\\S\\s][^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\[\\S\\s][^'\\\\]*)*'|`[^`\\\\]*(?:\\\\[\\S\\s][^`\\\\]*)*`|\\/[^\\/\\\\]*(?:\\\\[\\S\\s][^\\/\\\\]*)*\\/[gimsuy]*(?=\\s|$)|(?:\\\\\\s|\\S))+)(?=\\s|$)/gi;\n    var extended_command_re = /^\\s*((terminal|cmd)::([a-z_]+)\\(([\\s\\S]*)\\))\\s*$/;\n    var format_exec_re = /(\\[\\[(?:[^\\][]|\\\\\\])+\\]\\])/;\n    var float_re = /^[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$/;\n    var re_re = /^\\/((?:\\\\\\/|[^/]|\\[[^\\]]*\\/[^\\]]*\\])+)\\/([gimsuy]*)$/;\n    var string_re = /(\"(?:[^\"\\\\]|\\\\(?:\\\\\\\\)*\"|\\\\\\\\)*\"|'(?:[^'\\\\]|\\\\(?:\\\\\\\\)*'|\\\\\\\\)*'|`(?:[^`\\\\]|\\\\(?:\\\\\\\\)*`|\\\\\\\\)*`)/;\n    var unclosed_strings_re = /^(?=((?:[^\"']+|\"[^\"\\\\]*(?:\\\\[^][^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\[^][^'\\\\]*)*')*))\\1./;\n    var broken_image = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 14\"><title id=\"title2\">rounded</title><path id=\"terminal-broken-image\" d=\"m 14,10 h 2 v 1 a 3,3 0 0 1 -3,3 H 3 A 3,3 0 0 1 0,11 H 4.5 A 1.00012,1.00012 0 0 0 5.207,10.707 L 6.5,9.414 7.793,10.707 a 0.99963,0.99963 0 0 0 1.41406,0 l 2.36719,-2.36719 1.80127,1.44092 A 0.99807,0.99807 0 0 0 14,10 Z M 16,3 V 8 H 14.35059 L 12.12451,6.21924 A 0.99846,0.99846 0 0 0 10.793,6.293 L 8.5,8.586 7.207,7.293 a 0.99962,0.99962 0 0 0 -1.41406,0 L 4.08594,9 H 0 V 3 A 3,3 0 0 1 3,0 h 10 a 3,3 0 0 1 3,3 z M 6,4.5 A 1.5,1.5 0 1 0 4.5,6 1.5,1.5 0 0 0 6,4.5 Z\" /></svg>';\n    var use_broken_image = '<svg class=\"terminal-broken-image\" role=\"presentation\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 14\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><use xlink:href=\"#terminal-broken-image\"/></svg>';\n    /* eslint-enable */\n    // -------------------------------------------------------------------------\n    // :: features flags\n    // -------------------------------------------------------------------------\n    // taken from https://hacks.mozilla.org/2011/09/detecting-and-generating-\n    // css-animations-in-javascript/\n    var animation_supported = (function() {\n        if (typeof document === 'undefined') {\n            return false;\n        }\n        var animation = false,\n            domPrefixes = 'Webkit Moz O ms Khtml'.split(' '),\n            elm = document.createElement('div');\n        if (elm.style.animationName) {\n            animation = true;\n        }\n        if (animation === false) {\n            for (var i = 0; i < domPrefixes.length; i++) {\n                var name = domPrefixes[i] + 'AnimationName';\n                if (elm.style[name] !== undefined) {\n                    animation = true;\n                    break;\n                }\n            }\n        }\n        elm = null;\n        return animation;\n    })();\n    // -------------------------------------------------------------------------\n    var agent = (root.navigator || window.navigator).userAgent;\n    var is_IE = /MSIE|Trident/.test(agent) || /rv:11.0/i.test(agent);\n    var is_IEMobile = /IEMobile/.test(agent);\n    // -------------------------------------------------------------------------\n    var is_ch_unit_supported = (function() {\n        if (is_IE && !is_IEMobile) {\n            return false;\n        }\n        if (typeof document === 'undefined') {\n            return true; // run without browser context\n        }\n        var div = document.createElement('div');\n        div.style.width = '1ch';\n        return div.style.width === '1ch';\n    })();\n    // -------------------------------------------------------------------------\n    var is_css_variables_supported = root.CSS && root.CSS.supports &&\n            root.CSS.supports('--fake-var', 0);\n    // -------------------------------------------------------------------------\n    var is_android = navigator.userAgent.toLowerCase().indexOf('android') !== -1;\n    // -------------------------------------------------------------------------\n    var is_key_native = (function is_key_native() {\n        if (!('KeyboardEvent' in root && 'key' in root.KeyboardEvent.prototype)) {\n            return false;\n        }\n        var proto = root.KeyboardEvent.prototype;\n        var get = Object.getOwnPropertyDescriptor(proto, 'key').get;\n        return !!get.toString().match(/\\[native code\\]/);\n    })();\n    // -------------------------------------------------------------------------\n    var is_browser = (function() {\n        try {\n            return this === window;\n        } catch (e) {\n            return false;\n        }\n    })();\n    // -------------------------------------------------------------------------\n    var is_mobile = (function(a) {\n        var check = false;\n        if (mobile_re.test(a) || tablet_re.test(a.substr(0, 4))) {\n            check = true;\n        }\n        // detect iPad 13\n        // ref: https://stackoverflow.com/a/57924983/387194s\n        if (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1) {\n            return true;\n        }\n        return check;\n    })(navigator.userAgent || navigator.vendor || root.opera);\n    // -------------------------------------------------------------------------\n    // IE ch unit bug detection - better that UserAgent that can be changed\n    // -------------------------------------------------------------------------\n    var ch_unit_bug = false;\n    if (is_browser) {\n        $(function() {\n            function width(e) {\n                return e[0].getBoundingClientRect().width;\n            }\n            var base = '<span style=\"font-family: monospace;visibility:hidden;';\n            var ch = $(base + 'width:1ch;overflow: hidden\">&nbsp;</span>');\n            ch.appendTo('body');\n            var space = $(base + '\">&nbsp;</span>').appendTo('body');\n            // in FireFox the size of space is fraction larger #579\n            ch_unit_bug = Math.abs(width(ch) - width(space)) > 0.0001;\n            ch.remove();\n            space.remove();\n        });\n    }\n    // -----------------------------------------------------------------------\n    // :: css helper that work with css variables\n    // :: jQuery css method from 3.4 support them by default\n    // -----------------------------------------------------------------------\n    function css(node, obj, value) {\n        if (node instanceof $.fn.init) {\n            node.each(function() {\n                css(this, obj, value);\n            });\n        } else if ($.isPlainObject(obj)) {\n            Object.keys(obj).forEach(function(key) {\n                node.style.setProperty(key, obj[key]);\n            });\n        } else if (typeof value === 'undefined') {\n            return node.style.getPropertyValue(obj);\n        } else {\n            node.style.setProperty(obj, value);\n        }\n    }\n    // -----------------------------------------------------------------------\n    // :: hide elements from screen readers\n    // -----------------------------------------------------------------------\n    function a11y_hide(element) {\n        element.attr({\n            role: 'presentation',\n            'aria-hidden': 'true'\n        });\n    }\n    // ---------------------------------------------------------------------\n    // :: alert only first exception of type\n    // ---------------------------------------------------------------------\n    var excepctions = [];\n    function alert_exception(label, e) {\n        if (arguments[0] instanceof $.terminal.Exception) {\n            label = arguments[0].type;\n            e = arguments[0];\n        }\n        var message = (label ? label + ': ' : '') + exception_message(e);\n        if (excepctions.indexOf(message) === -1) {\n            excepctions.push(message);\n            setTimeout(function() {\n                throw e;\n            }, 0);\n            //alert(message + (e.stack ? '\\n' + e.stack : ''));\n        }\n    }\n    // ---------------------------------------------------------------------\n    // :; detect if mouse event happen on scrollbar\n    // ---------------------------------------------------------------------\n    function scrollbar_event(e, node) {\n        var left = node.offset().left;\n        return node.outerWidth() <= e.clientX - left;\n    }\n    // ---------------------------------------------------------------------\n    // :: Return exception message as string\n    // ---------------------------------------------------------------------\n    function exception_message(e) {\n        if (typeof e === 'string') {\n            return e;\n        } else if (typeof e.fileName === 'string') {\n            return e.fileName + ': ' + e.message;\n        } else {\n            return e.message;\n        }\n    }\n    // -----------------------------------------------------------------------\n    // :: CYCLE DATA STRUCTURE\n    // -----------------------------------------------------------------------\n    function Cycle() {\n        var data = [].slice.call(arguments);\n        var pos = 0;\n        $.extend(this, {\n            get: function() {\n                return data;\n            },\n            index: function() {\n                return pos;\n            },\n            rotate: function(skip, init) {\n                if (init === undefined) {\n                    init = pos;\n                } else if (init === pos) {\n                    return;\n                }\n                if (!skip) {\n                    var defined = data.filter(function(item) {\n                        return typeof item !== 'undefined';\n                    });\n                    if (!defined.length) {\n                        return;\n                    }\n                }\n                if (!data.length) {\n                    return;\n                }\n                if (data.length === 1) {\n                    return data[0];\n                } else {\n                    if (pos === data.length - 1) {\n                        pos = 0;\n                    } else {\n                        ++pos;\n                    }\n                    if (typeof data[pos] !== 'undefined') {\n                        return data[pos];\n                    } else {\n                        return this.rotate(true, init);\n                    }\n                }\n            },\n            length: function() {\n                return data.length;\n            },\n            remove: function(index) {\n                delete data[index];\n            },\n            set: function(item) {\n                for (var i = data.length; i--;) {\n                    if (data[i] === item) {\n                        pos = i;\n                        return;\n                    }\n                }\n                this.append(item);\n                pos = data.length - 1;\n            },\n            front: function() {\n                if (data.length) {\n                    var index = pos;\n                    var restart = false;\n                    while (!data[index]) {\n                        index++;\n                        if (index > data.length) {\n                            if (restart) {\n                                break;\n                            }\n                            index = 0;\n                            restart = true;\n                        }\n                    }\n                    return data[index];\n                }\n            },\n            map: function(fn) {\n                return data.map(function(item, i) {\n                    if (typeof item !== 'undefined') {\n                        return fn(item, i);\n                    }\n                    return null;\n                }).filter(Boolean);\n            },\n            forEach: function(fn) {\n                return data.forEach(function(item, i) {\n                    if (typeof item !== 'undefined') {\n                        fn(item, i);\n                    }\n                });\n            },\n            append: function(item) {\n                data.push(item);\n            }\n        });\n    }\n    /*\n    function time() {\n        // performance.now almost equal Date.now()- performance.timing.navigationStart\n        // the difference check should be almost the same\n        return performance ? performance.now() : Date.now();\n    }\n    */\n    // -----------------------------------------------------------------------\n    // :: STACK DATA STRUCTURE\n    // -----------------------------------------------------------------------\n    function Stack(init) {\n        var data = is_array(init) ? init : init ? [init] : [];\n        $.extend(this, {\n            data: function() {\n                return data;\n            },\n            map: function(fn) {\n                return $.map(data, fn);\n            },\n            size: function() {\n                return data.length;\n            },\n            pop: function() {\n                if (data.length === 0) {\n                    return null;\n                } else {\n                    var value = data[data.length - 1];\n                    data = data.slice(0, data.length - 1);\n                    return value;\n                }\n            },\n            push: function(value) {\n                data = data.concat([value]);\n                return value;\n            },\n            top: function() {\n                return data.length > 0 ? data[data.length - 1] : null;\n            },\n            clone: function() {\n                return new Stack(data.slice(0));\n            }\n        });\n    }\n    // -------------------------------------------------------------------------\n    // :: Class for Worker that do some computation when needed\n    // :: if validation function return false it mean that condition changed\n    // :: and cache need to be cleared. If value was not prcessed it will run\n    // :: the action\n    // -------------------------------------------------------------------------\n    function WorkerCache(options) {\n        var settings = $.extend({\n            validation: $.noop,\n            action: $.noop,\n            onCache: $.noop\n        }, options);\n        this._onCache = settings.onCache.bind(this);\n        this._action = settings.action.bind(this);\n        this._validation = settings.validation.bind(this);\n        if ('Map' in root) {\n            this._cache = new Map();\n        }\n    }\n    // -------------------------------------------------------------------------\n    WorkerCache.prototype.validate = function(key) {\n        var valid = this._validation(key);\n        var test = valid === undefined || valid === true;\n        if (!test) {\n            this._cache.clear();\n        }\n        return test;\n    };\n    // -------------------------------------------------------------------------\n    WorkerCache.prototype.get = function(key) {\n        if (!this._cache) {\n            return this._action(key);\n        }\n        var value;\n        if (this.validate(key) && this._cache.has(key)) {\n            value = this._cache.get(key);\n            this._onCache({cache: value});\n            return value;\n        }\n        value = this._action(key);\n        this._cache.set(key, value);\n        return value;\n    };\n    // -------------------------------------------------------------------------\n    // :: HISTORY CLASS\n    // -------------------------------------------------------------------------\n    function History(name, size, memory) {\n        var enabled = true;\n        var storage_key = '';\n        if (typeof name === 'string' && name !== '') {\n            storage_key = name + '_';\n        }\n        storage_key += 'commands';\n        var data;\n        if (memory) {\n            data = [];\n        } else {\n            data = $.Storage.get(storage_key);\n            data = data ? JSON.parse(data) : [];\n        }\n        var pos = data.length - 1;\n        $.extend(this, {\n            append: function(item) {\n                if (enabled) {\n                    if (data[data.length - 1] !== item) {\n                        data.push(item);\n                        if (size && data.length > size) {\n                            data = data.slice(-size);\n                        }\n                        pos = data.length - 1;\n                        if (!memory) {\n                            $.Storage.set(storage_key, JSON.stringify(data));\n                        }\n                    }\n                }\n            },\n            set: function(new_data) {\n                if (is_array(new_data)) {\n                    data = new_data;\n                    if (!memory) {\n                        $.Storage.set(storage_key, JSON.stringify(data));\n                    }\n                }\n            },\n            data: function() {\n                return data;\n            },\n            reset: function() {\n                pos = data.length - 1;\n            },\n            last: function() {\n                return data[data.length - 1];\n            },\n            end: function() {\n                return pos === data.length - 1;\n            },\n            position: function() {\n                return pos;\n            },\n            current: function() {\n                return data[pos];\n            },\n            next: function() {\n                var old = pos;\n                if (pos < data.length - 1) {\n                    ++pos;\n                }\n                if (old !== pos) {\n                    return data[pos];\n                }\n            },\n            previous: function() {\n                var old = pos;\n                if (pos > 0) {\n                    --pos;\n                }\n                if (old !== pos) {\n                    return data[pos];\n                }\n            },\n            clear: function() {\n                data = [];\n                this.purge();\n            },\n            enabled: function() {\n                return enabled;\n            },\n            enable: function() {\n                enabled = true;\n            },\n            purge: function() {\n                if (!memory) {\n                    $.Storage.remove(storage_key);\n                }\n            },\n            disable: function() {\n                enabled = false;\n            },\n            toggle: function(value) {\n                if (typeof value === 'undefined') {\n                    enabled = !enabled;\n                } else {\n                    enabled = value;\n                }\n            }\n        });\n    }\n    // -------------------------------------------------------------------------\n    // :: COMMAND LINE PLUGIN\n    // -------------------------------------------------------------------------\n    var cmd_index = 0;\n    $.cmd = {\n        defaults: {\n            mask: false,\n            caseSensitiveSearch: true,\n            historySize: 60,\n            prompt: '> ',\n            enabled: true,\n            history: true,\n            onPositionChange: $.noop,\n            onCommandChange: $.noop,\n            inputStyle: 'textarea',\n            mobileDelete: is_mobile,\n            onPaste: $.noop,\n            clickTimeout: 200,\n            holdTimeout: 400,\n            holdRepeatTimeout: 200,\n            mobileIngoreAutoSpace: [],\n            repeatTimeoutKeys: [],\n            tabindex: 1,\n            tabs: 4\n        }\n    };\n    $.fn.cmd = function(options) {\n        var settings = $.extend({}, $.cmd.defaults, options);\n        function mobile_ignore_key(key) {\n            return settings.mobileIngoreAutoSpace.length &&\n                settings.mobileIngoreAutoSpace.indexOf(key) !== -1 && is_android;\n        }\n        var self = this;\n        var maybe_data = self.data('cmd');\n        if (maybe_data) {\n            return maybe_data;\n        }\n        var id = cmd_index++;\n        self.addClass('cmd');\n        var wrapper = $('<div class=\"cmd-wrapper\"/>').appendTo(self);\n        wrapper.append('<span class=\"cmd-prompt\"></span>');\n        wrapper.append('<div class=\"cmd-cursor-line\">' +\n                       '<span></span>' +\n                       '<span class=\"cmd-cursor\">' +\n                       '<span data-text class=\"end\"><span>&nbsp;</span></span>' +\n                       '</span>' +\n                       '<span></span>' +\n                       '</div>');\n        var cursor_line = wrapper.find('.cmd-cursor-line');\n        // a11y: don't read command it's in textarea that's in focus\n        a11y_hide(cursor_line);\n        // on mobile the only way to hide textarea on desktop it's needed because\n        // textarea show up after focus\n        //self.append('<span class=\"mask\"></mask>');\n        var clip;\n        if (is_mobile) {\n            clip = (function() {\n                var $node = $('<div class=\"cmd-editable\" contenteditable/>').attr({\n                    autocapitalize: 'off',\n                    autocorrect: 'off',\n                    spellcheck: 'false',\n                    tabindex: settings.tabindex\n                }).insertAfter(self);\n                $node.on('focus', function() {\n                    self.enable();\n                }).on('blur', function() {\n                    self.disable();\n                });\n                var timer;\n                var clip = {\n                    $node: $node,\n                    val: function(value) {\n                        if (typeof value === 'undefined') {\n                            return $node.text();\n                        } else {\n                            $node.html(value);\n                        }\n                    },\n                    reset: function() {\n                        clearTimeout(timer);\n                        timer = setTimeout(function() {\n                            $node.css({\n                                top: '',\n                                bottom: ''\n                            });\n                        }, 400);\n                    },\n                    focus: function() {\n                        css($node[0], {\n                            top: 'calc(var(--terminal-scroll, 0) * 1px)'\n                        });\n                        clip.reset();\n                    },\n                    blur: function() {\n                        $node.css({\n                            top: '100%',\n                            bottom: 0\n                        }).blur();\n                        // just in case of Webkit bug\n                        window.getSelection().removeAllRanges();\n                        clip.reset();\n                    }\n                };\n                return clip;\n            })();\n            self.addClass('cmd-mobile');\n        } else {\n            clip = (function() {\n                var $node = $('<textarea>').attr({\n                    autocapitalize: 'off',\n                    spellcheck: 'false',\n                    tabindex: settings.tabindex\n                }).addClass('cmd-clipboard').appendTo(self);\n                return {\n                    $node: $node,\n                    val: function(value) {\n                        // even if value is undeifned\n                        // when calling val(value) it return jQuery object\n                        if (typeof value === 'undefined') {\n                            return $node.val();\n                        } else {\n                            return $node.val(value);\n                        }\n                    }\n                };\n            })();\n            clip.val(' ');\n        }\n        if (settings.width) {\n            self.width(settings.width);\n        }\n        var num_chars; // calculated by resize\n        var char_width;\n        var last_rendered_prompt;\n        var prompt_last_line;\n        var just_prompt_len;\n        var extra_prompt_margin = 0;\n        var prompt_len;\n        var prompt_node = self.find('.cmd-prompt');\n        var reverse_search = false;\n        var rev_search_str = '';\n        var reverse_search_position = null;\n        var backup_prompt;\n        var command = '';\n        var last_command;\n        // text from selection using CTRL+SHIFT+C (as in Xterm)\n        var kill_text = ''; // text from command that kill part of the command\n        var position = 0;\n        var prompt;\n        var enabled;\n        var formatted_position = 0;\n        var name, history;\n        var cursor = self.find('.cmd-cursor');\n        var animation;\n        var restart_animation;\n        var paste_count = 0;\n        // use \\uFFFF to mark newline extra character\n        // so we can hide it by css when using text selection\n        var line_marker = '\\uFFFF';\n        var line_marker_re = /\\uFFFF$/;\n        var empty_marker_re = /^\\uFFFF$/;\n        function get_char_pos(e) {\n            var node = $(e.target);\n            if (node.is('span,img,a')) {\n                node = node.closest('[data-text]');\n                return node.index() +\n                    node.parent('span').prevAll().find('[data-text]').length +\n                    node.closest('[role=\"presentation\"]')\n                        .prevUntil('.cmd-prompt').find('[data-text]').length;\n            } else if (node.is('div[role=\"presentation\"]')) {\n                var last = !node.next().length;\n                return node.find('[data-text]').length +\n                    node.prevUntil('.cmd-prompt').find('[data-text]').length -\n                    (last ? 0 : 1);\n            }\n        }\n        // IE mapping\n        var key_mapping = {\n            'SPACEBAR': ' ',\n            'UP': 'ArrowUP',\n            'DOWN': 'ArrowDown',\n            'LEFT': 'ArrowLeft',\n            'RIGHT': 'ArrowRight',\n            'DEL': 'Delete',\n            'MULTIPLY': '*',\n            'DIVIDE': '/',\n            'SUBTRACT': '-',\n            'ADD': '+'\n        };\n        function ie_key_fix(e) {\n            var key = e.key.toUpperCase();\n            if (key_mapping[key]) {\n                return key_mapping[key];\n            }\n            return key;\n        }\n        function get_key(e) {\n            if (e.key) {\n                var key = ie_key_fix(e).toUpperCase();\n                if (key === 'CONTROL') {\n                    return 'CTRL';\n                } else {\n                    var combo = [];\n                    if (e.ctrlKey) {\n                        combo.push('CTRL');\n                    }\n                    if (e.metaKey && key !== 'META') {\n                        combo.push('META');\n                    }\n                    if (e.shiftKey && key !== 'SHIFT') {\n                        combo.push('SHIFT');\n                    }\n                    if (e.altKey && key !== 'ALT') {\n                        combo.push('ALT');\n                    }\n                    if (combo.length && key === ' ') {\n                        key = 'SPACEBAR';\n                    }\n                    if (e.key) {\n                        combo.push(key);\n                    }\n                    return combo.join('+');\n                }\n            }\n        }\n        // -----------------------------------------------------------------\n        // for invoking shortcuts using terminal::keydown\n        // taken from https://github.com/cvan/keyboardevent-key-polyfill/\n        var keycodes = {\n            3: 'Cancel',\n            6: 'Help',\n            8: 'Backspace',\n            9: 'Tab',\n            12: 'Clear',\n            13: 'Enter',\n            16: 'Shift',\n            17: 'Control',\n            18: 'Alt',\n            19: 'Pause',\n            20: 'CapsLock',\n            27: 'Escape',\n            28: 'Convert',\n            29: 'NonConvert',\n            30: 'Accept',\n            31: 'ModeChange',\n            32: ' ',\n            33: 'PageUp',\n            34: 'PageDown',\n            35: 'End',\n            36: 'Home',\n            37: 'ArrowLeft',\n            38: 'ArrowUp',\n            39: 'ArrowRight',\n            40: 'ArrowDown',\n            41: 'Select',\n            42: 'Print',\n            43: 'Execute',\n            44: 'PrintScreen',\n            45: 'Insert',\n            46: 'Delete',\n            48: ['0', ')'],\n            49: ['1', '!'],\n            50: ['2', '@'],\n            51: ['3', '#'],\n            52: ['4', '$'],\n            53: ['5', '%'],\n            54: ['6', '^'],\n            55: ['7', '&'],\n            56: ['8', '*'],\n            57: ['9', '('],\n            91: 'OS',\n            93: 'ContextMenu',\n            144: 'NumLock',\n            145: 'ScrollLock',\n            181: 'VolumeMute',\n            182: 'VolumeDown',\n            183: 'VolumeUp',\n            186: [';', ':'],\n            187: ['=', '+'],\n            188: [',', '<'],\n            189: ['-', '_'],\n            190: ['.', '>'],\n            191: ['/', '?'],\n            192: ['`', '~'],\n            219: ['[', '{'],\n            220: ['\\\\', '|'],\n            221: [']', '}'],\n            222: [\"'\", '\"'],\n            224: 'Meta',\n            225: 'AltGraph',\n            246: 'Attn',\n            247: 'CrSel',\n            248: 'ExSel',\n            249: 'EraseEof',\n            250: 'Play',\n            251: 'ZoomOut'\n        };\n        var i;\n        // Function keys (F1-24).\n        for (i = 1; i < 25; i++) {\n            keycodes[111 + i] = 'F' + i;\n        }\n        // Printable ASCII characters.\n        var letter = '';\n        for (i = 65; i < 91; i++) {\n            letter = String.fromCharCode(i);\n            keycodes[i] = [letter.toLowerCase(), letter.toUpperCase()];\n        }\n        var reversed_keycodes = {};\n        Object.keys(keycodes).forEach(function(which) {\n            if (is_array(keycodes[which])) {\n                keycodes[which].forEach(function(key) {\n                    reversed_keycodes[key.toUpperCase()] = which;\n                });\n            } else {\n                reversed_keycodes[keycodes[which].toUpperCase()] = which;\n            }\n        });\n        // -----------------------------------------------------------------\n        var keymap;\n        var default_keymap = {\n            'ALT+D': delete_forward({clipboard: true}),\n            'HOLD+ALT+D': delete_forward({clipboard: true, hold: true}),\n            'HOLD+DELETE': delete_forward({clipboard: false, hold: true}),\n            'HOLD+SHIFT+DELETE': delete_forward({clipboard: false, hold: true}),\n            'ENTER': function() {\n                if (history && command && !settings.mask &&\n                    ((is_function(settings.historyFilter) &&\n                      settings.historyFilter(command)) ||\n                     (settings.historyFilter instanceof RegExp &&\n                      command.match(settings.historyFilter)) ||\n                     !settings.historyFilter)) {\n                    history.append(command);\n                }\n                var tmp = command;\n                // fix scroll the page where there is no scrollbar\n                clip.$node.blur();\n                history.reset();\n\n                // for next input event on firefox/android with google keyboard\n                prev_command = '';\n                no_keydown = true;\n\n                self.set('');\n                var promise;\n                if (settings.commands) {\n                    promise = settings.commands.call(self, tmp);\n                }\n                if (is_function(prompt)) {\n                    if (promise && is_function(promise.then)) {\n                        promise.then(draw_prompt);\n                    } else {\n                        draw_prompt();\n                    }\n                }\n                clip.val('');\n                clip.$node.focus();\n                return false;\n            },\n            'SHIFT+ENTER': function() {\n                self.insert('\\n');\n                return true;\n            },\n            'BACKSPACE': backspace_key,\n            'SHIFT+BACKSPACE': backspace_key,\n            'TAB': function() {\n                self.insert('\\t');\n            },\n            'CTRL+D': function() {\n                self['delete'](1);\n                return false;\n            },\n            'DELETE': function() {\n                self['delete'](1);\n                return true;\n            },\n            'HOLD+ARROWUP': up_arrow,\n            'ARROWUP': up_arrow,\n            'CTRL+ARROWUP': prev_history,\n            'CTRL+P': prev_history,\n            'ARROWDOWN': down_arrow,\n            'HOLD+ARROWDOWN': down_arrow,\n            'CTRL+N': next_history,\n            'CTRL+ARROWDOWN': next_history,\n            'ARROWLEFT': left,\n            'HOLD+ARROWLEFT': debounce(left, 10),\n            'CTRL+B': left,\n            'CTRL+ARROWLEFT': function() {\n                // jump to one character after last space before prevoius word\n                var len = position - 1;\n                var pos = 0;\n                if (command[len] === ' ') {\n                    --len;\n                }\n                for (var i = len; i > 0; --i) {\n                    if (command[i] === ' ' && command[i + 1] !== ' ') {\n                        pos = i + 1;\n                        break;\n                    } else if (command[i] === '\\n' &&\n                               command[i + 1] !== '\\n') {\n                        pos = i;\n                        break;\n                    }\n                }\n                self.position(pos);\n            },\n            'CTRL+R': function() {\n                if (reverse_search) {\n                    reverse_history_search(true);\n                } else {\n                    backup_prompt = prompt;\n                    draw_reverse_prompt();\n                    last_command = command;\n                    self.set('');\n                    redraw();\n                    reverse_search = true;\n                }\n                return false;\n            },\n            'CTRL+G': function() {\n                if (reverse_search) {\n                    prompt = backup_prompt;\n                    draw_prompt();\n                    self.set(last_command);\n                    redraw();\n                    reverse_search = false;\n                    rev_search_str = '';\n                    return false;\n                }\n            },\n            'ARROWRIGHT': right,\n            'HOLD+ARROWRIGHT': debounce(right, 10),\n            'CTRL+F': right,\n            'CTRL+ARROWRIGHT': function() {\n                // jump to beginning or end of the word\n                if (command[position] === ' ') {\n                    ++position;\n                }\n                var re = /\\S[\\n\\s]{2,}|[\\n\\s]+\\S?/;\n                var match = command.slice(position).match(re);\n                if (!match || match[0].match(/^\\s+$/)) {\n                    self.position(bare_text(command).length);\n                } else if (match[0][0] !== ' ') {\n                    position += match.index + 1;\n                } else {\n                    position += match.index + match[0].length - 1;\n                    if (match[0][match[0].length - 1] !== ' ') {\n                        --position;\n                    }\n                }\n                redraw();\n            },\n            'F12': return_true, // Allow Firebug\n            'END': end(true),\n            'CTRL+END': end(),\n            'CTRL+E': end(),\n            'HOME': home(true),\n            'CTRL+HOME': home(),\n            'CTRL+A': home(),\n            'SHIFT+INSERT': paste_event,\n            'CTRL+SHIFT+T': return_true, // open closed tab\n            'CTRL+W': delete_backward({clipboard: true, hold: false}),\n            'HOLD+BACKSPACE': delete_backward({clipboard: false, hold: true}),\n            'HOLD+SHIFT+BACKSPACE': delete_backward({clipboard: false, hold: true}),\n            'CTRL+H': function() {\n                if (command !== '' && position > 0) {\n                    self['delete'](-1);\n                }\n                return false;\n            },\n            'CTRL+X': return_true,\n            'CTRL+C': function() {\n                return get_selected_html() === '';\n            },\n            'CTRL+T': return_true,\n            'CTRL+Y': function() {\n                if (kill_text !== '') {\n                    self.insert(kill_text);\n                }\n            },\n            'CTRL+V': paste_event,\n            'META+V': paste_event,\n            'CTRL+K': function() {\n                var len = text(command).length;\n                if (len > position) {\n                    kill_text = self['delete'](len - position);\n                    text_to_clipboard(clip.$node, kill_text);\n                }\n                return false;\n            },\n            'CTRL+U': function() {\n                if (command !== '' && position !== 0) {\n                    kill_text = self['delete'](-position);\n                    text_to_clipboard(clip.$node, kill_text);\n                }\n                return false;\n            },\n            'CTRL+TAB': function() {\n                return false;\n            },\n            'META+`': return_true, // CMD+` switch browser window on Mac\n            'META+R': return_true, // CMD+R page reload in Chrome Mac\n            'META+L': return_true // CLD+L jump into Ominbox on Chrome Mac\n        };\n        // -------------------------------------------------------------------------------\n        function delete_forward(options) {\n            options = options || {};\n            if (options.hold && !settings.mobileDelete) {\n                return function delete_character_forward() {\n                    self['delete'](1);\n                    return false;\n                };\n            }\n            return function delete_word_forward() {\n                var re = / *[^ ]+ *(?= )|[^ ]+$/;\n                var substring = command.slice(position);\n                var m = substring.match(re);\n                if (m) {\n                    kill_text = m[0];\n                    if (options.clipboard) {\n                        text_to_clipboard(clip.$node, kill_text);\n                    }\n                }\n                self.set(\n                    command.slice(0, position) +\n                        command.slice(position).replace(re, ''),\n                    true\n                );\n                // chrome jump to address bar\n                return false;\n            };\n        }\n        // -------------------------------------------------------------------------------\n        function delete_backward(options) {\n            options = options || {};\n            if (options.hold && !settings.mobileDelete) {\n                return function delete_character_backward() {\n                    self['delete'](-1);\n                };\n            }\n            return function delete_word_backward() {\n                // don't work in Chromium (can't prevent close tab)\n                if (command !== '' && position !== 0) {\n                    var m = command.slice(0, position).match(/([^ ]* *$)/);\n                    if (m[0].length) {\n                        kill_text = self['delete'](-m[0].length);\n                        if (options.clipboard) {\n                            text_to_clipboard(clip.$node, kill_text);\n                        }\n                    }\n                }\n                return false;\n            };\n        }\n        // -------------------------------------------------------------------------------\n        function return_true() {\n            return true;\n        }\n        // -------------------------------------------------------------------------------\n        function paste_event() {\n            clip.val('');\n            paste_count = 0;\n            if (self.isenabled() && !clip.$node.is(':focus')) {\n                clip.$node.trigger('focus', [true]);\n            }\n            clip.$node.one('input', paste);\n            return true;\n        }\n        // ---------------------------------------------------------------------\n        // :: Paste content to terminal using hidden textarea\n        // ---------------------------------------------------------------------\n        function paste() {\n            if (paste_count++ > 0) {\n                return;\n            }\n            function set() {\n                clip.val(command);\n                fix_textarea();\n            }\n            function insert(text) {\n                self.insert(text);\n                set();\n            }\n            if (self.isenabled()) {\n                //wait until Browser insert text to textarea\n                self.oneTime(100, function() {\n                    var value = clip.val().replace(/\\r/g, '');\n                    if (is_function(settings.onPaste)) {\n                        var ret = settings.onPaste.call(self, {\n                            target: self,\n                            text: value\n                        });\n                        if (ret !== undefined) {\n                            if (ret && is_function(ret.then || ret.done)) {\n                                (ret.then || ret.done).call(ret, insert);\n                            } else if (typeof ret === 'string') {\n                                insert(ret);\n                            } else if (ret === false) {\n                                set();\n                            }\n                            return;\n                        }\n                    }\n                    insert(value);\n                });\n            }\n        }\n        // -------------------------------------------------------------------------------\n        function prev_history() {\n            if (first_up_history) {\n                last_command = command;\n                self.set(history.current());\n            } else {\n                self.set(history.previous());\n            }\n            first_up_history = false;\n            return false;\n        }\n        // -------------------------------------------------------------------------------\n        function next_history() {\n            if (history.end()) {\n                first_up_history = true;\n                self.set(last_command);\n            } else {\n                self.set(history.next());\n            }\n            return false;\n        }\n        // -------------------------------------------------------------------------------\n        function have_newlines(string) {\n            return string.match(/\\n/);\n        }\n        // -------------------------------------------------------------------------------\n        function have_wrapping(string, prompt_len) {\n            var lengths = string.split('\\n').map(function(line) {\n                return $.terminal.length(line);\n            });\n            if (prompt_len) {\n                lengths[0] += prompt_len;\n            }\n            var wrap = lengths.filter(function(len) {\n                return len >= num_chars;\n            });\n            return !!wrap.length;\n        }\n        // -------------------------------------------------------------------------------\n        function simple_split_command_line(formatted) {\n            var prompt = last_rendered_prompt;\n            var lines = $.terminal.split_equal(prompt + formatted, num_chars);\n            var re = new RegExp('^' + $.terminal.escape_regex(prompt));\n            lines = lines.map($.terminal.unescape_brackets);\n            lines[0] = lines[0].replace(re, '');\n            return lines;\n        }\n        // -------------------------------------------------------------------------------\n        function up_arrow() {\n            var formatted = formatting(command);\n            formatted = $.terminal.strip(formatted);\n            var before = $.terminal.substring(formatted, 0, position);\n            var col = self.column();\n            var cursor_line = self.find('.cmd-cursor-line');\n            var line = cursor_line.prevUntil('span').length;\n            // case when line is wrapped and we are below prompt\n            if (line === 1 && col <= prompt_len) {\n                self.position(0);\n                return false;\n            }\n            if (line === 0) {\n                return prev_history();\n            }\n            if (have_newlines(before) || have_wrapping(before, prompt_len)) {\n                var prev = cursor_line.prev();\n                var splitted = prev.is('.cmd-end-line');\n                var lines = simple_split_command_line(formatted);\n                prev = lines[line - 1];\n                var left_over = lines[line].substring(col).length;\n                var diff;\n                if (left_over > 0) {\n                    diff = col;\n                    if (line - 1 === 0) {\n                        diff -= prompt_len;\n                    }\n                    diff = col + prev.substring(diff).length;\n                    if (splitted) {\n                        ++diff;\n                    }\n                } else {\n                    diff = col + 1;\n                }\n                self.position(-diff, true);\n                return false;\n            } else {\n                return prev_history();\n            }\n        }\n        // -------------------------------------------------------------------------------\n        function down_arrow() {\n            // use format and strip so we get visual strings (formatting can change text)\n            var formatted = formatting(command);\n            formatted = $.terminal.strip(formatted);\n            var after = $.terminal.substring(formatted, position);\n            if (have_newlines(after) || have_wrapping(after)) {\n                var lines = simple_split_command_line(formatted);\n                var col = self.column();\n                var cursor_line = self.find('.cmd-cursor-line');\n                var $line = cursor_line.prevUntil('span');\n                var line = $line.length;\n                var ending = cursor_line.is('.cmd-end-line');\n                var next_broken = cursor_line.next().is('.cmd-end-line');\n                var next = lines[line + 1];\n                if (!next) {\n                    return next_history();\n                }\n                var left_over = lines[line].substring(col).length;\n                var diff;\n                // move to next line if at the end move to end of next line\n                if (left_over === 0) {\n                    diff = next.length;\n                    if (next_broken) {\n                        diff++;\n                    }\n                } else {\n                    diff = Math.min(col, next.length) + left_over;\n                    if (line === 0) {\n                        diff += prompt_len;\n                    }\n                    if (ending) {\n                        // correction for splitted line that don't have extra space\n                        diff += 1;\n                    }\n                }\n                self.position(diff, true);\n                return false;\n            } else {\n                return next_history();\n            }\n        }\n        // -------------------------------------------------------------------------------\n        function backspace_key() {\n            if (reverse_search) {\n                rev_search_str = rev_search_str.slice(0, -1);\n                draw_reverse_prompt();\n            } else if (command !== '' && position > 0) {\n                self['delete'](-1);\n            }\n            // for next input after naitve backspace\n            // we need timeout because we don't want it to trigger\n            // for current input but next one\n            self.oneTime(1, function() {\n                no_keydown = true;\n            });\n        }\n        // -------------------------------------------------------------------------------\n        function left() {\n            if (position > 0) {\n                self.position(-1, true);\n            }\n        }\n        // -------------------------------------------------------------------------------\n        function right() {\n            if (position < bare_text(command).length) {\n                self.position(1, true);\n            }\n            return false;\n        }\n        // -------------------------------------------------------------------------------\n        function home(line) {\n            function home() {\n                self.position(0);\n            }\n            if (line) {\n                return function() {\n                    if (command.match(/\\n/)) {\n                        var string = command.substring(0, self.position());\n                        self.position(string.lastIndexOf('\\n') + 1);\n                    } else {\n                        home();\n                    }\n                };\n            } else {\n                return home;\n            }\n        }\n        // -------------------------------------------------------------------------------\n        function end(line) {\n            function end() {\n                self.position(text(command).length);\n            }\n            if (line) {\n                return function() {\n                    if (command.match(/\\n/)) {\n                        var lines = command.split('\\n');\n                        var pos = self.position();\n                        var sum = 0;\n                        for (var i = 0; i < lines.length; ++i) {\n                            sum += lines[i].length;\n                            if (sum > pos) {\n                                self.position(sum + i);\n                                return;\n                            }\n                        }\n                    }\n                    end();\n                };\n            } else {\n                return end;\n            }\n        }\n        // -------------------------------------------------------------------------------\n        function mobile_focus() {\n            //if (is_touch) {\n            var $clip = clip.$node;\n            var focus = $clip.is(':focus');\n            if (enabled) {\n                if (!focus) {\n                    //clip.trigger('focus', [true]);\n                }\n                self.oneTime(10, function() {\n                    if (!$clip.is(':focus') && enabled) {\n                        $clip.trigger('focus', [true]);\n                    }\n                });\n            } else if (focus && !enabled) {\n                $clip.trigger('blur', [true]);\n            }\n        }\n        // -------------------------------------------------------------------------------\n        // fix for .cursor span animation that should only be applied when\n        // animation is equal to terminal-blink\n        // -------------------------------------------------------------------------------\n        function fix_cursor() {\n            if (animation_supported) {\n                var style = window.getComputedStyle(cursor[0]);\n                var animationName = style.getPropertyValue('--animation');\n                animationName = animationName.replace(/^\\s*|\\s*$/g, '');\n                var _class = self.attr('class');\n                if (_class.match(/-animation/)) {\n                    _class = _class.replace(/[a-z]+-animation/g, '');\n                }\n                if (animationName && !animationName.match(/blink/)) {\n                    var className = animationName.replace(/terminal-/, '') + '-animation';\n                    if (!_class.match(className)) {\n                        _class += ' ' + className;\n                    }\n                }\n                _class = _class.replace(/\\s+/g, ' ');\n                if (_class !== self.attr('class').replace(/\\s+/g, ' ')) {\n                    self.attr('class', _class);\n                }\n            }\n        }\n        // -------------------------------------------------------------------------------\n        // on mobile you can't delete character if input is empty (event\n        // will not fire) so we fake text entry, we could just put dummy\n        // data but we put real command and position\n        // -------------------------------------------------------------------------------\n        function fix_textarea(position_only) {\n            if (!self.isenabled()) {\n                return;\n            }\n            // delay worked while experimenting\n            self.oneTime(10, function() {\n                // we use space before command to show select all context menu\n                // idea taken from CodeMirror\n                if (!is_mobile && clip.val() !== command && !position_only) {\n                    clip.val(' ' + command);\n                }\n                if (enabled) {\n                    self.oneTime(10, function() {\n                        try {\n                            var pos = !is_mobile ? position + 1 : position;\n                            // we check first to improve performance\n                            if (clip.$node.caret() !== pos) {\n                                clip.$node.caret(pos);\n                            }\n                        } catch (e) {\n                            // firefox throw NS_ERROR_FAILURE ignore\n                        }\n                    });\n                }\n            });\n        }\n        // -------------------------------------------------------------------------------\n        // terminal animation don't work on android because they animate\n        // 2 properties\n        // -------------------------------------------------------------------------------\n        if (animation_supported && !is_android) {\n            animation = function(toggle) {\n                if (toggle) {\n                    cursor.addClass('cmd-blink');\n                } else {\n                    cursor.removeClass('cmd-blink');\n                }\n            };\n            restart_animation = function() {\n                var new_cursor = cursor.clone();\n                new_cursor.insertBefore(cursor);\n                cursor.remove();\n                cursor = new_cursor;\n            };\n        } else {\n            var animating = false;\n            animation = function(toggle) {\n                if (toggle && !animating) {\n                    animating = true;\n                    cursor.addClass('cmd-inverted cmd-blink');\n                    self.everyTime(500, 'blink', blink);\n                } else if (animating && !toggle) {\n                    animating = false;\n                    self.stopTime('blink', blink);\n                    cursor.removeClass('cmd-inverted cmd-blink');\n                }\n            };\n            restart_animation = function() {\n                animation(false);\n                animation(true);\n            };\n        }\n        // ---------------------------------------------------------------------\n        // :: Blinking cursor function\n        // ---------------------------------------------------------------------\n        function blink() {\n            cursor.toggleClass('cmd-inverted');\n        }\n        // ---------------------------------------------------------------------\n        // :: Set prompt for reverse search\n        // ---------------------------------------------------------------------\n        function draw_reverse_prompt() {\n            prompt = '(reverse-i-search)`' + rev_search_str + \"': \";\n            draw_prompt();\n        }\n        // ---------------------------------------------------------------------\n        // :: Disable reverse search\n        // ---------------------------------------------------------------------\n        function clear_reverse_state() {\n            prompt = backup_prompt;\n            reverse_search = false;\n            reverse_search_position = null;\n            rev_search_str = '';\n        }\n        // ---------------------------------------------------------------------\n        // :: Search through command line history. If next is not defined or\n        // :: false it searches for the first item from the end. If true it\n        // :: search for the next item\n        // ---------------------------------------------------------------------\n        function reverse_history_search(next) {\n            var history_data = history.data();\n            var regex, save_string;\n            var len = history_data.length;\n            if (next && reverse_search_position > 0) {\n                len -= reverse_search_position;\n            }\n            if (rev_search_str.length > 0) {\n                for (var j = rev_search_str.length; j > 0; j--) {\n                    save_string = $.terminal.escape_regex(rev_search_str.slice(0, j));\n                    if (settings.caseSensitiveSearch) {\n                        regex = new RegExp(save_string);\n                    } else {\n                        regex = new RegExp(save_string, 'i');\n                    }\n                    for (var i = len; i--;) {\n                        if (regex.test(history_data[i])) {\n                            reverse_search_position = history_data.length - i;\n                            self.position(history_data[i].indexOf(save_string));\n                            self.set(history_data[i], true);\n                            redraw();\n                            if (rev_search_str.length !== j) {\n                                rev_search_str = rev_search_str.slice(0, j);\n                                draw_reverse_prompt();\n                            }\n                            return;\n                        }\n                    }\n                }\n            }\n            rev_search_str = ''; // clear if not found any\n        }\n        // ---------------------------------------------------------------------\n        // :: calculate width of hte character\n        // ---------------------------------------------------------------------\n        function get_char_width() {\n            var $prompt = self.find('.cmd-prompt');\n            var html = $prompt.html();\n            $prompt.html('<span>&nbsp;</span>');\n            var width = $prompt.find('span')[0].getBoundingClientRect().width;\n            $prompt.html(html);\n            return width;\n        }\n        // ---------------------------------------------------------------------\n        // :: return number of characters in command line\n        // ---------------------------------------------------------------------\n        function get_num_chars(char_width) {\n            var width = self.width();\n            return Math.floor(width / char_width);\n        }\n        // ---------------------------------------------------------------------\n        // :: Split String that fit into command line where first line need to\n        // :: fit next to prompt (need to have less characters)\n        // ---------------------------------------------------------------------\n        function process_cmd_line(string) {\n            function split(string) {\n                return $.terminal.split_equal(string, num_chars);\n            }\n            // -----------------------------------------------------------------\n            function skip_empty(array) {\n                // we remove lines that are leftovers after adding space at the end\n                var result = [];\n                array.forEach(function(line, i) {\n                    if ($.terminal.strip(line).match(empty_marker_re)) {\n                        result[i] = false;\n                        // lines that will get removed need line ending on previos\n                        // line so code that check that marker works correctly\n                        if (i > 0) {\n                            result[i - 1] += line_marker;\n                        }\n                    } else {\n                        result[i] = array[i];\n                    }\n                });\n                return result.filter(function(line) {\n                    return line !== false;\n                });\n            }\n            // -----------------------------------------------------------------\n            var line = prompt_node.find('.cmd-line');\n            var prompt;\n            if (line.length) {\n                prompt = line.nextUntil('.cmd-line').text();\n            } else {\n                prompt = prompt_node.text();\n            }\n            prompt = $.terminal.escape_brackets(prompt);\n            var re = new RegExp('^' + $.terminal.escape_regex(prompt));\n            var array;\n            if (string.match(/\\n/)) {\n                var tmp = string.split('\\n');\n                var first_len = num_chars - prompt_len - 1;\n                for (var i = 0; i < tmp.length - 1; ++i) {\n                    tmp[i] += line_marker;\n                }\n                // split first line\n                if (strlen(tmp[0]) > first_len) {\n                    array = split(prompt + tmp[0]);\n                    array[0] = array[0].replace(re, '');\n                    array = skip_empty(array);\n                } else {\n                    array = [tmp[0]];\n                }\n                // process rest of the lines\n                for (i = 1; i < tmp.length; ++i) {\n                    if (strlen(tmp[i]) > num_chars) {\n                        var splitted = split(tmp[i]);\n                        if (i < tmp.length - 1) {\n                            splitted = skip_empty(splitted);\n                        }\n                        array = array.concat(splitted);\n                    } else {\n                        array.push(tmp[i]);\n                    }\n                }\n            } else {\n                array = split(prompt + string, num_chars);\n                array[0] = array[0].replace(re, '');\n            }\n            // fix issue with cursor that was cut off #379\n            if (array.length > 1) {\n                var len = $.terminal.length(array[array.length - 1]);\n                if (len === num_chars) {\n                    array.push('');\n                }\n            }\n            return array;\n        }\n        // ---------------------------------------------------------------------\n        var cmd_line_worker = new WorkerCache({\n            validation: function(key) {\n                var result = false;\n                if ((!this._previous_value || this._previous_value === key) &&\n                    (!this._cols || this._cols === num_chars)) {\n                    result = true;\n                }\n                this._previous_value = key;\n                this._cols = num_chars;\n                return result;\n            },\n            action: process_cmd_line\n        });\n        // ---------------------------------------------------------------------\n        function split_command_line(string) {\n            return cmd_line_worker.get(string);\n        }\n        // ---------------------------------------------------------------------\n        // :: use custom formatting\n        // ---------------------------------------------------------------------\n        function formatting(string, skip_formatted_position) {\n            // we don't want to format command when user type formatting in\n            try {\n                string = $.terminal.escape_formatting(string);\n                var format_options = $.extend({}, settings, {\n                    unixFormattingEscapeBrackets: true,\n                    position: position,\n                    command: true\n                });\n                var formatted = $.terminal.apply_formatters(string, format_options);\n                var output = $.terminal.normalize(formatted[0]);\n                var max = $.terminal.length(output);\n                if (!skip_formatted_position) {\n                    formatted_position = formatted[1];\n                    // fix issue with nested formatting where max length\n                    // is checked before nested_formatting flatten formatting\n                    if (formatted_position > max) {\n                        formatted_position = max;\n                    }\n                }\n                output = $.terminal.normalize(output);\n                return output;\n            } catch (e) {\n                alert_exception('[Formatting]', e.stack);\n                return string;\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: format and encode the string\n        // ---------------------------------------------------------------------\n        function format(string, before) {\n            //string = $.terminal.normalize(string);\n            var encoded = $.terminal.encode(wrap(string), {\n                tabs: settings.tabs,\n                before: before\n            });\n            return $.terminal.format(encoded, {\n                char_width: settings.char_width,\n                allowedAttributes: settings.allowedAttributes || []\n            });\n        }\n        // ---------------------------------------------------------------------\n        // :: function create new string with all characters in it's own\n        // :: formatting - it will only have style if the input is formatting\n        // :: this function is not very usefull so it's not in $.terminal\n        // ---------------------------------------------------------------------\n        function wrap(string) {\n            return $.terminal.partition(string).join('');\n        }\n        // ---------------------------------------------------------------------\n        // :: shortcut helpers\n        // ---------------------------------------------------------------------\n        function length(str, raw) {\n            return $.terminal.length(str, raw);\n        }\n        // ---------------------------------------------------------------------\n        function is_multiline(str) {\n            return strlen(text(str)) > num_chars - prompt_len - 1 ||\n                str.match(/\\n/);\n        }\n        // ---------------------------------------------------------------------\n        function substring(str, start, end) {\n            return $.terminal.substring(str, start, end);\n        }\n        // ---------------------------------------------------------------------\n        // :: helper function that check if string is valid emoji formatting\n        // ---------------------------------------------------------------------\n        function is_emoji_formatting(str) {\n            if ($.terminal.is_formatting(str)) {\n                return str.replace(format_parts_re, '$4').match(/^emoji /);\n            }\n            return false;\n        }\n        // ---------------------------------------------------------------------\n        // :: Function that displays the command line. Split long lines and\n        // :: place cursor in the right place\n        // ---------------------------------------------------------------------\n        var redraw = (function() {\n            var before = cursor.prev();\n            var after = cursor.next();\n            var cursor_line = cursor.parent();\n            // -----------------------------------------------------------------\n            // :: Draw line with the cursor\n            // -----------------------------------------------------------------\n            function draw_cursor_line(string, options) {\n                var end_line = string.match(line_marker_re);\n                if (end_line) {\n                    string = string.replace(line_marker_re, ' ');\n                }\n                cursor_line.toggleClass('cmd-end-line', !!end_line);\n                var cursor_end_line = false;\n                var settings = $.extend({\n                    prompt: '',\n                    last: false\n                }, options);\n                var position = settings.position;\n                var len = length(string);\n                var prompt = settings.prompt;\n                var c;\n                if (position === len) {\n                    before.html(format(string));\n                    c = '&nbsp;';\n                    empty_cursor();\n                    after.html('');\n                } else if (position === 0) {\n                    before.html('');\n                    c = substring(string, 0, 1);\n                    cursor.html(format(c));\n                    after.html(format(substring(string, 1), prompt + c));\n                } else {\n                    var before_str = $.terminal.substring(string, 0, position);\n                    before.html(format(before_str, prompt));\n                    c = substring(string, position, position + 1);\n                    var c_before = (prompt + before_str).replace(/^.*\\t/, '');\n                    cursor.html(format(c, c_before));\n                    if (position === len - 1) {\n                        cursor_end_line = true;\n                        after.html('');\n                    } else {\n                        if (c.match(/\\t/)) {\n                            c_before = '';\n                        } else {\n                            c_before += c;\n                        }\n                        after.html(format(substring(string, position + 1), c_before));\n                    }\n                }\n                if (ch_unit_bug) {\n                    if (typeof wcwidth !== 'undefined') {\n                        // handle emoji and wide characters in IE or\n                        // other possible browsers that don't have valid ch unit\n                        var size = strlen(text(c));\n                        if (size === 1 && is_emoji_formatting(c)) {\n                            size = 2;\n                        }\n                        cursor.width(char_width * size);\n                    } else {\n                        cursor.width(char_width);\n                    }\n                }\n                cursor.toggleClass('cmd-end-line', cursor_end_line);\n                // fix for animation when changing --animation dynamically\n                fix_cursor();\n                var cursor_len = $.terminal.length(cursor.text());\n                if (cursor_len > 1) {\n                    var node = cursor.find('[data-text]')[0];\n                    node.style.setProperty('--length', cursor_len);\n                }\n                // synchronize css animations (it's not that important because if user\n                // will change animation she should disable animation on span, but it\n                // looks nicer until she disable that inner animation)\n                restart_animation();\n            }\n            // -----------------------------------------------------------------\n            function div(string, before) {\n                var end_line = string.match(line_marker_re);\n                var result = '<div role=\"presentation\" aria-hidden=\"true\"';\n                if (end_line) {\n                    string = string.replace(line_marker_re, ' ');\n                    result += ' class=\"cmd-end-line\"';\n                }\n                result += '>' + format(string, before || '') + '</div>';\n                return result;\n            }\n            // -----------------------------------------------------------------\n            function empty_cursor() {\n                // data-text is for consistency in CSS and end class is for unit tests\n                cursor.html('<span data-text class=\"end\"><span>&nbsp;<span></span>');\n            }\n            // -----------------------------------------------------------------\n            // :: Display lines after the cursor\n            // -----------------------------------------------------------------\n            function lines_after(lines) {\n                var last_ins = cursor_line;\n                $.each(lines, function(i, line) {\n                    last_ins = $(div(line)).insertAfter(last_ins);\n                });\n            }\n            // -----------------------------------------------------------------\n            // :: Display lines before the cursor\n            // -----------------------------------------------------------------\n            function lines_before(lines) {\n                $.each(lines, function(i, line) {\n                    cursor_line.before(div(line, i === 0 ? prompt_last_line : ''));\n                });\n            }\n            // -----------------------------------------------------------------\n            // :: Redraw function\n            // -----------------------------------------------------------------\n            return function() {\n                var string;\n                switch (typeof settings.mask) {\n                    case 'boolean':\n                        string = settings.mask ? command.replace(/./g, '*') : command;\n                        break;\n                    case 'string':\n                        string = command.replace(/./g, settings.mask);\n                        break;\n                }\n                var formatted = formatting(string);\n                var pos;\n                if (length(formatted) === text(string).length) {\n                    pos = position;\n                } else {\n                    pos = formatted_position;\n                }\n                var i;\n                wrapper.css({\n                    display: 'none'\n                });\n                wrapper.find('div:not(.cmd-cursor-line)').remove();\n                before.html('');\n                if (is_multiline(formatted)) {\n                    var tabs = formatted.match(/\\t/g);\n                    var original_string = formatted;\n                    //quick tabulation hack\n                    if (tabs) {\n                        formatted = formatted.replace(/\\t/g, '\\x00\\x00\\x00\\x00');\n                    }\n                    var array = split_command_line(formatted);\n                    if (tabs) {\n                        array = $.map(array, function(line) {\n                            return line.replace(/\\x00\\x00\\x00\\x00/g, '\\t');\n                        });\n                    }\n                    var first_len = length(array[0]);\n                    //cursor in first line\n                    if (first_len === 0 && array.length === 1) {\n                        // skip empty line\n                    } else if (pos < first_len) {\n                        draw_cursor_line(array[0], {\n                            length: array.length,\n                            position: pos,\n                            prompt: prompt_last_line\n                        });\n                        lines_after(array.slice(1));\n                    } else if (pos === first_len) {\n                        // first char acter of second line\n                        cursor_line.before(div(array[0], prompt_last_line));\n                        draw_cursor_line(array[1] || '', {\n                            length: array.length,\n                            position: 0,\n                            last: array.length <= 2\n                        });\n                        if (array.length > 2) {\n                            lines_after(array.slice(2));\n                        }\n                    } else {\n                        var last = array.slice(-1)[0];\n                        var len = length(original_string);\n                        var from_last = len - pos;\n                        var last_len = length(last);\n                        var new_pos = 0;\n                        if (from_last === -1) {\n                            from_last = 0;\n                        }\n                        if (from_last <= last_len) { // in last line\n                            lines_before(array.slice(0, -1));\n                            if (last_len === from_last) {\n                                new_pos = 0;\n                            } else {\n                                new_pos = last_len - from_last;\n                            }\n                            draw_cursor_line(last, {\n                                length: array.length,\n                                position: new_pos,\n                                last: true\n                            });\n                        } else {\n                            // more lines, cursor in the middle\n                            var line_index;\n                            var current;\n                            new_pos = pos;\n                            for (i = 0; i < array.length; ++i) {\n                                var current_len = $.terminal.length(array[i]);\n                                if (new_pos > current_len) {\n                                    new_pos -= current_len;\n                                } else {\n                                    break;\n                                }\n                            }\n                            current = array[i];\n                            line_index = i;\n                            // cursor on first character in line\n                            if (new_pos === length(current)) {\n                                new_pos = 0;\n                                current = array[++line_index];\n                                if (current === undefined) {\n                                    //should never happen\n                                    var msg = $.terminal.defaults.strings.redrawError;\n                                    throw new Error(msg);\n                                }\n                            }\n                            draw_cursor_line(current, {\n                                length: array.length,\n                                position: new_pos\n                            });\n                            lines_before(array.slice(0, line_index));\n                            lines_after(array.slice(line_index + 1));\n                        }\n                    }\n                    self.find('.cmd-cursor-line ~ div:last-of-type')\n                        .append('<span></span>');\n                } else if (formatted === '') {\n                    before.html('');\n                    empty_cursor();\n                    after.html('');\n                } else {\n                    draw_cursor_line(formatted, {\n                        length: 1,\n                        position: pos\n                    });\n                }\n                var in_line = cursor_line.prevUntil('.cmd-prompt').length;\n                if (is_css_variables_supported) {\n                    self[0].style.setProperty('--cursor-line', in_line);\n                } else {\n                    clip.$node.css('top', in_line * 14 + 'px');\n                }\n                wrapper.css({\n                    display: ''\n                });\n            };\n        })();\n        // ---------------------------------------------------------------------\n        // :: find position that match display position for commands that\n        // :: change length by formatters\n        // ---------------------------------------------------------------------\n        var find_position = (function() {\n            function make_guess(string, position) {\n                var opts = $.extend({}, settings, {\n                    position: position,\n                    command: true\n                });\n                return $.terminal.apply_formatters(string, opts)[1];\n            }\n            function cmp(search_pos, pos, string) {\n                var guess = make_guess(string, pos);\n                if (guess === search_pos) {\n                    var next_guess = make_guess(string, pos + 1);\n                    if (next_guess > search_pos) {\n                        return 0;\n                    }\n                    return 1;\n                } else if (guess < search_pos) {\n                    return 1;\n                } else {\n                    return -1;\n                }\n            }\n            return function(string, formatted_position) {\n                if (formatted_position === 0) {\n                    return 0;\n                }\n                string = bare_text(string);\n                var codepoint_len = string.length;\n                var str = $.terminal.escape_brackets(command);\n                var pos = binary_search(0, codepoint_len, formatted_position, cmp, [str]);\n                var chars = $.terminal.split_characters(string);\n                if (codepoint_len > chars.length) {\n                    var len = 0;\n                    for (var i = 0; i < chars.length; ++i) {\n                        len += chars[i].length;\n                        if (len >= pos) {\n                            return len;\n                        }\n                    }\n                }\n                return pos;\n            };\n        })();\n        // ---------------------------------------------------------------------\n        // :: Draw prompt that can be a function or a string\n        // ---------------------------------------------------------------------\n        var prev_prompt_data;\n        var draw_prompt = (function() {\n            function set(prompt) {\n                if (prompt) {\n                    prompt = $.terminal.apply_formatters(prompt, {prompt: true});\n                    prompt = $.terminal.normalize(prompt);\n                    prompt = crlf(prompt);\n                }\n                last_rendered_prompt = prompt;\n                var lines = $.terminal.split_equal(prompt, num_chars).map(function(line) {\n                    if (!$.terminal.have_formatting(line)) {\n                        return '[[;;]' + $.terminal.escape_brackets(line) + ']';\n                    }\n                    return $.terminal.format_split(line).map(function(str) {\n                        if ($.terminal.is_formatting(str)) {\n                            return str;\n                        }\n                        return '[[;;]' + $.terminal.escape_brackets(str) + ']';\n                    }).join('');\n                });\n                var options = {\n                    char_width: settings.char_width\n                };\n                prompt_last_line = lines[lines.length - 1];\n                var encoded_last_line = $.terminal.encode(lines[lines.length - 1], {\n                    tabs: settings.tabs\n                });\n                var last_line = $.terminal.format(encoded_last_line, options);\n                var formatted = lines.slice(0, -1).map(function(line) {\n                    line = $.terminal.encode(line, {\n                        tabs: settings.tabs\n                    });\n                    return '<span class=\"cmd-line\">' +\n                        $.terminal.format(line, options) +\n                        '</span>';\n                }).concat([last_line]).join('\\n');\n                // zero width space to make sure prompt margin takes up space,\n                // so that echo with newline: false works when prompt is empty\n                formatted = formatted || '\\u206F';\n                // update prompt if changed\n                if (prompt_node.html() !== formatted) {\n                    prompt_node.html(formatted);\n                    // fix for Chrome bug width selection\n                    // https://bugs.chromium.org/p/chromium/issues/detail?id=1087787\n                    var spans = prompt_node.find('> span span');\n                    clip.$node.attr('data-cmd-prompt', prompt_node.text());\n                    if (is_ch_unit_supported) {\n                        prompt_node.hide();\n                        spans.each(function() {\n                            var self = $(this);\n                            var len = strlen(self.text());\n                            self.css('width', len + 'ch');\n                        });\n                        prompt_node.show();\n                    }\n                }\n                just_prompt_len = strlen(text(encoded_last_line));\n                prompt_len = just_prompt_len + extra_prompt_margin;\n            }\n            return function() {\n                // the data is used as cancelable reference because we have ref\n                // data object that is hold in closure and we remove `set` function\n                // so previous call to function prompt will be ignored\n                if (prev_prompt_data && prev_prompt_data.set) {\n                    prev_prompt_data.set = $.noop;\n                    // remove reference for garbage collector\n                    prev_prompt_data = null;\n                }\n                switch (typeof prompt) {\n                    case 'string':\n                        set(prompt);\n                        break;\n                    case 'function':\n                        var data = prev_prompt_data = {\n                            set: set\n                        };\n                        var ret = prompt.call(self, function(string) {\n                            data.set(string);\n                        });\n                        if (typeof ret === 'string') {\n                            data.set(ret);\n                        }\n                        if (ret && ret.then) {\n                            ret.then(data.set).catch(function(e) {\n                                var prompt = $.terminal.escape_brackets('[ERR]> ');\n                                data.set('[[;red;]' + prompt + ']');\n                                alert_exception('Prompt', e);\n                            });\n                        }\n                        break;\n                }\n            };\n        })();\n        // ---------------------------------------------------------------------\n        function fire_change_command() {\n            if (is_function(settings.onCommandChange)) {\n                settings.onCommandChange.call(self, command);\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Command Line Methods\n        // ---------------------------------------------------------------------\n        $.extend(self, {\n            option: function(name, value) {\n                if (typeof value === 'undefined') {\n                    return settings[name];\n                } else {\n                    settings[name] = value;\n                }\n                return self;\n            },\n            name: function(string) {\n                if (string !== undefined) {\n                    name = string;\n                    var enabled = history && history.enabled() || !history;\n                    history = new History(\n                        name,\n                        settings.historySize,\n                        settings.history === 'memory'\n                    );\n                    // disable new history if old was disabled\n                    if (!enabled) {\n                        history.disable();\n                    }\n                    return self;\n                } else {\n                    return name;\n                }\n            },\n            purge: function() {\n                history.clear();\n                return self;\n            },\n            history: function() {\n                return history;\n            },\n            'delete': function(n, stay) {\n                var removed, string;\n                if (n === 0) {\n                    return \"\";\n                } else if (n < 0) {\n                    if (position > 0) {\n                        // this may look weird but if n is negative we need\n                        // to use +\n                        removed = command.slice(0, position).slice(n);\n                        string = bare_text(command);\n                        string = string.slice(0, position + n) +\n                            string.slice(position, string.length);\n                        if (!stay) {\n                            self.position(position + n);\n                        }\n                    }\n                } else if (command !== '') {\n                    string = text(command);\n                    if (position < string.length) {\n                        removed = string.slice(position).slice(0, n);\n                        string = string.slice(0, position) +\n                            string.slice(position + n, string.length);\n                    }\n                }\n                if (removed) {\n                    command = string;\n                }\n                redraw();\n                fix_textarea();\n                fire_change_command();\n                return removed;\n            },\n            set: function(string, stay, silent) {\n                if (string !== undefined) {\n                    command = string;\n                    if (!stay) {\n                        self.position(bare_text(command).length);\n                    }\n                    redraw();\n                    fix_textarea();\n                    if (!silent) {\n                        fire_change_command();\n                    }\n                }\n                return self;\n            },\n            keymap: function(new_keymap, value) {\n                function wrap(key, fn) {\n                    var original = default_keymap[key];\n                    if (is_function(original)) {\n                        original = original.bind(self);\n                    }\n                    return function(e) {\n                        // new keymap function will get default as 2nd argument\n                        return fn.call(self, e, original);\n                    };\n                }\n                if (new_keymap === null) {\n                    keymap = default_keymap;\n                    return self;\n                } else if (typeof new_keymap === 'undefined') {\n                    return keymap;\n                } else if (typeof new_keymap === 'string') {\n                    if (typeof value === 'undefined') {\n                        if (keymap[new_keymap]) {\n                            return keymap[new_keymap];\n                        } else if (default_keymap[new_keymap]) {\n                            return default_keymap[new_keymap];\n                        }\n                    } else {\n                        keymap[new_keymap] = wrap(new_keymap, value);\n                    }\n                } else {\n                    keymap = $.extend(\n                        {},\n                        keymap ? keymap : default_keymap,\n                        $.omap(new_keymap || {}, wrap)\n                    );\n                    return self;\n                }\n            },\n            insert: function(string, stay) {\n                var bare_command = bare_text(command);\n                var len = bare_text(string).length;\n                if (position === bare_command.length) {\n                    string = bare_command + string;\n                } else if (position === 0) {\n                    string = string + bare_command;\n                } else {\n                    string = bare_command.slice(0, position) +\n                        string + bare_command.slice(position);\n                }\n                command = string;\n                if (!stay) {\n                    self.position(len, true, true);\n                }\n                fix_textarea();\n                redraw();\n                fire_change_command();\n                return self;\n            },\n            get: function() {\n                return command;\n            },\n            commands: function(commands) {\n                if (commands) {\n                    settings.commands = commands;\n                    return self;\n                } else {\n                    return commands;\n                }\n            },\n            destroy: function() {\n                doc.unbind('keypress.cmd', keypress_event);\n                doc.unbind('keydown.cmd', keydown_event);\n                doc.unbind('input.cmd', input_event);\n                self.stopTime('blink', blink);\n                self.find('.cmd-wrapper').remove();\n                self.find('.cmd-prompt, .cmd-clipboard, .cmd-editable').remove();\n                self.removeClass('cmd').removeData('cmd').off('.cmd');\n                return self;\n            },\n            column: function(include_prompt) {\n                var before = command.substring(0, position);\n                if (position === 0 || !command.length) {\n                    return 0;\n                }\n                var re = /\\n?([^\\n]*)$/;\n                var match = before.match(re);\n                var col = match[1].length;\n                if (!have_newlines(before) &&\n                    (include_prompt || have_wrapping(before, prompt_len))) {\n                    col += prompt_len;\n                }\n                if (col === 0) {\n                    return col;\n                }\n                col %= num_chars;\n                if (col === 0) {\n                    return num_chars;\n                }\n                return col;\n            },\n            line: function() {\n                var before = command.substring(0, position);\n                if (position === 0 || !command.length) {\n                    return 0;\n                }\n                return before.split(/\\n/).length - 1;\n            },\n            // inform cursor about size of partial output line\n            __set_prompt_margin: function(len) {\n                extra_prompt_margin = len;\n                prompt_len = just_prompt_len + extra_prompt_margin;\n            },\n            prompt: function(user_prompt) {\n                if (user_prompt === true) {\n                    return last_rendered_prompt;\n                } else if (user_prompt === undefined) {\n                    return prompt;\n                } else {\n                    var should_redraw = user_prompt !== prompt;\n                    if (typeof user_prompt === 'string' ||\n                        typeof user_prompt === 'function') {\n                        prompt = user_prompt;\n                    } else {\n                        throw new Error('prompt must be a function or string');\n                    }\n                    if (should_redraw) {\n                        draw_prompt();\n                        // we could check if command is longer then numchars-new\n                        // prompt\n                        redraw();\n                    }\n                    return self;\n                }\n            },\n            kill_text: function() {\n                return kill_text;\n            },\n            position: function(n, relative, silent) {\n                if (typeof n === 'number') {\n                    var pos = position;\n                    var len = bare_text(command).length;\n                    if (relative) {\n                        position += n;\n                    } else if (n < 0) {\n                        position = 0;\n                    } else if (n > len) {\n                        position = len;\n                    } else {\n                        position = n;\n                    }\n                    if (pos !== position) {\n                        redraw();\n                        if (!silent && is_function(settings.onPositionChange)) {\n                            settings.onPositionChange(position, formatted_position);\n                        }\n                        fix_textarea(true);\n                    }\n                    return self;\n                } else {\n                    return position;\n                }\n            },\n            refresh: function() {\n                draw_prompt();\n                redraw();\n                fix_textarea(true);\n                return self;\n            },\n            // if formatter change length of the strings (like emoji demo) we need to keep\n            // track of two different positions one for command and one for display\n            display_position: function(n, relative) {\n                if (n === undefined) {\n                    return formatted_position;\n                } else {\n                    // double escape\n                    var string = formatting($.terminal.escape_formatting(command), true);\n                    var len = length(string);\n                    var command_len = bare_text(command).length;\n                    var new_formatted_pos;\n                    if (relative) {\n                        new_formatted_pos = formatted_position + n;\n                    } else if (n > len) {\n                        new_formatted_pos = len;\n                    } else {\n                        new_formatted_pos = n;\n                    }\n                    if (len === command_len) {\n                        formatted_position = new_formatted_pos;\n                        return self.position(new_formatted_pos);\n                    }\n                    if (len === new_formatted_pos) {\n                        formatted_position = new_formatted_pos;\n                        return self.position(command_len);\n                    }\n                    var pos = find_position(command, new_formatted_pos);\n                    if (pos !== -1) {\n                        formatted_position = new_formatted_pos;\n                        self.position(pos);\n                    }\n                    return self;\n                }\n            },\n            visible: (function() {\n                var visible = self.visible;\n                return function() {\n                    visible.apply(self, []);\n                    redraw();\n                    draw_prompt();\n                    return self;\n                };\n            })(),\n            show: (function() {\n                var show = self.show;\n                return function() {\n                    show.apply(self, []);\n                    redraw();\n                    draw_prompt();\n                    return self;\n                };\n            })(),\n            resize: function(num) {\n                char_width = get_char_width();\n                var new_num_chars;\n                if (typeof num === 'number') {\n                    new_num_chars = num;\n                } else {\n                    new_num_chars = get_num_chars(char_width);\n                }\n                if (num_chars !== new_num_chars || arguments[0] === true) {\n                    num_chars = new_num_chars;\n                    redraw();\n                    draw_prompt();\n                }\n                return self;\n            },\n            invoke_key: function(shortcut) {\n                var keys = shortcut.toUpperCase().split('+');\n                var key = keys.pop();\n                var ctrl = keys.indexOf('CTRL') !== -1;\n                var shift = keys.indexOf('SHIFT') !== -1;\n                var alt = keys.indexOf('ALT') !== -1;\n                var meta = keys.indexOf('META') !== -1;\n                var e = $.Event(\"keydown\", {\n                    ctrlKey: ctrl,\n                    shiftKey: shift,\n                    altKey: alt,\n                    metaKey: meta,\n                    which: reversed_keycodes[key],\n                    key: key\n                });\n                var doc = $(document.documentElement || window);\n                doc.trigger(e);\n                e = $.Event(\"keypress\");\n                e.key = key;\n                e.which = e.keyCode = 0;\n                doc.trigger(e);\n                return self;\n            },\n            clip: function() {\n                return clip;\n            },\n            enable: function(silent) {\n                if (!enabled) {\n                    enabled = true;\n                    self.addClass('enabled');\n                    try {\n                        if (!clip.$node.is(':focus')) {\n                            clip.$node.focus();\n                        }\n                        clip.$node.caret(position);\n                    } catch (e) {\n                        // firefox throw NS_ERROR_FAILURE - ignore\n                    }\n                    animation(true);\n                    if (!silent && is_function(prompt)) {\n                        draw_prompt();\n                    }\n                    fix_cursor();\n                    fix_textarea();\n                }\n                mobile_focus();\n                return self;\n            },\n            isenabled: function() {\n                return enabled;\n            },\n            disable: function(focus) {\n                enabled = false;\n                self.removeClass('enabled');\n                animation(false);\n                if (!focus) {\n                    mobile_focus();\n                }\n                return self;\n            },\n            mask: function(new_mask) {\n                if (typeof new_mask === 'undefined') {\n                    return settings.mask;\n                } else {\n                    settings.mask = new_mask;\n                    redraw();\n                    return self;\n                }\n            }\n        });\n        // ---------------------------------------------------------------------\n        // :: INIT\n        // ---------------------------------------------------------------------\n        self.name(settings.name || settings.prompt || '');\n        if (settings.prompt !== false) {\n            prompt = settings.prompt;\n            draw_prompt();\n        }\n        if (settings.enabled === true) {\n            self.enable();\n        }\n        char_width = get_char_width();\n        num_chars = get_num_chars(char_width);\n        if (!settings.history) {\n            history.disable();\n        }\n        var first_up_history = true;\n        // skip_keypress - hack for Android that was inserting characters on\n        // backspace\n        var skip_keypress = false;\n        var dead_key = false;\n        var single_key = false;\n        var no_keypress = false;\n        var no_key = false;\n        var no_keydown = true;\n        var backspace = false;\n        var process = false;\n        var hold = false;\n        var hold_pause = false;\n        var skip_insert;\n        // we hold text before keydown to fix backspace for Android/Chrome/SwiftKey\n        // keyboard that generate keycode 229 for all keys #296\n        var prev_command = '';\n        var prev_key;\n        // ---------------------------------------------------------------------\n        // :: Keydown Event Handler\n        // ---------------------------------------------------------------------\n        function is_backspace(e) {\n            return e.key.toUpperCase() === 'BACKSPACE' || e.which === 8;\n        }\n        // ---------------------------------------------------------------------\n        function is_single(e) {\n            return e.key && e.key.length === 1 && !e.ctrlKey;\n        }\n        // ---------------------------------------------------------------------\n        function is_delay_key(key) {\n            var specials = ['HOLD+SHIFT+BACKSPACE', 'HOLD+BACKSPACE'];\n            return specials.indexOf(key) !== -1 && settings.mobileDelete ||\n                settings.repeatTimeoutKeys.indexOf(key) !== -1;\n        }\n        // ---------------------------------------------------------------------\n        function clear_reverse_search_key(e) {\n            // arrows / Home / End / ENTER\n            return e.which === 35 || e.which === 36 ||\n                e.which === 37 || e.which === 38 ||\n                e.which === 39 || e.which === 40 ||\n                e.which === 13 || e.which === 27;\n        }\n        var skip_keydown = false;\n        // ---------------------------------------------------------------------\n        // function complexicity is 35 when adding this exception\n        // eslint-disable-next-line complexity\n        function keydown_event(e) {\n            debug('keydown \"' + e.key + '\" ' + e.fake + ' ' + e.which);\n            var result;\n            process = (e.key || '').toLowerCase() === 'process' || e.which === 0;\n            dead_key = no_keypress && single_key && !is_backspace(e);\n            // special keys don't trigger keypress fix #293\n            try {\n                if (!e.fake) {\n                    single_key = is_single(e);\n                    // chrome on android support key property but it's \"Unidentified\"\n                    no_key = String(e.key).toLowerCase() === 'unidentified';\n                    backspace = is_backspace(e);\n                }\n            } catch (exception) {}\n            // keydown created in input will have text already inserted and we\n            // want text before input\n            if (e.key === \"Unidentified\") {\n                no_keydown = true;\n                // android swift keyboard have always which == 229 we will triger proper\n                // event in input with e.fake == true\n                return;\n            }\n            // meta and os are special keydown triggered by Emoji picker on Windows 10\n            // meta is in Google Chrome is is in Firefox\n            if (!e.fake && ['meta', 'os'].indexOf(e.key.toLowerCase()) === -1) {\n                no_keydown = false;\n            }\n            no_keypress = true;\n            // Meta+V did bind input but it didin't happen because terminal paste\n            // prevent native insert action\n            clip.$node.off('input', paste);\n            var key = get_key(e);\n            if (is_function(settings.keydown)) {\n                e.key = ie_key_fix(e);\n                result = settings.keydown.call(self, e);\n                if (result !== undefined) {\n                    //skip_keypress = true;\n                    if (!result) {\n                        skip_insert = true;\n                    }\n                    return result;\n                }\n            }\n            if (key !== prev_key) {\n                clear_hold();\n            }\n            // CTRL+C hanlding is only exception of cmd aware terminal logic\n            // cmd need to call CTRL+C keymap when terminal is not enabled\n            if (enabled || (key === 'CTRL+C' && is_terminal_selected(self))) {\n                if (hold) {\n                    prev_key = key;\n                    key = 'HOLD+' + key;\n                    if (hold_pause) {\n                        return;\n                    }\n                    if (settings.holdRepeatTimeout > 0 && is_delay_key(key)) {\n                        hold_pause = true;\n                        self.oneTime(settings.holdRepeatTimeout, 'delay', function() {\n                            hold_pause = false;\n                        });\n                    }\n                } else {\n                    self.oneTime(settings.holdTimeout, 'hold', function() {\n                        hold = true;\n                    });\n                    prev_key = key;\n                }\n                // if e.fake ignore of space is handled in input and next keydown\n                // is not triggered this is just in case code since on Android\n                // keydown is not triggered only input so event is always fake on Android\n                if (!e.fake && is_android) {\n                    if (skip_keydown) {\n                        clear_hold();\n                        skip_keydown = false;\n                        return false;\n                    }\n                    if (mobile_ignore_key(key)) {\n                        skip_keydown = true;\n                    } else if (mobile_ignore_key(prev_key)) {\n                        // just in case next key is different then space\n                        skip_keydown = false;\n                    }\n                }\n                restart_animation();\n                // CTRL+V don't fire keypress in IE11\n                skip_insert = ['CTRL+V', 'META+V'].indexOf(key) !== -1;\n                // only enter will reset history (and down arrow on last command)\n                if (key.toLowerCase() === 'enter') {\n                    first_up_history = true;\n                }\n                if (reverse_search && clear_reverse_search_key(e)) {\n                    clear_reverse_state();\n                    draw_prompt();\n                    if (e.which === 27) { // ESC\n                        self.set('');\n                    }\n                    redraw();\n                    if (e.which === 13) {\n                        keydown_event.call(this, e);\n                    }\n                } else if (is_function(keymap[key])) {\n                    result = keymap[key](e);\n                    if (result === true) {\n                        return;\n                    }\n                    if (result !== undefined) {\n                        return result;\n                    }\n                } else if (e.altKey) {\n                    return;\n                } else {\n                    skip_keypress = false;\n                    return;\n                }\n                // this will prevent for instance backspace to go back one page\n                //skip_keypress = true;\n                //e.preventDefault();\n            }\n        }\n        function clear_hold() {\n            self.stopTime('hold');\n            self.stopTime('delay');\n            hold_pause = hold = false;\n        }\n        var doc = $(document.documentElement || window);\n        self.keymap(settings.keymap || {});\n        function keypress_event(e) {\n            debug('keypress \"' + e.key + '\" ' + e.fake);\n            clear_hold();\n            var result;\n            if (!e.fake) {\n                no_keypress = false;\n            }\n            if ((e.ctrlKey || e.metaKey) && !e.altKey) {\n                return;\n            }\n            if (skip_keypress) {\n                return;\n            }\n            if (is_function(settings.keypress)) {\n                result = settings.keypress.call(self, e);\n                if (result !== undefined) {\n                    if (!result) {\n                        skip_insert = true;\n                    }\n                    return result;\n                }\n            }\n            if (enabled) {\n                if (e.fake) {\n                    // event created in input, we prevent inserting text\n                    // in different interpreter when keydown called pop\n                    return;\n                }\n                // key polyfill is not correct for keypress\n                // https://github.com/cvan/keyboardevent-key-polyfill/issues/15\n                var key;\n                if (is_key_native) {\n                    key = e.key;\n                    // fixing IE inconsistency #362\n                    var normalized = key.toUpperCase();\n                    if (key_mapping[normalized]) {\n                        key = key_mapping[normalized];\n                    }\n                }\n                if (!key || no_key) {\n                    key = String.fromCharCode(e.which);\n                }\n                if ($.inArray(e.which, [13, 0, 8]) > -1) {\n                    if (e.keyCode === 123) { // for F12 which === 0\n                        return;\n                    }\n                    return false;\n                    // which === 100 - d\n                } else if (key && (!e.ctrlKey || (e.ctrlKey && e.ctrlKey)) &&\n                           (!(e.altKey && e.which === 100) || e.altKey) &&\n                           !dead_key) {\n                    // dead_key are handled by input event\n                    if (reverse_search) {\n                        rev_search_str += key;\n                        reverse_history_search();\n                        draw_reverse_prompt();\n                    } else if (key.length === 1) {\n                        self.insert(key);\n                    }\n                }\n            }\n        }\n        function event(type, chr, which) {\n            var event = $.Event(type);\n            event.which = which;\n            event.key = chr;\n            event.fake = true;\n            doc.trigger(event);\n        }\n        var skip_input = false;\n        function input_event() {\n            debug('input ' + no_keydown + ' || ' + process + ' ((' + no_keypress +\n                  ' || ' + dead_key + ') && !' + skip_insert + ' && (' + single_key +\n                  ' || ' + no_key + ') && !' + backspace + ')');\n            // correct for fake space used for select all context menu hack\n            var val = clip.val();\n            if (!is_mobile) {\n                val = val.replace(/^ /, '');\n            }\n            // Some Androids don't fire keypress - #39\n            // if there is dead_key we also need to grab real character #158\n            // Firefox/Android with google keyboard don't fire keydown and keyup #319\n            if ((no_keydown || process || ((no_keypress || dead_key) && !skip_insert &&\n                                          (single_key || no_key) && !backspace)) &&\n                val !== command) {\n                var pos = position;\n                // backspace is set in keydown if no keydown we need to get new one\n                if (no_keydown) {\n                    var cmd = prev_command;\n                    backspace = cmd.slice(0, cmd.length - 1).length === val.length;\n                }\n                if (skip_input) {\n                    skip_input = false;\n                    clip.val(command);\n                    return;\n                }\n                if (reverse_search) {\n                    rev_search_str = val;\n                    reverse_history_search();\n                    draw_reverse_prompt();\n                } else {\n                    var str = val.slice(position);\n                    if (str.length === 1 || backspace) {\n                        // original not optimized function called once\n                        var chr = get_next_character(str);\n                        if (mobile_ignore_key(chr)) {\n                            skip_input = true;\n                        }\n                        // we trigger events so keypress and keydown callback work\n                        if (no_keydown) {\n                            var keycode;\n                            if (backspace) {\n                                keycode = 8;\n                            } else {\n                                keycode = str.toUpperCase().charCodeAt(0);\n                            }\n                            event('keydown', backspace ? 'Backspace' : str, keycode);\n                        }\n                        if (no_keypress && !backspace) {\n                            event('keypress', chr, str.charCodeAt(0));\n                        }\n                    }\n                    if (backspace) {\n                        prev_command = command;\n                        return;\n                    }\n                    // if user return false in keydown we don't want to insert text\n                    if (skip_insert) {\n                        skip_insert = false;\n                        return;\n                    }\n                    self.set(val);\n                }\n                if (backspace) {\n                    self.position(pos - 1);\n                } else {\n                    // user enter more then one character if click on complete word\n                    // on android\n                    self.position(pos + Math.abs(val.length - prev_command.length));\n                }\n            }\n            prev_command = command;\n            skip_insert = false;\n            no_keydown = true;\n        }\n        doc.bind('keypress.cmd', keypress_event);\n        doc.bind('keydown.cmd', keydown_event);\n        doc.bind('keyup.cmd', clear_hold);\n        doc.bind('input.cmd', input_event);\n        (function() {\n            if (is_mobile) {\n                $(self[0]).add(clip.$node).on('touchstart.cmd', function() {\n                    if (!self.isenabled()) {\n                        clip.focus();\n                    } else {\n                        clip.blur();\n                    }\n                });\n                self.disable();\n                return;\n            }\n            var was_down = false;\n            var count = 0;\n            self.on('mousedown.cmd', function() {\n                was_down = true;\n            }).on('mouseup.cmd', function(e) {\n                function trigger() {\n                    var $target = $(e.target);\n                    var is_prompt = $target.is('.cmd-prompt');\n                    if (!is_prompt && down && get_selected_html() === '') {\n                        if (enabled) {\n                            if ($target.is('.cmd')) {\n                                self.position(text(command).length);\n                            } else {\n                                self.display_position(get_char_pos(e));\n                            }\n                        }\n                    }\n                    count = 0;\n                }\n                // we get button from event for testing normally it's on originalEvent\n                var button;\n                if (e.originalEvent === undefined) {\n                    button = e.button;\n                } else {\n                    button = e.originalEvent.button;\n                }\n                if (button === 0 && get_selected_html() === '') {\n                    var name = 'click_' + id;\n                    if (++count === 1) {\n                        var down = was_down;\n                        if (enabled) {\n                            if (settings.clickTimeout === 0) {\n                                trigger();\n                            } else {\n                                self.oneTime(settings.clickTimeout, name, trigger);\n                            }\n                        } else {\n                            count = 0;\n                        }\n                    } else {\n                        self.stopTime(name);\n                        count = 0;\n                    }\n                }\n                was_down = false;\n            });\n        })();\n        self.data('cmd', self);\n        if (!('KeyboardEvent' in window && 'key' in window.KeyboardEvent.prototype)) {\n            setTimeout(function() {\n                throw new Error('key event property not supported try https://github.' +\n                                'com/inexorabletash/polyfill/blob/master/keyboard.js');\n            }, 0);\n        }\n        return self;\n    }; // cmd plugin\n    // -------------------------------------------------------------------------\n    var strlen = (function() {\n        if (typeof wcwidth === 'undefined') {\n            return function(string) {\n                return $.terminal.length(string);\n            };\n        } else {\n            return wcwidth;\n        }\n    })();\n    // -------------------------------------------------------------------------\n    function count_selfclosing_formatting(string) {\n        var count = 0;\n        if ($.terminal.have_formatting(string)) {\n            var re = new RegExp(format_parts_re.source, 'i'); // without g flag\n            $.terminal.format_split(string).forEach(function(str) {\n                if ($.terminal.is_formatting(str)) {\n                    var m = str.match(re);\n                    if (m && m[1].match(/@/) && m[6] === '') {\n                        count++;\n                    }\n                }\n            });\n        }\n        return count;\n    }\n    // -------------------------------------------------------------------------\n    // entiteis are case sensitive\n    // generated from https://www.freeformatter.com/html-entities.html\n    // -------------------------------------------------------------------------\n    var entities = {\n        \"&amp;\": \"&\",\n        \"&lt;\": \"<\",\n        \"&gt;\": \">\",\n        \"&Agrave;\": \"À\",\n        \"&Aacute;\": \"Á\",\n        \"&Acirc;\": \"Â\",\n        \"&Atilde;\": \"Ã\",\n        \"&Auml;\": \"Ä\",\n        \"&Aring;\": \"Å\",\n        \"&AElig;\": \"Æ\",\n        \"&Ccedil;\": \"Ç\",\n        \"&Egrave;\": \"È\",\n        \"&Eacute;\": \"É\",\n        \"&Ecirc;\": \"Ê\",\n        \"&Euml;\": \"Ë\",\n        \"&Igrave;\": \"Ì\",\n        \"&Iacute;\": \"Í\",\n        \"&Icirc;\": \"Î\",\n        \"&Iuml;\": \"Ï\",\n        \"&ETH;\": \"Ð\",\n        \"&Ntilde;\": \"Ñ\",\n        \"&Ograve;\": \"Ò\",\n        \"&Oacute;\": \"Ó\",\n        \"&Ocirc;\": \"Ô\",\n        \"&Otilde;\": \"Õ\",\n        \"&Ouml;\": \"Ö\",\n        \"&Oslash;\": \"Ø\",\n        \"&Ugrave;\": \"Ù\",\n        \"&Uacute;\": \"Ú\",\n        \"&Ucirc;\": \"Û\",\n        \"&Uuml;\": \"Ü\",\n        \"&Yacute;\": \"Ý\",\n        \"&THORN;\": \"Þ\",\n        \"&szlig;\": \"ß\",\n        \"&agrave;\": \"à\",\n        \"&aacute;\": \"á\",\n        \"&acirc;\": \"â\",\n        \"&atilde;\": \"ã\",\n        \"&auml;\": \"ä\",\n        \"&aring;\": \"å\",\n        \"&aelig;\": \"æ\",\n        \"&ccedil;\": \"ç\",\n        \"&egrave;\": \"è\",\n        \"&eacute;\": \"é\",\n        \"&ecirc;\": \"ê\",\n        \"&euml;\": \"ë\",\n        \"&igrave;\": \"ì\",\n        \"&iacute;\": \"í\",\n        \"&icirc;\": \"î\",\n        \"&iuml;\": \"ï\",\n        \"&eth;\": \"ð\",\n        \"&ntilde;\": \"ñ\",\n        \"&ograve;\": \"ò\",\n        \"&oacute;\": \"ó\",\n        \"&ocirc;\": \"ô\",\n        \"&otilde;\": \"õ\",\n        \"&ouml;\": \"ö\",\n        \"&oslash;\": \"ø\",\n        \"&ugrave;\": \"ù\",\n        \"&uacute;\": \"ú\",\n        \"&ucirc;\": \"û\",\n        \"&uuml;\": \"ü\",\n        \"&yacute;\": \"ý\",\n        \"&thorn;\": \"þ\",\n        \"&yuml;\": \"ÿ\",\n        \"&nbsp;\": \" \",\n        \"&iexcl;\": \"¡\",\n        \"&cent;\": \"¢\",\n        \"&pound;\": \"£\",\n        \"&curren;\": \"¤\",\n        \"&yen;\": \"¥\",\n        \"&brvbar;\": \"¦\",\n        \"&sect;\": \"§\",\n        \"&uml;\": \"¨\",\n        \"&copy;\": \"©\",\n        \"&ordf;\": \"ª\",\n        \"&laquo;\": \"«\",\n        \"&not;\": \"¬\",\n        \"&shy;\": \"­\",\n        \"&reg;\": \"®\",\n        \"&macr;\": \"¯\",\n        \"&deg;\": \"°\",\n        \"&plusmn;\": \"±\",\n        \"&sup2;\": \"²\",\n        \"&sup3;\": \"³\",\n        \"&acute;\": \"´\",\n        \"&micro;\": \"µ\",\n        \"&para;\": \"¶\",\n        \"&cedil;\": \"¸\",\n        \"&sup1;\": \"¹\",\n        \"&ordm;\": \"º\",\n        \"&raquo;\": \"»\",\n        \"&frac14;\": \"¼\",\n        \"&frac12;\": \"½\",\n        \"&frac34;\": \"¾\",\n        \"&iquest;\": \"¿\",\n        \"&times;\": \"×\",\n        \"&divide;\": \"÷\",\n        \"&forall;\": \"∀\",\n        \"&part;\": \"∂\",\n        \"&exist;\": \"∃\",\n        \"&empty;\": \"∅\",\n        \"&nabla;\": \"∇\",\n        \"&isin;\": \"∈\",\n        \"&notin;\": \"∉\",\n        \"&ni;\": \"∋\",\n        \"&prod;\": \"∏\",\n        \"&sum;\": \"∑\",\n        \"&minus;\": \"−\",\n        \"&lowast;\": \"∗\",\n        \"&radic;\": \"√\",\n        \"&prop;\": \"∝\",\n        \"&infin;\": \"∞\",\n        \"&ang;\": \"∠\",\n        \"&and;\": \"∧\",\n        \"&or;\": \"∨\",\n        \"&cap;\": \"∩\",\n        \"&cup;\": \"∪\",\n        \"&int;\": \"∫\",\n        \"&there4;\": \"∴\",\n        \"&sim;\": \"∼\",\n        \"&cong;\": \"≅\",\n        \"&asymp;\": \"≈\",\n        \"&ne;\": \"≠\",\n        \"&equiv;\": \"≡\",\n        \"&le;\": \"≤\",\n        \"&ge;\": \"≥\",\n        \"&sub;\": \"⊂\",\n        \"&sup;\": \"⊃\",\n        \"&nsub;\": \"⊄\",\n        \"&sube;\": \"⊆\",\n        \"&supe;\": \"⊇\",\n        \"&oplus;\": \"⊕\",\n        \"&otimes;\": \"⊗\",\n        \"&perp;\": \"⊥\",\n        \"&sdot;\": \"⋅\",\n        \"&Alpha;\": \"Α\",\n        \"&Beta;\": \"Β\",\n        \"&Gamma;\": \"Γ\",\n        \"&Delta;\": \"Δ\",\n        \"&Epsilon;\": \"Ε\",\n        \"&Zeta;\": \"Ζ\",\n        \"&Eta;\": \"Η\",\n        \"&Theta;\": \"Θ\",\n        \"&Iota;\": \"Ι\",\n        \"&Kappa;\": \"Κ\",\n        \"&Lambda;\": \"Λ\",\n        \"&Mu;\": \"Μ\",\n        \"&Nu;\": \"Ν\",\n        \"&Xi;\": \"Ξ\",\n        \"&Omicron;\": \"Ο\",\n        \"&Pi;\": \"Π\",\n        \"&Rho;\": \"Ρ\",\n        \"&Sigma;\": \"Σ\",\n        \"&Tau;\": \"Τ\",\n        \"&Upsilon;\": \"Υ\",\n        \"&Phi;\": \"Φ\",\n        \"&Chi;\": \"Χ\",\n        \"&Psi;\": \"Ψ\",\n        \"&Omega;\": \"Ω\",\n        \"&alpha;\": \"α\",\n        \"&beta;\": \"β\",\n        \"&gamma;\": \"γ\",\n        \"&delta;\": \"δ\",\n        \"&epsilon;\": \"ε\",\n        \"&zeta;\": \"ζ\",\n        \"&eta;\": \"η\",\n        \"&theta;\": \"θ\",\n        \"&iota;\": \"ι\",\n        \"&kappa;\": \"κ\",\n        \"&lambda;\": \"λ\",\n        \"&mu;\": \"μ\",\n        \"&nu;\": \"ν\",\n        \"&xi;\": \"ξ\",\n        \"&omicron;\": \"ο\",\n        \"&pi;\": \"π\",\n        \"&rho;\": \"ρ\",\n        \"&sigmaf;\": \"ς\",\n        \"&sigma;\": \"σ\",\n        \"&tau;\": \"τ\",\n        \"&upsilon;\": \"υ\",\n        \"&phi;\": \"φ\",\n        \"&chi;\": \"χ\",\n        \"&psi;\": \"ψ\",\n        \"&omega;\": \"ω\",\n        \"&thetasym;\": \"ϑ\",\n        \"&upsih;\": \"ϒ\",\n        \"&piv;\": \"ϖ\",\n        \"&OElig;\": \"Œ\",\n        \"&oelig;\": \"œ\",\n        \"&Scaron;\": \"Š\",\n        \"&scaron;\": \"š\",\n        \"&Yuml;\": \"Ÿ\",\n        \"&fnof;\": \"ƒ\",\n        \"&circ;\": \"ˆ\",\n        \"&tilde;\": \"˜\",\n        \"&ensp;\": \" \",\n        \"&emsp;\": \" \",\n        \"&thinsp;\": \" \",\n        \"&zwnj;\": \"‌\",\n        \"&zwj;\": \"‍\",\n        \"&lrm;\": \"‎\",\n        \"&rlm;\": \"‏\",\n        \"&ndash;\": \"–\",\n        \"&mdash;\": \"—\",\n        \"&lsquo;\": \"‘\",\n        \"&rsquo;\": \"’\",\n        \"&sbquo;\": \"‚\",\n        \"&ldquo;\": \"“\",\n        \"&rdquo;\": \"”\",\n        \"&bdquo;\": \"„\",\n        \"&dagger;\": \"†\",\n        \"&Dagger;\": \"‡\",\n        \"&bull;\": \"•\",\n        \"&hellip;\": \"…\",\n        \"&permil;\": \"‰\",\n        \"&prime;\": \"′\",\n        \"&Prime;\": \"″\",\n        \"&lsaquo;\": \"‹\",\n        \"&rsaquo;\": \"›\",\n        \"&oline;\": \"‾\",\n        \"&euro;\": \"€\",\n        \"&trade;\": \"™\",\n        \"&larr;\": \"←\",\n        \"&uarr;\": \"↑\",\n        \"&rarr;\": \"→\",\n        \"&darr;\": \"↓\",\n        \"&harr;\": \"↔\",\n        \"&crarr;\": \"↵\",\n        \"&lceil;\": \"⌈\",\n        \"&rceil;\": \"⌉\",\n        \"&lfloor;\": \"⌊\",\n        \"&rfloor;\": \"⌋\",\n        \"&loz;\": \"◊\",\n        \"&spades;\": \"♠\",\n        \"&clubs;\": \"♣\",\n        \"&hearts;\": \"♥\",\n        \"&diams;\": \"♦\"\n    };\n    // -------------------------------------------------------------------------\n    function render_entities(str) {\n        return str.replace(/&#(x?)([0-9]+);/g, function(_, hex, code) {\n            code = parseInt(code, hex ? 16 : 10);\n            return String.fromCharCode(code);\n        }).replace(/(&[^;]+;)/g, function(_, entity) {\n            return entities[entity] || entity;\n        });\n    }\n    // -------------------------------------------------------------------------\n    function bare_text(string) {\n        if (!string.match(/&/)) {\n            return string;\n        }\n        return render_entities(safe(string));\n    }\n    // -------------------------------------------------------------------------\n    function text(string) {\n        return bare_text($.terminal.strip(string));\n    }\n    // -------------------------------------------------------------------------\n    function safe(string) {\n        if (!string.match(/[<>&]/)) {\n            return string;\n        }\n        return string.replace(/&(?![^;]+;)/g, '&amp;')\n            .replace(/>/g, '&gt;').replace(/</g, '&lt;');\n    }\n    // -------------------------------------------------------------------------\n    function crlf(string) {\n        return string.replace(/\\r/g, '');\n    }\n    // -------------------------------------------------------------------------\n    function char_len(chr) {\n        return entity_re.test(chr) ? 1 : chr.length;\n    }\n    // -------------------------------------------------------------------------\n    function make_re_fn(re) {\n        return function(string) {\n            var m = string.match(re);\n            if (starts_with(m)) {\n                return m[1];\n            }\n        };\n    }\n    // -------------------------------------------------------------------------\n    function starts_with(match) {\n        return match && match.index === 0;\n    }\n    // -------------------------------------------------------------------------\n    // :: optimized higher order function that it check complex regexes\n    // :: only when bigger string match those regexes, function is always\n    // :: used in loop when you process whole string, it's used to create local\n    // :: get_next_character function only cmd in input use original\n    // :: not optimized function\n    // -------------------------------------------------------------------------\n    function make_next_char_fun(string) {\n        var tests = [];\n        [\n            entity_re,\n            emoji_re,\n            combine_chr_re\n        ].forEach(function(re) {\n            if (string.match(re)) {\n                tests.push(make_re_fn(re));\n            }\n        });\n        if (string.match(astral_symbols_re)) {\n            tests.push(function(string) {\n                var m1 = string.match(astral_symbols_re);\n                if (starts_with(m1)) {\n                    var m2 = string.match(combine_chr_re);\n                    if (m2 && m2.index === 1) {\n                        return string.slice(0, 3);\n                    }\n                    return m1[1];\n                }\n            });\n        }\n        return function(string) {\n            for (var i = 0; i < tests.length; ++i) {\n                var test = tests[i];\n                var ret = test(string);\n                if (ret) {\n                    return ret;\n                }\n            }\n            return string[0];\n        };\n    }\n    // -------------------------------------------------------------------------\n    // :: function that return character from beginning of the string\n    // :: counting emoji, suroggate pairs and combine characters\n    // -------------------------------------------------------------------------\n    function get_next_character(string) {\n        var match_entity = string.match(entity_re);\n        if (starts_with(match_entity)) {\n            return match_entity[1];\n        }\n        var match_combo = string.match(combine_chr_re);\n        if (starts_with(match_combo)) {\n            return match_combo[1];\n        }\n        var match_emoji = string.match(emoji_re);\n        if (starts_with(match_emoji)) {\n            return match_emoji[1];\n        } else if (string.charCodeAt(0) < 255) {\n            return string[0];\n        } else {\n            var astral_match = string.match(astral_symbols_re);\n            if (starts_with(astral_match)) {\n                match_combo = string.match(combine_chr_re);\n                if (match_combo && match_combo.index === 1) {\n                    return string.slice(0, 3);\n                }\n                return string.slice(0, 2);\n            } else {\n                return string[0];\n            }\n        }\n    }\n    // -------------------------------------------------------------------------\n    // normalize position for counting emoji and extra chars\n    // -------------------------------------------------------------------------\n    function normalize_position(string, position) {\n        if (position === 0) {\n            return position;\n        }\n        string = $.terminal.strip(string);\n        var result = $.terminal.split_characters(string).reduce(function(acc, chr) {\n            if (typeof acc === 'number') {\n                return acc;\n            }\n            var length = acc.length + char_len(chr);\n            if (length >= position) {\n                return acc.position + 1;\n            }\n            return {\n                position: acc.position + 1,\n                length: length\n            };\n        }, {position: 0, length: 0});\n        if (typeof result === 'number') {\n            return result;\n        } else {\n            return result.position;\n        }\n    }\n    // -------------------------------------------------------------------------\n    function char_width_prop(len, options) {\n        if (is_ch_unit_supported) {\n            return 'width: ' + len + 'ch';\n        } else if (!is_css_variables_supported) {\n            if (options.char_width) {\n                return 'width: ' + (options.char_width * len) + 'px';\n            }\n        } else {\n            return '--length: ' + len;\n        }\n        return '';\n    }\n    // -------------------------------------------------------------------------\n    // options {char_width}\n    function extra_css(text, options) {\n        if (typeof wcwidth !== 'undefined') {\n            var bare = bare_text(text);\n            var len = strlen(bare);\n            if (len > 1 && len !== $.terminal.length(bare)) {\n                return char_width_prop(len, options);\n            }\n        }\n        return '';\n    }\n    // -------------------------------------------------------------------------\n    function wide_characters(text, options) {\n        if (typeof wcwidth !== 'undefined') {\n            var bare = bare_text(text);\n            var chars = $.terminal.split_characters(bare);\n            if (chars.length === 1) {\n                return text;\n            }\n            var specs = chars.map(function(chr) {\n                return {\n                    len: strlen(chr),\n                    chr: chr\n                };\n            }).reduce(function(arr, spec) {\n                var last = arr[arr.length - 1];\n                if (last) {\n                    if (last.len !== spec.len) {\n                        return arr.concat([{\n                            sum: spec.len,\n                            len: spec.len,\n                            specs: [spec]\n                        }]);\n                    } else {\n                        arr.pop();\n                        return arr.concat([{\n                            sum: last.sum + spec.len,\n                            len: last.len,\n                            specs: last.specs.concat(spec)\n                        }]);\n                    }\n                }\n                return [{\n                    sum: spec.len,\n                    specs: [spec],\n                    len: spec.len\n                }];\n            }, []);\n            return specs.map(function(spec) {\n                if (spec.len === 1) {\n                    return make_string(spec);\n                }\n                var style = char_width_prop(spec.sum, options);\n                if (spec.sum === chars.length || !style.length) {\n                    return '<span>' + make_string(spec) + '</span>';\n                } else if (spec.specs.length > 1) {\n                    return wrap(style, spec.specs.map(function(spec) {\n                        return wrap(char_width_prop(spec.len), spec.chr);\n                    }).join(''));\n                } else {\n                    return wrap(style, make_string(spec));\n                }\n            }).join('');\n        }\n        function make_string(spec) {\n            return spec.specs.map(function(spec) {\n                return spec.chr;\n            }).join('');\n        }\n        function wrap(style, str) {\n            return '<span style=\"' + style + '\">' + str + '</span>';\n        }\n        return text;\n    }\n    // ---------------------------------------------------------------------\n    // :: Binary search utility\n    // ---------------------------------------------------------------------\n    function binary_search(start, end, search_pos, compare_fn, more_args) {\n        var len = end - start;\n        var mid = start + Math.floor(len / 2);\n        var args = [search_pos, mid].concat(more_args);\n        var cmp = compare_fn.apply(null, args);\n        if (cmp === 0) {\n            return mid;\n        } else if (cmp > 0 && len > 1) {\n            return binary_search(\n                mid,\n                end,\n                search_pos,\n                compare_fn,\n                more_args\n            );\n        } else if (cmp < 0 && len > 1) {\n            return binary_search(\n                start,\n                mid,\n                search_pos,\n                compare_fn,\n                more_args\n            );\n        } else {\n            return -1;\n        }\n    }\n    // -----------------------------------------------------------------\n    // :: selection utilities - should work in modern browser including IE9\n    // -----------------------------------------------------------------\n    function is_terminal_selected(cmd) {\n        if (is_function(window.getSelection)) {\n            var selection = window.getSelection();\n            if (selection.toString()) {\n                var node = selection.getRangeAt(0).startContainer.parentNode;\n                var term = $(node).closest('.terminal');\n                return term.length && (cmd && term.find('.cmd').is(cmd) || !cmd);\n            }\n        }\n    }\n    // -----------------------------------------------------------------\n    function get_selected_html() {\n        var html = '';\n        if (is_function(window.getSelection)) {\n            var sel = window.getSelection();\n            if (sel.rangeCount) {\n                var container = document.createElement('div');\n                for (var i = 0, len = sel.rangeCount; i < len; ++i) {\n                    container.appendChild(sel.getRangeAt(i).cloneContents());\n                }\n                html = container.innerHTML;\n            }\n        }\n        return html;\n    }\n    // -----------------------------------------------------------------\n    function with_selection(fn) {\n        var html = '';\n        var ranges = [];\n        if (is_function(window.getSelection)) {\n            var selection = window.getSelection();\n            if (selection.rangeCount) {\n                var container = document.createElement(\"div\");\n                for (var i = 0, len = selection.rangeCount; i < len; ++i) {\n                    var range = selection.getRangeAt(i).cloneRange();\n                    ranges.push(range);\n                    container.appendChild(range.cloneContents());\n                }\n                html = container.innerHTML;\n            }\n        }\n        fn(html);\n        if (ranges.length) {\n            selection.removeAllRanges();\n            ranges.forEach(function(range) {\n                selection.addRange(range);\n            });\n        }\n        return html !== '';\n    }\n    // -----------------------------------------------------------------\n    function process_selected_line() {\n        var $self = $(this);\n        var result = $self.text();\n        if ($self.hasClass('cmd-end-line')) {\n            result += '\\n';\n        }\n        return result;\n    }\n    // -----------------------------------------------------------------\n    function process_div(element) {\n        // span is empty line, div is default case with text\n        return $(element).find('> div, > span')\n            .map(process_selected_line).get().join('\\n').replace(/\\n$/, '');\n    }\n    // -----------------------------------------------------------------\n    function process_selected_html(html) {\n        var stdout;\n        var text = '';\n        var $html = $('<div>' + html + '</div>');\n        if (html.match(/<\\/div>/)) {\n            // match multiple echo output\n            stdout = $html.find('div[data-index]').map(function() {\n                return process_div(this);\n            }).get().join('\\n');\n            // match inside single echo output\n            if (!stdout && html.match(/style=\"width: 100%;?\"/)) {\n                stdout = process_div($html);\n            }\n            text = stdout;\n        }\n        var $prompt = $html.find('.cmd-prompt');\n        if ($prompt.length) {\n            if (text.length) {\n                text += '\\n';\n            }\n            text += $prompt.text();\n        }\n        var $cmd_lines = $html.find('[role=\"presentation\"]');\n        if ($cmd_lines.length) {\n            text += $cmd_lines.map(process_selected_line).get().join('');\n        }\n        if (!text.length && html) {\n            text = $html.text();\n        }\n        return text.replace(/\\xA0/g, ' '); // fix &nbsp; space\n    }\n    // ---------------------------------------------------------------------\n    // :: copy given DOM element text to clipboard\n    // ---------------------------------------------------------------------\n    var support_copy = (function() {\n        if (typeof document === 'undefined') {\n            return false;\n        }\n        if (!is_function(document.queryCommandSupported)) {\n            return false;\n        }\n        return document.queryCommandSupported('copy');\n    })();\n    // ---------------------------------------------------------------------\n    var text_to_clipboard;\n    if (support_copy) {\n        text_to_clipboard = function text_to_clipboard($textarea, text) {\n            var val = $textarea.val();\n            var had_focus = $textarea.is(':focus');\n            var pos = $textarea.caret();\n            if (window.navigator && window.navigator.clipboard) {\n                navigator.clipboard.writeText(text);\n            } else if (had_focus) {\n                $textarea.val(text).focus();\n                $textarea[0].select();\n                document.execCommand('copy');\n                $textarea.val(val);\n                $textarea.caret(pos);\n            } else {\n                var $text = $('<textarea/>').css({\n                    position: 'fixed',\n                    top: 0,\n                    left: 0\n                }).appendTo('body');\n                $text.val(text).focus();\n                $text[0].select();\n                document.execCommand('copy');\n                $text.blur();\n                $text.remove();\n            }\n            return true;\n        };\n    } else {\n        text_to_clipboard = $.noop;\n    }\n    // ---------------------------------------------------------------------\n    var get_textarea_selection = (function() {\n        function noop() {\n            return '';\n        }\n        if (typeof document === 'undefined') {\n            return noop;\n        }\n        var textarea = document.createElement('textarea');\n        var selectionStart = 'selectionStart' in textarea;\n        textarea = null;\n        if (selectionStart) {\n            return function(textarea) {\n                var length = textarea.selectionEnd - textarea.selectionStart;\n                return textarea.value.substr(textarea.selectionStart, length);\n            };\n        } else if (document.selection) {\n            return function() {\n                var range = document.selection.createRange();\n                return range.text();\n            };\n        } else {\n            return noop;\n        }\n    })();\n    // ---------------------------------------------------------------------\n    function clear_textarea_selection(textarea) {\n        textarea.selectionStart = textarea.selectionEnd = 0;\n    }\n    // ---------------------------------------------------------------------\n    // :: return string that are common in all elements of the array\n    // ---------------------------------------------------------------------\n    function common_string(string, array, matchCase) {\n        if (!array.length) {\n            return '';\n        }\n        var type = string_case(string);\n        var result = [];\n        for (var j = string.length; j < array[0].length; ++j) {\n            var push = false;\n            var candidate = array[0].charAt(j),\n                candidateLower = candidate.toLowerCase();\n            for (var i = 1; i < array.length; ++i) {\n                push = true;\n                var current = array[i].charAt(j),\n                    currentLower = current.toLowerCase();\n                if (candidate !== current) {\n                    if (matchCase || type === 'mixed') {\n                        push = false;\n                        break;\n                    } else if (candidateLower === currentLower) {\n                        if (type === 'lower') {\n                            candidate = candidate.toLowerCase();\n                        } else if (type === 'upper') {\n                            candidate = candidate.toUpperCase();\n                        } else {\n                            push = false;\n                            break;\n                        }\n                    } else {\n                        push = false;\n                        break;\n                    }\n                }\n            }\n            if (push) {\n                result.push(candidate);\n            } else {\n                break;\n            }\n        }\n        return string + result.join('');\n    }\n    // ---------------------------------------------------------------------\n    function trigger_terminal_change(next) {\n        terminals.forEach(function(term) {\n            term.settings().onTerminalChange.call(term, next);\n        });\n    }\n    // ---------------------------------------------------------------------\n    var select = (function() {\n        if (root.getSelection) {\n            var selection = root.getSelection();\n            if (selection.setBaseAndExtent) {\n                return function(start, end) {\n                    var selection = root.getSelection();\n                    selection.setBaseAndExtent(start, 0, end, 1);\n                };\n            } else {\n                return function(start, end) {\n                    var selection = root.getSelection();\n                    var range = document.createRange();\n                    range.setStart(start, 0);\n                    range.setEnd(end, end.childNodes.length);\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                };\n            }\n        } else {\n            return $.noop;\n        }\n    })();\n    // -------------------------------------------------------------------------\n    function process_command(string, fn) {\n        var array = string.match(command_re) || [];\n        if (array.length) {\n            var name = array.shift();\n            var args = $.map(array, function(arg) {\n                if (arg.match(/^[\"']/)) {\n                    arg = arg.replace(/\\n/g, '\\\\u0000\\\\u0000\\\\u0000\\\\u0000');\n                    arg = fn(arg);\n                    return arg.replace(/\\x00\\x00\\x00\\x00/g, '\\n');\n                }\n                return fn(arg);\n            });\n            var quotes = $.map(array, function(arg) {\n                var m = arg.match(/^(['\"`]).*\\1$/);\n                return m && m[1] || '';\n            });\n            var rest = string.slice(name.length).trim();\n            return {\n                command: string,\n                name: name,\n                args: args,\n                args_quotes: quotes,\n                rest: rest\n            };\n        } else {\n            return {\n                command: string,\n                name: '',\n                args: [],\n                args_quotes: [],\n                rest: ''\n            };\n        }\n    }\n    // -------------------------------------------------------------------------\n    $.terminal = {\n        version: '2.24.0',\n        date: 'Sat, 22 May 2021 11:55:42 +0000',\n        // colors from https://www.w3.org/wiki/CSS/Properties/color/keywords\n        color_names: [\n            'transparent', 'currentcolor', 'black', 'silver', 'gray', 'white',\n            'maroon', 'red', 'purple', 'fuchsia', 'green', 'lime', 'olive',\n            'yellow', 'navy', 'blue', 'teal', 'aqua', 'aliceblue',\n            'antiquewhite', 'aqua', 'aquamarine', 'azure', 'beige', 'bisque',\n            'black', 'blanchedalmond', 'blue', 'blueviolet', 'brown',\n            'burlywood', 'cadetblue', 'chartreuse', 'chocolate', 'coral',\n            'cornflowerblue', 'cornsilk', 'crimson', 'cyan', 'darkblue',\n            'darkcyan', 'darkgoldenrod', 'darkgray', 'darkgreen', 'darkgrey',\n            'darkkhaki', 'darkmagenta', 'darkolivegreen', 'darkorange',\n            'darkorchid', 'darkred', 'darksalmon', 'darkseagreen',\n            'darkslateblue', 'darkslategray', 'darkslategrey', 'darkturquoise',\n            'darkviolet', 'deeppink', 'deepskyblue', 'dimgray', 'dimgrey',\n            'dodgerblue', 'firebrick', 'floralwhite', 'forestgreen', 'fuchsia',\n            'gainsboro', 'ghostwhite', 'gold', 'goldenrod', 'gray', 'green',\n            'greenyellow', 'grey', 'honeydew', 'hotpink', 'indianred', 'indigo',\n            'ivory', 'khaki', 'lavender', 'lavenderblush', 'lawngreen',\n            'lemonchiffon', 'lightblue', 'lightcoral', 'lightcyan',\n            'lightgoldenrodyellow', 'lightgray', 'lightgreen', 'lightgrey',\n            'lightpink', 'lightsalmon', 'lightseagreen', 'lightskyblue',\n            'lightslategray', 'lightslategrey', 'lightsteelblue', 'lightyellow',\n            'lime', 'limegreen', 'linen', 'magenta', 'maroon',\n            'mediumaquamarine', 'mediumblue', 'mediumorchid', 'mediumpurple',\n            'mediumseagreen', 'mediumslateblue', 'mediumspringgreen',\n            'mediumturquoise', 'mediumvioletred', 'midnightblue', 'mintcream',\n            'mistyrose', 'moccasin', 'navajowhite', 'navy', 'oldlace', 'olive',\n            'olivedrab', 'orange', 'orangered', 'orchid', 'palegoldenrod',\n            'palegreen', 'paleturquoise', 'palevioletred', 'papayawhip',\n            'peachpuff', 'peru', 'pink', 'plum', 'powderblue', 'purple', 'red',\n            'rosybrown', 'royalblue', 'saddlebrown', 'salmon', 'sandybrown',\n            'seagreen', 'seashell', 'sienna', 'silver', 'skyblue', 'slateblue',\n            'slategray', 'slategrey', 'snow', 'springgreen', 'steelblue', 'tan',\n            'teal', 'thistle', 'tomato', 'turquoise', 'violet', 'wheat',\n            'white', 'whitesmoke', 'yellow', 'yellowgreen', 'rebeccapurple'],\n        // for unit tests\n        Cycle: Cycle,\n        History: History,\n        Stack: Stack,\n        // ---------------------------------------------------------------------\n        // :: Validate html color (it can be name or hex)\n        // ---------------------------------------------------------------------\n        valid_color: function valid_color(color) {\n            if (color.match(color_re)) {\n                return true;\n            } else {\n                return $.inArray(color.toLowerCase(), $.terminal.color_names) !== -1;\n            }\n        },\n        // ---------------------------------------------------------------------\n        // :: function check if given string contain invalid strings\n        // ---------------------------------------------------------------------\n        unclosed_strings: function unclosed_strings(string) {\n            return !!string.match(unclosed_strings_re);\n        },\n        // ---------------------------------------------------------------------\n        // :: Escape all special regex characters, so it can be use as regex to\n        // :: match exact string that contain those characters\n        // ---------------------------------------------------------------------\n        escape_regex: function escape_regex(str) {\n            if (typeof str === 'string') {\n                var special = /([-\\\\^$[\\]()+{}?*.|])/g;\n                return str.replace(special, '\\\\$1');\n            }\n        },\n        // ---------------------------------------------------------------------\n        // :: test if string contain formatting\n        // ---------------------------------------------------------------------\n        have_formatting: function have_formatting(str) {\n            return typeof str === 'string' && !!str.match(format_exist_re);\n        },\n        is_formatting: function is_formatting(str) {\n            return typeof str === 'string' && !!str.match(format_full_re);\n        },\n        // ---------------------------------------------------------------------\n        // :: return array of formatting and text between them\n        // ---------------------------------------------------------------------\n        format_split: function format_split(str) {\n            return str.split(format_split_re).filter(Boolean);\n        },\n        // ---------------------------------------------------------------------\n        // :: replace that return position after replace for working with\n        // :: replacement that change length of the string\n        // :: source https://stackoverflow.com/a/46756077/387194\n        // ---------------------------------------------------------------------\n        tracking_replace: function tracking_replace(string, rex, replacement, position) {\n            if (!(rex instanceof RegExp)) {\n                throw new Error('tracking_replace: Second argument need to be RegExp');\n            }\n            function substring(string, start, end) {\n                return string.slice(start, end);\n            }\n            function length(string) {\n                return $.terminal.strip(string).length;\n            }\n            var new_string = \"\";\n            var match;\n            var index = 0;\n            var rep_string;\n            var new_position = position;\n            var start;\n            rex.lastIndex = 0; // Just to be sure\n            while ((match = rex.exec(string))) {\n                // if regex don't have g flag lastIndex will not work\n                if (rex.global) {\n                    // Add any of the original string we just skipped\n                    var last_index = length(substring(string, 0, rex.lastIndex));\n                    start = last_index - length(match[0]);\n                } else {\n                    start = match.index;\n                    last_index = start + length(match[0]);\n                }\n                if (index < start) {\n                    new_string += substring(string, index, start);\n                }\n                index = last_index;\n                // Build the replacement string. This just handles $$ and $n,\n                // you may want to add handling for $`, $', and $&.\n                if (typeof replacement === 'function') {\n                    rep_string = replacement.apply(null, match);\n                } else {\n                    rep_string = replacement.replace(/\\$(\\$|\\d)/g, function(m, c0) {\n                        if (c0 === \"$\") {\n                            return \"$\";\n                        }\n                        return match[c0];\n                    });\n                }\n                // Add on the replacement\n                new_string += rep_string;\n                // If the position is affected...\n                if (start < position) {\n                    // ... update it:\n                    var rep_len = length(rep_string);\n                    rep_len += count_selfclosing_formatting(rep_string);\n                    if (last_index < position) {\n                        // It's after the replacement, move it\n                        new_position = Math.max(\n                            0,\n                            new_position +\n                            rep_len -\n                            length(match[0])\n                        );\n                    } else {\n                        // It's *in* the replacement, put it just after\n                        new_position += rep_len - (position - start);\n                    }\n                }\n                // If the regular expression doesn't have the g flag, break here so\n                // we do just one replacement (and so we don't have an endless loop!)\n                if (!rex.global) {\n                    break;\n                }\n            }\n            // Add on any trailing text in the string\n            if (index < length(string)) {\n                new_string += substring(string, index);\n            }\n            // Return the string and the updated position\n            if (string === new_string) {\n                return [string, position];\n            }\n            return [new_string, new_position];\n        },\n        // ---------------------------------------------------------------------\n        // :: helper function used by substring and split_equal it loop over\n        // :: string and execute callback with text count and other data\n        // ---------------------------------------------------------------------\n        iterate_formatting: function iterate_formatting(string, callback) {\n            function is_space(i) {\n                return string.slice(i - 6, i) === '&nbsp;' ||\n                    string.slice(i - 1, i).match(/\\s/);\n            }\n            // ----------------------------------------------------------------\n            function match_entity(index) {\n                return string.slice(index).match(entity_re);\n            }\n            // ----------------------------------------------------------------\n            function is_open_formatting(i) {\n                return string[i] === '[' && string[i + 1] === '[';\n            }\n            // ----------------------------------------------------------------\n            function is_escape_bracket(i) {\n                return string[i - 1] !== '\\\\' && string[i] === '\\\\' &&\n                    string[i + 1] === ']';\n            }\n            // ----------------------------------------------------------------\n            function is_text(i) {\n                return not_formatting && (string[i] !== ']' || !have_formatting)\n                    && !opening;\n            }\n            // ----------------------------------------------------------------\n            // :: function will skip to next character in main loop\n            // :: TODO: improve performance of emoji regex and check whole\n            // :: string it's complex string if not use simple function\n            // ----------------------------------------------------------------\n            var get_next_character = make_next_char_fun(string);\n            function next_iteration() {\n                var char = get_next_character(substring);\n                if (char.length > 1 && $.terminal.length(substring) > 1) {\n                    return char.length - 1;\n                }\n                return 0;\n            }\n            // ----------------------------------------------------------------\n            function is_next_space() {\n                return (is_space(i) && (not_formatting || opening)) &&\n                    (space === -1 && prev_space !== i || space !== -1);\n            }\n            // ----------------------------------------------------------------\n            // :: last iteration or one before closing formatting\n            // ----------------------------------------------------------------\n            var last = false;\n            function is_last() {\n                if (i === string.length - 1 && !last) {\n                    last = true;\n                } else {\n                    last = formatting && !!substring.match(/^.]$/);\n                }\n                return last;\n            }\n            // ----------------------------------------------------------------\n            var have_formatting = $.terminal.have_formatting(string);\n            var formatting = '';\n            var in_text = false;\n            var count = 0;\n            var match;\n            var space = -1;\n            var space_count = -1;\n            var prev_space;\n            var length = 0;\n            var offset = 0;\n            var re_ent = /(&[^;]+);$/;\n            for (var i = 0; i < string.length; i++) {\n                var substring = string.slice(i);\n                match = substring.match(format_start_re);\n                if (match) {\n                    formatting = match[1];\n                    in_text = false;\n                } else if (formatting) {\n                    if (string[i] === ']') {\n                        if (in_text) {\n                            formatting = '';\n                            in_text = false;\n                        } else {\n                            in_text = true;\n                        }\n                    }\n                } else {\n                    in_text = true;\n                }\n                var not_formatting = (formatting && in_text) || !formatting;\n                var opening = is_open_formatting(i);\n                if (is_next_space()) {\n                    space = i;\n                    space_count = count;\n                }\n                var braket = string[i].match(/[[\\]]/);\n                offset = 0;\n                if (not_formatting) {\n                    // treat entity as one character\n                    if (string[i] === '&') {\n                        match = match_entity(i);\n                        if (match) {\n                            i += match[1].length - 2; // 2 because continue adds 1 to i\n                            continue;\n                        }\n                        ++count;\n                        ++length;\n                    } else if (is_escape_bracket(i)) {\n                        // escape \\] and \\\\ counts as one character\n                        ++count;\n                        ++length;\n                        offset = 1;\n                        i += 1;\n                    } else if (!braket || !have_formatting) {\n                        ++count;\n                        ++length;\n                    }\n                }\n                if (is_text(i)) {\n                    if (strlen(string[i]) === 2) {\n                        length++;\n                    }\n                    var char = get_next_character(substring);\n                    var size = char.length;\n                    // begining of enity that we've skipped, we are at the end\n                    if (char === ';') {\n                        match = string.slice(0, i + 1).match(re_ent);\n                        if (match) {\n                            offset = match[1].length;\n                            size = offset + 1;\n                        }\n                    }\n                    var data = {\n                        last: is_last(),\n                        count: count,\n                        index: i - offset,\n                        formatting: formatting,\n                        length: length,\n                        text: in_text,\n                        size: size,\n                        space: space,\n                        space_count: space_count\n                    };\n                    var ret = callback(data);\n                    if (ret === false) {\n                        break;\n                    } else if (ret) {\n                        if (ret.count !== undefined) {\n                            count = ret.count;\n                        }\n                        if (ret.length !== undefined) {\n                            length = ret.length;\n                        }\n                        if (ret.space !== undefined) {\n                            prev_space = space;\n                            space = ret.space;\n                        }\n                        if (ret.index !== undefined) {\n                            i = ret.index;\n                            continue;\n                        }\n                    }\n                } else if (i === string.length - 1 && !last) {\n                    // last iteration, if formatting have last bracket,\n                    // from formatting, then last iteration\n                    // was already called (in if) #550\n                    callback({\n                        last: true,\n                        count: count + 1,\n                        index: i,\n                        formatting: formatting,\n                        length: 0,\n                        text: in_text,\n                        space: space\n                    });\n                }\n                // handle emoji, suroggate pairs and combine characters\n                if (in_text) {\n                    i += next_iteration();\n                }\n            }\n        },\n        // ---------------------------------------------------------------------\n        // :: function return string splitted into single characters\n        // :: each character is wrapped into formatting from input string\n        // :: or empty formatting so it will create span when using with ::format\n        // ---------------------------------------------------------------------\n        partition: function partition(string) {\n            if (!$.terminal.have_formatting(string)) {\n                var chars = $.terminal.split_characters(string);\n                return chars.map(wrap);\n            }\n            var result = [];\n            function wrap(string) {\n                if (string.match(/\\\\$/)) {\n                    string += '\\\\';\n                }\n                return '[[;;]' + string + ']';\n            }\n            function formatting(string) {\n                if ($.terminal.is_formatting(string)) {\n                    if (string.match(/\\\\]$/)) {\n                        string = string.replace(/\\\\]/g, '\\\\\\\\]');\n                    }\n                } else {\n                    string = wrap(string);\n                }\n                return string;\n            }\n            $.terminal.iterate_formatting(string, function(data) {\n                if (data.text) {\n                    var text = [];\n                    if (data.formatting) {\n                        text.push(data.formatting);\n                    }\n                    text.push(string.substring(data.index, data.index + data.size));\n                    if (data.formatting) {\n                        text.push(']');\n                    }\n                    result.push(formatting(text.join('')));\n                }\n            });\n            return result;\n        },\n        // ---------------------------------------------------------------------\n        // :: formatting aware substring function\n        // ---------------------------------------------------------------------\n        substring: function substring(string, start_index, end_index) {\n            var chars = $.terminal.split_characters(string);\n            if (!chars.slice(start_index, end_index).length) {\n                return '';\n            }\n            if (!$.terminal.have_formatting(string)) {\n                return chars.slice(start_index, end_index).join('');\n            }\n            var start = 0;\n            var end;\n            var start_formatting = '';\n            var end_formatting = '';\n            var prev_index;\n            var offset = 1;\n            $.terminal.iterate_formatting(string, function(data) {\n                if (start_index && data.count === start_index + 1) {\n                    start = data.index;\n                    if (data.formatting) {\n                        start_formatting = data.formatting;\n                    }\n                }\n                if (end_index && data.count === end_index) {\n                    end_formatting = data.formatting;\n                    prev_index = data.index;\n                    offset = data.size;\n                }\n                if (data.count === end_index + 1) {\n                    end = data.index;\n                    if (data.formatting) {\n                        end = prev_index + offset;\n                    }\n                }\n            });\n            if (start_index && !start) {\n                return '';\n            }\n            if (end === undefined) {\n                end = string.length;\n            }\n            string = start_formatting + string.slice(start, end);\n            if (end_formatting) {\n                string = string.replace(/(\\[\\[^\\]]+)?\\]$/, '');\n                string += ']';\n            }\n            return string;\n        },\n        // ---------------------------------------------------------------------\n        // :: add format text as 5th paramter to formatting it's used for\n        // :: data attribute in format function - and fix unclosed &\n        // ---------------------------------------------------------------------\n        normalize: function normalize(string) {\n            string = string.replace(format_re, function(_, format, text) {\n                if (format.match(self_closing_re) && text === '') {\n                    return '[[' + format + '] ]';\n                }\n                if (text === '') {\n                    return '';\n                }\n                function safe(string) {\n                    return string.replace(/\\\\\\]/g, '&#93;').replace(/\\n/g, '\\\\n')\n                        .replace(/&nbsp;/g, ' ');\n                }\n                format = safe(format);\n                var semicolons = format.match(/;/g).length;\n                // missing semicolons\n                if (semicolons >= 4) {\n                    var args = format.split(/;/);\n                    var start = args.slice(0, 4).join(';');\n                    var arg = args.slice(4).join(';');\n                    return '[[' + start + ';' + (arg || text) + ']' + text + ']';\n                } else if (semicolons === 2) {\n                    semicolons = ';;';\n                } else if (semicolons === 3) {\n                    semicolons = ';';\n                }\n                // return '[[' + format + ']' + text + ']';\n                // closing braket will break formatting so we need to escape\n                // those using html entity equvalent\n                // space is hack for images that break iterate_formatting\n                format += semicolons + safe(text);\n                return '[[' + format + ']' + text + ']';\n            });\n            return $.terminal.amp(string);\n        },\n        // ---------------------------------------------------------------------\n        // :: split text into lines with equal length so each line can be\n        // :: rendered separately (text formatting can be longer then a line).\n        // ---------------------------------------------------------------------\n        split_equal: function split_equal(str, length, keep_words) {\n            var prev_format = '';\n            var result = [];\n            var array = $.terminal.normalize(str).split(/\\n/g);\n            for (var i = 0, len = array.length; i < len; ++i) {\n                if (array[i] === '') {\n                    result.push('');\n                    continue;\n                }\n                var line = array[i];\n                var get_next_character = make_next_char_fun(line);\n                var first_index = 0;\n                var output;\n                var line_length = line.length;\n                var last_bracket = !!line.match(/\\[\\[[^\\]]+\\](?:[^\\][]|\\\\\\])+\\]$/);\n                $.terminal.iterate_formatting(line, function(data) {\n                    var chr, substring;\n                    if (data.length >= length || data.last ||\n                        (data.length === length - 1 &&\n                         strlen(line[data.index + 1]) === 2)) {\n                        var can_break = false;\n                        // TODO: this need work\n                        if (keep_words && data.space !== -1) {\n                            // replace html entities with characters\n                            var stripped = text(line).substring(data.space_count);\n                            // real length, not counting formatting\n                            stripped = stripped.slice(0, length).trim();\n                            var text_len = strlen(stripped);\n                            if (stripped.match(/\\s/) || text_len < length) {\n                                can_break = true;\n                            }\n                        }\n                        // if words is true we split at last space and make next loop\n                        // continue where the space where located\n                        var after_index = data.index + data.size;\n                        if (last_bracket) {\n                            after_index += 1;\n                        }\n                        var new_index;\n                        if (keep_words && data.space !== -1 &&\n                            after_index !== line_length && can_break) {\n                            output = line.slice(first_index, data.space);\n                            new_index = data.space - 1;\n                        } else {\n                            substring = line.slice(data.index);\n                            chr = get_next_character(substring);\n                            output = line.slice(first_index, data.index) + chr;\n                            if (data.last && last_bracket && chr !== ']') {\n                                output += ']';\n                            }\n                            new_index = data.index + chr.length - 1;\n                        }\n                        if (keep_words) {\n                            output = output.replace(/^(&nbsp;|\\s)+|(&nbsp;|\\s)+$/g, '');\n                        }\n                        first_index = (new_index || data.index) + 1;\n                        if (prev_format) {\n                            var closed_formatting = output.match(/^[^\\]]*\\]/);\n                            output = prev_format + output;\n                            if (closed_formatting) {\n                                prev_format = '';\n                            }\n                        }\n                        var matched = output.match(format_re);\n                        if (matched) {\n                            var last = matched[matched.length - 1];\n                            if (last[last.length - 1] !== ']') {\n                                prev_format = last.match(format_begin_re)[1];\n                                output += ']';\n                            } else if (output.match(format_end_re)) {\n                                output = output.replace(format_end_re, '');\n                                prev_format = last.match(format_begin_re)[1];\n                            }\n                        }\n                        result.push(output);\n                        // modify loop by returing new data\n                        return {index: new_index, length: 0, space: -1};\n                    }\n                });\n            }\n            return result;\n        },\n        // ---------------------------------------------------------------------\n        // :: Escape & that's not part of entity\n        // ---------------------------------------------------------------------\n        amp: function amp(str) {\n            return str.replace(/&(?!#[0-9]+;|#x[0-9a-f]+;|[a-z]+;)/gi, '&amp;');\n        },\n        // ---------------------------------------------------------------------\n        // :: Encode formating as html for insertion into DOM\n        // ---------------------------------------------------------------------\n        encode: function encode(str, options) {\n            var settings = $.extend({\n                tabs: 4,\n                before: ''\n            }, options);\n            return $.terminal.amp(str).replace(/</g, '&lt;').replace(/>/g, '&gt;')\n                .replace(/ /g, '&nbsp;').split('\\n').map(function(line) {\n                    var splitted = line.split(/((?:\\[\\[[^\\]]+\\])?\\t(?:\\])?)/);\n                    splitted = splitted.filter(Boolean);\n                    return splitted.map(function(str, i) {\n                        if (str.match(/\\t/)) {\n                            return str.replace(/\\t([^\\t]*)$/, function(_, end) {\n                                if (i !== 0 && splitted[i - 1].match(/\\t\\]?$/)) {\n                                    var sp = new Array(settings.tabs + 1).join('&nbsp;');\n                                    return sp + end;\n                                } else {\n                                    var before = splitted.slice(i - 1, i).join('');\n                                    if (settings.before && i <= 1) {\n                                        before = settings.before + before;\n                                    }\n                                    var len = $.terminal.length(before);\n                                    var chars = settings.tabs - (len % settings.tabs);\n                                    if (chars === 0) {\n                                        chars = 4;\n                                    }\n                                    return new Array(chars + 1).join('&nbsp;') + end;\n                                }\n                            });\n                        }\n                        return str;\n                    }).join('');\n                }).join('\\n');\n        },\n        // -----------------------------------------------------------------------\n        // :: Default formatter that allow for nested formatting, example:\n        // :: [[;;#000]hello [[;#f00;]red] world]\n        // -----------------------------------------------------------------------\n        nested_formatting: function nested_formatting(string) {\n            if (!$.terminal.have_formatting(string)) {\n                return string;\n            }\n            var stack = [];\n            var re = /((?:\\[\\[(?:[^\\][]|\\\\\\])+\\])?(?:[^\\][]|\\\\\\])*\\]?)/;\n            var format_re = /\\[\\[([^\\][]+)\\][\\s\\S]*/;\n            var format_split_re = /^\\[\\[([^;]*);([^;]*);([^\\]]*)\\]/;\n            function get_inherit_style(stack) {\n                var output = [[], '', ''];\n                if (!stack.length) {\n                    return output;\n                }\n                for (var i = stack.length; i--;) {\n                    var formatting = stack[i].split(';');\n                    var style = formatting[0].split(/(-?[@!gbiuso])/g).filter(Boolean);\n                    style.forEach(function(s) {\n                        if (output[0].indexOf(s) === -1) {\n                            output[0].push(s);\n                        }\n                    });\n                    for (var j = 1; j < output.length; ++j) {\n                        var value = formatting[j].trim();\n                        if (value && !output[j]) {\n                            output[j] = value;\n                        }\n                    }\n                }\n                var ignore = output[0].filter(function(s) {\n                    return s[0] === '-';\n                }).map(function(s) {\n                    return s[1];\n                });\n                output[0] = output[0].filter(function(s) {\n                    return ignore.indexOf(s) === -1 && ignore.indexOf(s[1]) === -1;\n                }).join('');\n                return output.join(';');\n            }\n            return string.split(re).filter(Boolean).map(function(string) {\n                var style;\n                if (string.match(/^\\[\\[/)) {\n                    var formatting = string.replace(format_re, '$1');\n                    var is_formatting = $.terminal.is_formatting(string);\n                    string = string.replace(format_split_re, '');\n                    stack.push(formatting);\n                    if ($.terminal.nested_formatting.__inherit__) {\n                        style = get_inherit_style(stack);\n                    } else {\n                        style = formatting;\n                    }\n                    if (!is_formatting) {\n                        string += ']';\n                    } else {\n                        stack.pop();\n                    }\n                    string = '[[' + style + ']' + string;\n                } else {\n                    var pop = false;\n                    if (string.match(/\\]/)) {\n                        pop = true;\n                    }\n                    if (stack.length) {\n                        if ($.terminal.nested_formatting.__inherit__) {\n                            style = get_inherit_style(stack);\n                        } else {\n                            style = stack[stack.length - 1];\n                        }\n                        string = '[[' + style + ']' + string;\n                    }\n                    if (pop) {\n                        stack.pop();\n                    } else if (stack.length) {\n                        string += ']';\n                    }\n                }\n                return string;\n            }).join('');\n        },\n        // ---------------------------------------------------------------------\n        // :: safe function that will render text as it is\n        // ---------------------------------------------------------------------\n        escape_formatting: function escape_formatting(string) {\n            return $.terminal.escape_brackets(string);\n        },\n        // ---------------------------------------------------------------------\n        // :: apply custom formatters only to text\n        // ---------------------------------------------------------------------\n        apply_formatters: function apply_formatters(string, settings) {\n            if (string === \"\") {\n                if (settings && typeof settings.position === 'number') {\n                    return [\"\", settings.position];\n                } else {\n                    return \"\";\n                }\n            }\n            function test_lengths(formatter, index, ret, string) {\n                if (!formatter.__no_warn__ &&\n                    $.terminal.length(ret) !== $.terminal.length(string)) {\n                    warn('Your formatter[' + index + '] change length of the string, ' +\n                         'you should use [regex, replacement] formatter or function ' +\n                         ' that return [replacement, position] instead');\n                }\n            }\n            function should_format(options) {\n                if (!settings || !options) {\n                    return true;\n                }\n                var props = ['echo', 'command', 'prompt'];\n                var have_any = props.some(function(name) {\n                    return options[name] === true;\n                });\n                if (!have_any) {\n                    return true;\n                }\n                for (var i = props.length; i--;) {\n                    var prop = props[i];\n                    if (options[prop] === true && settings[prop] === true) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n            settings = settings || {};\n            var formatters = settings.formatters || $.terminal.defaults.formatters;\n            var i = 0;\n            function apply_function_formatter(formatter, input) {\n                var options = $.extend({}, settings, {\n                    position: input[1]\n                });\n                var ret = formatter(input[0], options);\n                if (typeof ret === 'string') {\n                    test_lengths(formatter, i - 1, ret, input[0]);\n                    if (typeof ret === 'string') {\n                        return [ret, options.position];\n                    }\n                    return input;\n                } else if (is_array(ret) && ret.length === 2) {\n                    return ret;\n                } else {\n                    return input;\n                }\n            }\n            var input;\n            if (typeof settings.position === 'number') {\n                input = [string, settings.position];\n            } else {\n                input = [string, 0];\n            }\n            try {\n                var result = formatters.reduce(function(input, formatter) {\n                    i++;\n                    // __meta__ is for safe formatter that can handle formatters\n                    // inside formatters. for other usage we use format_split so one\n                    // formatter don't mess with formatter that was previous\n                    // on the list\n                    if (typeof formatter === 'function' && formatter.__meta__) {\n                        return apply_function_formatter(formatter, input);\n                    } else {\n                        var length = 0;\n                        var found_position = false;\n                        var splitted = $.terminal.format_split(input[0]);\n                        var partials = splitted.map(function(string) {\n                            var position;\n                            var this_len = text(string).length;\n                            // first position that match is used for this partial\n                            if (input[1] < length + this_len && !found_position) {\n                                position = input[1] - length;\n                                found_position = true;\n                            } else if (found_position) {\n                                // -1 indicate that we will not track position because it\n                                // was in one of the previous parial strings\n                                position = -1;\n                            } else {\n                                // initial position for replacers\n                                position = input[1];\n                            }\n                            // length is used to correct position after replace\n                            var length_before = length;\n                            var result;\n                            length += this_len;\n                            if ($.terminal.is_formatting(string)) {\n                                if (found_position) {\n                                    return [string, position];\n                                }\n                                return [string, -1];\n                            } else {\n                                if (is_array(formatter)) {\n                                    var options = formatter[2] || {};\n                                    result = [string, position < 0 ? 0 : position];\n                                    if (result[0].match(formatter[0]) &&\n                                        should_format(formatter[2])) {\n                                        if (options.loop) {\n                                            while (result[0].match(formatter[0])) {\n                                                result = $.terminal.tracking_replace(\n                                                    result[0],\n                                                    formatter[0],\n                                                    formatter[1],\n                                                    result[1]\n                                                );\n                                            }\n                                        } else {\n                                            result = $.terminal.tracking_replace(\n                                                result[0],\n                                                formatter[0],\n                                                formatter[1],\n                                                result[1]\n                                            );\n                                        }\n                                    }\n                                    if (position < 0) {\n                                        return [result[0], -1];\n                                    }\n                                } else if (typeof formatter === 'function') {\n                                    result = apply_function_formatter(formatter, [\n                                        string, position\n                                    ]);\n                                }\n                                if (typeof result !== 'undefined') {\n                                    // correct position becuase it's relative\n                                    // to partial and we need global for whole string\n                                    if (result[1] !== -1) {\n                                        result[1] += length_before;\n                                    }\n                                    var after_len = text(result[0]).length;\n                                    if (after_len !== this_len) {\n                                    }\n                                    return result;\n                                }\n                                return [string, -1];\n                            }\n                        });\n                        var position_partial = partials.filter(function(partial) {\n                            return partial[1] !== -1;\n                        })[0];\n                        var string = partials.map(function(partial) {\n                            return partial[0];\n                        }).join('');\n                        var position;\n                        if (typeof position_partial === 'undefined') {\n                            position = input[1];\n                        } else {\n                            position = position_partial[1];\n                        }\n                        // to make sure that output position is not outside the string\n                        var max = text(string).length;\n                        max += count_selfclosing_formatting(string);\n                        if (position > max) {\n                            position = max;\n                        }\n                        if (string === input[0]) {\n                            return input;\n                        }\n                        var before = $.terminal.strip(input[0]);\n                        var after = $.terminal.strip(string);\n                        if (before === after) {\n                            return [string, input[1]];\n                        }\n                        return [string, position];\n                    }\n                }, input);\n                if (typeof settings.position === 'number') {\n                    var codepoint_len = $.terminal.strip(result[0]).length;\n                    if ($.terminal.length(result[0]) < codepoint_len) {\n                        var position = result[1];\n                        position = normalize_position(result[0], position);\n                        var max = $.terminal.length(result[0]);\n                        if (position > max) {\n                            position = max;\n                        }\n                        result[1] = position;\n                    }\n                    return result;\n                } else {\n                    return result[0];\n                }\n            } catch (e) {\n                var msg = 'Error in formatter [' + (i - 1) + ']';\n                formatters.splice(i - 1);\n                throw new $.terminal.Exception('formatting', msg, e.stack);\n            }\n        },\n        // ---------------------------------------------------------------------\n        // :: Replace terminal formatting with html\n        // ---------------------------------------------------------------------\n        format: function format(str, options) {\n            var settings = $.extend({}, {\n                linksNoReferrer: false,\n                linksNoFollow: false,\n                allowedAttributes: [],\n                char_width: undefined,\n                escape: true,\n                anyLinks: false\n            }, options || {});\n            // -----------------------------------------------------------------\n            function filter_attr_names(names) {\n                if (names.length && settings.allowedAttributes.length) {\n                    return names.filter(function(name) {\n                        if (name === 'data-text') {\n                            return false;\n                        }\n                        var allowed = false;\n                        var filters = settings.allowedAttributes;\n                        for (var i = 0; i < filters.length; ++i) {\n                            if (filters[i] instanceof RegExp) {\n                                if (filters[i].test(name)) {\n                                    allowed = true;\n                                    break;\n                                }\n                            } else if (filters[i] === name) {\n                                allowed = true;\n                                break;\n                            }\n                        }\n                        return allowed;\n                    });\n                }\n                return [];\n            }\n            // -----------------------------------------------------------------\n            function clean_data(data, text) {\n                if (data === '') {\n                    return text;\n                } else {\n                    return data.replace(/&#93;/g, ']')\n                        .replace(/>/g, '&gt;').replace(/</g, '&lt;');\n                }\n            }\n            // -----------------------------------------------------------------\n            function add_attrs(attrs) {\n                if (attrs) {\n                    var keys = filter_attr_names(Object.keys(attrs));\n                    if (keys.length) {\n                        return ' ' + keys.map(function(name) {\n                            var value = attrs[name].replace(/\"/g, '&quot;');\n                            return name + '=\"' + value + '\"';\n                        }).join(' ');\n                    }\n                }\n                return '';\n            }\n            // -----------------------------------------------------------------\n            function rel_attr() {\n                var rel = [\"noopener\"];\n                if (settings.linksNoReferrer) {\n                    rel.unshift(\"noreferrer\");\n                }\n                if (settings.linksNoFollow) {\n                    rel.unshift(\"nofollow\");\n                }\n                return rel;\n            }\n            // -----------------------------------------------------------------\n            // test if this is valid Path\n            // -----------------------------------------------------------------\n            function is_path(url) {\n                return url.match(/^\\.{1,2}\\//) ||\n                    url.match(/^\\//) ||\n                    !(url.match(/\\//) || url.match(/^[^:]+:/));\n            }\n            // -----------------------------------------------------------------\n            function with_url_validation(fn) {\n                return function(url) {\n                    if (settings.anyLinks) {\n                        return true;\n                    }\n                    var test = fn(url);\n                    if (!test) {\n                        warn('Invalid URL ' + url + ' only http(s) ftp and Path ' +\n                             'are allowed');\n                    }\n                    return test;\n                };\n            }\n            // -----------------------------------------------------------------\n            var valid_href = with_url_validation(function(url) {\n                return url.match(/^((https?|ftp):\\/\\/|\\.{0,2}\\/)/) || is_path(url);\n            });\n            // -----------------------------------------------------------------\n            var valid_src = with_url_validation(function(url) {\n                return url.match(/^(https?:|blob:|data:)/) || is_path(url);\n            });\n            // -----------------------------------------------------------------\n            function format(s, style, color, background, _class, data_text, text) {\n                function pre_process_link() {\n                    var result;\n                    if (data.match(email_re)) {\n                        result = '<a href=\"mailto:' + data + '\"';\n                    } else {\n                        // only http and ftp links (prevent javascript)\n                        // unless user force it with anyLinks option\n                        if (!valid_href(data)) {\n                            data = '';\n                        }\n                        result = '<a target=\"_blank\"';\n                        if (data) {\n                            result += ' href=\"' + data + '\"';\n                        }\n                        result += ' rel=\"' + rel_attr().join(' ') + '\"';\n                    }\n                    // make focus to terminal textarea that will enable\n                    // terminal when pressing tab and terminal is disabled\n                    result += ' tabindex=\"1000\"';\n                    return result;\n                }\n                function pre_process_image() {\n                    var result = '<img';\n                    if (valid_src(data)) {\n                        result += ' src=\"' + data + '\"';\n                        if (text) {\n                            result += ' alt=\"' + text + '\"';\n                        }\n                    }\n                    return result;\n                }\n                var attrs;\n                if (data_text.match(/;/)) {\n                    try {\n                        var splitted = data_text.split(';');\n                        var str = splitted.slice(1).join(';')\n                            .replace(/&nbsp;/g, ' ')\n                            .replace(/&lt;/g, '<')\n                            .replace(/&gt;/g, '>');\n                        if (str.match(/^\\s*\\{[^}]*\\}\\s*$/)) {\n                            attrs = JSON.parse(str);\n                            data_text = splitted[0];\n                        }\n                    } catch (e) {\n                    }\n                }\n                if (text === '' && !style.match(/@/)) {\n                    return ''; //'<span>&nbsp;</span>';\n                }\n                text = safe(text);\n                text = text.replace(/\\\\\\]/g, '&#93;');\n                if (settings.escape) {\n                    // inside formatting we need to unescape escaped slashes\n                    // but this escape is not needed when echo - don't know why\n                    text = text.replace(/\\\\\\\\/g, '\\\\');\n                }\n                var style_str = '';\n                if (style.indexOf('b') !== -1) {\n                    style_str += 'font-weight:bold;';\n                }\n                var text_decoration = [];\n                if (style.indexOf('u') !== -1) {\n                    text_decoration.push('underline');\n                }\n                if (style.indexOf('s') !== -1) {\n                    text_decoration.push('line-through');\n                }\n                if (style.indexOf('o') !== -1) {\n                    text_decoration.push('overline');\n                }\n                if (text_decoration.length) {\n                    style_str += 'text-decoration:' +\n                        text_decoration.join(' ') + ';';\n                }\n                if (style.indexOf('i') !== -1) {\n                    style_str += 'font-style:italic;';\n                }\n                if ($.terminal.valid_color(color)) {\n                    style_str += [\n                        'color:' + color,\n                        '--color:' + color,\n                        '--original-color:' + color\n                    ].join(';') + ';';\n                    if (style.indexOf('!') !== -1) {\n                        style_str += '--link-color:' + color + ';';\n                    }\n                    if (style.indexOf('g') !== -1) {\n                        style_str += 'text-shadow:0 0 5px ' + color + ';';\n                    }\n                }\n                if ($.terminal.valid_color(background)) {\n                    style_str += [\n                        'background-color:' + background,\n                        '--background:' + background\n                    ].join(';') + ';';\n                }\n                var data = clean_data(data_text, text);\n                var extra = extra_css(text, settings);\n                if (extra) {\n                    text = wide_characters(text, settings);\n                    style_str += extra;\n                }\n                var result;\n                if (style.indexOf('!') !== -1) {\n                    result = pre_process_link();\n                } else if (style.indexOf('@') !== -1) {\n                    result = pre_process_image();\n                } else {\n                    result = '<span';\n                }\n                if (attrs && attrs.style) {\n                    // merge style attr and colors #617\n                    attrs.style = style_str + attrs.style;\n                    style_str = '';\n                }\n                result += add_attrs(attrs);\n                if (style_str !== '') {\n                    result += ' style=\"' + style_str + '\"';\n                }\n                if (_class !== '') {\n                    result += ' class=\"' + _class + '\"';\n                }\n                // links and image need data-text attribute cmd click behavior\n                // formatter can return links.\n                if (style.indexOf('!') !== -1) {\n                    result += ' data-text>' + text + '</a>';\n                } else if (style.indexOf('@') !== -1) {\n                    result += ' data-text/>';\n                } else {\n                    result += ' data-text=\"' + data.replace(/\"/g, '&quot;') + '\">' +\n                        '<span>' + text + '</span></span>';\n                }\n                return result;\n            }\n            if (typeof str === 'string') {\n                // support for formating foo[[u;;]bar]baz[[b;#fff;]quux]zzz\n                var splitted = $.terminal.format_split(str);\n                str = $.map(splitted, function(text) {\n                    if (text === '') {\n                        return text;\n                    } else if ($.terminal.is_formatting(text)) {\n                        // fix &nbsp; inside formatting because encode is called\n                        // before format\n                        text = text.replace(/\\[\\[[^\\]]+\\]/, function(text) {\n                            return text.replace(/&nbsp;/g, ' ');\n                        });\n                        return text.replace(format_parts_re, format);\n                    } else {\n                        text = safe(text);\n                        text = text.replace(/\\\\\\]/, '&#93;');\n                        var data = text;\n                        var extra = extra_css(text, settings);\n                        var prefix;\n                        if (extra.length) {\n                            text = wide_characters(text, settings);\n                            prefix = '<span style=\"' + extra + '\"';\n                        } else {\n                            prefix = '<span';\n                        }\n                        return prefix + ' data-text=\"' + data + '\">' + text + '</span>';\n                    }\n                }).join('');\n                return str.replace(/<span><br\\s*\\/?><\\/span>/gi, '<br/>');\n            } else {\n                return '';\n            }\n        },\n        // ---------------------------------------------------------------------\n        // :: Replace brackets with html entities\n        // ---------------------------------------------------------------------\n        escape_brackets: function escape_brackets(string) {\n            return string.replace(/\\[/g, '&#91;')\n                .replace(/\\]/g, '&#93;')\n                .replace(/\\\\/g, '&#92;');\n        },\n        // ---------------------------------------------------------------------\n        // :: complmentary function\n        // ---------------------------------------------------------------------\n        unescape_brackets: function unescape_brackets(string) {\n            return string.replace(/&#91;/g, '[')\n                .replace(/&#93;/g, ']')\n                .replace(/&#92;/g, '\\\\');\n        },\n        // ---------------------------------------------------------------------\n        // :: return number of characters without formatting\n        // ---------------------------------------------------------------------\n        length: function(string, raw) {\n            return $.terminal.split_characters(raw ? string : text(string)).length;\n        },\n        // ---------------------------------------------------------------------\n        // :: split characters handling emoji, surogate pairs and combine chars\n        // ---------------------------------------------------------------------\n        split_characters: function split_characters(string) {\n            var result = [];\n            var get_next_character = make_next_char_fun(string);\n            while (string.length) {\n                var chr = get_next_character(string);\n                string = string.slice(chr.length);\n                result.push(chr);\n            }\n            return result;\n        },\n        // ---------------------------------------------------------------------\n        // :: return string where array items are in columns padded spaces\n        // :: after adding align tabs arr.join('\\t\\t') looks much better\n        // ---------------------------------------------------------------------\n        columns: function(array, cols, space) {\n            var no_formatting = array.map(function(string) {\n                return $.terminal.strip(string);\n            });\n            var lengths = no_formatting.map(function(string) {\n                return strlen(string);\n            });\n            if (typeof space === 'undefined') {\n                space = 4;\n            }\n            var length = Math.max.apply(null, lengths) + space;\n            // we need value - 1 because index starts from 0\n            var column_limit = Math.floor(cols / length) - 1;\n            if (column_limit < 1) {\n                return array.join('\\n');\n            }\n            var lines = [];\n            for (var i = 0, len = array.length; i < len; i += column_limit) {\n                var line = array.slice(i, i + column_limit);\n                var last = line.pop();\n                lines.push(line.reduce(function(acc, string) {\n                    var stripped = $.terminal.strip(string);\n                    var pad = new Array(length - stripped.length + 1).join(' ');\n                    acc.push(string + pad);\n                    return acc;\n                }, []).join('') + last);\n            }\n            return lines.join('\\n');\n        },\n        // ---------------------------------------------------------------------\n        // :: Remove formatting from text\n        // ---------------------------------------------------------------------\n        strip: function strip(str) {\n            if (!$.terminal.have_formatting(str)) {\n                return str;\n            }\n            return $.terminal.format_split(str).map(function(str) {\n                if ($.terminal.is_formatting(str)) {\n                    str = str.replace(format_parts_re, '$6');\n                    return str.replace(/\\\\([[\\]])/g, function(whole, bracket) {\n                        return bracket;\n                    });\n                }\n                return str;\n            }).join('');\n        },\n        // ---------------------------------------------------------------------\n        // :: Return active terminal\n        // ---------------------------------------------------------------------\n        active: function active() {\n            return terminals.front();\n        },\n        // ---------------------------------------------------------------------\n        // :: Implmentation detail id is always length of terminals Cycle\n        // ---------------------------------------------------------------------\n        last_id: function last_id() {\n            var len = terminals.length();\n            return len - 1;\n        },\n        // ---------------------------------------------------------------------\n        // :: Function that works with strings like 'asd' 'asd\\' asd' \"asd asd\"\n        // :: asd\\ 123 -n -b / [^ ]+ / /\\s+/ asd\\ a it creates a regex and\n        // :: numbers and replaces escape characters in double quotes\n        // :: if strict is set to false it only strips single and double quotes\n        // :: and escapes spaces\n        // ---------------------------------------------------------------------\n        parse_argument: function parse_argument(arg, strict) {\n            function parse_string(string) {\n                // split string to string literals and non-strings\n                return string.split(string_re).map(function(string) {\n                    // remove quotes if before are even number of slashes\n                    // we don't remove slases becuase they are handled by JSON.parse\n                    if (string.match(/^['\"`]/)) {\n                        // fixing regex to match empty string is not worth it\n                        if (string === '\"\"' || string === \"''\" || string === \"``\") {\n                            return '';\n                        }\n                        var quote = string[0];\n                        var re = new RegExp(\"(\\\\\\\\\\\\\\\\(?:\\\\\\\\\\\\\\\\)*)\" + quote, \"g\");\n                        string = string.replace(re, '$1').replace(/^[`'\"]|[`'\"]$/g, '');\n                        if (quote === \"'\") {\n                            string = string.replace(/\"/g, '\\\\\"');\n                        }\n                    }\n                    string = '\"' + string + '\"';\n                    // use build in function to parse rest of escaped characters\n                    return JSON.parse(string);\n                }).join('');\n            }\n            if (strict === false) {\n                if (arg[0] === \"'\" && arg[arg.length - 1] === \"'\") {\n                    return arg.replace(/^'|'$/g, '');\n                } else if (arg[0] === \"`\" && arg[arg.length - 1] === \"`\") {\n                    return arg.replace(/^`|`$/g, '');\n                } else if (arg[0] === '\"' && arg[arg.length - 1] === '\"') {\n                    return arg.replace(/^\"|\"$/g, '').replace(/\\\\([\" ])/g, '$1');\n                } else if (arg.match(/\\/.*\\/[gimy]*$/)) {\n                    return arg;\n                } else if (arg.match(/['\"`]]/)) {\n                    // part of arg is in quote\n                    return parse_string(arg);\n                } else {\n                    return arg.replace(/\\\\ /g, ' ');\n                }\n            }\n            if (arg === 'true') {\n                return true;\n            } else if (arg === 'false') {\n                return false;\n            }\n            var regex = arg.match(re_re);\n            if (regex) {\n                return new RegExp(regex[1], regex[2]);\n            } else if (arg.match(/['\"`]/)) {\n                return parse_string(arg);\n            } else if (arg.match(/^-?[0-9]+$/)) {\n                return parseInt(arg, 10);\n            } else if (arg.match(float_re)) {\n                return parseFloat(arg);\n            } else {\n                return arg.replace(/\\\\(['\"() ])/g, '$1');\n            }\n        },\n        // ---------------------------------------------------------------------\n        // :: function split and parse arguments\n        // ---------------------------------------------------------------------\n        parse_arguments: function parse_arguments(string) {\n            return $.map(string.match(command_re) || [], $.terminal.parse_argument);\n        },\n        // ---------------------------------------------------------------------\n        // :: Function split and strips single and double quotes\n        // :: and escapes spaces\n        // ---------------------------------------------------------------------\n        split_arguments: function split_arguments(string) {\n            return $.map(string.match(command_re) || [], function(arg) {\n                return $.terminal.parse_argument(arg, false);\n            });\n        },\n        // ---------------------------------------------------------------------\n        // :: Function that returns an object {name,args}. Arguments are parsed\n        // :: using the function parse_arguments\n        // ---------------------------------------------------------------------\n        parse_command: function parse_command(string) {\n            return process_command(string, $.terminal.parse_argument);\n        },\n        // ---------------------------------------------------------------------\n        // :: Same as parse_command but arguments are parsed using split_arguments\n        // ---------------------------------------------------------------------\n        split_command: function split_command(string) {\n            return process_command(string, function(arg) {\n                return $.terminal.parse_argument(arg, false);\n            });\n        },\n        // ---------------------------------------------------------------------\n        // :; function that parse arguments like yargs library\n        // ---------------------------------------------------------------------\n        parse_options: function parse_options(arg, options) {\n            var settings = $.extend({}, {\n                boolean: []\n            }, options);\n            if (typeof arg === 'string') {\n                return parse_options($.terminal.split_arguments(arg), options);\n            }\n            var result = {\n                _: []\n            };\n            function token(value) {\n                this.value = value;\n            }\n            var rest = arg.reduce(function(acc, arg) {\n                var str = typeof arg === 'string' ? arg : '';\n                if (str.match(/^--?[^-]/) && acc instanceof token) {\n                    result[acc.value] = true;\n                }\n                if (str.match(/^--[^-]/)) {\n                    var name = str.replace(/^--/, '');\n                    if (settings.boolean.indexOf(name) === -1) {\n                        return new token(name);\n                    } else {\n                        result[name] = true;\n                    }\n                } else if (str.match(/^-[^-]/)) {\n                    var single = str.replace(/^-/, '').split('');\n                    if (settings.boolean.indexOf(single.slice(-1)[0]) === -1) {\n                        var last = single.pop();\n                    }\n                    single.forEach(function(single) {\n                        result[single] = true;\n                    });\n                    if (last) {\n                        return new token(last);\n                    }\n                } else if (acc instanceof token) {\n                    result[acc.value] = arg;\n                } else if (arg) {\n                    result._.push(arg);\n                }\n                return null;\n            }, null);\n            if (rest instanceof token) {\n                result[rest.value] = true;\n            }\n            return result;\n        },\n        // ---------------------------------------------------------------------\n        // :: function executed for each text inside [[ .... ]] in echo\n        // ---------------------------------------------------------------------\n        extended_command: function extended_command(term, string, options) {\n            var settings = $.extend({\n                invokeMethods: false\n            }, options);\n            var deferred = new $.Deferred();\n            try {\n                change_hash = false;\n                var m = string.match(extended_command_re);\n                if (m) {\n                    if (!settings.invokeMethods) {\n                        warn('To invoke terminal or cmd methods you need to enable ' +\n                             'invokeMethods option');\n                        deferred.reject();\n                    } else {\n                        string = m[1];\n                        var obj = m[2] === 'terminal' ? term : term.cmd();\n                        var fn = m[3];\n                        try {\n                            var args = eval('[' + m[4] + ']');\n                            if (!obj[fn]) {\n                                term.error('Unknow function ' + fn);\n                            } else {\n                                var ret = obj[fn].apply(term, args);\n                                if (ret && ret.then) {\n                                    return ret;\n                                }\n                            }\n                            deferred.resolve();\n                        } catch (e) {\n                            term.error('Invalid invocation in ' +\n                                       $.terminal.escape_brackets(string));\n                            deferred.reject();\n                        }\n                    }\n                } else {\n                    return term.exec(string, true).done(function() {\n                        change_hash = true;\n                    });\n                }\n            } catch (e) {\n                // error is process in exec\n                deferred.reject();\n            }\n            return deferred.promise();\n        },\n        // ---------------------------------------------------------------------\n        // :: ES6 iterator for a given string that handle emoji and formatting\n        // ---------------------------------------------------------------------\n        iterator: function(string) {\n            function formatting(string) {\n                if ($.terminal.is_formatting(string)) {\n                    if (string.match(/\\]\\\\\\]/)) {\n                        string = string.replace(/\\]\\\\\\]/g, ']\\\\\\\\]');\n                    }\n                }\n                return string;\n            }\n            if (typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol') {\n                var len = $.terminal.length(string);\n                var i = 0;\n                var obj = {};\n                obj[Symbol.iterator] = function() {\n                    return {\n                        next: function() {\n                            if (i < len) {\n                                var text = $.terminal.substring(string, i, i + 1);\n                                i++;\n                                return {\n                                    value: formatting(text)\n                                };\n                            } else {\n                                return {\n                                    done: true\n                                };\n                            }\n                        }\n                    };\n                };\n                return obj;\n            }\n        },\n        // ---------------------------------------------------------------------\n        // :: object that can be used in string methods intead of regex\n        // ---------------------------------------------------------------------\n        formatter: new (function() {\n            try {\n                this[Symbol.split] = function(string) {\n                    return $.terminal.format_split(string);\n                };\n                this[Symbol.match] = function(string) {\n                    return string.match(format_re);\n                };\n                this[Symbol.replace] = function(string, replacer) {\n                    return string.replace(format_parts_re, replacer);\n                };\n                this[Symbol.search] = function(string) {\n                    return string.search(format_re);\n                };\n            } catch (e) {\n            }\n        })(),\n        // ---------------------------------------------------------------------\n        // :: helper function that add formatter before nested_formatting\n        // ---------------------------------------------------------------------\n        new_formatter: function(formatter) {\n            var formatters = $.terminal.defaults.formatters;\n            for (var i = 0; i < formatters.length; ++i) {\n                if (formatters[i] === $.terminal.nested_formatting) {\n                    formatters.splice(i, 0, formatter);\n                    return;\n                }\n            }\n            formatters.push(formatter);\n        }\n    };\n    // -------------------------------------------------------------------------\n    $.terminal.Exception = function Terminal_Exception(type, message, stack) {\n        if (arguments.length === 1) {\n            this.message = arguments[0];\n            this.type = 'TERMINAL';\n        } else {\n            this.type = type;\n            this.message = message;\n            if (stack) {\n                this.stack = stack;\n            }\n        }\n    };\n    $.terminal.Exception.prototype = new Error();\n    $.terminal.Exception.prototype.toString = function() {\n        return this.message + '\\n' + this.stack;\n    };\n    // -----------------------------------------------------------------------\n    // Helper plugins and functions\n    // -----------------------------------------------------------------------\n    $.fn.visible = function() {\n        return this.css('visibility', 'visible');\n    };\n    $.fn.hidden = function() {\n        return this.css('visibility', 'hidden');\n    };\n    // -----------------------------------------------------------------------\n    var warnings = [];\n    function warn(msg) {\n        msg = '[jQuery Terminal] ' + msg;\n        if (warnings.indexOf(msg) === -1) {\n            warnings.push(msg);\n            /* eslint-disable */\n            if (console) {\n                if (console.warn) {\n                    console.warn(msg);\n                } else if (console.log) {\n                    console.log(msg);\n                }\n                /* eslint-enable */\n            } else {\n                // prevent catching in outer try..catch\n                setTimeout(function() {\n                    throw new Error('WARN: ' + msg);\n                }, 0);\n            }\n        }\n    }\n    // -----------------------------------------------------------------------\n    // JSON-RPC CALL\n    // -----------------------------------------------------------------------\n    var ids = {}; // list of url based ids of JSON-RPC\n    $.jrpc = function(url, method, params, success, error) {\n        var deferred = new $.Deferred();\n        var options;\n        if ($.isPlainObject(url)) {\n            options = url;\n        } else {\n            options = {\n                url: url,\n                method: method,\n                params: params,\n                success: success,\n                error: error\n            };\n        }\n        function validJSONRPC(response) {\n            return $.isNumeric(response.id) &&\n                (typeof response.result !== 'undefined' ||\n                 typeof response.error !== 'undefined');\n        }\n        ids[options.url] = ids[options.url] || 0;\n        var request = {\n            'jsonrpc': '2.0',\n            'method': options.method,\n            'params': options.params,\n            'id': ++ids[options.url]\n        };\n        $.ajax({\n            url: options.url,\n            beforeSend: function beforeSend(jxhr, settings) {\n                if (is_function(options.request)) {\n                    options.request(jxhr, request);\n                }\n                settings.data = JSON.stringify(request);\n            },\n            success: function success(response, status, jqXHR) {\n                var content_type = jqXHR.getResponseHeader('Content-Type');\n                if (!content_type.match(/(application|text)\\/json/)) {\n                    warn('Response Content-Type is neither application/json' +\n                         ' nor text/json');\n                }\n                var json;\n                try {\n                    json = JSON.parse(response);\n                } catch (e) {\n                    if (options.error) {\n                        options.error(jqXHR, 'Invalid JSON', e);\n                    } else {\n                        throw new $.terminal.Exception('JSON', 'Invalid JSON', e.stack);\n                    }\n                    deferred.reject({message: 'Invalid JSON', response: response});\n                    return;\n                }\n                if (is_function(options.response)) {\n                    options.response(jqXHR, json);\n                }\n                if (validJSONRPC(json) || options.method === 'system.describe') {\n                    // don't catch errors in success callback\n                    if (options.success) {\n                        options.success(json, status, jqXHR);\n                    }\n                    deferred.resolve(json);\n                } else {\n                    if (options.error) {\n                        options.error(jqXHR, 'Invalid JSON-RPC');\n                    }\n                    deferred.reject({message: 'Invalid JSON-RPC', response: response});\n                }\n            },\n            error: options.error,\n            contentType: 'application/json',\n            dataType: 'text',\n            async: true,\n            cache: false,\n            // timeout: 1,\n            type: 'POST'\n        });\n        return deferred.promise();\n    };\n    // -----------------------------------------------------------------------\n    function terminal_ready(term) {\n        return !!(term.closest('body').length &&\n                  term.is(':visible') &&\n                  term.find('.cmd-prompt').length);\n    }\n    // -----------------------------------------------------------------------\n    // :: Create fake terminal to calcualte the dimention of one character\n    // :: this will make terminal work if terminal div is not added to the\n    // :: DOM at init like with:\n    // :: $('<div/>').terminal().echo('foo bar').appendTo('body');\n    // -----------------------------------------------------------------------\n    function get_char_size(term) {\n        var rect;\n        if (terminal_ready(term)) {\n            var $prompt = term.find('.cmd-prompt').clone().css({\n                visiblity: 'hidden',\n                position: 'absolute'\n            });\n            $prompt.appendTo(term.find('.cmd')).html('&nbsp;');\n            rect = $prompt[0].getBoundingClientRect();\n            $prompt.remove();\n        } else {\n            var temp = $('<div class=\"terminal terminal-temp\"><div class=\"terminal-' +\n                         'wrapper\"><div class=\"terminal-output\"><div><div class=\"te' +\n                         'rminal-line\" style=\"float: left\"><span>&nbsp;</span></div' +\n                         '></div></div></div>').appendTo('body');\n            temp.addClass(term.attr('class')).attr('id', term.attr('id'));\n            if (term) {\n                var style = term.attr('style');\n                if (style) {\n                    style = style.split(/\\s*;\\s*/).filter(function(s) {\n                        return !s.match(/display\\s*:\\s*none/i);\n                    }).join(';');\n                    temp.attr('style', style);\n                }\n            }\n            rect = temp.find('.terminal-line')[0].getBoundingClientRect();\n        }\n        var result = {\n            width: rect.width,\n            height: rect.height\n        };\n        if (temp) {\n            temp.remove();\n        }\n        return result;\n    }\n    // -----------------------------------------------------------------------\n    // :: calculate numbers of characters\n    // -----------------------------------------------------------------------\n    function get_num_chars(terminal, char_size) {\n        var width = terminal.find('.terminal-fill').width();\n        var result = Math.floor(width / char_size.width);\n        // random number to not get NaN in node.js but big enough to\n        // not wrap exception\n        return result || 1000;\n    }\n    // -----------------------------------------------------------------------\n    // :: Calculate number of lines that fit without scroll\n    // -----------------------------------------------------------------------\n    function get_num_rows(terminal, char_size) {\n        var height = terminal.find('.terminal-fill').height();\n        return Math.floor(height / char_size.height);\n    }\n    // -----------------------------------------------------------------------\n    function all(array, fn) {\n        var same = array.filter(function(item) {\n            return item[fn]() === item;\n        });\n        return same.length === array.length;\n    }\n    // -----------------------------------------------------------------------\n    function string_case(string) {\n        var array = string.split('');\n        if (all(array, 'toLowerCase')) {\n            return 'lower';\n        } else if (all(array, 'toUpperCase')) {\n            return 'upper';\n        } else {\n            return 'mixed';\n        }\n    }\n    // -----------------------------------------------------------------------\n    function same_case(string) {\n        return string_case(string) !== 'mixed';\n    }\n    // -----------------------------------------------------------------------\n    // fix for jQuery bug\n    function is_function(object) {\n        return get_type(object) === 'function';\n    }\n    // -----------------------------------------------------------------------\n    function is_promise(object) {\n        return is_function(object && (object.then || object.done));\n    }\n    // -----------------------------------------------------------------------\n    if (!Array.isArray) {\n        Array.isArray = function(arg) {\n            return Object.prototype.toString.call(arg) === '[object Array]';\n        };\n    }\n    // -----------------------------------------------------------------------\n    function is_array(object) {\n        return Array.isArray(object);\n    }\n    // -----------------------------------------------------------------------\n    function get_type(object) {\n        if (typeof object === 'function') {\n            return 'function';\n        }\n        if (object === null) {\n            return object + '';\n        }\n        if (Array.isArray(object)) {\n            return 'array';\n        }\n        if (typeof object === 'object') {\n            return 'object';\n        }\n        return typeof object;\n    }\n    // -----------------------------------------------------------------------\n    // :: TERMINAL PLUGIN CODE\n    // -----------------------------------------------------------------------\n    var version_set = !$.terminal.version.match(/^\\{\\{/);\n    var copyright = 'Copyright (c) 2011-2021 Jakub T. Jankiewicz ' +\n        '<https://jcubic.pl/me>';\n    var version_string = version_set ? ' v. ' + $.terminal.version : ' ';\n    // regex is for placing version string aligned to the right\n    var reg = new RegExp(' {' + version_string.length + '}$');\n    var name_ver = 'jQuery Terminal Emulator' +\n        (version_set ? version_string : '');\n    // -----------------------------------------------------------------------\n    // :: Terminal Signatures\n    // -----------------------------------------------------------------------\n    var signatures = [\n        ['jQuery Terminal', '(c) 2011-2021 jcubic'],\n        [name_ver, copyright.replace(/^Copyright | *<.*>/g, '')],\n        [name_ver, copyright.replace(/^Copyright /, '')],\n        [\n            '      _______                 ________                        __',\n            '     / / _  /_ ____________ _/__  ___/______________  _____  / /',\n            ' __ / / // / // / _  / _/ // / / / _  / _/     / /  \\\\/ / _ \\\\/ /',\n            '/  / / // / // / ___/ // // / / / ___/ // / / / / /\\\\  / // / /__',\n            '\\\\___/____ \\\\\\\\__/____/_/ \\\\__ / /_/____/_//_/_/_/_/_/  \\\\/\\\\__\\\\_\\\\___/',\n            '         \\\\/          /____/                                   '\n                .replace(reg, ' ') + version_string,\n            copyright\n        ],\n        [\n            '      __ _____                     ________                            ' +\n                '  __',\n            '     / // _  /__ __ _____ ___ __ _/__  ___/__ ___ ______ __ __  __ ___ ' +\n                ' / /',\n            ' __ / // // // // // _  // _// // / / // _  // _//     // //  \\\\/ // _ ' +\n                '\\\\/ /',\n            '/  / // // // // // ___// / / // / / // ___// / / / / // // /\\\\  // // ' +\n                '/ /__',\n            '\\\\___//____ \\\\\\\\___//____//_/ _\\\\_  / /_//____//_/ /_/ /_//_//_/ /_/ \\\\' +\n                '__\\\\_\\\\___/',\n            ('          \\\\/              /____/                                     ' +\n             '     ').replace(reg, '') + version_string,\n            copyright\n        ]\n    ];\n    // -----------------------------------------------------------------------\n    // :: Default options\n    // -----------------------------------------------------------------------\n    $.terminal.nested_formatting.__meta__ = true;\n    // if set to true nested formatting will inherit styles from styles outside\n    $.terminal.nested_formatting.__inherit__ = false;\n    // nested formatting will always return different length so we silent the warning\n    $.terminal.nested_formatting.__no_warn__ = true;\n    $.terminal.defaults = {\n        prompt: '> ',\n        history: true,\n        exit: true,\n        clear: true,\n        enabled: true,\n        maskChar: '*',\n        wrap: true,\n        checkArity: true,\n        raw: false,\n        tabindex: 1,\n        invokeMethods: false,\n        exceptionHandler: null,\n        pauseEvents: true,\n        softPause: false,\n        mousewheel: null,\n        touchscroll: null,\n        memory: false,\n        cancelableAjax: true,\n        processArguments: true,\n        linksNoReferrer: false,\n        anyLinks: false,\n        linksNoFollow: false,\n        processRPCResponse: null,\n        completionEscape: true,\n        onCommandChange: null,\n        mobileDelete: is_mobile,\n        onPositionChange: null,\n        convertLinks: true,\n        extra: {},\n        tabs: 4,\n        historySize: 60,\n        scrollObject: null,\n        historyState: false,\n        importHistory: false,\n        historyFilter: null,\n        echoCommand: true,\n        scrollOnEcho: true,\n        login: null,\n        outputLimit: -1,\n        formatters: [$.terminal.nested_formatting],\n        unixFormatting: {\n            escapeBrackets: false,\n            ansiParser: {},\n            ansiArt: false\n        },\n        onAjaxError: null,\n        pasteImage: true,\n        scrollBottomOffset: 20,\n        wordAutocomplete: true,\n        caseSensitiveAutocomplete: true,\n        caseSensitiveSearch: true,\n        clickTimeout: 200,\n        holdTimeout: 400,\n        holdRepeatTimeout: 200,\n        repeatTimeoutKeys: [],\n        mobileIngoreAutoSpace: [],\n        request: $.noop,\n        response: $.noop,\n        describe: 'procs',\n        onRPCError: null,\n        keymap: null,\n        doubleTab: null,\n        doubleTabEchoCommand: false,\n        completion: false,\n        onInit: $.noop,\n        onClear: $.noop,\n        onBlur: $.noop,\n        onFocus: $.noop,\n        onTerminalChange: $.noop,\n        onExit: $.noop,\n        onPush: $.noop,\n        onPop: $.noop,\n        keypress: $.noop,\n        keydown: $.noop,\n        renderHandler: null,\n        onAfterRedraw: $.noop,\n        onEchoCommand: $.noop,\n        onPaste: $.noop,\n        onFlush: $.noop,\n        onBeforeCommand: null,\n        onAfterCommand: null,\n        onBeforeEcho: null,\n        onAfterEcho: null,\n        onBeforeLogin: null,\n        onAfterLogout: null,\n        onBeforeLogout: null,\n        allowedAttributes: ['title', /^aria-/, 'id', /^data-/],\n        strings: {\n            comletionParameters: 'From version 1.0.0 completion function need to' +\n                ' have two arguments',\n            wrongPasswordTryAgain: 'Wrong password try again!',\n            wrongPassword: 'Wrong password!',\n            ajaxAbortError: 'Error while aborting ajax call!',\n            wrongArity: \"Wrong number of arguments. Function '%s' expects %s got\" +\n                ' %s!',\n            commandNotFound: \"Command '%s' Not Found!\",\n            oneRPCWithIgnore: 'You can use only one rpc with describe == false ' +\n                'or rpc without system.describe',\n            oneInterpreterFunction: \"You can't use more than one function (rpc \" +\n                'without system.describe or with option describe == false count' +\n                 's as one)',\n            loginFunctionMissing: \"You didn't specify a login function\",\n            noTokenError: 'Access denied (no token)',\n            serverResponse: 'Server responded',\n            wrongGreetings: 'Wrong value of greetings parameter',\n            notWhileLogin: \"You can't call `%s' function while in login\",\n            loginIsNotAFunction: 'Authenticate must be a function',\n            canExitError: \"You can't exit from main interpreter\",\n            invalidCompletion: 'Invalid completion',\n            invalidSelector: 'Sorry, but terminal said that you use invalid ' +\n                'selector!',\n            invalidTerminalId: 'Invalid Terminal ID',\n            login: 'login',\n            password: 'password',\n            recursiveLoop: 'Recursive loop in echo detected, skip',\n            notAString: '%s function: argument is not a string',\n            redrawError: 'Internal error, wrong position in cmd redraw',\n            invalidStrings: 'Command %s have unclosed strings',\n            defunctTerminal: \"You can't call method on terminal that was destroyed\"\n        }\n    };\n    // -------------------------------------------------------------------------\n    // :: All terminal globals\n    // -------------------------------------------------------------------------\n    var requests = []; // for canceling on CTRL+D\n    var terminals = new Cycle(); // list of terminals global in this scope\n    // state for all terminals, terminals can't have own array fo state because\n    // there is only one popstate event\n    var save_state = []; // hold objects returned by export_view by history API\n    var hash_commands;\n    var change_hash = false; // don't change hash on Init\n    var fire_hash_change = true;\n    var first_instance = true; // used by history state\n    $.fn.terminal = function(init_interpreter, options) {\n        function StorageHelper(memory) {\n            if (memory) {\n                this.storage = {};\n            }\n            this.set = function(key, value) {\n                if (memory) {\n                    this.storage[key] = value;\n                } else {\n                    $.Storage.set(key, value);\n                }\n            };\n            this.get = function(key) {\n                if (memory) {\n                    return this.storage[key];\n                } else {\n                    return $.Storage.get(key);\n                }\n            };\n            this.remove = function(key) {\n                if (memory) {\n                    delete this.storage[key];\n                } else {\n                    $.Storage.remove(key);\n                }\n            };\n        }\n        // ---------------------------------------------------------------------\n        // :: helper function\n        // ---------------------------------------------------------------------\n        function get_processed_command(command) {\n            if ($.terminal.unclosed_strings(command)) {\n                var string = $.terminal.escape_brackets(command);\n                var message = sprintf(strings().invalidStrings, \"`\" + string + \"`\");\n                throw new $.terminal.Exception(message);\n            } else if (is_function(settings.processArguments)) {\n                return process_command(command, settings.processArguments);\n            } else if (settings.processArguments) {\n                return $.terminal.parse_command(command);\n            } else {\n                return $.terminal.split_command(command);\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: helper function that use option to render objects\n        // ---------------------------------------------------------------------\n        function preprocess_value(value, options) {\n            if (is_function(settings.renderHandler)) {\n                var ret = settings.renderHandler.call(self, value, options, self);\n                if (ret === false) {\n                    return false;\n                }\n                if (typeof ret === 'string' || is_node(ret) || is_promise(ret)) {\n                    return ret;\n                } else {\n                    return value;\n                }\n            }\n            return value;\n        }\n        // ---------------------------------------------------------------------\n        // :: call when line is out of view when outputLimit is used\n        // :: NOTE: it's not called when less plugin is used onClear is called\n        // :: instead because less call term::clear() after export old view\n        // ---------------------------------------------------------------------\n        function unmount(node) {\n            var index = node.data('index');\n            var line = lines[index];\n            var options = line[1];\n            if (is_function(options.unmount)) {\n                options.unmount.call(self, node);\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: helper function used in render and in update\n        // ---------------------------------------------------------------------\n        function prepare_render(value, options) {\n            if (is_node(value)) {\n                var settings = $.extend({}, options, {\n                    raw: true,\n                    finalize: function(div) {\n                        var node;\n                        if (value instanceof $.fn.init) {\n                            // deep clone with events - we clone because remove\n                            // from DOM will remove events from original object\n                            node = value.clone(true, true);\n                        } else {\n                            // don't clone html nodes because it will not\n                            // work for canvas or video tag\n                            node = value;\n                        }\n                        div.find('.terminal-render-item').replaceWith(node);\n                        if (options && is_function(options.finalize)) {\n                            options.finalize(div, self);\n                        }\n                    }\n                });\n                return ['<div class=\"terminal-render-item\"/>', settings];\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: helper function that renders DOM nodes and jQuery objects\n        // ---------------------------------------------------------------------\n        function render(value, options) {\n            var ret = prepare_render(value, options);\n            if (ret) {\n                self.echo.apply(self, ret);\n                return true;\n            }\n        }\n        // ---------------------------------------------------------------------\n        function get_node(index) {\n            return output.find('[data-index=' + index + ']');\n        }\n        // ---------------------------------------------------------------------\n        // :: test if object can be rendered\n        // ---------------------------------------------------------------------\n        function is_node(object) {\n            return object instanceof $.fn.init || object instanceof Element;\n        }\n        // ---------------------------------------------------------------------\n        // :: Display object on terminal\n        // ---------------------------------------------------------------------\n        function display_object(object) {\n            object = preprocess_value(object);\n            if (object === false) {\n                return;\n            }\n            if (render(object)) {\n                return;\n            }\n            if (typeof object === 'string') {\n                self.echo(object);\n            } else if (is_array(object)) {\n                self.echo($.map(object, function(object) {\n                    return JSON.stringify(object);\n                }).join(' '));\n            } else if (typeof object === 'object') {\n                self.echo(JSON.stringify(object));\n            } else {\n                self.echo(object);\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Display line code in the file if line numbers are present\n        // ---------------------------------------------------------------------\n        function print_line(url_spec, cols) {\n            var re = /(.*):([0-9]+):([0-9]+)$/;\n            // google chrome have line and column after filename\n            var m = url_spec.match(re);\n            if (m) {\n                // TODO: do we need to call pause/resume or return promise?\n                self.pause(settings.softPause);\n                $.get(m[1], function(response) {\n                    var file = m[1];\n                    var code = response.split('\\n');\n                    var n = +m[2] - 1;\n                    var start = n > 2 ? n - 2 : 0;\n                    var lines = code.slice(start, n + 3).map(function(line, i) {\n                        var prefix = '[' + (n + i - 1) + ']: ';\n                        var limit = cols - prefix.length - 4;\n                        if (line.length > limit) {\n                            line = line.substring(0, limit) + '...';\n                        }\n                        if (n > 2 ? i === 2 : i === n) {\n                            line = '[[;#f00;]' +\n                                $.terminal.escape_brackets(line) + ']';\n                        }\n                        return prefix + line;\n                    }).filter(Boolean).join('\\n');\n                    if (lines.length) {\n                        self.echo('[[b;white;]' + file + ']');\n                        self.echo(lines).resume();\n                    }\n                }, 'text');\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Helper function\n        // ---------------------------------------------------------------------\n        function display_json_rpc_error(error) {\n            if (is_function(settings.onRPCError)) {\n                settings.onRPCError.call(self, error);\n            } else {\n                self.error('&#91;RPC&#93; ' + error.message);\n                if (error.error && error.error.message) {\n                    error = error.error;\n                    // more detailed error message\n                    var msg = '\\t' + error.message;\n                    if (error.file) {\n                        msg += ' in file \"' + error.file.replace(/.*\\//, '') + '\"';\n                    }\n                    if (error.at) {\n                        msg += ' at line ' + error.at;\n                    }\n                    self.error(msg);\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Create interpreter function from url string\n        // ---------------------------------------------------------------------\n        function make_basic_json_rpc(url, auth) {\n            var interpreter = function(method, params) {\n                self.pause(settings.softPause);\n                $.jrpc({\n                    url: url,\n                    method: method,\n                    params: params,\n                    request: function(jxhr, request) {\n                        try {\n                            settings.request.call(self, jxhr, request, self);\n                        } catch (e) {\n                            display_exception(e, 'USER');\n                        }\n                    },\n                    response: function(jxhr, response) {\n                        try {\n                            settings.response.call(self, jxhr, response, self);\n                        } catch (e) {\n                            display_exception(e, 'USER');\n                        }\n                    },\n                    success: function success(json) {\n                        if (json.error) {\n                            display_json_rpc_error(json.error);\n                        } else if (is_function(settings.processRPCResponse)) {\n                            settings.processRPCResponse.call(self, json.result, self);\n                        } else {\n                            display_object(json.result);\n                        }\n                        self.resume();\n                    },\n                    error: ajax_error\n                });\n            };\n            // this is the interpreter function\n            return function(command, terminal) {\n                if (command === '') {\n                    return;\n                }\n                try {\n                    command = get_processed_command(command);\n                } catch (e) {\n                    // exception can be thrown on invalid regex\n                    display_exception(e, 'TERMINAL (get_processed_command)');\n                    return;\n                    // throw e; // this will show stack in other try..catch\n                }\n                if (!auth || command.name === 'help') {\n                    // allows to call help without a token\n                    interpreter(command.name, command.args);\n                } else {\n                    var token = terminal.token();\n                    if (token) {\n                        interpreter(command.name, [token].concat(command.args));\n                    } else {\n                        // should never happen\n                        terminal.error('&#91;AUTH&#93; ' + strings().noTokenError);\n                    }\n                }\n            };\n        }\n        // ---------------------------------------------------------------------\n        // :: Create interpreter function from Object. If the value is object\n        // :: it will create nested interpreters\n        // ---------------------------------------------------------------------\n        function make_object_interpreter(object, arity, login, fallback) {\n            // function that maps commands to object methods\n            // it keeps terminal context\n            return function(user_command, terminal) {\n                if (user_command === '') {\n                    return;\n                }\n                var command;\n                try {\n                    command = get_processed_command(user_command);\n                } catch (e) {\n                    // exception can be thrown on invalid regex\n                    if (is_function(settings.exception)) {\n                        settings.exception(e, self);\n                    } else {\n                        self.error('Error: ' + (e.message || e));\n                    }\n                    return;\n                    // throw e; // this will show stack in other try..catch\n                }\n                var val = object[command.name];\n                var type = get_type(val);\n                if (type === 'function') {\n                    if (arity && val.length !== command.args.length) {\n                        self.error(\n                            '&#91;Arity&#93; ' +\n                                sprintf(\n                                    strings().wrongArity,\n                                    command.name,\n                                    val.length,\n                                    command.args.length\n                                )\n                        );\n                    } else {\n                        return val.apply(self, command.args);\n                    }\n                } else if (type === 'object' || type === 'string') {\n                    var commands = [];\n                    if (type === 'object') {\n                        commands = Object.keys(val);\n                        val = make_object_interpreter(\n                            val,\n                            arity,\n                            login\n                        );\n                    }\n                    terminal.push(val, {\n                        prompt: command.name + '> ',\n                        name: command.name,\n                        completion: type === 'object' ? commands : undefined\n                    });\n                } else if (is_function(fallback)) {\n                    fallback(user_command, self);\n                } else if (is_function(settings.onCommandNotFound)) {\n                    settings.onCommandNotFound.call(self, user_command, self);\n                } else {\n                    terminal.error(sprintf(strings().commandNotFound, command.name));\n                }\n            };\n        }\n        // ---------------------------------------------------------------------\n        function ajax_error(xhr, status, error) {\n            self.resume(); // onAjaxError can use pause/resume call it first\n            if (is_function(settings.onAjaxError)) {\n                settings.onAjaxError.call(self, xhr, status, error);\n            } else if (status !== 'abort') {\n                self.error('&#91;AJAX&#93; ' + status + ' - ' +\n                           strings().serverResponse + ':\\n' +\n                           $.terminal.escape_brackets(xhr.responseText));\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: function create interpreter object based on JSON-RPC meta data\n        // ---------------------------------------------------------------------\n        function make_json_rpc_object(url, auth, success) {\n            function jrpc_success(json) {\n                if (json.error) {\n                    display_json_rpc_error(json.error);\n                } else if (is_function(settings.processRPCResponse)) {\n                    settings.processRPCResponse.call(self, json.result, self);\n                } else {\n                    display_object(json.result);\n                }\n                self.resume();\n            }\n            function jrpc_request(jxhr, request) {\n                try {\n                    settings.request.call(self, jxhr, request, self);\n                } catch (e) {\n                    display_exception(e, 'USER');\n                }\n            }\n            function jrpc_response(jxhr, response) {\n                try {\n                    settings.response.call(self, jxhr, response, self);\n                } catch (e) {\n                    display_exception(e, 'USER');\n                }\n            }\n            function response(response) {\n                var procs = response;\n                // we check if it's false before we call this function but\n                // it don't hurt to be explicit here\n                if (settings.describe !== false && settings.describe !== '') {\n                    settings.describe.split('.').forEach(function(field) {\n                        procs = procs[field];\n                    });\n                }\n                if (procs && procs.length) {\n                    var interpreter_object = {};\n                    $.each(procs, function(_, proc) {\n                        if ($.isPlainObject(proc) && typeof proc.name === 'string') {\n                            interpreter_object[proc.name] = function() {\n                                var append = auth && proc.name !== 'help';\n                                var args = Array.prototype.slice.call(arguments);\n                                var args_len = args.length + (append ? 1 : 0);\n                                if (settings.checkArity && proc.params &&\n                                    proc.params.length !== args_len) {\n                                    self.error(\n                                        '&#91;Arity&#93; ' +\n                                            sprintf(\n                                                strings().wrongArity,\n                                                proc.name,\n                                                proc.params.length,\n                                                args_len\n                                            )\n                                    );\n                                } else {\n                                    self.pause(settings.softPause);\n                                    if (append) {\n                                        var token = self.token(true);\n                                        if (token) {\n                                            args = [token].concat(args);\n                                        } else {\n                                            self.error('&#91;AUTH&#93; ' +\n                                                       strings().noTokenError);\n                                        }\n                                    }\n                                    $.jrpc({\n                                        url: url,\n                                        method: proc.name,\n                                        params: args,\n                                        request: jrpc_request,\n                                        response: jrpc_response,\n                                        success: jrpc_success,\n                                        error: ajax_error\n                                    });\n                                }\n                            };\n                        }\n                    });\n                    var login = typeof auth === 'string' ? auth : 'login';\n                    interpreter_object.help = interpreter_object.help || function(fn) {\n                        if (typeof fn === 'undefined') {\n                            var names = procs.map(function(proc) {\n                                return proc.name;\n                            }).join(', ') + ', help';\n                            self.echo('Available commands: ' + names);\n                        } else {\n                            var found = false;\n                            $.each(procs, function(_, proc) {\n                                if (proc.name === fn) {\n                                    found = true;\n                                    var msg = '';\n                                    msg += '[[bu;;]' + proc.name + ']';\n                                    if (proc.params) {\n                                        var params = proc.params;\n                                        if (auth && proc.name !== login) {\n                                            params = params.slice(1);\n                                        }\n                                        msg += ' ' + params.join(' ');\n                                    }\n                                    if (proc.help) {\n                                        msg += '\\n' + proc.help;\n                                    }\n                                    self.echo(msg);\n                                    return false;\n                                }\n                            });\n                            if (!found) {\n                                if (fn === 'help') {\n                                    self.echo('[[bu;;]help] [method]\\ndisplay help ' +\n                                              'for the method or list of methods if not' +\n                                              ' specified');\n                                } else {\n                                    var msg = 'Method `' + fn + \"' not found \";\n                                    self.error(msg);\n                                }\n                            }\n                        }\n                    };\n                    success(interpreter_object);\n                } else {\n                    success(null);\n                }\n            }\n            return $.jrpc({\n                url: url,\n                method: 'system.describe',\n                params: [],\n                success: response,\n                request: jrpc_request,\n                response: jrpc_response,\n                error: function error() {\n                    success(null);\n                }\n            });\n        }\n        // ---------------------------------------------------------------------\n        // :: function create interpeter function and call finalize with\n        // :: interpreter and optional completion\n        // ---------------------------------------------------------------------\n        function make_interpreter(user_intrp, login, finalize) {\n            finalize = finalize || $.noop;\n            var type = get_type(user_intrp);\n            var object;\n            var result = {};\n            var rpc_count = 0; // only one rpc can be use for array\n            var fn_interpreter;\n            if (type === 'array') {\n                object = {};\n                // recur will be called when previous acync call is finished\n                (function recur(interpreters, success) {\n                    if (interpreters.length) {\n                        var first = interpreters[0];\n                        var rest = interpreters.slice(1);\n                        var type = get_type(first);\n                        if (type === 'string') {\n                            self.pause(settings.softPause);\n                            if (settings.describe === false) {\n                                if (++rpc_count === 1) {\n                                    fn_interpreter = make_basic_json_rpc(first, login);\n                                } else {\n                                    self.error(strings().oneRPCWithIgnore);\n                                }\n                                recur(rest, success);\n                            } else {\n                                make_json_rpc_object(first, login, function(new_obj) {\n                                    if (new_obj) {\n                                        $.extend(object, new_obj);\n                                    } else if (++rpc_count === 1) {\n                                        fn_interpreter = make_basic_json_rpc(\n                                            first,\n                                            login\n                                        );\n                                    } else {\n                                        self.error(strings().oneRPCWithIgnore);\n                                    }\n                                    self.resume();\n                                    recur(rest, success);\n                                });\n                            }\n                        } else if (type === 'function') {\n                            if (fn_interpreter) {\n                                self.error(strings().oneInterpreterFunction);\n                            } else {\n                                fn_interpreter = first;\n                            }\n                            recur(rest, success);\n                        } else if (type === 'object') {\n                            $.extend(object, first);\n                            recur(rest, success);\n                        }\n                    } else {\n                        success();\n                    }\n                })(user_intrp, function() {\n                    finalize({\n                        interpreter: make_object_interpreter(\n                            object,\n                            false,\n                            login,\n                            fn_interpreter && fn_interpreter.bind(self)\n                        ),\n                        completion: Object.keys(object)\n                    });\n                });\n            } else if (type === 'string') {\n                if (settings.describe === false) {\n                    object = {\n                        interpreter: make_basic_json_rpc(user_intrp, login)\n                    };\n                    if ($.isArray(settings.completion)) {\n                        object.completion = settings.completion;\n                    }\n                    finalize(object);\n                } else {\n                    self.pause(settings.softPause);\n                    make_json_rpc_object(user_intrp, login, function(object) {\n                        if (object) {\n                            result.interpreter = make_object_interpreter(\n                                object,\n                                false,\n                                login\n                            );\n                            result.completion = Object.keys(object);\n                        } else {\n                            // no procs in system.describe\n                            result.interpreter = make_basic_json_rpc(user_intrp, login);\n                        }\n                        finalize(result);\n                        self.resume();\n                    });\n                }\n            } else if (type === 'object') {\n                finalize({\n                    interpreter: make_object_interpreter(\n                        user_intrp,\n                        settings.checkArity,\n                        login\n                    ),\n                    completion: Object.keys(user_intrp)\n                });\n            } else {\n                // allow $('<div/>').terminal();\n                if (type === 'undefined') {\n                    user_intrp = $.noop;\n                } else if (type !== 'function') {\n                    var msg = type + ' is invalid interpreter value';\n                    throw new $.terminal.Exception(msg);\n                }\n                // single function don't need bind\n                finalize({\n                    interpreter: user_intrp,\n                    completion: settings.completion\n                });\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Create JSON-RPC authentication function\n        // ---------------------------------------------------------------------\n        function make_json_rpc_login(url, login) {\n            var method = get_type(login) === 'boolean' ? 'login' : login;\n            return function(user, passwd, callback) {\n                self.pause(settings.softPause);\n                $.jrpc({\n                    url: url,\n                    method: method,\n                    params: [user, passwd],\n                    request: function(jxhr, request) {\n                        try {\n                            settings.request.call(self, jxhr, request, self);\n                        } catch (e) {\n                            display_exception(e, 'USER');\n                        }\n                    },\n                    response: function(jxhr, response) {\n                        try {\n                            settings.response.call(self, jxhr, response, self);\n                        } catch (e) {\n                            display_exception(e, 'USER');\n                        }\n                    },\n                    success: function success(response) {\n                        if (!response.error && response.result) {\n                            callback(response.result);\n                        } else {\n                            // null will trigger message that login fail\n                            callback(null);\n                        }\n                        self.resume();\n                    },\n                    error: ajax_error\n                });\n            };\n            // default name is login so you can pass true\n        }\n        // ---------------------------------------------------------------------\n        // :: display Exception on terminal\n        // ---------------------------------------------------------------------\n        function display_exception(e, label, silent) {\n            if (is_function(settings.exceptionHandler)) {\n                settings.exceptionHandler.call(self, e, label);\n            } else {\n                self.exception(e, label);\n                if (!silent) {\n                    setTimeout(function() {\n                        throw e;\n                    }, 0);\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Draw line - can have line breaks and be longer than the width of\n        // :: the terminal, there are 2 options raw and finalize\n        // :: raw - will not encode the string and finalize if a function that\n        // :: will have div container of the line as first argument\n        // :: NOTE: it formats and appends lines to output_buffer. The actual\n        // :: append to terminal output happens in the flush function\n        // ---------------------------------------------------------------------\n        var output_buffer = [];\n        var NEW_LINE = 1;\n        var format_cache;\n        if ('Map' in root) {\n            format_cache = new Map();\n        }\n        function buffer_line(arg, index, options) {\n            // urls should always have formatting to keep url if split\n            var i, len;\n            output_buffer.push(NEW_LINE);\n            var format_options = {\n                linksNoReferrer: settings.linksNoReferrer,\n                linksNoFollow: settings.linksNoFollow,\n                anyLinks: settings.anyLinks,\n                char_width: char_size.width,\n                escape: false,\n                allowedAttributes: options.allowedAttributes || []\n            };\n            var use_cache = settings.useCache && format_cache;\n            function format_buff(arg, newline) {\n                var args = JSON.stringify([arg, format_options]);\n                if (use_cache) {\n                    if (format_cache.has(args)) {\n                        return format_cache.get(args);\n                    }\n                }\n                var data = {\n                    line: $.terminal.format(\n                        arg,\n                        format_options\n                    ),\n                    newline: newline\n                };\n                if (use_cache) {\n                    format_cache.set(args, data);\n                }\n                return data;\n            }\n            if (arg instanceof Array) {\n                for (i = 0, len = arg.length; i < len; ++i) {\n                    if (arg[i] === '' || arg[i] === '\\r') {\n                        output_buffer.push({line: '<span></span>'});\n                    } else {\n                        output_buffer.push(format_buff(arg[i], i === len - 1));\n                    }\n                }\n            } else if (!options.raw) {\n                output_buffer.push(format_buff(arg));\n            } else {\n                output_buffer.push({line: arg});\n            }\n            output_buffer.push({\n                finalize: options.finalize,\n                index: index,\n                newline: options.newline\n            });\n        }\n        // ---------------------------------------------------------------------\n        function links(string) {\n            function format(_, style, color, background, _class, data, text) {\n                function formatting(s, text) {\n                    return '[[' + [\n                        style + (s || ''),\n                        color,\n                        background,\n                        _class,\n                        text || data\n                    ].join(';') + ']';\n                }\n                function escaped(_) {\n                    return ']' + formatting('!', _) + _ + ']' + formatting();\n                }\n                if (!style.match(/!/)) {\n                    var m = text.match(email_full_re) || text.match(url_full_re);\n                    if (m) {\n                        return formatting('!', m[1]) + text + ']';\n                    } else if (text.match(email_re) || text.match(url_nf_re)) {\n                        var output = text.replace(email_re, escaped)\n                            .replace(url_nf_re, escaped);\n                        return formatting('', data) + output + ']';\n                    }\n                }\n                return _;\n            }\n            if (!$.terminal.have_formatting(string)) {\n                return string.replace(email_re, '[[!;;]$1]').\n                    replace(url_nf_re, '[[!;;]$1]');\n            }\n            return $.terminal.format_split(string).map(function(str) {\n                if ($.terminal.is_formatting(str)) {\n                    return str.replace(format_parts_re, format);\n                } else {\n                    return str.replace(email_re, '[[!;;]$1]').\n                        replace(url_nf_re, '[[!;;]$1]');\n                }\n            }).join('');\n        }\n        // ---------------------------------------------------------------------\n        function should_wrap(string, options) {\n            return (strlen(text(string)) > options.cols ||\n                    string.match(/\\n/)) &&\n                ((settings.wrap === true &&\n                  options.wrap === undefined) ||\n                 settings.wrap === false &&\n                 options.wrap === true);\n        }\n        // ---------------------------------------------------------------------\n        var string_cache;\n        if ('Map' in root) {\n            string_cache = new Map();\n        }\n        function process_line(line) {\n            // prevent exception in display exception\n            try {\n                var line_settings = $.extend({\n                    exec: true,\n                    raw: false,\n                    finalize: $.noop,\n                    invokeMethods: false,\n                    formatters: true,\n                    convertLinks: settings.convertLinks\n                }, line.options || {});\n                var string = stringify_value(line.value);\n                if (string && is_function(string.then)) {\n                    // handle function that return a promise #629\n                    return string.then(function(string) {\n                        process_line($.extend(line, {\n                            value: string\n                        }));\n                    });\n                }\n                if (!line_settings.newline && string.endsWith('\\n')) {\n                    line_settings.newline = true;\n                    // This adjusts the value for the caller so that when it\n                    // updates the lines list it does the right thing. This is\n                    // necessary in order to avoid messing up the 'data-index'\n                    line.options.newline = true;\n                    string = string.slice(0, -1);\n                }\n                if (string !== '') {\n                    if (!line_settings.raw) {\n                        if (line_settings.formatters) {\n                            try {\n                                string = $.terminal.apply_formatters(\n                                    string,\n                                    $.extend(settings, {echo: true})\n                                );\n                            } catch (e) {\n                                display_exception(e, 'FORMATTING');\n                            }\n                        }\n                        if (settings.useCache) {\n                            var key = string;\n                            if (string_cache && string_cache.has(key)) {\n                                string = string_cache.get(key);\n                                buffer_line(string, line.index, line_settings);\n                                return;\n                            }\n                        }\n                        if (line_settings.exec) {\n                            var parts = string.split(format_exec_re);\n                            string = $.map(parts, function(string) {\n                                if (string && string.match(format_exec_re) &&\n                                    !$.terminal.is_formatting(string)) {\n                                    // redraw should not execute commands and it have\n                                    // and lines variable have all extended commands\n                                    string = string.replace(/^\\[\\[|\\]\\]$/g, '');\n                                    if (line_settings.exec) {\n                                        var trim = string.trim();\n                                        if (prev_exec_cmd && prev_exec_cmd === trim) {\n                                            prev_exec_cmd = '';\n                                            self.error(strings().recursiveLoop);\n                                        } else {\n                                            prev_exec_cmd = trim;\n                                            $.terminal.extended_command(self, string, {\n                                                invokeMethods: line_settings.invokeMethods\n                                            }).then(function() {\n                                                prev_exec_cmd = '';\n                                            });\n                                        }\n                                    }\n                                    return '';\n                                } else {\n                                    return string;\n                                }\n                            }).join('');\n                        }\n                        if (string === '') {\n                            return;\n                        }\n                        if (line_settings.convertLinks) {\n                            string = links(string);\n                        }\n                        string = crlf($.terminal.normalize(string));\n                        string = $.terminal.encode(string, {\n                            tabs: settings.tabs\n                        });\n                        //string = $.terminal.normalize(string);\n                        var array;\n                        var cols = line_settings.cols = self.cols();\n                        if (should_wrap(string, line_settings)) {\n                            var words = line_settings.keepWords;\n                            array = $.terminal.split_equal(string, cols, words);\n                        } else if (string.match(/\\n/)) {\n                            array = string.split(/\\n/);\n                        }\n                    }\n                }\n                var arg = array || string;\n                if (string_cache && key) {\n                    string_cache.set(key, arg);\n                }\n                buffer_line(arg, line.index, line_settings);\n            } catch (e) {\n                output_buffer = [];\n                // don't display exception if exception throw in terminal\n                if (is_function(settings.exceptionHandler)) {\n                    settings.exceptionHandler.call(self, e, 'TERMINAL');\n                } else {\n                    alert_exception('[Internal Exception(process_line)]', e);\n                }\n            }\n            // is it work with unpromise that ignore undefined\n            return true;\n        }\n        // ---------------------------------------------------------------------\n        // :: Update terminal lines\n        // ---------------------------------------------------------------------\n        function redraw(options) {\n            options = $.extend({}, {\n                // should be used when single line is updated\n                update: false,\n                // should be used if you want to scroll to bottom after redraw\n                scroll: true\n            }, options || {});\n            if (!options.update) {\n                command_line.resize(num_chars);\n                // we don't want reflow while processing lines\n                var detached_output = output.empty().detach();\n            }\n            var lines_to_show = [];\n            // Dead code\n            if (settings.outputLimit >= 0) {\n                // flush will limit lines but if there is lot of\n                // lines we don't need to show them and then remove\n                // them from terminal\n                var limit;\n                if (settings.outputLimit === 0) {\n                    limit = self.rows();\n                } else {\n                    limit = settings.outputLimit;\n                }\n                lines.forEach(function(line, index) {\n                    var value = line[0];\n                    var options = line[1];\n                    lines_to_show.push({\n                        value: value,\n                        index: index,\n                        options: options\n                    });\n                });\n                var pivot = lines_to_show.length - limit - 1;\n                lines_to_show = lines_to_show.slice(pivot);\n            } else {\n                lines_to_show = lines.map(function(line, index) {\n                    return {\n                        value: line[0],\n                        index: index,\n                        options: line[1]\n                    };\n                });\n            }\n            try {\n                output_buffer = [];\n                unpromise(lines_to_show.map(function(line) {\n                    return process_line(line);\n                }), function() {\n                    if (!options.update) {\n                        command_line.before(detached_output); // reinsert output\n                    }\n                    self.flush(options);\n                    fire_event('onAfterRedraw');\n                });\n            } catch (e) {\n                if (is_function(settings.exceptionHandler)) {\n                    settings.exceptionHandler.call(self, e, 'TERMINAL (redraw)');\n                } else {\n                    alert_exception('[redraw]', e);\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Function limit output lines based on outputLimit option\n        // ---------------------------------------------------------------------\n        function limit_lines() {\n            if (settings.outputLimit >= 0) {\n                var limit;\n                if (settings.outputLimit === 0) {\n                    limit = self.rows();\n                } else {\n                    limit = settings.outputLimit;\n                }\n                var $lines = output.find('> div > div');\n                if ($lines.length + 1 > limit) {\n                    var max = $lines.length - limit + 1;\n                    var for_remove = $lines.slice(0, max);\n                    // you can't get parent if you remove the\n                    // element so we first get the parent\n                    var parents = for_remove.parent();\n                    for_remove.remove();\n                    parents.each(function() {\n                        var $self = $(this);\n                        if ($self.is(':empty')) {\n                            unmount($self);\n                            // there can be divs inside parent that\n                            // was not removed\n                            $self.remove();\n                        }\n                    });\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Display user greetings or terminal signature\n        // ---------------------------------------------------------------------\n        function show_greetings() {\n            if (settings.greetings === undefined) {\n                // signature have ascii art so it's not suite for screen readers\n                self.echo(self.signature, {finalize: a11y_hide, formatters: false});\n            } else if (settings.greetings) {\n                var type = typeof settings.greetings;\n                if (type === 'string') {\n                    self.echo(settings.greetings);\n                } else if (type === 'function') {\n                    try {\n                        var ret = settings.greetings.call(self, self.echo);\n                        var error = make_label_error('Greetings');\n                        unpromise(ret, self.echo, function(e) {\n                            error(e);\n                            settings.greetings = null;\n                        });\n                    } catch (e) {\n                        settings.greetings = null;\n                        display_exception(e, 'greetings');\n                    }\n                } else {\n                    self.error(strings().wrongGreetings);\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Display prompt and last command\n        // ---------------------------------------------------------------------\n        function echo_command(command) {\n            if (typeof command === 'undefined') {\n                command = self.get_command();\n            }\n            // true will return last rendered string\n            var prompt = command_line.prompt(true);\n            var mask = command_line.mask();\n            switch (typeof mask) {\n                case 'string':\n                    command = command.replace(/./g, mask);\n                    break;\n                case 'boolean':\n                    if (mask) {\n                        command = command.replace(/./g, settings.maskChar);\n                    } else {\n                        command = $.terminal.escape_formatting(command);\n                    }\n                    break;\n            }\n            var options = {\n                convertLinks: false,\n                exec: false,\n                formatters: false,\n                finalize: function finalize(div) {\n                    a11y_hide(div.addClass('terminal-command'));\n                    fire_event('onEchoCommand', [div, command]);\n                }\n            };\n            command = $.terminal.apply_formatters(command, {command: true});\n            self.echo(prompt + command, options);\n        }\n        // ---------------------------------------------------------------------\n        function have_scrollbar() {\n            return fill.outerWidth() !== self.outerWidth();\n        }\n        // ---------------------------------------------------------------------\n        // :: Helper function that restore state. Call import_view or exec\n        // ---------------------------------------------------------------------\n        function restore_state(spec) {\n            // spec [terminal_id, state_index, command]\n            var terminal = terminals.get()[spec[0]];\n            if (!terminal) {\n                throw new $.terminal.Exception(strings().invalidTerminalId);\n            }\n            var command_idx = spec[1];\n            if (save_state[command_idx]) { // state exists\n                terminal.import_view(save_state[command_idx]);\n            } else {\n                // restore state\n                change_hash = false;\n                var command = spec[2];\n                if (command) {\n                    terminal.exec(command).done(function() {\n                        change_hash = true;\n                        save_state[command_idx] = terminal.export_view();\n                    });\n                }\n            }\n            /*if (spec[3].length) {\n                restore_state(spec[3]);\n            }*/\n        }\n        // ---------------------------------------------------------------------\n        function make_label_error(label) {\n            return function(e) {\n                self.error('[' + label + '] ' + (e.message || e)).resume();\n            };\n        }\n        // ---------------------------------------------------------------------\n        // :: Helper function\n        // ---------------------------------------------------------------------\n        function maybe_update_hash() {\n            if (change_hash) {\n                fire_hash_change = false;\n                location.hash = '#' + JSON.stringify(hash_commands);\n                setTimeout(function() {\n                    fire_hash_change = true;\n                }, 100);\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Wrapper over interpreter, it implements exit and catches all\n        // :: exeptions from user code and displays them on the terminal\n        // ---------------------------------------------------------------------\n        var first_command = true;\n        var resume_callbacks = [];\n        function commands(command, silent, exec) {\n            function init_state() {\n                // execHash need first empty command too\n                if (settings.historyState || settings.execHash && exec) {\n                    if (!save_state.length) {\n                        // first command in first terminal don't have hash\n                        self.save_state();\n                    } else {\n                        self.save_state(null);\n                    }\n                }\n            }\n            // -----------------------------------------------------------------\n            function after_exec() {\n                // variables defined later in commands\n                if (!exec) {\n                    change_hash = true;\n                    if (settings.historyState) {\n                        self.save_state(command, false);\n                    }\n                    change_hash = saved_change_hash;\n                }\n                deferred.resolve();\n                fire_event('onAfterCommand', [command]);\n            }\n            // -----------------------------------------------------------------\n            function show(result) {\n                if (typeof result !== 'undefined') {\n                    display_object(result);\n                }\n                after_exec();\n                self.resume();\n            }\n            // -----------------------------------------------------------------\n\n            // -----------------------------------------------------------------\n            function invoke() {\n                // Call user interpreter function\n                var result = interpreter.interpreter.call(self, command, self);\n                if (result) {\n                    // auto pause/resume when user return promises\n                    // it should not pause when user return promise from read()\n                    if (!force_awake) {\n                        self.pause(settings.softPause);\n                    }\n                    force_awake = false;\n                    var error = make_label_error('Command');\n                    // when for native Promise object work only in jQuery 3.x\n                    if (is_function(result.done || result.then)) {\n                        return unpromise(result, show, error);\n                    } else {\n                        return $.when(result).done(show).catch(error);\n                    }\n                } else if (paused) {\n                    resume_callbacks.push(function() {\n                        // exec with resume/pause in user code\n                        after_exec();\n                    });\n                } else {\n                    after_exec();\n                }\n            }\n            // -----------------------------------------------------------------\n            // first command store state of the terminal before the command get\n            // executed\n            if (first_command) {\n                first_command = false;\n                init_state();\n            }\n            try {\n                // this callback can disable commands\n                if (fire_event('onBeforeCommand', [command]) === false) {\n                    return;\n                }\n                if (exec) {\n                    prev_exec_cmd = command.trim();\n                } else {\n                    prev_command = $.terminal.split_command(command);\n                }\n                if (!ghost()) {\n                    // exec execute this function wihout the help of cmd plugin\n                    // that add command to history on enter\n                    if (exec && (is_function(settings.historyFilter) &&\n                                 settings.historyFilter(command) ||\n                                 command.match(settings.historyFilter))) {\n                        command_line.history().append(command);\n                    }\n                }\n                var interpreter = interpreters.top();\n                if (!silent && settings.echoCommand) {\n                    echo_command(command);\n                }\n                // new promise will be returned to exec that will resolve his\n                // returned promise\n                var deferred = new $.Deferred();\n                // we need to save sate before commands is deleyd because\n                // execute_extended_command disable it and it can be executed\n                // after delay\n                var saved_change_hash = change_hash;\n                if (command.match(/^\\s*login\\s*$/) && self.token(true)) {\n                    if (self.level() > 1) {\n                        self.logout(true);\n                    } else {\n                        self.logout();\n                    }\n                    after_exec();\n                } else if (settings.exit && command.match(/^\\s*exit\\s*$/) &&\n                           !in_login) {\n                    var level = self.level();\n                    if (level === 1 && self.get_token() || level > 1) {\n                        if (self.get_token(true)) {\n                            self.set_token(undefined, true);\n                        }\n                        self.pop();\n                    }\n                    after_exec();\n                } else if (settings.clear && command.match(/^\\s*clear\\s*$/) &&\n                           !in_login) {\n                    self.clear();\n                    after_exec();\n                } else {\n                    var ret = invoke();\n                    if (ret) {\n                        return ret;\n                    }\n                }\n                return deferred.promise();\n            } catch (e) {\n                display_exception(e, 'USER', exec);\n                self.resume();\n                if (exec) {\n                    throw e;\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: The logout function removes Storage, disables history and runs\n        // :: the login function. This function is called only when options.login\n        // :: function is defined. The check for this is in the self.pop method\n        // ---------------------------------------------------------------------\n        function global_logout() {\n            if (fire_event('onBeforeLogout', [], true) === false) {\n                return;\n            }\n            clear_loging_storage();\n            fire_event('onAfterlogout', [], true);\n            self.login(global_login_fn, true, initialize);\n        }\n        // ---------------------------------------------------------------------\n        function clear_loging_storage() {\n            var name = self.prefix_name(true) + '_';\n            storage.remove(name + 'token');\n            storage.remove(name + 'login');\n        }\n        // ---------------------------------------------------------------------\n        // :: Save the interpreter name for use with purge\n        // ---------------------------------------------------------------------\n        function maybe_append_name(interpreter_name) {\n            var storage_key = self.prefix_name() + '_interpreters';\n            var names = storage.get(storage_key);\n            if (names) {\n                names = JSON.parse(names);\n            } else {\n                names = [];\n            }\n            if ($.inArray(interpreter_name, names) === -1) {\n                names.push(interpreter_name);\n                storage.set(storage_key, JSON.stringify(names));\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Function enables history, sets prompt, runs interpreter function\n        // ---------------------------------------------------------------------\n        function prepare_top_interpreter(silent) {\n            var interpreter = interpreters.top();\n            var name = self.prefix_name(true);\n            if (!ghost()) {\n                maybe_append_name(name);\n            }\n            var login = self.login_name(true);\n            command_line.name(name + (login ? '_' + login : ''));\n            var prompt = interpreter.prompt;\n            if (is_function(prompt)) {\n                prompt = context_callback_proxy(prompt);\n            }\n            if (prompt !== command_line.prompt()) {\n                if (is_function(interpreter.prompt)) {\n                    // prevent flicker of old prompt until async prompt finishes\n                    command_line.prompt('');\n                }\n                command_line.prompt(interpreter.prompt);\n            }\n            if (typeof interpreter.history !== 'undefined') {\n                self.history().toggle(interpreter.history);\n            }\n            if ($.isPlainObject(interpreter.keymap)) {\n                command_line.keymap(null).keymap($.extend(\n                    {},\n                    terminal_init_keymap,\n                    $.omap(interpreter.keymap, function(name, fun) {\n                        return function() {\n                            var args = [].slice.call(arguments);\n                            try {\n                                return fun.apply(self, args);\n                            } catch (e) {\n                                display_exception(e, 'USER KEYMAP');\n                            }\n                        };\n                    })\n                ));\n            }\n            command_line.set('');\n            init_queue.resolve();\n            if (!silent && is_function(interpreter.onStart)) {\n                interpreter.onStart.call(self, self);\n            }\n        }\n        // ---------------------------------------------------------------------\n        function fire_event(name, args, skip_local) {\n            args = (args || []).concat([self]); // create new array\n            // even can be fired before interpreters is created\n            var top = interpreters && interpreters.top();\n            if (top && is_function(top[name]) && !skip_local) {\n                try {\n                    return top[name].apply(self, args);\n                } catch (e) {\n                    delete top[name];\n                    display_exception(e, name);\n                }\n            } else if (is_function(settings[name])) {\n                try {\n                    return settings[name].apply(self, args);\n                } catch (e) {\n                    settings[name] = null;\n                    display_exception(e, name);\n                }\n            }\n        }\n        var scroll_to_view = (function() {\n            function scroll_to_view(visible) {\n                if (!visible) {\n                    // try catch for Node.js unit tests\n                    try {\n                        self.scroll_to(self.find('.cmd-cursor-line'));\n                        return true;\n                    } catch (e) {\n                        return true;\n                    }\n                }\n            }\n            // we don't want debounce in Unit Tests\n            if (typeof global !== 'undefined' && typeof global.it === 'function') {\n                return scroll_to_view;\n            }\n            return debounce(scroll_to_view, 100, {\n                leading: true,\n                trailing: false\n            });\n        })();\n        // ---------------------------------------------------------------------\n        function make_cursor_visible() {\n            var cursor = self.find('.cmd-cursor-line');\n            return cursor.is_fully_in_viewport(self).then(scroll_to_view);\n        }\n        // ---------------------------------------------------------------------\n        function hashchange() {\n            if (fire_hash_change && settings.execHash) {\n                try {\n                    if (location.hash) {\n                        var hash = location.hash.replace(/^#/, '');\n                        hash_commands = JSON.parse(decodeURIComponent(hash));\n                    } else {\n                        hash_commands = [];\n                    }\n                    if (hash_commands.length) {\n                        restore_state(hash_commands[hash_commands.length - 1]);\n                    } else if (save_state[0]) {\n                        self.import_view(save_state[0]);\n                    }\n                } catch (e) {\n                    display_exception(e, 'TERMINAL');\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        function initialize() {\n            prepare_top_interpreter();\n            show_greetings();\n            if (lines.length) {\n                self.refresh(); // for case when showing long error before init\n            }\n            // was_paused flag is workaround for case when user call exec before\n            // login and pause in onInit, 3rd exec will have proper timing (will\n            // execute after onInit resume)\n            var was_paused = false;\n            if (is_function(settings.onInit)) {\n                onPause = function() { // local in terminal\n                    was_paused = true;\n                };\n                try {\n                    settings.onInit.call(self, self);\n                } catch (e) {\n                    display_exception(e, 'OnInit');\n                    // throw e; // it will be catched by terminal\n                } finally {\n                    onPause = $.noop;\n                    if (!was_paused && self.enabled()) {\n                        // resume login if user didn't call pause in onInit\n                        // if user pause in onInit wait with exec until it\n                        // resume\n                        self.resume(true);\n                    }\n                }\n            }\n            if (first_instance) {\n                first_instance = false;\n                $(window).on('hashchange', hashchange);\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: If Ghost don't store anything in localstorage\n        // ---------------------------------------------------------------------\n        function ghost() {\n            return in_login || command_line.mask() !== false;\n        }\n        // ---------------------------------------------------------------------\n        // :: Keydown event handler\n        // ---------------------------------------------------------------------\n        function user_key_down(e) {\n            var result, top = interpreters.top();\n            if (is_function(top.keydown)) {\n                result = top.keydown.call(self, e, self);\n                if (result !== undefined) {\n                    return result;\n                }\n            } else if (is_function(settings.keydown)) {\n                result = settings.keydown.call(self, e, self);\n                if (result !== undefined) {\n                    return result;\n                }\n            }\n        }\n        var keymap = {\n            'CTRL+D': function(e, original) {\n                if (!in_login) {\n                    if (command_line.get() === '') {\n                        if (interpreters.size() > 1 ||\n                            is_function(global_login_fn)) {\n                            self.pop('');\n                        } else {\n                            self.resume();\n                        }\n                    } else {\n                        original();\n                    }\n                }\n                return false;\n            },\n            'CTRL+C': function() {\n                with_selection(function(html) {\n                    if (html === '') {\n                        var command = self.get_command();\n                        var position = self.get_position();\n                        command = command.slice(0, position) + '^C' +\n                            command.slice(position + 2);\n                        echo_command(command);\n                        self.set_command('');\n                    } else {\n                        var clip = self.find('textarea');\n                        text_to_clipboard(clip, process_selected_html(html));\n                    }\n                });\n                return false;\n            },\n            'CTRL+L': function() {\n                self.clear();\n                return false;\n            },\n            'TAB': function(e, orignal) {\n                // TODO: move this to cmd plugin\n                //       add completion = array | function\n                //       !!! Problem complete more then one key need terminal\n                var top = interpreters.top(), completion, caseSensitive;\n                if (typeof top.caseSensitiveAutocomplete !== 'undefined') {\n                    caseSensitive = top.caseSensitiveAutocomplete;\n                } else {\n                    caseSensitive = settings.caseSensitiveAutocomplete;\n                }\n                if (settings.completion &&\n                    get_type(settings.completion) !== 'boolean' &&\n                    top.completion === undefined) {\n                    completion = settings.completion;\n                } else {\n                    completion = top.completion;\n                }\n                if (completion === 'settings') {\n                    completion = settings.completion;\n                }\n                function resolve(commands) {\n                    // local copy\n                    commands = commands.slice();\n                    // default commands should not match for arguments\n                    if (!self.before_cursor(false).match(/\\s/)) {\n                        if (settings.clear && $.inArray('clear', commands) === -1) {\n                            commands.push('clear');\n                        }\n                        if (settings.exit && $.inArray('exit', commands) === -1) {\n                            commands.push('exit');\n                        }\n                    }\n                    self.complete(commands, {\n                        echo: true,\n                        word: settings.wordAutocomplete,\n                        escape: settings.completionEscape,\n                        caseSensitive: caseSensitive,\n                        echoCommand: settings.doubleTabEchoCommand,\n                        doubleTab: settings.doubleTab\n                    });\n                }\n                if (completion) {\n                    switch (get_type(completion)) {\n                        case 'function':\n                            var string = self.before_cursor(settings.wordAutocomplete);\n                            if (completion.length === 3) {\n                                var error = new Error(strings().comletionParameters);\n                                display_exception(error, 'USER');\n                                return false;\n                            }\n                            var result = completion.call(self, string, resolve);\n                            unpromise(result, resolve, make_label_error('Completion'));\n                            break;\n                        case 'array':\n                            resolve(completion);\n                            break;\n                        default:\n                            throw new $.terminal.Exception(strings().invalidCompletion);\n                    }\n                } else {\n                    orignal();\n                }\n                return false;\n            },\n            'CTRL+V': function(e, original) {\n                original(e);\n                self.oneTime(200, function() {\n                    self.scroll_to_bottom();\n                });\n                return true;\n            },\n            'CTRL+TAB': function() {\n                if (terminals.length() > 1) {\n                    self.focus(false);\n                    return false;\n                }\n            },\n            'PAGEDOWN': function() {\n                self.scroll(self.height());\n            },\n            'PAGEUP': function() {\n                self.scroll(-self.height());\n            }\n        };\n        // ---------------------------------------------------------------------\n        function key_down(e) {\n            // Prevent to be executed by cmd: CTRL+D, TAB, CTRL+TAB (if more\n            // then one terminal)\n            var result, i;\n            if (self.enabled() && !animating) {\n                if (!self.paused()) {\n                    result = user_key_down(e);\n                    if (result !== undefined) {\n                        return result;\n                    }\n                    if (e.which !== 9) { // not a TAB\n                        tab_count = 0;\n                    }\n                } else {\n                    if (!settings.pauseEvents) {\n                        result = user_key_down(e);\n                        if (result !== undefined) {\n                            return result;\n                        }\n                    }\n                    if (e.which === 68 && e.ctrlKey) { // CTRL+D (if paused)\n                        if (settings.pauseEvents) {\n                            result = user_key_down(e);\n                            if (result !== undefined) {\n                                return result;\n                            }\n                        }\n                        if (requests.length) {\n                            for (i = requests.length; i--;) {\n                                var r = requests[i];\n                                if (r.readyState !== 4) {\n                                    try {\n                                        r.abort();\n                                    } catch (error) {\n                                        if (is_function(settings.exceptionHandler)) {\n                                            settings.exceptionHandler.call(\n                                                self,\n                                                e,\n                                                'AJAX ABORT'\n                                            );\n                                        } else {\n                                            self.error(strings().ajaxAbortError);\n                                        }\n                                    }\n                                }\n                            }\n                            requests = [];\n                        }\n                        self.resume();\n                    }\n                    return false;\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        function key_press(e) {\n            var top = interpreters.top();\n            if (enabled && (!paused || !settings.pauseEvents)) {\n                if (is_function(top.keypress)) {\n                    return top.keypress.call(self, e, self);\n                } else if (is_function(settings.keypress)) {\n                    return settings.keypress.call(self, e, self);\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Typing animation generator\n        // ---------------------------------------------------------------------\n        function typed(finish_typing_fn) {\n            return function typeing_animation(message, delay, onFinish) {\n                animating = true;\n                var prompt = self.get_prompt();\n                var char_i = 0;\n                var len = $.terminal.length(message);\n                if (message.length > 0) {\n                    self.set_prompt('');\n                    var new_prompt = '';\n                    var interval = setInterval(function() {\n                        var chr = $.terminal.substring(message, char_i, char_i + 1);\n                        new_prompt += chr;\n                        self.set_prompt(new_prompt);\n                        char_i++;\n                        if (char_i === len) {\n                            clearInterval(interval);\n                            setTimeout(function() {\n                                // swap command with prompt\n                                finish_typing_fn(message, prompt);\n                                animating = false;\n                                if (is_function(onFinish)) {\n                                    try {\n                                        onFinish.apply(self);\n                                    } catch (e) {\n                                        display_exception(e);\n                                    }\n                                }\n                            }, delay);\n                        }\n                    }, delay);\n                }\n            };\n        }\n        // ---------------------------------------------------------------------\n        var typed_prompt = typed(function(message) {\n            self.set_prompt(message + ' ');\n        });\n        // ---------------------------------------------------------------------\n        var typed_message = typed(function(message, prompt) {\n            self.echo(message);\n            self.set_prompt(prompt);\n        });\n        // ---------------------------------------------------------------------\n        function ready(queue) {\n            return function(fun) {\n                queue.add(fun);\n            };\n        }\n        // ---------------------------------------------------------------------\n        function strings() {\n            return $.extend(\n                {},\n                $.terminal.defaults.strings,\n                settings && settings.strings || {}\n            );\n        }\n        // ---------------------------------------------------------------------\n        var self = this;\n        if (this.length > 1) {\n            return this.each(function() {\n                $.fn.terminal.call(\n                    $(this),\n                    init_interpreter,\n                    $.extend({name: self.selector}, options)\n                );\n            });\n        }\n        var body_terminal;\n        if (self.is('body,html')) {\n            // terminal already exists on body\n            if (self.hasClass('full-screen-terminal')) {\n                var data = self.find('> .terminal').data('terminal');\n                if (data) {\n                    return data;\n                }\n            }\n            body_terminal = self;\n            self = $('<div/>').appendTo('body');\n            $('body').addClass('full-screen-terminal');\n        } else if (self.data('terminal')) {\n            // terminal already exists\n            return self.data('terminal');\n        }\n        // -----------------------------------------------------------------\n        // TERMINAL METHODS\n        // -----------------------------------------------------------------\n        $.extend(self, $.omap({\n            id: function() {\n                return terminal_id;\n            },\n            // -------------------------------------------------------------\n            // :: Clear the output\n            // -------------------------------------------------------------\n            clear: function() {\n                if (fire_event('onClear') !== false) {\n                    lines.forEach(function(line, i) {\n                        var options = line[1];\n                        if (is_function(options.onClear)) {\n                            options.onClear.call(self, get_node(i));\n                        }\n                    });\n                    lines = [];\n                    output[0].innerHTML = '';\n                    self.prop({scrollTop: 0});\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Return an object that can be used with import_view to\n            // :: restore the state\n            // -------------------------------------------------------------\n            export_view: function() {\n                var user_export = fire_event('onExport');\n                user_export = user_export || {};\n                return $.extend({}, {\n                    focus: enabled,\n                    mask: command_line.mask(),\n                    prompt: self.get_prompt(),\n                    command: self.get_command(),\n                    position: command_line.position(),\n                    lines: clone(lines),\n                    interpreters: interpreters.clone(),\n                    history: command_line.history().data\n                }, user_export);\n            },\n            // -------------------------------------------------------------\n            // :: Restore the state of the previous exported view\n            // -------------------------------------------------------------\n            import_view: function(view) {\n                if (in_login) {\n                    throw new Error(sprintf(strings().notWhileLogin, 'import_view'));\n                }\n                fire_event('onImport', [view]);\n                when_ready(function ready() {\n                    self.set_prompt(view.prompt);\n                    self.set_command(view.command);\n                    command_line.position(view.position);\n                    command_line.mask(view.mask);\n                    if (view.focus) {\n                        self.focus();\n                    }\n                    lines = clone(view.lines).filter(function(line) {\n                        return line[0];\n                    });\n                    if (view.interpreters instanceof Stack) {\n                        interpreters = view.interpreters;\n                    }\n                    if (settings.importHistory) {\n                        command_line.history().set(view.history);\n                    }\n                    redraw();\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Store current terminal state\n            // -------------------------------------------------------------\n            save_state: function(command, ignore_hash, index) {\n                // save_state.push({view:self.export_view(), join:[]});\n                if (typeof index !== 'undefined') {\n                    save_state[index] = self.export_view();\n                } else {\n                    save_state.push(self.export_view());\n                }\n                if (!$.isArray(hash_commands)) {\n                    hash_commands = [];\n                }\n                if (command !== undefined && !ignore_hash) {\n                    var state = [\n                        terminal_id,\n                        save_state.length - 1,\n                        command\n                    ];\n                    hash_commands.push(state);\n                    maybe_update_hash();\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Execute a command, it will handle commands that do AJAX\n            // :: calls and have delays, if the second argument is set to\n            // :: true it will not echo executed command\n            // -------------------------------------------------------------\n            exec: function(command, silent, deferred) {\n                var d = deferred || new $.Deferred();\n                cmd_ready(function ready() {\n                    if ($.isArray(command)) {\n                        (function recur() {\n                            var cmd = command.shift();\n                            if (cmd) {\n                                self.exec(cmd, silent).done(recur);\n                            } else {\n                                d.resolve();\n                            }\n                        })();\n                    } else if (paused) {\n                        // both commands executed here (resume will call Term::exec)\n                        // delay command multiple time\n                        delayed_commands.push([command, silent, d]);\n                    } else {\n                        // commands may return promise from user code\n                        // it will resolve exec promise when user promise\n                        // is resolved\n                        var ret = commands(command, silent, true);\n                        unpromise(ret, function() {\n                            d.resolve();\n                        }, function() {\n                            d.reject();\n                        });\n                    }\n                });\n                // while testing it didn't executed last exec when using this\n                // for resolved deferred\n                return d.promise();\n            },\n            // -------------------------------------------------------------\n            // :: bypass login function that wait untill you type user/pass\n            // :: it hide implementation detail\n            // -------------------------------------------------------------\n            autologin: function(user, token, silent) {\n                self.trigger('terminal.autologin', [user, token, silent]);\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Function changes the prompt of the command line to login\n            // :: with a password and calls the user login function with\n            // :: the callback that expects a token. The login is successful\n            // :: if the user calls it with value that is truthy\n            // -------------------------------------------------------------\n            login: function(auth, infinite, success, error) {\n                logins.push([].slice.call(arguments));\n                if (in_login) {\n                    throw new Error(sprintf(strings().notWhileLogin, 'login'));\n                }\n                if (!is_function(auth)) {\n                    throw new Error(strings().loginIsNotAFunction);\n                }\n                in_login = true;\n                if (self.token() && self.level() === 1 && !autologin) {\n                    in_login = false; // logout will call login\n                    self.logout(true);\n                } else if (self.token(true) && self.login_name(true)) {\n                    in_login = false;\n                    if (is_function(success)) {\n                        success();\n                    }\n                    return self;\n                }\n                // don't store login data in history\n                if (settings.history) {\n                    command_line.history().disable();\n                }\n                function popUserPass() {\n                    while (self.level() > level) {\n                        self.pop(undefined, true);\n                    }\n                    if (settings.history) {\n                        command_line.history().enable();\n                    }\n                }\n                // so we know how many times call pop\n                var level = self.level();\n                function login_callback(user, token, silent) {\n                    if (self.paused()) {\n                        self.resume();\n                    }\n                    if (token) {\n                        popUserPass();\n                        var name = self.prefix_name(true) + '_';\n                        storage.set(name + 'token', token);\n                        storage.set(name + 'login', user);\n                        in_login = false;\n                        fire_event('onAfterLogin', [user, token]);\n                        if (is_function(success)) {\n                            // will be used internaly since users know\n                            // when login success (they decide when\n                            // it happen by calling the callback -\n                            // this funtion)\n                            success();\n                        }\n                    } else {\n                        if (infinite) {\n                            if (!silent) {\n                                self.error(strings().wrongPasswordTryAgain);\n                            }\n                            self.pop(undefined, true).set_mask(false);\n                        } else {\n                            in_login = false;\n                            if (!silent) {\n                                self.error(strings().wrongPassword);\n                            }\n                            self.pop(undefined, true).pop(undefined, true);\n                        }\n                        // used only to call pop in push\n                        if (is_function(error)) {\n                            error();\n                        }\n                    }\n                    self.off('terminal.autologin');\n                }\n                self.on('terminal.autologin', function(event, user, token, silent) {\n                    if (fire_event('onBeforeLogin', [user, token]) === false) {\n                        return;\n                    }\n                    login_callback(user, token, silent);\n                });\n                self.push(function(user) {\n                    self.set_mask(settings.maskChar).push(function(pass) {\n                        try {\n                            if (fire_event('onBeforeLogin', [user, pass]) === false) {\n                                popUserPass();\n                                return;\n                            }\n                            self.pause();\n                            var ret = auth.call(self, user, pass, function(\n                                token,\n                                silent) {\n                                login_callback(user, token, silent);\n                            });\n                            if (ret && is_function(ret.then || ret.done)) {\n                                (ret.then || ret.done).call(ret, function(token) {\n                                    login_callback(user, token);\n                                });\n                            }\n                        } catch (e) {\n                            display_exception(e, 'AUTH');\n                        }\n                    }, {\n                        prompt: strings().password + ': ',\n                        name: 'password'\n                    });\n                }, {\n                    prompt: strings().login + ': ',\n                    name: 'login'\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: User defined settings and defaults as well\n            // -------------------------------------------------------------\n            settings: function() {\n                return settings;\n            },\n            // -------------------------------------------------------------\n            // :: Get string before cursor\n            // -------------------------------------------------------------\n            before_cursor: function(word) {\n                var pos = command_line.position();\n                var command = command_line.get().slice(0, pos);\n                var cmd_strings = command.split(' ');\n                var string; // string before cursor that will be completed\n                if (word) {\n                    if (cmd_strings.length === 1) {\n                        string = cmd_strings[0];\n                    } else {\n                        var m = command.match(/(\\\\?\")/g);\n                        var double_quotes = m ? m.filter(function(chr) {\n                            return !chr.match(/^\\\\/);\n                        }).length : 0;\n                        m = command.match(/'/g);\n                        var single_quote = m ? m.length : 0;\n                        if (single_quote % 2 === 1) {\n                            string = command.match(/('[^']*)$/)[0];\n                        } else if (double_quotes % 2 === 1) {\n                            string = command.match(/(\"(?:[^\"]|\\\\\")*)$/)[0];\n                        } else {\n                            string = cmd_strings[cmd_strings.length - 1];\n                            for (i = cmd_strings.length - 1; i > 0; i--) {\n                                // treat escape space as part of the string\n                                var prev_string = cmd_strings[i - 1];\n                                if (prev_string[prev_string.length - 1] === '\\\\') {\n                                    string = cmd_strings[i - 1] + ' ' + string;\n                                } else {\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    string = command;\n                }\n                return string;\n            },\n            // -------------------------------------------------------------\n            // :: complete word or command based on array of words\n            // -------------------------------------------------------------\n            complete: function(commands, options) {\n                options = $.extend({\n                    word: true,\n                    echo: false,\n                    escape: true,\n                    echoCommand: false,\n                    caseSensitive: true,\n                    doubleTab: null\n                }, options || {});\n                var sensitive = options.caseSensitive;\n                // cursor can be in the middle of the command\n                // so we need to get the text before the cursor\n                var string = self.before_cursor(options.word).replace(/\\\\\"/g, '\"');\n                var quote = false;\n                if (options.word) {\n                    if (string.match(/^\"/)) {\n                        quote = '\"';\n                    } else if (string.match(/^'/)) {\n                        quote = \"'\";\n                    }\n                    if (quote) {\n                        string = string.replace(/^[\"']/, '');\n                    }\n                }\n                if (tab_count % 2 === 0) {\n                    command = self.before_cursor(options.word);\n                } else {\n                    var test = self.before_cursor(options.word);\n                    if (test !== command) {\n                        // command line changed between TABS - ignore\n                        return;\n                    }\n                }\n                var safe = $.terminal.escape_regex(string);\n                if (options.escape) {\n                    safe = safe.replace(/(\\\\+)([\"'() ])/g, function(_, slash, chr) {\n                        if (chr.match(/[()]/)) {\n                            return slash + '\\\\?\\\\' + chr;\n                        } else {\n                            return slash + '?' + chr;\n                        }\n                    });\n                }\n                function escape(string) {\n                    if (quote === '\"') {\n                        string = string.replace(/\"/g, '\\\\\"');\n                    }\n                    if (!quote && options.escape) {\n                        string = string.replace(/([\"'() ])/g, '\\\\$1');\n                    }\n                    return string;\n                }\n                function matched_strings() {\n                    var matched = [];\n                    for (var i = commands.length; i--;) {\n                        if (commands[i].match(/\\n/) && options.word) {\n                            warn('If you use commands with newlines you ' +\n                                 'should use word option for complete or' +\n                                 ' wordAutocomplete terminal option');\n                        }\n                        if (regex.test(commands[i])) {\n                            var match = escape(commands[i]);\n                            if (!sensitive && same_case(match)) {\n                                if (string.toLowerCase() === string) {\n                                    match = match.toLowerCase();\n                                } else if (string.toUpperCase() === string) {\n                                    match = match.toUpperCase();\n                                }\n                            }\n                            matched.push(match);\n                        }\n                    }\n                    return matched;\n                }\n                var flags = sensitive ? '' : 'i';\n                var regex = new RegExp('^' + safe, flags);\n                var matched = matched_strings();\n                function replace(input, replacement) {\n                    var text = self.get_command();\n                    var pos = self.get_position();\n                    var re = new RegExp('^' + input, 'i');\n                    var pre = text.slice(0, pos);\n                    var post = text.slice(pos);\n                    var to_insert = replacement.replace(re, '') + (quote || '');\n                    self.set_command(pre + to_insert + post);\n                    self.set_position((pre + to_insert).length);\n                }\n                if (matched.length === 1) {\n                    if (options.escape) {\n                        replace(safe, matched[0]);\n                    } else {\n                        self.insert(matched[0].replace(regex, '') + (quote || ''));\n                    }\n                    command = self.before_cursor(options.word);\n                    return true;\n                } else if (matched.length > 1) {\n                    if (++tab_count >= 2) {\n                        tab_count = 0;\n                        if (options.echo) {\n                            if (is_function(options.doubleTab)) {\n                                // new API old is keep for backward compatibility\n                                if (options.echoCommand) {\n                                    echo_command();\n                                }\n                                var ret = options.doubleTab.call(\n                                    self,\n                                    string,\n                                    matched,\n                                    echo_command\n                                );\n                                if (typeof ret === 'undefined') {\n                                    return true;\n                                } else {\n                                    return ret;\n                                }\n                            } else if (options.doubleTab !== false) {\n                                echo_command();\n                                var text = matched.slice().reverse().join('\\t\\t');\n                                self.echo($.terminal.escape_brackets(text), {\n                                    keepWords: true,\n                                    formatters: false\n                                });\n                            }\n                            return true;\n                        }\n                    } else {\n                        var common = common_string(escape(string), matched, sensitive);\n                        if (common) {\n                            replace(safe, common);\n                            command = self.before_cursor(options.word);\n                            return true;\n                        }\n                    }\n                }\n            },\n            // -------------------------------------------------------------\n            // :: Return commands function from top interpreter\n            // -------------------------------------------------------------\n            commands: function() {\n                return interpreters.top().interpreter;\n            },\n            // -------------------------------------------------------------\n            // :: Low Level method that overwrites interpreter\n            // -------------------------------------------------------------\n            set_interpreter: function(user_intrp, login) {\n                var defer = $.Deferred();\n                function overwrite_interpreter() {\n                    self.pause(settings.softPause);\n                    make_interpreter(user_intrp, login, function(result) {\n                        self.resume();\n                        var top = interpreters.top();\n                        $.extend(top, result);\n                        prepare_top_interpreter(true);\n                        defer.resolve();\n                    });\n                }\n                if (is_function(login)) {\n                    self.login(login, true, overwrite_interpreter);\n                } else if (get_type(user_intrp) === 'string' && login) {\n                    self.login(\n                        make_json_rpc_login(user_intrp, login),\n                        true,\n                        overwrite_interpreter\n                    );\n                } else {\n                    overwrite_interpreter();\n                }\n                return defer.promise();\n            },\n            // -------------------------------------------------------------\n            // :: Show user greetings or terminal signature\n            // -------------------------------------------------------------\n            greetings: function() {\n                show_greetings();\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Return true if terminal is paused false otherwise\n            // -------------------------------------------------------------\n            paused: function() {\n                return paused;\n            },\n            // -------------------------------------------------------------\n            // :: Pause the terminal, it should be used for ajax calls\n            // -------------------------------------------------------------\n            pause: function(visible) {\n                cmd_ready(function ready() {\n                    onPause();\n                    paused = true;\n                    command_line.disable(visible || is_android);\n                    if (!visible) {\n                        command_line.find('.cmd-prompt').hidden();\n                    }\n                    fire_event('onPause');\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Resume the previously paused terminal\n            // -------------------------------------------------------------\n            resume: function(silent) {\n                cmd_ready(function ready() {\n                    paused = false;\n                    if (enabled && terminals.front() === self) {\n                        command_line.enable(silent);\n                    }\n                    command_line.find('.cmd-prompt').visible();\n                    var original = delayed_commands;\n                    delayed_commands = [];\n                    for (var i = 0; i < original.length; ++i) {\n                        self.exec.apply(self, original[i]);\n                    }\n                    self.trigger('resume');\n                    var fn = resume_callbacks.shift();\n                    if (fn) {\n                        fn();\n                    }\n                    self.scroll_to_bottom();\n                    fire_event('onResume');\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Return the number of characters that fit into the width of\n            // :: the terminal\n            // -------------------------------------------------------------\n            cols: function() {\n                if (settings.numChars) {\n                    return settings.numChars;\n                }\n                if (typeof num_chars === 'undefined' || num_chars === 1000) {\n                    num_chars = get_num_chars(self, char_size);\n                }\n                return num_chars;\n            },\n            // -------------------------------------------------------------\n            // :: Return the number of lines that fit into the height of the\n            // :: terminal\n            // -------------------------------------------------------------\n            rows: function() {\n                if (settings.numRows) {\n                    return settings.numRows;\n                }\n                if (typeof num_rows === 'undefined') {\n                    num_rows = get_num_rows(self, char_size);\n                }\n                return num_rows;\n            },\n            // -------------------------------------------------------------\n            // :: Return the History object\n            // -------------------------------------------------------------\n            history: function() {\n                return command_line.history();\n            },\n            // -------------------------------------------------------------\n            // :: Return size of the terminal instance\n            // -------------------------------------------------------------\n            geometry: function() {\n                return {\n                    terminal: {\n                        width: old_width,\n                        height: old_height\n                    },\n                    char: char_size,\n                    cols: this.cols(),\n                    rows: this.rows()\n                };\n            },\n            // -------------------------------------------------------------\n            // :: toggle recording of history state\n            // -------------------------------------------------------------\n            history_state: function(toggle) {\n                function run() {\n                    settings.historyState = true;\n                    if (!save_state.length) {\n                        self.save_state();\n                    } else if (terminals.length() > 1) {\n                        self.save_state(null);\n                    }\n                }\n                if (toggle) {\n                    // if set to true and if set from user command we need\n                    // not to include the command\n                    if (typeof window.setImmediate === 'undefined') {\n                        setTimeout(run, 0);\n                    } else {\n                        setImmediate(run);\n                    }\n                } else {\n                    settings.historyState = false;\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: clear the history state\n            // -------------------------------------------------------------\n            clear_history_state: function() {\n                hash_commands = [];\n                save_state = [];\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Switch to the next terminal\n            // -------------------------------------------------------------\n            next: function() {\n                if (terminals.length() === 1) {\n                    return self;\n                } else {\n                    terminals.front().disable();\n                    var next = terminals.rotate().enable();\n                    // 50 provides buffer in viewport\n                    var x = next.offset().top - 50;\n                    $('html,body').animate({scrollTop: x}, 500);\n                    try {\n                        trigger_terminal_change(next);\n                    } catch (e) {\n                        display_exception(e, 'onTerminalChange');\n                    }\n                    return next;\n                }\n            },\n            // -------------------------------------------------------------\n            // :: Make the terminal in focus or blur depending on the first\n            // :: argument. If there is more then one terminal it will\n            // :: switch to next one, if the second argument is set to true\n            // :: the events will be not fired. Used on init\n            // -------------------------------------------------------------\n            focus: function(toggle, silent) {\n                cmd_ready(function ready() {\n                    if (terminals.length() === 1) {\n                        if (toggle === false) {\n                            self.disable(silent);\n                        } else {\n                            self.enable(silent);\n                        }\n                    } else if (toggle === false) {\n                        self.next();\n                    } else {\n                        var front = terminals.front();\n                        if (front !== self) {\n                            // there should be only from terminal enabled but tests\n                            // sometime fail because there where more them one\n                            // where cursor have blink class\n                            terminals.forEach(function(terminal) {\n                                if (terminal !== self && terminal.enabled()) {\n                                    terminal.disable(silent);\n                                }\n                            });\n                            if (!silent) {\n                                try {\n                                    trigger_terminal_change(self);\n                                } catch (e) {\n                                    display_exception(e, 'onTerminalChange');\n                                }\n                            }\n                        }\n                        terminals.set(self);\n                        self.enable(silent);\n                    }\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Disable/Enable terminal that can be enabled by click\n            // -------------------------------------------------------------\n            freeze: function(freeze) {\n                when_ready(function ready() {\n                    if (freeze) {\n                        self.disable();\n                        frozen = true;\n                    } else {\n                        frozen = false;\n                        self.enable();\n                    }\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: check if terminal is frozen\n            // -------------------------------------------------------------\n            frozen: function() {\n                return frozen;\n            },\n            // -------------------------------------------------------------\n            // :: Enable the terminal\n            // -------------------------------------------------------------\n            enable: function(silent) {\n                if (!enabled && !frozen) {\n                    if (num_chars === undefined) {\n                        // enabling first time\n                        self.resize();\n                    }\n                    cmd_ready(function ready() {\n                        var ret;\n                        if (!silent && !enabled) {\n                            fire_event('onFocus');\n                        }\n                        if (!silent && ret === undefined || silent) {\n                            enabled = true;\n                            if (!self.paused()) {\n                                command_line.enable(true);\n                            }\n                        }\n                    });\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: function clear formatting cache if you don't longer need it\n            // :: cache is used if option useCache is set to true\n            // -------------------------------------------------------------\n            clear_cache: 'Map' in root ? function() {\n                format_cache.clear();\n                string_cache.clear();\n                return self;\n            } : function() {\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Disable the terminal\n            // -------------------------------------------------------------\n            disable: function(silent) {\n                cmd_ready(function ready() {\n                    var ret;\n                    if (!silent && enabled) {\n                        ret = fire_event('onBlur');\n                    }\n                    if (!silent && ret === undefined || silent) {\n                        enabled = false;\n                        command_line.disable();\n                    }\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: return true if the terminal is enabled\n            // -------------------------------------------------------------\n            enabled: function() {\n                return enabled;\n            },\n            // -------------------------------------------------------------\n            // :: Return the terminal signature depending on the size of the terminal\n            // -------------------------------------------------------------\n            signature: function() {\n                var cols = self.cols();\n                for (var i = signatures.length; i--;) {\n                    var lengths = signatures[i].map(function(line) {\n                        return line.length;\n                    });\n                    if (Math.max.apply(null, lengths) <= cols) {\n                        return signatures[i].join('\\n') + '\\n';\n                    }\n                }\n                return '';\n            },\n            // -------------------------------------------------------------\n            // :: Return the version number\n            // -------------------------------------------------------------\n            version: function() {\n                return $.terminal.version;\n            },\n            // -------------------------------------------------------------\n            // :: Return actual command line object (jquery object with cmd\n            // :: methods)\n            // -------------------------------------------------------------\n            cmd: function() {\n                return command_line;\n            },\n            // -------------------------------------------------------------\n            // :: Return the current command entered by terminal\n            // -------------------------------------------------------------\n            get_command: function() {\n                return command_line.get();\n            },\n            // -------------------------------------------------------------\n            // :: echo command and previous prompt (used by echo_newline.js)\n            // -------------------------------------------------------------\n            echo_command: function(command) {\n                return echo_command(command);\n            },\n            // -------------------------------------------------------------\n            // :: Change the command line to the new one\n            // -------------------------------------------------------------\n            set_command: function(command, silent) {\n                when_ready(function ready() {\n                    // TODO: refactor to use options - breaking change\n                    if (typeof command !== 'string') {\n                        command = JSON.stringify(command);\n                    }\n                    command_line.set(command, undefined, silent);\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Change position of the command line\n            // -------------------------------------------------------------\n            set_position: function(position, relative) {\n                when_ready(function ready() {\n                    command_line.position(position, relative);\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Return position of the command line\n            // -------------------------------------------------------------\n            get_position: function() {\n                return command_line.position();\n            },\n            // -------------------------------------------------------------\n            // :: Insert text into the command line after the cursor\n            // -------------------------------------------------------------\n            insert: function(string, stay) {\n                if (typeof string === 'string') {\n                    when_ready(function ready() {\n                        var bottom = self.is_bottom();\n                        command_line.insert(string, stay);\n                        if (settings.scrollOnEcho || bottom) {\n                            self.scroll_to_bottom();\n                        }\n                    });\n                    return self;\n                } else {\n                    throw new Error(sprintf(strings().notAString, 'insert'));\n                }\n            },\n            // -------------------------------------------------------------\n            // :: Set the prompt of the command line\n            // -------------------------------------------------------------\n            set_prompt: function(prompt) {\n                when_ready(function ready() {\n                    if (is_function(prompt)) {\n                        command_line.prompt(function(callback) {\n                            prompt.call(self, callback, self);\n                        });\n                    } else {\n                        command_line.prompt(prompt);\n                    }\n                    interpreters.top().prompt = prompt;\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Return the prompt used by the terminal\n            // -------------------------------------------------------------\n            get_prompt: function() {\n                return interpreters.top().prompt;\n                // command_line.prompt(); - can be a wrapper\n                //return command_line.prompt();\n            },\n            // -------------------------------------------------------------\n            // :: Enable or Disable mask depedning on the passed argument\n            // :: the mask can also be character (in fact it will work with\n            // :: strings longer then one)\n            // -------------------------------------------------------------\n            set_mask: function(mask) {\n                when_ready(function ready() {\n                    command_line.mask(mask === true ? settings.maskChar : mask);\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Return the ouput of the terminal as text\n            // -------------------------------------------------------------\n            get_output: function(raw) {\n                if (raw) {\n                    return lines;\n                } else {\n                    return $.map(lines, function(item) {\n                        return is_function(item[0]) ? item[0]() : item[0];\n                    }).join('\\n');\n                }\n            },\n            // -------------------------------------------------------------\n            // :: Recalculate and redraw everything\n            // -------------------------------------------------------------\n            resize: function(width, height) {\n                if (!self.is(':visible')) {\n                    // delay resize if terminal not visible\n                    self.stopTime('resize');\n                    self.oneTime(500, 'resize', function() {\n                        self.resize(width, height);\n                    });\n                } else {\n                    if (width && height) {\n                        self.width(width);\n                        self.height(height);\n                    }\n                    width = self.width();\n                    height = self.height();\n                    if (typeof settings.numChars !== 'undefined' ||\n                        typeof settings.numRows !== 'undefined') {\n                        command_line.resize(settings.numChars);\n                        self.refresh();\n                        fire_event('onResize');\n                        return;\n                    }\n                    var new_num_chars = get_num_chars(self, char_size);\n                    var new_num_rows = get_num_rows(self, char_size);\n                    // only if number of chars changed\n                    if (new_num_chars !== num_chars ||\n                        new_num_rows !== num_rows) {\n                        num_chars = new_num_chars;\n                        num_rows = new_num_rows;\n                        command_line.resize(num_chars);\n                        self.refresh();\n                        fire_event('onResize');\n                    }\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: redraw the terminal\n            // -------------------------------------------------------------\n            refresh: function() {\n                if (char_size.width !== 0) {\n                    self[0].style.setProperty('--char-width', char_size.width);\n                }\n                redraw({\n                    scroll: false,\n                    update: true\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Flush the output to the terminal\n            // -------------------------------------------------------------\n            flush: function(options) {\n                options = $.extend({}, {\n                    update: false,\n                    scroll: true\n                }, options || {});\n                try {\n                    var bottom = self.is_bottom();\n                    var wrapper;\n                    // print all lines\n                    var first = true;\n                    var appending_to_partial = false;\n                    var partial = $();\n                    if (!options.update) {\n                        partial = self.find('.partial');\n                    }\n                    while (output_buffer.length) {\n                        var data = output_buffer.shift();\n                        if (data === NEW_LINE) {\n                            if (!partial.length) {\n                                wrapper = $('<div/>');\n                            } else if (first) {\n                                appending_to_partial = true;\n                                wrapper = partial;\n                            }\n                            first = false;\n                        } else if ($.isPlainObject(data) && is_function(data.finalize)) {\n                            // this is finalize function from echo\n                            if (options.update) {\n                                var selector = '> div[data-index=' + data.index + ']';\n                                var node = output.find(selector);\n                                if (node.html() !== wrapper.html()) {\n                                    node.replaceWith(wrapper);\n                                }\n                            } else {\n                                wrapper.appendTo(output);\n                            }\n                            wrapper.attr('data-index', data.index);\n                            appending_to_partial = !data.newline;\n                            wrapper.toggleClass('partial', appending_to_partial);\n                            data.finalize(wrapper);\n                        } else {\n                            var line = data.line;\n                            var div;\n                            if (appending_to_partial) {\n                                div = wrapper.children().last().append(line);\n                                appending_to_partial = false;\n                            } else {\n                                div = $('<div/>').html(line);\n                                if (data.newline) {\n                                    div.addClass('cmd-end-line');\n                                }\n                                wrapper.append(div);\n                            }\n                            // width = '100%' does some weird extra magic\n                            // that makes the height correct. Any other\n                            // value doesn't work.\n                            div.css('width', '100%');\n                        }\n                    }\n                    var cmd_prompt = self.find('.cmd-prompt');\n                    var cmd_outer = self.find('.cmd');\n                    partial = self.find('.partial');\n                    if (partial.length === 0) {\n                        cmd_prompt.css('margin-left', 0);\n                        cmd_outer.css('top', 0);\n                        command_line.__set_prompt_margin(0);\n                    } else {\n                        var last_row = partial.children().last();\n                        // Remove width='100%' for two reasons:\n                        // 1. so we can measure the width right here\n                        // 2. so that the background of this last line of output\n                        //    doesn't occlude the first line of input to the right\n                        last_row.css('width', '');\n                        var last_row_rect = last_row[0].getBoundingClientRect();\n                        var partial_width = last_row_rect.width;\n                        // Shift command prompt up one line and to the right\n                        // enough so that it appears directly next to the\n                        // partially constructed output line\n                        cmd_prompt.css('margin-left', partial_width);\n                        cmd_outer.css('top', -last_row_rect.height);\n                        // Measure length of partial line in characters\n                        var char_width = self.geometry().char.width;\n                        var prompt_margin = Math.round(partial_width / char_width);\n                        command_line.__set_prompt_margin(prompt_margin);\n                    }\n                    limit_lines();\n                    fire_event('onFlush');\n                    var cmd_cursor = self.find('.cmd-cursor');\n                    var offset = self.find('.cmd').offset();\n                    var self_offset = self.offset();\n                    setTimeout(function() {\n                        css(self[0], {\n                            '--terminal-height': self.height(),\n                            '--terminal-x': offset.left - self_offset.left,\n                            '--terminal-y': offset.top - self_offset.top,\n                            '--terminal-scroll': self.prop('scrollTop')\n                        });\n                        // Firefox won't reflow the cursor automatically, so\n                        // hide it briefly then reshow it\n                        cmd_cursor.hide();\n                        setTimeout(function() {\n                            cmd_cursor.show();\n                        }, 0);\n                    }, 0);\n                    if ((settings.scrollOnEcho && options.scroll) || bottom) {\n                        self.scroll_to_bottom();\n                    }\n                } catch (e1) {\n                    if (is_function(settings.exceptionHandler)) {\n                        try {\n                            settings.exceptionHandler.call(self, e1, 'TERMINAL (Flush)');\n                        } catch (e2) {\n                            settings.exceptionHandler = $.noop;\n                            alert_exception('[exceptionHandler]', e2);\n                        }\n                    } else {\n                        alert_exception('[Flush]', e1);\n                    }\n                } finally {\n                    output_buffer = [];\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Update the output line - line number can be negative\n            // -------------------------------------------------------------\n            update: function(line, value, options) {\n                when_ready(function ready() {\n                    if (line < 0) {\n                        line = lines.length + line; // yes +\n                    }\n                    if (!lines[line]) {\n                        self.error('Invalid line number ' + line);\n                    } else if (value === null) {\n                        lines.splice(line, 1);\n                        output.find('[data-index=' + line + ']').remove();\n                    } else {\n                        value = preprocess_value(value, {\n                            update: true,\n                            line: line\n                        });\n                        if (value === false) {\n                            return self;\n                        }\n                        unpromise(value, function(value) {\n                            var ret = prepare_render(value, options);\n                            if (ret) {\n                                value = ret[0];\n                                options = ret[1];\n                            }\n                            lines[line][0] = value;\n                            if (options) {\n                                lines[line][1] = $.extend(lines[line][1], options);\n                            }\n                            var next = process_line({\n                                value: value,\n                                index: line,\n                                options: lines[line][1]\n                            });\n                            // process_line can return a promise\n                            // value is function that resolve to promise\n                            unpromise(next, function() {\n                                // trigger flush even if next is undefined\n                                self.flush({\n                                    scroll: false,\n                                    update: true\n                                });\n                            });\n                        });\n                    }\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: convenience method for removing selected line\n            // -------------------------------------------------------------\n            remove_line: function(line) {\n                return self.update(line, null);\n            },\n            // -------------------------------------------------------------\n            // :: return index of last line in case when you need to update\n            // :: after something is echo on the terminal\n            // -------------------------------------------------------------\n            last_index: function() {\n                return lines.length - 1;\n            },\n            // -------------------------------------------------------------\n            // :: Print data to the terminal output. It can have options\n            // :: * flush - indicate that arg should be send to DOM\n            // :: * raw - indicate if it should handle input as html\n            // :: * finalize - function call with container div\n            // :: * keepWords - inform how to wrap text\n            // :: * formatters - inform function if it should use formatters\n            // ::   on input string - good to prevent XSS when you want\n            // ::   advanced server side controling of terminal\n            // :: you can echo: promise, function, strings array or string\n            // -------------------------------------------------------------\n            echo: function(arg, options) {\n                var arg_defined = arguments.length > 0;\n                function echo(arg) {\n                    try {\n                        var locals = $.extend({\n                            flush: true,\n                            exec: true,\n                            raw: settings.raw,\n                            finalize: $.noop,\n                            unmount: $.noop,\n                            keepWords: false,\n                            invokeMethods: settings.invokeMethods,\n                            onClear: null,\n                            formatters: true,\n                            allowedAttributes: settings.allowedAttributes,\n                            newline: true\n                        }, options || {});\n                        // finalize function is passed around and invoked\n                        // in terminal::flush after content is added to DOM\n                        (function(finalize) {\n                            locals.finalize = function(div) {\n                                if (locals.raw) {\n                                    div.addClass('raw');\n                                }\n                                try {\n                                    if (is_function(finalize)) {\n                                        finalize.call(self, div);\n                                    }\n                                    div.find('img').each(function() {\n                                        var self = $(this);\n                                        var img = new Image();\n                                        img.onerror = function() {\n                                            self.replaceWith(use_broken_image);\n                                        };\n                                        img.src = this.src;\n                                    });\n                                } catch (e) {\n                                    display_exception(e, 'USER:echo(finalize)');\n                                    finalize = null;\n                                }\n                            };\n                        })(locals.finalize);\n                        if (locals.flush) {\n                            // flush buffer if there was no flush after previous echo\n                            if (output_buffer.length) {\n                                self.flush();\n                            }\n                        }\n                        if (fire_event('onBeforeEcho', [arg]) === false) {\n                            return;\n                        }\n                        var value;\n                        if (typeof arg === 'function') {\n                            value = arg.bind(self);\n                        } else if (typeof arg === 'undefined') {\n                            if (arg_defined) {\n                                value = String(arg);\n                            } else {\n                                value = '';\n                            }\n                        } else {\n                            var ret = preprocess_value(arg, {});\n                            if (ret === false) {\n                                return self;\n                            }\n                            value = ret;\n                        }\n                        unpromise(value, function(value) {\n                            if (render(value, locals)) {\n                                return self;\n                            }\n                            var last_line = lines[lines.length - 1];\n                            var last_newline = lines.length === 0 || last_line[1].newline;\n                            var index = lines.length;\n                            if (!last_newline) {\n                                index--;\n                            }\n                            var next = process_line({\n                                value: value,\n                                options: locals,\n                                index: index\n                            });\n                            // queue async functions in echo\n                            if (next && next.then) {\n                                var defer = new DelayQueue();\n                                echo_ready = ready(defer);\n                            }\n                            // Did previous value end in newline?\n                            if (last_newline) {\n                                lines.push([value, $.extend({exec: false}, locals)]);\n                            } else {\n                                // If not append current value to it\n                                var old_value = last_line[0];\n                                var string_old_val = stringify_value(old_value);\n                                var string_val = stringify_value(value);\n                                last_line[0] = string_old_val + string_val;\n                                // Update newline field\n                                last_line[1].newline = locals.newline;\n                            }\n                            unpromise(next, function() {\n                                // extended commands should be processed only\n                                // once in echo and not on redraw\n                                if (locals.flush) {\n                                    self.flush();\n                                    fire_event('onAfterEcho', [arg]);\n                                }\n                                if (defer) {\n                                    defer.resolve();\n                                    echo_ready = null;\n                                }\n                            });\n                        });\n                    } catch (e) {\n                        // if echo throw exception we can't use error to\n                        // display that exception\n                        if (is_function(settings.exceptionHandler)) {\n                            settings.exceptionHandler.call(self, e, 'TERMINAL (echo)');\n                        } else {\n                            alert_exception('[Terminal.echo]', e);\n                        }\n                    }\n                }\n                if (arg !== undefined && is_function(arg.then)) {\n                    $.when(arg).done(echo).catch(make_label_error('Echo'));\n                } else if (echo_ready) {\n                    echo_ready(function() {\n                        echo(arg);\n                    });\n                } else {\n                    echo(arg);\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            typing: function(type, speed, string, finish) {\n                var d = new $.Deferred();\n                function done() {\n                    d.resolve();\n                    if (is_function(finish)) {\n                        finish.call(self);\n                    }\n                }\n                when_ready(function ready() {\n                    if (['prompt', 'echo'].indexOf(type) >= 0) {\n                        if (type === 'prompt') {\n                            typed_prompt(string, speed, done);\n                        } else if (type === 'echo') {\n                            typed_message(string, speed, done);\n                        }\n                    } else {\n                        d.reject('Invalid type only `echo` and `prompt` are supported');\n                    }\n                });\n                return d.promise();\n            },\n            // -------------------------------------------------------------\n            // :: echo red text\n            // -------------------------------------------------------------\n            error: function(message, options) {\n                options = $.extend({}, options, {raw: false, formatters: false});\n                function format(string) {\n                    if (typeof string !== 'string') {\n                        string = String(string);\n                    }\n                    // quick hack to fix trailing backslash\n                    var str = $.terminal.escape_brackets(string).\n                        replace(/\\\\$/, '&#92;').\n                        replace(url_re, ']$1[[;;;terminal-error]');\n                    return '[[;;;terminal-error]' + str + ']';\n                }\n                if (typeof message === 'function') {\n                    return self.echo(function() {\n                        return format(message.call(self));\n                    }, options);\n                }\n                if (message && message.then) {\n                    message.then(function(string) {\n                        self.echo(format(string));\n                    }).catch(make_label_error('Echo Error'));\n                    return self;\n                }\n                return self.echo(format(message), options);\n            },\n            // -------------------------------------------------------------\n            // :: Display Exception on terminal\n            // -------------------------------------------------------------\n            exception: function(e, label) {\n                var message = exception_message(e);\n                if (label) {\n                    message = '&#91;' + label + '&#93;: ' + message;\n                }\n                if (message) {\n                    self.error(message, {\n                        finalize: function(div) {\n                            div.addClass('terminal-exception terminal-message');\n                        },\n                        keepWords: true\n                    });\n                }\n                if (typeof e.fileName === 'string') {\n                    // display filename and line which throw exeption\n                    self.pause(settings.softPause);\n                    $.get(e.fileName, function(file) {\n                        var num = e.lineNumber - 1;\n                        var line = file.split('\\n')[num];\n                        if (line) {\n                            self.error('[' + e.lineNumber + ']: ' + line);\n                        }\n                        self.resume();\n                    }, 'text');\n                }\n                if (e.stack) {\n                    var stack = $.terminal.escape_brackets(e.stack);\n                    self.echo(stack.split(/\\n/g).map(function(trace) {\n                        // nested formatting will handle urls but that formatting\n                        // can be removed - this code was created before\n                        // that formatting existed (see commit ce01c3f5)\n                        return '[[;;;terminal-error]' +\n                            trace.replace(url_re, function(url) {\n                                return ']' + url + '[[;;;terminal-error]';\n                            }) + ']';\n                    }).join('\\n'), {\n                        finalize: function(div) {\n                            div.addClass('terminal-exception terminal-stack-trace');\n                        },\n                        formatters: false\n                    });\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Scroll Div that holds the terminal\n            // -------------------------------------------------------------\n            scroll: function(amount) {\n                var pos;\n                amount = Math.round(amount);\n                if (self.prop) { // work with jQuery > 1.6\n                    if (amount > self.prop('scrollTop') && amount > 0) {\n                        self.prop('scrollTop', 0);\n                    }\n                    pos = self.prop('scrollTop');\n                    self.scrollTop(pos + amount);\n                } else {\n                    if (amount > self.prop('scrollTop') && amount > 0) {\n                        self.prop('scrollTop', 0);\n                    }\n                    pos = self.prop('scrollTop');\n                    self.scrollTop(pos + amount);\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Exit all interpreters and logout. The function will throw\n            // :: exception if there is no login provided\n            // -------------------------------------------------------------\n            logout: function(local) {\n                if (in_login) {\n                    throw new Error(sprintf(strings().notWhileLogin, 'logout'));\n                }\n                when_ready(function ready() {\n                    if (local) {\n                        var login = logins.pop();\n                        self.set_token(undefined, true);\n                        self.login.apply(self, login);\n                    } else if (interpreters.size() === 1 && self.token()) {\n                        self.logout(true);\n                    } else {\n                        while (interpreters.size() > 1) {\n                            // pop will call global_logout that will call login\n                            // and size will be > 0; this is workaround the problem\n                            if (self.token()) {\n                                self.logout(true).pop().pop();\n                            } else {\n                                self.pop();\n                            }\n                        }\n                    }\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Function returns the token returned by callback function\n            // :: in login function. It does nothing (return undefined) if\n            // :: there is no login\n            // -------------------------------------------------------------\n            token: function(local) {\n                return storage.get(self.prefix_name(local) + '_token');\n            },\n            // -------------------------------------------------------------\n            // :: Function sets the token to the supplied value. This function\n            // :: works regardless of wherer settings.login is supplied\n            // -------------------------------------------------------------\n            set_token: function(token, local) {\n                var name = self.prefix_name(local) + '_token';\n                if (typeof token === 'undefined') {\n                    storage.remove(name);\n                } else {\n                    storage.set(name, token);\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Function get the token either set by the login method or\n            // :: by the set_token method.\n            // -------------------------------------------------------------\n            get_token: function(local) {\n                return self.token(local);\n            },\n            // -------------------------------------------------------------\n            // :: Function return Login name entered by the user\n            // -------------------------------------------------------------\n            login_name: function(local) {\n                return storage.get(self.prefix_name(local) + '_login');\n            },\n            // -------------------------------------------------------------\n            // :: Function returns the name of current interpreter\n            // -------------------------------------------------------------\n            name: function() {\n                return interpreters.top().name;\n            },\n            // -------------------------------------------------------------\n            // :: Function return prefix name for login/token\n            // -------------------------------------------------------------\n            prefix_name: function(local) {\n                var name = (settings.name ? settings.name + '_' : '') +\n                    terminal_id;\n                if (local && interpreters.size() > 1) {\n                    var local_name = interpreters.map(function(intrp) {\n                        return intrp.name || '';\n                    }).slice(1).join('_');\n                    if (local_name) {\n                        name += '_' + local_name;\n                    }\n                }\n                return name;\n            },\n            // -------------------------------------------------------------\n            // :: wrapper for common use case\n            // -------------------------------------------------------------\n            read: function(message, success, cancel) {\n                // return from read() should not pause terminal\n                force_awake = true;\n                var defer = jQuery.Deferred();\n                var read = false;\n                self.push(function(string) {\n                    read = true;\n                    defer.resolve(string);\n                    if (is_function(success)) {\n                        success(string);\n                    }\n                    self.pop();\n                    if (settings.history) {\n                        command_line.history().enable();\n                    }\n                }, {\n                    name: 'read',\n                    history: false,\n                    prompt: message || '',\n                    onExit: function() {\n                        if (!read) {\n                            defer.reject();\n                            if (is_function(cancel)) {\n                                cancel();\n                            }\n                        }\n                    }\n                });\n                if (settings.history) {\n                    command_line.history().disable();\n                }\n                return defer.promise();\n            },\n            // -------------------------------------------------------------\n            // :: Push a new interenter on the Stack\n            // -------------------------------------------------------------\n            push: function(interpreter, options) {\n                cmd_ready(function ready() {\n                    options = options || {};\n                    var defaults = {\n                        infiniteLogin: false\n                    };\n                    var push_settings = $.extend({}, defaults, options);\n                    if (!push_settings.name && prev_command) {\n                        // push is called in login\n                        push_settings.name = prev_command.name;\n                    }\n                    if (push_settings.prompt === undefined) {\n                        push_settings.prompt = (push_settings.name || '>') + ' ';\n                    }\n                    // names.push(options.name);\n                    var top = interpreters.top();\n                    if (top) {\n                        top.mask = command_line.mask();\n                    }\n                    var was_paused = paused;\n                    function init() {\n                        fire_event('onPush', [top, interpreters.top()]);\n                        prepare_top_interpreter();\n                    }\n                    // self.pause();\n                    make_interpreter(interpreter, options.login, function(ret) {\n                        // result is object with interpreter and completion properties\n                        interpreters.push($.extend({}, ret, push_settings));\n                        if (push_settings.completion === true) {\n                            if ($.isArray(ret.completion)) {\n                                interpreters.top().completion = ret.completion;\n                            } else if (!ret.completion) {\n                                interpreters.top().completion = false;\n                            }\n                        }\n                        if (push_settings.login) {\n                            var error;\n                            var type = get_type(push_settings.login);\n                            if (type === 'function') {\n                                error = push_settings.infiniteLogin ? $.noop : self.pop;\n                                self.login(\n                                    push_settings.login,\n                                    push_settings.infiniteLogin,\n                                    init,\n                                    error\n                                );\n                            } else if (get_type(interpreter) === 'string' &&\n                                       type === 'string' || type === 'boolean') {\n                                error = push_settings.infiniteLogin ? $.noop : self.pop;\n                                self.login(\n                                    make_json_rpc_login(\n                                        interpreter,\n                                        push_settings.login\n                                    ),\n                                    push_settings.infiniteLogin,\n                                    init,\n                                    error\n                                );\n                            }\n                        } else {\n                            init();\n                        }\n                        if (!was_paused && self.enabled()) {\n                            self.resume();\n                        }\n                    });\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Remove the last interpreter from the Stack\n            // -------------------------------------------------------------\n            pop: function(string, silent) {\n                if (string !== undefined) {\n                    echo_command(string);\n                }\n                var token = self.token(true);\n                var top;\n                if (interpreters.size() === 1) {\n                    top = interpreters.top();\n                    if (settings.login) {\n                        if (!silent) {\n                            fire_event('onPop', [top, null]);\n                        }\n                        global_logout();\n                        fire_event('onExit');\n                    } else {\n                        self.error(strings().canExitError);\n                    }\n                } else {\n                    if (token) {\n                        clear_loging_storage();\n                    }\n                    var current = interpreters.pop();\n                    top = interpreters.top();\n                    prepare_top_interpreter();\n                    // restore mask\n                    self.set_mask(top.mask);\n                    if (!silent) {\n                        fire_event('onPop', [current, top]);\n                    }\n                    // we check in case if you don't pop from password interpreter\n                    if (in_login && self.get_prompt() !== strings().login + ': ') {\n                        in_login = false;\n                    }\n                    if (is_function(current.onExit)) {\n                        try {\n                            current.onExit.call(self, self);\n                        } catch (e) {\n                            current.onExit = $.noop;\n                            display_exception(e, 'onExit');\n                        }\n                    }\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Change terminal option(s) at runtime\n            // -------------------------------------------------------------\n            option: function(object_or_name, value) {\n                if (typeof value === 'undefined') {\n                    if (typeof object_or_name === 'string') {\n                        return settings[object_or_name];\n                    } else if (typeof object_or_name === 'object') {\n                        $.each(object_or_name, function(key, value) {\n                            settings[key] = value;\n                        });\n                    }\n                } else {\n                    settings[object_or_name] = value;\n                    if (object_or_name.match(/^num(Chars|Rows)$/)) {\n                        redraw();\n                    }\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: invoke keydown shorcut\n            // -------------------------------------------------------------\n            invoke_key: function(shortcut) {\n                command_line.invoke_key(shortcut);\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: change terminal keymap at runtime\n            // -------------------------------------------------------------\n            keymap: function(keymap, fn) {\n                if (arguments.length === 0) {\n                    return command_line.keymap();\n                }\n                if (typeof fn === 'undefined') {\n                    if (typeof keymap === 'string') {\n                        return command_line.keymap(keymap);\n                    } else if ($.isPlainObject(keymap)) {\n                        // argument is an object\n                        keymap = $.extend(\n                            {},\n                            terminal_init_keymap,\n                            $.omap(keymap || {}, function(key, fn) {\n                                if (!terminal_init_keymap[key]) {\n                                    return fn.bind(self);\n                                }\n                                return function(e, original) {\n                                    // new keymap function will get default as 2nd arg\n                                    return fn.call(self, e, function() {\n                                        return terminal_init_keymap[key](e, original);\n                                    });\n                                };\n                            })\n                        );\n                        command_line.keymap(null).keymap(keymap);\n                    }\n                } else if (typeof fn === 'function') {\n                    var key = keymap;\n                    if (!terminal_init_keymap[key]) {\n                        command_line.keymap(key, fn.bind(self));\n                    } else {\n                        command_line.keymap(key, function(e, original) {\n                            return fn.call(self, e, function() {\n                                return terminal_init_keymap[key](e, original);\n                            });\n                        });\n                    }\n                }\n            },\n            // -------------------------------------------------------------\n            // :: Return how deep you are in nested interpreters\n            // -------------------------------------------------------------\n            level: function() {\n                return interpreters.size();\n            },\n            // -------------------------------------------------------------\n            // :: Reinitialize the terminal\n            // -------------------------------------------------------------\n            reset: function() {\n                when_ready(function ready() {\n                    self.clear();\n                    while (interpreters.size() > 1) {\n                        interpreters.pop();\n                    }\n                    initialize();\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Remove all local storage left by terminal, it will not\n            // :: logout you until you refresh the browser\n            // -------------------------------------------------------------\n            purge: function() {\n                when_ready(function ready() {\n                    var prefix = self.prefix_name() + '_';\n                    var names = storage.get(prefix + 'interpreters');\n                    if (names) {\n                        $.each(JSON.parse(names), function(_, name) {\n                            storage.remove(name + '_commands');\n                            storage.remove(name + '_token');\n                            storage.remove(name + '_login');\n                        });\n                    }\n                    command_line.purge();\n                    storage.remove(prefix + 'interpreters');\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Remove all events and DOM nodes left by terminal, it will\n            // :: not purge the terminal so you will have the same state\n            // :: when you refresh the browser\n            // -------------------------------------------------------------\n            destroy: function() {\n                when_ready(function ready() {\n                    command_line.destroy().remove();\n                    self.resizer('unbind');\n                    self.touch_scroll('unbind');\n                    font_resizer.resizer('unbind').remove();\n                    $(document).unbind('.terminal_' + self.id());\n                    $(window).unbind('.terminal_' + self.id());\n                    self.unbind('click wheel mousewheel mousedown mouseup');\n                    self.removeData('terminal').removeClass('terminal').\n                        unbind('.terminal');\n                    if (settings.width) {\n                        self.css('width', '');\n                    }\n                    if (settings.height) {\n                        self.css('height', '');\n                    }\n                    $(window).off('blur', blur_terminal).\n                        off('focus', focus_terminal);\n                    self.find('.terminal-fill, .terminal-font').remove();\n                    self.stopTime();\n                    terminals.remove(terminal_id);\n                    if (visibility_observer) {\n                        if (visibility_observer.unobserve) {\n                            visibility_observer.unobserve(self[0]);\n                        } else {\n                            clearInterval(visibility_observer);\n                        }\n                    }\n                    var scroll_marker = self.find('.terminal-scroll-marker');\n                    if (is_bottom_observer) {\n                        is_bottom_observer.unobserve(scroll_marker[0]);\n                    }\n                    scroll_marker.remove();\n                    if (mutation_observer) {\n                        mutation_observer.disconnect();\n                    }\n                    if (!terminals.length()) {\n                        $(window).off('hashchange');\n                    }\n                    if (is_mobile) {\n                        self.off([\n                            'touchstart.terminal',\n                            'touchmove.terminal',\n                            'touchend.terminal'\n                        ].join(' '));\n                    }\n                    output.remove();\n                    wrapper.remove();\n                    if (body_terminal) {\n                        var $body = $(body_terminal);\n                        if ($body.attr('class') === 'full-screen-terminal') {\n                            $body.removeAttr('class');\n                        } else {\n                            $body.removeClass('full-screen-terminal');\n                        }\n                        self.remove();\n                    }\n                    defunct = true;\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: ref: https://stackoverflow.com/a/18927969/387194\n            // -------------------------------------------------------------\n            scroll_to: function(elem) {\n                var scroll = self.scrollTop() - self.offset().top + $(elem).offset().top;\n                self.scrollTop(scroll);\n                return self;\n            },\n            // -------------------------------------------------------------\n            scroll_to_bottom: function() {\n                var scrollHeight;\n                if (self.prop) {\n                    scrollHeight = self.prop('scrollHeight');\n                } else {\n                    scrollHeight = self.attr('scrollHeight');\n                }\n                self.scrollTop(scrollHeight);\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: return true if terminal div or body is at the bottom\n            // :: is use scrollBottomOffset option as margin for the check\n            // -------------------------------------------------------------\n            is_bottom: function() {\n                if (settings.scrollBottomOffset === -1) {\n                    return false;\n                } else if (typeof is_bottom_detected === 'boolean') {\n                    return is_bottom_detected;\n                } else {\n                    var scroll_height, scroll_top, height;\n                    scroll_height = self[0].scrollHeight;\n                    scroll_top = self[0].scrollTop;\n                    height = self[0].offsetHeight;\n                    var limit = scroll_height - settings.scrollBottomOffset;\n                    return scroll_top + height > limit;\n                }\n            }\n        }, function(name, fun) {\n            // wrap all functions and display execptions\n            return function() {\n                if (defunct) {\n                    if (!settings.exceptionHandler) {\n                        throw new $.terminal.Exception(strings().defunctTerminal);\n                    }\n                }\n                try {\n                    return fun.apply(self, [].slice.apply(arguments));\n                } catch (e) {\n                    // exec catch by command (resume call exec)\n                    if (name !== 'exec' && name !== 'resume') {\n                        display_exception(e, e.type || 'TERMINAL', true);\n                    }\n                    if (!settings.exceptionHandler) {\n                        throw e;\n                    }\n                }\n            };\n        }));\n        // -----------------------------------------------------------------\n        // :: INIT CODE\n        // -----------------------------------------------------------------\n        if (self.length === 0) {\n            var msg = sprintf(strings().invalidSelector);\n            throw new $.terminal.Exception(msg);\n        }\n        self.data('terminal', self);\n        // synchronize the echo calls (used for async functions) that need\n        // to be called in order\n        var echo_ready;\n        // var names = []; // stack if interpreter names\n        var prev_command; // used for name on the terminal if not defined\n        var prev_exec_cmd;\n        var tab_count = 0; // for tab completion\n        var output; // .terminal-output jquery object\n        var terminal_id = terminals.length();\n        var force_awake = false; // flag used to don't pause when user return read() call\n        var num_chars; // numer of chars in line\n        var num_rows; // number of lines that fit without scrollbar\n        var command; // for tab completion\n        var logins = new Stack(); // stack of logins\n        var command_queue = new DelayQueue();\n        var animating = false; // true on typing animation\n        var init_queue = new DelayQueue();\n        var when_ready = ready(init_queue);\n        var cmd_ready = ready(command_queue);\n        var is_bottom_detected;\n        var is_bottom_observer;\n        var in_login = false;// some Methods should not be called when login\n        // TODO: Try to use mutex like counter for pause/resume\n        var onPause = $.noop;// used to indicate that user call pause onInit\n        var old_width, old_height;\n        var delayed_commands = []; // used when exec commands while paused\n        var settings = $.extend(\n            {},\n            $.terminal.defaults,\n            {\n                name: self.selector,\n                exit: !!(options && options.login || !options)\n            },\n            options || {}\n        );\n        if (typeof settings.width === 'number') {\n            self.width(settings.width);\n        }\n        if (typeof settings.height === 'number') {\n            self.height(settings.height);\n        }\n        var char_size = get_char_size(self);\n        // this is needed when terminal have selector with --size that is not\n        // bare .terminal so fake terminal will not get the proper size #602\n        var need_char_size_recalculate = !terminal_ready(self);\n        // so it's the same as in TypeScript definition for options\n        delete settings.formatters;\n        // used to throw error when calling methods on destroyed terminal\n        var defunct = false;\n        var lines = [];\n        var storage = new StorageHelper(settings.memory);\n        var enabled = settings.enabled;\n        var frozen = false;\n        var paused = false;\n        var autologin = true; // set to false if onBeforeLogin return false\n        var interpreters;\n        var command_line;\n        var old_enabled;\n        var visibility_observer;\n        var mutation_observer;\n        // backward compatibility\n        if (settings.ignoreSystemDescribe === true) {\n            settings.describe = false;\n        }\n        // register ajaxSend for cancel requests on CTRL+D\n        $(document).bind('ajaxSend.terminal_' + self.id(), function(e, xhr) {\n            requests.push(xhr);\n        });\n        var wrapper = $('<div class=\"terminal-wrapper\"/>').appendTo(self);\n        $(broken_image).hide().appendTo(wrapper);\n        var font_resizer = $('<div class=\"terminal-font\">&nbsp;</div>').appendTo(self);\n        var fill = $('<div class=\"terminal-fill\"/>').appendTo(self);\n        output = $('<div>').addClass('terminal-output').attr('role', 'log')\n            .appendTo(wrapper);\n        self.addClass('terminal');\n        // before login event\n        if (settings.login && fire_event('onBeforeLogin') === false) {\n            autologin = false;\n        }\n        // create json-rpc authentication function\n        var base_interpreter;\n        if (typeof init_interpreter === 'string') {\n            base_interpreter = init_interpreter;\n        } else if (is_array(init_interpreter)) {\n            // first JSON-RPC\n            for (var i = 0, len = init_interpreter.length; i < len; ++i) {\n                if (typeof init_interpreter[i] === 'string') {\n                    base_interpreter = init_interpreter[i];\n                    break;\n                }\n            }\n        }\n        var global_login_fn;\n        if (is_function(settings.login)) {\n            global_login_fn = settings.login;\n        } else if (base_interpreter &&\n            (typeof settings.login === 'string' || settings.login === true)) {\n            global_login_fn = make_json_rpc_login(base_interpreter, settings.login);\n        }\n        terminals.append(self);\n        function focus_terminal() {\n            if (old_enabled) {\n                self.focus();\n                self.scroll_to_bottom();\n            }\n        }\n        // -------------------------------------------------------------------------------\n        function blur_terminal() {\n            old_enabled = enabled;\n            self.disable().find('.cmd textarea').trigger('blur', [true]);\n        }\n        // -------------------------------------------------------------------------------\n        function stringify_value(value) {\n            if (is_function(value)) {\n                value = value();\n            }\n            if (value && is_function(value.then)) {\n                return value.then(stringify_value);\n            }\n            if (get_type(value) !== 'string') {\n                if (is_function(settings.parseObject)) {\n                    var ret = settings.parseObject(value);\n                    if (get_type(ret) === 'string') {\n                        value = ret;\n                    }\n                } else if (is_array(value)) {\n                    value = $.terminal.columns(value, self.cols(), settings.tabs);\n                } else {\n                    value = String(value);\n                }\n            }\n            return value;\n        }\n        // -------------------------------------------------------------------------------\n        function context_callback_proxy(fn) {\n            if (fn.proxy) {\n                return fn;\n            }\n            var wrapper = function(callback) {\n                return fn.call(self, callback, self);\n            };\n            wrapper.proxy = true;\n            return wrapper;\n        }\n        // -------------------------------------------------------------------------------\n        // paste event is not testable in node\n        // istanbul ignore next\n        function paste_event(e) {\n            e = e.originalEvent;\n            // we don't care about browser that don't support clipboard data\n            // those browser simple will not have this feature normal paste\n            // is cross-browser and it's handled by cmd plugin\n            function is_type(item, type) {\n                return item.type.indexOf(type) !== -1;\n            }\n            function echo_image(image) {\n                self.echo('<img src=\"' + image + '\"/>', {raw: true});\n            }\n            function data_uri(blob) {\n                var URL = window.URL || window.webkitURL;\n                return URL.createObjectURL(blob);\n            }\n            function echo(object, ignoreEvents) {\n                if (!ignoreEvents) {\n                    var event = {\n                        target: self\n                    };\n                    if (typeof object === 'string') {\n                        event.text = object;\n                    } else if (object instanceof Blob) {\n                        event.image = data_uri(object);\n                    }\n                    var ret = fire_event('onPaste', [event]);\n                    if (ret) {\n                        if (is_function(ret.then || ret.done)) {\n                            return (ret.then || ret.done).call(ret, function(ret) {\n                                echo(ret, true);\n                            });\n                        } else {\n                            echo(ret, true);\n                        }\n                    } else if (ret !== false) {\n                        echo(event.image || event.text, true);\n                    }\n                } else if (object instanceof Blob) {\n                    echo_image(data_uri(object));\n                } else if (typeof object === 'string') {\n                    if (object.match(/^(data:|blob:)/)) {\n                        echo_image(object);\n                    } else {\n                        self.insert(object);\n                    }\n                }\n            }\n            if (e.clipboardData) {\n                if (self.enabled()) {\n                    var items = e.clipboardData.items;\n                    if (items) {\n                        for (var i = 0; i < items.length; i++) {\n                            if (is_type(items[i], 'image') && settings.pasteImage) {\n                                var blob = items[i].getAsFile();\n                                echo(blob);\n                            } else if (is_type(items[i], 'text/plain')) {\n                                items[i].getAsString(function(text) {\n                                    echo(text.replace(/\\r/g, ''));\n                                });\n                            }\n                        }\n                    } else if (e.clipboardData.getData) {\n                        var text = e.clipboardData.getData('text/plain');\n                        echo(text.replace(/\\r/g, ''));\n                    }\n                    return false;\n                }\n            }\n        }\n        $(document).on('paste.terminal_' + self.id(), paste_event);\n        var terminal_init_keymap = $.extend(\n            {},\n            keymap,\n            $.omap(settings.keymap || {}, function(key, fn) {\n                if (!keymap[key]) {\n                    return fn.bind(self);\n                }\n                return function(e, original) {\n                    // new keymap function will get default as 2nd argument\n                    return fn.call(self, e, function() {\n                        return keymap[key](e, original);\n                    });\n                };\n            })\n        );\n        make_interpreter(init_interpreter, settings.login, function(interpreter) {\n            if (settings.completion && typeof settings.completion !== 'boolean' ||\n                !settings.completion) {\n                // overwrite interpreter completion by global setting #224\n                // we use string to indicate that it need to be taken from settings\n                // so we are able to change it using option API method\n                interpreter.completion = 'settings';\n            }\n            var prompt = settings.prompt;\n            if (is_function(prompt)) {\n                prompt = context_callback_proxy(prompt);\n            }\n            interpreters = new Stack($.extend({}, settings.extra, {\n                name: settings.name,\n                prompt: prompt,\n                keypress: settings.keypress,\n                keydown: settings.keydown,\n                resize: settings.onResize,\n                greetings: settings.greetings,\n                mousewheel: settings.mousewheel,\n                history: settings.history,\n                keymap: terminal_init_keymap\n            }, interpreter));\n            // CREATE COMMAND LINE\n            command_line = $('<div/>').appendTo(wrapper).cmd({\n                tabindex: settings.tabindex,\n                mobileDelete: settings.mobileDelete,\n                mobileIngoreAutoSpace: settings.mobileIngoreAutoSpace,\n                prompt: global_login_fn ? false : prompt,\n                history: settings.memory ? 'memory' : settings.history,\n                historyFilter: settings.historyFilter,\n                historySize: settings.historySize,\n                caseSensitiveSearch: settings.caseSensitiveSearch,\n                onPaste: settings.onPaste,\n                width: '100%',\n                enabled: false,\n                char_width: char_size.width,\n                keydown: key_down,\n                keymap: terminal_init_keymap,\n                clickTimeout: settings.clickTimeout,\n                holdTimeout: settings.holdTimeout,\n                holdRepeatTimeout: settings.holdRepeatTimeout,\n                repeatTimeoutKeys: settings.repeatTimeoutKeys,\n                allowedAttributes: settings.allowedAttributes,\n                keypress: key_press,\n                tabs: settings.tabs,\n                onPositionChange: function() {\n                    var args = [].slice.call(arguments);\n                    make_cursor_visible();\n                    fire_event('onPositionChange', args);\n                },\n                onCommandChange: function(command) {\n                    // resize is not triggered when insert called just after init\n                    //  and scrollbar appear\n                    if (old_width !== fill.width()) {\n                        // resizer handler will update old_width\n                        self.resizer();\n                    }\n                    fire_event('onCommandChange', [command]);\n                    make_cursor_visible();\n                },\n                commands: commands\n            });\n            function disable(e) {\n                if (is_mobile) {\n                    return;\n                }\n                e = e.originalEvent;\n                if (e) {\n                    // e.terget is body when click outside of context menu to close it\n                    // even if you click on terminal\n                    var node = document.elementFromPoint(e.clientX, e.clientY);\n                    if (!$(node).closest('.terminal').length && self.enabled()) {\n                        // we only need to disable when click outside of terminal\n                        // click on other terminal is handled by focus event\n                        self.disable();\n                    }\n                }\n            }\n            self.oneTime(100, function() {\n                $(document).bind('click.terminal_' + self.id(), disable).\n                    bind('contextmenu.terminal_' + self.id(), disable);\n            });\n            var $win = $(window);\n            // cordova application, if keyboard was open and we resume, it will be\n            // closed so we need to disable terminal so you can enable it with tap\n            document.addEventListener(\"resume\", function() {\n                self.disable();\n            });\n            // istanbul ignore next\n            if (is_mobile) {\n                (function() {\n                    self.addClass('terminal-mobile');\n                    var start;\n                    var move;\n                    var enabled;\n                    var SENSITIVITY = 3;\n                    var clip = command_line.clip();\n                    var HOLD_TIME = 200;\n                    var timer;\n                    clip.$node.off('touchstart.cmd');\n                    self.on('touchstart.terminal', function(e) {\n                        e = e.originalEvent;\n                        window.touch_event = e;\n                        if (e.target.tagName.toLowerCase() === 'a') {\n                            return;\n                        }\n                        if (!frozen && e.touches.length === 1) {\n                            enabled = self.enabled();\n                            var point = e.touches[0];\n                            start = {\n                                x: point.clientX,\n                                y: point.clientY\n                            };\n                            timer = setTimeout(function() {\n                                start = null;\n                            }, HOLD_TIME);\n                        }\n                    }).on('touchmove.terminal', function(e) {\n                        if (e.touches.length === 1 && start) {\n                            var point = e.touches[0];\n                            var diff_x = Math.abs(point.clientX - start.x);\n                            var diff_y = Math.abs(point.clientY - start.y);\n                            if (diff_x > SENSITIVITY || diff_y > SENSITIVITY) {\n                                move = true;\n                            }\n                        }\n                    }).on('touchend.terminal', function() {\n                        if (start) {\n                            clearTimeout(timer);\n                            if (!move) {\n                                if (!enabled) {\n                                    clip.focus();\n                                    self.focus();\n                                } else {\n                                    clip.blur();\n                                    self.disable();\n                                }\n                            }\n                        }\n                        move = false;\n                        start = null;\n                    });\n                })();\n            } else {\n                // work weird on mobile\n                $win.on('focus.terminal_' + self.id(), focus_terminal).\n                    on('blur.terminal_' + self.id(), blur_terminal);\n                // detect mouse drag\n                (function() {\n                    var count = 0;\n                    var $target;\n                    var name = 'click_' + self.id();\n                    var textarea = self.find('.cmd textarea');\n                    function click() {\n                        if ($target.is('.terminal') ||\n                            $target.is('.terminal-wrapper')) {\n                            var len = self.get_command().length;\n                            self.set_position(len);\n                        } else if ($target.closest('.cmd-prompt').length) {\n                            self.set_position(0);\n                        }\n                        if (!textarea.is(':focus')) {\n                            textarea.focus();\n                        }\n                        reset();\n                    }\n                    function reset() {\n                        count = 0;\n                        $target = null;\n                    }\n                    var ignore_elements = '.terminal-output textarea,' +\n                        '.terminal-output input';\n                    self.mousedown(function(e) {\n                        if (!scrollbar_event(e, fill)) {\n                            $target = $(e.target);\n                        }\n                    }).mouseup(function() {\n                        if ($target && $target.closest(ignore_elements).length) {\n                            if (enabled) {\n                                self.disable();\n                            }\n                        } else if (get_selected_html() === '' && $target) {\n                            if (++count === 1) {\n                                if (!frozen) {\n                                    if (!enabled) {\n                                        self.focus();\n                                        self.scroll_to_bottom();\n                                    } else {\n                                        var timeout = settings.clickTimeout;\n                                        self.oneTime(timeout, name, click);\n                                        return;\n                                    }\n                                }\n                            } else {\n                                self.stopTime(name);\n                            }\n                        }\n                        reset();\n                    }).dblclick(function() {\n                        reset();\n                        self.stopTime(name);\n                    });\n                })();\n                (function() {\n                    var $clip = command_line.clip().$node;\n                    function is_context_event(e) {\n                        return e.type === 'mousedown' && e.buttons === 2 ||\n                            e.type === 'contextmenu';\n                    }\n                    var event_name;\n                    if ('oncontextmenu' in window) {\n                        event_name = 'contextmenu.terminal';\n                    } else {\n                        event_name = 'mousedown.terminal';\n                    }\n                    self.on(event_name, function(e) {\n                        if (get_selected_html() === '' && is_context_event(e)) {\n                            var $target = $(e.target);\n                            if ($target.is('img,value,audio,object,canvas,a')) {\n                                return;\n                            }\n                            if (!self.enabled()) {\n                                self.enable();\n                            }\n                            var cmd_offset = command_line.offset();\n                            var cmd_rect = command_line[0].getBoundingClientRect();\n                            var self_offset = self.offset();\n                            var top_limit = self_offset.top - cmd_offset.top;\n                            var top = Math.max(e.pageY - cmd_offset.top - 20, top_limit);\n                            var left = e.pageX - cmd_offset.left - 20;\n                            var height = 4 * 14;\n                            var width = 5 * 14;\n                            var rect = self[0].getBoundingClientRect();\n                            // we need width without scrollbar\n                            var content_width = fill.outerWidth();\n                            // fix jumping when click near bottom or left edge #592\n                            var diff_h = (top + cmd_rect.top + height);\n                            diff_h = diff_h - rect.height - rect.top;\n                            var diff_w = (left + cmd_rect.left + width);\n                            // in Chrome scrollbar is added even when width\n                            // of textarea is smaller, adding 1px solved the issue\n                            diff_w = diff_w - content_width - rect.left;\n                            if (diff_h > 0) {\n                                height -= Math.ceil(diff_h);\n                            }\n                            if (diff_w > 0) {\n                                width -= Math.ceil(diff_w);\n                            }\n                            $clip.attr('style', [\n                                'left:' + left + 'px !important',\n                                'top:' + top + 'px !important',\n                                'width:' + width + 'px !important',\n                                'height:' + height + 'px !important'\n                            ].join(';'));\n                            if (!$clip.is(':focus')) {\n                                $clip.focus();\n                            }\n                            self.stopTime('textarea');\n                            self.oneTime(100, 'textarea', function() {\n                                var props = {\n                                    left: '',\n                                    top: '',\n                                    width: '',\n                                    height: ''\n                                };\n                                if (!is_css_variables_supported) {\n                                    var in_line = self.find('.cmd .cmd-cursor-line')\n                                        .prevUntil('.cmd-prompt').length;\n                                    props.top = in_line * 14 + 'px';\n                                }\n                                $clip.css(props);\n                            });\n                            self.stopTime('selection');\n                            self.everyTime(20, 'selection', function() {\n                                if ($clip[0].selection !== $clip[0].value) {\n                                    if (get_textarea_selection($clip[0])) {\n                                        clear_textarea_selection($clip[0]);\n                                        select(\n                                            self.find('.terminal-output')[0],\n                                            self.find('.cmd div:last-of-type')[0]\n                                        );\n                                        self.stopTime('selection');\n                                    }\n                                }\n                            });\n                        }\n                    });\n                })();\n                self.on('scroll', function() {\n                    var $textarea = self.find('textarea');\n                    var rect = self[0].getBoundingClientRect();\n                    var height = self[0].scrollHeight;\n                    var scrollTop = self.scrollTop();\n                    var diff = height - (scrollTop + rect.height);\n                    // if scrolled to bottom top need to be aligned with cursor line\n                    // done by CSS file using css variables\n                    if (diff === 0) {\n                        $textarea.css('top', '');\n                    } else {\n                        $textarea.css('top', -diff);\n                    }\n                });\n            }\n            self.on('click', 'a', function(e) {\n                var $this = $(this);\n                if ($this.closest('.terminal-exception').length) {\n                    var href = $this.attr('href');\n                    if (href.match(/:[0-9]+$/)) { // display line if specified\n                        e.preventDefault();\n                        print_line(href, self.cols());\n                    }\n                }\n                // refocus because links have tabindex in case where user want\n                // tab change urls, we can ignore this function on click\n                if (enabled) {\n                    self.find('.cmd textarea').focus();\n                }\n            });\n            function calculate_char_size() {\n                var width = char_size.width;\n                char_size = get_char_size(self);\n                if (width !== char_size.width) {\n                    command_line.option('char_width', char_size.width).refresh();\n                }\n            }\n            resize();\n            function resize() {\n                if (self.is(':visible')) {\n                    var width = fill.width();\n                    var height = fill.height();\n                    if (need_char_size_recalculate) {\n                        need_char_size_recalculate = !terminal_ready(self);\n                        calculate_char_size();\n                    }\n                    // prevent too many calculations in IE\n                    if (old_height !== height || old_width !== width) {\n                        self.resize();\n                    }\n                    old_height = height;\n                    old_width = width;\n                }\n            }\n            function create_resizers() {\n                var options = {\n                    prefix: 'terminal-'\n                };\n                self.resizer('unbind').resizer(resize, options);\n                font_resizer.resizer('unbind').resizer(function() {\n                    calculate_char_size();\n                    self.resize();\n                }, options);\n            }\n            function bottom_detect(intersections) {\n                is_bottom_detected = intersections[0].intersectionRatio === 1;\n            }\n            function create_bottom_detect() {\n                if (window.IntersectionObserver) {\n                    var top = $('<div class=\"terminal-scroll-marker\"/>').appendTo(self);\n                    var marker = top;\n                    if (settings.scrollBottomOffset !== -1) {\n                        marker = $('<div/>').css({\n                            height: settings.scrollBottomOffset\n                        }).appendTo(top);\n                    }\n                    is_bottom_observer = new IntersectionObserver(bottom_detect, {\n                        root: self[0]\n                    });\n                    is_bottom_observer.observe(marker[0]);\n                }\n            }\n            // this observer can be added imedietely even if terminal is not in the DOM\n            // because both of the elements (root and target) are in same fragment\n            create_bottom_detect();\n            if (self.is(':visible')) {\n                create_resizers();\n            }\n            function observe_visibility() {\n                if (visibility_observer) {\n                    if (visibility_observer.unobserve) {\n                        visibility_observer.unobserve(self[0]);\n                    } else {\n                        clearInterval(visibility_observer);\n                    }\n                }\n                var was_enabled = self.enabled();\n                var visible = self.is(':visible');\n                if (was_enabled && !visible) {\n                    self.disable();\n                }\n                if (visible) {\n                    create_resizers();\n                } else {\n                    // hide terminal content until it's resized (and num chars calculated)\n                    wrapper.css('visibility', 'hidden');\n                }\n                function visibility_checker() {\n                    if (self.is(':visible') && !visible) {\n                        visible = true;\n                        create_resizers();\n                        calculate_char_size();\n                        resize();\n                        if (was_enabled) {\n                            self.enable();\n                        }\n                        wrapper.css('visibility', '');\n                    } else if (visible && !self.is(':visible')) {\n                        visible = false;\n                        was_enabled = $.terminal.active() === self && self.enabled();\n                        self.disable();\n                        wrapper.css('visibility', 'hidden');\n                    }\n                }\n                if (window.IntersectionObserver && self.css('position') !== 'fixed') {\n                    visibility_observer = new IntersectionObserver(visibility_checker, {\n                        root: null\n                    });\n                    visibility_observer.observe(self[0]);\n                } else {\n                    visibility_observer = setInterval(visibility_checker, 100);\n                }\n            }\n            var in_dom = !!self.closest('body').length;\n            var MutationObsrv = window.MutationObserver || window.WebKitMutationObserver;\n            if (MutationObsrv) {\n                mutation_observer = new MutationObsrv(function() {\n                    if (self.closest('body').length) {\n                        if (!in_dom) {\n                            self.scroll_to_bottom();\n                            // this observer need to be added when terminal is in the DOM\n                            observe_visibility();\n                            resize();\n                        }\n                        in_dom = true;\n                    } else if (in_dom) {\n                        in_dom = false;\n                    }\n                });\n                mutation_observer.observe(document.body, {childList: true});\n            }\n            if (in_dom) {\n                // check if element is in the DOM if not running IntersectionObserver\n                // don't make sense\n                observe_visibility();\n            }\n            command_queue.resolve();\n            // touch devices need touch event to get virtual keyboard\n            if (enabled && self.is(':visible') && !is_mobile) {\n                self.focus(undefined, true);\n            } else {\n                self.disable();\n            }\n            // -------------------------------------------------------------\n            // Run Login\n            if (is_function(global_login_fn)) {\n                self.login(global_login_fn, true, initialize);\n            } else {\n                initialize();\n            }\n            // -------------------------------------------------------------\n            // :: helper\n            function exec_spec(spec) {\n                var terminal = terminals.get()[spec[0]];\n                // execute if belong to this terminal\n                var defer = $.Deferred();\n                if (terminal && terminal_id === terminal.id()) {\n                    if (!spec[2]) {\n                        defer.resolve();\n                        return defer.promise();\n                    } else if (paused) {\n                        resume_callbacks.push(function() {\n                            return terminal.exec(spec[2]).done(function() {\n                                terminal.save_state(spec[2], true, spec[1]);\n                                defer.resolve();\n                            });\n                        });\n                        return defer.promise();\n                    } else {\n                        return terminal.exec(spec[2]).done(function() {\n                            terminal.save_state(spec[2], true, spec[1]);\n                        });\n                    }\n                }\n            }\n            // exec from hash called in each terminal instance\n            if (settings.execHash) {\n                if (location.hash) {\n                    // wait until login is initialized\n                    setTimeout(function() {\n                        try {\n                            var hash = location.hash.replace(/^#/, '');\n                            // yes no var - local inside terminal\n                            hash_commands = JSON.parse(decodeURIComponent(hash));\n                            var i = 0;\n                            (function recur() {\n                                var spec = hash_commands[i++];\n                                if (spec) {\n                                    exec_spec(spec).done(recur);\n                                } else {\n                                    change_hash = true;\n                                }\n                            })();// */\n                        } catch (e) {\n                            // invalid json - ignore\n                        }\n                    });\n                } else {\n                    change_hash = true;\n                }\n            } else {\n                change_hash = true; // if enabled later\n            }\n            // change_hash = true; // exec can now change hash\n            // -------------------------------------------------------------\n            /* istanbul ignore next */\n            (function() {\n                var shift = false;\n                $(document).bind('keydown.terminal_' + self.id(), function(e) {\n                    if (e.shiftKey) {\n                        shift = true;\n                    }\n                }).bind('keyup.terminal_' + self.id(), function(e) {\n                    // in Google Chromium/Linux shiftKey is false\n                    if (e.shiftKey || e.which === 16) {\n                        shift = false;\n                    }\n                });\n                // this could work without calling scroll on wheel event but we\n                // need it for cases where you have mouse wheel work differently\n                // like with less command that scroll text\n                function mousewheel(event, delta) {\n                    if (!shift) {\n                        var interpreter = interpreters.top();\n                        var ret;\n                        if (is_function(interpreter.mousewheel)) {\n                            ret = interpreter.mousewheel(event, delta, self);\n                        } else if (is_function(settings.mousewheel)) {\n                            ret = settings.mousewheel(event, delta, self);\n                        }\n                        if (ret === true) {\n                            return;\n                        }\n                        if ((have_scrollbar() || ret === false) && !event.ctrlKey) {\n                            event.stopPropagation();\n                            event.preventDefault();\n                        }\n                        if (ret === false) {\n                            return false;\n                        }\n                        if (delta > 0) {\n                            self.scroll(-40);\n                        } else {\n                            self.scroll(40);\n                        }\n                    }\n                }\n                if ($.event.special.mousewheel) {\n                    // we keep mousewheel plugin just in case\n                    self.on('mousewheel', mousewheel);\n                } else {\n                    // detection take from:\n                    // https://developer.mozilla.org/en-US/docs/Web/Events/wheel\n                    var event;\n                    var div = document.createElement(\"div\");\n                    if (\"onwheel\" in div) {\n                        event = \"wheel\"; // Modern browsers support \"wheel\"\n                    } else if (document.onmousewheel !== undefined) {\n                        // Webkit and IE support at least \"mousewheel\"\n                        event = \"mousewheel\";\n                    } else {\n                        // let's assume that remaining browsers are older Firefox\n                        event = \"DOMMouseScroll\";\n                    }\n                    div = null;\n                    self.on(event, function(e) {\n                        var delta;\n                        if (event === 'mousewheel') {\n                            delta = - 1 / 40 * e.originalEvent.wheelDelta;\n                        } else {\n                            delta = e.originalEvent.deltaY || e.originalEvent.detail;\n                        }\n                        mousewheel(e, -delta);\n                    });\n                }\n                self.touch_scroll(function(event) {\n                    var delta = event.current.clientY - event.previous.clientY;\n                    var ret;\n                    var interpreter = interpreters.top();\n                    if (is_function(interpreter.touchscroll)) {\n                        ret = interpreter.touchscroll(event, delta, self);\n                    } else if (is_function(settings.touchscroll)) {\n                        ret = settings.touchscroll(event, delta, self);\n                    }\n                    css(self[0], {\n                        '--terminal-scroll': self.prop('scrollTop')\n                    });\n                    if (ret === true) {\n                        return;\n                    }\n                    return false;\n                });\n            })();\n        }); // make_interpreter\n        return self;\n    }; // terminal plugin\n});\n","var clone = (function() {\n'use strict';\n\n/**\n * Clones (copies) an Object using deep copying.\n *\n * This function supports circular references by default, but if you are certain\n * there are no circular references in your object, you can save some CPU time\n * by calling clone(obj, false).\n *\n * Caution: if `circular` is false and `parent` contains circular references,\n * your program may enter an infinite loop and crash.\n *\n * @param `parent` - the object to be cloned\n * @param `circular` - set to true if the object to be cloned may contain\n *    circular references. (optional - true by default)\n * @param `depth` - set to a number if the object is only to be cloned to\n *    a particular depth. (optional - defaults to Infinity)\n * @param `prototype` - sets the prototype to be used when cloning an object.\n *    (optional - defaults to parent prototype).\n*/\nfunction clone(parent, circular, depth, prototype) {\n  var filter;\n  if (typeof circular === 'object') {\n    depth = circular.depth;\n    prototype = circular.prototype;\n    filter = circular.filter;\n    circular = circular.circular\n  }\n  // maintain two arrays for circular references, where corresponding parents\n  // and children have the same index\n  var allParents = [];\n  var allChildren = [];\n\n  var useBuffer = typeof Buffer != 'undefined';\n\n  if (typeof circular == 'undefined')\n    circular = true;\n\n  if (typeof depth == 'undefined')\n    depth = Infinity;\n\n  // recurse this function so we don't reset allParents and allChildren\n  function _clone(parent, depth) {\n    // cloning null always returns null\n    if (parent === null)\n      return null;\n\n    if (depth == 0)\n      return parent;\n\n    var child;\n    var proto;\n    if (typeof parent != 'object') {\n      return parent;\n    }\n\n    if (clone.__isArray(parent)) {\n      child = [];\n    } else if (clone.__isRegExp(parent)) {\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\n    } else if (clone.__isDate(parent)) {\n      child = new Date(parent.getTime());\n    } else if (useBuffer && Buffer.isBuffer(parent)) {\n      if (Buffer.allocUnsafe) {\n        // Node.js >= 4.5.0\n        child = Buffer.allocUnsafe(parent.length);\n      } else {\n        // Older Node.js versions\n        child = new Buffer(parent.length);\n      }\n      parent.copy(child);\n      return child;\n    } else {\n      if (typeof prototype == 'undefined') {\n        proto = Object.getPrototypeOf(parent);\n        child = Object.create(proto);\n      }\n      else {\n        child = Object.create(prototype);\n        proto = prototype;\n      }\n    }\n\n    if (circular) {\n      var index = allParents.indexOf(parent);\n\n      if (index != -1) {\n        return allChildren[index];\n      }\n      allParents.push(parent);\n      allChildren.push(child);\n    }\n\n    for (var i in parent) {\n      var attrs;\n      if (proto) {\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\n      }\n\n      if (attrs && attrs.set == null) {\n        continue;\n      }\n      child[i] = _clone(parent[i], depth - 1);\n    }\n\n    return child;\n  }\n\n  return _clone(parent, depth);\n}\n\n/**\n * Simple flat clone using prototype, accepts only objects, usefull for property\n * override on FLAT configuration object (no nested props).\n *\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\n * works.\n */\nclone.clonePrototype = function clonePrototype(parent) {\n  if (parent === null)\n    return null;\n\n  var c = function () {};\n  c.prototype = parent;\n  return new c();\n};\n\n// private utility functions\n\nfunction __objToStr(o) {\n  return Object.prototype.toString.call(o);\n};\nclone.__objToStr = __objToStr;\n\nfunction __isDate(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Date]';\n};\nclone.__isDate = __isDate;\n\nfunction __isArray(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Array]';\n};\nclone.__isArray = __isArray;\n\nfunction __isRegExp(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object RegExp]';\n};\nclone.__isRegExp = __isRegExp;\n\nfunction __getRegExpFlags(re) {\n  var flags = '';\n  if (re.global) flags += 'g';\n  if (re.ignoreCase) flags += 'i';\n  if (re.multiline) flags += 'm';\n  return flags;\n};\nclone.__getRegExpFlags = __getRegExpFlags;\n\nreturn clone;\n})();\n\nif (typeof module === 'object' && module.exports) {\n  module.exports = clone;\n}\n","module.exports = [\n    [ 0x0300, 0x036F ], [ 0x0483, 0x0486 ], [ 0x0488, 0x0489 ],\n    [ 0x0591, 0x05BD ], [ 0x05BF, 0x05BF ], [ 0x05C1, 0x05C2 ],\n    [ 0x05C4, 0x05C5 ], [ 0x05C7, 0x05C7 ], [ 0x0600, 0x0603 ],\n    [ 0x0610, 0x0615 ], [ 0x064B, 0x065E ], [ 0x0670, 0x0670 ],\n    [ 0x06D6, 0x06E4 ], [ 0x06E7, 0x06E8 ], [ 0x06EA, 0x06ED ],\n    [ 0x070F, 0x070F ], [ 0x0711, 0x0711 ], [ 0x0730, 0x074A ],\n    [ 0x07A6, 0x07B0 ], [ 0x07EB, 0x07F3 ], [ 0x0901, 0x0902 ],\n    [ 0x093C, 0x093C ], [ 0x0941, 0x0948 ], [ 0x094D, 0x094D ],\n    [ 0x0951, 0x0954 ], [ 0x0962, 0x0963 ], [ 0x0981, 0x0981 ],\n    [ 0x09BC, 0x09BC ], [ 0x09C1, 0x09C4 ], [ 0x09CD, 0x09CD ],\n    [ 0x09E2, 0x09E3 ], [ 0x0A01, 0x0A02 ], [ 0x0A3C, 0x0A3C ],\n    [ 0x0A41, 0x0A42 ], [ 0x0A47, 0x0A48 ], [ 0x0A4B, 0x0A4D ],\n    [ 0x0A70, 0x0A71 ], [ 0x0A81, 0x0A82 ], [ 0x0ABC, 0x0ABC ],\n    [ 0x0AC1, 0x0AC5 ], [ 0x0AC7, 0x0AC8 ], [ 0x0ACD, 0x0ACD ],\n    [ 0x0AE2, 0x0AE3 ], [ 0x0B01, 0x0B01 ], [ 0x0B3C, 0x0B3C ],\n    [ 0x0B3F, 0x0B3F ], [ 0x0B41, 0x0B43 ], [ 0x0B4D, 0x0B4D ],\n    [ 0x0B56, 0x0B56 ], [ 0x0B82, 0x0B82 ], [ 0x0BC0, 0x0BC0 ],\n    [ 0x0BCD, 0x0BCD ], [ 0x0C3E, 0x0C40 ], [ 0x0C46, 0x0C48 ],\n    [ 0x0C4A, 0x0C4D ], [ 0x0C55, 0x0C56 ], [ 0x0CBC, 0x0CBC ],\n    [ 0x0CBF, 0x0CBF ], [ 0x0CC6, 0x0CC6 ], [ 0x0CCC, 0x0CCD ],\n    [ 0x0CE2, 0x0CE3 ], [ 0x0D41, 0x0D43 ], [ 0x0D4D, 0x0D4D ],\n    [ 0x0DCA, 0x0DCA ], [ 0x0DD2, 0x0DD4 ], [ 0x0DD6, 0x0DD6 ],\n    [ 0x0E31, 0x0E31 ], [ 0x0E34, 0x0E3A ], [ 0x0E47, 0x0E4E ],\n    [ 0x0EB1, 0x0EB1 ], [ 0x0EB4, 0x0EB9 ], [ 0x0EBB, 0x0EBC ],\n    [ 0x0EC8, 0x0ECD ], [ 0x0F18, 0x0F19 ], [ 0x0F35, 0x0F35 ],\n    [ 0x0F37, 0x0F37 ], [ 0x0F39, 0x0F39 ], [ 0x0F71, 0x0F7E ],\n    [ 0x0F80, 0x0F84 ], [ 0x0F86, 0x0F87 ], [ 0x0F90, 0x0F97 ],\n    [ 0x0F99, 0x0FBC ], [ 0x0FC6, 0x0FC6 ], [ 0x102D, 0x1030 ],\n    [ 0x1032, 0x1032 ], [ 0x1036, 0x1037 ], [ 0x1039, 0x1039 ],\n    [ 0x1058, 0x1059 ], [ 0x1160, 0x11FF ], [ 0x135F, 0x135F ],\n    [ 0x1712, 0x1714 ], [ 0x1732, 0x1734 ], [ 0x1752, 0x1753 ],\n    [ 0x1772, 0x1773 ], [ 0x17B4, 0x17B5 ], [ 0x17B7, 0x17BD ],\n    [ 0x17C6, 0x17C6 ], [ 0x17C9, 0x17D3 ], [ 0x17DD, 0x17DD ],\n    [ 0x180B, 0x180D ], [ 0x18A9, 0x18A9 ], [ 0x1920, 0x1922 ],\n    [ 0x1927, 0x1928 ], [ 0x1932, 0x1932 ], [ 0x1939, 0x193B ],\n    [ 0x1A17, 0x1A18 ], [ 0x1B00, 0x1B03 ], [ 0x1B34, 0x1B34 ],\n    [ 0x1B36, 0x1B3A ], [ 0x1B3C, 0x1B3C ], [ 0x1B42, 0x1B42 ],\n    [ 0x1B6B, 0x1B73 ], [ 0x1DC0, 0x1DCA ], [ 0x1DFE, 0x1DFF ],\n    [ 0x200B, 0x200F ], [ 0x202A, 0x202E ], [ 0x2060, 0x2063 ],\n    [ 0x206A, 0x206F ], [ 0x20D0, 0x20EF ], [ 0x302A, 0x302F ],\n    [ 0x3099, 0x309A ], [ 0xA806, 0xA806 ], [ 0xA80B, 0xA80B ],\n    [ 0xA825, 0xA826 ], [ 0xFB1E, 0xFB1E ], [ 0xFE00, 0xFE0F ],\n    [ 0xFE20, 0xFE23 ], [ 0xFEFF, 0xFEFF ], [ 0xFFF9, 0xFFFB ],\n    [ 0x10A01, 0x10A03 ], [ 0x10A05, 0x10A06 ], [ 0x10A0C, 0x10A0F ],\n    [ 0x10A38, 0x10A3A ], [ 0x10A3F, 0x10A3F ], [ 0x1D167, 0x1D169 ],\n    [ 0x1D173, 0x1D182 ], [ 0x1D185, 0x1D18B ], [ 0x1D1AA, 0x1D1AD ],\n    [ 0x1D242, 0x1D244 ], [ 0xE0001, 0xE0001 ], [ 0xE0020, 0xE007F ],\n    [ 0xE0100, 0xE01EF ]\n]\n","var clone = require('clone');\n\nmodule.exports = function(options, defaults) {\n  options = options || {};\n\n  Object.keys(defaults).forEach(function(key) {\n    if (typeof options[key] === 'undefined') {\n      options[key] = clone(defaults[key]);\n    }\n  });\n\n  return options;\n};"],"sourceRoot":"webpack:///"}