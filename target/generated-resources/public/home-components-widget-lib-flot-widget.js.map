{"version":3,"sources":["./src/app/modules/home/components/widget/lib/flot-widget.models.ts","./src/app/modules/home/components/widget/lib/flot-widget.ts"],"names":[],"mappings":"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","file":"home-components-widget-lib-flot-widget.js","sourcesContent":["///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\n// tslint:disable-next-line:no-reference\n/// <reference path=\"../../../../../../../src/typings/jquery.flot.typings.d.ts\" />\n\nimport { DataKey, Datasource, DatasourceData, JsonSettingsSchema } from '@shared/models/widget.models';\nimport * as moment_ from 'moment';\nimport { DataKeyType } from '@shared/models/telemetry/telemetry.models';\nimport { ComparisonDuration } from '@shared/models/time/time.models';\n\nexport declare type ChartType = 'line' | 'pie' | 'bar' | 'state' | 'graph';\n\nexport declare type TbFlotSettings = TbFlotBaseSettings & TbFlotGraphSettings & TbFlotBarSettings & TbFlotPieSettings;\n\nexport declare type TooltipValueFormatFunction = (value: any) => string;\n\nexport declare type TbFlotTicksFormatterFunction = (t: number, a?: TbFlotPlotAxis) => string;\n\nexport interface TbFlotSeries extends DatasourceData, JQueryPlotSeriesOptions {\n  dataKey: TbFlotDataKey;\n  xaxisIndex?: number;\n  yaxisIndex?: number;\n  yaxis?: number;\n}\n\nexport interface TbFlotDataKey extends DataKey {\n  settings?: TbFlotKeySettings;\n  tooltipValueFormatFunction?: TooltipValueFormatFunction;\n}\n\nexport interface TbFlotPlotAxis extends JQueryPlotAxis, TbFlotAxisOptions {\n  options: TbFlotAxisOptions;\n}\n\nexport interface TbFlotAxisOptions extends JQueryPlotAxisOptions {\n  tickUnits?: string;\n  hidden?: boolean;\n  keysInfo?: Array<{hidden: boolean}>;\n  ticksFormatterFunction?: TbFlotTicksFormatterFunction;\n}\n\nexport interface TbFlotPlotDataSeries extends JQueryPlotDataSeries {\n  datasource?: Datasource;\n  dataKey?: TbFlotDataKey;\n  percent?: number;\n}\n\nexport interface TbFlotPlotItem extends jquery.flot.item {\n  series: TbFlotPlotDataSeries;\n}\n\nexport interface TbFlotHoverInfo {\n  seriesHover: Array<TbFlotSeriesHoverInfo>;\n  time?: any;\n}\n\nexport interface TbFlotSeriesHoverInfo {\n  hoverIndex: number;\n  units: string;\n  decimals: number;\n  label: string;\n  color: string;\n  index: number;\n  tooltipValueFormatFunction: TooltipValueFormatFunction;\n  value: any;\n  time: any;\n  distance: number;\n}\n\nexport interface TbFlotThresholdMarking {\n  lineWidth?: number;\n  color?: string;\n  [key: string]: any;\n}\n\nexport interface TbFlotThresholdKeySettings {\n  yaxis: number;\n  lineWidth: number;\n  color: string;\n}\n\nexport interface TbFlotGridSettings {\n  color: string;\n  backgroundColor: string;\n  tickColor: string;\n  outlineWidth: number;\n  verticalLines: boolean;\n  horizontalLines: boolean;\n  minBorderMargin: number;\n  margin: number;\n}\n\nexport interface TbFlotXAxisSettings {\n  showLabels: boolean;\n  title: string;\n  color: boolean;\n}\n\nexport interface TbFlotSecondXAxisSettings {\n  axisPosition: TbFlotXAxisPosition;\n  showLabels: boolean;\n  title: string;\n}\n\nexport interface TbFlotYAxisSettings {\n  min: number;\n  max: number;\n  showLabels: boolean;\n  title: string;\n  color: string;\n  ticksFormatter: string;\n  tickDecimals: number;\n  tickSize: number;\n}\n\nexport interface TbFlotBaseSettings {\n  stack: boolean;\n  shadowSize: number;\n  fontColor: string;\n  fontSize: number;\n  tooltipIndividual: boolean;\n  tooltipCumulative: boolean;\n  tooltipValueFormatter: string;\n  hideZeros: boolean;\n  grid: TbFlotGridSettings;\n  xaxis: TbFlotXAxisSettings;\n  yaxis: TbFlotYAxisSettings;\n}\n\nexport interface TbFlotComparisonSettings {\n  comparisonEnabled: boolean;\n  timeForComparison: ComparisonDuration;\n  xaxisSecond: TbFlotSecondXAxisSettings;\n  comparisonCustomIntervalValue?: number;\n}\n\nexport interface TbFlotThresholdsSettings {\n  thresholdsLineWidth: number;\n}\n\nexport interface TbFlotCustomLegendSettings {\n  customLegendEnabled: boolean;\n  dataKeysListForLabels: Array<TbFlotLabelPatternSettings>;\n}\n\nexport interface TbFlotLabelPatternSettings {\n  name: string;\n  type: DataKeyType;\n  settings?: any;\n}\n\nexport interface TbFlotGraphSettings extends TbFlotBaseSettings, TbFlotThresholdsSettings, TbFlotComparisonSettings, TbFlotCustomLegendSettings {\n  smoothLines: boolean;\n}\n\nexport declare type BarAlignment = 'left' | 'right' | 'center';\n\nexport interface TbFlotBarSettings extends TbFlotBaseSettings, TbFlotThresholdsSettings, TbFlotComparisonSettings, TbFlotCustomLegendSettings {\n  defaultBarWidth: number;\n  barAlignment: BarAlignment;\n}\n\nexport interface TbFlotPieSettings {\n  radius: number;\n  innerRadius: number;\n  tilt: number;\n  animatedPie: boolean;\n  stroke: {\n    color: string;\n    width: number;\n  };\n  showTooltip: boolean,\n  showLabels: boolean;\n  fontColor: string;\n  fontSize: number;\n}\n\nexport declare type TbFlotYAxisPosition = 'left' | 'right';\nexport declare type TbFlotXAxisPosition = 'top' | 'bottom';\n\nexport declare type TbFlotThresholdValueSource = 'predefinedValue' | 'entityAttribute';\n\nexport interface TbFlotKeyThreshold {\n  thresholdValueSource: TbFlotThresholdValueSource;\n  thresholdEntityAlias: string;\n  thresholdAttribute: string;\n  thresholdValue: number;\n  lineWidth: number;\n  color: string;\n}\n\nexport interface TbFlotKeyComparisonSettings {\n  showValuesForComparison: boolean;\n  comparisonValuesLabel: string;\n  color: string;\n}\n\nexport interface TbFlotKeySettings {\n  excludeFromStacking: boolean;\n  hideDataByDefault: boolean;\n  disableDataHiding: boolean;\n  removeFromLegend: boolean;\n  showLines: boolean;\n  fillLines: boolean;\n  showPoints: boolean;\n  showPointShape: string;\n  pointShapeFormatter: string;\n  showPointsLineWidth: number;\n  showPointsRadius: number;\n  lineWidth: number;\n  tooltipValueFormatter: string;\n  showSeparateAxis: boolean;\n  axisMin: number;\n  axisMax: number;\n  axisTitle: string;\n  axisTickDecimals: number;\n  axisTickSize: number;\n  axisPosition: TbFlotYAxisPosition;\n  axisTicksFormatter: string;\n  thresholds: TbFlotKeyThreshold[];\n  comparisonSettings: TbFlotKeyComparisonSettings;\n}\n\nexport function flotSettingsSchema(chartType: ChartType): JsonSettingsSchema {\n\n  const schema: JsonSettingsSchema = {\n    schema: {\n      type: 'object',\n      title: 'Settings',\n      properties: {\n      }\n    }\n  };\n\n  const properties: any = schema.schema.properties;\n  properties.stack = {\n    title: 'Stacking',\n    type: 'boolean',\n    default: false\n  };\n  if (chartType === 'graph') {\n    properties.smoothLines = {\n      title: 'Display smooth (curved) lines',\n      type: 'boolean',\n      default: false\n    };\n  }\n  if (chartType === 'bar') {\n    properties.defaultBarWidth = {\n      title: 'Default bar width for non-aggregated data (milliseconds)',\n      type: 'number',\n      default: 600\n    };\n    properties.barAlignment = {\n      title: 'Bar alignment',\n      type: 'string',\n      default: 'left'\n    };\n  }\n  if (chartType === 'graph' || chartType === 'bar') {\n    properties.thresholdsLineWidth = {\n      title: 'Default line width for all thresholds',\n      type: 'number'\n    };\n  }\n  properties.shadowSize = {\n    title: 'Shadow size',\n    type: 'number',\n    default: 4\n  };\n  properties.fontColor =  {\n    title: 'Font color',\n    type: 'string',\n    default: '#545454'\n  };\n  properties.fontSize = {\n    title: 'Font size',\n    type: 'number',\n    default: 10\n  };\n  properties.tooltipIndividual = {\n    title: 'Hover individual points',\n    type: 'boolean',\n    default: false\n  };\n  properties.tooltipCumulative = {\n    title: 'Show cumulative values in stacking mode',\n    type: 'boolean',\n    default: false\n  };\n  properties.tooltipValueFormatter = {\n    title: 'Tooltip value format function, f(value)',\n    type: 'string',\n    default: ''\n  };\n  properties.hideZeros = {\n    title: 'Hide zero/false values from tooltip',\n    type: 'boolean',\n    default: false\n  };\n\n  properties.showTooltip = {\n    title: 'Show tooltip',\n    type: 'boolean',\n    default: true\n  };\n\n  properties.grid = {\n    title: 'Grid settings',\n    type: 'object',\n    properties: {\n      color: {\n        title: 'Primary color',\n        type: 'string',\n        default: '#545454'\n      },\n      backgroundColor: {\n        title: 'Background color',\n        type: 'string',\n        default: null\n      },\n      tickColor: {\n        title: 'Ticks color',\n        type: 'string',\n        default: '#DDDDDD'\n      },\n      outlineWidth: {\n        title: 'Grid outline/border width (px)',\n        type: 'number',\n        default: 1\n      },\n      verticalLines: {\n        title: 'Show vertical lines',\n        type: 'boolean',\n        default: true\n      },\n      horizontalLines: {\n        title: 'Show horizontal lines',\n        type: 'boolean',\n        default: true\n      }\n    }\n  };\n\n  properties.xaxis = {\n    title: 'X axis settings',\n    type: 'object',\n    properties: {\n      showLabels: {\n        title: 'Show labels',\n        type: 'boolean',\n        default: true\n      },\n      title: {\n        title: 'Axis title',\n        type: 'string',\n        default: null\n      },\n      color: {\n        title: 'Ticks color',\n        type: 'string',\n        default: null\n      }\n    }\n  };\n\n  properties.yaxis = {\n    title: 'Y axis settings',\n    type: 'object',\n    properties: {\n      min: {\n        title: 'Minimum value on the scale',\n        type: 'number',\n        default: null\n      },\n      max: {\n        title: 'Maximum value on the scale',\n        type: 'number',\n        default: null\n      },\n      showLabels: {\n        title: 'Show labels',\n        type: 'boolean',\n        default: true\n      },\n      title: {\n        title: 'Axis title',\n        type: 'string',\n        default: null\n      },\n      color: {\n        title: 'Ticks color',\n        type: 'string',\n        default: null\n      },\n      ticksFormatter: {\n        title: 'Ticks formatter function, f(value)',\n        type: 'string',\n        default: ''\n      },\n      tickDecimals: {\n        title: 'The number of decimals to display',\n        type: 'number',\n        default: 0\n      },\n      tickSize: {\n        title: 'Step size between ticks',\n        type: 'number',\n        default: null\n      }\n    }\n  };\n\n  schema.schema.required = [];\n  schema.form = ['stack'];\n  if (chartType === 'graph') {\n    schema.form.push('smoothLines');\n  }\n  if (chartType === 'bar') {\n    schema.form.push('defaultBarWidth');\n    schema.form.push({\n      key: 'barAlignment',\n      type: 'rc-select',\n      multiple: false,\n      items: [\n        {\n          value: 'left',\n          label: 'Left'\n        },\n        {\n          value: 'right',\n          label: 'Right'\n        },\n        {\n          value: 'center',\n          label: 'Center'\n        }\n      ]\n    });\n  }\n  if (chartType === 'graph' || chartType === 'bar') {\n    schema.form.push('thresholdsLineWidth');\n  }\n  schema.form.push('shadowSize');\n  schema.form.push({\n    key: 'fontColor',\n    type: 'color'\n  });\n  schema.form.push('fontSize');\n  schema.form.push('tooltipIndividual');\n  schema.form.push('tooltipCumulative');\n  schema.form.push({\n    key: 'tooltipValueFormatter',\n    type: 'javascript',\n    helpId: 'widget/lib/flot/tooltip_value_format_fn'\n  });\n  schema.form.push('hideZeros');\n  schema.form.push('showTooltip');\n  schema.form.push({\n    key: 'grid',\n    items: [\n      {\n        key: 'grid.color',\n        type: 'color'\n      },\n      {\n        key: 'grid.backgroundColor',\n        type: 'color'\n      },\n      {\n        key: 'grid.tickColor',\n        type: 'color'\n      },\n      'grid.outlineWidth',\n      'grid.verticalLines',\n      'grid.horizontalLines'\n    ]\n  });\n  schema.form.push({\n    key: 'xaxis',\n    items: [\n      'xaxis.showLabels',\n      'xaxis.title',\n      {\n        key: 'xaxis.color',\n        type: 'color'\n      }\n    ]\n  });\n  schema.form.push({\n    key: 'yaxis',\n    items: [\n      'yaxis.min',\n      'yaxis.max',\n      'yaxis.tickDecimals',\n      'yaxis.tickSize',\n      'yaxis.showLabels',\n      'yaxis.title',\n      {\n        key: 'yaxis.color',\n        type: 'color'\n      },\n      {\n        key: 'yaxis.ticksFormatter',\n        type: 'javascript',\n        helpId: 'widget/lib/flot/ticks_formatter_fn'\n      }\n    ]\n  });\n  if (chartType === 'graph' || chartType === 'bar') {\n    schema.groupInfoes = [{\n      formIndex: 0,\n      GroupTitle: 'Common Settings'\n    }];\n    schema.form = [schema.form];\n    schema.schema.properties = {...schema.schema.properties, ...chartSettingsSchemaForComparison.schema.properties, ...chartSettingsSchemaForCustomLegend.schema.properties};\n    schema.schema.required = schema.schema.required.concat(chartSettingsSchemaForComparison.schema.required, chartSettingsSchemaForCustomLegend.schema.required);\n    schema.form.push(chartSettingsSchemaForComparison.form, chartSettingsSchemaForCustomLegend.form);\n    schema.groupInfoes.push({\n      formIndex: schema.groupInfoes.length,\n      GroupTitle: 'Comparison Settings'\n    });\n    schema.groupInfoes.push({\n      formIndex: schema.groupInfoes.length,\n      GroupTitle: 'Custom Legend Settings'\n    });\n  }\n  return schema;\n}\n\nconst chartSettingsSchemaForComparison: JsonSettingsSchema = {\n  schema: {\n    title: 'Comparison Settings',\n    type: 'object',\n    properties: {\n      comparisonEnabled: {\n        title: 'Enable comparison',\n        type: 'boolean',\n        default: false\n      },\n      timeForComparison: {\n        title: 'Time to show historical data',\n        type: 'string',\n        default: 'previousInterval'\n      },\n      comparisonCustomIntervalValue: {\n        title: 'Custom interval value (ms)',\n        type: 'number',\n        default: 7200000\n      },\n      xaxisSecond: {\n        title: 'Second X axis',\n        type: 'object',\n        properties: {\n          axisPosition: {\n            title: 'Axis position',\n            type: 'string',\n            default: 'top'\n          },\n          showLabels: {\n            title: 'Show labels',\n            type: 'boolean',\n            default: true\n          },\n          title: {\n            title: 'Axis title',\n            type: 'string',\n            default: null\n          }\n        }\n      }\n    },\n    required: []\n  },\n  form: [\n    'comparisonEnabled',\n    {\n      key: 'timeForComparison',\n      type: 'rc-select',\n      multiple: false,\n      items: [\n        {\n          value: 'previousInterval',\n          label: 'Previous interval (default)'\n        },\n        {\n          value: 'days',\n          label: 'Day ago'\n        },\n        {\n          value: 'weeks',\n          label: 'Week ago'\n        },\n        {\n          value: 'months',\n          label: 'Month ago'\n        },\n        {\n          value: 'years',\n          label: 'Year ago'\n        },\n        {\n          value: 'customInterval',\n          label: 'Custom interval'\n        }\n      ]\n    },\n    {\n      key: 'comparisonCustomIntervalValue',\n      condition: 'model.timeForComparison === \"customInterval\"'\n    },\n    {\n      key: 'xaxisSecond',\n      items: [\n        {\n          key: 'xaxisSecond.axisPosition',\n          type: 'rc-select',\n          multiple: false,\n          items: [\n            {\n              value: 'top',\n              label: 'Top (default)'\n            },\n            {\n              value: 'bottom',\n              label: 'Bottom'\n            }\n          ]\n        },\n        'xaxisSecond.showLabels',\n        'xaxisSecond.title',\n      ]\n    }\n  ]\n};\n\nconst chartSettingsSchemaForCustomLegend: JsonSettingsSchema = {\n  schema: {\n    title: 'Custom Legend Settings',\n    type: 'object',\n    properties: {\n      customLegendEnabled: {\n        title: 'Enable custom legend (this will allow you to use attribute/timeseries values in key labels)',\n        type: 'boolean',\n        default: false\n      },\n      dataKeysListForLabels: {\n        title: 'Datakeys list to use in labels',\n        type: 'array',\n        items: {\n          type: 'object',\n          properties: {\n            name: {\n              title: 'Key name',\n              type: 'string'\n            },\n            type: {\n              title: 'Key type',\n              type: 'string',\n              default: 'attribute'\n            }\n          },\n          required: [\n            'name'\n          ]\n        }\n      }\n    },\n    required: []\n  },\n  form: [\n    'customLegendEnabled',\n    {\n      key: 'dataKeysListForLabels',\n      condition: 'model.customLegendEnabled === true',\n      items: [\n        {\n          key: 'dataKeysListForLabels[].type',\n          type: 'rc-select',\n          multiple: false,\n          items: [\n            {\n              value: 'attribute',\n              label: 'Attribute'\n            },\n            {\n              value: 'timeseries',\n              label: 'Timeseries'\n            }\n          ]\n        },\n        'dataKeysListForLabels[].name'\n      ]\n    }\n  ]\n};\n\nexport const flotPieSettingsSchema: JsonSettingsSchema = {\n    schema: {\n      type: 'object',\n      title: 'Settings',\n      properties: {\n        radius: {\n          title: 'Radius',\n          type: 'number',\n          default: 1\n        },\n        innerRadius: {\n          title: 'Inner radius',\n          type: 'number',\n          default: 0\n        },\n        tilt: {\n          title: 'Tilt',\n          type: 'number',\n          default: 1\n        },\n        animatedPie: {\n          title: 'Enable pie animation (experimental)',\n          type: 'boolean',\n          default: false\n        },\n        stroke: {\n          title: 'Stroke',\n          type: 'object',\n          properties: {\n            color: {\n              title: 'Color',\n              type: 'string',\n              default: ''\n            },\n            width: {\n              title: 'Width (pixels)',\n              type: 'number',\n              default: 0\n            }\n          }\n        },\n        showTooltip: {\n          title: 'Show Tooltip',\n          type: 'boolean',\n          default: true,\n        },\n        showLabels: {\n          title: 'Show labels',\n          type: 'boolean',\n          default: false\n        },\n        fontColor: {\n          title: 'Font color',\n          type: 'string',\n          default: '#545454'\n        },\n        fontSize: {\n          title: 'Font size',\n          type: 'number',\n          default: 10\n        }\n      },\n      required: []\n    },\n    form: [\n      'radius',\n      'innerRadius',\n      'animatedPie',\n      'tilt',\n      {\n        key: 'stroke',\n        items: [\n          {\n            key: 'stroke.color',\n            type: 'color'\n          },\n          'stroke.width'\n        ]\n      },\n      'showTooltip',\n      'showLabels',\n      {\n        key: 'fontColor',\n        type: 'color'\n      },\n      'fontSize'\n    ]\n};\n\nexport const flotPieDatakeySettingsSchema: JsonSettingsSchema = {\n  schema: {\n    type: 'object',\n    title: 'DataKeySettings',\n    properties: {\n      hideDataByDefault: {\n        title: 'Data is hidden by default',\n        type: 'boolean',\n        default: false\n      },\n      disableDataHiding: {\n        title: 'Disable data hiding',\n        type: 'boolean',\n        default: false\n      },\n      removeFromLegend: {\n        title: 'Remove datakey from legend',\n        type: 'boolean',\n        default: false\n      }\n    },\n    required: []\n  },\n  form: [\n    'hideDataByDefault',\n    'disableDataHiding',\n    'removeFromLegend'\n  ]\n};\n\nexport function flotDatakeySettingsSchema(defaultShowLines: boolean, chartType: ChartType): JsonSettingsSchema {\n  const schema: JsonSettingsSchema = {\n    schema: {\n      type: 'object',\n      title: 'DataKeySettings',\n      properties: {\n        excludeFromStacking: {\n          title: 'Exclude from stacking(available in \"Stacking\" mode)',\n          type: 'boolean',\n          default: false\n        },\n        hideDataByDefault: {\n          title: 'Data is hidden by default',\n          type: 'boolean',\n          default: false\n        },\n        disableDataHiding: {\n          title: 'Disable data hiding',\n          type: 'boolean',\n          default: false\n        },\n        removeFromLegend: {\n          title: 'Remove datakey from legend',\n          type: 'boolean',\n          default: false\n        },\n        showLines: {\n          title: 'Show lines',\n          type: 'boolean',\n          default: defaultShowLines\n        },\n        fillLines: {\n          title: 'Fill lines',\n          type: 'boolean',\n          default: false\n        },\n        showPoints: {\n          title: 'Show points',\n          type: 'boolean',\n          default: false\n        },\n        showPointShape: {\n          title: 'Select point shape:',\n          type: 'string',\n          default: 'circle'\n        },\n        pointShapeFormatter: {\n          title: 'Point shape format function, f(ctx, x, y, radius, shadow)',\n          type: 'string',\n          default: 'var size = radius * Math.sqrt(Math.PI) / 2;\\n' +\n            'ctx.moveTo(x - size, y - size);\\n' +\n            'ctx.lineTo(x + size, y + size);\\n' +\n            'ctx.moveTo(x - size, y + size);\\n' +\n            'ctx.lineTo(x + size, y - size);'\n        },\n        showPointsLineWidth: {\n          title: 'Line width of points',\n          type: 'number',\n          default: 5\n        },\n        showPointsRadius: {\n          title: 'Radius of points',\n          type: 'number',\n          default: 3\n        },\n        tooltipValueFormatter: {\n          title: 'Tooltip value format function, f(value)',\n          type: 'string',\n          default: ''\n        },\n        showSeparateAxis: {\n          title: 'Show separate axis',\n          type: 'boolean',\n          default: false\n        },\n        axisMin: {\n          title: 'Minimum value on the axis scale',\n          type: 'number',\n          default: null\n        },\n        axisMax: {\n          title: 'Maximum value on the axis scale',\n          type: 'number',\n          default: null\n        },\n        axisTitle: {\n          title: 'Axis title',\n          type: 'string',\n          default: ''\n        },\n        axisTickDecimals: {\n          title: 'Axis tick number of digits after floating point',\n          type: 'number',\n          default: null\n        },\n        axisTickSize: {\n          title: 'Axis step size between ticks',\n          type: 'number',\n          default: null\n        },\n        axisPosition: {\n          title: 'Axis position',\n          type: 'string',\n          default: 'left'\n        },\n        axisTicksFormatter: {\n          title: 'Ticks formatter function, f(value)',\n          type: 'string',\n          default: ''\n        }\n      },\n      required: ['showLines', 'fillLines', 'showPoints']\n    },\n    form: [\n      'hideDataByDefault',\n      'disableDataHiding',\n      'removeFromLegend',\n      'excludeFromStacking',\n      'showLines',\n      'fillLines',\n      'showPoints',\n      {\n        key: 'showPointShape',\n        type: 'rc-select',\n        multiple: false,\n        items: [\n          {\n            value: 'circle',\n            label: 'Circle'\n          },\n          {\n            value: 'cross',\n            label: 'Cross'\n          },\n          {\n            value: 'diamond',\n            label: 'Diamond'\n          },\n          {\n            value: 'square',\n            label: 'Square'\n          },\n          {\n            value: 'triangle',\n            label: 'Triangle'\n          },\n          {\n            value: 'custom',\n            label: 'Custom function'\n          }\n        ]\n      },\n      {\n        key: 'pointShapeFormatter',\n        type: 'javascript',\n        helpId: 'widget/lib/flot/point_shape_format_fn'\n      },\n      'showPointsLineWidth',\n      'showPointsRadius',\n      {\n        key: 'tooltipValueFormatter',\n        type: 'javascript',\n        helpId: 'widget/lib/flot/tooltip_value_format_fn'\n      },\n      'showSeparateAxis',\n      'axisMin',\n      'axisMax',\n      'axisTitle',\n      'axisTickDecimals',\n      'axisTickSize',\n      {\n        key: 'axisPosition',\n        type: 'rc-select',\n        multiple: false,\n        items: [\n          {\n            value: 'left',\n            label: 'Left'\n          },\n          {\n            value: 'right',\n            label: 'Right'\n          }\n        ]\n      },\n      {\n        key: 'axisTicksFormatter',\n        type: 'javascript',\n        helpId: 'widget/lib/flot/ticks_formatter_fn'\n      }\n    ]\n  };\n\n  const properties = schema.schema.properties;\n  if (chartType === 'graph' || chartType === 'bar') {\n    properties.thresholds = {\n      title: 'Thresholds',\n      type: 'array',\n      items: {\n        title: 'Threshold',\n        type: 'object',\n        properties: {\n          thresholdValueSource: {\n            title: 'Threshold value source',\n            type: 'string',\n            default: 'predefinedValue'\n          },\n          thresholdEntityAlias: {\n            title: 'Thresholds source entity alias',\n            type: 'string'\n          },\n          thresholdAttribute: {\n            title: 'Threshold source entity attribute',\n            type: 'string'\n          },\n          thresholdValue: {\n            title: 'Threshold value (if predefined value is selected)',\n            type: 'number'\n          },\n          lineWidth: {\n            title: 'Line width',\n            type: 'number'\n          },\n          color: {\n            title: 'Color',\n            type: 'string'\n          }\n        }\n      },\n      required: []\n    };\n    schema.form.push({\n      key: 'thresholds',\n      items: [\n        {\n          key: 'thresholds[].thresholdValueSource',\n          type: 'rc-select',\n          multiple: false,\n          items: [\n            {\n              value: 'predefinedValue',\n              label: 'Predefined value (Default)'\n            },\n            {\n              value: 'entityAttribute',\n              label: 'Value taken from entity attribute'\n            }\n          ]\n        },\n        'thresholds[].thresholdValue',\n        'thresholds[].thresholdEntityAlias',\n        'thresholds[].thresholdAttribute',\n        {\n          key: 'thresholds[].color',\n          type: 'color'\n        },\n        'thresholds[].lineWidth'\n      ]\n    });\n    properties.comparisonSettings = {\n      title: 'Comparison Settings',\n      type: 'object',\n      properties: {\n        showValuesForComparison: {\n          title: 'Show historical values for comparison',\n          type: 'boolean',\n          default: true\n        },\n        comparisonValuesLabel: {\n          title: 'Historical values label',\n          type: 'string',\n          default: ''\n        },\n        color: {\n          title: 'Color',\n          type: 'string',\n          default: ''\n        }\n      },\n      required: ['showValuesForComparison']\n    };\n    schema.form.push({\n      key: 'comparisonSettings',\n      items: [\n        'comparisonSettings.showValuesForComparison',\n        'comparisonSettings.comparisonValuesLabel',\n        {\n          key: 'comparisonSettings.color',\n          type: 'color'\n        }\n      ]\n    });\n  }\n\n  return schema;\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\n\nimport { WidgetContext } from '@home/models/widget-component.models';\nimport {\n  createLabelFromDatasource,\n  deepClone,\n  insertVariable,\n  isDefined,\n  isDefinedAndNotNull,\n  isEqual,\n  isNumber,\n  isNumeric,\n  isUndefined\n} from '@app/core/utils';\nimport { IWidgetSubscription, WidgetSubscriptionOptions } from '@core/api/widget-api.models';\nimport {\n  DataKey,\n  Datasource,\n  DatasourceData,\n  DatasourceType,\n  JsonSettingsSchema,\n  widgetType\n} from '@app/shared/models/widget.models';\nimport {\n  ChartType,\n  flotDatakeySettingsSchema,\n  flotPieDatakeySettingsSchema,\n  flotPieSettingsSchema,\n  flotSettingsSchema,\n  TbFlotAxisOptions,\n  TbFlotHoverInfo,\n  TbFlotKeySettings,\n  TbFlotPlotAxis,\n  TbFlotPlotDataSeries,\n  TbFlotPlotItem,\n  TbFlotSeries,\n  TbFlotSeriesHoverInfo,\n  TbFlotSettings,\n  TbFlotThresholdKeySettings,\n  TbFlotThresholdMarking,\n  TbFlotTicksFormatterFunction,\n  TooltipValueFormatFunction\n} from './flot-widget.models';\nimport * as moment_ from 'moment';\nimport * as tinycolor_ from 'tinycolor2';\nimport { AggregationType } from '@shared/models/time/time.models';\nimport { CancelAnimationFrame } from '@core/services/raf.service';\nimport { UtilsService } from '@core/services/utils.service';\nimport { DataKeyType } from '@shared/models/telemetry/telemetry.models';\nimport Timeout = NodeJS.Timeout;\n\nconst tinycolor = tinycolor_;\nconst moment = moment_;\n\nconst flotPieSettingsSchemaValue = flotPieSettingsSchema;\nconst flotPieDatakeySettingsSchemaValue = flotPieDatakeySettingsSchema;\n\nexport class TbFlot {\n\n  private readonly utils: UtilsService;\n\n  private settings: TbFlotSettings;\n  private comparisonEnabled: boolean;\n\n  private tooltip: JQuery<any>;\n\n  private readonly yAxisTickFormatter: TbFlotTicksFormatterFunction;\n  private readonly yaxis: TbFlotAxisOptions;\n  private readonly xaxis: TbFlotAxisOptions;\n  private yaxes: Array<TbFlotAxisOptions>;\n\n  private readonly options: JQueryPlotOptions;\n  private subscription: IWidgetSubscription;\n  private $element: JQuery<any>;\n\n  private readonly trackUnits: string;\n  private readonly trackDecimals: number;\n  private readonly tooltipIndividual: boolean;\n  private readonly tooltipCumulative: boolean;\n  private readonly hideZeros: boolean;\n\n  private readonly defaultBarWidth: number;\n\n  private thresholdsSourcesSubscription: IWidgetSubscription;\n  private predefinedThresholds: TbFlotThresholdMarking[];\n\n  private labelPatternsSourcesSubscription: IWidgetSubscription;\n  private labelPatternsSourcesData: DatasourceData[];\n\n  private plotInited = false;\n  private plot: JQueryPlot;\n\n  private createPlotTimeoutHandle: Timeout;\n  private updateTimeoutHandle: Timeout;\n  private resizeTimeoutHandle: Timeout;\n\n  private mouseEventsEnabled: boolean;\n  private isMouseInteraction = false;\n  private flotHoverHandler = this.onFlotHover.bind(this);\n  private flotSelectHandler = this.onFlotSelect.bind(this);\n  private dblclickHandler = this.onFlotDblClick.bind(this);\n  private mousedownHandler = this.onFlotMouseDown.bind(this);\n  private mouseupHandler = this.onFlotMouseUp.bind(this);\n  private mouseleaveHandler = this.onFlotMouseLeave.bind(this);\n  private flotClickHandler = this.onFlotClick.bind(this);\n\n  private readonly showTooltip: boolean;\n  private readonly animatedPie: boolean;\n  private pieDataAnimationDuration: number;\n  private pieData: DatasourceData[];\n  private pieRenderedData: any[];\n  private pieTargetData: any[];\n  private pieAnimationStartTime: number;\n  private pieAnimationLastTime: number;\n  private pieAnimationCaf: CancelAnimationFrame;\n\n  static pieSettingsSchema(): JsonSettingsSchema {\n    return flotPieSettingsSchemaValue;\n  }\n\n  static pieDatakeySettingsSchema(): JsonSettingsSchema {\n    return flotPieDatakeySettingsSchemaValue;\n  }\n\n  static settingsSchema(chartType: ChartType): JsonSettingsSchema {\n    return flotSettingsSchema(chartType);\n  }\n\n  static datakeySettingsSchema(defaultShowLines: boolean, chartType: ChartType): JsonSettingsSchema {\n    return flotDatakeySettingsSchema(defaultShowLines, chartType);\n  }\n\n  constructor(private ctx: WidgetContext, private readonly chartType: ChartType) {\n    this.chartType = this.chartType || 'line';\n    this.settings = ctx.settings as TbFlotSettings;\n    this.utils = this.ctx.$injector.get(UtilsService);\n    this.showTooltip = isDefined(this.settings.showTooltip) ? this.settings.showTooltip : true;\n    this.tooltip = this.showTooltip ? $('#flot-series-tooltip') : null;\n    if (this.tooltip?.length === 0) {\n      this.tooltip = this.createTooltipElement();\n    }\n\n    this.trackDecimals = ctx.decimals;\n    this.trackUnits = ctx.units;\n    this.tooltipIndividual = this.chartType === 'pie' || (isDefined(this.settings.tooltipIndividual)\n      ? this.settings.tooltipIndividual : false);\n    this.tooltipCumulative = isDefined(this.settings.tooltipCumulative) ? this.settings.tooltipCumulative : false;\n    this.hideZeros = isDefined(this.settings.hideZeros) ? this.settings.hideZeros : false;\n\n    const font = {\n      color: this.settings.fontColor || '#545454',\n      size: this.settings.fontSize || 10,\n      family: 'Roboto'\n    };\n\n    this.options = {\n      title: null,\n      subtitile: null,\n      shadowSize: isDefined(this.settings.shadowSize) ? this.settings.shadowSize : 4,\n      HtmlText: false,\n      grid: {\n        hoverable: true,\n        mouseActiveRadius: 10,\n        autoHighlight: this.tooltipIndividual === true,\n        markings: []\n      },\n      selection : { mode : 'x' },\n      legend : {\n        show: false\n      }\n    };\n\n    if (this.chartType === 'line' || this.chartType === 'bar' || this.chartType === 'state') {\n      this.options.xaxes = [];\n      this.xaxis = {\n        mode: 'time',\n        timezone: 'browser',\n        font: deepClone(font),\n        labelFont: deepClone(font)\n      };\n      this.yaxis = {\n        font: deepClone(font),\n        labelFont: deepClone(font)\n      };\n      if (this.settings.xaxis) {\n        this.xaxis.font.color = this.settings.xaxis.color || this.xaxis.font.color;\n        this.xaxis.label = this.utils.customTranslation(this.settings.xaxis.title, this.settings.xaxis.title) || null;\n        this.xaxis.labelFont.color = this.xaxis.font.color;\n        this.xaxis.labelFont.size = this.xaxis.font.size + 2;\n        this.xaxis.labelFont.weight = 'bold';\n      }\n\n      this.yAxisTickFormatter = this.formatYAxisTicks.bind(this);\n\n      this.yaxis.tickFormatter = this.yAxisTickFormatter;\n\n      if (this.settings.yaxis) {\n        this.yaxis.font.color = this.settings.yaxis.color || this.yaxis.font.color;\n        this.yaxis.min = isDefined(this.settings.yaxis.min) ? this.settings.yaxis.min : null;\n        this.yaxis.max = isDefined(this.settings.yaxis.max) ? this.settings.yaxis.max : null;\n        this.yaxis.label = this.utils.customTranslation(this.settings.yaxis.title, this.settings.yaxis.title) || null;\n        this.yaxis.labelFont.color = this.yaxis.font.color;\n        this.yaxis.labelFont.size = this.yaxis.font.size + 2;\n        this.yaxis.labelFont.weight = 'bold';\n        if (isNumber(this.settings.yaxis.tickSize)) {\n          this.yaxis.tickSize = this.settings.yaxis.tickSize;\n        } else {\n          this.yaxis.tickSize = null;\n        }\n        if (isNumber(this.settings.yaxis.tickDecimals)) {\n          this.yaxis.tickDecimals = this.settings.yaxis.tickDecimals;\n        } else {\n          this.yaxis.tickDecimals = null;\n        }\n        if (this.settings.yaxis.ticksFormatter && this.settings.yaxis.ticksFormatter.length) {\n          try {\n            this.yaxis.ticksFormatterFunction = new Function('value',\n                                               this.settings.yaxis.ticksFormatter) as TbFlotTicksFormatterFunction;\n          } catch (e) {\n            this.yaxis.ticksFormatterFunction = null;\n          }\n        }\n      }\n\n      this.options.grid.borderWidth = 1;\n      this.options.grid.color = this.settings.fontColor || '#545454';\n\n      if (this.settings.grid) {\n        this.options.grid.color = this.settings.grid.color || '#545454';\n        this.options.grid.backgroundColor = this.settings.grid.backgroundColor || null;\n        this.options.grid.tickColor = this.settings.grid.tickColor || '#DDDDDD';\n        this. options.grid.borderWidth = isDefined(this.settings.grid.outlineWidth) ?\n          this.settings.grid.outlineWidth : 1;\n        if (this.settings.grid.verticalLines === false) {\n          this.xaxis.tickLength = 0;\n        }\n        if (this.settings.grid.horizontalLines === false) {\n          this.yaxis.tickLength = 0;\n        }\n        if (isDefined(this.settings.grid.margin)) {\n          this.options.grid.margin = this.settings.grid.margin;\n        }\n        if (isDefined(this.settings.grid.minBorderMargin)) {\n          this.options.grid.minBorderMargin = this.settings.grid.minBorderMargin;\n        }\n      }\n\n      this.options.xaxes[0] = deepClone(this.xaxis);\n      if (this.settings.xaxis && this.settings.xaxis.showLabels === false) {\n        this.options.xaxes[0].tickFormatter = () => {\n          return '';\n        };\n      }\n\n      this.options.series = {};\n\n      this.options.crosshair = {\n        mode: 'x'\n      };\n\n      if (this.chartType === 'line' && this.settings.smoothLines) {\n        this.options.series.curvedLines = {\n          active: true,\n          monotonicFit: true\n        };\n      }\n\n      if ((this.chartType === 'line' || this.chartType === 'bar') && isFinite(this.settings.thresholdsLineWidth)) {\n        this.options.grid.markingsLineWidth = this.settings.thresholdsLineWidth;\n      }\n\n      if (this.chartType === 'bar') {\n        this.options.series.lines = {\n          show: false,\n          fill: false,\n          steps: false\n        };\n        this.options.series.bars = {\n          show: true,\n          lineWidth: 0,\n          fill: 0.9,\n          align: this.settings.barAlignment || 'left'\n        };\n        this.defaultBarWidth = this.settings.defaultBarWidth || 600;\n      }\n\n      if (this.chartType === 'state') {\n        this.options.series.lines = {\n          steps: true,\n          show: true\n        };\n      }\n    } else if (this.chartType === 'pie') {\n      this.options.series = {\n        pie: {\n          show: true,\n          label: {\n            show: this.settings.showLabels === true\n          },\n          radius: this.settings.radius || 1,\n          innerRadius: this.settings.innerRadius || 0,\n          stroke: {\n            color: '#fff',\n            width: 0\n          },\n          tilt: this.settings.tilt || 1,\n          shadow: {\n            left: 5,\n            top: 15,\n            alpha: 0.02\n          }\n        }\n      };\n\n      this.options.grid.clickable = true;\n\n      if (this.settings.stroke) {\n        this.options.series.pie.stroke.color = this.settings.stroke.color || '#fff';\n        this.options.series.pie.stroke.width = this.settings.stroke.width || 0;\n      }\n\n      if (this.options.series.pie.label.show) {\n        this.options.series.pie.label.formatter = (label, series) => {\n          return `<div class='pie-label'>${series.dataKey.label}<br/>${Math.round(series.percent)}%</div>`;\n        };\n        this.options.series.pie.label.radius = 3 / 4;\n        this.options.series.pie.label.background = {\n          opacity: 0.8\n        };\n      }\n\n      // Experimental\n      this.animatedPie = this.settings.animatedPie === true;\n    }\n\n    if (this.ctx.defaultSubscription) {\n      this.init(this.ctx.$container, this.ctx.defaultSubscription);\n    }\n  }\n\n  private init($element: JQuery<any>, subscription: IWidgetSubscription) {\n    this.$element = $element;\n    this.subscription = subscription;\n    this.comparisonEnabled = this.subscription ? this.subscription.comparisonEnabled : this.settings.comparisonEnabled;\n    if (this.comparisonEnabled) {\n      const xaxis = deepClone(this.xaxis);\n      xaxis.position = 'top';\n      if (this.settings.xaxisSecond) {\n        if (this.settings.xaxisSecond.showLabels === false) {\n          xaxis.tickFormatter = () => {\n            return '';\n          };\n        }\n        xaxis.label = this.utils.customTranslation(this.settings.xaxisSecond.title, this.settings.xaxisSecond.title) || null;\n        xaxis.position = this.settings.xaxisSecond.axisPosition;\n      }\n      xaxis.tickLength = 0;\n      this.options.xaxes.push(xaxis);\n\n      this.options.series.stack = false;\n    } else {\n      this.options.series.stack = this.settings.stack === true;\n    }\n    const colors: string[] = [];\n    this.yaxes = [];\n    const yaxesMap: {[units: string]: TbFlotAxisOptions} = {};\n    const predefinedThresholds: TbFlotThresholdMarking[] = [];\n    const thresholdsDatasources: Datasource[] = [];\n    if (this.settings.customLegendEnabled && this.settings.dataKeysListForLabels?.length) {\n      this.labelPatternsSourcesData = [];\n      const labelPatternsDatasources: Datasource[] = [];\n      this.settings.dataKeysListForLabels.forEach((item) => {\n        item.settings = {};\n      });\n      this.subscription.datasources.forEach((item) => {\n        const datasource: Datasource = {\n          type: item.type,\n          entityType: item.entityType,\n          entityId: item.entityId,\n          dataKeys: this.settings.dataKeysListForLabels\n        };\n        labelPatternsDatasources.push(datasource);\n      });\n      this.subscribeForLabelPatternsSources(labelPatternsDatasources);\n    }\n\n    let tooltipValueFormatFunction: TooltipValueFormatFunction = null;\n    if (this.settings.tooltipValueFormatter && this.settings.tooltipValueFormatter.length) {\n      try {\n        tooltipValueFormatFunction = new Function('value', this.settings.tooltipValueFormatter) as TooltipValueFormatFunction;\n      } catch (e) {\n        tooltipValueFormatFunction = null;\n      }\n    }\n\n    for (let i = 0; i < this.subscription.data.length; i++) {\n      const series = this.subscription.data[i] as TbFlotSeries;\n      colors.push(series.dataKey.color);\n      const keySettings = series.dataKey.settings;\n      series.dataKey.tooltipValueFormatFunction = tooltipValueFormatFunction;\n      if (keySettings.tooltipValueFormatter && keySettings.tooltipValueFormatter.length) {\n        try {\n          series.dataKey.tooltipValueFormatFunction = new Function('value',\n            keySettings.tooltipValueFormatter) as TooltipValueFormatFunction;\n        } catch (e) {\n          series.dataKey.tooltipValueFormatFunction = tooltipValueFormatFunction;\n        }\n      }\n      series.lines = {\n        fill: keySettings.fillLines === true\n      };\n\n      if (this.settings.stack && !this.comparisonEnabled) {\n        series.stack = !keySettings.excludeFromStacking;\n      } else {\n        series.stack = false;\n      }\n\n      if (this.chartType === 'line' || this.chartType === 'state') {\n        series.lines.show = keySettings.showLines !== false;\n      } else {\n        series.lines.show = keySettings.showLines === true;\n      }\n      if (isDefined(keySettings.lineWidth) && keySettings.lineWidth !== null) {\n        series.lines.lineWidth = keySettings.lineWidth;\n      }\n      series.points = {\n        show: false,\n        radius: 8\n      };\n      if (keySettings.showPoints === true) {\n        series.points.show = true;\n        series.points.lineWidth = isDefined(keySettings.showPointsLineWidth) ? keySettings.showPointsLineWidth : 5;\n        series.points.radius = isDefined(keySettings.showPointsRadius) ? keySettings.showPointsRadius : 3;\n        series.points.symbol = isDefined(keySettings.showPointShape) ? keySettings.showPointShape : 'circle';\n        if (series.points.symbol === 'custom' && keySettings.pointShapeFormatter) {\n          try {\n            series.points.symbol = new Function('ctx, x, y, radius, shadow', keySettings.pointShapeFormatter);\n          } catch (e) {\n            series.points.symbol = 'circle';\n          }\n        }\n      }\n      if (this.chartType === 'line' && this.settings.smoothLines && !series.points.show) {\n        series.curvedLines = {\n          apply: true\n        };\n      }\n\n      const lineColor = tinycolor(series.dataKey.color);\n      lineColor.setAlpha(.75);\n\n      series.highlightColor = lineColor.toRgbString();\n\n      if (series.datasource.isAdditional) {\n        series.xaxisIndex = 1;\n        series.xaxis = 2;\n      } else {\n        series.xaxisIndex = 0;\n        series.xaxis = 1;\n      }\n\n      if (this.yaxis) {\n        const units = series.dataKey.units && series.dataKey.units.length ? series.dataKey.units : this.trackUnits;\n        let yaxis: TbFlotAxisOptions;\n        if (keySettings.showSeparateAxis) {\n          yaxis = this.createYAxis(keySettings, units);\n          this.yaxes.push(yaxis);\n        } else {\n          yaxis = yaxesMap[units];\n          if (!yaxis) {\n            yaxis = this.createYAxis(keySettings, units);\n            yaxesMap[units] = yaxis;\n            this.yaxes.push(yaxis);\n          }\n        }\n        series.yaxisIndex = this.yaxes.indexOf(yaxis);\n        series.yaxis = series.yaxisIndex + 1;\n        yaxis.keysInfo[i] = {hidden: false};\n        yaxis.show = true;\n\n        if (keySettings.thresholds && keySettings.thresholds.length) {\n          for (const threshold of keySettings.thresholds) {\n            if (threshold.thresholdValueSource === 'predefinedValue' && isFinite(threshold.thresholdValue)) {\n              const colorIndex = this.subscription.data.length + predefinedThresholds.length;\n              this.generateThreshold(predefinedThresholds, series.yaxis, threshold.lineWidth,\n                threshold.color, colorIndex, threshold.thresholdValue);\n            } else if (threshold.thresholdEntityAlias && threshold.thresholdAttribute) {\n              const entityAliasId = this.ctx.aliasController.getEntityAliasId(threshold.thresholdEntityAlias);\n              if (!entityAliasId) {\n                continue;\n              }\n              let datasource = thresholdsDatasources.filter((thresholdDatasource) => {\n                return thresholdDatasource.entityAliasId === entityAliasId;\n              })[0];\n              const dataKey: DataKey = {\n                type: DataKeyType.attribute,\n                name: threshold.thresholdAttribute,\n                label: threshold.thresholdAttribute,\n                settings: {\n                  yaxis: series.yaxis,\n                  lineWidth: threshold.lineWidth,\n                  color: threshold.color\n                } as TbFlotThresholdKeySettings,\n                _hash: Math.random()\n              };\n              if (datasource) {\n                datasource.dataKeys.push(dataKey);\n              } else {\n                datasource = {\n                  type: DatasourceType.entity,\n                  name: threshold.thresholdEntityAlias,\n                  aliasName: threshold.thresholdEntityAlias,\n                  entityAliasId,\n                  dataKeys: [ dataKey ]\n                };\n                thresholdsDatasources.push(datasource);\n              }\n            }\n          }\n        }\n      }\n      if (this.labelPatternsSourcesData?.length) {\n        this.substituteLabelPatterns(series, i);\n      }\n    }\n\n    this.subscribeForThresholdsAttributes(thresholdsDatasources);\n    this.options.grid.markings = predefinedThresholds;\n    this.predefinedThresholds = predefinedThresholds;\n\n    this.options.colors = colors;\n    this.options.yaxes = deepClone(this.yaxes);\n    if (this.chartType === 'line' || this.chartType === 'bar' || this.chartType === 'state') {\n      if (this.chartType === 'bar') {\n        if (this.subscription.timeWindowConfig.aggregation &&\n          this.subscription.timeWindowConfig.aggregation.type === AggregationType.NONE) {\n          this.options.series.bars.barWidth = this.defaultBarWidth;\n        } else {\n          this.options.series.bars.barWidth = this.subscription.timeWindow.interval * 0.6;\n        }\n      }\n      this.options.xaxes[0].min = this.subscription.timeWindow.minTime;\n      this.options.xaxes[0].max = this.subscription.timeWindow.maxTime;\n      if (this.comparisonEnabled) {\n        this.options.xaxes[1].min = this.subscription.comparisonTimeWindow.minTime;\n        this.options.xaxes[1].max = this.subscription.comparisonTimeWindow.maxTime;\n      }\n    }\n\n    this.checkMouseEvents();\n\n    if (this.plot) {\n      this.plot.destroy();\n    }\n    if (this.chartType === 'pie' && this.animatedPie) {\n      this.pieDataAnimationDuration = 250;\n      this.pieData = deepClone(this.subscription.data);\n      this.pieRenderedData = [];\n      this.pieTargetData = [];\n      for (let i = 0; i < this.subscription.data.length; i++) {\n        this.pieTargetData[i] = (this.subscription.data[i].data && this.subscription.data[i].data[0])\n          ? this.subscription.data[i].data[0][1] : 0;\n      }\n      this.pieDataRendered();\n    }\n    this.plotInited = true;\n    this.createPlot();\n  }\n\n  public update() {\n    if (this.updateTimeoutHandle) {\n      clearTimeout(this.updateTimeoutHandle);\n      this.updateTimeoutHandle = null;\n    }\n    if (this.subscription) {\n      if (!this.isMouseInteraction && this.plot) {\n        if (this.chartType === 'line' || this.chartType === 'bar' || this.chartType === 'state') {\n\n          let axisVisibilityChanged = false;\n          if (this.yaxis) {\n            for (let i = 0; i < this.subscription.data.length; i++) {\n              const series = this.subscription.data[i] as TbFlotSeries;\n              const yaxisIndex = series.yaxisIndex;\n              if (this.yaxes[yaxisIndex].keysInfo[i].hidden !== series.dataKey.hidden) {\n                this.yaxes[yaxisIndex].keysInfo[i].hidden = series.dataKey.hidden;\n                axisVisibilityChanged = true;\n              }\n\n              if (this.labelPatternsSourcesData?.length) {\n                this.substituteLabelPatterns(series, i);\n              }\n            }\n            if (axisVisibilityChanged) {\n              this.options.yaxes.length = 0;\n              this.yaxes.forEach((yaxis) => {\n                let hidden = true;\n                yaxis.keysInfo.forEach((info) => {\n                  if (info) {\n                    hidden = hidden && info.hidden;\n                  }\n                });\n                yaxis.hidden = hidden;\n                let newIndex = 1;\n                if (!yaxis.hidden) {\n                  this.options.yaxes.push(yaxis);\n                  newIndex = this.options.yaxes.length;\n                }\n                for (let k = 0; k < yaxis.keysInfo.length; k++) {\n                  if (yaxis.keysInfo[k]) {\n                    (this.subscription.data[k] as TbFlotSeries).yaxis = newIndex;\n                  }\n                }\n\n              });\n              this.options.yaxis = {\n                show: this.options.yaxes.length ? true : false\n              };\n            }\n          }\n\n          this.options.xaxes[0].min = this.subscription.timeWindow.minTime;\n          this.options.xaxes[0].max = this.subscription.timeWindow.maxTime;\n          if (this.comparisonEnabled) {\n            this.options.xaxes[1].min = this.subscription.comparisonTimeWindow.minTime;\n            this.options.xaxes[1].max = this.subscription.comparisonTimeWindow.maxTime;\n          }\n          if (this.chartType === 'bar') {\n            if (this.subscription.timeWindowConfig.aggregation &&\n              this.subscription.timeWindowConfig.aggregation.type === AggregationType.NONE) {\n              this.options.series.bars.barWidth = this.defaultBarWidth;\n            } else {\n              this.options.series.bars.barWidth = this.subscription.timeWindow.interval * 0.6;\n            }\n          }\n\n          if (axisVisibilityChanged) {\n            this.redrawPlot();\n          } else {\n            this.plot.getOptions().xaxes[0].min = this.subscription.timeWindow.minTime;\n            this.plot.getOptions().xaxes[0].max = this.subscription.timeWindow.maxTime;\n            if (this.comparisonEnabled) {\n              this.plot.getOptions().xaxes[1].min = this.subscription.comparisonTimeWindow.minTime;\n              this.plot.getOptions().xaxes[1].max = this.subscription.comparisonTimeWindow.maxTime;\n            }\n            if (this.chartType === 'bar') {\n              if (this.subscription.timeWindowConfig.aggregation &&\n                this.subscription.timeWindowConfig.aggregation.type === AggregationType.NONE) {\n                this.plot.getOptions().series.bars.barWidth = this.defaultBarWidth;\n              } else {\n                this.plot.getOptions().series.bars.barWidth = this.subscription.timeWindow.interval * 0.6;\n              }\n            }\n            this.updateData();\n          }\n        } else if (this.chartType === 'pie') {\n          if (this.animatedPie) {\n            this.nextPieDataAnimation(true);\n          } else {\n            this.updateData();\n          }\n        }\n      } else if (this.isMouseInteraction && this.plot) {\n        this.updateTimeoutHandle = setTimeout(this.update.bind(this), 30);\n      }\n    }\n  }\n\n  public resize() {\n    if (this.resizeTimeoutHandle) {\n      clearTimeout(this.resizeTimeoutHandle);\n      this.resizeTimeoutHandle = null;\n    }\n    if (this.plot && this.plotInited) {\n      const width = this.$element.width();\n      const height = this.$element.height();\n      if (width && height) {\n        this.plot.resize();\n        if (this.chartType !== 'pie') {\n          this.plot.setupGrid();\n        }\n        this.plot.draw();\n      } else {\n        this.resizeTimeoutHandle = setTimeout(this.resize.bind(this), 30);\n      }\n    }\n  }\n\n  public checkMouseEvents() {\n    const enabled = !this.ctx.isEdit;\n    if (isUndefined(this.mouseEventsEnabled) || this.mouseEventsEnabled !== enabled) {\n      this.mouseEventsEnabled = enabled;\n      if (this.$element) {\n        if (enabled) {\n          this.enableMouseEvents();\n        } else {\n          this.disableMouseEvents();\n        }\n        this.redrawPlot();\n      }\n    }\n  }\n\n  public destroy() {\n    this.cleanup();\n    if (this.tooltip) {\n      this.tooltip.stop(true);\n      this.tooltip.hide();\n    }\n    if (this.plot) {\n      this.plot.destroy();\n      this.plot = null;\n      this.plotInited = false;\n    }\n  }\n\n  private cleanup() {\n    if (this.updateTimeoutHandle) {\n      clearTimeout(this.updateTimeoutHandle);\n      this.updateTimeoutHandle = null;\n    }\n    if (this.createPlotTimeoutHandle) {\n      clearTimeout(this.createPlotTimeoutHandle);\n      this.createPlotTimeoutHandle = null;\n    }\n    if (this.resizeTimeoutHandle) {\n      clearTimeout(this.resizeTimeoutHandle);\n      this.resizeTimeoutHandle = null;\n    }\n  }\n\n  private createPlot() {\n    if (this.createPlotTimeoutHandle) {\n      clearTimeout(this.createPlotTimeoutHandle);\n      this.createPlotTimeoutHandle = null;\n    }\n    if (this.plotInited && !this.plot) {\n      const width = this.$element.width();\n      const height = this.$element.height();\n      if (width && height) {\n        if (this.chartType === 'pie' && this.animatedPie) {\n          this.plot = $.plot(this.$element, this.pieData, this.options) as JQueryPlot;\n        } else {\n          this.plot = $.plot(this.$element, this.subscription.data, this.options) as JQueryPlot;\n        }\n      } else {\n        this.createPlotTimeoutHandle = setTimeout(this.createPlot.bind(this), 30);\n      }\n    }\n  }\n\n  private updateData() {\n    this.plot.setData(this.subscription.data);\n    if (this.chartType !== 'pie') {\n      this.plot.setupGrid();\n    }\n    this.plot.draw();\n  }\n\n  private redrawPlot() {\n    if (this.plot && this.plotInited) {\n      this.plot.destroy();\n      this.plot = null;\n      this.createPlot();\n    }\n  }\n\n  private createYAxis(keySettings: TbFlotKeySettings, units: string): TbFlotAxisOptions {\n    const yaxis = deepClone(this.yaxis);\n    let tickDecimals: number;\n    let tickSize: number;\n    const label = keySettings.axisTitle && keySettings.axisTitle.length ? keySettings.axisTitle : yaxis.label;\n    if (isNumber(keySettings.axisTickDecimals)) {\n      tickDecimals = keySettings.axisTickDecimals;\n    } else {\n      tickDecimals = yaxis.tickDecimals;\n    }\n    if (isNumber(keySettings.axisTickSize)) {\n      tickSize = keySettings.axisTickSize;\n    } else {\n      tickSize = yaxis.tickSize;\n    }\n    const position = keySettings.axisPosition && keySettings.axisPosition.length ? keySettings.axisPosition : 'left';\n    const min = isDefined(keySettings.axisMin) ? keySettings.axisMin : yaxis.min;\n    const max = isDefined(keySettings.axisMax) ? keySettings.axisMax : yaxis.max;\n    yaxis.label = label;\n    yaxis.min = min;\n    yaxis.max = max;\n    yaxis.tickUnits = units;\n    yaxis.tickDecimals = tickDecimals;\n    yaxis.tickSize = tickSize;\n    if (position === 'right' && tickSize === null) {\n      yaxis.alignTicksWithAxis = 1;\n    } else {\n      yaxis.alignTicksWithAxis = null;\n    }\n    yaxis.position = position;\n\n    yaxis.keysInfo = [];\n\n    if (keySettings.axisTicksFormatter && keySettings.axisTicksFormatter.length) {\n      try {\n        yaxis.ticksFormatterFunction = new Function('value', keySettings.axisTicksFormatter) as TbFlotTicksFormatterFunction;\n      } catch (e) {\n        yaxis.ticksFormatterFunction = this.yaxis.ticksFormatterFunction;\n      }\n    }\n    return yaxis;\n  }\n\n  private subscribeForThresholdsAttributes(datasources: Datasource[]) {\n    const thresholdsSourcesSubscriptionOptions: WidgetSubscriptionOptions = {\n      datasources,\n      useDashboardTimewindow: false,\n      type: widgetType.latest,\n      callbacks: {\n        onDataUpdated: (subscription) => this.thresholdsSourcesDataUpdated(subscription.data)\n      }\n    };\n    this.ctx.subscriptionApi.createSubscription(thresholdsSourcesSubscriptionOptions, true).subscribe(\n      (subscription) => {\n        this.thresholdsSourcesSubscription = subscription;\n      }\n    );\n  }\n\n  private thresholdsSourcesDataUpdated(data: DatasourceData[]) {\n    const allThresholds = deepClone(this.predefinedThresholds);\n    data.forEach((keyData) => {\n      if (keyData && keyData.data && keyData.data[0]) {\n        const attrValue = keyData.data[0][1];\n        if (isNumeric(attrValue) && isFinite(attrValue)) {\n          const settings: TbFlotThresholdKeySettings = keyData.dataKey.settings;\n          const colorIndex = this.subscription.data.length + allThresholds.length;\n          this.generateThreshold(allThresholds, settings.yaxis, settings.lineWidth, settings.color, colorIndex, attrValue);\n        }\n      }\n    });\n    this.options.grid.markings = allThresholds;\n    this.redrawPlot();\n  }\n\n  private generateThreshold(existingThresholds: TbFlotThresholdMarking[], yaxis: number, lineWidth: number,\n                            color: string, defaultColorIndex: number, thresholdValue: number) {\n    const marking: TbFlotThresholdMarking = {};\n    let markingYAxis;\n\n    if (yaxis !== 1) {\n      markingYAxis = 'y' + yaxis + 'axis';\n    } else {\n      markingYAxis = 'yaxis';\n    }\n\n    if (isFinite(lineWidth)) {\n      marking.lineWidth = lineWidth;\n    }\n\n    if (isDefined(color)) {\n      marking.color = color;\n    } else {\n      marking.color = this.utils.getMaterialColor(defaultColorIndex);\n    }\n\n    marking[markingYAxis] = {\n      from: thresholdValue,\n      to: thresholdValue\n    };\n\n    const similarMarkings = existingThresholds.filter((existingMarking) => {\n      return isEqual(existingMarking[markingYAxis], marking[markingYAxis]);\n    });\n    if (!similarMarkings.length) {\n      existingThresholds.push(marking);\n    }\n  }\n\n  private subscribeForLabelPatternsSources(datasources: Datasource[]) {\n    const labelPatternsSourcesSubscriptionOptions: WidgetSubscriptionOptions = {\n      datasources,\n      useDashboardTimewindow: false,\n      type: widgetType.latest,\n      callbacks: {\n        onDataUpdated: (subscription) => {\n          this.labelPatternsParamsDataUpdated(subscription.data);\n        }\n      }\n    };\n    this.ctx.subscriptionApi.createSubscription(labelPatternsSourcesSubscriptionOptions, true).subscribe(\n      (subscription) => {\n        this.labelPatternsSourcesSubscription = subscription;\n      }\n    );\n  }\n\n  private labelPatternsParamsDataUpdated(data: DatasourceData[]) {\n    this.labelPatternsSourcesData = data;\n    for (let i = 0; i < this.subscription.data.length; i++) {\n      const series = this.subscription.data[i] as TbFlotSeries;\n      this.substituteLabelPatterns(series, i);\n    }\n    this.updateData();\n    this.ctx.detectChanges();\n  }\n\n  private substituteLabelPatterns(series: TbFlotSeries, seriesIndex: number) {\n    const seriesLabelPatternsSourcesData = this.labelPatternsSourcesData.filter((item) => {\n      return item.datasource.entityId === series.datasource.entityId;\n    });\n    let label = createLabelFromDatasource(series.datasource, series.dataKey.pattern);\n    for (let i = 0; i < seriesLabelPatternsSourcesData.length; i++) {\n      const keyData = seriesLabelPatternsSourcesData[i];\n      if (keyData && keyData.data && keyData.data[0]) {\n        const attrValue = keyData.data[0][1];\n        const attrName = keyData.dataKey.name;\n        if (isDefined(attrValue) && (attrValue !== null)) {\n          label = insertVariable(label, attrName, attrValue);\n        }\n      }\n    }\n    if (isDefined(this.subscription.legendData)) {\n      const targetLegendKeyIndex = this.subscription.legendData.keys.findIndex((key) => {\n        return key.dataIndex === seriesIndex;\n      });\n      if (targetLegendKeyIndex !== -1) {\n        this.subscription.legendData.keys[targetLegendKeyIndex].dataKey.label = label;\n      }\n    }\n    series.dataKey.label = label;\n  }\n\n  private seriesInfoDiv(label: string, color: string, value: any,\n                        units: string, trackDecimals: number, active: boolean,\n                        percent: number, valueFormatFunction: TooltipValueFormatFunction): JQuery<HTMLElement> {\n    const divElement = $('<div></div>');\n    divElement.css({\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'space-between'\n    });\n    const lineSpan = $('<span></span>');\n    lineSpan.css({\n      backgroundColor: color,\n      width: '20px',\n      height: '3px',\n      display: 'inline-block',\n      verticalAlign: 'middle',\n      marginRight: '5px'\n    });\n    divElement.append(lineSpan);\n    const labelSpan = $(`<span>${label}:</span>`);\n    labelSpan.css({\n      marginRight: '10px'\n    });\n    if (active) {\n      labelSpan.css({\n        color: '#FFF',\n        fontWeight: '700'\n      });\n    }\n    divElement.append(labelSpan);\n    let valueContent: string;\n    if (valueFormatFunction) {\n      valueContent = valueFormatFunction(value);\n    } else {\n      valueContent = this.ctx.utils.formatValue(value, trackDecimals, units);\n    }\n    if (isNumber(percent)) {\n      valueContent += ' (' + Math.round(percent) + ' %)';\n    }\n    const valueSpan =  $(`<span>${valueContent}</span>`);\n    valueSpan.css({\n      marginLeft: 'auto',\n      fontWeight: '700'\n    });\n    if (active) {\n      valueSpan.css({\n        color: '#FFF'\n      });\n    }\n    divElement.append(valueSpan);\n    return divElement;\n  }\n\n  private seriesInfoDivFromInfo(seriesHoverInfo: TbFlotSeriesHoverInfo, seriesIndex: number): string {\n    const units = seriesHoverInfo.units && seriesHoverInfo.units.length ? seriesHoverInfo.units : this.trackUnits;\n    const decimals = isDefinedAndNotNull(seriesHoverInfo.decimals) ? seriesHoverInfo.decimals : this.trackDecimals;\n    const divElement = this.seriesInfoDiv(seriesHoverInfo.label, seriesHoverInfo.color,\n      seriesHoverInfo.value, units, decimals, seriesHoverInfo.index === seriesIndex, null, seriesHoverInfo.tooltipValueFormatFunction);\n    return divElement.prop('outerHTML');\n  }\n\n  private createTooltipElement(): JQuery<any> {\n    const tooltip = $('<div id=\"flot-series-tooltip\" class=\"flot-mouse-value\"></div>');\n    tooltip.css({\n      fontSize: '12px',\n      fontFamily: 'Roboto',\n      fontWeight: '300',\n      lineHeight: '18px',\n      opacity: '1',\n      backgroundColor: 'rgba(0,0,0,0.7)',\n      color: '#D9DADB',\n      position: 'absolute',\n      display: 'none',\n      zIndex: '1100',\n      padding: '4px 10px',\n      borderRadius: '4px'\n    }).appendTo('body');\n    return tooltip;\n  }\n\n  private formatPieTooltip(item: TbFlotPlotItem): string {\n    const units = item.series.dataKey.units && item.series.dataKey.units.length ? item.series.dataKey.units : this.trackUnits;\n    const decimals = isDefinedAndNotNull(item.series.dataKey.decimals) ? item.series.dataKey.decimals : this.trackDecimals;\n    const divElement = this.seriesInfoDiv(item.series.dataKey.label, item.series.dataKey.color,\n      item.datapoint[1][0][1], units, decimals, true, item.series.percent, item.series.dataKey.tooltipValueFormatFunction);\n    return divElement.prop('outerHTML');\n  }\n\n  private formatChartTooltip(hoverInfo: TbFlotHoverInfo[], seriesIndex: number): string {\n    let content = '';\n    if (this.tooltipIndividual) {\n      let seriesHoverArray: TbFlotSeriesHoverInfo[];\n      if (hoverInfo[1] && hoverInfo[1].seriesHover.length) {\n        seriesHoverArray = hoverInfo[0].seriesHover.concat(hoverInfo[1].seriesHover);\n      } else {\n        seriesHoverArray = hoverInfo[0].seriesHover;\n      }\n      const found = seriesHoverArray.filter((seriesHover) => {\n        return seriesHover.index === seriesIndex;\n      });\n      if (found && found.length) {\n        const timestamp = parseInt(found[0].time, 10);\n        const date = moment(timestamp).format('YYYY-MM-DD HH:mm:ss');\n        const dateDiv = $('<div>' + date + '</div>');\n        dateDiv.css({\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          padding: '4px',\n          fontWeight: '700'\n        });\n        content += dateDiv.prop('outerHTML');\n        content += this.seriesInfoDivFromInfo(found[0], seriesIndex);\n      }\n    } else {\n      let maxRows: number;\n      if (hoverInfo[1] && hoverInfo[1].seriesHover.length) {\n        maxRows = 5;\n      } else {\n        maxRows = 15;\n      }\n      let columns = 0;\n      if (hoverInfo[1] && (hoverInfo[1].seriesHover.length > hoverInfo[0].seriesHover.length)) {\n        columns = Math.ceil(hoverInfo[1].seriesHover.length / maxRows);\n      } else {\n        columns = Math.ceil(hoverInfo[0].seriesHover.length / maxRows);\n      }\n      hoverInfo.forEach((hoverData) => {\n        if (isNumber(hoverData.time)) {\n          let columnsContent = '';\n          const timestamp = parseInt(hoverData.time, 10);\n          const date = moment(timestamp).format('YYYY-MM-DD HH:mm:ss');\n          const dateDiv = $('<div>' + date + '</div>');\n          dateDiv.css({\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            padding: '4px',\n            fontWeight: '700'\n          });\n          content += dateDiv.prop('outerHTML');\n\n          const seriesDiv = $('<div></div>');\n          seriesDiv.css({\n            display: 'flex',\n            flexDirection: 'row'\n          });\n          for (let c = 0; c < columns; c++) {\n            const columnDiv = $('<div></div>');\n            columnDiv.css({\n              display: 'flex',\n              flexDirection: 'column',\n              flex: '1'\n            });\n            let columnContent = '';\n            for (let i = c * maxRows; i < (c + 1) * maxRows; i++) {\n              if (i >= hoverData.seriesHover.length) {\n                break;\n              }\n              const seriesHoverInfo = hoverData.seriesHover[i];\n              columnContent += this.seriesInfoDivFromInfo(seriesHoverInfo, seriesIndex);\n            }\n            columnDiv.html(columnContent);\n\n            if (columnContent) {\n              if (c > 0) {\n                columnsContent += '<span style=\"min-width: 20px;\"></span>';\n              }\n              columnsContent += columnDiv.prop('outerHTML');\n            }\n          }\n          seriesDiv.html(columnsContent);\n          content += seriesDiv.prop('outerHTML');\n        }\n      });\n    }\n    return content;\n  }\n\n  private formatYAxisTicks(value: number, axis?: TbFlotPlotAxis): string {\n    if (this.settings.yaxis && this.settings.yaxis.showLabels === false) {\n      return '';\n    }\n    if (axis.options.ticksFormatterFunction) {\n      return axis.options.ticksFormatterFunction(value);\n    }\n    const factor = axis.options.tickDecimals ? Math.pow(10, axis.options.tickDecimals) : 1;\n    let formatted = '' + Math.round(value * factor) / factor;\n    if (isDefined(axis.options.tickDecimals) && axis.options.tickDecimals !== null) {\n      const decimal = formatted.indexOf('.');\n      const precision = decimal === -1 ? 0 : formatted.length - decimal - 1;\n      if (precision < axis.options.tickDecimals) {\n        formatted = (precision ? formatted : formatted + '.') + ('' + factor).substr(1, axis.options.tickDecimals - precision);\n      }\n    }\n    if (axis.options.tickUnits) {\n      formatted += ' ' + axis.options.tickUnits;\n    }\n    return formatted;\n  }\n\n  private enableMouseEvents() {\n    this.$element.css('pointer-events', '');\n    this.$element.addClass('mouse-events');\n    this.options.selection = { mode : 'x' };\n    this.$element.bind('plothover', this.flotHoverHandler);\n    this.$element.bind('plotselected', this.flotSelectHandler);\n    this.$element.bind('dblclick', this.dblclickHandler);\n    this.$element.bind('mousedown', this.mousedownHandler);\n    this.$element.bind('mouseup', this.mouseupHandler);\n    this.$element.bind('mouseleave', this.mouseleaveHandler);\n    this.$element.bind('plotclick', this.flotClickHandler);\n  }\n\n  private disableMouseEvents() {\n    this.$element.css('pointer-events', 'none');\n    this.$element.removeClass('mouse-events');\n    this.options.selection = { mode : null };\n    this.$element.unbind('plothover', this.flotHoverHandler);\n    this.$element.unbind('plotselected', this.flotSelectHandler);\n    this.$element.unbind('dblclick', this.dblclickHandler);\n    this.$element.unbind('mousedown', this.mousedownHandler);\n    this.$element.unbind('mouseup', this.mouseupHandler);\n    this.$element.unbind('mouseleave', this.mouseleaveHandler);\n    this.$element.unbind('plotclick', this.flotClickHandler);\n  }\n\n  private onFlotHover(e: any, pos: JQueryPlotPoint, item: TbFlotPlotItem) {\n    if (!this.plot || !this.tooltip) {\n      return;\n    }\n    if ((!this.tooltipIndividual || item) && !this.ctx.isEdit) {\n      const multipleModeTooltip = !this.tooltipIndividual;\n      if (multipleModeTooltip) {\n        this.plot.unhighlight();\n      }\n      const pageX = pos.pageX;\n      const pageY = pos.pageY;\n\n      let tooltipHtml;\n      let hoverInfo: TbFlotHoverInfo[];\n\n      if (this.chartType === 'pie') {\n        tooltipHtml = this.formatPieTooltip(item);\n      } else {\n        hoverInfo = this.getHoverInfo(this.plot.getData(), pos);\n        if (isNumber(hoverInfo[0].time) || (hoverInfo[1] && isNumber(hoverInfo[1].time))) {\n          hoverInfo[0].seriesHover.sort((a, b) => {\n            return b.value - a.value;\n          });\n          if (hoverInfo[1] && hoverInfo[1].seriesHover.length) {\n            hoverInfo[1].seriesHover.sort((a, b) => {\n              return b.value - a.value;\n            });\n          }\n          tooltipHtml = this.formatChartTooltip(hoverInfo, item ? item.seriesIndex : -1);\n        }\n      }\n      if (tooltipHtml) {\n        this.tooltip.html(tooltipHtml)\n          .css({top: 0, left: 0})\n          .fadeIn(200);\n\n        const windowWidth = $( window ).width();\n        const windowHeight = $( window ).height();\n        const tooltipWidth = this.tooltip.width();\n        const tooltipHeight = this.tooltip.height();\n        let left = pageX + 5;\n        let top = pageY + 5;\n        if (windowWidth - pageX < tooltipWidth + 50) {\n          left = pageX - tooltipWidth - 10;\n        }\n        if (windowHeight - pageY < tooltipHeight + 20) {\n          top = pageY - tooltipHeight - 10;\n        }\n        this.tooltip.css({\n          top,\n          left\n        });\n        if (multipleModeTooltip) {\n          hoverInfo.forEach((hoverData) => {\n            hoverData.seriesHover.forEach((seriesHoverInfo) => {\n              this.plot.highlight(seriesHoverInfo.index, seriesHoverInfo.hoverIndex);\n            });\n          });\n        }\n      }\n    } else {\n      this.tooltip.stop(true);\n      this.tooltip.hide();\n      this.plot.unhighlight();\n    }\n  }\n\n  private onFlotSelect(e: any, ranges: JQueryPlotSelectionRanges) {\n    if (!this.plot) {\n      return;\n    }\n    this.plot.clearSelection();\n    this.subscription.onUpdateTimewindow(ranges.xaxis.from, ranges.xaxis.to);\n  }\n\n  private onFlotDblClick() {\n    this.subscription.onResetTimewindow();\n  }\n\n  private onFlotMouseDown() {\n    this.isMouseInteraction = true;\n  }\n\n  private onFlotMouseUp() {\n    this.isMouseInteraction = false;\n  }\n\n  private onFlotMouseLeave() {\n    if (!this.tooltip) {\n      return;\n    }\n    this.tooltip.stop(true);\n    this.tooltip.hide();\n    if (this.plot) {\n      this.plot.unhighlight();\n    }\n    this.isMouseInteraction = false;\n  }\n\n  private onFlotClick(e: any, pos: JQueryPlotPoint, item: TbFlotPlotItem) {\n    if (!this.plot) {\n      return;\n    }\n    this.onPieSliceClick(e, item);\n  }\n\n  private getHoverInfo(seriesList: TbFlotPlotDataSeries[], pos: JQueryPlotPoint): TbFlotHoverInfo[] {\n    let i: number;\n    let series: TbFlotPlotDataSeries;\n    let hoverIndex: number;\n    let hoverDistance: number;\n    let minDistance: number;\n    let pointTime: any;\n    let minTime: any;\n    let minTimeHistorical: any;\n    let hoverData: TbFlotSeriesHoverInfo;\n    let value: any;\n    let lastValue = 0;\n    let minDistanceHistorical: number;\n    let deltaX = 0;\n    const results: TbFlotHoverInfo[] = [{\n      seriesHover: []\n    }];\n    if (this.comparisonEnabled) {\n      results.push({\n        seriesHover: []\n      });\n    }\n    if (this.chartType === 'bar' && this.options.series.bars.align !== 'left') {\n      if (this.options.series.bars.align === 'center') {\n        deltaX = this.options.series.bars.barWidth / 2;\n      } else {\n        deltaX = this.options.series.bars.barWidth;\n      }\n    }\n    for (i = 0; i < seriesList.length; i++) {\n      series = seriesList[i];\n      let posx: number;\n      if (series.datasource.isAdditional) {\n        posx = pos.x2;\n      } else {\n        posx = pos.x;\n      }\n      posx += deltaX;\n      hoverIndex = this.findHoverIndexFromData(posx, series);\n      if (series.data[hoverIndex] && series.data[hoverIndex][0]) {\n        hoverDistance = posx - series.data[hoverIndex][0];\n        pointTime = series.data[hoverIndex][0];\n\n        if (series.datasource.isAdditional) {\n          if (!minDistanceHistorical\n            || (hoverDistance >= 0 && (hoverDistance < minDistanceHistorical || minDistanceHistorical < 0))\n            || (hoverDistance < 0 && hoverDistance > minDistanceHistorical)) {\n            minDistanceHistorical = hoverDistance;\n            minTimeHistorical = pointTime;\n          }\n        } else if (!minDistance\n          || (hoverDistance >= 0 && (hoverDistance < minDistance || minDistance < 0))\n          || (hoverDistance < 0 && hoverDistance > minDistance)) {\n          minDistance = hoverDistance;\n          minTime = pointTime;\n        }\n        if (series.stack) {\n          if (this.tooltipIndividual || !this.tooltipCumulative) {\n            value = series.data[hoverIndex][1];\n          } else {\n            lastValue += series.data[hoverIndex][1];\n            value = lastValue;\n          }\n        } else {\n          value = series.data[hoverIndex][1];\n        }\n        if (series.stack || (series.curvedLines && series.curvedLines.apply)) {\n          hoverIndex = this.findHoverIndexFromDataPoints(posx, series, hoverIndex);\n        }\n        if (!this.hideZeros || value) {\n          hoverData = {\n            value,\n            hoverIndex,\n            color: series.dataKey.color,\n            label: series.dataKey.label,\n            units: series.dataKey.units,\n            decimals: series.dataKey.decimals,\n            tooltipValueFormatFunction: series.dataKey.tooltipValueFormatFunction,\n            time: pointTime,\n            distance: hoverDistance,\n            index: i\n          };\n          if (series.datasource.isAdditional) {\n            results[1].seriesHover.push(hoverData);\n          } else {\n            results[0].seriesHover.push(hoverData);\n          }\n        }\n      }\n    }\n    if (results[1] && results[1].seriesHover.length) {\n      results[1].time = minTimeHistorical;\n    }\n    results[0].time = minTime;\n    return results;\n  }\n\n  private findHoverIndexFromData(posX: number, series: TbFlotPlotDataSeries): number {\n    let lower = 0;\n    let upper = series.data.length - 1;\n    let middle: number;\n    const index: number = null;\n    while (index === null) {\n      if (lower > upper) {\n        return Math.max(upper, 0);\n      }\n      middle = Math.floor((lower + upper) / 2);\n      if (series.data[middle][0] === posX) {\n        return middle;\n      } else if (series.data[middle][0] < posX) {\n        lower = middle + 1;\n      } else {\n        upper = middle - 1;\n      }\n    }\n  }\n\n  private findHoverIndexFromDataPoints(posX: number, series: TbFlotPlotDataSeries, last: number): number {\n    const ps = series.datapoints.pointsize;\n    const initial = last * ps;\n    const len = series.datapoints.points.length;\n    let j: number;\n    for (j = initial; j < len; j += ps) {\n      if ((!series.lines.steps && series.datapoints.points[initial] != null && series.datapoints.points[j] == null)\n        || series.datapoints.points[j] > posX) {\n        return Math.max(j - ps,  0) / ps;\n      }\n    }\n    return j / ps - 1;\n  }\n\n  pieDataRendered() {\n    for (let i = 0; i < this.pieTargetData.length; i++) {\n      const value = this.pieTargetData[i] ? this.pieTargetData[i] : 0;\n      this.pieRenderedData[i] = value;\n      if (!this.pieData[i].data[0]) {\n        this.pieData[i].data[0] = [0, 0];\n      }\n      this.pieData[i].data[0][1] = value;\n    }\n  }\n\n  nextPieDataAnimation(start) {\n    if (start) {\n      this.finishPieDataAnimation();\n      this.pieAnimationStartTime = this.pieAnimationLastTime = Date.now();\n      for (let i = 0;  i < this.subscription.data.length; i++) {\n        this.pieTargetData[i] = (this.subscription.data[i].data && this.subscription.data[i].data[0])\n          ? this.subscription.data[i].data[0][1] : 0;\n      }\n    }\n    if (this.pieAnimationCaf) {\n      this.pieAnimationCaf();\n      this.pieAnimationCaf = null;\n    }\n    this.pieAnimationCaf = this.ctx.$scope.raf.raf(this.onPieDataAnimation.bind(this));\n  }\n\n  onPieDataAnimation() {\n    const time = Date.now();\n    const elapsed = time - this.pieAnimationLastTime; // this.pieAnimationStartTime;\n    const progress = (time - this.pieAnimationStartTime) / this.pieDataAnimationDuration;\n    if (progress >= 1) {\n      this.finishPieDataAnimation();\n    } else {\n      if (elapsed >= 40) {\n        for (let i = 0; i < this.pieTargetData.length; i++) {\n          const prevValue = this.pieRenderedData[i];\n          const targetValue = this.pieTargetData[i];\n          const value = prevValue + (targetValue - prevValue) * progress;\n          if (!this.pieData[i].data[0]) {\n            this.pieData[i].data[0] = [0, 0];\n          }\n          this.pieData[i].data[0][1] = value;\n        }\n        this.plot.setData(this.pieData);\n        this.plot.draw();\n        this.pieAnimationLastTime = time;\n      }\n      this.nextPieDataAnimation(false);\n    }\n  }\n\n  private finishPieDataAnimation() {\n    this.pieDataRendered();\n    this.plot.setData(this.pieData);\n    this.plot.draw();\n  }\n\n  private onPieSliceClick($event: any, item: TbFlotPlotItem) {\n    const descriptors = this.ctx.actionsApi.getActionDescriptors('sliceClick');\n    if ($event && descriptors.length) {\n      $event.stopPropagation();\n      const entityInfo = this.ctx.actionsApi.getActiveEntityInfo();\n      const entityId = entityInfo ? entityInfo.entityId : null;\n      const entityName = entityInfo ? entityInfo.entityName : null;\n      const entityLabel = entityInfo ? entityInfo.entityLabel : null;\n      this.ctx.actionsApi.handleWidgetAction($event, descriptors[0], entityId, entityName, item, entityLabel);\n    }\n  }\n\n}\n"],"sourceRoot":"webpack:///"}