{"version":3,"sources":["./node_modules/flot/src/jquery.flot.js"],"names":["$","isNumeric","obj","parseFloat","Canvas","cls","container","element","children","document","createElement","className","css","direction","position","left","top","appendTo","getContext","window","G_vmlCanvasManager","initElement","Error","context","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","pixelRatio","resize","width","height","textContainer","text","_textCache","prototype","style","restore","save","scale","clear","clearRect","render","cache","layerKey","Object","hasOwnProperty","call","layer","getTextLayer","layerCache","hide","styleKey","styleCache","angleKey","angleCache","key","positions","i","active","rendered","append","splice","detach","length","show","classes","bottom","right","color","insertAfter","addClass","getTextInfo","font","angle","textStyle","info","variant","weight","size","lineHeight","family","html","textWidth","outerWidth","textHeight","outerHeight","radians","Math","PI","sin","cos","a","toFixed","b","c","transformRule","support","leadingWhitespace","cx","cy","transformOrigin","floor","x","y","transform","filter","ac","abs","as","originalWidth","round","addText","halign","valign","clone","push","removeText","Plot","placeholder","data_","options_","plugins","series","options","colors","legend","noColumns","labelFormatter","labelBoxBorderColor","margin","backgroundColor","backgroundOpacity","sorted","xaxis","mode","min","max","autoscaleMargin","inverseTransform","ticks","tickSize","minTickSize","tickFormatter","tickDecimals","tickColor","tickLength","tickWidth","tickHeight","tickFont","label","labelFont","labelPadding","reserveSpace","alignTicksWithAxis","yaxis","xaxes","yaxes","points","radius","lineWidth","fill","fillColor","strokeColor","symbol","lines","steps","bars","barWidth","align","horizontal","zero","shadowSize","highlightColor","grid","aboveData","borderColor","labelMargin","axisMargin","borderWidth","minBorderMargin","markings","markingsColor","markingsLineWidth","clickable","hoverable","autoHighlight","mouseActiveRadius","interaction","redrawOverlayInterval","hooks","highlights","redrawTimeout","surface","overlay","eventHolder","ctx","octx","plotOffset","plotWidth","plotHeight","processOptions","processRawData","processDatapoints","processOffset","drawBackground","drawSeries","draw","bindEvents","drawOverlay","shutdown","plot","setData","setupGrid","getPlaceholder","getCanvas","getPlotOffset","offset","o","getData","getAxes","res","each","concat","_","axis","n","getXAxes","getYAxes","c2p","canvasToAxisCoords","p2c","axisToCanvasCoords","getOptions","highlight","unhighlight","triggerRedrawOverlay","pointOffset","point","parseInt","axisNumber","destroy","removeData","empty","initPlugins","parseOptions","setupCanvases","executeHooks","hook","args","apply","p","init","extend","opts","parse","toString","axisOptions","axisCount","fontSize","fontSizeDefault","replace","fontDefaults","axisLabel","axisLabelPadding","isArray","noTicks","x2axis","y2axis","coloredAreas","coloredAreasColor","getOrCreateAxis","d","parseData","fillInSeriesOptions","processData","s","data","coord","allAxes","grep","pos","used","x1","undefined","y1","axes","number","neededColors","maxIndex","sc","colorPool","colorPoolSize","variation","colori","v","topSentry","Number","POSITIVE_INFINITY","bottomSentry","NEGATIVE_INFINITY","fakeInfinity","MAX_VALUE","j","k","m","ps","val","f","format","updateAxis","datamin","datamax","datapoints","required","autoscale","defaultValue","pointsize","nullify","isNaN","Infinity","xmin","ymin","xmax","ymax","delta","hasClass","remove","unbind","existing","mousemove","onMouseMove","bind","onMouseLeave","click","onClick","clearTimeout","setTransformationHelpers","identity","t","it","measureTickLabels","labelWidth","labelHeight","maxWidth","legacyStyles","allocateAxisBoxFirstPhase","contentWidth","contentHeight","axisPosition","padding","isXAxis","innermost","outermost","first","found","labelInfo","box","allocateAxisBoxSecondPhase","adjustLayoutForThingsStickingOut","minMargin","margins","ceil","showGrid","axisOpts","setRange","allocatedAxes","setupTickGeneration","setTicks","snapRangeToTicks","drawAxisLabels","insertLegend","widen","sqrt","dec","log","LN10","maxDec","magn","pow","norm","tickGenerator","start","floorInBase","NaN","prev","value","factor","formatted","decimal","indexOf","precision","substr","isFunction","otherAxis","niceTicks","extraDec","ts","test","oticks","drawGrid","extractRange","ranges","from","to","tmp","translate","fillStyle","getColorOrGradient","fillRect","bw","bc","markingLayer","markingsUnderGrid","markingsAboveGrid","aboveGrid","drawMarkings","xoff","yoff","strokeStyle","beginPath","moveTo","lineTo","stroke","strokeRect","drawMarking","xrange","yrange","xequal","yequal","subPixel","rounded","roundRect","xPos","yPos","textAlign","toLowerCase","textBaseline","tick","drawSeriesLines","drawSeriesBars","drawSeriesPoints","plotLine","xoffset","yoffset","axisx","axisy","showSteps","prevx","prevy","x2","y2","plotLineArea","areaOpen","ypos","segmentStart","segmentEnd","x1old","x2old","lineJoin","lw","sw","getFillStyle","plotPoints","shadow","arc","closePath","w","drawBar","barLeft","barRight","fillStyleCallback","drawLeft","drawRight","drawTop","drawBottom","plotBars","filloptions","seriesColor","normalize","find","entries","lf","sort","reverse","ascending","table","rowBuffer","entry","colorbox","borderbox","charAt","extract","div","prependTo","findNearbyItem","mouseX","mouseY","seriesFilter","maxDistance","smallestDistance","item","mx","my","maxx","maxy","dx","dy","dist","datapoint","slice","dataIndex","seriesIndex","e","triggerClickHoverEvent","eventname","event","canvasX","pageX","canvasY","pageY","h","auto","trigger","setTimeout","hi","drawBarHighlight","drawPointHighlight","indexOfHighlight","pointRadius","spec","defaultColor","gradient","createLinearGradient","l","co","brightness","opacity","addColorStop","version","fn","base","r","quadraticCurveTo","jQuery"],"mappings":"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","file":"flot-src-jquery-flot-js.js","sourcesContent":["/* Javascript plotting library for jQuery, version 0.9.0-alpha.\n\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\nLicensed under the MIT license.\n\n*/\n\n(function($) {\n\n    // A jquery-esque isNumeric method since we currently support 1.4.4\n    // and $.isNumeric was introduced on in 1.7\n    var isNumeric = $.isNumeric || function(obj) {\n        return obj - parseFloat( obj ) >= 0;\n    };\n\n    /**\n     * The Canvas object is a wrapper around an HTML5 <canvas> tag.\n     *\n     * @constructor\n     * @param {string} cls List of classes to apply to the canvas.\n     * @param {element} container Element onto which to append the canvas.\n     *\n     * Requiring a container is a little iffy, but unfortunately canvas\n     * operations don't work unless the canvas is attached to the DOM.\n     */\n    function Canvas(cls, container) {\n\n        var element = container.children(\".\" + cls)[0];\n\n        if (element == null) {\n\n            element = document.createElement(\"canvas\");\n            element.className = cls;\n\n            $(element).css({ direction: \"ltr\", position: \"absolute\", left: 0, top: 0 })\n                .appendTo(container);\n\n            // If HTML5 Canvas isn't available, fall back to [Ex|Flash]canvas\n            if (!element.getContext) {\n                if (window.G_vmlCanvasManager) {\n                    element = window.G_vmlCanvasManager.initElement(element);\n                } else {\n                    throw new Error(\"Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.\");\n                }\n            }\n        }\n\n        this.element = element;\n\n        var context = this.context = element.getContext(\"2d\"),\n\n            // Determine the screen's ratio of physical to device-independent\n            // pixels.  This is the ratio between the canvas width that the browser\n            // advertises and the number of pixels actually present in that space.\n\n            // The iPhone 4, for example, has a device-independent width of 320px,\n            // but its screen is actually 640px wide.  It therefore has a pixel\n            // ratio of 2, while most normal devices have a ratio of 1.\n            devicePixelRatio = window.devicePixelRatio || 1,\n            backingStoreRatio =\n                context.webkitBackingStorePixelRatio ||\n                context.mozBackingStorePixelRatio ||\n                context.msBackingStorePixelRatio ||\n                context.oBackingStorePixelRatio ||\n                context.backingStorePixelRatio || 1;\n\n        this.pixelRatio = devicePixelRatio / backingStoreRatio;\n\n        // Size the canvas to match the internal dimensions of its container\n        this.resize(container.width(), container.height());\n\n        // Collection of HTML div layers for text overlaid onto the canvas\n        this.textContainer = null;\n        this.text = {};\n\n        // Cache of text fragments and metrics, so we can avoid expensively\n        // re-calculating them when the plot is re-rendered in a loop.\n        this._textCache = {};\n    }\n\n    /**\n     * Resizes the canvas to the given dimensions.\n     *\n     * @param {number} width New width of the canvas, in pixels.\n     * @param {number} height New height of the canvas, in pixels.\n     */\n    Canvas.prototype.resize = function(width, height) {\n\n        if (width <= 0 || height <= 0) {\n            throw new Error(\"Invalid dimensions for plot, width = \" + width + \", height = \" + height);\n        }\n\n        var element = this.element,\n            context = this.context,\n            pixelRatio = this.pixelRatio;\n\n        // Resize the canvas, increasing its density based on the display's\n        // pixel ratio; basically giving it more pixels without increasing the\n        // size of its element, to take advantage of the fact that retina\n        // displays have that many more pixels in the same advertised space.\n\n        // Resizing should reset the state (excanvas seems to be buggy though)\n        if (this.width !== width) {\n            element.width = width * pixelRatio;\n            element.style.width = width + \"px\";\n            this.width = width;\n        }\n\n        if (this.height !== height) {\n            element.height = height * pixelRatio;\n            element.style.height = height + \"px\";\n            this.height = height;\n        }\n\n        // Save the context, so we can reset in case we get replotted.  The\n        // restore ensure that we're really back at the initial state, and\n        // should be safe even if we haven't saved the initial state yet.\n        context.restore();\n        context.save();\n\n        // Scale the coordinate space to match the display density; so even though we\n        // may have twice as many pixels, we still want lines and other drawing to\n        // appear at the same size; the extra pixels will just make them crisper.\n\n        context.scale(pixelRatio, pixelRatio);\n    };\n\n    /**\n     * Clears the entire canvas area, not including any overlaid HTML text\n     */\n    Canvas.prototype.clear = function() {\n        this.context.clearRect(0, 0, this.width, this.height);\n    };\n\n    /**\n     * Finishes rendering the canvas, including managing the text overlay.\n     */\n    Canvas.prototype.render = function() {\n\n        var cache = this._textCache;\n\n        // For each text layer, add elements marked as active that haven't\n        // already been rendered, and remove those that are no longer active.\n        for (var layerKey in cache) {\n            if (Object.prototype.hasOwnProperty.call(cache, layerKey)) {\n\n                var layer = this.getTextLayer(layerKey),\n                    layerCache = cache[layerKey];\n\n                layer.hide();\n\n                for (var styleKey in layerCache) {\n                    if (Object.prototype.hasOwnProperty.call(layerCache, styleKey)) {\n                        var styleCache = layerCache[styleKey];\n                        for (var angleKey in styleCache) {\n                            if (Object.prototype.hasOwnProperty.call(styleCache, angleKey)) {\n                                var angleCache = styleCache[angleKey];\n                                for (var key in angleCache) {\n                                    if (Object.prototype.hasOwnProperty.call(angleCache, key)) {\n\n                                        var positions = angleCache[key].positions;\n\n                                        for (var i = 0, position; position = positions[i]; i++) {\n                                            if (position.active) {\n                                                if (!position.rendered) {\n                                                    layer.append(position.element);\n                                                    position.rendered = true;\n                                                }\n                                            } else {\n                                                positions.splice(i--, 1);\n                                                if (position.rendered) {\n                                                    position.element.detach();\n                                                }\n                                            }\n                                        }\n\n                                        if (positions.length === 0) {\n                                            delete angleCache[key];\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n\n                layer.show();\n            }\n        }\n    };\n\n    /**\n     * Creates (if necessary) and returns the text overlay container.\n     *\n     * @param {string} classes String of space-separated CSS classes used to\n     *     uniquely identify the text layer.\n     * @return {object} The jQuery-wrapped text-layer div.\n     */\n    Canvas.prototype.getTextLayer = function(classes) {\n\n        var layer = this.text[classes];\n\n        // Create the text layer if it doesn't exist\n        if (layer == null) {\n\n            // Create the text layer container, if it doesn't exist\n            if (this.textContainer == null) {\n                this.textContainer = $(\"<div class='flot-text'></div>\")\n                    .css({\n                        position: \"absolute\",\n                        top: 0,\n                        left: 0,\n                        bottom: 0,\n                        right: 0,\n                        \"font-size\": \"smaller\",\n                        color: \"#545454\"\n                    })\n                    .insertAfter(this.element);\n            }\n\n            layer = this.text[classes] = $(\"<div></div>\")\n                .addClass(classes)\n                .css({\n                    position: \"absolute\",\n                    top: 0,\n                    left: 0,\n                    bottom: 0,\n                    right: 0\n                })\n                .appendTo(this.textContainer);\n        }\n\n        return layer;\n    };\n\n    /**\n     * Creates (if necessary) and returns a text info object.\n     *\n     * The object looks like this:\n     *\n     * {\n     *     width: Width of the text's wrapper div.\n     *     height: Height of the text's wrapper div.\n     *     element: The jQuery-wrapped HTML div containing the text.\n     *     positions: Array of positions at which this text is drawn.\n     * }\n     *\n     * The positions array contains objects that look like this:\n     *\n     * {\n     *     active: Flag indicating whether the text should be visible.\n     *     rendered: Flag indicating whether the text is currently visible.\n     *     element: The jQuery-wrapped HTML div containing the text.\n     *     x: X coordinate at which to draw the text.\n     *     y: Y coordinate at which to draw the text.\n     * }\n     *\n     * Each position after the first receives a clone of the original element.\n     *\n     * The idea is that that the width, height, and general 'identity' of the\n     * text is constant no matter where it is placed; the placements are a\n     * secondary property.\n     *\n     * Canvas maintains a cache of recently-used text info objects; getTextInfo\n     * either returns the cached element or creates a new entry.\n     *\n     * @param {string} layer A string of space-separated CSS classes uniquely\n     *     identifying the layer containing this text.\n     * @param {string} text Text string to retrieve info for.\n     * @param {(string|object)=} font Either a string of space-separated CSS\n     *     classes or a font-spec object, defining the text's font and style.\n     * @param {number=} angle Angle at which to rotate the text, in degrees.\n     * @param {number=} width Maximum width of the text before it wraps.\n     * @return {object} a text info object.\n     */\n    Canvas.prototype.getTextInfo = function(layer, text, font, angle, width) {\n\n        var textStyle, layerCache, styleCache, angleCache, info;\n\n        // Cast to string in case we have a number or such\n        text = \"\" + text;\n\n        // Normalize the angle to 0...359\n        angle = (360 + (angle || 0)) % 360;\n\n        // If the font is a font-spec object, generate a CSS font definition\n        if (typeof font === \"object\") {\n            textStyle = font.style + \" \" + font.variant + \" \" + font.weight + \" \" + font.size + \"px/\" + font.lineHeight + \"px \" + font.family;\n        } else {\n            textStyle = font;\n        }\n\n        // Retrieve or create the caches for the text's layer, style, and angle\n        layerCache = this._textCache[layer];\n        if (layerCache == null) {\n            layerCache = this._textCache[layer] = {};\n        }\n\n        styleCache = layerCache[textStyle];\n        if (styleCache == null) {\n            styleCache = layerCache[textStyle] = {};\n        }\n\n        angleCache = styleCache[angle];\n        if (angleCache == null) {\n            angleCache = styleCache[angle] = {};\n        }\n\n        info = angleCache[text];\n\n        // If we can't find a matching element in our cache, create a new one\n        if (info == null) {\n\n            var element = $(\"<div></div>\").html(text)\n                .css({\n                    position: \"absolute\",\n                    \"max-width\": width,\n                    top: -9999\n                })\n                .appendTo(this.getTextLayer(layer));\n\n            if (typeof font === \"object\") {\n                element.css({\n                    font: textStyle,\n                    color: font.color\n                });\n            } else if (typeof font === \"string\") {\n                element.addClass(font);\n            }\n\n            // Save the original dimensions of the text; we'll modify these\n            // later to take into account rotation, if there is any.\n            var textWidth = element.outerWidth(true),\n                textHeight = element.outerHeight(true);\n\n            // Apply rotation to the text using CSS3/IE matrix transforms\n\n            // Note how we also set the element's width, as a work-around for\n            // the way most browsers resize the div on rotate, which may cause\n            // the contents to wrap differently. The extra +1 is because IE\n            // rounds the width differently and needs a little extra help.\n            if (angle) {\n\n                var radians = angle * Math.PI / 180,\n                    sin = Math.sin(radians),\n                    cos = Math.cos(radians),\n\n                    // Use fixed-point so these don't show up in scientific\n                    // notation when we add them to the string\n                    a = cos.toFixed(6),\n                    b = (-sin).toFixed(6),\n                    c = sin.toFixed(6),\n\n                    transformRule;\n\n                // Detect IE7/8 to use microsofts proprietary matrix filter\n                // $.support.leadingWhitespace is false on IE7/8, true on other browsers and\n                // undefined with jQuery greater 2.0, which dropped support for IE7/8.\n                if ($.support.leadingWhitespace !== false) {\n\n                    // The transform origin defaults to '50% 50%', producing\n                    // blurry text on some browsers (Chrome) when the width or\n                    // height happens to be odd, making 50% fractional. Avoid\n                    // this by setting the origin to rounded values.\n                    var cx = textWidth / 2,\n                        cy = textHeight / 2,\n                        transformOrigin = Math.floor(cx) + \"px \" + Math.floor(cy) + \"px\",\n\n                        // Transforms alter the div's appearance without changing\n                        // its origin. This will make it difficult to position it\n                        // later, since we'll be positioning the new bounding box\n                        // with respect to the old origin. We can work around this\n                        // by adding a translation to align the new bounding box's\n                        // top-left corner with the origin, using the same matrix.\n\n                        // Rather than examining all four points, we can use the\n                        // angle to figure out in advance which two points are in\n                        // the top-left quadrant; we can then use the x-coordinate\n                        // of the first (left-most) point and the y-coordinate of\n                        // the second (top-most) point as the bounding box corner.\n                        x, y;\n\n                    if (angle < 90) {\n                        x = Math.floor(cx * cos + cy * sin - cx);\n                        y = Math.floor(cx * sin + cy * cos - cy);\n                    } else if (angle < 180) {\n                        x = Math.floor(cy * sin - cx * cos - cx);\n                        y = Math.floor(cx * sin - cy * cos - cy);\n                    } else if (angle < 270) {\n                        x = Math.floor(-cx * cos - cy * sin - cx);\n                        y = Math.floor(-cx * sin - cy * cos - cy);\n                    } else {\n                        x = Math.floor(cx * cos - cy * sin - cx);\n                        y = Math.floor(cy * cos - cx * sin - cy);\n                    }\n\n                    transformRule = \"matrix(\" + a + \",\" + c + \",\" + b + \",\" + a + \",\" + x + \",\" + y + \")\";\n\n                    element.css({\n                        width: textWidth + 1,\n                        transform: transformRule,\n                        \"-o-transform\": transformRule,\n                        \"-ms-transform\": transformRule,\n                        \"-moz-transform\": transformRule,\n                        \"-webkit-transform\": transformRule,\n                        \"transform-origin\": transformOrigin,\n                        \"-o-transform-origin\": transformOrigin,\n                        \"-ms-transform-origin\": transformOrigin,\n                        \"-moz-transform-origin\": transformOrigin,\n                        \"-webkit-transform-origin\": transformOrigin\n                    });\n\n                } else {\n\n                    // The IE7/8 matrix filter produces very ugly aliasing for\n                    // text with a transparent background. Using a solid color\n                    // greatly improves text clarity, although it does result\n                    // in ugly boxes for plots using a non-white background.\n\n                    // TODO: Instead of white use the actual background color?\n                    // This still wouldn't solve the problem when the plot has\n                    // a gradient background, but it would at least help.\n                    transformRule = \"progid:DXImageTransform.Microsoft.Matrix(M11=\" + a + \", M12=\" + b + \", M21=\" + c + \", M22=\" + a + \",sizingMethod='auto expand')\";\n\n                    element.css({\n                        width: textWidth + 1,\n                        filter: transformRule,\n                        \"-ms-filter\": transformRule,\n                        \"background-color\": \"#fff\"\n                    });\n                }\n\n                // Compute the final dimensions of the text's bounding box\n                var ac = Math.abs(cos),\n                    as = Math.abs(sin),\n                    originalWidth = textWidth;\n                textWidth = Math.round(ac * textWidth + as * textHeight);\n                textHeight = Math.round(as * originalWidth + ac * textHeight);\n            }\n\n            info = angleCache[text] = {\n                width: textWidth,\n                height: textHeight,\n                element: element,\n                positions: []\n            };\n\n            element.detach();\n        }\n\n        return info;\n    };\n\n    /**\n     * Adds a text string to the canvas text overlay.\n     *\n     * The text isn't drawn immediately; it is marked as rendering, which will\n     * result in its addition to the canvas on the next render pass.\n     *\n     * @param {string} layer A string of space-separated CSS classes uniquely\n     *     identifying the layer containing this text.\n     * @param {number} x X coordinate at which to draw the text.\n     * @param {number} y Y coordinate at which to draw the text.\n     * @param {string} text Text string to draw.\n     * @param {(string|object)=} font Either a string of space-separated CSS\n     *     classes or a font-spec object, defining the text's font and style.\n     * @param {number=} angle Angle at which to rotate the text, in degrees.\n     * @param {number=} width Maximum width of the text before it wraps.\n     * @param {string=} halign Horizontal alignment of the text; either \"left\",\n     *     \"center\" or \"right\".\n     * @param {string=} valign Vertical alignment of the text; either \"top\",\n     *     \"middle\" or \"bottom\".\n     */\n    Canvas.prototype.addText = function(layer, x, y, text, font, angle, width, halign, valign) {\n\n        var info = this.getTextInfo(layer, text, font, angle, width),\n            positions = info.positions;\n\n        // Tweak the div's position to match the text's alignment\n        if (halign === \"center\") {\n            x -= info.width / 2;\n        } else if (halign === \"right\") {\n            x -= info.width;\n        }\n\n        if (valign === \"middle\") {\n            y -= info.height / 2;\n        } else if (valign === \"bottom\") {\n            y -= info.height;\n        }\n\n        // Determine whether this text already exists at this position.\n        // If so, mark it for inclusion in the next render pass.\n        for (var i = 0, position; position = positions[i]; i++) {\n            if (position.x === x && position.y === y) {\n                position.active = true;\n                return;\n            }\n        }\n\n        // If the text doesn't exist at this position, create a new entry\n\n        // For the very first position we'll re-use the original element,\n        // while for subsequent ones we'll clone it.\n        position = {\n            active: true,\n            rendered: false,\n            element: positions.length ? info.element.clone() : info.element,\n            x: x,\n            y: y\n        };\n\n        positions.push(position);\n\n        // Move the element to its final position within the container\n        position.element.css({\n            top: Math.round(y),\n            left: Math.round(x),\n\n            // In case the text wraps\n\n            \"text-align\": halign\n        });\n    };\n\n    /**\n     * Removes one or more text strings from the canvas text overlay.\n     *\n     * If no parameters are given, all text within the layer is removed.\n     *\n     * Note that the text is not immediately removed; it is simply marked as\n     * inactive, which will result in its removal on the next render pass.\n     * This avoids the performance penalty for 'clear and redraw' behavior,\n     * where we potentially get rid of all text on a layer, but will likely\n     * add back most or all of it later, as when redrawing axes, for example.\n     *\n     * @param {string} layer A string of space-separated CSS classes uniquely\n     *     identifying the layer containing this text.\n     * @param {number=} x X coordinate of the text.\n     * @param {number=} y Y coordinate of the text.\n     * @param {string=} text Text string to remove.\n     * @param {(string|object)=} font Either a string of space-separated CSS\n     *     classes or a font-spec object, defining the text's font and style.\n     * @param {number=} angle Angle at which the text is rotated, in degrees.\n     *     Angle is currently unused, it will be implemented in the future.\n     */\n    Canvas.prototype.removeText = function(layer, x, y, text, font, angle) {\n        var i, positions, position;\n        if (text == null) {\n            var layerCache = this._textCache[layer];\n            if (layerCache != null) {\n                for (var styleKey in layerCache) {\n                    if (Object.prototype.hasOwnProperty.call(layerCache, styleKey)) {\n                        var styleCache = layerCache[styleKey];\n                        for (var angleKey in styleCache) {\n                            if (Object.prototype.hasOwnProperty.call(styleCache, angleKey)) {\n                                var angleCache = styleCache[angleKey];\n                                for (var key in angleCache) {\n                                    if (Object.prototype.hasOwnProperty.call(angleCache, key)) {\n                                        positions = angleCache[key].positions;\n                                        for (i = 0; position = positions[i]; i++) {\n                                            position.active = false;\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        } else {\n            positions = this.getTextInfo(layer, text, font, angle).positions;\n            for (i = 0; position = positions[i]; i++) {\n                if (position.x === x && position.y === y) {\n                    position.active = false;\n                }\n            }\n        }\n    };\n\n    /**\n     * The top-level container for the entire plot.\n     */\n    function Plot(placeholder, data_, options_, plugins) {\n\n        // data is on the form:\n        //   [ series1, series2 ... ]\n        // where series is either just the data as [ [x1, y1], [x2, y2], ... ]\n        // or { data: [ [x1, y1], [x2, y2], ... ], label: \"some label\", ... }\n        var series = [],\n            options = {\n\n                // the color theme used for graphs\n                colors: [\"#edc240\", \"#afd8f8\", \"#cb4b4b\", \"#4da74d\", \"#9440ed\"],\n                legend: {\n                    show: true,\n\n                    // number of colums in legend table\n                    noColumns: 1,\n\n                    // fn: string -> string\n                    labelFormatter: null,\n\n                    // border color for the little label boxes\n                    labelBoxBorderColor: \"#ccc\",\n\n                    // container (as jQuery object) to put legend in, null means default on top of graph\n                    container: null,\n\n                    // position of default legend container within plot\n                    position: \"ne\",\n\n                    // distance from grid edge to default legend container within plot\n                    margin: 5,\n\n                    // null means auto-detect\n                    backgroundColor: null,\n\n                    // set to 0 to avoid background\n                    backgroundOpacity: 0.85,\n\n                    // default to no legend sorting\n                    sorted: null\n                },\n                xaxis: {\n\n                    // null = auto-detect, true = always, false = never\n\n                    show: null,\n\n                    // or \"top\"\n                    position: \"bottom\",\n\n                    // null or \"time\"\n                    mode: null,\n\n                    // base color, labels, ticks\n                    color: null,\n\n                    // null (derived from CSS in placeholder) or\n                    // object like { size: 11, lineHeight: 13, style: \"italic\", weight: \"bold\", family: \"sans-serif\", variant: \"small-caps\" }\n                    font: null,\n\n                    // min. value to show, null means set automatically\n                    min: null,\n\n                    // max. value to show, null means set automatically\n                    max: null,\n\n                    // margin in % to add if auto-setting min/max\n                    autoscaleMargin: null,\n\n                    // null or f: number -> number to transform axis\n                    transform: null,\n\n                    // if transform is set, this should be the inverse function\n                    inverseTransform: null,\n\n                    // either [1, 3] or [[1, \"a\"], 3] or (fn: axis info -> ticks) or app. number of ticks for auto-ticks\n                    ticks: null,\n\n                    // number or [number, \"unit\"]\n                    tickSize: null,\n\n                    // number or [number, \"unit\"]\n                    minTickSize: null,\n\n                    // fn: number -> string\n                    tickFormatter: null,\n\n                    // no. of decimals, null means auto\n                    tickDecimals: null,\n\n                    // possibly different color of ticks, e.g. \"rgba(0,0,0,0.15)\"\n                    tickColor: null,\n\n                    // size in pixels of ticks, or \"full\" for whole line\n                    tickLength: null,\n\n                    // width of tick labels in pixels\n                    tickWidth: null,\n\n                    // height of tick labels in pixels\n                    tickHeight: null,\n\n                    // null or font-spec object (see font, above)\n                    tickFont: null,\n\n                    // null or an axis label string\n                    label: null,\n\n                    // null or font-spec object (see font, above)\n                    labelFont: null,\n\n                    // spacing between the axis and its label\n                    labelPadding: 2,\n\n                    // whether to reserve space even if axis isn't shown\n                    reserveSpace: null,\n\n                    // axis number or null for no sync\n                    alignTicksWithAxis: null\n                },\n                yaxis: {\n\n                    // also accepts \"right\"\n                    position: \"left\",\n                    autoscaleMargin: 0.02,\n                    labelPadding: 2\n                },\n                xaxes: [],\n                yaxes: [],\n                series: {\n                    points: {\n                        show: false,\n                        radius: 3,\n\n                        // value in pixels\n                        lineWidth: 2,\n                        fill: true,\n                        fillColor: \"#ffffff\",\n                        strokeColor: null,\n\n                        // type or callback\n                        symbol: \"circle\"\n                    },\n\n\n                    lines: {\n\n                        // we don't put in show: false so we can see\n                        // whether lines were actively disabled\n\n                        // value in pixels\n                        lineWidth: 2,\n                        fill: false,\n                        fillColor: null,\n                        steps: false\n\n                        // Omit 'zero', so we can later default its value to\n                        // match that of the 'fill' option.\n                    },\n                    bars: {\n                        show: false,\n\n                        // in pixels\n                        lineWidth: 2,\n\n                        // in units of the x axis\n                        barWidth: 1,\n\n                        fill: true,\n                        fillColor: null,\n\n                        // \"left\", \"right\", or \"center\"\n                        align: \"left\",\n                        horizontal: false,\n                        zero: true\n                    },\n                    shadowSize: 3,\n                    highlightColor: null\n                },\n                grid: {\n                    show: true,\n                    aboveData: false,\n\n                    // primary color used for outline and labels\n                    color: \"#545454\",\n\n                    // null for transparent, else color\n                    backgroundColor: null,\n\n                    // set if different from the grid color\n                    borderColor: null,\n\n                    // color for the ticks, e.g. \"rgba(0,0,0,0.15)\"\n                    tickColor: null,\n\n                    // distance from the canvas edge to the grid\n                    margin: 0,\n\n                    // value in pixels\n                    labelMargin: 5,\n\n                    // value in pixels\n                    axisMargin: 8,\n\n                    // value in pixels\n                    borderWidth: 2,\n\n                    // value in pixels, null means taken from points radius\n                    minBorderMargin: null,\n\n                    // array of ranges or fn: axes -> array of ranges\n                    markings: null,\n                    markingsColor: \"#f4f4f4\",\n                    markingsLineWidth: 2,\n\n                    // interactive stuff\n                    clickable: false,\n                    hoverable: false,\n\n                    // highlight in case mouse is near\n                    autoHighlight: true,\n\n                    // how far the mouse can be away to activate an item\n                    mouseActiveRadius: 10\n                },\n                interaction: {\n\n                    // time between updates, -1 means in same flow\n                    redrawOverlayInterval: 1000 / 60\n                },\n                hooks: {}\n            },\n\n            // interactive features\n            highlights = [],\n            redrawTimeout = null,\n\n            // the canvas for the plot itself\n            surface = null,\n\n            // canvas for interactive stuff on top of plot\n            overlay = null,\n\n            // jQuery object that events should be bound to\n            eventHolder = null,\n            ctx = null,\n            octx = null,\n            xaxes = [],\n            yaxes = [],\n            plotOffset = {\n                left: 0,\n                right: 0,\n                top: 0,\n                bottom: 0\n            },\n            plotWidth = 0,\n            plotHeight = 0,\n            hooks = {\n                processOptions: [],\n                processRawData: [],\n                processDatapoints: [],\n                processOffset: [],\n                drawBackground: [],\n                drawSeries: [],\n                draw: [],\n                bindEvents: [],\n                drawOverlay: [],\n                shutdown: []\n            },\n            plot = this;\n\n        // public functions\n        plot.setData = setData;\n        plot.setupGrid = setupGrid;\n        plot.draw = draw;\n        plot.getPlaceholder = function() { return placeholder; };\n        plot.getCanvas = function() { return surface.element; };\n        plot.getPlotOffset = function() { return plotOffset; };\n        plot.width = function() { return plotWidth; };\n        plot.height = function() { return plotHeight; };\n        plot.offset = function() {\n            var o = eventHolder.offset();\n            o.left += plotOffset.left;\n            o.top += plotOffset.top;\n            return o;\n        };\n        plot.getData = function() { return series; };\n        plot.getAxes = function() {\n            var res = {};\n            $.each(xaxes.concat(yaxes), function(_, axis) {\n                if (axis) {\n                    res[axis.direction + (axis.n !== 1 ? axis.n : \"\") + \"axis\"] = axis;\n                }\n            });\n            return res;\n        };\n        plot.getXAxes = function() { return xaxes; };\n        plot.getYAxes = function() { return yaxes; };\n        plot.c2p = canvasToAxisCoords;\n        plot.p2c = axisToCanvasCoords;\n        plot.getOptions = function() { return options; };\n        plot.highlight = highlight;\n        plot.unhighlight = unhighlight;\n        plot.triggerRedrawOverlay = triggerRedrawOverlay;\n        plot.pointOffset = function(point) {\n            return {\n                left: parseInt(xaxes[axisNumber(point, \"x\") - 1].p2c(+point.x) + plotOffset.left, 10),\n                top: parseInt(yaxes[axisNumber(point, \"y\") - 1].p2c(+point.y) + plotOffset.top, 10)\n            };\n        };\n        plot.shutdown = shutdown;\n        plot.destroy = function() {\n            shutdown();\n            placeholder.removeData(\"plot\").empty();\n\n            series = [];\n            options = null;\n            surface = null;\n            overlay = null;\n            eventHolder = null;\n            ctx = null;\n            octx = null;\n            xaxes = [];\n            yaxes = [];\n            hooks = null;\n            highlights = [];\n            plot = null;\n        };\n        plot.resize = function(width, height) {\n            width = width || placeholder.width();\n            height = height || placeholder.height();\n            surface.resize(width, height);\n            overlay.resize(width, height);\n        };\n\n        // public attributes\n        plot.hooks = hooks;\n\n        // initialize\n        initPlugins(plot);\n        parseOptions(options_);\n        setupCanvases();\n        setData(data_);\n        setupGrid();\n        draw();\n        bindEvents();\n\n        function executeHooks(hook, args) {\n            args = [plot].concat(args);\n            for (var i = 0; i < hook.length; ++i) {\n                hook[i].apply(this, args);\n            }\n        }\n\n        function initPlugins() {\n\n            // References to key classes, allowing plugins to modify them\n            var classes = {\n                Canvas: Canvas\n            };\n\n            for (var i = 0; i < plugins.length; ++i) {\n                var p = plugins[i];\n                p.init(plot, classes);\n                if (p.options) {\n                    $.extend(true, options, p.options);\n                }\n            }\n        }\n\n        function parseOptions(opts) {\n\n            $.extend(true, options, opts);\n\n            // $.extend merges arrays, rather than replacing them.  When less\n            // colors are provided than the size of the default palette, we\n            // end up with those colors plus the remaining defaults, which is\n            // not expected behavior; avoid it by replacing them here.\n            if (opts && opts.colors) {\n                options.colors = opts.colors;\n            }\n\n            if (options.xaxis.color == null) {\n                options.xaxis.color = $.color.parse(options.grid.color).scale(\"a\", 0.22).toString();\n            }\n            if (options.yaxis.color == null) {\n                options.yaxis.color = $.color.parse(options.grid.color).scale(\"a\", 0.22).toString();\n            }\n\n            if (options.xaxis.tickColor == null) {\n\n                // grid.tickColor for back-compatibility\n                options.xaxis.tickColor = options.grid.tickColor || options.xaxis.color;\n            }\n            if (options.yaxis.tickColor == null) {\n\n                // grid.tickColor for back-compatibility\n                options.yaxis.tickColor = options.grid.tickColor || options.yaxis.color;\n            }\n\n            if (options.grid.borderColor == null) {\n                options.grid.borderColor = options.grid.color;\n            }\n            if (options.grid.tickColor == null) {\n                options.grid.tickColor = $.color.parse(options.grid.color).scale(\"a\", 0.22).toString();\n            }\n\n            // Fill in defaults for axis options, including any unspecified\n            // font-spec fields, if a font-spec was provided.\n\n            // If no x/y axis options were provided, create one of each anyway,\n            // since the rest of the code assumes that they exist.\n            var i, axisOptions, axisCount,\n                fontSize = placeholder.css(\"font-size\"),\n                fontSizeDefault = fontSize ? +fontSize.replace(\"px\", \"\") : 13,\n                fontDefaults = {\n                    style: placeholder.css(\"font-style\"),\n                    size: Math.round(0.8 * fontSizeDefault),\n                    variant: placeholder.css(\"font-variant\"),\n                    weight: placeholder.css(\"font-weight\"),\n                    family: placeholder.css(\"font-family\")\n                },\n                markings;\n\n            axisCount = options.xaxes.length || 1;\n            for (i = 0; i < axisCount; ++i) {\n\n                axisOptions = options.xaxes[i];\n                if (axisOptions && !axisOptions.tickColor) {\n                    axisOptions.tickColor = axisOptions.color;\n                }\n\n                // Compatibility with markrcote/flot-axislabels\n                if (axisOptions) {\n                    if (!axisOptions.label && axisOptions.axisLabel) {\n                        axisOptions.label = axisOptions.axisLabel;\n                    }\n                    if (!axisOptions.labelPadding && axisOptions.axisLabelPadding) {\n                        axisOptions.labelPadding = axisOptions.axisLabelPadding;\n                    }\n                }\n\n                axisOptions = $.extend(true, {}, options.xaxis, axisOptions);\n                options.xaxes[i] = axisOptions;\n\n                if (axisOptions.font) {\n                    axisOptions.font = $.extend({}, fontDefaults, axisOptions.font);\n                }\n                if (axisOptions.tickFont || axisOptions.font) {\n                    axisOptions.tickFont = $.extend({}, axisOptions.font || fontDefaults, axisOptions.tickFont);\n                    if (!axisOptions.tickFont.color) {\n                        axisOptions.tickFont.color = axisOptions.color;\n                    }\n                    if (!axisOptions.tickFont.lineHeight) {\n                        axisOptions.tickFont.lineHeight = Math.round(axisOptions.tickFont.size * 1.15);\n                    }\n                }\n                if (axisOptions.label && (axisOptions.labelFont || axisOptions.font)) {\n                    axisOptions.labelFont = $.extend({}, axisOptions.font || fontDefaults, axisOptions.labelFont);\n                    if (!axisOptions.labelFont.color) {\n                        axisOptions.labelFont.color = axisOptions.color;\n                    }\n                    if (!axisOptions.labelFont.lineHeight) {\n                        axisOptions.labelFont.lineHeight = Math.round(axisOptions.labelFont.size * 1.15);\n                    }\n                }\n                if (axisOptions.font) {\n                    if (!axisOptions.font.color) {\n                        axisOptions.font.color = axisOptions.color;\n                    }\n                    if (!axisOptions.font.lineHeight) {\n                        axisOptions.font.lineHeight = Math.round(axisOptions.font.size * 1.15);\n                    }\n                }\n            }\n\n            axisCount = options.yaxes.length || 1;\n            for (i = 0; i < axisCount; ++i) {\n\n                axisOptions = options.yaxes[i];\n                if (axisOptions && !axisOptions.tickColor) {\n                    axisOptions.tickColor = axisOptions.color;\n                }\n\n                // Compatibility with markrcote/flot-axislabels\n                if (axisOptions) {\n                    if (!axisOptions.label && axisOptions.axisLabel) {\n                        axisOptions.label = axisOptions.axisLabel;\n                    }\n                    if (!axisOptions.labelPadding && axisOptions.axisLabelPadding) {\n                        axisOptions.labelPadding = axisOptions.axisLabelPadding;\n                    }\n                }\n\n                axisOptions = $.extend(true, {}, options.yaxis, axisOptions);\n                options.yaxes[i] = axisOptions;\n\n                if (axisOptions.font) {\n                    axisOptions.font = $.extend({}, fontDefaults, axisOptions.font);\n                }\n                if (axisOptions.tickFont || axisOptions.font) {\n                    axisOptions.tickFont = $.extend({}, axisOptions.font || fontDefaults, axisOptions.tickFont);\n                    if (!axisOptions.tickFont.color) {\n                        axisOptions.tickFont.color = axisOptions.color;\n                    }\n                    if (!axisOptions.tickFont.lineHeight) {\n                        axisOptions.tickFont.lineHeight = Math.round(axisOptions.tickFont.size * 1.15);\n                    }\n                }\n                if (axisOptions.label && (axisOptions.labelFont || axisOptions.font)) {\n                    axisOptions.labelFont = $.extend({}, axisOptions.font || fontDefaults, axisOptions.labelFont);\n                    if (!axisOptions.labelFont.color) {\n                        axisOptions.labelFont.color = axisOptions.color;\n                    }\n                    if (!axisOptions.labelFont.lineHeight) {\n                        axisOptions.labelFont.lineHeight = Math.round(axisOptions.labelFont.size * 1.15);\n                    }\n                }\n                if (axisOptions.font) {\n                    if (!axisOptions.font.color) {\n                        axisOptions.font.color = axisOptions.color;\n                    }\n                    if (!axisOptions.font.lineHeight) {\n                        axisOptions.font.lineHeight = Math.round(axisOptions.font.size * 1.15);\n                    }\n                }\n            }\n\n            markings = options.grid.markings;\n            if ($.isArray(markings)) {\n                for (i = 0; i < markings.length; ++i) {\n\n                    if (markings[i].font) {\n                        markings[i].font = $.extend({}, fontDefaults, markings[i].font);\n                    }\n                }\n            }\n\n            // backwards compatibility, to be removed in future\n            if (options.xaxis.noTicks && options.xaxis.ticks == null) {\n                options.xaxis.ticks = options.xaxis.noTicks;\n            }\n            if (options.yaxis.noTicks && options.yaxis.ticks == null) {\n                options.yaxis.ticks = options.yaxis.noTicks;\n            }\n            if (options.x2axis) {\n                options.xaxes[1] = $.extend(true, {}, options.xaxis, options.x2axis);\n                options.xaxes[1].position = \"top\";\n                // Override the inherit to allow the axis to auto-scale\n                if (options.x2axis.min == null) {\n                    options.xaxes[1].min = null;\n                }\n                if (options.x2axis.max == null) {\n                    options.xaxes[1].max = null;\n                }\n            }\n            if (options.y2axis) {\n                options.yaxes[1] = $.extend(true, {}, options.yaxis, options.y2axis);\n                options.yaxes[1].position = \"right\";\n                // Override the inherit to allow the axis to auto-scale\n                if (options.y2axis.min == null) {\n                    options.yaxes[1].min = null;\n                }\n                if (options.y2axis.max == null) {\n                    options.yaxes[1].max = null;\n                }\n            }\n            if (options.grid.coloredAreas) {\n                options.grid.markings = options.grid.coloredAreas;\n            }\n            if (options.grid.coloredAreasColor) {\n                options.grid.markingsColor = options.grid.coloredAreasColor;\n            }\n            if (options.lines) {\n                $.extend(true, options.series.lines, options.lines);\n            }\n            if (options.points) {\n                $.extend(true, options.series.points, options.points);\n            }\n            if (options.bars) {\n                $.extend(true, options.series.bars, options.bars);\n            }\n            if (options.shadowSize != null) {\n                options.series.shadowSize = options.shadowSize;\n            }\n            if (options.highlightColor != null) {\n                options.series.highlightColor = options.highlightColor;\n            }\n\n            // save options on axes for future reference\n            for (i = 0; i < options.xaxes.length; ++i) {\n                getOrCreateAxis(xaxes, i + 1).options = options.xaxes[i];\n            }\n            for (i = 0; i < options.yaxes.length; ++i) {\n                getOrCreateAxis(yaxes, i + 1).options = options.yaxes[i];\n            }\n\n            // add hooks from options\n            for (var n in hooks) {\n                if (options.hooks[n] && options.hooks[n].length) {\n                    hooks[n] = hooks[n].concat(options.hooks[n]);\n                }\n            }\n\n            executeHooks(hooks.processOptions, [options]);\n        }\n\n        function setData(d) {\n            series = parseData(d);\n            fillInSeriesOptions();\n            processData();\n        }\n\n        function parseData(d) {\n            var res = [];\n            for (var i = 0; i < d.length; ++i) {\n                var s = $.extend(true, {}, options.series);\n\n                if (d[i].data != null) {\n\n                    // move the data instead of deep-copy\n                    s.data = d[i].data;\n                    delete d[i].data;\n\n                    $.extend(true, s, d[i]);\n\n                    d[i].data = s.data;\n                } else {\n                    s.data = d[i];\n                }\n                res.push(s);\n            }\n\n            return res;\n        }\n\n        function axisNumber(obj, coord) {\n            var a = obj[coord + \"axis\"];\n\n            if (typeof a === \"object\") {\n\n                // if we got a real axis, extract number\n                a = a.n;\n            }\n            if (!isNumeric(a)) {\n\n                // default to first axis\n                a = 1;\n            }\n            return a;\n        }\n\n        function allAxes() {\n\n            // return flat array without annoying null entries\n            return $.grep(xaxes.concat(yaxes), function(a) { return a; });\n        }\n\n        function canvasToAxisCoords(pos) {\n\n            // return an object with x/y corresponding to all used axes\n            var res = {}, i, axis;\n            for (i = 0; i < xaxes.length; ++i) {\n                axis = xaxes[i];\n                if (axis && axis.used) {\n                    res[\"x\" + axis.n] = axis.c2p(pos.left);\n                }\n            }\n\n            for (i = 0; i < yaxes.length; ++i) {\n                axis = yaxes[i];\n                if (axis && axis.used) {\n                    res[\"y\" + axis.n] = axis.c2p(pos.top);\n                }\n            }\n\n            if (res.x1 !== undefined) {\n                res.x = res.x1;\n            }\n            if (res.y1 !== undefined) {\n                res.y = res.y1;\n            }\n\n            return res;\n        }\n\n        function axisToCanvasCoords(pos) {\n\n            // get canvas coords from the first pair of x/y found in pos\n            var res = {}, i, axis, key;\n\n            for (i = 0; i < xaxes.length; ++i) {\n                axis = xaxes[i];\n                if (axis && axis.used) {\n                    key = \"x\" + axis.n;\n                    if (pos[key] == null && axis.n === 1) {\n                        key = \"x\";\n                    }\n\n                    if (pos[key] != null) {\n                        res.left = axis.p2c(pos[key]);\n                        break;\n                    }\n                }\n            }\n\n            for (i = 0; i < yaxes.length; ++i) {\n                axis = yaxes[i];\n                if (axis && axis.used) {\n                    key = \"y\" + axis.n;\n                    if (pos[key] == null && axis.n === 1) {\n                        key = \"y\";\n                    }\n\n                    if (pos[key] != null) {\n                        res.top = axis.p2c(pos[key]);\n                        break;\n                    }\n                }\n            }\n\n            return res;\n        }\n\n        function getOrCreateAxis(axes, number) {\n            if (!axes[number - 1]) {\n                axes[number - 1] = {\n\n                    // save the number for future reference\n                    n: number,\n                    direction: axes === xaxes ? \"x\" : \"y\",\n                    options: $.extend(true, {}, axes === xaxes ? options.xaxis : options.yaxis)\n                };\n            }\n\n            return axes[number - 1];\n        }\n\n        function fillInSeriesOptions() {\n\n            var neededColors = series.length, maxIndex = -1, i;\n\n            // Subtract the number of series that already have fixed colors or\n            // color indexes from the number that we still need to generate.\n            for (i = 0; i < series.length; ++i) {\n                var sc = series[i].color;\n                if (sc != null) {\n                    neededColors--;\n                    if (isNumeric(sc) && sc > maxIndex) {\n                        maxIndex = sc;\n                    }\n                }\n            }\n\n            // If any of the series have fixed color indexes, then we need to\n            // generate at least as many colors as the highest index.\n            if (neededColors <= maxIndex) {\n                neededColors = maxIndex + 1;\n            }\n\n            // Generate all the colors, using first the option colors and then\n            // variations on those colors once they're exhausted.\n            var c, colors = [], colorPool = options.colors,\n                colorPoolSize = colorPool.length, variation = 0;\n\n            for (i = 0; i < neededColors; i++) {\n\n                c = $.color.parse(colorPool[i % colorPoolSize] || \"#666\");\n\n                // Each time we exhaust the colors in the pool we adjust\n                // a scaling factor used to produce more variations on\n                // those colors. The factor alternates negative/positive\n                // to produce lighter/darker colors.\n\n                // Reset the variation after every few cycles, or else\n                // it will end up producing only white or black colors.\n                if (i % colorPoolSize === 0 && i) {\n                    if (variation >= 0) {\n                        if (variation < 0.5) {\n                            variation = -variation - 0.2;\n                        } else {\n                            variation = 0;\n                        }\n                    } else {\n                        variation = -variation;\n                    }\n                }\n\n                colors[i] = c.scale(\"rgb\", 1 + variation);\n            }\n\n            // Finalize the series options, filling in their colors\n            var colori = 0, s;\n            for (i = 0; i < series.length; ++i) {\n                s = series[i];\n\n                // assign colors\n                if (s.color == null) {\n                    s.color = colors[colori].toString();\n                    ++colori;\n                } else if (isNumeric(s.color)) {\n                    s.color = colors[s.color].toString();\n                }\n\n                // turn on lines automatically in case nothing is set\n                if (s.lines.show == null) {\n                    var v, show = true;\n                    for (v in s) {\n                        if (s[v] && s[v].show) {\n                            show = false;\n                            break;\n                        }\n                    }\n                    if (show) {\n                        s.lines.show = true;\n                    }\n                }\n\n                // If nothing was provided for lines.zero, default it to match\n                // lines.fill, since areas by default should extend to zero.\n                if (s.lines.zero == null) {\n                    s.lines.zero = !!s.lines.fill;\n                }\n\n                // setup axes\n                s.xaxis = getOrCreateAxis(xaxes, axisNumber(s, \"x\"));\n                s.yaxis = getOrCreateAxis(yaxes, axisNumber(s, \"y\"));\n            }\n        }\n\n        function processData() {\n            var topSentry = Number.POSITIVE_INFINITY,\n                bottomSentry = Number.NEGATIVE_INFINITY,\n                fakeInfinity = Number.MAX_VALUE,\n                i, j, k, m, s, points, ps, val, f, p, data, format;\n\n            function updateAxis(axis, min, max) {\n                if (min < axis.datamin && min !== -fakeInfinity) {\n                    axis.datamin = min;\n                }\n                if (max > axis.datamax && max !== fakeInfinity) {\n                    axis.datamax = max;\n                }\n            }\n\n            $.each(allAxes(), function(_, axis) {\n\n                // init axis\n                axis.datamin = topSentry;\n                axis.datamax = bottomSentry;\n                axis.used = false;\n            });\n\n            for (i = 0; i < series.length; ++i) {\n                s = series[i];\n                s.datapoints = { points: [] };\n                executeHooks(hooks.processRawData, [s, s.data, s.datapoints]);\n            }\n\n            // first pass: clean and copy data\n            for (i = 0; i < series.length; ++i) {\n                s = series[i];\n\n                data = s.data;\n                format = s.datapoints.format;\n\n                if (!format) {\n                    format = [];\n\n                    // find out how to copy\n                    format.push({ x: true, number: true, required: true });\n                    format.push({ y: true, number: true, required: true });\n\n                    if (s.bars.show || (s.lines.show && s.lines.fill)) {\n                        var autoscale = !!((s.bars.show && s.bars.zero) || (s.lines.show && s.lines.zero));\n                        format.push({ y: true, number: true, required: false, defaultValue: 0, autoscale: autoscale });\n                        if (s.bars.horizontal) {\n                            delete format[format.length - 1].y;\n                            format[format.length - 1].x = true;\n                        }\n                    }\n\n                    s.datapoints.format = format;\n                }\n\n                if (s.datapoints.pointsize != null) {\n\n                    // already filled in\n                    continue;\n                }\n\n                s.datapoints.pointsize = format.length;\n\n                ps = s.datapoints.pointsize;\n                points = s.datapoints.points;\n\n                s.xaxis.used = s.yaxis.used = true;\n\n                for (j = k = 0; j < data.length; ++j, k += ps) {\n                    p = data[j];\n\n                    var nullify = p == null;\n                    if (!nullify) {\n                        for (m = 0; m < ps; ++m) {\n                            val = p[m];\n                            f = format[m];\n\n                            if (f) {\n                                if (f.number && val != null) {\n\n                                    // convert to number\n                                    val = +val;\n                                    if (isNaN(val)) {\n                                        val = null;\n                                    } else if (val === Infinity) {\n                                        val = fakeInfinity;\n                                    } else if (val === -Infinity) {\n                                        val = -fakeInfinity;\n                                    }\n                                }\n\n                                if (val == null) {\n                                    if (f.required) {\n                                        nullify = true;\n                                    }\n\n                                    if (f.defaultValue != null) {\n                                        val = f.defaultValue;\n                                    }\n                                }\n                            }\n\n                            points[k + m] = val;\n                        }\n                    }\n\n                    if (nullify) {\n                        for (m = 0; m < ps; ++m) {\n                            val = points[k + m];\n                            if (val != null) {\n                                f = format[m];\n\n                                // extract min/max info\n                                if (f.autoscale !== false) {\n                                    if (f.x) {\n                                        updateAxis(s.xaxis, val, val);\n                                    }\n                                    if (f.y) {\n                                        updateAxis(s.yaxis, val, val);\n                                    }\n                                }\n                            }\n                            points[k + m] = null;\n                        }\n                    }\n                }\n            }\n\n            // give the hooks a chance to run\n            for (i = 0; i < series.length; ++i) {\n                s = series[i];\n\n                executeHooks(hooks.processDatapoints, [s, s.datapoints]);\n            }\n\n            // second pass: find datamax/datamin for auto-scaling\n            for (i = 0; i < series.length; ++i) {\n                s = series[i];\n                points = s.datapoints.points;\n                ps = s.datapoints.pointsize;\n                format = s.datapoints.format;\n\n                var xmin = topSentry, ymin = topSentry,\n                    xmax = bottomSentry, ymax = bottomSentry;\n\n                for (j = 0; j < points.length; j += ps) {\n                    if (points[j] == null) {\n                        continue;\n                    }\n\n                    for (m = 0; m < ps; ++m) {\n                        val = points[j + m];\n                        f = format[m];\n                        if (!f || f.autoscale === false || val === fakeInfinity || val === -fakeInfinity) {\n                            continue;\n                        }\n\n                        if (f.x) {\n                            if (val < xmin) {\n                                xmin = val;\n                            }\n                            if (val > xmax) {\n                                xmax = val;\n                            }\n                        }\n                        if (f.y) {\n                            if (val < ymin) {\n                                ymin = val;\n                            }\n                            if (val > ymax) {\n                                ymax = val;\n                            }\n                        }\n                    }\n                }\n\n                if (s.bars.show) {\n\n                    // make sure we got room for the bar on the dancing floor\n                    var delta;\n\n                    switch (s.bars.align) {\n                    case \"left\":\n                        delta = 0;\n                        break;\n                    case \"right\":\n                        delta = -s.bars.barWidth;\n                        break;\n                    default:\n                        delta = -s.bars.barWidth / 2;\n                    }\n\n                    if (s.bars.horizontal) {\n                        ymin += delta;\n                        ymax += delta + s.bars.barWidth;\n                    } else {\n                        xmin += delta;\n                        xmax += delta + s.bars.barWidth;\n                    }\n                }\n\n                updateAxis(s.xaxis, xmin, xmax);\n                updateAxis(s.yaxis, ymin, ymax);\n            }\n\n            $.each(allAxes(), function(_, axis) {\n                if (axis.datamin === topSentry) {\n                    axis.datamin = null;\n                }\n                if (axis.datamax === bottomSentry) {\n                    axis.datamax = null;\n                }\n            });\n        }\n\n        function setupCanvases() {\n\n            // Make sure the placeholder is clear of everything except canvases\n            // from a previous plot in this container that we'll try to re-use.\n\n            // padding messes up the positioning\n            placeholder.css(\"padding\", 0)\n                .children().filter(function() {\n                    return !$(this).hasClass(\"flot-overlay\") && !$(this).hasClass(\"flot-base\");\n                }).remove();\n\n            if (placeholder.css(\"position\") === \"static\") {\n\n                // for positioning labels and overlay\n                placeholder.css(\"position\", \"relative\");\n            }\n\n            surface = new Canvas(\"flot-base\", placeholder);\n\n            // overlay canvas for interactive features\n            overlay = new Canvas(\"flot-overlay\", placeholder);\n\n            ctx = surface.context;\n            octx = overlay.context;\n\n            // define which element we're listening for events on\n            eventHolder = $(overlay.element).unbind();\n\n            // If we're re-using a plot object, shut down the old one\n            var existing = placeholder.data(\"plot\");\n\n            if (existing) {\n                existing.shutdown();\n                overlay.clear();\n            }\n\n            // save in case we get replotted\n            placeholder.data(\"plot\", plot);\n        }\n\n        function bindEvents() {\n\n            // bind events\n            if (options.grid.hoverable) {\n                eventHolder.mousemove(onMouseMove);\n\n                // Use bind, rather than .mouseleave, because we officially\n                // still support jQuery 1.2.6, which doesn't define a shortcut\n                // for mouseenter or mouseleave.  This was a bug/oversight that\n                // was fixed somewhere around 1.3.x.  We can return to using\n                // .mouseleave when we drop support for 1.2.6.\n                eventHolder.bind(\"mouseleave\", onMouseLeave);\n            }\n\n            if (options.grid.clickable) {\n                eventHolder.click(onClick);\n            }\n\n            executeHooks(hooks.bindEvents, [eventHolder]);\n        }\n\n        function shutdown() {\n            if (redrawTimeout) {\n                clearTimeout(redrawTimeout);\n            }\n\n            eventHolder.unbind(\"mousemove\", onMouseMove);\n            eventHolder.unbind(\"mouseleave\", onMouseLeave);\n            eventHolder.unbind(\"click\", onClick);\n\n            executeHooks(hooks.shutdown, [eventHolder]);\n        }\n\n        function setTransformationHelpers(axis) {\n\n            // set helper functions on the axis, assumes plot area\n            // has been computed already\n            function identity(x) { return x; }\n\n            var s, m, t = axis.options.transform || identity,\n                it = axis.options.inverseTransform;\n\n            // precompute how much the axis is scaling a point\n            // in canvas space\n            if (axis.direction === \"x\") {\n                s = axis.scale = plotWidth / Math.abs(t(axis.max) - t(axis.min));\n                m = Math.min(t(axis.max), t(axis.min));\n            } else {\n                s = axis.scale = plotHeight / Math.abs(t(axis.max) - t(axis.min));\n                s = -s;\n                m = Math.max(t(axis.max), t(axis.min));\n            }\n\n            // data point to canvas coordinate\n            if (t === identity) {\n\n                // slight optimization\n                axis.p2c = function(p) { return (p - m) * s; };\n            } else {\n                axis.p2c = function(p) { return (t(p) - m) * s; };\n            }\n\n            // canvas coordinate to data point\n            if (!it) {\n                axis.c2p = function(c) { return m + c / s; };\n            } else {\n                axis.c2p = function(c) { return it(m + c / s); };\n            }\n        }\n\n        function measureTickLabels(axis) {\n\n            var opts = axis.options,\n                ticks = axis.ticks || [],\n\n                // Label width & height are deprecated; remove in 1.0!\n                tickWidth = opts.tickWidth || opts.labelWidth || 0,\n                tickHeight = opts.tickHeight || opts.labelHeight || 0,\n                maxWidth = tickWidth || axis.direction === \"x\" ? Math.floor(surface.width / (ticks.length || 1)) : null,\n                legacyStyles = axis.direction + \"Axis \" + axis.direction + axis.n + \"Axis\",\n                layer = \"flot-\" + axis.direction + \"-axis flot-\" + axis.direction + axis.n + \"-axis \" + legacyStyles,\n                font = opts.tickFont || \"flot-tick-label tickLabel\";\n\n            for (var i = 0; i < ticks.length; ++i) {\n\n                var t = ticks[i];\n\n                if (!t.label) {\n                    continue;\n                }\n\n                var info = surface.getTextInfo(layer, t.label, font, null, maxWidth);\n\n                tickWidth = Math.max(tickWidth, info.width);\n                tickHeight = Math.max(tickHeight, info.height);\n            }\n\n            axis.tickWidth = opts.tickWidth || opts.labelWidth || tickWidth;\n            axis.tickHeight = opts.tickHeight || opts.labelHeight || tickHeight;\n\n            // Label width/height properties are deprecated; remove in 1.0!\n            axis.labelWidth = axis.tickWidth;\n            axis.labelHeight = axis.tickHeight;\n        }\n\n        /**\n         * Compute the axis bounding box based on the dimensions of its label\n         * and tick labels, then adjust the plotOffset to make room for it.\n         *\n         * This first phase only considers one dimension per axis; the other\n         * dimension depends on the other axes, and will be calculated later.\n         */\n        function allocateAxisBoxFirstPhase(axis) {\n\n            var contentWidth = axis.tickWidth,\n                contentHeight = axis.tickHeight,\n                axisOptions = axis.options,\n                tickLength = axisOptions.tickLength,\n                axisPosition = axisOptions.position,\n                axisMargin = options.grid.axisMargin,\n                padding = options.grid.labelMargin,\n                isXAxis = axis.direction === \"x\",\n                innermost = true,\n                outermost = true,\n                first = true,\n                found = false;\n\n            // Determine the axis's position in its direction and on its side\n            $.each(isXAxis ? xaxes : yaxes, function(i, a) {\n                if (a && (a.show || a.reserveSpace)) {\n                    if (a === axis) {\n                        found = true;\n                    } else if (a.options.position === axisPosition) {\n                        if (found) {\n                            outermost = false;\n                        } else {\n                            innermost = false;\n                        }\n                    }\n                    if (!found) {\n                        first = false;\n                    }\n                }\n            });\n\n            // The outermost axis on each side has no margin\n            if (outermost) {\n                axisMargin = 0;\n            }\n\n            // The ticks for the first axis in each direction stretch across\n            if (tickLength == null) {\n                tickLength = first ? \"full\" : 5;\n            }\n\n            if (!isNaN(+tickLength)) {\n                padding += +tickLength;\n            }\n\n            // Measure the dimensions of the axis label, if it has one\n            if (axisOptions.label) {\n                var legacyStyles = \"Axis \" + axis.direction + axis.n + \"Axis\",\n                    layer = \"flot-\" + axis.direction + \"-axis flot-\" + axis.direction + axis.n + \"-axis \" + axis.direction + legacyStyles,\n                    font = axisOptions.labelFont || \"flot-axis-label axisLabels \" + axis.direction + axis.n + \"axisLabel\",\n                    angle = isXAxis ? 0 : axisOptions.position === \"right\" ? 90 : -90,\n                    labelInfo = surface.getTextInfo(layer, axisOptions.label, font, angle);\n                contentWidth += labelInfo.width + axisOptions.labelPadding;\n                contentHeight += labelInfo.height + axisOptions.labelPadding;\n            }\n\n            // Compute the axis bounding box and update the plot bounds\n            if (isXAxis) {\n                contentHeight += padding;\n                if (axisPosition === \"top\") {\n                    axis.box = { top: plotOffset.top + axisMargin, height: contentHeight };\n                    plotOffset.top += contentHeight + axisMargin;\n                } else {\n                    plotOffset.bottom += contentHeight + axisMargin;\n                    axis.box = { top: surface.height - plotOffset.bottom, height: contentHeight };\n                }\n            } else {\n                contentWidth += padding;\n                if (axisPosition === \"right\") {\n                    plotOffset.right += contentWidth + axisMargin;\n                    axis.box = { left: surface.width - plotOffset.right, width: contentWidth };\n                } else {\n                    axis.box = { left: plotOffset.left + axisMargin, width: contentWidth };\n                    plotOffset.left += contentWidth + axisMargin;\n                }\n            }\n\n            axis.position = axisPosition;\n            axis.tickLength = tickLength;\n            axis.box.padding = padding;\n            axis.innermost = innermost;\n        }\n\n        function allocateAxisBoxSecondPhase(axis) {\n\n            // now that all axis boxes have been placed in one\n            // dimension, we can set the remaining dimension coordinates\n            if (axis.direction === \"x\") {\n                axis.box.left = plotOffset.left - axis.tickWidth / 2;\n                axis.box.width = surface.width - plotOffset.left - plotOffset.right + axis.tickWidth;\n            } else {\n                axis.box.top = plotOffset.top - axis.tickHeight / 2;\n                axis.box.height = surface.height - plotOffset.bottom - plotOffset.top + axis.tickHeight;\n            }\n        }\n\n        function adjustLayoutForThingsStickingOut() {\n\n            // possibly adjust plot offset to ensure everything stays\n            // inside the canvas and isn't clipped off\n            var minMargin = options.grid.minBorderMargin;\n\n            // check stuff from the plot (FIXME: this should just read\n            // a value from the series, otherwise it's impossible to\n            // customize)\n            if (minMargin == null) {\n                minMargin = 0;\n                for (var i = 0; i < series.length; ++i) {\n                    minMargin = Math.max(minMargin, 2 * (series[i].points.radius + series[i].points.lineWidth / 2));\n                }\n            }\n\n            var margins = {\n                left: minMargin,\n                right: minMargin,\n                top: minMargin,\n                bottom: minMargin\n            };\n\n            // check axis labels, note we don't check the actual\n            // labels but instead use the overall width/height to not\n            // jump as much around with replots\n            $.each(allAxes(), function(_, axis) {\n                if (axis.reserveSpace && axis.ticks && axis.ticks.length) {\n                    if (axis.direction === \"x\") {\n                        margins.left = Math.max(margins.left, axis.tickWidth / 2);\n                        margins.right = Math.max(margins.right, axis.tickWidth / 2);\n                    } else {\n                        margins.bottom = Math.max(margins.bottom, axis.tickHeight / 2);\n                        margins.top = Math.max(margins.top, axis.tickHeight / 2);\n                    }\n                }\n            });\n\n            plotOffset.left = Math.ceil(Math.max(margins.left, plotOffset.left));\n            plotOffset.right = Math.ceil(Math.max(margins.right, plotOffset.right));\n            plotOffset.top = Math.ceil(Math.max(margins.top, plotOffset.top));\n            plotOffset.bottom = Math.ceil(Math.max(margins.bottom, plotOffset.bottom));\n        }\n\n        function setupGrid() {\n            var axes = allAxes(),\n                showGrid = options.grid.show,\n                margin = options.grid.margin || 0,\n                i, a;\n\n            // Initialize the plot's offset from the edge of the canvas\n            for (a in plotOffset) {\n                if (Object.prototype.hasOwnProperty.call(plotOffset, a)) {\n                    plotOffset[a] = isNumeric(margin) ? margin : margin[a] || 0;\n                }\n            }\n\n            executeHooks(hooks.processOffset, [plotOffset]);\n\n            // If the grid is visible, add its border width to the offset\n            for (a in plotOffset) {\n                if (typeof(options.grid.borderWidth) === \"object\") {\n                    plotOffset[a] += showGrid ? options.grid.borderWidth[a] : 0;\n                } else {\n                    plotOffset[a] += showGrid ? options.grid.borderWidth : 0;\n                }\n            }\n\n            $.each(axes, function(_, axis) {\n                var axisOpts = axis.options;\n                axis.show = axisOpts.show == null ? axis.used : axisOpts.show;\n                axis.reserveSpace = axisOpts.reserveSpace == null ? axis.show : axisOpts.reserveSpace;\n                setRange(axis);\n            });\n\n            if (showGrid) {\n\n                var allocatedAxes = $.grep(axes, function(axis) {\n                    return axis.show || axis.reserveSpace;\n                });\n\n                $.each(allocatedAxes, function(_, axis) {\n                    // make the ticks\n                    setupTickGeneration(axis);\n                    setTicks(axis);\n                    snapRangeToTicks(axis, axis.ticks);\n                    measureTickLabels(axis);\n                });\n\n                // with all dimensions calculated, we can compute the\n                // axis bounding boxes, start from the outside\n                // (reverse order)\n                for (i = allocatedAxes.length - 1; i >= 0; --i) {\n                    allocateAxisBoxFirstPhase(allocatedAxes[i]);\n                }\n\n                // make sure we've got enough space for things that\n                // might stick out\n                adjustLayoutForThingsStickingOut();\n\n                $.each(allocatedAxes, function(_, axis) {\n                    allocateAxisBoxSecondPhase(axis);\n                });\n            }\n\n            plotWidth = surface.width - plotOffset.left - plotOffset.right;\n            plotHeight = surface.height - plotOffset.bottom - plotOffset.top;\n\n            // now we got the proper plot dimensions, we can compute the scaling\n            $.each(axes, function(_, axis) {\n                setTransformationHelpers(axis);\n            });\n\n            if (showGrid) {\n                drawAxisLabels();\n            }\n\n            insertLegend();\n        }\n\n        function setRange(axis) {\n            var opts = axis.options,\n                min = +(opts.min != null ? opts.min : axis.datamin),\n                max = +(opts.max != null ? opts.max : axis.datamax),\n                delta = max - min;\n\n            if (delta === 0.0) {\n\n                // degenerate case\n                var widen = max === 0 ? 1 : 0.01;\n\n                if (opts.min == null) {\n                    min -= widen;\n                }\n\n                // always widen max if we couldn't widen min to ensure we\n                // don't fall into min == max which doesn't work\n\n                if (opts.max == null || opts.min != null) {\n                    max += widen;\n                }\n            } else {\n\n                // consider autoscaling\n                var margin = opts.autoscaleMargin;\n                if (margin != null) {\n                    if (opts.min == null) {\n                        min -= delta * margin;\n\n                        // make sure we don't go below zero if all values\n                        // are positive\n                        if (min < 0 && axis.datamin != null && axis.datamin >= 0) {\n                            min = 0;\n                        }\n                    }\n                    if (opts.max == null) {\n                        max += delta * margin;\n                        if (max > 0 && axis.datamax != null && axis.datamax <= 0) {\n                            max = 0;\n                        }\n                    }\n                }\n            }\n            axis.min = min;\n            axis.max = max;\n        }\n\n        function setupTickGeneration(axis) {\n            var opts = axis.options,\n\n                // estimate number of ticks\n                noTicks;\n\n            if (isNumeric(opts.ticks) && opts.ticks > 0) {\n                noTicks = opts.ticks;\n            } else {\n\n                // heuristic based on the model a*sqrt(x) fitted to\n                // some data points that seemed reasonable\n                noTicks = 0.3 * Math.sqrt(axis.direction === \"x\" ? surface.width : surface.height);\n            }\n\n            var delta = (axis.max - axis.min) / noTicks,\n                dec = -Math.floor(Math.log(delta) / Math.LN10),\n                maxDec = opts.tickDecimals;\n\n            if (maxDec != null && dec > maxDec) {\n                dec = maxDec;\n            }\n\n            var magn = Math.pow(10, -dec),\n\n                // norm is between 1.0 and 10.0\n                norm = delta / magn,\n                size;\n\n            if (norm < 1.5) {\n                size = 1;\n            } else if (norm < 3) {\n                size = 2;\n\n                // special case for 2.5, requires an extra decimal\n                if (norm > 2.25 && (maxDec == null || dec + 1 <= maxDec)) {\n                    size = 2.5;\n                    ++dec;\n                }\n            } else if (norm < 7.5) {\n                size = 5;\n            } else {\n                size = 10;\n            }\n\n            size *= magn;\n\n            if (opts.minTickSize != null && size < opts.minTickSize) {\n                size = opts.minTickSize;\n            }\n\n            axis.delta = delta;\n            axis.tickDecimals = Math.max(0, maxDec != null ? maxDec : dec);\n            axis.tickSize = opts.tickSize || size;\n\n            // Time mode was moved to a plug-in in 0.8, but since so many people use this\n            // we'll add an especially friendly make sure they remembered to include it.\n            if (opts.mode === \"time\" && !axis.tickGenerator) {\n                throw new Error(\"Time mode requires the flot.time plugin.\");\n            }\n\n            // Flot supports base-10 axes; any other mode else is handled by a plug-in,\n            // like flot.time.js.\n            if (!axis.tickGenerator) {\n\n                axis.tickGenerator = function(axis) {\n\n                    var ticks = [],\n                        start = floorInBase(axis.min, axis.tickSize),\n                        i = 0,\n                        v = Number.NaN,\n                        prev;\n\n                    do {\n                        prev = v;\n                        v = start + i * axis.tickSize;\n                        ticks.push(v);\n                        ++i;\n                    } while (v < axis.max && v !== prev);\n                    return ticks;\n                };\n\n                axis.tickFormatter = function(value, axis) {\n\n                    var factor = axis.tickDecimals ? Math.pow(10, axis.tickDecimals) : 1,\n                        formatted = \"\" + Math.round(value * factor) / factor;\n\n                    // If tickDecimals was specified, ensure that we have exactly that\n                    // much precision; otherwise default to the value's own precision.\n                    if (axis.tickDecimals != null) {\n                        var decimal = formatted.indexOf(\".\"),\n                            precision = decimal === -1 ? 0 : formatted.length - decimal - 1;\n\n                        if (precision < axis.tickDecimals) {\n                            return (precision ? formatted : formatted + \".\") + (\"\" + factor).substr(1, axis.tickDecimals - precision);\n                        }\n                    }\n\n                    return formatted;\n                };\n            }\n\n            if ($.isFunction(opts.tickFormatter)) {\n                axis.tickFormatter = function(v, axis) { return \"\" + opts.tickFormatter(v, axis); };\n            }\n\n            if (opts.alignTicksWithAxis != null) {\n                var otherAxis = (axis.direction === \"x\" ? xaxes : yaxes)[opts.alignTicksWithAxis - 1];\n                if (otherAxis && otherAxis.used && otherAxis !== axis) {\n\n                    // consider snapping min/max to outermost nice ticks\n                    var niceTicks = axis.tickGenerator(axis);\n                    if (niceTicks.length > 0) {\n                        if (opts.min == null) {\n                            axis.min = Math.min(axis.min, niceTicks[0]);\n                        }\n                        if (opts.max == null && niceTicks.length > 1) {\n                            axis.max = Math.max(axis.max, niceTicks[niceTicks.length - 1]);\n                        }\n                    }\n\n                    axis.tickGenerator = function(axis) {\n\n                        // copy ticks, scaled to this axis\n                        var ticks = [], v, i;\n                        for (i = 0; i < otherAxis.ticks.length; ++i) {\n                            v = (otherAxis.ticks[i].v - otherAxis.min) / (otherAxis.max - otherAxis.min);\n                            v = axis.min + v * (axis.max - axis.min);\n                            ticks.push(v);\n                        }\n                        return ticks;\n                    };\n\n                    // we might need an extra decimal since forced\n                    // ticks don't necessarily fit naturally\n                    if (!axis.mode && opts.tickDecimals == null) {\n                        var extraDec = Math.max(0, -Math.floor(Math.log(axis.delta) / Math.LN10) + 1),\n                            ts = axis.tickGenerator(axis);\n\n                        // only proceed if the tick interval rounded\n                        // with an extra decimal doesn't give us a\n                        // zero at end\n                        if (!(ts.length > 1 && /\\..*0$/.test((ts[1] - ts[0]).toFixed(extraDec)))) {\n                            axis.tickDecimals = extraDec;\n                        }\n                    }\n                }\n            }\n        }\n\n        function setTicks(axis) {\n            var oticks = axis.options.ticks, ticks = [];\n            if (oticks == null || (isNumeric(oticks) && oticks > 0)) {\n                ticks = axis.tickGenerator(axis);\n            } else if (oticks) {\n                if ($.isFunction(oticks)) {\n\n                    // generate the ticks\n                    ticks = oticks(axis);\n                } else {\n                    ticks = oticks;\n                }\n            }\n\n            // clean up/labelify the supplied ticks, copy them over\n            var i, v;\n            axis.ticks = [];\n            for (i = 0; i < ticks.length; ++i) {\n                var label = null,\n                    t = ticks[i];\n\n                if (typeof t === \"object\") {\n                    v = +t[0];\n                    if (t.length > 1) {\n                        label = t[1];\n                    }\n                } else {\n                    v = +t;\n                }\n                if (label == null) {\n                    label = axis.tickFormatter(v, axis);\n                }\n                if (!isNaN(v)) {\n                    axis.ticks.push({ v: v, label: label });\n                }\n            }\n        }\n\n        function snapRangeToTicks(axis, ticks) {\n            if (axis.options.autoscaleMargin && ticks.length > 0) {\n\n                // snap to ticks\n                if (axis.options.min == null) {\n                    axis.min = Math.min(axis.min, ticks[0].v);\n                }\n                if (axis.options.max == null && ticks.length > 1) {\n                    axis.max = Math.max(axis.max, ticks[ticks.length - 1].v);\n                }\n            }\n        }\n\n        function draw() {\n\n            surface.clear();\n\n            executeHooks(hooks.drawBackground, [ctx]);\n\n            var grid = options.grid;\n\n            // draw background, if any\n            if (grid.show && grid.backgroundColor) {\n                drawBackground();\n            }\n\n            if (grid.show && !grid.aboveData) {\n                drawGrid();\n            }\n\n            for (var i = 0; i < series.length; ++i) {\n                executeHooks(hooks.drawSeries, [ctx, series[i]]);\n                drawSeries(series[i]);\n            }\n\n            executeHooks(hooks.draw, [ctx]);\n\n            if (grid.show && grid.aboveData) {\n                drawGrid();\n            }\n\n            surface.render();\n\n            // A draw implies that either the axes or data have changed, so we\n            // should probably update the overlay highlights as well.\n\n            triggerRedrawOverlay();\n        }\n\n        function extractRange(ranges, coord) {\n            var axis, from, to, key, axes = allAxes();\n\n            for (var i = 0; i < axes.length; ++i) {\n                axis = axes[i];\n                if (axis.direction === coord) {\n                    key = coord + axis.n + \"axis\";\n                    if (!ranges[key] && axis.n === 1) {\n\n                        // support x1axis as xaxis\n                        key = coord + \"axis\";\n                    }\n                    if (ranges[key]) {\n                        from = ranges[key].from;\n                        to = ranges[key].to;\n                        break;\n                    }\n                }\n            }\n\n            // backwards-compat stuff - to be removed in future\n            if (!ranges[key]) {\n                axis = coord === \"x\" ? xaxes[0] : yaxes[0];\n                from = ranges[coord + \"1\"];\n                to = ranges[coord + \"2\"];\n            }\n\n            // auto-reverse as an added bonus\n            if (from != null && to != null && from > to) {\n                var tmp = from;\n                from = to;\n                to = tmp;\n            }\n\n            return { from: from, to: to, axis: axis };\n        }\n\n        function drawBackground() {\n            ctx.save();\n            ctx.translate(plotOffset.left, plotOffset.top);\n\n            ctx.fillStyle = getColorOrGradient(options.grid.backgroundColor, plotHeight, 0, \"rgba(255, 255, 255, 0)\");\n            ctx.fillRect(0, 0, plotWidth, plotHeight);\n            ctx.restore();\n        }\n\n        function drawGrid() {\n            var i, axes, bw, bc;\n\n            ctx.save();\n            ctx.translate(plotOffset.left, plotOffset.top);\n\n            var markingLayer = \"flot-markings\";\n            surface.removeText(markingLayer);\n\n            // process markings\n            var markingsUnderGrid = [],\n                markingsAboveGrid = [],\n                markings = options.grid.markings;\n\n            if (markings) {\n                if ($.isFunction(markings)) {\n                    axes = plot.getAxes();\n\n                    // xmin etc. is backwards compatibility, to be\n                    // removed in the future\n                    axes.xmin = axes.xaxis.min;\n                    axes.xmax = axes.xaxis.max;\n                    axes.ymin = axes.yaxis.min;\n                    axes.ymax = axes.yaxis.max;\n\n                    markings = markings(axes);\n                }\n\n                for (i = 0; i < markings.length; ++i) {\n                    var m = markings[i];\n\n                    if (m.aboveGrid) {\n                        markingsAboveGrid.push(m);\n                    } else {\n                        markingsUnderGrid.push(m);\n                    }\n                }\n            }\n\n            drawMarkings(markingsUnderGrid, markingLayer);\n\n            // draw the ticks\n            axes = allAxes();\n            bw = options.grid.borderWidth;\n\n            for (var j = 0; j < axes.length; ++j) {\n                var axis = axes[j], box = axis.box,\n                    t = axis.tickLength, x, y, xoff, yoff;\n                if (!axis.show || axis.ticks.length === 0) {\n                    continue;\n                }\n\n                ctx.lineWidth = 1;\n\n                // find the edges\n                if (axis.direction === \"x\") {\n                    x = 0;\n                    if (t === \"full\") {\n                        y = (axis.position === \"top\" ? 0 : plotHeight);\n                    } else {\n                        y = box.top - plotOffset.top + (axis.position === \"top\" ? box.height : 0);\n                    }\n                } else {\n                    y = 0;\n                    if (t === \"full\") {\n                        x = (axis.position === \"left\" ? 0 : plotWidth);\n                    } else {\n                        x = box.left - plotOffset.left + (axis.position === \"left\" ? box.width : 0);\n                    }\n                }\n\n                // draw tick bar\n                if (!axis.innermost) {\n                    ctx.strokeStyle = axis.options.color;\n                    ctx.beginPath();\n                    xoff = yoff = 0;\n                    if (axis.direction === \"x\") {\n                        xoff = plotWidth + 1;\n                    } else {\n                        yoff = plotHeight + 1;\n                    }\n\n                    if (ctx.lineWidth === 1) {\n                        if (axis.direction === \"x\") {\n                            y = Math.floor(y) + 0.5;\n                        } else {\n                            x = Math.floor(x) + 0.5;\n                        }\n                    }\n\n                    ctx.moveTo(x, y);\n                    ctx.lineTo(x + xoff, y + yoff);\n                    ctx.stroke();\n                }\n\n                // draw ticks\n                ctx.strokeStyle = axis.options.tickColor;\n\n                ctx.beginPath();\n                for (i = 0; i < axis.ticks.length; ++i) {\n                    var v = axis.ticks[i].v;\n\n                    xoff = yoff = 0;\n\n                    if (isNaN(v) || v < axis.min || v > axis.max || (\n\n                        // skip those lying on the axes if we got a border\n                        t === \"full\" && ((typeof bw === \"object\" && bw[axis.position] > 0) || bw > 0) &&\n                        (v === axis.min || v === axis.max)\n                    )) {\n                        continue;\n                    }\n\n                    if (axis.direction === \"x\") {\n                        x = axis.p2c(v);\n                        yoff = t === \"full\" ? -plotHeight : t;\n\n                        if (axis.position === \"top\") {\n                            yoff = -yoff;\n                        }\n                    } else {\n                        y = axis.p2c(v);\n                        xoff = t === \"full\" ? -plotWidth : t;\n\n                        if (axis.position === \"left\") {\n                            xoff = -xoff;\n                        }\n                    }\n\n                    if (ctx.lineWidth === 1) {\n                        if (axis.direction === \"x\") {\n                            x = Math.floor(x) + 0.5;\n                        } else {\n                            y = Math.floor(y) + 0.5;\n                        }\n                    }\n\n                    ctx.moveTo(x, y);\n                    ctx.lineTo(x + xoff, y + yoff);\n                }\n\n                ctx.stroke();\n            }\n\n            drawMarkings(markingsAboveGrid, markingLayer);\n\n            // draw border\n            if (bw) {\n\n                // If either borderWidth or borderColor is an object, then draw the border\n                // line by line instead of as one rectangle\n                bc = options.grid.borderColor;\n                if (typeof bw === \"object\" || typeof bc === \"object\") {\n                    if (typeof bw !== \"object\") {\n                        bw = { top: bw, right: bw, bottom: bw, left: bw };\n                    }\n                    if (typeof bc !== \"object\") {\n                        bc = { top: bc, right: bc, bottom: bc, left: bc };\n                    }\n\n                    if (bw.top > 0) {\n                        ctx.strokeStyle = bc.top;\n                        ctx.lineWidth = bw.top;\n                        ctx.beginPath();\n                        ctx.moveTo(0 - bw.left, 0 - bw.top / 2);\n                        ctx.lineTo(plotWidth, 0 - bw.top / 2);\n                        ctx.stroke();\n                    }\n\n                    if (bw.right > 0) {\n                        ctx.strokeStyle = bc.right;\n                        ctx.lineWidth = bw.right;\n                        ctx.beginPath();\n                        ctx.moveTo(plotWidth + bw.right / 2, 0 - bw.top);\n                        ctx.lineTo(plotWidth + bw.right / 2, plotHeight);\n                        ctx.stroke();\n                    }\n\n                    if (bw.bottom > 0) {\n                        ctx.strokeStyle = bc.bottom;\n                        ctx.lineWidth = bw.bottom;\n                        ctx.beginPath();\n                        ctx.moveTo(plotWidth + bw.right, plotHeight + bw.bottom / 2);\n                        ctx.lineTo(0, plotHeight + bw.bottom / 2);\n                        ctx.stroke();\n                    }\n\n                    if (bw.left > 0) {\n                        ctx.strokeStyle = bc.left;\n                        ctx.lineWidth = bw.left;\n                        ctx.beginPath();\n                        ctx.moveTo(0 - bw.left / 2, plotHeight + bw.bottom);\n                        ctx.lineTo(0 - bw.left / 2, 0);\n                        ctx.stroke();\n                    }\n                } else {\n                    ctx.lineWidth = bw;\n                    ctx.strokeStyle = options.grid.borderColor;\n                    ctx.strokeRect(-bw / 2, -bw / 2, plotWidth + bw, plotHeight + bw);\n                }\n            }\n\n            ctx.restore();\n        }\n\n        function drawMarkings(markings, markingLayer) {\n            if (!markings) {\n                return;\n            }\n\n            for (var i = 0; i < markings.length; i++) {\n                drawMarking(markings[i], markingLayer);\n            }\n        }\n\n        function drawMarking(m, markingLayer) {\n            var xrange = extractRange(m, \"x\"),\n                yrange = extractRange(m, \"y\");\n\n            // fill in missing\n            if (xrange.from == null) {\n                xrange.from = xrange.axis.min;\n            }\n            if (xrange.to == null) {\n                xrange.to = xrange.axis.max;\n            }\n            if (yrange.from == null) {\n                yrange.from = yrange.axis.min;\n            }\n            if (yrange.to == null) {\n                yrange.to = yrange.axis.max;\n            }\n\n            // clip\n            if (xrange.to < xrange.axis.min || xrange.from > xrange.axis.max ||\n                yrange.to < yrange.axis.min || yrange.from > yrange.axis.max) {\n                return;\n            }\n\n            xrange.from = Math.max(xrange.from, xrange.axis.min);\n            xrange.to = Math.min(xrange.to, xrange.axis.max);\n            yrange.from = Math.max(yrange.from, yrange.axis.min);\n            yrange.to = Math.min(yrange.to, yrange.axis.max);\n\n            var xequal = xrange.from === xrange.to,\n                yequal = yrange.from === yrange.to;\n\n            if (xequal && yequal) {\n                return;\n            }\n\n            // then draw\n            xrange.from = Math.floor(xrange.axis.p2c(xrange.from));\n            xrange.to = Math.floor(xrange.axis.p2c(xrange.to));\n            yrange.from = Math.floor(yrange.axis.p2c(yrange.from));\n            yrange.to = Math.floor(yrange.axis.p2c(yrange.to));\n\n            if (xequal || yequal) {\n                var lineWidth = m.lineWidth || options.grid.markingsLineWidth,\n                    subPixel = lineWidth % 2 ? 0.5 : 0;\n                ctx.beginPath();\n                ctx.strokeStyle = m.color || options.grid.markingsColor;\n                ctx.lineWidth = lineWidth;\n                if (xequal) {\n                    ctx.moveTo(xrange.to + subPixel, yrange.from);\n                    ctx.lineTo(xrange.to + subPixel, yrange.to);\n                } else {\n                    ctx.moveTo(xrange.from, yrange.to + subPixel);\n                    ctx.lineTo(xrange.to, yrange.to + subPixel);\n                }\n                ctx.stroke();\n            } else {\n                ctx.fillStyle = m.color || options.grid.markingsColor;\n                if (m.rounded) {\n                    roundRect(\n                        ctx, xrange.from, yrange.to, xrange.to - xrange.from,\n                        yrange.from - yrange.to, m.rounded);\n                    ctx.fill();\n                } else {\n                    ctx.fillRect(\n                        xrange.from, yrange.to, xrange.to - xrange.from,\n                        yrange.from - yrange.to);\n                }\n            }\n\n            if (m.text) {\n\n                // left aligned horizontal position:\n                var xPos = xrange.from + plotOffset.left,\n\n                    // top baselined vertical position:\n                    yPos = (yrange.to + plotOffset.top);\n\n                if (!!m.textAlign) {\n                    switch (m.textAlign.toLowerCase()) {\n                    case \"right\":\n                        xPos = xrange.to + plotOffset.left;\n                        break;\n                    case \"center\":\n                        xPos = (xrange.from + plotOffset.left + xrange.to + plotOffset.left) / 2;\n                        break;\n                    }\n                }\n\n                if (!!m.textBaseline) {\n                    switch (m.textBaseline.toLowerCase()) {\n                    case \"bottom\":\n                        yPos = (yrange.from + plotOffset.top);\n                        break;\n                    case \"middle\":\n                        yPos = (yrange.from + plotOffset.top + yrange.to + plotOffset.top) / 2;\n                        break;\n                    }\n                }\n\n                surface.addText(markingLayer, xPos, yPos, m.text, m.font || \"flot-marking\", 0, null, m.textAlign, m.textBaseline);\n            }\n        }\n\n        function drawAxisLabels() {\n\n            $.each(allAxes(), function(_, axis) {\n\n                var box = axis.box,\n                    axisOptions = axis.options,\n                    legacyStyles = axis.direction + \"Axis \" + axis.direction + axis.n + \"Axis\",\n                    layer = \"flot-\" + axis.direction + \"-axis flot-\" + axis.direction + axis.n + \"-axis \" + legacyStyles,\n                    labelFont = axisOptions.labelFont || \"flot-axis-label axisLabels \" + axis.direction + axis.n + \"axisLabel\",\n                    tickFont = axisOptions.tickFont || \"flot-tick-label tickLabel\",\n                    tick, x, y, halign, valign;\n\n                // Remove text before checking for axis.show and ticks.length;\n                // otherwise plugins, like flot-tickrotor, that draw their own\n                // tick labels will end up with both theirs and the defaults.\n                surface.removeText(layer);\n\n                if (!axis.show || axis.ticks.length === 0) {\n                    return;\n                }\n\n                if (axisOptions.label) {\n                    if (axis.direction === \"x\") {\n                        if (axisOptions.position === \"top\") {\n                            surface.addText(layer, box.left + box.width / 2, box.top, axisOptions.label, labelFont, 0, null, \"center\", \"top\");\n                        } else {\n                            surface.addText(layer, box.left + box.width / 2, box.top + box.height, axisOptions.label, labelFont, 0, null, \"center\", \"bottom\");\n                        }\n                    } else {\n                        if (axisOptions.position === \"right\") {\n                            surface.addText(layer, box.left + box.width, box.top + box.height / 2, axisOptions.label, labelFont, 90, null, \"right\", \"middle\");\n                        } else {\n                            surface.addText(layer, box.left, box.top + box.height / 2, axisOptions.label, labelFont, -90, null, \"left\", \"middle\");\n                        }\n                    }\n                }\n\n                // Add labels for the ticks on this axis\n                for (var i = 0; i < axis.ticks.length; ++i) {\n\n                    tick = axis.ticks[i];\n                    if (!tick.label || tick.v < axis.min || tick.v > axis.max) {\n                        continue;\n                    }\n\n                    if (axis.direction === \"x\") {\n                        halign = \"center\";\n                        x = plotOffset.left + axis.p2c(tick.v);\n                        if (axis.position === \"bottom\") {\n                            y = box.top + box.padding;\n                        } else {\n                            y = box.top + box.height - box.padding;\n                            valign = \"bottom\";\n                        }\n                    } else {\n                        valign = \"middle\";\n                        y = plotOffset.top + axis.p2c(tick.v);\n                        if (axis.position === \"left\") {\n                            x = box.left + box.width - box.padding;\n                            halign = \"right\";\n                        } else {\n                            x = box.left + box.padding;\n                        }\n                    }\n\n                    surface.addText(layer, x, y, tick.label, tickFont, null, null, halign, valign);\n                }\n            });\n        }\n\n        function drawSeries(series) {\n            if (series.lines.show) {\n                drawSeriesLines(series);\n            }\n            if (series.bars.show) {\n                drawSeriesBars(series);\n            }\n            if (series.points.show) {\n                drawSeriesPoints(series);\n            }\n        }\n\n        function drawSeriesLines(series) {\n            function plotLine(datapoints, xoffset, yoffset, axisx, axisy) {\n                var points = datapoints.points,\n                    ps = datapoints.pointsize,\n                    showSteps = series.lines.steps,\n                    prevx = null, prevy = null;\n\n                ctx.beginPath();\n                for (var i = ps; i < points.length; i += ps) {\n                    var x1 = points[i - ps], y1 = points[i - ps + 1],\n                        x2 = points[i], y2 = points[i + 1];\n\n                    if (x1 == null || x2 == null) {\n                        continue;\n                    }\n\n                    // clip with ymin\n                    if (y1 <= y2 && y1 < axisy.min) {\n                        if (y2 < axisy.min) {\n\n                            // line segment is outside\n                            continue;\n                        }\n\n                        // compute new intersection point\n                        x1 = showSteps ? x2 : (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\n                        y1 = axisy.min;\n                    } else if (y2 <= y1 && y2 < axisy.min) {\n                        if (y1 < axisy.min) {\n                            continue;\n                        }\n                        x2 = showSteps ? x2 : (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\n                        y2 = axisy.min;\n                    }\n\n                    // clip with ymax\n                    if (y1 >= y2 && y1 > axisy.max) {\n                        if (y2 > axisy.max) {\n                            continue;\n                        }\n                        x1 = showSteps ? x2 : (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\n                        y1 = axisy.max;\n                    } else if (y2 >= y1 && y2 > axisy.max) {\n                        if (y1 > axisy.max) {\n                            continue;\n                        }\n                        x2 = showSteps ? x2 : (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\n                        y2 = axisy.max;\n                    }\n\n                    // clip with xmin\n                    if (x1 <= x2 && x1 < axisx.min) {\n                        if (x2 < axisx.min) {\n                            continue;\n                        }\n                        y1 = showSteps ? y1 : (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\n                        x1 = axisx.min;\n                    } else if (x2 <= x1 && x2 < axisx.min) {\n                        if (x1 < axisx.min) {\n                            continue;\n                        }\n                        y2 = showSteps ? y1 : (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\n                        x2 = axisx.min;\n                    }\n\n                    // clip with xmax\n                    if (x1 >= x2 && x1 > axisx.max) {\n                        if (x2 > axisx.max) {\n                            continue;\n                        }\n                        y1 = showSteps ? y1 : (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\n                        x1 = axisx.max;\n                    } else if (x2 >= x1 && x2 > axisx.max) {\n                        if (x1 > axisx.max) {\n                            continue;\n                        }\n                        y2 = showSteps ? y1 : (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\n                        x2 = axisx.max;\n                    }\n\n                    if (x1 !== prevx || y1 !== prevy) {\n                        ctx.moveTo(axisx.p2c(x1) + xoffset, axisy.p2c(y1) + yoffset);\n                    }\n\n                    prevx = x2;\n                    prevy = y2;\n\n                    // Draw a step\n                    if (showSteps) {\n                        if (x1 < x2) {\n                            ctx.lineTo(axisx.p2c(x2) + xoffset, axisy.p2c(y1) + yoffset);\n                        } else {\n                            ctx.lineTo(axisx.p2c(x1) + xoffset, axisy.p2c(y2) + yoffset);\n                        }\n                    }\n                    ctx.lineTo(axisx.p2c(x2) + xoffset, axisy.p2c(y2) + yoffset);\n                }\n                ctx.stroke();\n            }\n\n            function plotLineArea(datapoints, axisx, axisy) {\n                var points = datapoints.points,\n                    ps = datapoints.pointsize,\n                    showSteps = series.lines.steps,\n                    bottom = Math.min(Math.max(0, axisy.min), axisy.max),\n                    i = 0, areaOpen = false,\n                    ypos = 1, segmentStart = 0, segmentEnd = 0;\n\n                // we process each segment in two turns, first forward\n                // direction to sketch out top, then once we hit the\n                // end we go backwards to sketch the bottom\n                while (true) {\n                    if (ps > 0 && i > points.length + ps) {\n                        break;\n                    }\n\n                    // ps is negative if going backwards\n                    i += ps;\n\n                    var x1 = points[i - ps],\n                        y1 = points[i - ps + ypos],\n                        x2 = points[i], y2 = points[i + ypos];\n\n                    if (areaOpen) {\n                        if (ps > 0 && x1 != null && x2 == null) {\n\n                            // at turning point\n                            segmentEnd = i;\n                            ps = -ps;\n                            ypos = 2;\n                            continue;\n                        }\n\n                        if (ps < 0 && i === segmentStart + ps) {\n\n                            // done with the reverse sweep\n                            ctx.fill();\n                            areaOpen = false;\n                            ps = -ps;\n                            ypos = 1;\n                            i = segmentStart = segmentEnd + ps;\n                            continue;\n                        }\n                    }\n\n                    if (x1 == null || x2 == null) {\n                        continue;\n                    }\n\n                    // clip x values\n\n                    // clip with xmin\n                    if (x1 <= x2 && x1 < axisx.min) {\n                        if (x2 < axisx.min) {\n                            continue;\n                        }\n                        y1 = showSteps ? y1 : (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\n                        x1 = axisx.min;\n                    } else if (x2 <= x1 && x2 < axisx.min) {\n                        if (x1 < axisx.min) {\n                            continue;\n                        }\n                        y2 = showSteps ? y1 : (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\n                        x2 = axisx.min;\n                    }\n\n                    // clip with xmax\n                    if (x1 >= x2 && x1 > axisx.max) {\n                        if (x2 > axisx.max) {\n                            continue;\n                        }\n                        y1 = showSteps ? y1 : (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\n                        x1 = axisx.max;\n                    } else if (x2 >= x1 && x2 > axisx.max) {\n                        if (x1 > axisx.max) {\n                            continue;\n                        }\n                        y2 = showSteps ? y1 : (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\n                        x2 = axisx.max;\n                    }\n\n                    if (!areaOpen) {\n\n                        // open area\n                        ctx.beginPath();\n                        ctx.moveTo(axisx.p2c(x1), axisy.p2c(bottom));\n                        areaOpen = true;\n                    }\n\n                    // now first check the case where both is outside\n                    if (y1 >= axisy.max && y2 >= axisy.max) {\n                        ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.max));\n                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.max));\n                        continue;\n                    } else if (y1 <= axisy.min && y2 <= axisy.min) {\n                        ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.min));\n                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.min));\n                        continue;\n                    }\n\n                    // else it's a bit more complicated, there might\n                    // be a flat maxed out rectangle first, then a\n                    // triangular cutout or reverse; to find these\n                    // keep track of the current x values\n                    var x1old = x1, x2old = x2;\n\n                    // clip the y values, without shortcutting, we\n                    // go through all cases in turn\n\n                    // clip with ymin\n                    if (y1 <= y2 && y1 < axisy.min && y2 >= axisy.min) {\n                        x1 = showSteps ? x2 : (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\n                        y1 = axisy.min;\n                    } else if (y2 <= y1 && y2 < axisy.min && y1 >= axisy.min) {\n                        x2 = showSteps ? x2 : (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\n                        y2 = axisy.min;\n                    }\n\n                    // clip with ymax\n                    if (y1 >= y2 && y1 > axisy.max && y2 <= axisy.max) {\n                        x1 = showSteps ? x2 : (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\n                        y1 = axisy.max;\n                    } else if (y2 >= y1 && y2 > axisy.max && y1 <= axisy.max) {\n                        x2 = showSteps ? x2 : (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\n                        y2 = axisy.max;\n                    }\n\n                    // if the x value was changed we got a rectangle to fill\n                    if (x1 !== x1old) {\n\n                        // it goes to (x1, y1), but we fill that below\n                        ctx.lineTo(axisx.p2c(x1old), axisy.p2c(y1));\n                    }\n\n                    // fill triangular section, this sometimes result\n                    // in redundant points if (x1, y1) hasn't changed\n                    // from previous line to, but we just ignore that\n                    ctx.lineTo(axisx.p2c(x1), axisy.p2c(y1));\n\n                    // Draw a step\n                    if (showSteps) {\n                        if (x1 < x2) {\n                            ctx.lineTo(axisx.p2c(x2), axisy.p2c(y1));\n                        } else {\n                            ctx.lineTo(axisx.p2c(x1), axisy.p2c(y2));\n                        }\n                    }\n                    ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));\n\n                    // fill the other rectangle if it's there\n                    if (x2 !== x2old) {\n                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));\n                        ctx.lineTo(axisx.p2c(x2old), axisy.p2c(y2));\n                    }\n                }\n            }\n\n            ctx.save();\n            ctx.translate(plotOffset.left, plotOffset.top);\n            ctx.lineJoin = \"round\";\n\n            var lw = series.lines.lineWidth,\n                sw = series.shadowSize;\n\n            // FIXME: consider another form of shadow when filling is turned on\n            if (lw > 0 && sw > 0) {\n\n                // draw shadow as a thick and thin line with transparency\n                ctx.lineWidth = sw;\n                ctx.strokeStyle = \"rgba(0,0,0,0.1)\";\n\n                // position shadow at angle from the mid of line\n                var angle = Math.PI / 18;\n                plotLine(series.datapoints, Math.sin(angle) * (lw / 2 + sw / 2), Math.cos(angle) * (lw / 2 + sw / 2), series.xaxis, series.yaxis);\n                ctx.lineWidth = sw / 2;\n                plotLine(series.datapoints, Math.sin(angle) * (lw / 2 + sw / 4), Math.cos(angle) * (lw / 2 + sw / 4), series.xaxis, series.yaxis);\n            }\n\n            ctx.lineWidth = lw;\n            ctx.strokeStyle = series.color;\n            var fillStyle = getFillStyle(series.lines, series.color, 0, plotHeight);\n            if (fillStyle) {\n                ctx.fillStyle = fillStyle;\n                plotLineArea(series.datapoints, series.xaxis, series.yaxis);\n            }\n\n            if (lw > 0) {\n                plotLine(series.datapoints, 0, 0, series.xaxis, series.yaxis);\n            }\n            ctx.restore();\n        }\n\n        function drawSeriesPoints(series) {\n            function plotPoints(datapoints, radius, fillStyle, offset, shadow, axisx, axisy, symbol) {\n                var points = datapoints.points, ps = datapoints.pointsize;\n\n                for (var i = 0; i < points.length; i += ps) {\n                    var x = points[i], y = points[i + 1];\n                    if (x == null || x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max) {\n                        continue;\n                    }\n\n                    ctx.beginPath();\n                    x = axisx.p2c(x);\n                    y = axisy.p2c(y) + offset;\n                    if (symbol === \"circle\") {\n                        ctx.arc(x, y, radius, 0, shadow ? Math.PI : Math.PI * 2, false);\n                    } else {\n                        symbol(ctx, x, y, radius, shadow);\n                    }\n                    ctx.closePath();\n\n                    if (fillStyle) {\n                        ctx.fillStyle = fillStyle;\n                        ctx.fill();\n                    }\n                    ctx.stroke();\n                }\n            }\n\n            ctx.save();\n            ctx.translate(plotOffset.left, plotOffset.top);\n\n            var lw = series.points.lineWidth,\n                sw = series.shadowSize,\n                radius = series.points.radius,\n                symbol = series.points.symbol;\n\n            // If the user sets the line width to 0, we change it to a very\n            // small value. A line width of 0 seems to force the default of 1.\n            // Doing the conditional here allows the shadow setting to still be\n            // optional even with a lineWidth of 0.\n            if (lw === 0) {\n                lw = 0.0001;\n            }\n\n            if (lw > 0 && sw > 0) {\n\n                // draw shadow in two steps\n                var w = sw / 2;\n                ctx.lineWidth = w;\n                ctx.strokeStyle = \"rgba(0,0,0,0.1)\";\n                plotPoints(series.datapoints, radius, null, w + w / 2, true,\n                           series.xaxis, series.yaxis, symbol);\n\n                ctx.strokeStyle = \"rgba(0,0,0,0.2)\";\n                plotPoints(series.datapoints, radius, null, w / 2, true,\n                           series.xaxis, series.yaxis, symbol);\n            }\n\n            ctx.lineWidth = lw;\n            ctx.strokeStyle = series.points.strokeColor || series.color;\n            plotPoints(series.datapoints, radius,\n                       getFillStyle(series.points, series.color), 0, false,\n                       series.xaxis, series.yaxis, symbol);\n            ctx.restore();\n        }\n\n        function drawBar(x, y, b, barLeft, barRight, fillStyleCallback, axisx, axisy, c, horizontal, lineWidth) {\n            var left, right, bottom, top,\n                drawLeft, drawRight, drawTop, drawBottom,\n                tmp;\n\n            // in horizontal mode, we start the bar from the left\n            // instead of from the bottom so it appears to be\n            // horizontal rather than vertical\n            if (horizontal) {\n                drawBottom = drawRight = drawTop = true;\n                drawLeft = false;\n                left = b;\n                right = x;\n                top = y + barLeft;\n                bottom = y + barRight;\n\n                // account for negative bars\n                if (right < left) {\n                    tmp = right;\n                    right = left;\n                    left = tmp;\n                    drawLeft = true;\n                    drawRight = false;\n                }\n            } else {\n                drawLeft = drawRight = drawTop = true;\n                drawBottom = false;\n                left = x + barLeft;\n                right = x + barRight;\n                bottom = b;\n                top = y;\n\n                // account for negative bars\n                if (top < bottom) {\n                    tmp = top;\n                    top = bottom;\n                    bottom = tmp;\n                    drawBottom = true;\n                    drawTop = false;\n                }\n            }\n\n            // clip\n            if (right < axisx.min || left > axisx.max ||\n                top < axisy.min || bottom > axisy.max) {\n                return;\n            }\n\n            if (left < axisx.min) {\n                left = axisx.min;\n                drawLeft = false;\n            }\n\n            if (right > axisx.max) {\n                right = axisx.max;\n                drawRight = false;\n            }\n\n            if (bottom < axisy.min) {\n                bottom = axisy.min;\n                drawBottom = false;\n            }\n\n            if (top > axisy.max) {\n                top = axisy.max;\n                drawTop = false;\n            }\n\n            left = axisx.p2c(left);\n            bottom = axisy.p2c(bottom);\n            right = axisx.p2c(right);\n            top = axisy.p2c(top);\n\n            // fill the bar\n            if (fillStyleCallback) {\n                c.fillStyle = fillStyleCallback(bottom, top);\n                c.fillRect(left, top, right - left, bottom - top);\n            }\n\n            // draw outline\n            if (lineWidth > 0 && (drawLeft || drawRight || drawTop || drawBottom)) {\n                c.beginPath();\n\n                // FIXME: inline moveTo is buggy with excanvas\n                c.moveTo(left, bottom);\n                if (drawLeft) {\n                    c.lineTo(left, top);\n                } else {\n                    c.moveTo(left, top);\n                }\n                if (drawTop) {\n                    c.lineTo(right, top);\n                } else {\n                    c.moveTo(right, top);\n                }\n                if (drawRight) {\n                    c.lineTo(right, bottom);\n                } else {\n                    c.moveTo(right, bottom);\n                }\n                if (drawBottom) {\n                    c.lineTo(left, bottom);\n                } else {\n                    c.moveTo(left, bottom);\n                }\n                c.stroke();\n            }\n        }\n\n        function drawSeriesBars(series) {\n            function plotBars(datapoints, barLeft, barRight, fillStyleCallback, axisx, axisy) {\n                var points = datapoints.points, ps = datapoints.pointsize;\n\n                for (var i = 0; i < points.length; i += ps) {\n                    if (points[i] == null) {\n                        continue;\n                    }\n                    drawBar(points[i], points[i + 1], points[i + 2], barLeft, barRight, fillStyleCallback, axisx, axisy, ctx, series.bars.horizontal, series.bars.lineWidth);\n                }\n            }\n\n            ctx.save();\n            ctx.translate(plotOffset.left, plotOffset.top);\n\n            // FIXME: figure out a way to add shadows (for instance along the right edge)\n            ctx.lineWidth = series.bars.lineWidth;\n            ctx.strokeStyle = series.color;\n\n            var barLeft;\n\n            switch (series.bars.align) {\n            case \"left\":\n                barLeft = 0;\n                break;\n            case \"right\":\n                barLeft = -series.bars.barWidth;\n                break;\n            default:\n                barLeft = -series.bars.barWidth / 2;\n            }\n\n            var fillStyleCallback = series.bars.fill ? function(bottom, top) { return getFillStyle(series.bars, series.color, bottom, top); } : null;\n            plotBars(series.datapoints, barLeft, barLeft + series.bars.barWidth, fillStyleCallback, series.xaxis, series.yaxis);\n            ctx.restore();\n        }\n\n        function getFillStyle(filloptions, seriesColor, bottom, top) {\n            var fill = filloptions.fill;\n            if (!fill) {\n                return null;\n            }\n\n            if (filloptions.fillColor) {\n                return getColorOrGradient(filloptions.fillColor, bottom, top, seriesColor);\n            }\n\n            var c = $.color.parse(seriesColor);\n            c.a = isNumeric(fill) ? fill : 0.4;\n            c.normalize();\n            return c.toString();\n        }\n\n        function insertLegend() {\n\n            if (options.legend.container != null) {\n                $(options.legend.container).html(\"\");\n            } else {\n                placeholder.find(\".legend\").remove();\n            }\n\n            if (!options.legend.show) {\n                return;\n            }\n\n            var entries = [], lf = options.legend.labelFormatter, s, label, i;\n\n            // Build a list of legend entries, with each having a label and a color\n            for (i = 0; i < series.length; ++i) {\n                s = series[i];\n                if (s.label) {\n                    label = lf ? lf(s.label, s) : s.label;\n                    if (label) {\n                        entries.push({\n                            label: label,\n                            color: s.color\n                        });\n                    }\n                }\n            }\n\n            // No entries implies no legend\n            if (entries.length === 0) {\n                return;\n            }\n\n            // Sort the legend using either the default or a custom comparator\n            if (options.legend.sorted) {\n                if ($.isFunction(options.legend.sorted)) {\n                    entries.sort(options.legend.sorted);\n                } else if (options.legend.sorted === \"reverse\") {\n                    entries.reverse();\n                } else {\n                    var ascending = options.legend.sorted !== \"descending\";\n                    entries.sort(function(a, b) {\n                        return a.label === b.label ? 0 : (\n                            (a.label < b.label) !== ascending ? 1 : -1   // Logical XOR\n                        );\n                    });\n                }\n            }\n\n            // Generate markup for the list of entries, in their final order\n            var table = $(\"<table></table>\").css({\n                \"font-size\": \"smaller\",\n                \"color\": options.grid.color\n            }), rowBuffer = null;\n\n            for (i = 0; i < entries.length; ++i) {\n\n                var entry = entries[i];\n\n                if (i % options.legend.noColumns === 0) {\n                    if (rowBuffer !== null) {\n                        table.append(rowBuffer);\n                    }\n                    rowBuffer = $(\"<tr></tr>\");\n                }\n\n                var colorbox = $(\"<div></div>\").css({\n                    \"width\": \"4px\",\n                    \"height\": 0,\n                    \"border\": \"5px solid \" + entry.color,\n                    \"overflow\": \"hidden\"\n                }),\n\n                borderbox = $(\"<div></div>\").css({\n                    \"border\": \"1px solid \" + options.legend.labelBoxBorderColor,\n                    \"padding\": \"1px\"\n                });\n\n                rowBuffer.append(\n                    $(\"<td></td>\").addClass(\"legendColorBox\").append(borderbox.append(colorbox)),\n                    $(\"<td></td>\").addClass(\"legendLabel\").html(entry.label)\n                );\n            }\n\n            table.append(rowBuffer);\n\n            if (options.legend.container != null) {\n                $(options.legend.container).html(table);\n            } else {\n                var pos = { \"position\": \"absolute\" },\n                    p = options.legend.position,\n                    m = options.legend.margin;\n                if (m[0] == null) {\n                    m = [m, m];\n                }\n                if (p.charAt(0) === \"n\") {\n                    pos.top = (m[1] + plotOffset.top) + \"px\";\n                } else if (p.charAt(0) === \"s\") {\n                    pos.bottom = (m[1] + plotOffset.bottom) + \"px\";\n                }\n                if (p.charAt(1) === \"e\") {\n                    pos.right = (m[0] + plotOffset.right) + \"px\";\n                } else if (p.charAt(1) === \"w\") {\n                    pos.left = (m[0] + plotOffset.left) + \"px\";\n                }\n                var legend = $(\"<div></div>\").addClass(\"legend\").append(table.css(pos)).appendTo(placeholder);\n                if (options.legend.backgroundOpacity !== 0.0) {\n\n                    // put in the transparent background\n                    // separately to avoid blended labels and\n                    // label boxes\n                    var c = options.legend.backgroundColor;\n                    if (c == null) {\n                        c = options.grid.backgroundColor;\n                        if (c && typeof c === \"string\") {\n                            c = $.color.parse(c);\n                        } else {\n                            c = $.color.extract(legend, \"background-color\");\n                        }\n                        c.a = 1;\n                        c = c.toString();\n                    }\n                    var div = legend.children();\n\n                    // Position also applies to this\n                    $(\"<div></div>\").css(pos).css({\n                        \"width\": div.width() + \"px\",\n                        \"height\": div.height() + \"px\",\n                        \"background-color\": c,\n                        \"opacity\": options.legend.backgroundOpacity\n                    }).prependTo(legend);\n                }\n            }\n        }\n\n        /**\n         * returns the data item the mouse is over, or null if none is found\n         */\n        function findNearbyItem(mouseX, mouseY, seriesFilter) {\n            var maxDistance = options.grid.mouseActiveRadius,\n                smallestDistance = maxDistance * maxDistance + 1,\n                item = null, i, j, ps;\n\n            for (i = series.length - 1; i >= 0; --i) {\n                if (!seriesFilter(series[i])) {\n                    continue;\n                }\n\n                var s = series[i],\n                    axisx = s.xaxis,\n                    axisy = s.yaxis,\n                    points = s.datapoints.points,\n\n                    // precompute some stuff to make the loop faster\n                    mx = axisx.c2p(mouseX),\n                    my = axisy.c2p(mouseY),\n                    maxx = maxDistance / axisx.scale,\n                    maxy = maxDistance / axisy.scale,\n                    x, y;\n\n                ps = s.datapoints.pointsize;\n\n                // with inverse transforms, we can't use the maxx/maxy\n                // optimization, sadly\n                if (axisx.options.inverseTransform) {\n                    maxx = Number.MAX_VALUE;\n                }\n                if (axisy.options.inverseTransform) {\n                    maxy = Number.MAX_VALUE;\n                }\n\n                if (s.lines.show || s.points.show) {\n                    for (j = 0; j < points.length; j += ps) {\n\n                        x = points[j];\n                        y = points[j + 1];\n\n                        if (x == null) {\n                            continue;\n                        }\n\n                        // For points and lines, the cursor must be within a\n                        // certain distance to the data point\n                        if (x - mx > maxx || x - mx < -maxx ||\n                            y - my > maxy || y - my < -maxy) {\n                            continue;\n                        }\n\n                        // We have to calculate distances in pixels, not in\n                        // data units, because the scales of the axes may be different\n                        var dx = Math.abs(axisx.p2c(x) - mouseX),\n                            dy = Math.abs(axisy.p2c(y) - mouseY),\n                            dist = dx * dx + dy * dy; // we save the sqrt\n\n                        // use <= to ensure last point takes precedence\n                        // (last generally means on top of)\n                        if (dist < smallestDistance) {\n                            smallestDistance = dist;\n                            item = [i, j / ps];\n                        }\n                    }\n                }\n\n                if (s.bars.show && !item) {\n\n                    // no other point can be nearby\n                    var barLeft, barRight;\n\n                    switch (s.bars.align) {\n                    case \"left\":\n                        barLeft = 0;\n                        break;\n                    case \"right\":\n                        barLeft = -s.bars.barWidth;\n                        break;\n                    default:\n                        barLeft = -s.bars.barWidth / 2;\n                    }\n\n                    barRight = barLeft + s.bars.barWidth;\n\n                    for (j = 0; j < points.length; j += ps) {\n                        x = points[j];\n                        y = points[j + 1];\n                        var b = points[j + 2];\n                        if (x == null) {\n                            continue;\n                        }\n\n                        // for a bar graph, the cursor must be inside the bar\n                        if (series[i].bars.horizontal ?\n                            (mx <= Math.max(b, x) && mx >= Math.min(b, x) &&\n                             my >= y + barLeft && my <= y + barRight) :\n                            (mx >= x + barLeft && mx <= x + barRight &&\n                             my >= Math.min(b, y) && my <= Math.max(b, y))) {\n                            item = [i, j / ps];\n                        }\n                    }\n                }\n            }\n\n            if (item) {\n                i = item[0];\n                j = item[1];\n                ps = series[i].datapoints.pointsize;\n\n                return { datapoint: series[i].datapoints.points.slice(j * ps, (j + 1) * ps),\n                         dataIndex: j,\n                         series: series[i],\n                         seriesIndex: i };\n            }\n\n            return null;\n        }\n\n        function onMouseMove(e) {\n            if (options.grid.hoverable) {\n                triggerClickHoverEvent(\"plothover\", e,\n                                       function(s) { return s.hoverable !== false; });\n            }\n        }\n\n        function onMouseLeave(e) {\n            if (options.grid.hoverable) {\n                triggerClickHoverEvent(\"plothover\", e,\n                                       function() { return false; });\n            }\n        }\n\n        function onClick(e) {\n            triggerClickHoverEvent(\"plotclick\", e,\n                                   function(s) { return s.clickable !== false; });\n        }\n\n        /**\n         * trigger click or hover event (they send the same parameters\n         * so we share their code)\n         */\n        function triggerClickHoverEvent(eventname, event, seriesFilter) {\n            var offset = eventHolder.offset(),\n                canvasX = event.pageX - offset.left - plotOffset.left,\n                canvasY = event.pageY - offset.top - plotOffset.top,\n            pos = canvasToAxisCoords({ left: canvasX, top: canvasY });\n\n            pos.pageX = event.pageX;\n            pos.pageY = event.pageY;\n\n            var item = findNearbyItem(canvasX, canvasY, seriesFilter);\n\n            if (item) {\n\n                // fill in mouse pos for any listeners out there\n                item.pageX = parseInt(item.series.xaxis.p2c(item.datapoint[0]) + offset.left + plotOffset.left, 10);\n                item.pageY = parseInt(item.series.yaxis.p2c(item.datapoint[1]) + offset.top + plotOffset.top, 10);\n            }\n\n            if (options.grid.autoHighlight) {\n\n                // clear auto-highlights\n                for (var i = 0; i < highlights.length; ++i) {\n                    var h = highlights[i];\n                    if (h.auto === eventname && !(\n                        item && h.series === item.series &&\n                        h.point[0] === item.datapoint[0] &&\n                        h.point[1] === item.datapoint[1]\n                    )) {\n                        unhighlight(h.series, h.point);\n                    }\n                }\n\n                if (item) {\n                    highlight(item.series, item.datapoint, eventname);\n                }\n            }\n\n            placeholder.trigger(eventname, [pos, item]);\n        }\n\n        function triggerRedrawOverlay() {\n            var t = options.interaction.redrawOverlayInterval;\n\n            if (t === -1) {\n\n                // skip event queue\n                drawOverlay();\n                return;\n            }\n\n            if (!redrawTimeout) {\n                redrawTimeout = setTimeout(drawOverlay, t);\n            }\n        }\n\n        function drawOverlay() {\n            redrawTimeout = null;\n\n            // draw highlights\n            octx.save();\n            overlay.clear();\n            octx.translate(plotOffset.left, plotOffset.top);\n\n            var i, hi;\n            for (i = 0; i < highlights.length; ++i) {\n                hi = highlights[i];\n\n                if (hi.series.bars.show) {\n                    drawBarHighlight(hi.series, hi.point);\n                } else {\n                    drawPointHighlight(hi.series, hi.point);\n                }\n            }\n            octx.restore();\n\n            executeHooks(hooks.drawOverlay, [octx]);\n        }\n\n        function highlight(s, point, auto) {\n            if (isNumeric(s)) {\n                s = series[s];\n            }\n\n            if (isNumeric(point)) {\n                var ps = s.datapoints.pointsize;\n                point = s.datapoints.points.slice(ps * point, ps * (point + 1));\n            }\n\n            var i = indexOfHighlight(s, point);\n            if (i === -1) {\n                highlights.push({ series: s, point: point, auto: auto });\n                triggerRedrawOverlay();\n            } else if (!auto) {\n                highlights[i].auto = false;\n            }\n        }\n\n        function unhighlight(s, point) {\n            if (s == null && point == null) {\n                highlights = [];\n                triggerRedrawOverlay();\n                return;\n            }\n\n            if (isNumeric(s)) {\n                s = series[s];\n            }\n\n            if (isNumeric(point)) {\n                var ps = s.datapoints.pointsize;\n                point = s.datapoints.points.slice(ps * point, ps * (point + 1));\n            }\n\n            var i = indexOfHighlight(s, point);\n            if (i !== -1) {\n                highlights.splice(i, 1);\n                triggerRedrawOverlay();\n            }\n        }\n\n        function indexOfHighlight(s, p) {\n            for (var i = 0; i < highlights.length; ++i) {\n                var h = highlights[i];\n                if (h.series === s && h.point[0] === p[0] && h.point[1] === p[1]) {\n                    return i;\n                }\n            }\n            return -1;\n        }\n\n        function drawPointHighlight(series, point) {\n            var x = point[0], y = point[1],\n                axisx = series.xaxis, axisy = series.yaxis,\n                highlightColor = (typeof series.highlightColor === \"string\") ? series.highlightColor : $.color.parse(series.color).scale(\"a\", 0.5).toString();\n\n            if (x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max) {\n                return;\n            }\n\n            var pointRadius, radius;\n\n            if (series.points.show) {\n                pointRadius = series.points.radius + series.points.lineWidth / 2;\n                radius = 1.5 * pointRadius;\n            } else {\n                pointRadius = series.points.radius;\n                radius = 0.5 * pointRadius;\n            }\n            octx.lineWidth = pointRadius;\n            octx.strokeStyle = highlightColor;\n            x = axisx.p2c(x);\n            y = axisy.p2c(y);\n\n            octx.beginPath();\n            if (series.points.symbol === \"circle\") {\n                octx.arc(x, y, radius, 0, 2 * Math.PI, false);\n            } else {\n                series.points.symbol(octx, x, y, radius, false);\n            }\n            octx.closePath();\n            octx.stroke();\n        }\n\n        function drawBarHighlight(series, point) {\n            var highlightColor = (typeof series.highlightColor === \"string\") ? series.highlightColor : $.color.parse(series.color).scale(\"a\", 0.5).toString(),\n                fillStyle = highlightColor,\n                barLeft;\n\n            switch (series.bars.align) {\n            case \"left\":\n                barLeft = 0;\n                break;\n            case \"right\":\n                barLeft = -series.bars.barWidth;\n                break;\n            default:\n                barLeft = -series.bars.barWidth / 2;\n            }\n\n            octx.lineWidth = series.bars.lineWidth;\n            octx.strokeStyle = highlightColor;\n\n            drawBar(point[0], point[1], point[2] || 0, barLeft, barLeft + series.bars.barWidth,\n                    function() { return fillStyle; }, series.xaxis, series.yaxis, octx, series.bars.horizontal, series.bars.lineWidth);\n        }\n\n        function getColorOrGradient(spec, bottom, top, defaultColor) {\n            if (typeof spec === \"string\") {\n                return spec;\n            } else {\n\n                // assume this is a gradient spec; IE currently only\n                // supports a simple vertical gradient properly, so that's\n                // what we support too\n                var gradient = ctx.createLinearGradient(0, top, 0, bottom);\n\n                for (var i = 0, l = spec.colors.length; i < l; ++i) {\n                    var c = spec.colors[i];\n                    if (typeof c !== \"string\") {\n                        var co = $.color.parse(defaultColor);\n                        if (c.brightness != null) {\n                            co = co.scale(\"rgb\", c.brightness);\n                        }\n                        if (c.opacity != null) {\n                            co.a *= c.opacity;\n                        }\n                        c = co.toString();\n                    }\n                    gradient.addColorStop(i / (l - 1), c);\n                }\n\n                return gradient;\n            }\n        }\n    }\n\n    /**\n     * Add the plot function to the top level of the jQuery object\n     */\n    $.plot = function(placeholder, data, options) {\n        var plot = new Plot($(placeholder), data, options, $.plot.plugins);\n        return plot;\n    };\n\n    $.plot.version = \"0.9.0-alpha\";\n\n    $.plot.plugins = [];\n\n    /**\n     * Also add the plot function as a chainable property\n     */\n    $.fn.plot = function(data, options) {\n        return this.each(function() {\n            $.plot(this, data, options);\n        });\n    };\n\n    /**\n     * round to nearby lower multiple of base\n     */\n    function floorInBase(n, base) {\n        return base * Math.floor(n / base);\n    }\n\n    /**\n     * Draw a rectangle with rounded corner on the canvas.\n     *\n     * @param {CanvasRenderingContext2D} ctx The canvas 2D context.\n     * @param {number} x The x-axis coordinate of the upper left corner of\n     *      the rectangle to be drawn.\n     * @param {number} y The y-axis coordinate of the upper left corner of\n     *      the rectangle to be drawn.\n     * @param {number} width The width of the rectangle to be drawn.\n     * @param {number} height The height of the rectangle to be drawn.\n     * @param {number} radius The radius of the corner of the rectangle\n     *      to be drawn.\n     */\n    function roundRect(ctx, x, y, width, height, radius) {\n        var r = x + width,\n            b = y + height;\n\n        ctx.beginPath();\n        ctx.moveTo(x + radius, y);\n        ctx.lineTo(r - radius, y);\n        ctx.quadraticCurveTo(r, y, r, y + radius);\n        ctx.lineTo(r, y + height - radius);\n        ctx.quadraticCurveTo(r, b, r - radius, b);\n        ctx.lineTo(x + radius, b);\n        ctx.quadraticCurveTo(x, b, x, b - radius);\n        ctx.lineTo(x, y + radius);\n        ctx.quadraticCurveTo(x, y, x + radius, y);\n        ctx.closePath();\n        return ctx;\n    }\n\n})(jQuery);\n"],"sourceRoot":"webpack:///"}