{"version":3,"sources":["./src/app/shared/models/rule-node.models.ts","./src/app/core/utils.ts","./src/app/core/translate/missing-translate-handler.ts","./src/app/shared/models/queue.models.ts","./src/app/shared/components/time/datetime-period.component.ts","./src/app/shared/components/time/datetime-period.component.html","./src/app/core/services/menu.service.ts","./src/app/modules/home/models/widget-component.models.ts","./src/app/shared/components/image-input.component.ts","./src/app/shared/components/image-input.component.html","./src/app/shared/components/tb-error.component.ts","./src/app/modules/home/home.component.ts","./src/app/modules/home/home.component.html","./src/app/shared/models/widget.models.ts","./src/app/shared/components/entity/entity-subtype-list.component.ts","./src/app/shared/components/entity/entity-subtype-list.component.html","./src/app/core/settings/settings.utils.ts","./src/app/shared/components/logo.component.ts","./src/app/shared/components/logo.component.html","./src/app/core/http/asset.service.ts","./src/app/shared/components/mat-chip-draggable.directive.ts","./src/app/core/http/entity.service.ts","./src/app/shared/models/ota-package.models.ts","./src/app/shared/components/marked-options.service.ts","./src/app/modules/home/home-routing.module.ts","./src/app/shared/models/telemetry/telemetry.models.ts","./src/app/shared/models/component-descriptor.models.ts","./src/app/core/translate/translate-default-parser.ts","./src/app/shared/components/button/toggle-password.component.ts","./src/app/shared/components/button/toggle-password.component.html","./src/app/shared/components/hotkeys.directive.ts","./src/app/shared/components/entity/entity-gateway-select.component.ts","./src/app/shared/components/entity/entity-gateway-select.component.html","./src/app/shared/components/entity/entity-subtype-select.component.ts","./src/app/shared/components/entity/entity-subtype-select.component.html","./src/app/shared/models/page/sort-order.ts","./src/app/shared/components/value-input.component.ts","./src/app/shared/components/value-input.component.html","./src/app/shared/components/queue/queue-type-list.component.ts","./src/app/shared/components/queue/queue-type-list.component.html","./src/app/modules/login/pages/login/create-password.component.ts","./src/app/modules/login/pages/login/create-password.component.html","./src/app/core/http/widget.service.ts","./src/app/shared/components/socialshare-panel.component.ts","./src/app/shared/components/socialshare-panel.component.html","./src/app/modules/login/pages/login/reset-password.component.ts","./src/app/modules/login/pages/login/reset-password.component.html","./src/app/shared/models/entity.models.ts","./src/app/shared/components/entity/entity-subtype-autocomplete.component.ts","./src/app/shared/components/entity/entity-subtype-autocomplete.component.html","./src/app/shared/models/relation.models.ts","./src/app/shared/models/material.models.ts","./src/app/shared/animations/speed-dial-fab.animations.ts","./src/app/shared/components/dashboard-select-panel.component.ts","./src/app/shared/components/dashboard-select-panel.component.html","./src/app/shared/models/edge.models.ts","./src/app/shared/components/entity/entity-select.component.ts","./src/app/shared/components/entity/entity-select.component.html","./src/app/shared/models/id/customer-id.ts","./src/app/shared/components/footer-fab-buttons.component.ts","./src/app/shared/components/footer-fab-buttons.component.html","./src/app/shared/models/rule-chain.models.ts","./src/app/shared/components/entity/entity-type-select.component.ts","./src/app/shared/components/entity/entity-type-select.component.html","./src/app/shared/components/fullscreen.directive.ts","./src/app/shared/components/entity/entity-list-select.component.ts","./src/app/shared/components/entity/entity-list-select.component.html","./src/app/core/http/user.service.ts","./src/app/shared/pipe/file-size.pipe.ts","./src/app/core/http/component-descriptor.service.ts","./src/app/core/settings/settings.reducer.ts","./src/environments/environment.ts","./src/app/shared/components/led-light.component.ts","./src/app/shared/components/led-light.component.html","./src/app/core/http/entity-relation.service.ts","./src/app/core/settings/settings.actions.ts","./src/app/core/http/attribute.service.ts","./src/app/shared/components/time/timeinterval.component.ts","./src/app/shared/components/time/timeinterval.component.html","./src/app/core/auth/auth.selectors.ts","./src/app/core/http/rule-chain.service.ts","./src/app/core/interceptors/interceptor-http-params.ts","./src/app/core/http/ui-settings.service.ts","./src/app/core/http/device.service.ts","./src/app/core/http/ota-package.service.ts","./src/app/shared/models/page/page-data.ts","./src/app/shared/components/json-content.component.ts","./src/app/shared/components/json-content.component.html","./src/app/core/settings/settings.selectors.ts","./src/app/core/local-storage/local-storage.service.ts","./src/app/shared/pipe/keyboard-shortcut.pipe.ts","./src/app/shared/components/entity/entity-list.component.ts","./src/app/shared/components/entity/entity-list.component.html","./src/app/shared/components/kv-map.component.ts","./src/app/shared/components/kv-map.component.html","./src/app/shared/components/popover.component.ts","./src/app/shared/components/json-object-edit.component.ts","./src/app/shared/components/json-object-edit.component.html","./src/app/shared/components/breadcrumb.component.ts","./src/app/shared/components/breadcrumb.component.html","./src/app/shared/components/dialog/json-object-edit-dialog.component.ts","./src/app/shared/components/dialog/json-object-edit-dialog.component.html","./src/app/shared/components/footer.component.ts","./src/app/shared/components/footer.component.html","./src/app/shared/components/tb-anchor.component.ts","./src/app/shared/components/relation/relation-type-autocomplete.component.ts","./src/app/shared/components/relation/relation-type-autocomplete.component.html","./src/app/core/http/queue.service.ts","./src/app/core/notification/notification.reducer.ts","./src/app/shared/models/device.models.ts","./src/app/shared/components/widgets-bundle-select.component.ts","./src/app/shared/components/widgets-bundle-select.component.html","./src/app/shared/models/id/tenant-id.ts","./src/app/shared/pipe/nospace.pipe.ts","./src/app/shared/models/alias.models.ts","./src/app/modules/login/pages/login/login.component.ts","./src/app/modules/login/pages/login/login.component.html","./src/app/shared/components/nav-tree.component.ts","./src/app/shared/components/nav-tree.component.html","./src/app/core/guards/auth.guard.ts","./src/app/core/services/title.service.ts","./src/app/core/interceptors/load.selectors.ts","./src/app/core/services/resources.service.ts","./src/app/core/services/help.service.ts","./src/app/core/services/utils.service.ts","./src/app/shared/shared.module.ts","./src/app/shared/models/oauth2.models.ts","./src/app/shared/components/popover.models.ts","./src/app/shared/components/help-popup.component.ts","./src/app/shared/components/help-popup.component.html","./src/app/core/meta-reducers/init-state-from-local-storage.reducer.ts","./src/app/core/translate/translate-default-compiler.ts","./src/app/core/auth/auth.reducer.ts","./src/app/shared/components/json-form/json-form.component.ts","./src/app/shared/components/json-form/json-form.component.html","./src/app/shared/components/fab-toolbar.component.ts","./src/app/shared/components/fab-toolbar.component.html","./src/app/shared/components/page.component.ts","./src/app/core/services/dialog.service.ts","./src/app/shared/components/dialog/material-icons-dialog.component.ts","./src/app/shared/components/dialog/material-icons-dialog.component.html","./src/app/app.component.ts","./src/app/app.component.html","./src/app/shared/pipe/truncate.pipe.ts","./src/app/core/services/mobile.service.ts","./src/app/shared/components/entity/entity-autocomplete.component.ts","./src/app/shared/components/entity/entity-autocomplete.component.html","./src/app/shared/models/entity-type.models.ts","./src/app/shared/models/alarm.models.ts","./src/app/shared/models/beautify.models.ts","./src/app/modules/home/menu/menu-toggle.component.ts","./src/app/modules/home/menu/menu-toggle.component.html","./src/app/shared/components/directives/component-outlet.directive.ts","./src/app/shared/components/dialog/color-picker-dialog.component.ts","./src/app/shared/components/dialog/color-picker-dialog.component.html","./src/app/core/auth/auth.service.ts","./src/app/core/core.state.ts","./src/app/shared/components/cheatsheet.component.ts","./src/app/shared/pipe/tbJson.pipe.ts","./src/app/core/http/tenant.service.ts","./src/app/shared/models/id/alarm-id.ts","./src/app/shared/components/json-form/react/json-form-utils.ts","./src/app/shared/components/tb-checkbox.component.ts","./src/app/shared/components/tb-checkbox.component.html","./src/app/shared/components/file-input.component.ts","./src/app/shared/components/file-input.component.html","./src/app/shared/components/dashboard-autocomplete.component.ts","./src/app/shared/components/dashboard-autocomplete.component.html","./src/app/core/services/notification.service.ts","./src/app/core/http/http-utils.ts","./src/app/core/http/dashboard.service.ts","./src/app/core/services/dynamic-component-factory.service.ts","./src/app/app.module.ts","./src/app/shared/components/directives/tb-json-to-string.directive.ts","./src/app/shared/models/time/time.models.ts","./src/app/shared/components/message-type-autocomplete.component.ts","./src/app/shared/components/message-type-autocomplete.component.html","./src/app/shared/components/widgets-bundle-search.component.ts","./src/app/shared/components/widgets-bundle-search.component.html","./src/app/shared/pipe/highlight.pipe.ts","./src/app/shared/components/time/history-selector/history-selector.component.ts","./src/app/shared/components/time/history-selector/history-selector.component.html","./src/app/core/operator/enterZone.ts","./src/app/shared/components/directives/sring-template-outlet.directive.ts","./src/app/shared/components/user-menu.component.ts","./src/app/shared/components/user-menu.component.html","./src/app/shared/components/protobuf-content.component.ts","./src/app/shared/components/protobuf-content.component.html","./src/app/core/interceptors/load.reducer.ts","./src/app/shared/pipe/enum-to-array.pipe.ts","./src/app/core/http/device-profile.service.ts","./src/app/modules/login/login.module.ts","./src/app/modules/home/components/profile/device/lwm2m/lwm2m-profile-config.models.ts","./src/app/core/services/broadcast.service.ts","./src/app/shared/models/ace/completion.models.ts","./src/app/shared/components/time/datetime.component.ts","./src/app/shared/components/time/datetime.component.html","./src/app/shared/components/dialog.component.ts","./src/app/core/meta-reducers/debug.reducer.ts","./src/app/shared/models/constants.ts","./src/app/shared/components/contact.component.ts","./src/app/shared/components/contact.component.html","./src/app/core/interceptors/interceptor-config.ts","./src/app/shared/components/dialog/todo-dialog.component.ts","./src/app/shared/components/dialog/todo-dialog.component.html","./src/app/modules/home/home.module.ts","./src/app/shared/components/time/timewindow-panel.component.ts","./src/app/shared/components/time/timewindow-panel.component.html","./src/app/core/http/entity-view.service.ts","./src/app/shared/components/tokens.ts","./src/app/shared/components/button/copy-button.component.ts","./src/app/shared/components/button/copy-button.component.html","./src/app/shared/models/ace/ace.models.ts","./src/app/core/http/admin.service.ts","./src/app/shared/components/dialog/alert-dialog.component.ts","./src/app/shared/components/dialog/alert-dialog.component.html","./src/app/shared/components/material-icon-select.component.ts","./src/app/shared/components/material-icon-select.component.html","./src/app/shared/components/time/timewindow.component.ts","./src/app/shared/components/time/timewindow.component.html","./src/app/core/services/time.service.ts","./src/app/modules/home/models/contact.models.ts","./src/app/shared/components/help.component.ts","./src/app/shared/components/help.component.html","./src/app/core/http/customer.service.ts","./src/app/modules/home/menu/menu-link.component.html","./src/app/modules/home/menu/menu-link.component.ts","./src/app/core/interceptors/load.actions.ts","./src/app/shared/models/page/page-link.ts","./src/app/shared/components/dialog/node-script-test-dialog.component.ts","./src/app/shared/components/dialog/node-script-test-dialog.component.html","./src/app/core/services/raf.service.ts","./src/app/shared/components/color-input.component.ts","./src/app/shared/components/color-input.component.html","./src/app/shared/components/markdown.component.ts","./src/app/shared/components/markdown.component.html","./src/app/shared/models/id/has-uuid.ts","./src/app/shared/components/dialog/confirm-dialog.component.ts","./src/app/shared/components/dialog/confirm-dialog.component.html","./src/app/core/core.module.ts","./src/app/shared/components/time/timezone-select.component.ts","./src/app/shared/components/time/timezone-select.component.html","./src/app/modules/home/models/searchable-component.models.ts","./src/app/shared/components/ota-package/ota-package-autocomplete.component.ts","./src/app/shared/components/ota-package/ota-package-autocomplete.component.html","./src/app/modules/login/login-routing.module.ts","./src/app/modules/login/pages/login/reset-password-request.component.ts","./src/app/modules/login/pages/login/reset-password-request.component.html","./src/app/shared/components/toast.directive.ts","./src/app/shared/components/snack-bar-component.html","./src/app/shared/components/entity/entity-keys-list.component.ts","./src/app/shared/components/entity/entity-keys-list.component.html","./src/app/core/auth/auth.actions.ts","./src/app/shared/components/circular-progress.directive.ts","./src/app/modules/home/menu/side-menu.component.ts","./src/app/modules/home/menu/side-menu.component.html","./src/app/core/settings/settings.effects.ts","./src/app/shared/pipe/selectable-columns.pipe.ts","./src/app/shared/components/dashboard-select.component.ts","./src/app/shared/components/dashboard-select.component.html","./src/app/modules/dashboard/dashboard-routing.module.ts","./src/app/app-routing.module.ts","./src/app/core/notification/notification.effects.ts","./src/app/shared/components/popover.service.ts","./src/app/shared/components/entity/entity-type-list.component.ts","./src/app/shared/components/entity/entity-type-list.component.html","./src/app/shared/components/help-markdown.component.ts","./src/app/shared/components/help-markdown.component.html","./src/app/core/services/window.service.ts","./src/app/core/notification/notification.actions.ts","./src/app/core/interceptors/global-http-interceptor.ts","./src/app/shared/models/query/query.models.ts","./src/app/core/http/edge.service.ts","./src/app/shared/components/js-func.component.ts","./src/app/shared/components/js-func.component.html","./src/app/shared/pipe/milliseconds-to-time-string.pipe.ts","./src/main.ts","./src/app/shared/components/time/quick-time-interval.component.ts","./src/app/shared/components/time/quick-time-interval.component.html","./$_lazy_route_resource lazy namespace object","./src/app/shared/models/authority.enum.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { BaseData } from '@shared/models/base-data';\nimport { RuleChainId } from '@shared/models/id/rule-chain-id';\nimport { RuleNodeId } from '@shared/models/id/rule-node-id';\nimport { ComponentDescriptor } from '@shared/models/component-descriptor.models';\nimport { FcEdge, FcNode } from 'ngx-flowchart/dist/ngx-flowchart';\nimport { Observable } from 'rxjs';\nimport { PageComponent } from '@shared/components/page.component';\nimport { AfterViewInit, EventEmitter, Inject, OnInit, Directive } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { AbstractControl, FormGroup } from '@angular/forms';\nimport { RuleChainType } from '@shared/models/rule-chain.models';\n\nexport interface RuleNodeConfiguration {\n  [key: string]: any;\n}\n\nexport interface RuleNode extends BaseData<RuleNodeId> {\n  ruleChainId?: RuleChainId;\n  type: string;\n  name: string;\n  debugMode: boolean;\n  configuration: RuleNodeConfiguration;\n  additionalInfo?: any;\n}\n\nexport interface LinkLabel {\n  name: string;\n  value: string;\n}\n\nexport interface RuleNodeDefinition {\n  description: string;\n  details: string;\n  inEnabled: boolean;\n  outEnabled: boolean;\n  relationTypes: string[];\n  customRelations: boolean;\n  defaultConfiguration: RuleNodeConfiguration;\n  icon?: string;\n  iconUrl?: string;\n  docUrl?: string;\n  uiResources?: string[];\n  uiResourceLoadError?: string;\n  configDirective?: string;\n}\n\nexport interface RuleNodeConfigurationDescriptor {\n  nodeDefinition: RuleNodeDefinition;\n}\n\nexport interface IRuleNodeConfigurationComponent {\n  ruleNodeId: string;\n  configuration: RuleNodeConfiguration;\n  configurationChanged: Observable<RuleNodeConfiguration>;\n  validate();\n  [key: string]: any;\n}\n\n@Directive()\nexport abstract class RuleNodeConfigurationComponent extends PageComponent implements\n  IRuleNodeConfigurationComponent, OnInit, AfterViewInit {\n\n  ruleNodeId: string;\n\n  configurationValue: RuleNodeConfiguration;\n\n  private configurationSet = false;\n\n  set configuration(value: RuleNodeConfiguration) {\n    this.configurationValue = value;\n    if (!this.configurationSet) {\n      this.configurationSet = true;\n      this.setupConfiguration(value);\n    } else {\n      this.updateConfiguration(value);\n    }\n  }\n\n  get configuration(): RuleNodeConfiguration {\n    return this.configurationValue;\n  }\n\n  configurationChangedEmiter = new EventEmitter<RuleNodeConfiguration>();\n  configurationChanged = this.configurationChangedEmiter.asObservable();\n\n  protected constructor(@Inject(Store) protected store: Store<AppState>) {\n    super(store);\n  }\n\n  ngOnInit() {}\n\n  ngAfterViewInit(): void {\n    setTimeout(() => {\n      if (!this.validateConfig()) {\n        this.configurationChangedEmiter.emit(null);\n      }\n    }, 0);\n  }\n\n  validate() {\n    this.onValidate();\n  }\n\n  protected setupConfiguration(configuration: RuleNodeConfiguration) {\n    this.onConfigurationSet(this.prepareInputConfig(configuration));\n    this.updateValidators(false);\n    for (const trigger of this.validatorTriggers()) {\n      const path = trigger.split('.');\n      let control: AbstractControl = this.configForm();\n      for (const part of path) {\n        control = control.get(part);\n      }\n      control.valueChanges.subscribe(() => {\n        this.updateValidators(true, trigger);\n      });\n    }\n    this.configForm().valueChanges.subscribe((updated: RuleNodeConfiguration) => {\n      this.onConfigurationChanged(updated);\n    });\n  }\n\n  protected updateConfiguration(configuration: RuleNodeConfiguration) {\n    this.configForm().reset(this.prepareInputConfig(configuration), {emitEvent: false});\n    this.updateValidators(false);\n  }\n\n  protected updateValidators(emitEvent: boolean, trigger?: string) {\n  }\n\n  protected validatorTriggers(): string[] {\n    return [];\n  }\n\n  protected onConfigurationChanged(updated: RuleNodeConfiguration) {\n    this.configurationValue = updated;\n    if (this.validateConfig()) {\n      this.configurationChangedEmiter.emit(this.prepareOutputConfig(updated));\n    } else {\n      this.configurationChangedEmiter.emit(null);\n    }\n  }\n\n  protected prepareInputConfig(configuration: RuleNodeConfiguration): RuleNodeConfiguration {\n    return configuration;\n  }\n\n  protected prepareOutputConfig(configuration: RuleNodeConfiguration): RuleNodeConfiguration {\n    return configuration;\n  }\n\n  protected validateConfig(): boolean {\n    return this.configForm().valid;\n  }\n\n  protected onValidate() {}\n\n  protected abstract configForm(): FormGroup;\n\n  protected abstract onConfigurationSet(configuration: RuleNodeConfiguration);\n\n}\n\n\nexport enum RuleNodeType {\n  FILTER = 'FILTER',\n  ENRICHMENT = 'ENRICHMENT',\n  TRANSFORMATION = 'TRANSFORMATION',\n  ACTION = 'ACTION',\n  EXTERNAL = 'EXTERNAL',\n  RULE_CHAIN = 'RULE_CHAIN',\n  UNKNOWN = 'UNKNOWN',\n  INPUT = 'INPUT'\n}\n\nexport const ruleNodeTypesLibrary = [\n  RuleNodeType.FILTER,\n  RuleNodeType.ENRICHMENT,\n  RuleNodeType.TRANSFORMATION,\n  RuleNodeType.ACTION,\n  RuleNodeType.EXTERNAL,\n  RuleNodeType.RULE_CHAIN,\n];\n\nexport interface RuleNodeTypeDescriptor {\n  value: RuleNodeType;\n  name: string;\n  details: string;\n  nodeClass: string;\n  icon: string;\n  special?: boolean;\n}\n\nexport const ruleNodeTypeDescriptors = new Map<RuleNodeType, RuleNodeTypeDescriptor>(\n  [\n    [\n      RuleNodeType.FILTER,\n      {\n        value: RuleNodeType.FILTER,\n        name: 'rulenode.type-filter',\n        details: 'rulenode.type-filter-details',\n        nodeClass: 'tb-filter-type',\n        icon: 'filter_list'\n      }\n    ],\n    [\n      RuleNodeType.ENRICHMENT,\n      {\n        value: RuleNodeType.ENRICHMENT,\n        name: 'rulenode.type-enrichment',\n        details: 'rulenode.type-enrichment-details',\n        nodeClass: 'tb-enrichment-type',\n        icon: 'playlist_add'\n      }\n    ],\n    [\n      RuleNodeType.TRANSFORMATION,\n      {\n        value: RuleNodeType.TRANSFORMATION,\n        name: 'rulenode.type-transformation',\n        details: 'rulenode.type-transformation-details',\n        nodeClass: 'tb-transformation-type',\n        icon: 'transform'\n      }\n    ],\n    [\n      RuleNodeType.ACTION,\n      {\n        value: RuleNodeType.ACTION,\n        name: 'rulenode.type-action',\n        details: 'rulenode.type-action-details',\n        nodeClass: 'tb-action-type',\n        icon: 'flash_on'\n      }\n    ],\n    [\n      RuleNodeType.EXTERNAL,\n      {\n        value: RuleNodeType.EXTERNAL,\n        name: 'rulenode.type-external',\n        details: 'rulenode.type-external-details',\n        nodeClass: 'tb-external-type',\n        icon: 'cloud_upload'\n      }\n    ],\n    [\n      RuleNodeType.RULE_CHAIN,\n      {\n        value: RuleNodeType.RULE_CHAIN,\n        name: 'rulenode.type-rule-chain',\n        details: 'rulenode.type-rule-chain-details',\n        nodeClass: 'tb-rule-chain-type',\n        icon: 'settings_ethernet'\n      }\n    ],\n    [\n      RuleNodeType.INPUT,\n      {\n        value: RuleNodeType.INPUT,\n        name: 'rulenode.type-input',\n        details: 'rulenode.type-input-details',\n        nodeClass: 'tb-input-type',\n        icon: 'input',\n        special: true\n      }\n    ],\n    [\n      RuleNodeType.UNKNOWN,\n      {\n        value: RuleNodeType.UNKNOWN,\n        name: 'rulenode.type-unknown',\n        details: 'rulenode.type-unknown-details',\n        nodeClass: 'tb-unknown-type',\n        icon: 'help_outline'\n      }\n    ]\n  ]\n);\n\nexport interface RuleNodeComponentDescriptor extends ComponentDescriptor {\n  type: RuleNodeType;\n  configurationDescriptor?: RuleNodeConfigurationDescriptor;\n}\n\nexport interface FcRuleNodeType extends FcNode {\n  component?: RuleNodeComponentDescriptor;\n  nodeClass?: string;\n  icon?: string;\n  iconUrl?: string;\n}\n\nexport interface FcRuleNode extends FcRuleNodeType {\n  ruleNodeId?: RuleNodeId;\n  additionalInfo?: any;\n  configuration?: RuleNodeConfiguration;\n  debugMode?: boolean;\n  targetRuleChainId?: string;\n  error?: string;\n  highlighted?: boolean;\n  componentClazz?: string;\n  ruleChainType?: RuleChainType;\n}\n\nexport interface FcRuleEdge extends FcEdge {\n  labels?: string[];\n}\n\nexport interface TestScriptInputParams {\n  script: string;\n  scriptType: string;\n  argNames: string[];\n  msg: string;\n  metadata: {[key: string]: string};\n  msgType: string;\n}\n\nexport interface TestScriptResult {\n  output: string;\n  error: string;\n}\n\nexport enum MessageType {\n  POST_ATTRIBUTES_REQUEST = 'POST_ATTRIBUTES_REQUEST',\n  POST_TELEMETRY_REQUEST = 'POST_TELEMETRY_REQUEST',\n  TO_SERVER_RPC_REQUEST = 'TO_SERVER_RPC_REQUEST',\n  RPC_CALL_FROM_SERVER_TO_DEVICE = 'RPC_CALL_FROM_SERVER_TO_DEVICE',\n  ACTIVITY_EVENT = 'ACTIVITY_EVENT',\n  INACTIVITY_EVENT = 'INACTIVITY_EVENT',\n  CONNECT_EVENT = 'CONNECT_EVENT',\n  DISCONNECT_EVENT = 'DISCONNECT_EVENT',\n  ENTITY_CREATED = 'ENTITY_CREATED',\n  ENTITY_UPDATED = 'ENTITY_UPDATED',\n  ENTITY_DELETED = 'ENTITY_DELETED',\n  ENTITY_ASSIGNED = 'ENTITY_ASSIGNED',\n  ENTITY_UNASSIGNED = 'ENTITY_UNASSIGNED',\n  ATTRIBUTES_UPDATED = 'ATTRIBUTES_UPDATED',\n  ATTRIBUTES_DELETED = 'ATTRIBUTES_DELETED',\n  TIMESERIES_UPDATED = 'TIMESERIES_UPDATED',\n  TIMESERIES_DELETED = 'TIMESERIES_DELETED',\n  RPC_QUEUED = 'RPC_QUEUED',\n  RPC_DELIVERED = 'RPC_DELIVERED',\n  RPC_SUCCESSFUL = 'RPC_SUCCESSFUL',\n  RPC_TIMEOUT = 'RPC_TIMEOUT',\n  RPC_FAILED = 'RPC_FAILED'\n}\n\nexport const messageTypeNames = new Map<MessageType, string>(\n  [\n    [MessageType.POST_ATTRIBUTES_REQUEST, 'Post attributes'],\n    [MessageType.POST_TELEMETRY_REQUEST, 'Post telemetry'],\n    [MessageType.TO_SERVER_RPC_REQUEST, 'RPC Request from Device'],\n    [MessageType.RPC_CALL_FROM_SERVER_TO_DEVICE, 'RPC Request to Device'],\n    [MessageType.ACTIVITY_EVENT, 'Activity Event'],\n    [MessageType.INACTIVITY_EVENT, 'Inactivity Event'],\n    [MessageType.CONNECT_EVENT, 'Connect Event'],\n    [MessageType.DISCONNECT_EVENT, 'Disconnect Event'],\n    [MessageType.ENTITY_CREATED, 'Entity Created'],\n    [MessageType.ENTITY_UPDATED, 'Entity Updated'],\n    [MessageType.ENTITY_DELETED, 'Entity Deleted'],\n    [MessageType.ENTITY_ASSIGNED, 'Entity Assigned'],\n    [MessageType.ENTITY_UNASSIGNED, 'Entity Unassigned'],\n    [MessageType.ATTRIBUTES_UPDATED, 'Attributes Updated'],\n    [MessageType.ATTRIBUTES_DELETED, 'Attributes Deleted'],\n    [MessageType.TIMESERIES_UPDATED, 'Timeseries Updated'],\n    [MessageType.TIMESERIES_DELETED, 'Timeseries Deleted'],\n    [MessageType.RPC_QUEUED, 'RPC Queued'],\n    [MessageType.RPC_DELIVERED, 'RPC Delivered'],\n    [MessageType.RPC_SUCCESSFUL, 'RPC Successful'],\n    [MessageType.RPC_TIMEOUT, 'RPC Timeout'],\n    [MessageType.RPC_FAILED, 'RPC Failed']\n  ]\n);\n\nconst ruleNodeClazzHelpLinkMap = {\n  'org.thingsboard.rule.engine.filter.TbCheckRelationNode': 'ruleNodeCheckRelation',\n  'org.thingsboard.rule.engine.filter.TbCheckMessageNode': 'ruleNodeCheckExistenceFields',\n  'org.thingsboard.rule.engine.geo.TbGpsGeofencingFilterNode': 'ruleNodeGpsGeofencingFilter',\n  'org.thingsboard.rule.engine.filter.TbJsFilterNode': 'ruleNodeJsFilter',\n  'org.thingsboard.rule.engine.filter.TbJsSwitchNode': 'ruleNodeJsSwitch',\n  'org.thingsboard.rule.engine.filter.TbMsgTypeFilterNode': 'ruleNodeMessageTypeFilter',\n  'org.thingsboard.rule.engine.filter.TbMsgTypeSwitchNode': 'ruleNodeMessageTypeSwitch',\n  'org.thingsboard.rule.engine.filter.TbOriginatorTypeFilterNode': 'ruleNodeOriginatorTypeFilter',\n  'org.thingsboard.rule.engine.filter.TbOriginatorTypeSwitchNode': 'ruleNodeOriginatorTypeSwitch',\n  'org.thingsboard.rule.engine.metadata.TbGetAttributesNode': 'ruleNodeOriginatorAttributes',\n  'org.thingsboard.rule.engine.metadata.TbGetOriginatorFieldsNode': 'ruleNodeOriginatorFields',\n  'org.thingsboard.rule.engine.metadata.TbGetTelemetryNode': 'ruleNodeOriginatorTelemetry',\n  'org.thingsboard.rule.engine.metadata.TbGetCustomerAttributeNode': 'ruleNodeCustomerAttributes',\n  'org.thingsboard.rule.engine.metadata.TbGetCustomerDetailsNode': 'ruleNodeCustomerDetails',\n  'org.thingsboard.rule.engine.metadata.TbGetDeviceAttrNode': 'ruleNodeDeviceAttributes',\n  'org.thingsboard.rule.engine.metadata.TbGetRelatedAttributeNode': 'ruleNodeRelatedAttributes',\n  'org.thingsboard.rule.engine.metadata.TbGetTenantAttributeNode': 'ruleNodeTenantAttributes',\n  'org.thingsboard.rule.engine.metadata.TbGetTenantDetailsNode': 'ruleNodeTenantDetails',\n  'org.thingsboard.rule.engine.transform.TbChangeOriginatorNode': 'ruleNodeChangeOriginator',\n  'org.thingsboard.rule.engine.transform.TbTransformMsgNode': 'ruleNodeTransformMsg',\n  'org.thingsboard.rule.engine.mail.TbMsgToEmailNode': 'ruleNodeMsgToEmail',\n  'org.thingsboard.rule.engine.action.TbAssignToCustomerNode': 'ruleNodeAssignToCustomer',\n  'org.thingsboard.rule.engine.action.TbUnassignFromCustomerNode': 'ruleNodeUnassignFromCustomer',\n  'org.thingsboard.rule.engine.action.TbClearAlarmNode': 'ruleNodeClearAlarm',\n  'org.thingsboard.rule.engine.action.TbCreateAlarmNode': 'ruleNodeCreateAlarm',\n  'org.thingsboard.rule.engine.action.TbCreateRelationNode': 'ruleNodeCreateRelation',\n  'org.thingsboard.rule.engine.action.TbDeleteRelationNode': 'ruleNodeDeleteRelation',\n  'org.thingsboard.rule.engine.delay.TbMsgDelayNode': 'ruleNodeMsgDelay',\n  'org.thingsboard.rule.engine.debug.TbMsgGeneratorNode': 'ruleNodeMsgGenerator',\n  'org.thingsboard.rule.engine.geo.TbGpsGeofencingActionNode': 'ruleNodeGpsGeofencingEvents',\n  'org.thingsboard.rule.engine.action.TbLogNode': 'ruleNodeLog',\n  'org.thingsboard.rule.engine.rpc.TbSendRPCReplyNode': 'ruleNodeRpcCallReply',\n  'org.thingsboard.rule.engine.rpc.TbSendRPCRequestNode': 'ruleNodeRpcCallRequest',\n  'org.thingsboard.rule.engine.telemetry.TbMsgAttributesNode': 'ruleNodeSaveAttributes',\n  'org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode': 'ruleNodeSaveTimeseries',\n  'org.thingsboard.rule.engine.action.TbSaveToCustomCassandraTableNode': 'ruleNodeSaveToCustomTable',\n  'tb.internal.RuleChain': 'ruleNodeRuleChain',\n  'org.thingsboard.rule.engine.aws.sns.TbSnsNode': 'ruleNodeAwsSns',\n  'org.thingsboard.rule.engine.aws.sqs.TbSqsNode': 'ruleNodeAwsSqs',\n  'org.thingsboard.rule.engine.kafka.TbKafkaNode': 'ruleNodeKafka',\n  'org.thingsboard.rule.engine.mqtt.TbMqttNode': 'ruleNodeMqtt',\n  'org.thingsboard.rule.engine.mqtt.azure.TbAzureIotHubNode': 'ruleNodeAzureIotHub',\n  'org.thingsboard.rule.engine.rabbitmq.TbRabbitMqNode': 'ruleNodeRabbitMq',\n  'org.thingsboard.rule.engine.rest.TbRestApiCallNode': 'ruleNodeRestApiCall',\n  'org.thingsboard.rule.engine.mail.TbSendEmailNode': 'ruleNodeSendEmail',\n  'org.thingsboard.rule.engine.sms.TbSendSmsNode': 'ruleNodeSendSms',\n  'org.thingsboard.rule.engine.edge.TbMsgPushToCloudNode': 'ruleNodePushToCloud',\n  'org.thingsboard.rule.engine.edge.TbMsgPushToEdgeNode': 'ruleNodePushToEdge'\n};\n\nexport function getRuleNodeHelpLink(component: RuleNodeComponentDescriptor): string {\n  if (component) {\n    if (component.configurationDescriptor &&\n      component.configurationDescriptor.nodeDefinition &&\n      component.configurationDescriptor.nodeDefinition.docUrl) {\n      return component.configurationDescriptor.nodeDefinition.docUrl;\n    } else if (component.clazz) {\n      if (ruleNodeClazzHelpLinkMap[component.clazz]) {\n        return ruleNodeClazzHelpLinkMap[component.clazz];\n      }\n    }\n  }\n  return 'ruleEngine';\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport _ from 'lodash';\nimport { Observable, Subject } from 'rxjs';\nimport { finalize, share } from 'rxjs/operators';\nimport { Datasource } from '@app/shared/models/widget.models';\nimport { EntityId } from '@shared/models/id/entity-id';\nimport { NULL_UUID } from '@shared/models/id/has-uuid';\n\nconst varsRegex = /\\${([^}]*)}/g;\n\nexport function onParentScrollOrWindowResize(el: Node): Observable<Event> {\n  const scrollSubject = new Subject<Event>();\n  const scrollParentNodes = scrollParents(el);\n  const eventListenerObject: EventListenerObject = {\n    handleEvent(evt: Event) {\n      scrollSubject.next(evt);\n    }\n  };\n  scrollParentNodes.forEach((scrollParentNode) => {\n    scrollParentNode.addEventListener('scroll', eventListenerObject);\n  });\n  window.addEventListener('resize', eventListenerObject);\n  return scrollSubject.pipe(\n    finalize(() => {\n      scrollParentNodes.forEach((scrollParentNode) => {\n        scrollParentNode.removeEventListener('scroll', eventListenerObject);\n      });\n      window.removeEventListener('resize', eventListenerObject);\n    }),\n    share()\n  );\n}\n\nexport function isLocalUrl(url: string): boolean {\n  const parser = document.createElement('a');\n  parser.href = url;\n  const host = parser.hostname;\n  return host === 'localhost' || host === '127.0.0.1';\n}\n\nexport function animatedScroll(element: HTMLElement, scrollTop: number, delay?: number) {\n  let currentTime = 0;\n  const increment = 20;\n  const start = element.scrollTop;\n  const to = scrollTop;\n  const duration = delay ? delay : 0;\n  const remaining = to - start;\n  const animateScroll = () => {\n    if (duration === 0) {\n      element.scrollTop = to;\n    } else {\n      currentTime += increment;\n      element.scrollTop = easeInOut(currentTime, start, remaining, duration);\n      if (currentTime < duration) {\n        setTimeout(animateScroll, increment);\n      }\n    }\n  };\n  animateScroll();\n}\n\nexport function isUndefined(value: any): boolean {\n  return typeof value === 'undefined';\n}\n\nexport function isUndefinedOrNull(value: any): boolean {\n  return typeof value === 'undefined' || value === null;\n}\n\nexport function isDefined(value: any): boolean {\n  return typeof value !== 'undefined';\n}\n\nexport function isDefinedAndNotNull(value: any): boolean {\n  return typeof value !== 'undefined' && value !== null;\n}\n\nexport function isEmptyStr(value: any): boolean {\n  return value === '';\n}\n\nexport function isNotEmptyStr(value: any): boolean {\n  return value !== null && typeof value === 'string' && value.trim().length > 0;\n}\n\nexport function isFunction(value: any): boolean {\n  return typeof value === 'function';\n}\n\nexport function isObject(value: any): boolean {\n  return value !== null && typeof value === 'object';\n}\n\nexport function isNumber(value: any): boolean {\n  return typeof value === 'number';\n}\n\nexport function isNumeric(value: any): boolean {\n  return (value - parseFloat(value) + 1) >= 0;\n}\n\nexport function isString(value: any): boolean {\n  return typeof value === 'string';\n}\n\nexport function isEmpty(obj: any): boolean {\n  for (const key of Object.keys(obj)) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function isLiteralObject(value: any) {\n  return (!!value) && (value.constructor === Object);\n}\n\nexport function formatValue(value: any, dec?: number, units?: string, showZeroDecimals?: boolean): string | undefined {\n  if (isDefinedAndNotNull(value) && isNumeric(value) &&\n    (isDefinedAndNotNull(dec) || isDefinedAndNotNull(units) || Number(value).toString() === value)) {\n    let formatted: string | number = Number(value);\n    if (isDefinedAndNotNull(dec)) {\n      formatted = formatted.toFixed(dec);\n    }\n    if (!showZeroDecimals) {\n      formatted = (Number(formatted));\n    }\n    formatted = formatted.toString();\n    if (isDefinedAndNotNull(units) && units.length > 0) {\n      formatted += ' ' + units;\n    }\n    return formatted;\n  } else {\n    return value !== null ? value : '';\n  }\n}\n\nexport function objectValues(obj: any): any[] {\n  return Object.keys(obj).map(e => obj[e]);\n}\n\nexport function deleteNullProperties(obj: any) {\n  if (isUndefined(obj) || obj == null) {\n    return;\n  }\n  Object.keys(obj).forEach((propName) => {\n    if (obj[propName] === null || isUndefined(obj[propName])) {\n      delete obj[propName];\n    } else if (isObject(obj[propName])) {\n      deleteNullProperties(obj[propName]);\n    } else if (obj[propName] instanceof Array) {\n      (obj[propName] as any[]).forEach((elem) => {\n        deleteNullProperties(elem);\n      });\n    }\n  });\n}\n\nexport function objToBase64(obj: any): string {\n  const json = JSON.stringify(obj);\n  return btoa(encodeURIComponent(json).replace(/%([0-9A-F]{2})/g,\n    function toSolidBytes(match, p1) {\n      return String.fromCharCode(Number('0x' + p1));\n    }));\n}\n\nexport function objToBase64URI(obj: any): string {\n  return encodeURIComponent(objToBase64(obj));\n}\n\nexport function base64toObj(b64Encoded: string): any {\n  const json = decodeURIComponent(atob(b64Encoded).split('').map((c) => {\n    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n  }).join(''));\n  return JSON.parse(json);\n}\n\nconst scrollRegex = /(auto|scroll)/;\n\nfunction parentNodes(node: Node, nodes: Node[]): Node[] {\n  if (node.parentNode === null) {\n    return nodes;\n  }\n  return parentNodes(node.parentNode, nodes.concat([node]));\n}\n\nfunction style(el: Element, prop: string): string {\n  return getComputedStyle(el, null).getPropertyValue(prop);\n}\n\nfunction overflow(el: Element): string {\n  return style(el, 'overflow') + style(el, 'overflow-y') + style(el, 'overflow-x');\n}\n\nfunction isScrollNode(node: Node): boolean {\n  if (node instanceof Element) {\n    return scrollRegex.test(overflow(node));\n  } else {\n    return false;\n  }\n}\n\nfunction scrollParents(node: Node): Node[] {\n  if (!(node instanceof HTMLElement || node instanceof SVGElement)) {\n    return [];\n  }\n  const scrollParentNodes = [];\n  const nodeParents = parentNodes(node, []);\n  nodeParents.forEach((nodeParent) => {\n    if (isScrollNode(nodeParent)) {\n      scrollParentNodes.push(nodeParent);\n    }\n  });\n  if (document.scrollingElement) {\n    scrollParentNodes.push(document.scrollingElement);\n  } else if (document.documentElement) {\n    scrollParentNodes.push(document.documentElement);\n  }\n  return scrollParentNodes;\n}\n\nexport function hashCode(str: string): number {\n  let hash = 0;\n  let i: number;\n  let char: number;\n  if (str.length === 0) {\n    return hash;\n  }\n  for (i = 0; i < str.length; i++) {\n    char = str.charCodeAt(i);\n    // tslint:disable-next-line:no-bitwise\n    hash = ((hash << 5) - hash) + char;\n    // tslint:disable-next-line:no-bitwise\n    hash = hash & hash; // Convert to 32bit integer\n  }\n  return hash;\n}\n\nexport function objectHashCode(obj: any): number {\n  let hash = 0;\n  if (obj) {\n    const str = JSON.stringify(obj);\n    hash = hashCode(str);\n  }\n  return hash;\n}\n\nfunction easeInOut(\n  currentTime: number,\n  startTime: number,\n  remainingTime: number,\n  duration: number) {\n  currentTime /= duration / 2;\n\n  if (currentTime < 1) {\n    return (remainingTime / 2) * currentTime * currentTime + startTime;\n  }\n\n  currentTime--;\n  return (\n    (-remainingTime / 2) * (currentTime * (currentTime - 2) - 1) + startTime\n  );\n}\n\nexport function deepClone<T>(target: T, ignoreFields?: string[]): T {\n  if (target === null) {\n    return target;\n  }\n  if (target instanceof Date) {\n    return new Date(target.getTime()) as any;\n  }\n  if (target instanceof Array) {\n    const cp = [] as any[];\n    (target as any[]).forEach((v) => { cp.push(v); });\n    return cp.map((n: any) => deepClone<any>(n)) as any;\n  }\n  if (typeof target === 'object' && target !== {}) {\n    const cp = {...(target as { [key: string]: any })} as { [key: string]: any };\n    Object.keys(cp).forEach(k => {\n      if (!ignoreFields || ignoreFields.indexOf(k) === -1) {\n        cp[k] = deepClone<any>(cp[k]);\n      }\n    });\n    return cp as T;\n  }\n  return target;\n}\n\nexport function isEqual(a: any, b: any): boolean {\n  return _.isEqual(a, b);\n}\n\nexport function mergeDeep<T>(target: T, ...sources: T[]): T {\n  return _.merge(target, ...sources);\n}\n\nexport function guid(): string {\n  function s4(): string {\n    return Math.floor((1 + Math.random()) * 0x10000)\n      .toString(16)\n      .substring(1);\n  }\n  return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\n    s4() + '-' + s4() + s4() + s4();\n}\n\nconst SNAKE_CASE_REGEXP = /[A-Z]/g;\n\nexport function snakeCase(name: string, separator: string): string {\n  separator = separator || '_';\n  return name.replace(SNAKE_CASE_REGEXP, (letter, pos) => {\n    return (pos ? separator : '') + letter.toLowerCase();\n  });\n}\n\nexport function getDescendantProp(obj: any, path: string): any {\n  if (obj.hasOwnProperty(path)) {\n    return obj[path];\n  }\n  return path.split('.').reduce((acc, part) => acc && acc[part], obj);\n}\n\nexport function insertVariable(pattern: string, name: string, value: any): string {\n  let result = pattern;\n  let match = varsRegex.exec(pattern);\n  while (match !== null) {\n    const variable = match[0];\n    const variableName = match[1];\n    if (variableName === name) {\n      result = result.replace(variable, value);\n    }\n    match = varsRegex.exec(pattern);\n  }\n  return result;\n}\n\nexport function createLabelFromDatasource(datasource: Datasource, pattern: string): string {\n  let label = pattern;\n  if (!datasource) {\n    return label;\n  }\n  let match = varsRegex.exec(pattern);\n  while (match !== null) {\n    const variable = match[0];\n    const variableName = match[1];\n    if (variableName === 'dsName') {\n      label = label.replace(variable, datasource.name);\n    } else if (variableName === 'entityName') {\n      label = label.replace(variable, datasource.entityName);\n    } else if (variableName === 'deviceName') {\n      label = label.replace(variable, datasource.entityName);\n    } else if (variableName === 'entityLabel') {\n      label = label.replace(variable, datasource.entityLabel || datasource.entityName);\n    } else if (variableName === 'aliasName') {\n      label = label.replace(variable, datasource.aliasName);\n    } else if (variableName === 'entityDescription') {\n      label = label.replace(variable, datasource.entityDescription);\n    }\n    match = varsRegex.exec(pattern);\n  }\n  return label;\n}\n\nexport function padValue(val: any, dec: number): string {\n  let strVal;\n  let n;\n\n  val = parseFloat(val);\n  n = (val < 0);\n  val = Math.abs(val);\n\n  if (dec > 0) {\n    strVal = val.toFixed(dec);\n  } else {\n    strVal = Math.round(val).toString();\n  }\n  strVal = (n ? '-' : '') + strVal;\n  return strVal;\n}\n\nexport function baseUrl(): string {\n  let url = window.location.protocol + '//' + window.location.hostname;\n  const port = window.location.port;\n  if (port && port.length > 0 && port !== '80' && port !== '443') {\n    url += ':' + port;\n  }\n  return url;\n}\n\nexport function sortObjectKeys<T>(obj: T): T {\n  return Object.keys(obj).sort().reduce((acc, key) => {\n    acc[key] = obj[key];\n    return acc;\n  }, {} as T);\n}\n\nexport function deepTrim<T>(obj: T): T {\n  if (isNumber(obj) || isUndefined(obj) || isString(obj) || obj === null || obj instanceof File) {\n    return obj;\n  }\n  return Object.keys(obj).reduce((acc, curr) => {\n    if (isString(obj[curr])) {\n      acc[curr] = obj[curr].trim();\n    } else if (isObject(obj[curr])) {\n      acc[curr] = deepTrim(obj[curr]);\n    } else {\n      acc[curr] = obj[curr];\n    }\n    return acc;\n  }, (Array.isArray(obj) ? [] : {}) as T);\n}\n\nexport function generateSecret(length?: number): string {\n  if (isUndefined(length) || length == null) {\n    length = 1;\n  }\n  const l = length > 10 ? 10 : length;\n  const str = Math.random().toString(36).substr(2, l);\n  if (str.length >= length) {\n    return str;\n  }\n  return str.concat(generateSecret(length - str.length));\n}\n\nexport function validateEntityId(entityId: EntityId | null): boolean {\n    return isDefinedAndNotNull(entityId?.id) && entityId.id !== NULL_UUID && isDefinedAndNotNull(entityId?.entityType);\n}\n\nexport function isMobileApp(): boolean {\n  return isDefined((window as any).flutter_inappwebview);\n}\n\nconst alphanumericCharacters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\nconst alphanumericCharactersLength = alphanumericCharacters.length;\n\nexport function randomAlphanumeric(length: number): string {\n  let result = '';\n  for ( let i = 0; i < length; i++ ) {\n    result += alphanumericCharacters.charAt(Math.floor(Math.random() * alphanumericCharactersLength));\n  }\n  return result;\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { MissingTranslationHandler, MissingTranslationHandlerParams } from '@ngx-translate/core';\nimport { customTranslationsPrefix } from '@app/shared/models/constants';\n\nexport class TbMissingTranslationHandler implements MissingTranslationHandler {\n  handle(params: MissingTranslationHandlerParams) {\n    if (params.key && !params.key.startsWith(customTranslationsPrefix)) {\n      console.warn('Translation for ' + params.key + ' doesn\\'t exist');\n    }\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nexport enum ServiceType {\n  TB_CORE = 'TB_CORE',\n  TB_RULE_ENGINE = 'TB_RULE_ENGINE',\n  TB_TRANSPORT = 'TB_TRANSPORT',\n  JS_EXECUTOR = 'JS_EXECUTOR'\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, forwardRef, Input, OnInit } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { FixedWindow } from '@shared/models/time/time.models';\n\n@Component({\n  selector: 'tb-datetime-period',\n  templateUrl: './datetime-period.component.html',\n  styleUrls: ['./datetime-period.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => DatetimePeriodComponent),\n      multi: true\n    }\n  ]\n})\nexport class DatetimePeriodComponent implements OnInit, ControlValueAccessor {\n\n  @Input() disabled: boolean;\n\n  modelValue: FixedWindow;\n\n  startDate: Date;\n  endDate: Date;\n\n  endTime: any;\n\n  maxStartDate: Date;\n  minEndDate: Date;\n  maxEndDate: Date;\n\n  changePending = false;\n\n  private propagateChange = null;\n\n  constructor() {\n  }\n\n  ngOnInit(): void {\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n    if (this.changePending && this.propagateChange) {\n      this.changePending = false;\n      this.propagateChange(this.modelValue);\n    }\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n  }\n\n  writeValue(datePeriod: FixedWindow): void {\n    this.modelValue = datePeriod;\n    if (this.modelValue) {\n      this.startDate = new Date(this.modelValue.startTimeMs);\n      this.endDate = new Date(this.modelValue.endTimeMs);\n    } else {\n      const date = new Date();\n      this.startDate = new Date(\n        date.getFullYear(),\n        date.getMonth(),\n        date.getDate() - 1,\n        date.getHours(),\n        date.getMinutes(),\n        date.getSeconds(),\n        date.getMilliseconds());\n      this.endDate = date;\n      this.updateView();\n    }\n    this.updateMinMaxDates();\n  }\n\n  updateView() {\n    let value: FixedWindow = null;\n    if (this.startDate && this.endDate) {\n      value = {\n        startTimeMs: this.startDate.getTime(),\n        endTimeMs: this.endDate.getTime()\n      };\n    }\n    this.modelValue = value;\n    if (!this.propagateChange) {\n      this.changePending = true;\n    } else {\n      this.propagateChange(this.modelValue);\n    }\n  }\n\n  updateMinMaxDates() {\n    this.maxStartDate = new Date(this.endDate.getTime() - 1000);\n    this.minEndDate = new Date(this.startDate.getTime() + 1000);\n    this.maxEndDate = new Date();\n  }\n\n  onStartDateChange() {\n    if (this.startDate) {\n      if (this.startDate.getTime() > this.maxStartDate.getTime()) {\n        this.startDate = new Date(this.maxStartDate.getTime());\n      }\n      this.updateMinMaxDates();\n    }\n    this.updateView();\n  }\n\n  onEndDateChange() {\n    if (this.endDate) {\n      if (this.endDate.getTime() < this.minEndDate.getTime()) {\n        this.endDate = new Date(this.minEndDate.getTime());\n      } else if (this.endDate.getTime() > this.maxEndDate.getTime()) {\n        this.endDate = new Date(this.maxEndDate.getTime());\n      }\n      this.updateMinMaxDates();\n    }\n    this.updateView();\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<section fxLayout=\"column\" fxLayoutAlign=\"start stretch\">\n  <section fxLayout=\"row\" fxLayoutAlign=\"start start\" fxLayoutGap=\"16px\"\n           fxLayout.xs=\"column\" fxLayoutAlign.xs=\"start stretch\"  fxLayoutGap.xs=\"0\">\n    <mat-form-field>\n      <mat-placeholder translate>datetime.date-from</mat-placeholder>\n      <mat-datetimepicker-toggle [for]=\"startDatePicker\" matPrefix></mat-datetimepicker-toggle>\n      <mat-datetimepicker #startDatePicker type=\"date\" openOnFocus=\"true\"></mat-datetimepicker>\n      <input matInput [disabled]=\"disabled\" [(ngModel)]=\"startDate\" [matDatetimepicker]=\"startDatePicker\" (ngModelChange)=\"onStartDateChange()\">\n    </mat-form-field>\n    <mat-form-field>\n      <mat-placeholder translate>datetime.time-from</mat-placeholder>\n      <mat-datetimepicker-toggle [for]=\"startTimePicker\" matPrefix></mat-datetimepicker-toggle>\n      <mat-datetimepicker #startTimePicker type=\"time\" openOnFocus=\"true\"></mat-datetimepicker>\n      <input matInput [disabled]=\"disabled\" [(ngModel)]=\"startDate\" [matDatetimepicker]=\"startTimePicker\" (ngModelChange)=\"onStartDateChange()\">\n    </mat-form-field>\n  </section>\n  <section fxLayout=\"row\" fxLayoutAlign=\"start start\" fxLayoutGap=\"16px\"\n           fxLayout.xs=\"column\" fxLayoutAlign.xs=\"start stretch\"  fxLayoutGap.xs=\"0\">\n    <mat-form-field>\n      <mat-placeholder translate>datetime.date-to</mat-placeholder>\n      <mat-datetimepicker-toggle [for]=\"endDatePicker\" matPrefix></mat-datetimepicker-toggle>\n      <mat-datetimepicker #endDatePicker type=\"date\" openOnFocus=\"true\"></mat-datetimepicker>\n      <input matInput [disabled]=\"disabled\" [(ngModel)]=\"endDate\" [matDatetimepicker]=\"endDatePicker\" (ngModelChange)=\"onEndDateChange()\">\n    </mat-form-field>\n    <mat-form-field>\n      <mat-placeholder translate>datetime.time-to</mat-placeholder>\n      <mat-datetimepicker-toggle [for]=\"endTimePicker\" matPrefix></mat-datetimepicker-toggle>\n      <mat-datetimepicker #endTimePicker type=\"time\" openOnFocus=\"true\"></mat-datetimepicker>\n      <input matInput [disabled]=\"disabled\" [(ngModel)]=\"endDate\" [matDatetimepicker]=\"endTimePicker\" (ngModelChange)=\"onEndDateChange()\">\n    </mat-form-field>\n  </section>\n</section>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\nimport { AuthService } from '../auth/auth.service';\nimport { select, Store } from '@ngrx/store';\nimport { AppState } from '../core.state';\nimport { selectAuth, selectIsAuthenticated } from '../auth/auth.selectors';\nimport { take } from 'rxjs/operators';\nimport { HomeSection, MenuSection } from '@core/services/menu.models';\nimport { BehaviorSubject, Observable, Subject } from 'rxjs';\nimport { Authority } from '@shared/models/authority.enum';\nimport { guid } from '@core/utils';\nimport { AuthState } from '@core/auth/auth.models';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MenuService {\n\n  menuSections$: Subject<Array<MenuSection>> = new BehaviorSubject<Array<MenuSection>>([]);\n  homeSections$: Subject<Array<HomeSection>> = new BehaviorSubject<Array<HomeSection>>([]);\n\n  constructor(private store: Store<AppState>, private authService: AuthService) {\n    this.store.pipe(select(selectIsAuthenticated)).subscribe(\n      (authenticated: boolean) => {\n        if (authenticated) {\n          this.buildMenu();\n        }\n      }\n    );\n  }\n\n  private buildMenu() {\n    this.store.pipe(select(selectAuth), take(1)).subscribe(\n      (authState: AuthState) => {\n        if (authState.authUser) {\n          let menuSections: Array<MenuSection>;\n          let homeSections: Array<HomeSection>;\n          switch (authState.authUser.authority) {\n            case Authority.SYS_ADMIN:\n              menuSections = this.buildSysAdminMenu(authState);\n              homeSections = this.buildSysAdminHome(authState);\n              break;\n            case Authority.TENANT_ADMIN:\n              menuSections = this.buildTenantAdminMenu(authState);\n              homeSections = this.buildTenantAdminHome(authState);\n              break;\n            case Authority.CUSTOMER_USER:\n              menuSections = this.buildCustomerUserMenu(authState);\n              homeSections = this.buildCustomerUserHome(authState);\n              break;\n          }\n          this.menuSections$.next(menuSections);\n          this.homeSections$.next(homeSections);\n        }\n      }\n    );\n  }\n\n  private buildSysAdminMenu(authState: AuthState): Array<MenuSection> {\n    const sections: Array<MenuSection> = [];\n    sections.push(\n      {\n        id: guid(),\n        name: 'home.home',\n        type: 'link',\n        path: '/home',\n        icon: 'home'\n      },\n      {\n        id: guid(),\n        name: 'tenant.tenants',\n        type: 'link',\n        path: '/tenants',\n        icon: 'supervisor_account'\n      },\n      {\n        id: guid(),\n        name: 'tenant-profile.tenant-profiles',\n        type: 'link',\n        path: '/tenantProfiles',\n        icon: 'mdi:alpha-t-box',\n        isMdiIcon: true\n      },\n      {\n        id: guid(),\n        name: 'widget.widget-library',\n        type: 'link',\n        path: '/widgets-bundles',\n        icon: 'now_widgets'\n      },\n      {\n        id: guid(),\n        name: 'admin.system-settings',\n        type: 'toggle',\n        path: '/settings',\n        height: '240px',\n        icon: 'settings',\n        pages: [\n          {\n            id: guid(),\n            name: 'admin.general',\n            type: 'link',\n            path: '/settings/general',\n            icon: 'settings_applications'\n          },\n          {\n            id: guid(),\n            name: 'admin.outgoing-mail',\n            type: 'link',\n            path: '/settings/outgoing-mail',\n            icon: 'mail'\n          },\n          {\n            id: guid(),\n            name: 'admin.sms-provider',\n            type: 'link',\n            path: '/settings/sms-provider',\n            icon: 'sms'\n          },\n          {\n            id: guid(),\n            name: 'admin.security-settings',\n            type: 'link',\n            path: '/settings/security-settings',\n            icon: 'security'\n          },\n          {\n            id: guid(),\n            name: 'admin.oauth2.oauth2',\n            type: 'link',\n            path: '/settings/oauth2',\n            icon: 'security'\n          },\n          {\n            id: guid(),\n            name: 'resource.resources-library',\n            type: 'link',\n            path: '/settings/resources-library',\n            icon: 'folder'\n          }\n        ]\n      }\n    );\n    return sections;\n  }\n\n  private buildSysAdminHome(authState: AuthState): Array<HomeSection> {\n    const homeSections: Array<HomeSection> = [];\n    homeSections.push(\n      {\n        name: 'tenant.management',\n        places: [\n          {\n            name: 'tenant.tenants',\n            icon: 'supervisor_account',\n            path: '/tenants'\n          },\n          {\n            name: 'tenant-profile.tenant-profiles',\n            icon: 'mdi:alpha-t-box',\n            isMdiIcon: true,\n            path: '/tenantProfiles'\n          },\n        ]\n      },\n      {\n        name: 'widget.management',\n        places: [\n          {\n            name: 'widget.widget-library',\n            icon: 'now_widgets',\n            path: '/widgets-bundles'\n          }\n        ]\n      },\n      {\n        name: 'admin.system-settings',\n        places: [\n          {\n            name: 'admin.general',\n            icon: 'settings_applications',\n            path: '/settings/general'\n          },\n          {\n            name: 'admin.outgoing-mail',\n            icon: 'mail',\n            path: '/settings/outgoing-mail'\n          },\n          {\n            name: 'admin.sms-provider',\n            icon: 'sms',\n            path: '/settings/sms-provider'\n          },\n          {\n            name: 'admin.security-settings',\n            icon: 'security',\n            path: '/settings/security-settings'\n          },\n          {\n            name: 'admin.oauth2.oauth2',\n            icon: 'security',\n            path: '/settings/oauth2'\n          },\n          {\n            name: 'resource.resources-library',\n            icon: 'folder',\n            path: '/settings/resources-library'\n          }\n        ]\n      }\n    );\n    return homeSections;\n  }\n\n  private buildTenantAdminMenu(authState: AuthState): Array<MenuSection> {\n    const sections: Array<MenuSection> = [];\n    sections.push(\n      {\n        id: guid(),\n        name: 'home.home',\n        type: 'link',\n        path: '/home',\n        notExact: true,\n        icon: 'home'\n      },\n      {\n        id: guid(),\n        name: 'rulechain.rulechains',\n        type: 'link',\n        path: '/ruleChains',\n        icon: 'settings_ethernet'\n      },\n      {\n        id: guid(),\n        name: 'customer.customers',\n        type: 'link',\n        path: '/customers',\n        icon: 'supervisor_account'\n      },\n      {\n        id: guid(),\n        name: 'asset.assets',\n        type: 'link',\n        path: '/assets',\n        icon: 'domain'\n      },\n      {\n        id: guid(),\n        name: 'device.devices',\n        type: 'link',\n        path: '/devices',\n        icon: 'devices_other'\n      },\n      {\n        id: guid(),\n        name: 'device-profile.device-profiles',\n        type: 'link',\n        path: '/deviceProfiles',\n        icon: 'mdi:alpha-d-box',\n        isMdiIcon: true\n      },\n      {\n        id: guid(),\n        name: 'ota-update.ota-updates',\n        type: 'link',\n        path: '/otaUpdates',\n        icon: 'memory'\n      },\n      {\n        id: guid(),\n        name: 'entity-view.entity-views',\n        type: 'link',\n        path: '/entityViews',\n        icon: 'view_quilt'\n      }\n    );\n    if (authState.edgesSupportEnabled) {\n      sections.push(\n        {\n          id: guid(),\n          name: 'edge.edge-instances',\n          type: 'link',\n          path: '/edgeInstances',\n          icon: 'router'\n        },\n        {\n          id: guid(),\n          name: 'edge.management',\n          type: 'toggle',\n          path: '/edgeManagement',\n          height: '40px',\n          icon: 'settings_input_antenna',\n          pages: [\n            {\n              id: guid(),\n              name: 'edge.rulechain-templates',\n              type: 'link',\n              path: '/edgeManagement/ruleChains',\n              icon: 'settings_ethernet'\n            }\n          ]\n        }\n      );\n    }\n    sections.push(\n      {\n        id: guid(),\n        name: 'widget.widget-library',\n        type: 'link',\n        path: '/widgets-bundles',\n        icon: 'now_widgets'\n      },\n      {\n        id: guid(),\n        name: 'dashboard.dashboards',\n        type: 'link',\n        path: '/dashboards',\n        icon: 'dashboards'\n      },\n      {\n        id: guid(),\n        name: 'audit-log.audit-logs',\n        type: 'link',\n        path: '/auditLogs',\n        icon: 'track_changes'\n      },\n      {\n        id: guid(),\n        name: 'api-usage.api-usage',\n        type: 'link',\n        path: '/usage',\n        icon: 'insert_chart',\n        notExact: true\n      },\n      {\n        id: guid(),\n        name: 'admin.system-settings',\n        type: 'toggle',\n        path: '/settings',\n        height: '80px',\n        icon: 'settings',\n        pages: [\n          {\n            id: guid(),\n            name: 'admin.home-settings',\n            type: 'link',\n            path: '/settings/home',\n            icon: 'settings_applications'\n          },\n          {\n            id: guid(),\n            name: 'resource.resources-library',\n            type: 'link',\n            path: '/settings/resources-library',\n            icon: 'folder'\n          }\n        ]\n      }\n    );\n    return sections;\n  }\n\n  private buildTenantAdminHome(authState: AuthState): Array<HomeSection> {\n    const homeSections: Array<HomeSection> = [];\n    homeSections.push(\n      {\n        name: 'rulechain.management',\n        places: [\n          {\n            name: 'rulechain.rulechains',\n            icon: 'settings_ethernet',\n            path: '/ruleChains'\n          }\n        ]\n      },\n      {\n        name: 'customer.management',\n        places: [\n          {\n            name: 'customer.customers',\n            icon: 'supervisor_account',\n            path: '/customers'\n          }\n        ]\n      },\n      {\n        name: 'asset.management',\n        places: [\n          {\n            name: 'asset.assets',\n            icon: 'domain',\n            path: '/assets'\n          }\n        ]\n      },\n      {\n        name: 'device.management',\n        places: [\n          {\n            name: 'device.devices',\n            icon: 'devices_other',\n            path: '/devices'\n          },\n          {\n            name: 'device-profile.device-profiles',\n            icon: 'mdi:alpha-d-box',\n            isMdiIcon: true,\n            path: '/deviceProfiles'\n          },\n          {\n            name: 'ota-update.ota-updates',\n            icon: 'memory',\n            path: '/otaUpdates'\n          }\n        ]\n      },\n      {\n        name: 'entity-view.management',\n        places: [\n          {\n            name: 'entity-view.entity-views',\n            icon: 'view_quilt',\n            path: '/entityViews'\n          }\n        ]\n      }\n    );\n    if (authState.edgesSupportEnabled) {\n      homeSections.push(\n        {\n          name: 'edge.management',\n          places: [\n            {\n              name: 'edge.edge-instances',\n              icon: 'router',\n              path: '/edgeInstances'\n            },\n            {\n              name: 'edge.rulechain-templates',\n              icon: 'settings_ethernet',\n              path: '/edgeManagement/ruleChains'\n            }\n          ]\n        }\n      );\n    }\n    homeSections.push(\n      {\n        name: 'dashboard.management',\n        places: [\n          {\n            name: 'widget.widget-library',\n            icon: 'now_widgets',\n            path: '/widgets-bundles'\n          },\n          {\n            name: 'dashboard.dashboards',\n            icon: 'dashboard',\n            path: '/dashboards'\n          }\n        ]\n      },\n      {\n        name: 'audit-log.audit',\n        places: [\n          {\n            name: 'audit-log.audit-logs',\n            icon: 'track_changes',\n            path: '/auditLogs'\n          },\n          {\n            name: 'api-usage.api-usage',\n            icon: 'insert_chart',\n            path: '/usage'\n          }\n        ]\n      },\n      {\n        name: 'admin.system-settings',\n        places: [\n          {\n            name: 'admin.home-settings',\n            icon: 'settings_applications',\n            path: '/settings/home'\n          },\n          {\n            name: 'resource.resources-library',\n            icon: 'folder',\n            path: '/settings/resources-library'\n          }\n        ]\n      }\n    );\n    return homeSections;\n  }\n\n  private buildCustomerUserMenu(authState: AuthState): Array<MenuSection> {\n    const sections: Array<MenuSection> = [];\n    sections.push(\n      {\n        id: guid(),\n        name: 'home.home',\n        type: 'link',\n        path: '/home',\n        notExact: true,\n        icon: 'home'\n      },\n      {\n        id: guid(),\n        name: 'asset.assets',\n        type: 'link',\n        path: '/assets',\n        icon: 'domain'\n      },\n      {\n        id: guid(),\n        name: 'device.devices',\n        type: 'link',\n        path: '/devices',\n        icon: 'devices_other'\n      },\n      {\n        id: guid(),\n        name: 'entity-view.entity-views',\n        type: 'link',\n        path: '/entityViews',\n        icon: 'view_quilt'\n      }\n    );\n    if (authState.edgesSupportEnabled) {\n      sections.push(\n        {\n          id: guid(),\n          name: 'edge.edge-instances',\n          type: 'link',\n          path: '/edgeInstances',\n          icon: 'router'\n        }\n      );\n    }\n    sections.push(\n      {\n        id: guid(),\n        name: 'dashboard.dashboards',\n        type: 'link',\n        path: '/dashboards',\n        icon: 'dashboard'\n      }\n    );\n    return sections;\n  }\n\n  private buildCustomerUserHome(authState: AuthState): Array<HomeSection> {\n    const homeSections: Array<HomeSection> = [];\n    homeSections.push(\n      {\n        name: 'asset.view-assets',\n        places: [\n          {\n            name: 'asset.assets',\n            icon: 'domain',\n            path: '/assets'\n          }\n        ]\n      },\n      {\n        name: 'device.view-devices',\n        places: [\n          {\n            name: 'device.devices',\n            icon: 'devices_other',\n            path: '/devices'\n          }\n        ]\n      },\n      {\n        name: 'entity-view.management',\n        places: [\n          {\n            name: 'entity-view.entity-views',\n            icon: 'view_quilt',\n            path: '/entityViews'\n          }\n        ]\n      }\n    );\n    if (authState.edgesSupportEnabled) {\n      homeSections.push(\n        {\n          name: 'edge.management',\n          places: [\n            {\n              name: 'edge.edge-instances',\n              icon: 'settings_input_antenna',\n              path: '/edgeInstances'\n            }\n          ]\n        }\n      );\n    }\n    homeSections.push(\n      {\n        name: 'dashboard.view-dashboards',\n        places: [\n          {\n            name: 'dashboard.dashboards',\n            icon: 'dashboard',\n            path: '/dashboards'\n          }\n        ]\n      }\n    );\n    return homeSections;\n  }\n\n  public menuSections(): Observable<Array<MenuSection>> {\n    return this.menuSections$;\n  }\n\n  public homeSections(): Observable<Array<HomeSection>> {\n    return this.homeSections$;\n  }\n\n}\n\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { IDashboardComponent } from '@home/models/dashboard-component.models';\nimport {\n  DataSet,\n  Datasource,\n  DatasourceData,\n  JsonSettingsSchema,\n  Widget,\n  WidgetActionDescriptor,\n  WidgetActionSource,\n  WidgetConfig,\n  WidgetControllerDescriptor,\n  WidgetType,\n  widgetType,\n  WidgetTypeDescriptor,\n  WidgetTypeDetails,\n  WidgetTypeParameters\n} from '@shared/models/widget.models';\nimport { Timewindow, WidgetTimewindow } from '@shared/models/time/time.models';\nimport {\n  IAliasController,\n  IStateController,\n  IWidgetSubscription,\n  IWidgetUtils,\n  RpcApi,\n  SubscriptionEntityInfo,\n  TimewindowFunctions,\n  WidgetActionsApi,\n  WidgetSubscriptionApi\n} from '@core/api/widget-api.models';\nimport { ChangeDetectorRef, ComponentFactory, Injector, NgZone, Type } from '@angular/core';\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { RafService } from '@core/services/raf.service';\nimport { WidgetTypeId } from '@shared/models/id/widget-type-id';\nimport { TenantId } from '@shared/models/id/tenant-id';\nimport { WidgetLayout } from '@shared/models/dashboard.models';\nimport { formatValue, isDefined } from '@core/utils';\nimport { forkJoin, of } from 'rxjs';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport {\n  NotificationHorizontalPosition,\n  NotificationType,\n  NotificationVerticalPosition\n} from '@core/notification/notification.models';\nimport { ActionNotificationHide, ActionNotificationShow } from '@core/notification/notification.actions';\nimport { AuthUser } from '@shared/models/user.model';\nimport { getCurrentAuthUser } from '@core/auth/auth.selectors';\nimport { DeviceService } from '@core/http/device.service';\nimport { AssetService } from '@core/http/asset.service';\nimport { EntityViewService } from '@core/http/entity-view.service';\nimport { CustomerService } from '@core/http/customer.service';\nimport { DashboardService } from '@core/http/dashboard.service';\nimport { UserService } from '@core/http/user.service';\nimport { AttributeService } from '@core/http/attribute.service';\nimport { EntityRelationService } from '@core/http/entity-relation.service';\nimport { EntityService } from '@core/http/entity.service';\nimport { DialogService } from '@core/services/dialog.service';\nimport { CustomDialogService } from '@home/components/widget/dialog/custom-dialog.service';\nimport { DatePipe } from '@angular/common';\nimport { TranslateService } from '@ngx-translate/core';\nimport { PageLink } from '@shared/models/page/page-link';\nimport { SortOrder } from '@shared/models/page/sort-order';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { Router } from '@angular/router';\nimport { catchError, map, mergeMap, switchMap } from 'rxjs/operators';\nimport { FormattedData } from '@home/components/widget/lib/maps/map-models';\nimport { TbPopoverComponent } from '@shared/components/popover.component';\n\nexport interface IWidgetAction {\n  name: string;\n  icon: string;\n  onAction: ($event: Event) => void;\n}\n\nexport type ShowWidgetHeaderActionFunction = (ctx: WidgetContext, data: FormattedData[]) => boolean;\n\nexport interface WidgetHeaderAction extends IWidgetAction {\n  displayName: string;\n  descriptor: WidgetActionDescriptor;\n  useShowWidgetHeaderActionFunction: boolean;\n  showWidgetHeaderActionFunction: ShowWidgetHeaderActionFunction;\n}\n\nexport interface WidgetAction extends IWidgetAction {\n  show: boolean;\n}\n\nexport interface IDashboardWidget {\n  updateWidgetParams();\n}\n\nexport class WidgetContext {\n\n  constructor(public dashboard: IDashboardComponent,\n              private dashboardWidget: IDashboardWidget,\n              private widget: Widget,\n              public parentDashboard?: IDashboardComponent) {}\n\n  get stateController(): IStateController {\n    return this.parentDashboard ? this.parentDashboard.stateController : this.dashboard.stateController;\n  }\n\n  get aliasController(): IAliasController {\n    return this.dashboard.aliasController;\n  }\n\n  get dashboardTimewindow(): Timewindow {\n    return this.dashboard.dashboardTimewindow;\n  }\n\n  get widgetConfig(): WidgetConfig {\n    return this.widget.config;\n  }\n\n  get settings(): any {\n    return this.widget.config.settings;\n  }\n\n  get units(): string {\n    return this.widget.config.units || '';\n  }\n\n  get decimals(): number {\n    return isDefined(this.widget.config.decimals) ? this.widget.config.decimals : 2;\n  }\n\n  set changeDetector(cd: ChangeDetectorRef) {\n    this.changeDetectorValue = cd;\n  }\n\n  set containerChangeDetector(cd: ChangeDetectorRef) {\n    this.containerChangeDetectorValue = cd;\n  }\n\n  get currentUser(): AuthUser {\n    if (this.store) {\n      return getCurrentAuthUser(this.store);\n    } else {\n      return null;\n    }\n  }\n\n  deviceService: DeviceService;\n  assetService: AssetService;\n  entityViewService: EntityViewService;\n  customerService: CustomerService;\n  dashboardService: DashboardService;\n  userService: UserService;\n  attributeService: AttributeService;\n  entityRelationService: EntityRelationService;\n  entityService: EntityService;\n  dialogs: DialogService;\n  customDialog: CustomDialogService;\n  date: DatePipe;\n  translate: TranslateService;\n  http: HttpClient;\n  sanitizer: DomSanitizer;\n  router: Router;\n\n  private changeDetectorValue: ChangeDetectorRef;\n  private containerChangeDetectorValue: ChangeDetectorRef;\n\n  inited = false;\n  destroyed = false;\n\n  subscriptions: {[id: string]: IWidgetSubscription} = {};\n  defaultSubscription: IWidgetSubscription = null;\n\n  timewindowFunctions: TimewindowFunctions = {\n    onUpdateTimewindow: (startTimeMs, endTimeMs, interval) => {\n      if (this.defaultSubscription) {\n        this.defaultSubscription.onUpdateTimewindow(startTimeMs, endTimeMs, interval);\n      }\n    },\n    onResetTimewindow: () => {\n      if (this.defaultSubscription) {\n        this.defaultSubscription.onResetTimewindow();\n      }\n    }\n  };\n\n  controlApi: RpcApi = {\n    sendOneWayCommand: (method, params, timeout, persistent, requestUUID) => {\n      if (this.defaultSubscription) {\n        return this.defaultSubscription.sendOneWayCommand(method, params, timeout, persistent, requestUUID);\n      } else {\n        return of(null);\n      }\n    },\n    sendTwoWayCommand: (method, params, timeout, persistent, requestUUID) => {\n      if (this.defaultSubscription) {\n        return this.defaultSubscription.sendTwoWayCommand(method, params, timeout, persistent, requestUUID);\n      } else {\n        return of(null);\n      }\n    },\n    completedCommand: () => {\n      if (this.defaultSubscription) {\n        return this.defaultSubscription.completedCommand();\n      } else {\n        return of(null);\n      }\n    }\n  };\n\n  utils: IWidgetUtils = {\n    formatValue\n  };\n\n  $container: JQuery<HTMLElement>;\n  $containerParent: JQuery<HTMLElement>;\n  width: number;\n  height: number;\n  $scope: IDynamicWidgetComponent;\n  isEdit: boolean;\n  isMobile: boolean;\n  toastTargetId: string;\n\n  widgetNamespace?: string;\n  subscriptionApi?: WidgetSubscriptionApi;\n\n  actionsApi?: WidgetActionsApi;\n  activeEntityInfo?: SubscriptionEntityInfo;\n\n  datasources?: Array<Datasource>;\n  data?: Array<DatasourceData>;\n  hiddenData?: Array<{data: DataSet}>;\n  timeWindow?: WidgetTimewindow;\n\n  hideTitlePanel = false;\n\n  widgetTitle?: string;\n  widgetTitleTooltip?: string;\n  customHeaderActions?: Array<WidgetHeaderAction>;\n  widgetActions?: Array<WidgetAction>;\n\n  servicesMap?: Map<string, Type<any>>;\n\n  $injector?: Injector;\n\n  ngZone?: NgZone;\n\n  store?: Store<AppState>;\n\n  private popoverComponents: TbPopoverComponent[] = [];\n\n  rxjs = {\n    forkJoin,\n    of,\n    map,\n    mergeMap,\n    switchMap,\n    catchError\n  };\n\n  registerPopoverComponent(popoverComponent: TbPopoverComponent) {\n    this.popoverComponents.push(popoverComponent);\n    popoverComponent.tbDestroy.subscribe(() => {\n      const index = this.popoverComponents.indexOf(popoverComponent, 0);\n      if (index > -1) {\n        this.popoverComponents.splice(index, 1);\n      }\n    });\n  }\n\n  updatePopoverPositions() {\n    this.popoverComponents.forEach(comp => {\n      comp.updatePosition();\n    });\n  }\n\n  setPopoversHidden(hidden: boolean) {\n    this.popoverComponents.forEach(comp => {\n      comp.tbHidden = hidden;\n    });\n  }\n\n  showSuccessToast(message: string, duration: number = 1000,\n                   verticalPosition: NotificationVerticalPosition = 'bottom',\n                   horizontalPosition: NotificationHorizontalPosition = 'left',\n                   target: string = 'dashboardRoot') {\n    this.showToast('success', message, duration, verticalPosition, horizontalPosition, target);\n  }\n\n  showInfoToast(message: string,\n                verticalPosition: NotificationVerticalPosition = 'bottom',\n                horizontalPosition: NotificationHorizontalPosition = 'left',\n                target: string = 'dashboardRoot') {\n    this.showToast('info', message, undefined, verticalPosition, horizontalPosition, target);\n  }\n\n  showWarnToast(message: string,\n                verticalPosition: NotificationVerticalPosition = 'bottom',\n                horizontalPosition: NotificationHorizontalPosition = 'left',\n                target: string = 'dashboardRoot') {\n    this.showToast('warn', message, undefined, verticalPosition, horizontalPosition, target);\n  }\n\n  showErrorToast(message: string,\n                 verticalPosition: NotificationVerticalPosition = 'bottom',\n                 horizontalPosition: NotificationHorizontalPosition = 'left',\n                 target: string = 'dashboardRoot') {\n    this.showToast('error', message, undefined, verticalPosition, horizontalPosition, target);\n  }\n\n  showToast(type: NotificationType, message: string, duration: number,\n            verticalPosition: NotificationVerticalPosition = 'bottom',\n            horizontalPosition: NotificationHorizontalPosition = 'left',\n            target: string = 'dashboardRoot') {\n    this.store.dispatch(new ActionNotificationShow(\n      {\n        message,\n        type,\n        duration,\n        verticalPosition,\n        horizontalPosition,\n        target,\n        panelClass: this.widgetNamespace,\n        forceDismiss: true\n      }));\n  }\n\n  hideToast(target?: string) {\n    this.store.dispatch(new ActionNotificationHide(\n      {\n        target,\n      }));\n  }\n\n  detectChanges(updateWidgetParams: boolean = false) {\n    if (!this.destroyed) {\n      if (updateWidgetParams) {\n        this.dashboardWidget.updateWidgetParams();\n      }\n      try {\n        this.changeDetectorValue.detectChanges();\n      } catch (e) {\n        // console.log(e);\n      }\n    }\n  }\n\n  detectContainerChanges() {\n    if (!this.destroyed) {\n      try {\n        this.containerChangeDetectorValue.detectChanges();\n      } catch (e) {\n        // console.log(e);\n      }\n    }\n  }\n\n  updateWidgetParams() {\n    if (!this.destroyed) {\n      setTimeout(() => {\n        this.dashboardWidget.updateWidgetParams();\n      }, 0);\n    }\n  }\n\n  updateAliases(aliasIds?: Array<string>) {\n    this.aliasController.updateAliases(aliasIds);\n  }\n\n  reset() {\n    this.destroyed = false;\n    this.hideTitlePanel = false;\n    this.widgetTitle = undefined;\n    this.widgetActions = undefined;\n  }\n\n  pageLink(pageSize: number, page: number = 0, textSearch: string = null, sortOrder: SortOrder = null): PageLink {\n    return new PageLink(pageSize, page, textSearch, sortOrder);\n  }\n}\n\nexport interface IDynamicWidgetComponent {\n  readonly ctx: WidgetContext;\n  readonly errorMessages: string[];\n  readonly $injector: Injector;\n  executingRpcRequest: boolean;\n  rpcEnabled: boolean;\n  rpcErrorText: string;\n  rpcRejection: HttpErrorResponse;\n  raf: RafService;\n  [key: string]: any;\n}\n\nexport interface WidgetInfo extends WidgetTypeDescriptor, WidgetControllerDescriptor {\n  widgetName: string;\n  alias: string;\n  typeSettingsSchema?: string | any;\n  typeDataKeySettingsSchema?: string | any;\n  image?: string;\n  description?: string;\n  componentFactory?: ComponentFactory<IDynamicWidgetComponent>;\n}\n\nexport interface WidgetConfigComponentData {\n  config: WidgetConfig;\n  layout: WidgetLayout;\n  widgetType: widgetType;\n  typeParameters: WidgetTypeParameters;\n  actionSources: {[actionSourceId: string]: WidgetActionSource};\n  isDataEnabled: boolean;\n  settingsSchema: JsonSettingsSchema;\n  dataKeySettingsSchema: JsonSettingsSchema;\n}\n\nexport const MissingWidgetType: WidgetInfo = {\n  type: widgetType.latest,\n  widgetName: 'Widget type not found',\n  alias: 'undefined',\n  sizeX: 8,\n  sizeY: 6,\n  resources: [],\n  templateHtml: '<div class=\"tb-widget-error-container\">' +\n    '<div class=\"tb-widget-error-msg\" innerHTML=\"{{\\'widget.widget-type-not-found\\' | translate }}\"></div>' +\n    '</div>',\n  templateCss: '',\n  controllerScript: 'self.onInit = function() {}',\n  settingsSchema: '{}\\n',\n  dataKeySettingsSchema: '{}\\n',\n  image: null,\n  description: null,\n  defaultConfig: '{\\n' +\n    '\"title\": \"Widget type not found\",\\n' +\n    '\"datasources\": [],\\n' +\n    '\"settings\": {}\\n' +\n    '}\\n',\n  typeParameters: {}\n};\n\nexport const ErrorWidgetType: WidgetInfo = {\n  type: widgetType.latest,\n  widgetName: 'Error loading widget',\n  alias: 'error',\n  sizeX: 8,\n  sizeY: 6,\n  resources: [],\n  templateHtml: '<div class=\"tb-widget-error-container\">' +\n                   '<div translate class=\"tb-widget-error-msg\">widget.widget-type-load-error</div>' +\n                   '<div *ngFor=\"let error of errorMessages\" class=\"tb-widget-error-msg\">{{ error }}</div>' +\n                '</div>',\n  templateCss: '',\n  controllerScript: 'self.onInit = function() {}',\n  settingsSchema: '{}\\n',\n  dataKeySettingsSchema: '{}\\n',\n  image: null,\n  description: null,\n  defaultConfig: '{\\n' +\n    '\"title\": \"Widget failed to load\",\\n' +\n    '\"datasources\": [],\\n' +\n    '\"settings\": {}\\n' +\n    '}\\n',\n  typeParameters: {}\n};\n\nexport interface WidgetTypeInstance {\n  getSettingsSchema?: () => string;\n  getDataKeySettingsSchema?: () => string;\n  typeParameters?: () => WidgetTypeParameters;\n  useCustomDatasources?: () => boolean;\n  actionSources?: () => {[actionSourceId: string]: WidgetActionSource};\n\n  onInit?: () => void;\n  onDataUpdated?: () => void;\n  onResize?: () => void;\n  onEditModeChanged?: () => void;\n  onMobileModeChanged?: () => void;\n  onDestroy?: () => void;\n}\n\nexport function detailsToWidgetInfo(widgetTypeDetailsEntity: WidgetTypeDetails): WidgetInfo {\n  const widgetInfo = toWidgetInfo(widgetTypeDetailsEntity);\n  widgetInfo.image = widgetTypeDetailsEntity.image;\n  widgetInfo.description = widgetTypeDetailsEntity.description;\n  return widgetInfo;\n}\n\nexport function toWidgetInfo(widgetTypeEntity: WidgetType): WidgetInfo {\n  return {\n    widgetName: widgetTypeEntity.name,\n    alias: widgetTypeEntity.alias,\n    type: widgetTypeEntity.descriptor.type,\n    sizeX: widgetTypeEntity.descriptor.sizeX,\n    sizeY: widgetTypeEntity.descriptor.sizeY,\n    resources: widgetTypeEntity.descriptor.resources,\n    templateHtml: widgetTypeEntity.descriptor.templateHtml,\n    templateCss: widgetTypeEntity.descriptor.templateCss,\n    controllerScript: widgetTypeEntity.descriptor.controllerScript,\n    settingsSchema: widgetTypeEntity.descriptor.settingsSchema,\n    dataKeySettingsSchema: widgetTypeEntity.descriptor.dataKeySettingsSchema,\n    defaultConfig: widgetTypeEntity.descriptor.defaultConfig\n  };\n}\n\nexport function toWidgetTypeDetails(widgetInfo: WidgetInfo, id: WidgetTypeId, tenantId: TenantId,\n                                    bundleAlias: string, createdTime: number): WidgetTypeDetails {\n  const widgetTypeEntity = toWidgetType(widgetInfo, id, tenantId, bundleAlias, createdTime);\n  const widgetTypeDetails: WidgetTypeDetails = {...widgetTypeEntity,\n    description: widgetInfo.description,\n    image: widgetInfo.image\n  };\n  return widgetTypeDetails;\n}\n\nexport function toWidgetType(widgetInfo: WidgetInfo, id: WidgetTypeId, tenantId: TenantId,\n                             bundleAlias: string, createdTime: number): WidgetType {\n  const descriptor: WidgetTypeDescriptor = {\n    type: widgetInfo.type,\n    sizeX: widgetInfo.sizeX,\n    sizeY: widgetInfo.sizeY,\n    resources: widgetInfo.resources,\n    templateHtml: widgetInfo.templateHtml,\n    templateCss: widgetInfo.templateCss,\n    controllerScript: widgetInfo.controllerScript,\n    settingsSchema: widgetInfo.settingsSchema,\n    dataKeySettingsSchema: widgetInfo.dataKeySettingsSchema,\n    defaultConfig: widgetInfo.defaultConfig\n  };\n  return {\n    id,\n    tenantId,\n    createdTime,\n    bundleAlias,\n    alias: widgetInfo.alias,\n    name: widgetInfo.widgetName,\n    descriptor\n  };\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { AfterViewInit, Component, forwardRef, Input, OnDestroy, ViewChild } from '@angular/core';\nimport { PageComponent } from '@shared/components/page.component';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR, } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { FlowDirective } from '@flowjs/ngx-flow';\nimport { DomSanitizer, SafeUrl } from '@angular/platform-browser';\nimport { UtilsService } from '@core/services/utils.service';\nimport { DialogService } from '@core/services/dialog.service';\nimport { TranslateService } from '@ngx-translate/core';\nimport { FileSizePipe } from '@shared/pipe/file-size.pipe';\n\n@Component({\n  selector: 'tb-image-input',\n  templateUrl: './image-input.component.html',\n  styleUrls: ['./image-input.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => ImageInputComponent),\n      multi: true\n    }\n  ]\n})\nexport class ImageInputComponent extends PageComponent implements AfterViewInit, OnDestroy, ControlValueAccessor {\n\n  @Input()\n  label: string;\n\n  @Input()\n  maxSizeByte: number;\n\n  private requiredValue: boolean;\n\n  get required(): boolean {\n    return this.requiredValue;\n  }\n\n  @Input()\n  set required(value: boolean) {\n    const newVal = coerceBooleanProperty(value);\n    if (this.requiredValue !== newVal) {\n      this.requiredValue = newVal;\n    }\n  }\n\n  @Input()\n  disabled: boolean;\n\n  @Input()\n  showClearButton = true;\n\n  @Input()\n  showPreview = true;\n\n  @Input()\n  inputId = this.utils.guid();\n\n  imageUrl: string;\n  safeImageUrl: SafeUrl;\n\n  @ViewChild('flow', {static: true})\n  flow: FlowDirective;\n\n  autoUploadSubscription: Subscription;\n\n  private propagateChange = null;\n\n  constructor(protected store: Store<AppState>,\n              private utils: UtilsService,\n              private sanitizer: DomSanitizer,\n              private dialog: DialogService,\n              private translate: TranslateService,\n              private fileSize: FileSizePipe) {\n    super(store);\n  }\n\n  ngAfterViewInit() {\n    this.autoUploadSubscription = this.flow.events$.subscribe(event => {\n      if (event.type === 'fileAdded') {\n        const file = (event.event[0] as flowjs.FlowFile).file;\n        if (this.maxSizeByte && this.maxSizeByte < file.size) {\n          this.dialog.alert(\n            this.translate.instant('dashboard.cannot-upload-file'),\n            this.translate.instant('dashboard.maximum-upload-file-size', {size: this.fileSize.transform(this.maxSizeByte)})\n          ).subscribe(\n            () => { }\n          );\n          return false;\n        }\n        const reader = new FileReader();\n        reader.onload = (loadEvent) => {\n          if (typeof reader.result === 'string' && reader.result.startsWith('data:image/')) {\n            this.imageUrl = reader.result;\n            this.safeImageUrl = this.sanitizer.bypassSecurityTrustUrl(this.imageUrl);\n            this.updateModel();\n          }\n        };\n        reader.readAsDataURL(file);\n      }\n    });\n  }\n\n  ngOnDestroy() {\n    this.autoUploadSubscription.unsubscribe();\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n  }\n\n  writeValue(value: string): void {\n    this.imageUrl = value;\n    if (this.imageUrl) {\n      this.safeImageUrl = this.sanitizer.bypassSecurityTrustUrl(this.imageUrl);\n    } else {\n      this.safeImageUrl = null;\n    }\n  }\n\n  private updateModel() {\n    this.propagateChange(this.imageUrl);\n  }\n\n  clearImage() {\n    this.imageUrl = null;\n    this.safeImageUrl = null;\n    this.updateModel();\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<div class=\"tb-container\">\n  <label class=\"tb-title\" *ngIf=\"label\">{{label}}</label>\n  <ng-container #flow=\"flow\"\n                [flowConfig]=\"{singleFile: true, allowDuplicateUploads: true}\">\n    <div class=\"tb-image-select-container\">\n      <div *ngIf=\"showPreview\" class=\"tb-image-preview-container\">\n        <div *ngIf=\"!safeImageUrl; else elseBlock\">{{ (disabled ? 'dashboard.empty-image' : 'dashboard.no-image') | translate }}</div>\n        <ng-template #elseBlock><img class=\"tb-image-preview\" [src]=\"safeImageUrl\" /></ng-template>\n      </div>\n      <div *ngIf=\"showClearButton && !disabled\" class=\"tb-image-clear-container\">\n        <button mat-button mat-icon-button color=\"primary\"\n                type=\"button\"\n                (click)=\"clearImage()\"\n                class=\"tb-image-clear-btn\"\n                matTooltip=\"{{ 'action.remove' | translate }}\"\n                matTooltipPosition=\"above\">\n          <mat-icon>close</mat-icon>\n        </button>\n      </div>\n      <div *ngIf=\"!disabled\" class=\"drop-area tb-flow-drop\"\n           flowDrop\n           [flow]=\"flow.flowJs\">\n        <label for=\"{{inputId}}\" translate>dashboard.drop-image</label>\n        <input class=\"file-input\" flowButton type=\"file\" [flow]=\"flow.flowJs\" [flowAttributes]=\"{accept: 'image/*'}\" id=\"{{inputId}}\">\n      </div>\n    </div>\n  </ng-container>\n  <div class=\"tb-hint\" *ngIf=\"maxSizeByte && !disabled\" translate [translateParams]=\"{ size: maxSizeByte | fileSize}\">dashboard.maximum-upload-file-size</div>\n</div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, Input } from '@angular/core';\nimport { animate, state, style, transition, trigger } from '@angular/animations';\n\n@Component({\n  selector: 'tb-error',\n  template: `\n  <div [@animation]=\"state\" style=\"margin-top:0.5rem;font-size:.75rem\">\n      <mat-error >\n      {{message}}\n    </mat-error>\n    </div>\n  `,\n  styles: [`\n    :host {\n        height: 24px;\n    }\n  `],\n  animations: [\n    trigger('animation', [\n      state('show', style({\n        opacity: 1,\n      })),\n      state('hide',   style({\n        opacity: 0,\n        transform: 'translateY(-1rem)'\n      })),\n      transition('show => hide', animate('200ms ease-out')),\n      transition('* => show', animate('200ms ease-in'))\n\n    ]),\n  ]\n})\nexport class TbErrorComponent {\n  errorValue: any;\n  state: any;\n  message;\n\n  @Input()\n  set error(value) {\n    if (value && !this.message) {\n      this.message = value;\n      this.state = 'hide';\n      setTimeout(() => {\n        this.state = 'show';\n      });\n    } else {\n      this.errorValue = value;\n      this.state = value ? 'show' : 'hide';\n    }\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { AfterViewInit, Component, ElementRef, Inject, OnInit, ViewChild } from '@angular/core';\nimport { fromEvent, Observable } from 'rxjs';\nimport { select, Store } from '@ngrx/store';\nimport { debounceTime, distinctUntilChanged, map, tap } from 'rxjs/operators';\n\nimport { BreakpointObserver, BreakpointState } from '@angular/cdk/layout';\nimport { User } from '@shared/models/user.model';\nimport { PageComponent } from '@shared/components/page.component';\nimport { AppState } from '@core/core.state';\nimport { getCurrentAuthState, selectAuthUser, selectUserDetails } from '@core/auth/auth.selectors';\nimport { MediaBreakpoints } from '@shared/models/constants';\nimport * as _screenfull from 'screenfull';\nimport { MatSidenav } from '@angular/material/sidenav';\nimport { AuthState } from '@core/auth/auth.models';\nimport { WINDOW } from '@core/services/window.service';\nimport { instanceOfSearchableComponent, ISearchableComponent } from '@home/models/searchable-component.models';\n\nconst screenfull = _screenfull as _screenfull.Screenfull;\n\n@Component({\n  selector: 'tb-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss']\n})\nexport class HomeComponent extends PageComponent implements AfterViewInit, OnInit {\n\n  authState: AuthState = getCurrentAuthState(this.store);\n\n  forceFullscreen = this.authState.forceFullscreen;\n\n  activeComponent: any;\n  searchableComponent: ISearchableComponent;\n\n  sidenavMode: 'over' | 'push' | 'side' = 'side';\n  sidenavOpened = true;\n\n  logo = 'assets/logo_title_white.png';\n\n  @ViewChild('sidenav')\n  sidenav: MatSidenav;\n\n  @ViewChild('searchInput') searchInputField: ElementRef;\n\n  fullscreenEnabled = screenfull.isEnabled;\n\n  authUser$: Observable<any>;\n  userDetails$: Observable<User>;\n  userDetailsString: Observable<string>;\n\n  searchEnabled = false;\n  showSearch = false;\n  searchText = '';\n\n  constructor(protected store: Store<AppState>,\n    @Inject(WINDOW) private window: Window,\n    public breakpointObserver: BreakpointObserver) {\n    super(store);\n  }\n\n  ngOnInit() {\n\n    this.authUser$ = this.store.pipe(select(selectAuthUser));\n    this.userDetails$ = this.store.pipe(select(selectUserDetails));\n    this.userDetailsString = this.userDetails$.pipe(map((user: User) => {\n      return JSON.stringify(user);\n    }));\n\n    const isGtSm = this.breakpointObserver.isMatched(MediaBreakpoints['gt-sm']);\n    this.sidenavMode = isGtSm ? 'side' : 'over';\n    this.sidenavOpened = isGtSm;\n\n    this.breakpointObserver\n      .observe(MediaBreakpoints['gt-sm'])\n      .subscribe((state: BreakpointState) => {\n        if (state.matches) {\n          this.sidenavMode = 'side';\n          this.sidenavOpened = true;\n        } else {\n          this.sidenavMode = 'over';\n          this.sidenavOpened = false;\n        }\n      }\n      );\n  }\n\n  ngAfterViewInit() {\n    fromEvent(this.searchInputField.nativeElement, 'keyup')\n      .pipe(\n        debounceTime(150),\n        distinctUntilChanged(),\n        tap(() => {\n          this.searchTextUpdated();\n        })\n      )\n      .subscribe();\n  }\n\n  sidenavClicked() {\n    if (this.sidenavMode === 'over') {\n      this.sidenav.toggle();\n    }\n  }\n\n  toggleFullscreen() {\n    if (screenfull.isEnabled) {\n      screenfull.toggle();\n    }\n  }\n\n  isFullscreen() {\n    return screenfull.isFullscreen;\n  }\n\n  goBack() {\n    this.window.history.back();\n  }\n\n  activeComponentChanged(activeComponent: any) {\n    this.showSearch = false;\n    this.searchText = '';\n    this.activeComponent = activeComponent;\n    if (this.activeComponent && instanceOfSearchableComponent(this.activeComponent)) {\n      this.searchEnabled = true;\n      this.searchableComponent = this.activeComponent;\n    } else {\n      this.searchEnabled = false;\n      this.searchableComponent = null;\n    }\n  }\n\n  displaySearchMode(): boolean {\n    return this.searchEnabled && this.showSearch;\n  }\n\n  openSearch() {\n    if (this.searchEnabled) {\n      this.showSearch = true;\n      setTimeout(() => {\n        this.searchInputField.nativeElement.focus();\n        this.searchInputField.nativeElement.setSelectionRange(0, 0);\n      }, 10);\n    }\n  }\n\n  closeSearch() {\n    if (this.searchEnabled) {\n      this.showSearch = false;\n      if (this.searchText.length) {\n        this.searchText = '';\n        this.searchTextUpdated();\n      }\n    }\n  }\n\n  private searchTextUpdated() {\n    if (this.searchableComponent) {\n      this.searchableComponent.onSearchTextUpdated(this.searchText);\n    }\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<mat-sidenav-container>\n  <mat-sidenav #sidenav class=\"tb-site-sidenav mat-elevation-z2\"\n               [disableClose]=\"sidenavOpened\"\n               (click)=\"sidenavClicked()\"\n               [mode]=\"sidenavMode\"\n               [opened]=\"sidenavOpened && !forceFullscreen\">\n    <header class=\"tb-nav-header\">\n      <mat-toolbar color=\"primary\" class=\"tb-nav-header-toolbar\">\n        <div fxFlex=\"auto\" fxLayout=\"row\">\n          <img [src]=\"logo\"\n               aria-label=\"logo\" class=\"tb-logo-title\"/>\n        </div>\n      </mat-toolbar>\n    </header>\n    <mat-toolbar color=\"primary\" fxFlex=\"0%\" class=\"tb-side-menu-toolbar\" fxLayout=\"column\" role=\"navigation\">\n      <tb-side-menu></tb-side-menu>\n    </mat-toolbar>\n  </mat-sidenav>\n  <mat-sidenav-content>\n    <div fxLayout=\"column\" role=\"main\" style=\"height: 100%;\">\n      <mat-toolbar fxLayout=\"row\" color=\"primary\" class=\"mat-elevation-z1 tb-primary-toolbar\">\n        <button [fxShow]=\"!forceFullscreen\" mat-icon-button id=\"main\"\n                [ngClass]=\"{'tb-invisible': displaySearchMode()}\"\n                fxHide.gt-sm (click)=\"sidenav.toggle()\">\n          <mat-icon class=\"material-icons\">menu</mat-icon>\n        </button>\n        <button [fxShow]=\"forceFullscreen\" mat-icon-button\n                [ngClass]=\"{'tb-invisible': displaySearchMode()}\"\n                (click)=\"goBack()\">\n          <mat-icon class=\"material-icons\">arrow_back</mat-icon>\n        </button>\n        <button mat-icon-button\n                [ngClass]=\"{'tb-invisible': !displaySearchMode()}\"\n                (click)=\"closeSearch()\">\n          <mat-icon class=\"material-icons\">arrow_back</mat-icon>\n        </button>\n        <tb-breadcrumb [fxShow]=\"!displaySearchMode()\"\n             fxFlex [activeComponent]=\"activeComponent\" class=\"mat-toolbar-tools\">\n        </tb-breadcrumb>\n        <div [fxShow]=\"displaySearchMode()\" fxFlex fxLayout=\"row\" class=\"tb-dark\">\n          <mat-form-field fxFlex floatLabel=\"always\">\n            <mat-label></mat-label>\n            <input #searchInput matInput\n                   [(ngModel)]=\"searchText\"\n                   placeholder=\"{{ 'common.enter-search' | translate }}\"/>\n          </mat-form-field>\n        </div>\n        <button [fxShow]=\"searchEnabled\"\n                mat-icon-button (click)=\"openSearch()\">\n          <mat-icon class=\"material-icons\">search</mat-icon>\n        </button>\n        <button *ngIf=\"fullscreenEnabled\" [fxShow]=\"!displaySearchMode()\"\n                mat-icon-button fxHide.lt-md (click)=\"toggleFullscreen()\">\n          <mat-icon class=\"material-icons\">{{ isFullscreen() ? 'fullscreen_exit' : 'fullscreen' }}</mat-icon>\n        </button>\n        <tb-user-menu [displayUserInfo]=\"!displaySearchMode()\"></tb-user-menu>\n      </mat-toolbar>\n      <mat-progress-bar color=\"warn\" style=\"z-index: 10; margin-bottom: -4px; width: 100%;\" mode=\"indeterminate\"\n                        *ngIf=\"isLoading$ | async\">\n      </mat-progress-bar>\n      <div fxFlex fxLayout=\"column\" tb-toast class=\"tb-main-content\">\n        <router-outlet (activate)=\"activeComponentChanged($event)\"></router-outlet>\n      </div>\n    </div>\n  </mat-sidenav-content>\n</mat-sidenav-container>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { BaseData } from '@shared/models/base-data';\nimport { TenantId } from '@shared/models/id/tenant-id';\nimport { WidgetTypeId } from '@shared/models/id/widget-type-id';\nimport { Timewindow } from '@shared/models/time/time.models';\nimport { EntityType } from '@shared/models/entity-type.models';\nimport { AlarmSearchStatus, AlarmSeverity } from '@shared/models/alarm.models';\nimport { DataKeyType } from './telemetry/telemetry.models';\nimport { EntityId } from '@shared/models/id/entity-id';\nimport * as moment_ from 'moment';\nimport { EntityDataPageLink, EntityFilter, KeyFilter } from '@shared/models/query/query.models';\nimport { PopoverPlacement } from '@shared/components/popover.models';\n\nexport enum widgetType {\n  timeseries = 'timeseries',\n  latest = 'latest',\n  rpc = 'rpc',\n  alarm = 'alarm',\n  static = 'static'\n}\n\nexport interface WidgetTypeTemplate {\n  bundleAlias: string;\n  alias: string;\n}\n\nexport interface WidgetTypeData {\n  name: string;\n  icon: string;\n  isMdiIcon?: boolean;\n  configHelpLinkId: string;\n  template: WidgetTypeTemplate;\n}\n\nexport const widgetTypesData = new Map<widgetType, WidgetTypeData>(\n  [\n    [\n      widgetType.timeseries,\n      {\n        name: 'widget.timeseries',\n        icon: 'timeline',\n        configHelpLinkId: 'widgetsConfigTimeseries',\n        template: {\n          bundleAlias: 'charts',\n          alias: 'basic_timeseries'\n        }\n      }\n    ],\n    [\n      widgetType.latest,\n      {\n        name: 'widget.latest',\n        icon: 'track_changes',\n        configHelpLinkId: 'widgetsConfigLatest',\n        template: {\n          bundleAlias: 'cards',\n          alias: 'attributes_card'\n        }\n      }\n    ],\n    [\n      widgetType.rpc,\n      {\n        name: 'widget.rpc',\n        icon: 'mdi:developer-board',\n        configHelpLinkId: 'widgetsConfigRpc',\n        isMdiIcon: true,\n        template: {\n          bundleAlias: 'gpio_widgets',\n          alias: 'basic_gpio_control'\n        }\n      }\n    ],\n    [\n      widgetType.alarm,\n      {\n        name: 'widget.alarm',\n        icon: 'error',\n        configHelpLinkId: 'widgetsConfigAlarm',\n        template: {\n          bundleAlias: 'alarm_widgets',\n          alias: 'alarms_table'\n        }\n      }\n    ],\n    [\n      widgetType.static,\n      {\n        name: 'widget.static',\n        icon: 'font_download',\n        configHelpLinkId: 'widgetsConfigStatic',\n        template: {\n          bundleAlias: 'cards',\n          alias: 'html_card'\n        }\n      }\n    ]\n  ]\n);\n\nexport interface WidgetResource {\n  url: string;\n  isModule?: boolean;\n}\n\nexport interface WidgetActionSource {\n  name: string;\n  value: string;\n  multiple: boolean;\n  hasShowCondition?: boolean;\n}\n\nexport const widgetActionSources: {[acionSourceId: string]: WidgetActionSource} = {\n    headerButton:\n    {\n      name: 'widget-action.header-button',\n      value: 'headerButton',\n      multiple: true,\n      hasShowCondition: true\n    }\n};\n\nexport interface WidgetTypeDescriptor {\n  type: widgetType;\n  resources: Array<WidgetResource>;\n  templateHtml: string;\n  templateCss: string;\n  controllerScript: string;\n  settingsSchema?: string | any;\n  dataKeySettingsSchema?: string | any;\n  defaultConfig: string;\n  sizeX: number;\n  sizeY: number;\n}\n\nexport interface WidgetTypeParameters {\n  useCustomDatasources?: boolean;\n  maxDatasources?: number;\n  maxDataKeys?: number;\n  datasourcesOptional?: boolean;\n  dataKeysOptional?: boolean;\n  stateData?: boolean;\n  hasDataPageLink?: boolean;\n  singleEntity?: boolean;\n  warnOnPageDataOverflow?: boolean;\n  ignoreDataUpdateOnIntervalTick?: boolean;\n}\n\nexport interface WidgetControllerDescriptor {\n  widgetTypeFunction?: any;\n  settingsSchema?: string | any;\n  dataKeySettingsSchema?: string | any;\n  typeParameters?: WidgetTypeParameters;\n  actionSources?: {[actionSourceId: string]: WidgetActionSource};\n}\n\nexport interface BaseWidgetType extends BaseData<WidgetTypeId> {\n  tenantId: TenantId;\n  bundleAlias: string;\n  alias: string;\n  name: string;\n}\n\nexport interface WidgetType extends BaseWidgetType {\n  descriptor: WidgetTypeDescriptor;\n}\n\nexport interface WidgetTypeInfo extends BaseWidgetType {\n  image: string;\n  description: string;\n  widgetType: widgetType;\n}\n\nexport interface WidgetTypeDetails extends WidgetType {\n  image: string;\n  description: string;\n}\n\nexport enum LegendDirection {\n  column = 'column',\n  row = 'row'\n}\n\nexport const legendDirectionTranslationMap = new Map<LegendDirection, string>(\n  [\n    [ LegendDirection.column, 'direction.column' ],\n    [ LegendDirection.row, 'direction.row' ]\n  ]\n);\n\nexport enum LegendPosition {\n  top = 'top',\n  bottom = 'bottom',\n  left = 'left',\n  right = 'right'\n}\n\nexport const legendPositionTranslationMap = new Map<LegendPosition, string>(\n  [\n    [ LegendPosition.top, 'position.top' ],\n    [ LegendPosition.bottom, 'position.bottom' ],\n    [ LegendPosition.left, 'position.left' ],\n    [ LegendPosition.right, 'position.right' ]\n  ]\n);\n\nexport interface LegendConfig {\n  position: LegendPosition;\n  direction?: LegendDirection;\n  sortDataKeys: boolean;\n  showMin: boolean;\n  showMax: boolean;\n  showAvg: boolean;\n  showTotal: boolean;\n}\n\nexport function defaultLegendConfig(wType: widgetType): LegendConfig {\n  return {\n    direction: LegendDirection.column,\n    position: LegendPosition.bottom,\n    sortDataKeys: false,\n    showMin: false,\n    showMax: false,\n    showAvg: wType === widgetType.timeseries,\n    showTotal: false\n  };\n}\n\nexport interface KeyInfo {\n  name: string;\n  label?: string;\n  color?: string;\n  funcBody?: string;\n  postFuncBody?: string;\n  units?: string;\n  decimals?: number;\n}\n\nexport interface DataKey extends KeyInfo {\n  type: DataKeyType;\n  pattern?: string;\n  settings?: any;\n  usePostProcessing?: boolean;\n  hidden?: boolean;\n  inLegend?: boolean;\n  isAdditional?: boolean;\n  origDataKeyIndex?: number;\n  _hash?: number;\n}\n\nexport enum DatasourceType {\n  function = 'function',\n  entity = 'entity',\n  entityCount = 'entityCount'\n}\n\nexport const datasourceTypeTranslationMap = new Map<DatasourceType, string>(\n  [\n    [ DatasourceType.function, 'function.function' ],\n    [ DatasourceType.entity, 'entity.entity' ],\n    [ DatasourceType.entityCount, 'entity.entities-count' ]\n  ]\n);\n\nexport interface Datasource {\n  type?: DatasourceType | any;\n  name?: string;\n  aliasName?: string;\n  dataKeys?: Array<DataKey>;\n  entityType?: EntityType;\n  entityId?: string;\n  entityName?: string;\n  entityAliasId?: string;\n  filterId?: string;\n  unresolvedStateEntity?: boolean;\n  dataReceived?: boolean;\n  entity?: BaseData<EntityId>;\n  entityLabel?: string;\n  entityDescription?: string;\n  generated?: boolean;\n  isAdditional?: boolean;\n  origDatasourceIndex?: number;\n  pageLink?: EntityDataPageLink;\n  keyFilters?: Array<KeyFilter>;\n  entityFilter?: EntityFilter;\n  dataKeyStartIndex?: number;\n  [key: string]: any;\n}\n\nexport type DataSet = [number, any][];\n\nexport interface DataSetHolder {\n  data: DataSet;\n}\n\nexport interface DatasourceData extends DataSetHolder {\n  datasource: Datasource;\n  dataKey: DataKey;\n}\n\nexport interface LegendKey {\n  dataKey: DataKey;\n  dataIndex: number;\n}\n\nexport interface LegendKeyData {\n  min: string;\n  max: string;\n  avg: string;\n  total: string;\n  hidden: boolean;\n}\n\nexport interface LegendData {\n  keys: Array<LegendKey>;\n  data: Array<LegendKeyData>;\n}\n\nexport enum WidgetActionType {\n  openDashboardState = 'openDashboardState',\n  updateDashboardState = 'updateDashboardState',\n  openDashboard = 'openDashboard',\n  custom = 'custom',\n  customPretty = 'customPretty',\n  mobileAction = 'mobileAction'\n}\n\nexport enum WidgetMobileActionType {\n  takePictureFromGallery = 'takePictureFromGallery',\n  takePhoto = 'takePhoto',\n  mapDirection = 'mapDirection',\n  mapLocation = 'mapLocation',\n  scanQrCode = 'scanQrCode',\n  makePhoneCall = 'makePhoneCall',\n  getLocation = 'getLocation',\n  takeScreenshot = 'takeScreenshot'\n}\n\nexport const widgetActionTypeTranslationMap = new Map<WidgetActionType, string>(\n  [\n    [ WidgetActionType.openDashboardState, 'widget-action.open-dashboard-state' ],\n    [ WidgetActionType.updateDashboardState, 'widget-action.update-dashboard-state' ],\n    [ WidgetActionType.openDashboard, 'widget-action.open-dashboard' ],\n    [ WidgetActionType.custom, 'widget-action.custom' ],\n    [ WidgetActionType.customPretty, 'widget-action.custom-pretty' ],\n    [ WidgetActionType.mobileAction, 'widget-action.mobile-action' ]\n  ]\n);\n\nexport const widgetMobileActionTypeTranslationMap = new Map<WidgetMobileActionType, string>(\n  [\n    [ WidgetMobileActionType.takePictureFromGallery, 'widget-action.mobile.take-picture-from-gallery' ],\n    [ WidgetMobileActionType.takePhoto, 'widget-action.mobile.take-photo' ],\n    [ WidgetMobileActionType.mapDirection, 'widget-action.mobile.map-direction' ],\n    [ WidgetMobileActionType.mapLocation, 'widget-action.mobile.map-location' ],\n    [ WidgetMobileActionType.scanQrCode, 'widget-action.mobile.scan-qr-code' ],\n    [ WidgetMobileActionType.makePhoneCall, 'widget-action.mobile.make-phone-call' ],\n    [ WidgetMobileActionType.getLocation, 'widget-action.mobile.get-location' ],\n    [ WidgetMobileActionType.takeScreenshot, 'widget-action.mobile.take-screenshot' ]\n  ]\n);\n\nexport interface MobileLaunchResult {\n  launched: boolean;\n}\n\nexport interface MobileImageResult {\n  imageUrl: string;\n}\n\nexport interface MobileQrCodeResult {\n  code: string;\n  format: string;\n}\n\nexport interface MobileLocationResult {\n  latitude: number;\n  longitude: number;\n}\n\nexport type MobileActionResult = MobileLaunchResult &\n                                 MobileImageResult &\n                                 MobileQrCodeResult &\n                                 MobileLocationResult;\n\nexport interface WidgetMobileActionResult<T extends MobileActionResult> {\n  result?: T;\n  hasResult: boolean;\n  error?: string;\n  hasError: boolean;\n}\n\nexport interface ProcessImageDescriptor {\n  processImageFunction: string;\n}\n\nexport interface ProcessLaunchResultDescriptor {\n  processLaunchResultFunction?: string;\n}\n\nexport interface LaunchMapDescriptor extends ProcessLaunchResultDescriptor {\n  getLocationFunction: string;\n}\n\nexport interface ScanQrCodeDescriptor {\n  processQrCodeFunction: string;\n}\n\nexport interface MakePhoneCallDescriptor extends ProcessLaunchResultDescriptor {\n  getPhoneNumberFunction: string;\n}\n\nexport interface GetLocationDescriptor {\n  processLocationFunction: string;\n}\n\nexport type WidgetMobileActionDescriptors = ProcessImageDescriptor &\n                                            LaunchMapDescriptor &\n                                            ScanQrCodeDescriptor &\n                                            MakePhoneCallDescriptor &\n                                            GetLocationDescriptor;\n\nexport interface WidgetMobileActionDescriptor extends WidgetMobileActionDescriptors {\n  type: WidgetMobileActionType;\n  handleErrorFunction?: string;\n  handleEmptyResultFunction?: string;\n}\n\nexport interface CustomActionDescriptor {\n  customFunction?: string;\n  customResources?: Array<WidgetResource>;\n  customHtml?: string;\n  customCss?: string;\n}\n\nexport interface WidgetActionDescriptor extends CustomActionDescriptor {\n  id: string;\n  name: string;\n  icon: string;\n  displayName?: string;\n  type: WidgetActionType;\n  targetDashboardId?: string;\n  targetDashboardStateId?: string;\n  openRightLayout?: boolean;\n  openNewBrowserTab?: boolean;\n  openInPopover?: boolean;\n  popoverHideDashboardToolbar?: boolean;\n  popoverPreferredPlacement?: PopoverPlacement;\n  popoverHideOnClickOutside?: boolean;\n  popoverWidth?: string;\n  popoverHeight?: string;\n  popoverStyle?: { [klass: string]: any };\n  openInSeparateDialog?: boolean;\n  dialogTitle?: string;\n  dialogHideDashboardToolbar?: boolean;\n  dialogWidth?: number;\n  dialogHeight?: number;\n  setEntityId?: boolean;\n  stateEntityParamName?: string;\n  mobileAction?: WidgetMobileActionDescriptor;\n  useShowWidgetActionFunction?: boolean;\n  showWidgetActionFunction?: string;\n}\n\nexport interface WidgetComparisonSettings {\n  comparisonEnabled?: boolean;\n  timeForComparison?: moment_.unitOfTime.DurationConstructor;\n  comparisonCustomIntervalValue?: number;\n}\n\nexport interface WidgetConfig {\n  title?: string;\n  titleIcon?: string;\n  showTitle?: boolean;\n  showTitleIcon?: boolean;\n  iconColor?: string;\n  iconSize?: string;\n  titleTooltip?: string;\n  dropShadow?: boolean;\n  enableFullscreen?: boolean;\n  useDashboardTimewindow?: boolean;\n  displayTimewindow?: boolean;\n  showLegend?: boolean;\n  legendConfig?: LegendConfig;\n  timewindow?: Timewindow;\n  mobileHide?: boolean;\n  mobileHeight?: number;\n  mobileOrder?: number;\n  color?: string;\n  backgroundColor?: string;\n  padding?: string;\n  margin?: string;\n  widgetStyle?: {[klass: string]: any};\n  titleStyle?: {[klass: string]: any};\n  units?: string;\n  decimals?: number;\n  noDataDisplayMessage?: string;\n  actions?: {[actionSourceId: string]: Array<WidgetActionDescriptor>};\n  settings?: any;\n  alarmSource?: Datasource;\n  alarmStatusList?: AlarmSearchStatus[];\n  alarmSeverityList?: AlarmSeverity[];\n  alarmTypeList?: string[];\n  searchPropagatedAlarms?: boolean;\n  datasources?: Array<Datasource>;\n  targetDeviceAliasIds?: Array<string>;\n  [key: string]: any;\n}\n\nexport interface Widget extends WidgetInfo{\n  typeId?: WidgetTypeId;\n  sizeX: number;\n  sizeY: number;\n  row: number;\n  col: number;\n  config: WidgetConfig;\n}\n\nexport interface WidgetInfo {\n  id?: string;\n  isSystemType: boolean;\n  bundleAlias: string;\n  typeAlias: string;\n  type: widgetType;\n  title: string;\n  image?: string;\n  description?: string;\n}\n\nexport interface GroupInfo {\n  formIndex: number;\n  GroupTitle: string;\n}\n\nexport interface JsonSchema {\n  type: string;\n  title?: string;\n  properties: {[key: string]: any};\n  required?: string[];\n}\n\nexport interface JsonSettingsSchema {\n  schema?: JsonSchema;\n  form?: any[];\n  groupInfoes?: GroupInfo[];\n}\n\nexport interface WidgetPosition {\n  row: number;\n  column: number;\n}\n\nexport interface WidgetSize {\n  sizeX: number;\n  sizeY: number;\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { AfterViewInit, Component, ElementRef, forwardRef, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ControlValueAccessor, FormBuilder, FormGroup, NG_VALUE_ACCESSOR, Validators } from '@angular/forms';\nimport { Observable, Subscription, throwError } from 'rxjs';\nimport { map, mergeMap, publishReplay, refCount, share } from 'rxjs/operators';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@app/core/core.state';\nimport { TranslateService } from '@ngx-translate/core';\nimport { EntitySubtype, EntityType } from '@shared/models/entity-type.models';\nimport { MatAutocomplete, MatAutocompleteSelectedEvent } from '@angular/material/autocomplete';\nimport { MatChipInputEvent, MatChipList } from '@angular/material/chips';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { AssetService } from '@core/http/asset.service';\nimport { DeviceService } from '@core/http/device.service';\nimport { EdgeService } from '@core/http/edge.service';\nimport { EntityViewService } from '@core/http/entity-view.service';\nimport { BroadcastService } from '@core/services/broadcast.service';\nimport { COMMA, ENTER, SEMICOLON } from '@angular/cdk/keycodes';\n\n@Component({\n  selector: 'tb-entity-subtype-list',\n  templateUrl: './entity-subtype-list.component.html',\n  styleUrls: ['./entity-subtype-list.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => EntitySubTypeListComponent),\n      multi: true\n    }\n  ]\n})\nexport class EntitySubTypeListComponent implements ControlValueAccessor, OnInit, AfterViewInit, OnDestroy {\n\n  entitySubtypeListFormGroup: FormGroup;\n\n  modelValue: Array<string> | null;\n\n  private requiredValue: boolean;\n  get required(): boolean {\n    return this.requiredValue;\n  }\n  @Input()\n  set required(value: boolean) {\n    const newVal = coerceBooleanProperty(value);\n    if (this.requiredValue !== newVal) {\n      this.requiredValue = newVal;\n      this.updateValidators();\n    }\n  }\n\n  @Input()\n  disabled: boolean;\n\n  @Input()\n  entityType: EntityType;\n\n  @ViewChild('entitySubtypeInput') entitySubtypeInput: ElementRef<HTMLInputElement>;\n  @ViewChild('entitySubtypeAutocomplete') entitySubtypeAutocomplete: MatAutocomplete;\n  @ViewChild('chipList', {static: true}) chipList: MatChipList;\n\n  entitySubtypeList: Array<string> = [];\n  filteredEntitySubtypeList: Observable<Array<string>>;\n  entitySubtypes: Observable<Array<string>>;\n\n  private broadcastSubscription: Subscription;\n\n  placeholder: string;\n  secondaryPlaceholder: string;\n  noSubtypesMathingText: string;\n  subtypeListEmptyText: string;\n\n  separatorKeysCodes: number[] = [ENTER, COMMA, SEMICOLON];\n\n  searchText = '';\n\n  private dirty = false;\n\n  private propagateChange = (v: any) => { };\n\n  constructor(private store: Store<AppState>,\n              private broadcast: BroadcastService,\n              public translate: TranslateService,\n              private assetService: AssetService,\n              private deviceService: DeviceService,\n              private edgeService: EdgeService,\n              private entityViewService: EntityViewService,\n              private fb: FormBuilder) {\n    this.entitySubtypeListFormGroup = this.fb.group({\n      entitySubtypeList: [this.entitySubtypeList, this.required ? [Validators.required] : []],\n      entitySubtype: [null]\n    });\n  }\n\n  updateValidators() {\n    this.entitySubtypeListFormGroup.get('entitySubtypeList').setValidators(this.required ? [Validators.required] : []);\n    this.entitySubtypeListFormGroup.get('entitySubtypeList').updateValueAndValidity();\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  ngOnInit() {\n\n    switch (this.entityType) {\n      case EntityType.ASSET:\n        this.placeholder = this.required ? this.translate.instant('asset.enter-asset-type')\n          : this.translate.instant('asset.any-asset');\n        this.secondaryPlaceholder = '+' + this.translate.instant('asset.asset-type');\n        this.noSubtypesMathingText = 'asset.no-asset-types-matching';\n        this.subtypeListEmptyText = 'asset.asset-type-list-empty';\n        this.broadcastSubscription = this.broadcast.on('assetSaved', () => {\n          this.entitySubtypes = null;\n        });\n        break;\n      case EntityType.DEVICE:\n        this.placeholder = this.required ? this.translate.instant('device.enter-device-type')\n          : this.translate.instant('device.any-device');\n        this.secondaryPlaceholder = '+' + this.translate.instant('device.device-type');\n        this.noSubtypesMathingText = 'device.no-device-types-matching';\n        this.subtypeListEmptyText = 'device.device-type-list-empty';\n        this.broadcastSubscription = this.broadcast.on('deviceSaved', () => {\n          this.entitySubtypes = null;\n        });\n        break;\n      case EntityType.EDGE:\n        this.placeholder = this.required ? this.translate.instant('edge.enter-edge-type')\n          : this.translate.instant('edge.any-edge');\n        this.secondaryPlaceholder = '+' + this.translate.instant('edge.edge-type');\n        this.noSubtypesMathingText = 'edge.no-edge-types-matching';\n        this.subtypeListEmptyText = 'edge.edge-type-list-empty';\n        this.broadcastSubscription = this.broadcast.on('edgeSaved', () => {\n          this.entitySubtypes = null;\n        });\n        break;\n      case EntityType.ENTITY_VIEW:\n        this.placeholder = this.required ? this.translate.instant('entity-view.enter-entity-view-type')\n          : this.translate.instant('entity-view.any-entity-view');\n        this.secondaryPlaceholder = '+' + this.translate.instant('entity-view.entity-view-type');\n        this.noSubtypesMathingText = 'entity-view.no-entity-view-types-matching';\n        this.subtypeListEmptyText = 'entity-view.entity-view-type-list-empty';\n        this.broadcastSubscription = this.broadcast.on('entityViewSaved', () => {\n          this.entitySubtypes = null;\n        });\n        break;\n    }\n\n    this.filteredEntitySubtypeList = this.entitySubtypeListFormGroup.get('entitySubtype').valueChanges\n      .pipe(\n        map(value => value ? value : ''),\n        mergeMap(name => this.fetchEntitySubtypes(name) ),\n        share()\n      );\n  }\n\n  ngAfterViewInit(): void {\n  }\n\n  ngOnDestroy(): void {\n    if (this.broadcastSubscription) {\n      this.broadcastSubscription.unsubscribe();\n    }\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    if (isDisabled) {\n      this.entitySubtypeListFormGroup.disable({emitEvent: false});\n    } else {\n      this.entitySubtypeListFormGroup.enable({emitEvent: false});\n    }\n  }\n\n  writeValue(value: Array<string> | null): void {\n    this.searchText = '';\n    if (value != null && value.length > 0) {\n      this.modelValue = [...value];\n      this.entitySubtypeList = [...value];\n      this.entitySubtypeListFormGroup.get('entitySubtypeList').setValue(this.entitySubtypeList);\n    } else {\n      this.entitySubtypeList = [];\n      this.entitySubtypeListFormGroup.get('entitySubtypeList').setValue(this.entitySubtypeList);\n      this.modelValue = null;\n    }\n    this.dirty = true;\n  }\n\n  private add(entitySubtype: string): void {\n    if (!this.modelValue || this.modelValue.indexOf(entitySubtype) === -1) {\n      if (!this.modelValue) {\n        this.modelValue = [];\n      }\n      this.modelValue.push(entitySubtype);\n      this.entitySubtypeList.push(entitySubtype);\n      this.entitySubtypeListFormGroup.get('entitySubtypeList').setValue(this.entitySubtypeList);\n    }\n    this.propagateChange(this.modelValue);\n  }\n\n  chipAdd(event: MatChipInputEvent): void {\n    const value = (event.value || '').trim();\n    if (value) {\n      this.add(value);\n    }\n    this.clear('');\n  }\n\n  remove(entitySubtype: string) {\n    const index = this.entitySubtypeList.indexOf(entitySubtype);\n    if (index >= 0) {\n      this.entitySubtypeList.splice(index, 1);\n      this.entitySubtypeListFormGroup.get('entitySubtypeList').setValue(this.entitySubtypeList);\n      this.modelValue.splice(index, 1);\n      if (!this.modelValue.length) {\n        this.modelValue = null;\n      }\n      this.propagateChange(this.modelValue);\n    }\n  }\n\n  selected(event: MatAutocompleteSelectedEvent): void {\n    this.add(event.option.viewValue);\n    this.clear('');\n  }\n\n  displayEntitySubtypeFn(entitySubtype?: string): string | undefined {\n    return entitySubtype ? entitySubtype : undefined;\n  }\n\n  fetchEntitySubtypes(searchText?: string): Observable<Array<string>> {\n    this.searchText = searchText;\n    return this.getEntitySubtypes().pipe(\n      map(subTypes => {\n        let result = subTypes.filter( subType => {\n          return searchText ? subType.toUpperCase().startsWith(searchText.toUpperCase()) : true;\n        });\n        if (!result.length) {\n          result = [searchText];\n        }\n        return result;\n      })\n    );\n  }\n\n  getEntitySubtypes(): Observable<Array<string>> {\n    if (!this.entitySubtypes) {\n      let subTypesObservable: Observable<Array<EntitySubtype>>;\n      switch (this.entityType) {\n        case EntityType.ASSET:\n          subTypesObservable = this.assetService.getAssetTypes({ignoreLoading: true});\n          break;\n        case EntityType.DEVICE:\n          subTypesObservable = this.deviceService.getDeviceTypes({ignoreLoading: true});\n          break;\n        case EntityType.EDGE:\n          subTypesObservable = this.edgeService.getEdgeTypes({ignoreLoading: true});\n          break;\n        case EntityType.ENTITY_VIEW:\n          subTypesObservable = this.entityViewService.getEntityViewTypes({ignoreLoading: true});\n          break;\n      }\n      if (subTypesObservable) {\n        this.entitySubtypes = subTypesObservable.pipe(\n          map(subTypes => subTypes.map(subType => subType.type)),\n          publishReplay(1),\n          refCount()\n        );\n      } else {\n        return throwError(null);\n      }\n    }\n    return this.entitySubtypes;\n  }\n\n  onFocus() {\n    if (this.dirty) {\n      this.entitySubtypeListFormGroup.get('entitySubtype').updateValueAndValidity({onlySelf: true, emitEvent: true});\n      this.dirty = false;\n    }\n  }\n\n  clear(value: string = '') {\n    this.entitySubtypeInput.nativeElement.value = value;\n    this.entitySubtypeListFormGroup.get('entitySubtype').patchValue(value, {emitEvent: true});\n    setTimeout(() => {\n      this.entitySubtypeInput.nativeElement.blur();\n      this.entitySubtypeInput.nativeElement.focus();\n    }, 0);\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<mat-form-field appearance=\"standard\" [formGroup]=\"entitySubtypeListFormGroup\" class=\"mat-block\">\n  <mat-chip-list #chipList formControlName=\"entitySubtypeList\">\n    <mat-chip\n      *ngFor=\"let entitySubtype of entitySubtypeList\"\n      [selectable]=\"!disabled\"\n      [removable]=\"!disabled\"\n      (removed)=\"remove(entitySubtype)\">\n      {{entitySubtype}}\n      <mat-icon matChipRemove *ngIf=\"!disabled\">close</mat-icon>\n    </mat-chip>\n    <input matInput type=\"text\" placeholder=\"{{ !disabled ? ((!entitySubtypeList || !entitySubtypeList.length) ? placeholder : secondaryPlaceholder) : '' }}\"\n           style=\"max-width: 200px;\"\n           #entitySubtypeInput\n           (focusin)=\"onFocus()\"\n           formControlName=\"entitySubtype\"\n           matAutocompleteOrigin\n           #origin=\"matAutocompleteOrigin\"\n           [matAutocompleteConnectedTo]=\"origin\"\n           [matAutocomplete]=\"entitySubtypeAutocomplete\"\n           [matChipInputFor]=\"chipList\"\n           [matChipInputSeparatorKeyCodes]=\"separatorKeysCodes\"\n           (matChipInputTokenEnd)=\"chipAdd($event)\">\n  </mat-chip-list>\n  <mat-autocomplete #entitySubtypeAutocomplete=\"matAutocomplete\"\n                    class=\"tb-autocomplete\"\n                    (optionSelected)=\"selected($event)\"\n                    [displayWith]=\"displayEntitySubtypeFn\">\n    <mat-option *ngFor=\"let entitySubtype of filteredEntitySubtypeList | async\" [value]=\"entitySubtype\">\n      <span [innerHTML]=\"entitySubtype | highlight:searchText\"></span>\n    </mat-option>\n    <mat-option *ngIf=\"!(filteredEntitySubtypeList | async)?.length\" [value]=\"null\">\n      <span>\n          {{ translate.get(noSubtypesMathingText, {entitySubtype: searchText}) | async }}\n      </span>\n    </mat-option>\n  </mat-autocomplete>\n  <mat-error *ngIf=\"entitySubtypeListFormGroup.get('entitySubtypeList').hasError('required')\">\n    {{ subtypeListEmptyText | translate }}\n  </mat-error>\n</mat-form-field>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { environment as env } from '@env/environment';\nimport { TranslateService } from '@ngx-translate/core';\nimport * as _moment from 'moment';\n\nexport function updateUserLang(translate: TranslateService, userLang: string) {\n  let targetLang = userLang;\n  if (!env.production) {\n    console.log(`User lang: ${targetLang}`);\n  }\n  if (!targetLang) {\n    targetLang = translate.getBrowserCultureLang();\n    if (!env.production) {\n      console.log(`Fallback to browser lang: ${targetLang}`);\n    }\n  }\n  const detectedSupportedLang = detectSupportedLang(targetLang);\n  if (!env.production) {\n    console.log(`Detected supported lang: ${detectedSupportedLang}`);\n  }\n  translate.use(detectedSupportedLang);\n  _moment.locale([detectedSupportedLang]);\n}\n\nfunction detectSupportedLang(targetLang: string): string {\n  const langTag = (targetLang || '').split('-').join('_');\n  if (langTag.length) {\n    if (env.supportedLangs.indexOf(langTag) > -1) {\n      return langTag;\n    } else {\n      const parts = langTag.split('_');\n      let lang;\n      if (parts.length === 2) {\n        lang = parts[0];\n      } else {\n        lang = langTag;\n      }\n      const foundLangs = env.supportedLangs.filter(\n        (supportedLang: string) => {\n          const supportedLangParts = supportedLang.split('_');\n          return supportedLangParts[0] === lang;\n        }\n      );\n      if (foundLangs.length) {\n        return foundLangs[0];\n      }\n    }\n  }\n  return env.defaultLang;\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component } from '@angular/core';\n\n@Component({\n  selector: 'tb-logo',\n  templateUrl: './logo.component.html',\n  styleUrls: ['./logo.component.scss']\n})\nexport class LogoComponent {\n\n  logo = 'assets/logo_title_white.png';\n\n  gotoThingsboard(): void {\n    window.open('https://chilunyc.com', '_blank');\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<img (click)=\"gotoThingsboard()\" fxFlex [src]=\"logo\"\n         aria-label=\"logo\" class=\"tb-logo-title\"/>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\nimport { defaultHttpOptionsFromConfig, RequestConfig } from './http-utils';\nimport { Observable } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\nimport { PageLink } from '@shared/models/page/page-link';\nimport { PageData } from '@shared/models/page/page-data';\nimport { EntitySubtype } from '@app/shared/models/entity-type.models';\nimport { Asset, AssetInfo, AssetSearchQuery } from '@app/shared/models/asset.models';\nimport { BulkImportRequest, BulkImportResult } from '@home/components/import-export/import-export.models';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AssetService {\n\n  constructor(\n    private http: HttpClient\n  ) { }\n\n  public getTenantAssetInfos(pageLink: PageLink, type: string = '', config?: RequestConfig): Observable<PageData<AssetInfo>> {\n    return this.http.get<PageData<AssetInfo>>(`/api/tenant/assetInfos${pageLink.toQuery()}&type=${type}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getCustomerAssetInfos(customerId: string, pageLink: PageLink, type: string = '',\n                               config?: RequestConfig): Observable<PageData<AssetInfo>> {\n    return this.http.get<PageData<AssetInfo>>(`/api/customer/${customerId}/assetInfos${pageLink.toQuery()}&type=${type}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getAsset(assetId: string, config?: RequestConfig): Observable<Asset> {\n    return this.http.get<Asset>(`/api/asset/${assetId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getAssets(assetIds: Array<string>, config?: RequestConfig): Observable<Array<Asset>> {\n    return this.http.get<Array<Asset>>(`/api/assets?assetIds=${assetIds.join(',')}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getAssetInfo(assetId: string, config?: RequestConfig): Observable<AssetInfo> {\n    return this.http.get<AssetInfo>(`/api/asset/info/${assetId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public saveAsset(asset: Asset, config?: RequestConfig): Observable<Asset> {\n    return this.http.post<Asset>('/api/asset', asset, defaultHttpOptionsFromConfig(config));\n  }\n\n  public deleteAsset(assetId: string, config?: RequestConfig) {\n    return this.http.delete(`/api/asset/${assetId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getAssetTypes(config?: RequestConfig): Observable<Array<EntitySubtype>> {\n    return this.http.get<Array<EntitySubtype>>('/api/asset/types', defaultHttpOptionsFromConfig(config));\n  }\n\n  public makeAssetPublic(assetId: string, config?: RequestConfig): Observable<Asset> {\n    return this.http.post<Asset>(`/api/customer/public/asset/${assetId}`, null, defaultHttpOptionsFromConfig(config));\n  }\n\n  public assignAssetToCustomer(customerId: string, assetId: string,\n                               config?: RequestConfig): Observable<Asset> {\n    return this.http.post<Asset>(`/api/customer/${customerId}/asset/${assetId}`, null, defaultHttpOptionsFromConfig(config));\n  }\n\n  public unassignAssetFromCustomer(assetId: string, config?: RequestConfig) {\n    return this.http.delete(`/api/customer/asset/${assetId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public findByQuery(query: AssetSearchQuery,\n                     config?: RequestConfig): Observable<Array<Asset>> {\n    return this.http.post<Array<Asset>>('/api/assets', query, defaultHttpOptionsFromConfig(config));\n  }\n\n  public findByName(assetName: string, config?: RequestConfig): Observable<Asset> {\n    return this.http.get<Asset>(`/api/tenant/assets?assetName=${assetName}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public assignAssetToEdge(edgeId: string, assetId: string, config?: RequestConfig): Observable<Asset> {\n    return this.http.post<Asset>(`/api/edge/${edgeId}/asset/${assetId}`, null,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public unassignAssetFromEdge(edgeId: string, assetId: string,\n                               config?: RequestConfig) {\n    return this.http.delete(`/api/edge/${edgeId}/asset/${assetId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getEdgeAssets(edgeId: string, pageLink: PageLink, type: string = '',\n                       config?: RequestConfig): Observable<PageData<AssetInfo>> {\n    return this.http.get<PageData<AssetInfo>>(`/api/edge/${edgeId}/assets${pageLink.toQuery()}&type=${type}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public bulkImportAssets(entitiesData: BulkImportRequest, config?: RequestConfig): Observable<BulkImportResult> {\n    return this.http.post<BulkImportResult>('/api/asset/bulk_import', entitiesData, defaultHttpOptionsFromConfig(config));\n  }\n\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { AfterViewInit, Directive, ElementRef, EventEmitter, HostListener, Output } from '@angular/core';\nimport { MatChip, MatChipList } from '@angular/material/chips';\nimport Timeout = NodeJS.Timeout;\n\nexport interface MatChipDropEvent {\n  from: number;\n  to: number;\n}\n\n@Directive({\n  selector: 'mat-chip-list[tb-chip-draggable]',\n})\nexport class MatChipDraggableDirective implements AfterViewInit {\n\n  @Output()\n  chipDrop = new EventEmitter<MatChipDropEvent>();\n\n  private draggableChips: Array<DraggableChip> = [];\n\n  constructor(private chipsList: MatChipList,\n              private elementRef: ElementRef<HTMLElement>) {\n  }\n\n  @HostListener('document:mouseup')\n  onDocumentMouseUp() {\n    this.draggableChips.forEach((draggableChip) => {\n      draggableChip.preventDrag = false;\n    });\n  }\n\n  ngAfterViewInit(): void {\n    this.configureDraggableChipList();\n    this.chipsList.chips.changes.subscribe(() => {\n      this.configureDraggableChipList();\n    });\n  }\n\n  private configureDraggableChipList() {\n    const toRemove: Array<DraggableChip> = [];\n    this.chipsList.chips.forEach((chip) => {\n        const found = this.draggableChips.find((draggableChip) => draggableChip.chip === chip);\n        if (!found) {\n          this.draggableChips.push(new DraggableChip(chip,\n            this.chipsList,\n            this.elementRef.nativeElement,\n            this.chipDrop));\n        }\n      }\n    );\n    this.draggableChips.forEach((draggableChip) => {\n      const found = this.chipsList.chips.find((chip) => chip === draggableChip.chip);\n      if (!found) {\n        toRemove.push(draggableChip);\n      }\n    });\n    toRemove.forEach((draggableChip) => {\n      const index = this.draggableChips.indexOf(draggableChip);\n      this.draggableChips.splice(index, 1);\n    });\n  }\n}\n\nconst draggingClassName = 'dragging';\nconst droppingClassName = 'dropping';\nconst droppingBeforeClassName = 'dropping-before';\nconst droppingAfterClassName = 'dropping-after';\n\nlet globalDraggingChipListId = null;\n\nclass DraggableChip {\n\n  private chipElement: HTMLElement;\n  private readonly handle: HTMLElement;\n\n  private dragging = false;\n  private counter = 0;\n\n  private dropPosition: 'after' | 'before';\n\n  private dropTimeout: Timeout;\n\n  public preventDrag = false;\n\n  private dropHandler = this.onDrop.bind(this);\n  private dragOverHandler = this.onDragOver.bind(this);\n\n  constructor(public chip: MatChip,\n              private chipsList: MatChipList,\n              private chipListElement: HTMLElement,\n              private chipDrop: EventEmitter<MatChipDropEvent>) {\n    this.chipElement = chip._elementRef.nativeElement;\n    this.chipElement.setAttribute('draggable', 'true');\n    this.handle = this.chipElement.getElementsByClassName('tb-chip-drag-handle')[0] as HTMLElement;\n    this.chipElement.addEventListener('mousedown', this.onMouseDown.bind(this));\n    this.chipElement.addEventListener('dragstart', this.onDragStart.bind(this));\n    this.chipElement.addEventListener('dragend', this.onDragEnd.bind(this));\n    this.chipElement.addEventListener('dragenter', this.onDragEnter.bind(this));\n    this.chipElement.addEventListener('dragleave', this.onDragLeave.bind(this));\n  }\n\n  private onMouseDown(event: MouseEvent) {\n    if (event.target !== this.handle) {\n      this.preventDrag = true;\n    }\n  }\n\n  private onDragStart(event: Event | any) {\n    if (this.preventDrag) {\n      event.preventDefault();\n    } else {\n      event.stopPropagation();\n      this.dragging = true;\n      globalDraggingChipListId = this.chipListElement.id;\n      this.chipListElement.classList.add(draggingClassName);\n      this.chipElement.classList.add(draggingClassName);\n      event = (event as any).originalEvent || event;\n      const dataTransfer = event.dataTransfer;\n      dataTransfer.effectAllowed = 'copyMove';\n      dataTransfer.dropEffect = 'move';\n      dataTransfer.setData('text', this.index() + '');\n    }\n  }\n\n  private onDragEnter(event: Event | any) {\n    this.counter++;\n    if (this.dragging) {\n      return;\n    }\n    this.chipElement.removeEventListener('dragover', this.dragOverHandler);\n    this.chipElement.removeEventListener('drop', this.dropHandler);\n\n    this.chipElement.addEventListener('dragover', this.dragOverHandler);\n    this.chipElement.addEventListener('drop', this.dropHandler);\n  }\n\n  private onDragLeave(event: Event | any) {\n    this.counter--;\n    if (this.counter <= 0) {\n      this.counter = 0;\n      this.chipElement.classList.remove(droppingClassName);\n      this.chipElement.classList.remove(droppingAfterClassName);\n      this.chipElement.classList.remove(droppingBeforeClassName);\n    }\n  }\n\n  private onDragEnd(event: Event | any) {\n    event.stopPropagation();\n    this.dragging = false;\n    globalDraggingChipListId = null;\n    this.chipListElement.classList.remove(draggingClassName);\n    this.chipElement.classList.remove(draggingClassName);\n  }\n\n  private onDragOver(event: Event | any) {\n    if (this.dragging) {\n      return;\n    }\n    event.preventDefault();\n    if (globalDraggingChipListId !== this.chipListElement.id) {\n      return;\n    }\n    const bounds = this.chipElement.getBoundingClientRect();\n    event = (event as any).originalEvent || event;\n    const props = {\n      width: bounds.right - bounds.left,\n      height: bounds.bottom - bounds.top,\n      x: event.clientX - bounds.left,\n      y: event.clientY - bounds.top,\n    };\n\n    const horizontalOffset = props.x;\n    const horizontalMidPoint = props.width / 2;\n\n    const verticalOffset = props.y;\n    const verticalMidPoint = props.height / 2;\n\n    this.chipElement.classList.add(droppingClassName);\n\n    this.chipElement.classList.remove(droppingAfterClassName);\n    this.chipElement.classList.remove(droppingBeforeClassName);\n\n    if (horizontalOffset >= horizontalMidPoint || verticalOffset >= verticalMidPoint) {\n      this.dropPosition = 'after';\n      this.chipElement.classList.add(droppingAfterClassName);\n    } else {\n      this.dropPosition = 'before';\n      this.chipElement.classList.add(droppingBeforeClassName);\n    }\n\n  }\n\n  private onDrop(event: Event | any) {\n    this.counter = 0;\n    event.preventDefault();\n    if (globalDraggingChipListId !== this.chipListElement.id) {\n      return;\n    }\n    event = (event as any).originalEvent || event;\n    const droppedItemIndex = parseInt(event.dataTransfer.getData('text'), 10);\n    const currentIndex = this.index();\n    let newIndex;\n    if (this.dropPosition === 'before') {\n      if (droppedItemIndex < currentIndex) {\n        newIndex = currentIndex - 1;\n      } else {\n        newIndex = currentIndex;\n      }\n    } else {\n      if (droppedItemIndex < currentIndex) {\n        newIndex = currentIndex;\n      } else {\n        newIndex = currentIndex + 1;\n      }\n    }\n    if (this.dropTimeout) {\n      clearTimeout(this.dropTimeout);\n    }\n    this.dropTimeout = setTimeout(() => {\n      this.dropPosition = null;\n\n      this.chipElement.classList.remove(droppingClassName);\n      this.chipElement.classList.remove(droppingAfterClassName);\n      this.chipElement.classList.remove(droppingBeforeClassName);\n\n      this.chipElement.removeEventListener('drop', this.dropHandler);\n\n      const dropEvent: MatChipDropEvent = {\n        from: droppedItemIndex,\n        to: newIndex\n      };\n      this.chipDrop.emit(dropEvent);\n    }, 1000 / 16);\n  }\n\n  private index(): number {\n    return this.chipsList.chips.toArray().indexOf(this.chip);\n  }\n\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\nimport { EMPTY, forkJoin, Observable, of, throwError } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\nimport { PageLink } from '@shared/models/page/page-link';\nimport { AliasEntityType, EntityType } from '@shared/models/entity-type.models';\nimport { BaseData, HasId } from '@shared/models/base-data';\nimport { EntityId } from '@shared/models/id/entity-id';\nimport { DeviceService } from '@core/http/device.service';\nimport { TenantService } from '@core/http/tenant.service';\nimport { CustomerService } from '@core/http/customer.service';\nimport { UserService } from './user.service';\nimport { DashboardService } from '@core/http/dashboard.service';\nimport { Direction } from '@shared/models/page/sort-order';\nimport { PageData } from '@shared/models/page/page-data';\nimport { getCurrentAuthState, getCurrentAuthUser } from '@core/auth/auth.selectors';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { Authority } from '@shared/models/authority.enum';\nimport { Tenant } from '@shared/models/tenant.model';\nimport { catchError, concatMap, expand, map, mergeMap, toArray } from 'rxjs/operators';\nimport { Customer } from '@app/shared/models/customer.model';\nimport { AssetService } from '@core/http/asset.service';\nimport { EntityViewService } from '@core/http/entity-view.service';\nimport { AttributeScope, DataKeyType } from '@shared/models/telemetry/telemetry.models';\nimport { defaultHttpOptionsFromConfig, RequestConfig } from '@core/http/http-utils';\nimport { RuleChainService } from '@core/http/rule-chain.service';\nimport { AliasInfo, StateParams, SubscriptionInfo } from '@core/api/widget-api.models';\nimport { DataKey, Datasource, DatasourceType, KeyInfo } from '@app/shared/models/widget.models';\nimport { UtilsService } from '@core/services/utils.service';\nimport {\n  AliasFilterType,\n  edgeAliasFilterTypes,\n  EntityAlias,\n  EntityAliasFilter,\n  EntityAliasFilterResult\n} from '@shared/models/alias.models';\nimport {\n  EdgeImportEntityData,\n  EntitiesKeysByQuery,\n  entityFields,\n  EntityInfo,\n  ImportEntitiesResultInfo,\n  ImportEntityData\n} from '@shared/models/entity.models';\nimport { EntityRelationService } from '@core/http/entity-relation.service';\nimport { deepClone, generateSecret, guid, isDefined, isDefinedAndNotNull, isNotEmptyStr } from '@core/utils';\nimport { Asset } from '@shared/models/asset.models';\nimport { Device, DeviceCredentialsType } from '@shared/models/device.models';\nimport { AttributeService } from '@core/http/attribute.service';\nimport {\n  AlarmData,\n  AlarmDataQuery,\n  createDefaultEntityDataPageLink,\n  defaultEntityDataPageLink,\n  EntityData,\n  EntityDataQuery,\n  entityDataToEntityInfo,\n  EntityFilter,\n  entityInfoFields,\n  EntityKey,\n  EntityKeyType,\n  EntityKeyValueType,\n  FilterPredicateType,\n  singleEntityDataPageLink,\n  StringOperation\n} from '@shared/models/query/query.models';\nimport { alarmFields } from '@shared/models/alarm.models';\nimport { OtaPackageService } from '@core/http/ota-package.service';\nimport { EdgeService } from '@core/http/edge.service';\nimport {\n  Edge,\n  EdgeEvent,\n  EdgeEventType,\n  bodyContentEdgeEventActionTypes\n} from '@shared/models/edge.models';\nimport { RuleChainMetaData, RuleChainType } from '@shared/models/rule-chain.models';\nimport { WidgetService } from '@core/http/widget.service';\nimport { DeviceProfileService } from '@core/http/device-profile.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EntityService {\n\n  constructor(\n    private http: HttpClient,\n    private store: Store<AppState>,\n    private deviceService: DeviceService,\n    private edgeService: EdgeService,\n    private assetService: AssetService,\n    private entityViewService: EntityViewService,\n    private tenantService: TenantService,\n    private customerService: CustomerService,\n    private userService: UserService,\n    private ruleChainService: RuleChainService,\n    private dashboardService: DashboardService,\n    private entityRelationService: EntityRelationService,\n    private attributeService: AttributeService,\n    private otaPackageService: OtaPackageService,\n    private widgetService: WidgetService,\n    private deviceProfileService: DeviceProfileService,\n    private utils: UtilsService\n  ) { }\n\n  private getEntityObservable(entityType: EntityType, entityId: string,\n                              config?: RequestConfig): Observable<BaseData<EntityId>> {\n\n    let observable: Observable<BaseData<EntityId>>;\n    switch (entityType) {\n      case EntityType.DEVICE:\n        observable = this.deviceService.getDevice(entityId, config);\n        break;\n      case EntityType.ASSET:\n        observable = this.assetService.getAsset(entityId, config);\n        break;\n      case EntityType.EDGE:\n        observable = this.edgeService.getEdge(entityId, config);\n        break;\n      case EntityType.ENTITY_VIEW:\n        observable = this.entityViewService.getEntityView(entityId, config);\n        break;\n      case EntityType.TENANT:\n        observable = this.tenantService.getTenant(entityId, config);\n        break;\n      case EntityType.CUSTOMER:\n        observable = this.customerService.getCustomer(entityId, config);\n        break;\n      case EntityType.DASHBOARD:\n        observable = this.dashboardService.getDashboardInfo(entityId, config);\n        break;\n      case EntityType.USER:\n        observable = this.userService.getUser(entityId, config);\n        break;\n      case EntityType.RULE_CHAIN:\n        observable = this.ruleChainService.getRuleChain(entityId, config);\n        break;\n      case EntityType.ALARM:\n        console.error('Get Alarm Entity is not implemented!');\n        break;\n      case EntityType.OTA_PACKAGE:\n        observable = this.otaPackageService.getOtaPackageInfo(entityId, config);\n        break;\n    }\n    return observable;\n  }\n  public getEntity(entityType: EntityType, entityId: string,\n                   config?: RequestConfig): Observable<BaseData<EntityId>> {\n    const entityObservable = this.getEntityObservable(entityType, entityId, config);\n    if (entityObservable) {\n      return entityObservable;\n    } else {\n      return throwError(null);\n    }\n  }\n\n  private getEntitiesByIdsObservable(fetchEntityFunction: (entityId: string) => Observable<BaseData<EntityId>>,\n                                     entityIds: Array<string>): Observable<Array<BaseData<EntityId>>> {\n    const tasks: Observable<BaseData<EntityId>>[] = [];\n    entityIds.forEach((entityId) => {\n      tasks.push(fetchEntityFunction(entityId));\n    });\n    return forkJoin(tasks).pipe(\n      map((entities) => {\n        if (entities) {\n          entities.sort((entity1, entity2) => {\n            const index1 = entityIds.indexOf(entity1.id.id);\n            const index2 = entityIds.indexOf(entity2.id.id);\n            return index1 - index2;\n          });\n          return entities;\n        } else {\n          return [];\n        }\n      })\n    );\n  }\n\n\n  private getEntitiesObservable(entityType: EntityType, entityIds: Array<string>,\n                                config?: RequestConfig): Observable<Array<BaseData<EntityId>>> {\n    let observable: Observable<Array<BaseData<EntityId>>>;\n    switch (entityType) {\n      case EntityType.DEVICE:\n        observable = this.deviceService.getDevices(entityIds, config);\n        break;\n      case EntityType.ASSET:\n        observable = this.assetService.getAssets(entityIds, config);\n        break;\n      case EntityType.EDGE:\n        observable = this.edgeService.getEdges(entityIds, config);\n        break;\n      case EntityType.ENTITY_VIEW:\n        observable = this.getEntitiesByIdsObservable(\n          (id) => this.entityViewService.getEntityView(id, config),\n          entityIds);\n        break;\n      case EntityType.TENANT:\n        observable = this.getEntitiesByIdsObservable(\n          (id) => this.tenantService.getTenant(id, config),\n          entityIds);\n        break;\n      case EntityType.CUSTOMER:\n        observable = this.getEntitiesByIdsObservable(\n          (id) => this.customerService.getCustomer(id, config),\n          entityIds);\n        break;\n      case EntityType.DASHBOARD:\n        observable = this.getEntitiesByIdsObservable(\n          (id) => this.dashboardService.getDashboardInfo(id, config),\n          entityIds);\n        break;\n      case EntityType.USER:\n        observable = this.getEntitiesByIdsObservable(\n          (id) => this.userService.getUser(id, config),\n          entityIds);\n        break;\n      case EntityType.ALARM:\n        console.error('Get Alarm Entity is not implemented!');\n        break;\n    }\n    return observable;\n  }\n\n  public getEntities(entityType: EntityType, entityIds: Array<string>,\n                     config?: RequestConfig): Observable<Array<BaseData<EntityId>>> {\n    const entitiesObservable = this.getEntitiesObservable(entityType, entityIds, config);\n    if (entitiesObservable) {\n      return entitiesObservable;\n    } else {\n      return throwError(null);\n    }\n  }\n\n  private getSingleTenantByPageLinkObservable(pageLink: PageLink,\n                                              config?: RequestConfig): Observable<PageData<Tenant>> {\n    const authUser = getCurrentAuthUser(this.store);\n    const tenantId = authUser.tenantId;\n    return this.tenantService.getTenant(tenantId, config).pipe(\n      map((tenant) => {\n        const result = {\n          data: [],\n          totalPages: 0,\n          totalElements: 0,\n          hasNext: false\n        } as PageData<Tenant>;\n        if (tenant.title.toLowerCase().startsWith(pageLink.textSearch.toLowerCase())) {\n          result.data.push(tenant);\n          result.totalPages = 1;\n          result.totalElements = 1;\n        }\n        return result;\n      })\n    );\n  }\n\n  private getSingleCustomerByPageLinkObservable(pageLink: PageLink,\n                                                config?: RequestConfig): Observable<PageData<Customer>> {\n    const authUser = getCurrentAuthUser(this.store);\n    const customerId = authUser.customerId;\n    return this.customerService.getCustomer(customerId, config).pipe(\n      map((customer) => {\n        const result = {\n          data: [],\n          totalPages: 0,\n          totalElements: 0,\n          hasNext: false\n        } as PageData<Customer>;\n        if (customer.title.toLowerCase().startsWith(pageLink.textSearch.toLowerCase())) {\n          result.data.push(customer);\n          result.totalPages = 1;\n          result.totalElements = 1;\n        }\n        return result;\n      })\n    );\n  }\n\n  private getEntitiesByPageLinkObservable(entityType: EntityType, pageLink: PageLink, subType: string = '',\n                                          config?: RequestConfig): Observable<PageData<BaseData<EntityId>>> {\n    let entitiesObservable: Observable<PageData<BaseData<EntityId>>>;\n    const authUser = getCurrentAuthUser(this.store);\n    const customerId = authUser.customerId;\n    switch (entityType) {\n      case EntityType.DEVICE:\n        pageLink.sortOrder.property = 'name';\n        if (authUser.authority === Authority.CUSTOMER_USER) {\n          entitiesObservable = this.deviceService.getCustomerDeviceInfos(customerId, pageLink, subType, config);\n        } else {\n          entitiesObservable = this.deviceService.getTenantDeviceInfos(pageLink, subType, config);\n        }\n        break;\n      case EntityType.ASSET:\n        pageLink.sortOrder.property = 'name';\n        if (authUser.authority === Authority.CUSTOMER_USER) {\n          entitiesObservable = this.assetService.getCustomerAssetInfos(customerId, pageLink, subType, config);\n        } else {\n          entitiesObservable = this.assetService.getTenantAssetInfos(pageLink, subType, config);\n        }\n        break;\n      case EntityType.EDGE:\n        pageLink.sortOrder.property = 'name';\n        if (authUser.authority === Authority.CUSTOMER_USER) {\n          entitiesObservable = this.edgeService.getCustomerEdgeInfos(customerId, pageLink, subType, config);\n        } else {\n          entitiesObservable = this.edgeService.getTenantEdgeInfos(pageLink, subType, config);\n        }\n        break;\n      case EntityType.ENTITY_VIEW:\n        pageLink.sortOrder.property = 'name';\n        if (authUser.authority === Authority.CUSTOMER_USER) {\n          entitiesObservable = this.entityViewService.getCustomerEntityViewInfos(customerId, pageLink,\n            subType, config);\n        } else {\n          entitiesObservable = this.entityViewService.getTenantEntityViewInfos(pageLink, subType, config);\n        }\n        break;\n      case EntityType.TENANT:\n        pageLink.sortOrder.property = 'title';\n        if (authUser.authority === Authority.TENANT_ADMIN) {\n          entitiesObservable = this.getSingleTenantByPageLinkObservable(pageLink, config);\n        } else {\n          entitiesObservable = this.tenantService.getTenants(pageLink, config);\n        }\n        break;\n      case EntityType.CUSTOMER:\n        pageLink.sortOrder.property = 'title';\n        if (authUser.authority === Authority.CUSTOMER_USER) {\n          entitiesObservable = this.getSingleCustomerByPageLinkObservable(pageLink, config);\n        } else {\n          entitiesObservable = this.customerService.getCustomers(pageLink, config);\n        }\n        break;\n      case EntityType.RULE_CHAIN:\n        pageLink.sortOrder.property = 'name';\n        if (RuleChainType[subType]) {\n          entitiesObservable = this.ruleChainService.getRuleChains(pageLink, subType as RuleChainType, config);\n        } else {\n          // safe fallback to default core type\n          entitiesObservable = this.ruleChainService.getRuleChains(pageLink, RuleChainType.CORE, config);\n        }\n        break;\n      case EntityType.DASHBOARD:\n        pageLink.sortOrder.property = 'title';\n        if (authUser.authority === Authority.CUSTOMER_USER) {\n          entitiesObservable = this.dashboardService.getCustomerDashboards(customerId, pageLink, config);\n        } else {\n          entitiesObservable = this.dashboardService.getTenantDashboards(pageLink, config);\n        }\n        break;\n      case EntityType.USER:\n        pageLink.sortOrder.property = 'email';\n        entitiesObservable = this.userService.getUsers(pageLink);\n        break;\n      case EntityType.ALARM:\n        console.error('Get Alarm Entities is not implemented!');\n        break;\n      case EntityType.OTA_PACKAGE:\n        pageLink.sortOrder.property = 'title';\n        entitiesObservable = this.otaPackageService.getOtaPackages(pageLink, config);\n        break;\n    }\n    return entitiesObservable;\n  }\n\n  private getEntitiesByPageLink(entityType: EntityType, pageLink: PageLink, subType: string = '',\n                                config?: RequestConfig): Observable<Array<BaseData<EntityId>>> {\n    const entitiesObservable: Observable<PageData<BaseData<EntityId>>> =\n      this.getEntitiesByPageLinkObservable(entityType, pageLink, subType, config);\n    if (entitiesObservable) {\n      return entitiesObservable.pipe(\n        expand((data) => {\n          if (data.hasNext) {\n            pageLink.page += 1;\n            return this.getEntitiesByPageLinkObservable(entityType, pageLink, subType, config);\n          } else {\n            return EMPTY;\n          }\n        }),\n        map((data) => data.data),\n        concatMap((data) => data),\n        toArray()\n      );\n    } else {\n      return of(null);\n    }\n  }\n\n  public getEntitiesByNameFilter(entityType: EntityType, entityNameFilter: string,\n                                 pageSize: number, subType: string = '',\n                                 config?: RequestConfig): Observable<Array<BaseData<EntityId>>> {\n    const pageLink = new PageLink(pageSize, 0, entityNameFilter, {\n      property: 'name',\n      direction: Direction.ASC\n    });\n    if (pageSize === -1) { // all\n      pageLink.pageSize = 100;\n      return this.getEntitiesByPageLink(entityType, pageLink, subType, config).pipe(\n        map((data) => data && data.length ? data : null)\n      );\n    } else {\n      const entitiesObservable: Observable<PageData<BaseData<EntityId>>> =\n        this.getEntitiesByPageLinkObservable(entityType, pageLink, subType, config);\n      if (entitiesObservable) {\n        return entitiesObservable.pipe(\n          map((data) => data && data.data.length ? data.data : null)\n        );\n      } else {\n        return of(null);\n      }\n    }\n  }\n\n  public findEntityDataByQuery(query: EntityDataQuery, config?: RequestConfig): Observable<PageData<EntityData>> {\n    return this.http.post<PageData<EntityData>>('/api/entitiesQuery/find', query, defaultHttpOptionsFromConfig(config));\n  }\n\n  public findEntityKeysByQuery(query: EntityDataQuery, attributes = true, timeseries = true,\n                               config?: RequestConfig): Observable<EntitiesKeysByQuery> {\n    return this.http.post<EntitiesKeysByQuery>(\n      `/api/entitiesQuery/find/keys?attributes=${attributes}&timeseries=${timeseries}`,\n      query, defaultHttpOptionsFromConfig(config));\n  }\n\n  public findAlarmDataByQuery(query: AlarmDataQuery, config?: RequestConfig): Observable<PageData<AlarmData>> {\n    return this.http.post<PageData<AlarmData>>('/api/alarmsQuery/find', query, defaultHttpOptionsFromConfig(config));\n  }\n\n  public findEntityInfosByFilterAndName(filter: EntityFilter,\n                                        searchText: string, config?: RequestConfig): Observable<PageData<EntityInfo>> {\n    const nameField: EntityKey = {\n      type: EntityKeyType.ENTITY_FIELD,\n      key: 'name'\n    };\n    const query: EntityDataQuery = {\n      entityFilter: filter,\n      pageLink: {\n        pageSize: 10,\n        page: 0,\n        sortOrder: {\n          key: nameField,\n          direction: Direction.ASC\n        }\n      },\n      entityFields: entityInfoFields,\n      keyFilters: searchText && searchText.length ? [\n        {\n          key: nameField,\n          valueType: EntityKeyValueType.STRING,\n          value: null,\n          predicate: {\n            type: FilterPredicateType.STRING,\n            operation: StringOperation.STARTS_WITH,\n            ignoreCase: true,\n            value: {\n              defaultValue: searchText\n            }\n          }\n        }\n      ] : null\n    };\n    return this.findEntityDataByQuery(query, config).pipe(\n      map((data) => {\n        const entityInfos = data.data.map(entityData => entityDataToEntityInfo(entityData));\n        return {\n          data: entityInfos,\n          hasNext: data.hasNext,\n          totalElements: data.totalElements,\n          totalPages: data.totalPages\n        };\n      })\n    );\n  }\n\n  public findSingleEntityInfoByEntityFilter(filter: EntityFilter, config?: RequestConfig): Observable<EntityInfo> {\n    const query: EntityDataQuery = {\n      entityFilter: filter,\n      pageLink: createDefaultEntityDataPageLink(1),\n      entityFields: entityInfoFields\n    };\n    return this.findEntityDataByQuery(query, config).pipe(\n      map((data) => {\n        if (data.data.length) {\n          const entityData = data.data[0];\n          return entityDataToEntityInfo(entityData);\n        } else {\n          return null;\n        }\n      })\n    );\n  }\n\n  public getAliasFilterTypesByEntityTypes(entityTypes: Array<EntityType | AliasEntityType>): Array<AliasFilterType> {\n    const authState = getCurrentAuthState(this.store);\n    let allAliasFilterTypes: Array<AliasFilterType> = Object.values(AliasFilterType);\n    if (!authState.edgesSupportEnabled) {\n      allAliasFilterTypes = allAliasFilterTypes.filter(aliasFilterType => !edgeAliasFilterTypes.includes(aliasFilterType));\n    }\n    if (!entityTypes || !entityTypes.length) {\n      return allAliasFilterTypes;\n    }\n    const result = [];\n    for (const aliasFilterType of allAliasFilterTypes) {\n      if (this.filterAliasFilterTypeByEntityTypes(aliasFilterType, entityTypes)) {\n        result.push(aliasFilterType);\n      }\n    }\n    return result;\n  }\n\n  public filterAliasByEntityTypes(entityAlias: EntityAlias, entityTypes: Array<EntityType | AliasEntityType>): boolean {\n    const filter = entityAlias.filter;\n    if (this.filterAliasFilterTypeByEntityTypes(filter.type, entityTypes)) {\n      switch (filter.type) {\n        case AliasFilterType.singleEntity:\n          return entityTypes.indexOf(filter.singleEntity.entityType) > -1 ? true : false;\n        case AliasFilterType.entityList:\n          return entityTypes.indexOf(filter.entityType) > -1 ? true : false;\n        case AliasFilterType.entityName:\n          return entityTypes.indexOf(filter.entityType) > -1 ? true : false;\n        case AliasFilterType.entityType:\n          return entityTypes.indexOf(filter.entityType) > -1 ? true : false;\n        case AliasFilterType.stateEntity:\n          return true;\n        case AliasFilterType.assetType:\n          return entityTypes.indexOf(EntityType.ASSET)  > -1 ? true : false;\n        case AliasFilterType.deviceType:\n          return entityTypes.indexOf(EntityType.DEVICE)  > -1 ? true : false;\n        case AliasFilterType.edgeType:\n          return entityTypes.indexOf(EntityType.EDGE) > -1 ? true : false;\n        case AliasFilterType.entityViewType:\n          return entityTypes.indexOf(EntityType.ENTITY_VIEW)  > -1 ? true : false;\n        case AliasFilterType.relationsQuery:\n          if (filter.filters && filter.filters.length) {\n            let match = false;\n            for (const relationFilter of filter.filters) {\n              if (relationFilter.entityTypes && relationFilter.entityTypes.length) {\n                for (const relationFilterEntityType of relationFilter.entityTypes) {\n                  if (entityTypes.indexOf(relationFilterEntityType) > -1) {\n                    match = true;\n                    break;\n                  }\n                }\n              } else {\n                match = true;\n                break;\n              }\n            }\n            return match;\n          } else {\n            return true;\n          }\n        case AliasFilterType.assetSearchQuery:\n          return entityTypes.indexOf(EntityType.ASSET)  > -1 ? true : false;\n        case AliasFilterType.deviceSearchQuery:\n          return entityTypes.indexOf(EntityType.DEVICE)  > -1 ? true : false;\n        case AliasFilterType.edgeSearchQuery:\n          return entityTypes.indexOf(EntityType.EDGE) > -1 ? true : false;\n        case AliasFilterType.entityViewSearchQuery:\n          return entityTypes.indexOf(EntityType.ENTITY_VIEW)  > -1 ? true : false;\n      }\n    }\n    return false;\n  }\n\n  private filterAliasFilterTypeByEntityTypes(aliasFilterType: AliasFilterType,\n                                             entityTypes: Array<EntityType | AliasEntityType>): boolean {\n    if (!entityTypes || !entityTypes.length) {\n      return true;\n    }\n    let valid = false;\n    entityTypes.forEach((entityType) => {\n      valid = valid || this.filterAliasFilterTypeByEntityType(aliasFilterType, entityType);\n    });\n    return valid;\n  }\n\n  private filterAliasFilterTypeByEntityType(aliasFilterType: AliasFilterType, entityType: EntityType | AliasEntityType): boolean {\n    switch (aliasFilterType) {\n      case AliasFilterType.singleEntity:\n        return true;\n      case AliasFilterType.entityList:\n        return true;\n      case AliasFilterType.entityName:\n        return true;\n      case AliasFilterType.entityType:\n        return true;\n      case AliasFilterType.stateEntity:\n        return true;\n      case AliasFilterType.assetType:\n        return entityType === EntityType.ASSET;\n      case AliasFilterType.deviceType:\n        return entityType === EntityType.DEVICE;\n      case AliasFilterType.edgeType:\n        return entityType === EntityType.EDGE;\n      case AliasFilterType.entityViewType:\n        return entityType === EntityType.ENTITY_VIEW;\n      case AliasFilterType.relationsQuery:\n        return true;\n      case AliasFilterType.apiUsageState:\n        return true;\n      case AliasFilterType.assetSearchQuery:\n        return entityType === EntityType.ASSET;\n      case AliasFilterType.deviceSearchQuery:\n        return entityType === EntityType.DEVICE;\n      case AliasFilterType.edgeSearchQuery:\n        return entityType === EntityType.EDGE;\n      case AliasFilterType.entityViewSearchQuery:\n        return entityType === EntityType.ENTITY_VIEW;\n    }\n    return false;\n  }\n\n  public prepareAllowedEntityTypesList(allowedEntityTypes: Array<EntityType | AliasEntityType>,\n                                       useAliasEntityTypes?: boolean): Array<EntityType | AliasEntityType> {\n    const authState = getCurrentAuthState(this.store);\n    const entityTypes: Array<EntityType | AliasEntityType> = [];\n    switch (authState.authUser.authority) {\n      case Authority.SYS_ADMIN:\n        entityTypes.push(EntityType.TENANT);\n        break;\n      case Authority.TENANT_ADMIN:\n        entityTypes.push(EntityType.DEVICE);\n        entityTypes.push(EntityType.ASSET);\n        entityTypes.push(EntityType.ENTITY_VIEW);\n        entityTypes.push(EntityType.TENANT);\n        entityTypes.push(EntityType.CUSTOMER);\n        entityTypes.push(EntityType.USER);\n        entityTypes.push(EntityType.DASHBOARD);\n        if (authState.edgesSupportEnabled) {\n          entityTypes.push(EntityType.EDGE);\n        }\n        if (useAliasEntityTypes) {\n          entityTypes.push(AliasEntityType.CURRENT_CUSTOMER);\n          entityTypes.push(AliasEntityType.CURRENT_TENANT);\n        }\n        break;\n      case Authority.CUSTOMER_USER:\n        entityTypes.push(EntityType.DEVICE);\n        entityTypes.push(EntityType.ASSET);\n        entityTypes.push(EntityType.ENTITY_VIEW);\n        entityTypes.push(EntityType.CUSTOMER);\n        entityTypes.push(EntityType.USER);\n        entityTypes.push(EntityType.DASHBOARD);\n        if (authState.edgesSupportEnabled) {\n          entityTypes.push(EntityType.EDGE);\n        }\n        if (useAliasEntityTypes) {\n          entityTypes.push(AliasEntityType.CURRENT_CUSTOMER);\n        }\n        break;\n    }\n    if (useAliasEntityTypes) {\n      entityTypes.push(AliasEntityType.CURRENT_USER);\n      if (authState.authUser.authority !== Authority.SYS_ADMIN) {\n        entityTypes.push(AliasEntityType.CURRENT_USER_OWNER);\n      }\n    }\n    if (allowedEntityTypes && allowedEntityTypes.length) {\n      for (let index = entityTypes.length - 1; index >= 0; index--) {\n        if (allowedEntityTypes.indexOf(entityTypes[index]) === -1) {\n          entityTypes.splice(index, 1);\n        }\n      }\n    }\n    return entityTypes;\n  }\n\n  private getEntityFieldKeys(entityType: EntityType, searchText: string = ''): Array<string> {\n    const entityFieldKeys: string[] = [entityFields.createdTime.keyName];\n    const query = searchText.toLowerCase();\n    switch (entityType) {\n      case EntityType.USER:\n        entityFieldKeys.push(entityFields.name.keyName);\n        entityFieldKeys.push(entityFields.email.keyName);\n        entityFieldKeys.push(entityFields.firstName.keyName);\n        entityFieldKeys.push(entityFields.lastName.keyName);\n        break;\n      case EntityType.TENANT:\n      case EntityType.CUSTOMER:\n        entityFieldKeys.push(entityFields.title.keyName);\n        entityFieldKeys.push(entityFields.email.keyName);\n        entityFieldKeys.push(entityFields.country.keyName);\n        entityFieldKeys.push(entityFields.state.keyName);\n        entityFieldKeys.push(entityFields.city.keyName);\n        entityFieldKeys.push(entityFields.address.keyName);\n        entityFieldKeys.push(entityFields.address2.keyName);\n        entityFieldKeys.push(entityFields.zip.keyName);\n        entityFieldKeys.push(entityFields.phone.keyName);\n        break;\n      case EntityType.ENTITY_VIEW:\n        entityFieldKeys.push(entityFields.name.keyName);\n        entityFieldKeys.push(entityFields.type.keyName);\n        break;\n      case EntityType.DEVICE:\n      case EntityType.EDGE:\n      case EntityType.ASSET:\n        entityFieldKeys.push(entityFields.name.keyName);\n        entityFieldKeys.push(entityFields.type.keyName);\n        entityFieldKeys.push(entityFields.label.keyName);\n        break;\n      case EntityType.DASHBOARD:\n        entityFieldKeys.push(entityFields.title.keyName);\n        break;\n      case EntityType.API_USAGE_STATE:\n        entityFieldKeys.push(entityFields.name.keyName);\n        break;\n    }\n    return query ? entityFieldKeys.filter((entityField) => entityField.toLowerCase().indexOf(query) === 0) : entityFieldKeys;\n  }\n\n  private getAlarmKeys(searchText: string = ''): Array<string> {\n    const alarmKeys: string[] = Object.keys(alarmFields);\n    const query = searchText.toLowerCase();\n    return query ? alarmKeys.filter((alarmField) => alarmField.toLowerCase().indexOf(query) === 0) : alarmKeys;\n  }\n\n  public getEntityKeys(entityId: EntityId, query: string, type: DataKeyType,\n                       config?: RequestConfig): Observable<Array<string>> {\n    if (type === DataKeyType.entityField) {\n      return of(this.getEntityFieldKeys(entityId.entityType as EntityType, query));\n    } else if (type === DataKeyType.alarm) {\n      return of(this.getAlarmKeys(query));\n    }\n    let url = `/api/plugins/telemetry/${entityId.entityType}/${entityId.id}/keys/`;\n    if (type === DataKeyType.timeseries) {\n      url += 'timeseries';\n    } else if (type === DataKeyType.attribute) {\n      url += 'attributes';\n    }\n    return this.http.get<Array<string>>(url,\n      defaultHttpOptionsFromConfig(config))\n      .pipe(\n        map(\n          (dataKeys) => {\n            if (query) {\n              const lowercaseQuery = query.toLowerCase();\n              return dataKeys.filter((dataKey) => dataKey.toLowerCase().indexOf(lowercaseQuery) === 0);\n            } else {\n              return dataKeys;\n            }\n           }\n        )\n    );\n  }\n\n  public getEntityKeysByEntityFilter(filter: EntityFilter, types: DataKeyType[], config?: RequestConfig): Observable<Array<DataKey>> {\n    if (!types.length) {\n      return of([]);\n    }\n    let entitiesKeysByQuery$: Observable<EntitiesKeysByQuery>;\n    if (filter !== null && types.some(type => [DataKeyType.timeseries, DataKeyType.attribute].includes(type))) {\n      const dataQuery = {\n        entityFilter: filter,\n        pageLink: createDefaultEntityDataPageLink(100),\n      };\n      entitiesKeysByQuery$ = this.findEntityKeysByQuery(dataQuery, types.includes(DataKeyType.attribute),\n        types.includes(DataKeyType.timeseries), config);\n    } else {\n      entitiesKeysByQuery$ = of({\n        attribute: [],\n        timeseries: [],\n        entityTypes: [],\n      });\n    }\n    return entitiesKeysByQuery$.pipe(\n      map((entitiesKeys) => {\n        const dataKeys: Array<DataKey> = [];\n        types.forEach(type => {\n          let keys: Array<string>;\n          switch (type) {\n            case DataKeyType.entityField:\n              if (entitiesKeys.entityTypes.length) {\n                const entitiesFields = [];\n                entitiesKeys.entityTypes.forEach(entityType => entitiesFields.push(...this.getEntityFieldKeys(entityType)));\n                keys = Array.from(new Set(entitiesFields));\n              }\n              break;\n            case DataKeyType.alarm:\n              keys = this.getAlarmKeys();\n              break;\n            case DataKeyType.attribute:\n            case DataKeyType.timeseries:\n              if (entitiesKeys[type].length) {\n                keys = entitiesKeys[type];\n              }\n              break;\n          }\n          if (keys) {\n            dataKeys.push(...keys.map(key => {\n              return {name: key, type};\n            }));\n          }\n        });\n        return dataKeys;\n      })\n    );\n  }\n\n  public createDatasourcesFromSubscriptionsInfo(subscriptionsInfo: Array<SubscriptionInfo>): Array<Datasource> {\n    const datasources = subscriptionsInfo.map(subscriptionInfo => this.createDatasourceFromSubscriptionInfo(subscriptionInfo));\n    this.utils.generateColors(datasources);\n    return datasources;\n  }\n\n  public createAlarmSourceFromSubscriptionInfo(subscriptionInfo: SubscriptionInfo): Datasource {\n    if (subscriptionInfo.entityId && subscriptionInfo.entityType) {\n      const alarmSource = this.createDatasourceFromSubscriptionInfo(subscriptionInfo);\n      this.utils.generateColors([alarmSource]);\n      return alarmSource;\n    } else {\n      throw new Error('Can\\'t crate alarm source without entityId information!');\n    }\n  }\n\n  public resolveAlias(entityAlias: EntityAlias, stateParams: StateParams): Observable<AliasInfo> {\n    const filter = entityAlias.filter;\n    return this.resolveAliasFilter(filter, stateParams).pipe(\n      mergeMap((result) => {\n        const aliasInfo: AliasInfo = {\n          alias: entityAlias.alias,\n          entityFilter: result.entityFilter,\n          stateEntity: result.stateEntity,\n          entityParamName: result.entityParamName,\n          resolveMultiple: filter.resolveMultiple\n        };\n        aliasInfo.currentEntity = null;\n        if (!aliasInfo.resolveMultiple && aliasInfo.entityFilter) {\n          return this.findSingleEntityInfoByEntityFilter(aliasInfo.entityFilter,\n            {ignoreLoading: true, ignoreErrors: true}).pipe(\n            map((entity) => {\n              aliasInfo.currentEntity = entity;\n              return aliasInfo;\n            })\n          );\n        }\n        return of(aliasInfo);\n      })\n    );\n  }\n\n  public resolveAliasFilter(filter: EntityAliasFilter, stateParams: StateParams): Observable<EntityAliasFilterResult> {\n    const result: EntityAliasFilterResult = {\n      entityFilter: null,\n      stateEntity: false\n    };\n    if (filter.stateEntityParamName && filter.stateEntityParamName.length) {\n      result.entityParamName = filter.stateEntityParamName;\n    }\n    const stateEntityInfo = this.getStateEntityInfo(filter, stateParams);\n    const stateEntityId = stateEntityInfo.entityId;\n    switch (filter.type) {\n      case AliasFilterType.singleEntity:\n        const aliasEntityId = this.resolveAliasEntityId(filter.singleEntity.entityType, filter.singleEntity.id);\n        result.entityFilter = {\n          type: AliasFilterType.singleEntity,\n          singleEntity: aliasEntityId\n        };\n        return of(result);\n      case AliasFilterType.entityList:\n        result.entityFilter = deepClone(filter);\n        return of(result);\n      case AliasFilterType.entityName:\n        result.entityFilter = deepClone(filter);\n        return of(result);\n      case AliasFilterType.entityType:\n        result.entityFilter = deepClone(filter);\n        return of(result);\n      case AliasFilterType.stateEntity:\n        result.stateEntity = true;\n        if (stateEntityId) {\n          result.entityFilter = {\n            type: AliasFilterType.singleEntity,\n            singleEntity: stateEntityId\n          };\n        }\n        return of(result);\n      case AliasFilterType.assetType:\n        result.entityFilter = deepClone(filter);\n        return of(result);\n      case AliasFilterType.deviceType:\n        result.entityFilter = deepClone(filter);\n        return of(result);\n      case AliasFilterType.entityViewType:\n        result.entityFilter = deepClone(filter);\n        return of(result);\n      case AliasFilterType.apiUsageState:\n        result.entityFilter = deepClone(filter);\n        return of(result);\n      case AliasFilterType.edgeType:\n        result.entityFilter = deepClone(filter);\n        return of(result);\n      case AliasFilterType.relationsQuery:\n        result.stateEntity = filter.rootStateEntity;\n        let rootEntityType;\n        let rootEntityId;\n        if (result.stateEntity && stateEntityId) {\n          rootEntityType = stateEntityId.entityType;\n          rootEntityId = stateEntityId.id;\n        } else if (!result.stateEntity) {\n          rootEntityType = filter.rootEntity.entityType;\n          rootEntityId = filter.rootEntity.id;\n        }\n        if (rootEntityType && rootEntityId) {\n          const relationQueryRootEntityId = this.resolveAliasEntityId(rootEntityType, rootEntityId);\n          result.entityFilter = deepClone(filter);\n          result.entityFilter.rootEntity = relationQueryRootEntityId;\n          return of(result);\n        } else {\n          return of(result);\n        }\n      case AliasFilterType.assetSearchQuery:\n      case AliasFilterType.deviceSearchQuery:\n      case AliasFilterType.edgeSearchQuery:\n      case AliasFilterType.entityViewSearchQuery:\n        result.stateEntity = filter.rootStateEntity;\n        if (result.stateEntity && stateEntityId) {\n          rootEntityType = stateEntityId.entityType;\n          rootEntityId = stateEntityId.id;\n        } else if (!result.stateEntity) {\n          rootEntityType = filter.rootEntity.entityType;\n          rootEntityId = filter.rootEntity.id;\n        }\n        if (rootEntityType && rootEntityId) {\n          const searchQueryRootEntityId = this.resolveAliasEntityId(rootEntityType, rootEntityId);\n          result.entityFilter = deepClone(filter);\n          result.entityFilter.rootEntity = searchQueryRootEntityId;\n          return of(result);\n        } else {\n          return of(result);\n        }\n    }\n  }\n\n  public checkEntityAlias(entityAlias: EntityAlias): Observable<boolean> {\n    return this.resolveAliasFilter(entityAlias.filter, null).pipe(\n      map((result) => {\n        if (result.stateEntity) {\n          return true;\n        } else {\n          return isDefinedAndNotNull(result.entityFilter);\n        }\n      }),\n      catchError(err => of(false))\n    );\n  }\n\n  public saveEntityParameters(entityType: EntityType, entityData: ImportEntityData, update: boolean,\n                              config?: RequestConfig): Observable<ImportEntitiesResultInfo> {\n    const saveEntityObservable: Observable<BaseData<EntityId>> = this.getSaveEntityObservable(entityType, entityData, config);\n    return saveEntityObservable.pipe(\n      mergeMap((entity) => {\n        return this.saveEntityData(entity.id, entityData, config).pipe(\n          map(() => {\n            return { create: { entity: 1 } } as ImportEntitiesResultInfo;\n          }),\n          catchError(err => of({\n            error: {\n              entity: 1,\n              errors: err.message\n            }\n          } as ImportEntitiesResultInfo))\n        );\n      }),\n      catchError(err => {\n        if (update) {\n          let findEntityObservable: Observable<BaseData<EntityId>>;\n          switch (entityType) {\n            case EntityType.DEVICE:\n              findEntityObservable = this.deviceService.findByName(entityData.name, config);\n              break;\n            case EntityType.ASSET:\n              findEntityObservable = this.assetService.findByName(entityData.name, config);\n              break;\n            case EntityType.EDGE:\n              findEntityObservable = this.edgeService.findByName(entityData.name, config);\n              break;\n          }\n          return findEntityObservable.pipe(\n            mergeMap((entity) => {\n              const updateEntityTasks: Observable<any>[] = this.getUpdateEntityTasks(entityType, entityData, entity, config);\n              return forkJoin(updateEntityTasks).pipe(\n                map(() => {\n                  return { update: { entity: 1 } } as ImportEntitiesResultInfo;\n                }),\n                catchError(updateError => of({\n                  error: {\n                    entity: 1,\n                    errors: updateError.message\n                  }\n                } as ImportEntitiesResultInfo))\n              );\n            }),\n            catchError(findErr => of({\n              error: {\n                entity: 1,\n                errors: `Line: ${entityData.lineNumber}; Error: ${findErr.error.message}`\n              }\n            } as ImportEntitiesResultInfo))\n          );\n        } else {\n          return of({\n            error: {\n              entity: 1,\n              errors: `Line: ${entityData.lineNumber}; Error: ${err.error.message}`\n            }\n          } as ImportEntitiesResultInfo);\n        }\n      })\n    );\n  }\n\n  private getSaveEntityObservable(entityType: EntityType, entityData: ImportEntityData,\n                                  config?: RequestConfig): Observable<BaseData<EntityId>> {\n    let saveEntityObservable: Observable<BaseData<EntityId>>;\n    switch (entityType) {\n      case EntityType.DEVICE:\n        const device: Device = {\n          name: entityData.name,\n          type: entityData.type,\n          label: entityData.label,\n          additionalInfo: {\n            description: entityData.description\n          }\n        };\n        if (entityData.gateway !== null) {\n          device.additionalInfo = {\n            ...device.additionalInfo,\n            gateway: entityData.gateway\n          };\n        }\n        saveEntityObservable = this.deviceService.saveDevice(device, config);\n        break;\n      case EntityType.ASSET:\n        const asset: Asset = {\n          name: entityData.name,\n          type: entityData.type,\n          label: entityData.label,\n          additionalInfo: {\n            description: entityData.description\n          }\n        };\n        saveEntityObservable = this.assetService.saveAsset(asset, config);\n        break;\n      case EntityType.EDGE:\n        const edgeEntityData: EdgeImportEntityData = entityData as EdgeImportEntityData;\n        const edge: Edge = {\n          name: edgeEntityData.name,\n          type: edgeEntityData.type,\n          label: edgeEntityData.label,\n          additionalInfo: {\n            description: edgeEntityData.description\n          },\n          edgeLicenseKey: edgeEntityData.edgeLicenseKey,\n          cloudEndpoint: edgeEntityData.cloudEndpoint !== '' ? edgeEntityData.cloudEndpoint : window.location.origin,\n          routingKey: edgeEntityData.routingKey !== '' ? edgeEntityData.routingKey : guid(),\n          secret: edgeEntityData.secret !== '' ? edgeEntityData.secret : generateSecret(20)\n        };\n        saveEntityObservable = this.edgeService.saveEdge(edge, config);\n        break;\n    }\n    return saveEntityObservable;\n  }\n\n  private getUpdateEntityTasks(entityType: EntityType,  entityData: ImportEntityData | EdgeImportEntityData,\n                               entity: BaseData<EntityId>, config?: RequestConfig): Observable<any>[] {\n    const tasks: Observable<any>[] = [];\n    let result;\n    let additionalInfo;\n    switch (entityType) {\n      case EntityType.ASSET:\n      case EntityType.DEVICE:\n        result = entity as (Device | Asset);\n        additionalInfo = result.additionalInfo || {};\n        if (result.label !== entityData.label ||\n          result.type !== entityData.type ||\n          additionalInfo.description !== entityData.description ||\n          (result.id.entityType === EntityType.DEVICE && (additionalInfo.gateway !== entityData.gateway)) ) {\n          result.label = entityData.label;\n          result.type = entityData.type;\n          result.additionalInfo = additionalInfo;\n          result.additionalInfo.description = entityData.description;\n          if (result.id.entityType === EntityType.DEVICE) {\n            result.additionalInfo.gateway = entityData.gateway;\n          }\n          switch (result.id.entityType) {\n            case EntityType.DEVICE:\n              tasks.push(this.deviceService.saveDevice(result, config));\n              break;\n            case EntityType.ASSET:\n              tasks.push(this.assetService.saveAsset(result, config));\n              break;\n          }\n        }\n        tasks.push(this.saveEntityData(entity.id, entityData, config));\n        break;\n      case EntityType.EDGE:\n        result = entity as Edge;\n        additionalInfo = result.additionalInfo || {};\n        const edgeEntityData: EdgeImportEntityData = entityData as EdgeImportEntityData;\n        if (result.label !== edgeEntityData.label ||\n          result.type !== edgeEntityData.type ||\n          (edgeEntityData.cloudEndpoint !== '' && result.cloudEndpoint !== edgeEntityData.cloudEndpoint) ||\n          (edgeEntityData.edgeLicenseKey !== '' && result.edgeLicenseKey !== edgeEntityData.edgeLicenseKey) ||\n          (edgeEntityData.routingKey !== '' && result.routingKey !== edgeEntityData.routingKey) ||\n          (edgeEntityData.secret !== '' && result.secret !== edgeEntityData.secret) ||\n          additionalInfo.description !== edgeEntityData.description) {\n          result.label = edgeEntityData.label;\n          result.type = edgeEntityData.type;\n          result.additionalInfo = additionalInfo;\n          result.additionalInfo.description = edgeEntityData.description;\n          if (edgeEntityData.cloudEndpoint !== '') {\n            result.cloudEndpoint = edgeEntityData.cloudEndpoint;\n          }\n          if (edgeEntityData.edgeLicenseKey !== '') {\n            result.edgeLicenseKey = edgeEntityData.edgeLicenseKey;\n          }\n          if (edgeEntityData.routingKey !== '') {\n            result.routingKey = edgeEntityData.routingKey;\n          }\n          if (edgeEntityData.secret !== '') {\n            result.secret = edgeEntityData.secret;\n          }\n          tasks.push(this.edgeService.saveEdge(result, config));\n        }\n        tasks.push(this.saveEntityData(entity.id, edgeEntityData, config));\n        break;\n    }\n    return tasks;\n  }\n\n  public saveEntityData(entityId: EntityId, entityData: ImportEntityData, config?: RequestConfig): Observable<any> {\n    const observables: Observable<string>[] = [];\n    let observable: Observable<string>;\n    if (Object.keys(entityData.credential).length) {\n      let credentialsType: DeviceCredentialsType;\n      let credentialsId: string = null;\n      let credentialsValue: string = null;\n      if (isDefinedAndNotNull(entityData.credential.mqtt)) {\n        credentialsType = DeviceCredentialsType.MQTT_BASIC;\n        credentialsValue = JSON.stringify(entityData.credential.mqtt);\n      } else if (isDefinedAndNotNull(entityData.credential.lwm2m)) {\n        credentialsType = DeviceCredentialsType.LWM2M_CREDENTIALS;\n        credentialsValue = JSON.stringify(entityData.credential.lwm2m);\n      } else if (isNotEmptyStr(entityData.credential.x509)) {\n        credentialsType = DeviceCredentialsType.X509_CERTIFICATE;\n        credentialsValue = entityData.credential.x509;\n      } else {\n        credentialsType = DeviceCredentialsType.ACCESS_TOKEN;\n        credentialsId = entityData.credential.accessToken;\n      }\n      observable = this.deviceService.getDeviceCredentials(entityId.id, false, config).pipe(\n        mergeMap((credentials) => {\n          credentials.credentialsId = credentialsId;\n          credentials.credentialsType = credentialsType;\n          credentials.credentialsValue = credentialsValue;\n          return this.deviceService.saveDeviceCredentials(credentials, config).pipe(\n            map(() => 'ok'),\n            catchError(err => of(`Line: ${entityData.lineNumber}; Error: ${err.error.message}`))\n          );\n        })\n      );\n      observables.push(observable);\n    }\n    if (entityData.attributes.shared && entityData.attributes.shared.length) {\n      observable = this.attributeService.saveEntityAttributes(entityId, AttributeScope.SHARED_SCOPE,\n        entityData.attributes.shared, config).pipe(\n        map(() => 'ok'),\n        catchError(err => of(`Line: ${entityData.lineNumber}; Error: ${err.error.message}`))\n      );\n      observables.push(observable);\n    }\n    if (entityData.attributes.server && entityData.attributes.server.length) {\n      observable = this.attributeService.saveEntityAttributes(entityId, AttributeScope.SERVER_SCOPE,\n        entityData.attributes.server, config).pipe(\n        map(() => 'ok'),\n        catchError(err => of(`Line: ${entityData.lineNumber}; Error: ${err.error.message}`))\n      );\n      observables.push(observable);\n    }\n    if (entityData.timeseries && entityData.timeseries.length) {\n      observable = this.attributeService.saveEntityTimeseries(entityId, 'time', entityData.timeseries, config).pipe(\n        map(() => 'ok'),\n        catchError(err => of(`Line: ${entityData.lineNumber}; Error: ${err.error.message}`))\n      );\n      observables.push(observable);\n    }\n    if (observables.length) {\n      return forkJoin(observables).pipe(\n        map((response) => {\n          const hasError = response.filter((status) => status !== 'ok');\n          if (hasError.length > 0) {\n            throw Error(hasError.join('\\n'));\n          } else {\n            return response;\n          }\n        })\n      );\n    } else {\n      return of(null);\n    }\n  }\n\n  private getStateEntityInfo(filter: EntityAliasFilter, stateParams: StateParams): {entityId: EntityId} {\n    let entityId: EntityId = null;\n    if (stateParams) {\n      if (filter.stateEntityParamName && filter.stateEntityParamName.length) {\n        if (stateParams[filter.stateEntityParamName]) {\n          entityId = stateParams[filter.stateEntityParamName].entityId;\n        }\n      } else {\n        entityId = stateParams.entityId;\n      }\n    }\n    if (!entityId) {\n      entityId = filter.defaultStateEntity;\n    }\n    if (entityId) {\n      entityId = this.resolveAliasEntityId(entityId.entityType, entityId.id);\n    }\n    return {entityId};\n  }\n\n  private resolveAliasEntityId(entityType: EntityType | AliasEntityType, id: string): EntityId {\n    const entityId: EntityId = {\n      entityType,\n      id\n    };\n    if (entityType === AliasEntityType.CURRENT_CUSTOMER) {\n      const authUser = getCurrentAuthUser(this.store);\n      entityId.entityType = EntityType.CUSTOMER;\n      if (authUser.authority === Authority.CUSTOMER_USER) {\n        entityId.id = authUser.customerId;\n      }\n    } else if (entityType === AliasEntityType.CURRENT_TENANT){\n      const authUser =  getCurrentAuthUser(this.store);\n      entityId.entityType = EntityType.TENANT;\n      entityId.id = authUser.tenantId;\n    } else if (entityType === AliasEntityType.CURRENT_USER){\n      const authUser =  getCurrentAuthUser(this.store);\n      entityId.entityType = EntityType.USER;\n      entityId.id = authUser.userId;\n    } else if (entityType === AliasEntityType.CURRENT_USER_OWNER){\n      const authUser =  getCurrentAuthUser(this.store);\n      if (authUser.authority === Authority.TENANT_ADMIN) {\n        entityId.entityType = EntityType.TENANT;\n        entityId.id = authUser.tenantId;\n      } else if (authUser.authority === Authority.CUSTOMER_USER) {\n        entityId.entityType = EntityType.CUSTOMER;\n        entityId.id = authUser.customerId;\n      }\n    }\n    return entityId;\n  }\n\n  private createDatasourceFromSubscriptionInfo(subscriptionInfo: SubscriptionInfo): Datasource {\n    subscriptionInfo = this.validateSubscriptionInfo(subscriptionInfo);\n    let datasource: Datasource = null;\n    if (subscriptionInfo.type === DatasourceType.entity) {\n      datasource = {\n        type: subscriptionInfo.type,\n        entityName: subscriptionInfo.entityName,\n        name: subscriptionInfo.entityName,\n        entityType: subscriptionInfo.entityType,\n        entityId: subscriptionInfo.entityId,\n        dataKeys: []\n      };\n      this.prepareEntityFilterFromSubscriptionInfo(datasource, subscriptionInfo);\n    } else if (subscriptionInfo.type === DatasourceType.function || subscriptionInfo.type === DatasourceType.entityCount) {\n      datasource = {\n        type: subscriptionInfo.type,\n        name: subscriptionInfo.name || subscriptionInfo.type,\n        dataKeys: []\n      };\n    }\n    if (datasource !== null) {\n      if (subscriptionInfo.timeseries) {\n        this.createDatasourceKeys(subscriptionInfo.timeseries, DataKeyType.timeseries, datasource);\n      }\n      if (subscriptionInfo.attributes) {\n        this.createDatasourceKeys(subscriptionInfo.attributes, DataKeyType.attribute, datasource);\n      }\n      if (subscriptionInfo.functions) {\n        this.createDatasourceKeys(subscriptionInfo.functions, DataKeyType.function, datasource);\n      }\n      if (subscriptionInfo.alarmFields) {\n        this.createDatasourceKeys(subscriptionInfo.alarmFields, DataKeyType.alarm, datasource);\n      }\n      if (subscriptionInfo.type === DatasourceType.entityCount) {\n        const dataKey = this.utils.createKey({ name: 'count'}, DataKeyType.count);\n        datasource.dataKeys.push(dataKey);\n      }\n    }\n    return datasource;\n  }\n\n  private validateSubscriptionInfo(subscriptionInfo: SubscriptionInfo): SubscriptionInfo {\n    // @ts-ignore\n    if (subscriptionInfo.type === 'device') {\n      subscriptionInfo.type = DatasourceType.entity;\n      subscriptionInfo.entityType = EntityType.DEVICE;\n      if (subscriptionInfo.deviceId) {\n        subscriptionInfo.entityId = subscriptionInfo.deviceId;\n      } else if (subscriptionInfo.deviceName) {\n        subscriptionInfo.entityName = subscriptionInfo.deviceName;\n      } else if (subscriptionInfo.deviceNamePrefix) {\n        subscriptionInfo.entityNamePrefix = subscriptionInfo.deviceNamePrefix;\n      } else if (subscriptionInfo.deviceIds) {\n        subscriptionInfo.entityIds = subscriptionInfo.deviceIds;\n      }\n    }\n    return subscriptionInfo;\n  }\n\n  private prepareEntityFilterFromSubscriptionInfo(datasource: Datasource, subscriptionInfo: SubscriptionInfo) {\n    if (subscriptionInfo.entityId) {\n      datasource.entityFilter = {\n        type: AliasFilterType.singleEntity,\n        singleEntity: {\n          entityType: subscriptionInfo.entityType,\n          id: subscriptionInfo.entityId\n        }\n      };\n      datasource.pageLink = singleEntityDataPageLink;\n    } else if (subscriptionInfo.entityName || subscriptionInfo.entityNamePrefix) {\n      let nameFilter;\n      let pageLink;\n      if (isDefined(subscriptionInfo.entityName) && subscriptionInfo.entityName.length) {\n        nameFilter = subscriptionInfo.entityName;\n        pageLink = deepClone(singleEntityDataPageLink);\n      } else {\n        nameFilter = subscriptionInfo.entityNamePrefix;\n        pageLink = deepClone(defaultEntityDataPageLink);\n      }\n      datasource.entityFilter = {\n        type: AliasFilterType.entityName,\n        entityType: subscriptionInfo.entityType,\n        entityNameFilter: nameFilter\n      };\n      datasource.pageLink = pageLink;\n    } else if (subscriptionInfo.entityIds) {\n      datasource.entityFilter = {\n        type: AliasFilterType.entityList,\n        entityType: subscriptionInfo.entityType,\n        entityList: subscriptionInfo.entityIds\n      };\n      datasource.pageLink = deepClone(defaultEntityDataPageLink);\n    }\n  }\n\n  private createDatasourceKeys(keyInfos: Array<KeyInfo>, type: DataKeyType, datasource: Datasource) {\n    keyInfos.forEach((keyInfo) => {\n      const dataKey = this.utils.createKey(keyInfo, type);\n      datasource.dataKeys.push(dataKey);\n    });\n  }\n\n  public getAssignedToEdgeEntitiesByType(edgeId: string, entityType: EntityType, pageLink: PageLink): Observable<PageData<any>> {\n    let entitiesObservable: Observable<PageData<any>>;\n    switch (entityType) {\n      case (EntityType.ASSET):\n        entitiesObservable = this.assetService.getEdgeAssets(edgeId, pageLink);\n        break;\n      case (EntityType.DEVICE):\n        entitiesObservable = this.deviceService.getEdgeDevices(edgeId, pageLink);\n        break;\n      case (EntityType.ENTITY_VIEW):\n        entitiesObservable = this.entityViewService.getEdgeEntityViews(edgeId, pageLink);\n        break;\n      case (EntityType.DASHBOARD):\n        entitiesObservable = this.dashboardService.getEdgeDashboards(edgeId, pageLink);\n        break;\n      case (EntityType.RULE_CHAIN):\n        entitiesObservable = this.ruleChainService.getEdgeRuleChains(edgeId, pageLink);\n        break;\n    }\n    return entitiesObservable;\n  }\n\n  public getEdgeEventContent(entity: EdgeEvent): Observable<BaseData<HasId> | RuleChainMetaData | string> {\n    let entityObservable: Observable<BaseData<HasId> | RuleChainMetaData | string>;\n    const entityId: string = entity.entityId;\n    const entityType: any = entity.type;\n    switch (entityType) {\n      case EdgeEventType.DASHBOARD:\n      case EdgeEventType.ALARM:\n      case EdgeEventType.RULE_CHAIN:\n      case EdgeEventType.EDGE:\n      case EdgeEventType.USER:\n      case EdgeEventType.CUSTOMER:\n      case EdgeEventType.TENANT:\n      case EdgeEventType.ASSET:\n      case EdgeEventType.DEVICE:\n      case EdgeEventType.ENTITY_VIEW:\n        if (bodyContentEdgeEventActionTypes.includes(entity.action)) {\n          entityObservable = of(entity.body);\n        } else {\n          entityObservable = this.getEntity(entityType, entityId, { ignoreLoading: true, ignoreErrors: true });\n        }\n        break;\n      case EdgeEventType.RULE_CHAIN_METADATA:\n        entityObservable = this.ruleChainService.getRuleChainMetadata(entityId);\n        break;\n      case EdgeEventType.WIDGET_TYPE:\n        entityObservable = this.widgetService.getWidgetTypeById(entityId);\n        break;\n      case EdgeEventType.WIDGETS_BUNDLE:\n        entityObservable = this.widgetService.getWidgetsBundle(entityId);\n        break;\n      case EdgeEventType.DEVICE_PROFILE:\n        entityObservable = this.deviceProfileService.getDeviceProfile(entityId);\n        break;\n      case EdgeEventType.RELATION:\n        entityObservable = of(entity.body);\n        break;\n    }\n    return entityObservable;\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { BaseData } from '@shared/models/base-data';\nimport { TenantId } from '@shared/models/id/tenant-id';\nimport { OtaPackageId } from '@shared/models/id/ota-package-id';\nimport { DeviceProfileId } from '@shared/models/id/device-profile-id';\n\nexport enum ChecksumAlgorithm {\n  MD5 = 'MD5',\n  SHA256 = 'SHA256',\n  SHA384 = 'SHA384',\n  SHA512 = 'SHA512',\n  CRC32 = 'CRC32',\n  MURMUR3_32 = 'MURMUR3_32',\n  MURMUR3_128 = 'MURMUR3_128'\n}\n\nexport const ChecksumAlgorithmTranslationMap = new Map<ChecksumAlgorithm, string>(\n  [\n    [ChecksumAlgorithm.MD5, 'MD5'],\n    [ChecksumAlgorithm.SHA256, 'SHA-256'],\n    [ChecksumAlgorithm.SHA384, 'SHA-384'],\n    [ChecksumAlgorithm.SHA512, 'SHA-512'],\n    [ChecksumAlgorithm.CRC32, 'CRC-32'],\n    [ChecksumAlgorithm.MURMUR3_32, 'MURMUR3-32'],\n    [ChecksumAlgorithm.MURMUR3_128, 'MURMUR3-128']\n  ]\n);\n\nexport enum OtaUpdateType {\n  FIRMWARE = 'FIRMWARE',\n  SOFTWARE = 'SOFTWARE'\n}\n\nexport const OtaUpdateTypeTranslationMap = new Map<OtaUpdateType, string>(\n  [\n    [OtaUpdateType.FIRMWARE, 'ota-update.types.firmware'],\n    [OtaUpdateType.SOFTWARE, 'ota-update.types.software']\n  ]\n);\n\nexport interface OtaUpdateTranslation {\n  label: string;\n  required: string;\n  noFound: string;\n  noMatching: string;\n  hint: string;\n}\n\nexport const OtaUpdateTranslation = new Map<OtaUpdateType, OtaUpdateTranslation>(\n  [\n    [OtaUpdateType.FIRMWARE, {\n      label: 'ota-update.assign-firmware',\n      required: 'ota-update.assign-firmware-required',\n      noFound: 'ota-update.no-firmware-text',\n      noMatching: 'ota-update.no-firmware-matching',\n      hint: 'ota-update.chose-firmware-distributed-device'\n    }],\n    [OtaUpdateType.SOFTWARE, {\n      label: 'ota-update.assign-software',\n      required: 'ota-update.assign-software-required',\n      noFound: 'ota-update.no-software-text',\n      noMatching: 'ota-update.no-software-matching',\n      hint: 'ota-update.chose-software-distributed-device'\n    }]\n  ]\n);\n\nexport interface OtaPagesIds {\n  firmwareId?: OtaPackageId;\n  softwareId?: OtaPackageId;\n}\n\nexport interface OtaPackageInfo extends BaseData<OtaPackageId> {\n  tenantId?: TenantId;\n  type: OtaUpdateType;\n  deviceProfileId?: DeviceProfileId;\n  title?: string;\n  version?: string;\n  tag?: string;\n  hasData?: boolean;\n  url?: string;\n  fileName: string;\n  checksum?: string;\n  checksumAlgorithm?: ChecksumAlgorithm;\n  contentType: string;\n  dataSize?: number;\n  additionalInfo?: any;\n  isURL?: boolean;\n}\n\nexport interface OtaPackage extends OtaPackageInfo {\n  file?: File;\n  data: string;\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { MarkedOptions, MarkedRenderer } from 'ngx-markdown';\nimport { Inject, Injectable } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { DOCUMENT } from '@angular/common';\nimport { WINDOW } from '@core/services/window.service';\nimport { Tokenizer } from 'marked';\nimport * as marked from 'marked';\nimport { Clipboard } from '@angular/cdk/clipboard';\n\nconst copyCodeBlock = '{:copy-code}';\nconst codeStyleRegex = '^{:code-style=\"(.*)\"}\\n';\nconst autoBlock = '{:auto}';\nconst targetBlankBlock = '{:target=&quot;_blank&quot;}';\n\n// @dynamic\n@Injectable({\n  providedIn: 'root'\n})\nexport class MarkedOptionsService extends MarkedOptions {\n\n  renderer = new MarkedRenderer();\n  headerIds = true;\n  gfm = true;\n  breaks = false;\n  pedantic = false;\n  smartLists = true;\n  smartypants = false;\n  mangle = false;\n\n  private renderer2 = new MarkedRenderer();\n\n  private id = 1;\n\n  constructor(private translate: TranslateService,\n              private clipboardService: Clipboard,\n              @Inject(WINDOW) private readonly window: Window,\n              @Inject(DOCUMENT) private readonly document: Document) {\n    super();\n    // @ts-ignore\n    const tokenizer: Tokenizer = {\n      autolink(src: string, mangle: (cap: string) => string): marked.Tokens.Link {\n        if (src.endsWith(copyCodeBlock)) {\n          return undefined;\n        } else {\n          // @ts-ignore\n          return false;\n        }\n      },\n      url(src: string, mangle: (cap: string) => string): marked.Tokens.Link {\n        if (src.endsWith(copyCodeBlock)) {\n          return undefined;\n        } else {\n          // @ts-ignore\n          return false;\n        }\n      }\n    };\n    marked.use({tokenizer});\n    this.renderer.code = (code: string, language: string | undefined, isEscaped: boolean) => {\n      const codeContext = processCode(code);\n      if (codeContext.copyCode) {\n        const content = postProcessCodeContent(this.renderer2.code(codeContext.code, language, isEscaped), codeContext);\n        this.id++;\n        return this.wrapCopyCode(this.id, content, codeContext);\n      } else {\n        return this.wrapDiv(postProcessCodeContent(this.renderer2.code(codeContext.code, language, isEscaped), codeContext));\n      }\n    };\n    this.renderer.table = (header: string, body: string) => {\n      let autoLayout = false;\n      if (header.includes(autoBlock)) {\n        autoLayout = true;\n        header = header.replace(autoBlock, '');\n      }\n      let table = this.renderer2.table(header, body);\n      if (autoLayout) {\n        table = table.replace('<table', '<table class=\"auto\"');\n      }\n      return table;\n    };\n    this.renderer.tablecell = (content: string, flags: {\n      header: boolean;\n      align: 'center' | 'left' | 'right' | null;\n    }) => {\n      const codeContext = processCode(content);\n      codeContext.multiline = false;\n      if (codeContext.copyCode) {\n        this.id++;\n        content = this.wrapCopyCode(this.id, codeContext.code, codeContext);\n      }\n      return this.renderer2.tablecell(content, flags);\n    };\n    this.renderer.link = (href: string | null, title: string | null, text: string) => {\n      if (text.endsWith(targetBlankBlock)) {\n        text = text.substring(0, text.length - targetBlankBlock.length);\n        const content = this.renderer2.link(href, title, text);\n        return content.replace('<a href=', '<a target=\"_blank\" href=');\n      } else {\n        return this.renderer2.link(href, title, text);\n      }\n    };\n    this.document.addEventListener('selectionchange', this.onSelectionChange.bind(this));\n    (this.window as any).markdownCopyCode = this.markdownCopyCode.bind(this);\n  }\n\n  private wrapDiv(content: string): string {\n    return `<div>${content}</div>`;\n  }\n\n  private wrapCopyCode(id: number, content: string, context: CodeContext): string {\n    let copyCodeButtonClass = 'clipboard-btn';\n    if (context.multiline) {\n      copyCodeButtonClass += ' multiline';\n    }\n    return `<div class=\"code-wrapper noChars\" id=\"codeWrapper${id}\" onClick=\"markdownCopyCode(${id})\">${content}` +\n      `<span id=\"copyCodeId${id}\" style=\"display: none;\">${encodeURIComponent(context.code)}</span>` +\n      `<button class=\"${copyCodeButtonClass}\">\\n` +\n      `    <p>${this.translate.instant('markdown.copy-code')}</p>\\n` +\n      `    <div>\\n` +\n      `       <img src=\"/assets/copy-code-icon.svg\" alt=\"${this.translate.instant('markdown.copy-code')}\">\\n` +\n      `    </div>\\n` +\n      `</button>` +\n      `</div>`;\n  }\n\n  private onSelectionChange() {\n    const codeWrappers = $('.code-wrapper');\n    codeWrappers.removeClass('noChars');\n    const selectedChars = this.getSelectedText();\n    if (!selectedChars) {\n      codeWrappers.addClass('noChars');\n    }\n  }\n\n  private getSelectedText(): string {\n    let text;\n    if (this.window.getSelection) {\n      text = this.window.getSelection().toString();\n    } else if (this.document.getSelection) {\n      text = this.document.getSelection();\n    } else if ((this.document as any).selection) {\n      text = (this.document as any).selection.createRange().text;\n    }\n    return text;\n  }\n\n  private markdownCopyCode(id: number) {\n    const copyWrapper = $('#codeWrapper' + id);\n    if (copyWrapper.hasClass('noChars')) {\n      const text = decodeURIComponent($('#copyCodeId' + id).text());\n      if (this.clipboardService.copy(text)) {\n        import('tooltipster').then(\n          () => {\n            if (!copyWrapper.hasClass('tooltipstered')) {\n              copyWrapper.tooltipster(\n                {\n                  content: this.translate.instant('markdown.copied'),\n//              theme: 'tooltipster-shadow',\n                  delay: 0,\n                  trigger: 'custom',\n                  triggerClose: {\n                    click: true,\n                    tap: true,\n                    scroll: true,\n                    mouseleave: true\n                  },\n                  side: 'top',\n                  distance: 12,\n                  trackOrigin: true\n                }\n              );\n            }\n            const tooltip = copyWrapper.tooltipster('instance');\n            tooltip.open();\n          });\n      }\n    }\n  }\n}\n\ninterface CodeContext {\n  copyCode: boolean;\n  multiline: boolean;\n  codeStyle?: string;\n  code: string;\n}\n\nfunction processCode(code: string): CodeContext {\n  const context: CodeContext = {\n    copyCode: false,\n    multiline: false,\n    code\n  };\n  if (context.code.endsWith(copyCodeBlock)) {\n    context.code = context.code.substring(0, context.code.length - copyCodeBlock.length);\n    context.copyCode = true;\n  }\n  const codeStyleMatch = context.code.match(new RegExp(codeStyleRegex));\n  if (codeStyleMatch) {\n    context.codeStyle = codeStyleMatch[1];\n    context.code = context.code.replace(new RegExp(codeStyleRegex), '');\n  }\n  const lineCount = context.code.trim().split('\\n').length;\n  context.multiline = lineCount > 1;\n  return context;\n}\n\nfunction postProcessCodeContent(content: string, context: CodeContext): string {\n  let replacement = '<pre ngNonBindable';\n  if (!context.multiline) {\n    replacement += ' class=\"no-line-numbers\"';\n  }\n  if (context.codeStyle) {\n    replacement += ` style=\"${context.codeStyle}\"`;\n  }\n  replacement += '>';\n  return content.replace('<pre>', replacement);\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { HomeComponent } from './home.component';\nimport { AuthGuard } from '@core/guards/auth.guard';\nimport { StoreModule } from '@ngrx/store';\n\nconst routes: Routes = [\n  { path: '',\n    component: HomeComponent,\n    data: {\n      title: 'home.home',\n      breadcrumb: {\n        skip: true\n      }\n    },\n    canActivate: [AuthGuard],\n    canActivateChild: [AuthGuard],\n    loadChildren: () => import('./pages/home-pages.module').then(m => m.HomePagesModule)\n  }\n];\n\n@NgModule({\n  imports: [\n    StoreModule,\n    RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class HomeRoutingModule { }\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\n\nimport { EntityType } from '@shared/models/entity-type.models';\nimport { AggregationType } from '../time/time.models';\nimport { Observable, ReplaySubject, Subject } from 'rxjs';\nimport { EntityId } from '@shared/models/id/entity-id';\nimport { map } from 'rxjs/operators';\nimport { NgZone } from '@angular/core';\nimport {\n  AlarmData,\n  AlarmDataQuery, EntityCountQuery,\n  EntityData,\n  EntityDataQuery,\n  EntityKey,\n  TsValue\n} from '@shared/models/query/query.models';\nimport { PageData } from '@shared/models/page/page-data';\nimport { alarmFields } from '@shared/models/alarm.models';\nimport { entityFields } from '@shared/models/entity.models';\nimport { isUndefined } from '@core/utils';\n\nexport enum DataKeyType {\n  timeseries = 'timeseries',\n  attribute = 'attribute',\n  function = 'function',\n  alarm = 'alarm',\n  entityField = 'entityField',\n  count = 'count'\n}\n\nexport enum LatestTelemetry {\n  LATEST_TELEMETRY = 'LATEST_TELEMETRY'\n}\n\nexport enum AttributeScope {\n  CLIENT_SCOPE = 'CLIENT_SCOPE',\n  SERVER_SCOPE = 'SERVER_SCOPE',\n  SHARED_SCOPE = 'SHARED_SCOPE'\n}\n\nexport enum TelemetryFeature {\n  ATTRIBUTES = 'ATTRIBUTES',\n  TIMESERIES = 'TIMESERIES'\n}\n\nexport type TelemetryType = LatestTelemetry | AttributeScope;\n\nexport function toTelemetryType(val: string): TelemetryType {\n  if (LatestTelemetry[val]) {\n    return LatestTelemetry[val];\n  } else {\n    return AttributeScope[val];\n  }\n}\n\nexport const telemetryTypeTranslations = new Map<TelemetryType, string>(\n  [\n    [LatestTelemetry.LATEST_TELEMETRY, 'attribute.scope-latest-telemetry'],\n    [AttributeScope.CLIENT_SCOPE, 'attribute.scope-client'],\n    [AttributeScope.SERVER_SCOPE, 'attribute.scope-server'],\n    [AttributeScope.SHARED_SCOPE, 'attribute.scope-shared']\n  ]\n);\n\nexport const isClientSideTelemetryType = new Map<TelemetryType, boolean>(\n  [\n    [LatestTelemetry.LATEST_TELEMETRY, true],\n    [AttributeScope.CLIENT_SCOPE, true],\n    [AttributeScope.SERVER_SCOPE, false],\n    [AttributeScope.SHARED_SCOPE, false]\n  ]\n);\n\nexport interface AttributeData {\n  lastUpdateTs?: number;\n  key: string;\n  value: any;\n}\n\nexport interface TimeseriesData {\n  [key: string]: Array<TsValue>;\n}\n\nexport enum DataSortOrder {\n  ASC = 'ASC',\n  DESC = 'DESC'\n}\n\nexport interface WebsocketCmd {\n  cmdId: number;\n}\n\nexport interface TelemetryPluginCmd extends WebsocketCmd {\n  keys: string;\n}\n\nexport abstract class SubscriptionCmd implements TelemetryPluginCmd {\n  cmdId: number;\n  keys: string;\n  entityType: EntityType;\n  entityId: string;\n  scope?: AttributeScope;\n  unsubscribe: boolean;\n  abstract getType(): TelemetryFeature;\n}\n\nexport class AttributesSubscriptionCmd extends SubscriptionCmd {\n  getType() {\n    return TelemetryFeature.ATTRIBUTES;\n  }\n}\n\nexport class TimeseriesSubscriptionCmd extends SubscriptionCmd {\n  startTs: number;\n  timeWindow: number;\n  interval: number;\n  limit: number;\n  agg: AggregationType;\n\n  getType() {\n    return TelemetryFeature.TIMESERIES;\n  }\n}\n\nexport class GetHistoryCmd implements TelemetryPluginCmd {\n  cmdId: number;\n  keys: string;\n  entityType: EntityType;\n  entityId: string;\n  startTs: number;\n  endTs: number;\n  interval: number;\n  limit: number;\n  agg: AggregationType;\n}\n\nexport interface EntityHistoryCmd {\n  keys: Array<string>;\n  startTs: number;\n  endTs: number;\n  interval: number;\n  limit: number;\n  agg: AggregationType;\n  fetchLatestPreviousPoint?: boolean;\n}\n\nexport interface LatestValueCmd {\n  keys: Array<EntityKey>;\n}\n\nexport interface TimeSeriesCmd {\n  keys: Array<string>;\n  startTs: number;\n  timeWindow: number;\n  interval: number;\n  limit: number;\n  agg: AggregationType;\n  fetchLatestPreviousPoint?: boolean;\n}\n\nexport class EntityDataCmd implements WebsocketCmd {\n  cmdId: number;\n  query?: EntityDataQuery;\n  historyCmd?: EntityHistoryCmd;\n  latestCmd?: LatestValueCmd;\n  tsCmd?: TimeSeriesCmd;\n\n  public isEmpty(): boolean {\n    return !this.query && !this.historyCmd && !this.latestCmd && !this.tsCmd;\n  }\n}\n\nexport class EntityCountCmd implements WebsocketCmd {\n  cmdId: number;\n  query?: EntityCountQuery;\n}\n\nexport class AlarmDataCmd implements WebsocketCmd {\n  cmdId: number;\n  query?: AlarmDataQuery;\n\n  public isEmpty(): boolean {\n    return !this.query;\n  }\n}\n\nexport class EntityDataUnsubscribeCmd implements WebsocketCmd {\n  cmdId: number;\n}\n\nexport class EntityCountUnsubscribeCmd implements WebsocketCmd {\n  cmdId: number;\n}\n\nexport class AlarmDataUnsubscribeCmd implements WebsocketCmd {\n  cmdId: number;\n}\n\nexport class TelemetryPluginCmdsWrapper {\n  attrSubCmds: Array<AttributesSubscriptionCmd>;\n  tsSubCmds: Array<TimeseriesSubscriptionCmd>;\n  historyCmds: Array<GetHistoryCmd>;\n  entityDataCmds: Array<EntityDataCmd>;\n  entityDataUnsubscribeCmds: Array<EntityDataUnsubscribeCmd>;\n  alarmDataCmds: Array<AlarmDataCmd>;\n  alarmDataUnsubscribeCmds: Array<AlarmDataUnsubscribeCmd>;\n  entityCountCmds: Array<EntityCountCmd>;\n  entityCountUnsubscribeCmds: Array<EntityCountUnsubscribeCmd>;\n\n  constructor() {\n    this.attrSubCmds = [];\n    this.tsSubCmds = [];\n    this.historyCmds = [];\n    this.entityDataCmds = [];\n    this.entityDataUnsubscribeCmds = [];\n    this.alarmDataCmds = [];\n    this.alarmDataUnsubscribeCmds = [];\n    this.entityCountCmds = [];\n    this.entityCountUnsubscribeCmds = [];\n  }\n\n  public hasCommands(): boolean {\n    return this.tsSubCmds.length > 0 ||\n      this.historyCmds.length > 0 ||\n      this.attrSubCmds.length > 0 ||\n      this.entityDataCmds.length > 0 ||\n      this.entityDataUnsubscribeCmds.length > 0 ||\n      this.alarmDataCmds.length > 0 ||\n      this.alarmDataUnsubscribeCmds.length > 0 ||\n      this.entityCountCmds.length > 0 ||\n      this.entityCountUnsubscribeCmds.length > 0;\n  }\n\n  public clear() {\n    this.attrSubCmds.length = 0;\n    this.tsSubCmds.length = 0;\n    this.historyCmds.length = 0;\n    this.entityDataCmds.length = 0;\n    this.entityDataUnsubscribeCmds.length = 0;\n    this.alarmDataCmds.length = 0;\n    this.alarmDataUnsubscribeCmds.length = 0;\n    this.entityCountCmds.length = 0;\n    this.entityCountUnsubscribeCmds.length = 0;\n  }\n\n  public preparePublishCommands(maxCommands: number): TelemetryPluginCmdsWrapper {\n    const preparedWrapper = new TelemetryPluginCmdsWrapper();\n    let leftCount = maxCommands;\n    preparedWrapper.tsSubCmds = this.popCmds(this.tsSubCmds, leftCount);\n    leftCount -= preparedWrapper.tsSubCmds.length;\n    preparedWrapper.historyCmds = this.popCmds(this.historyCmds, leftCount);\n    leftCount -= preparedWrapper.historyCmds.length;\n    preparedWrapper.attrSubCmds = this.popCmds(this.attrSubCmds, leftCount);\n    leftCount -= preparedWrapper.attrSubCmds.length;\n    preparedWrapper.entityDataCmds = this.popCmds(this.entityDataCmds, leftCount);\n    leftCount -= preparedWrapper.entityDataCmds.length;\n    preparedWrapper.entityDataUnsubscribeCmds = this.popCmds(this.entityDataUnsubscribeCmds, leftCount);\n    leftCount -= preparedWrapper.entityDataUnsubscribeCmds.length;\n    preparedWrapper.alarmDataCmds = this.popCmds(this.alarmDataCmds, leftCount);\n    leftCount -= preparedWrapper.alarmDataCmds.length;\n    preparedWrapper.alarmDataUnsubscribeCmds = this.popCmds(this.alarmDataUnsubscribeCmds, leftCount);\n    leftCount -= preparedWrapper.alarmDataUnsubscribeCmds.length;\n    preparedWrapper.entityCountCmds = this.popCmds(this.entityCountCmds, leftCount);\n    leftCount -= preparedWrapper.entityCountCmds.length;\n    preparedWrapper.entityCountUnsubscribeCmds = this.popCmds(this.entityCountUnsubscribeCmds, leftCount);\n    return preparedWrapper;\n  }\n\n  private popCmds<T>(cmds: Array<T>, leftCount: number): Array<T> {\n    const toPublish = Math.min(cmds.length, leftCount);\n    if (toPublish > 0) {\n      return cmds.splice(0, toPublish);\n    } else {\n      return [];\n    }\n  }\n}\n\nexport interface SubscriptionData {\n  [key: string]: [number, any][];\n}\n\nexport interface SubscriptionDataHolder {\n  data: SubscriptionData;\n}\n\nexport interface SubscriptionUpdateMsg extends SubscriptionDataHolder {\n  subscriptionId: number;\n  errorCode: number;\n  errorMsg: string;\n}\n\nexport enum CmdUpdateType {\n  ENTITY_DATA = 'ENTITY_DATA',\n  ALARM_DATA = 'ALARM_DATA',\n  COUNT_DATA = 'COUNT_DATA'\n}\n\nexport interface CmdUpdateMsg {\n  cmdId: number;\n  errorCode: number;\n  errorMsg: string;\n  cmdUpdateType: CmdUpdateType;\n}\n\nexport interface DataUpdateMsg<T> extends CmdUpdateMsg {\n  data?: PageData<T>;\n  update?: Array<T>;\n}\n\nexport interface EntityDataUpdateMsg extends DataUpdateMsg<EntityData> {\n  cmdUpdateType: CmdUpdateType.ENTITY_DATA;\n}\n\nexport interface AlarmDataUpdateMsg extends DataUpdateMsg<AlarmData> {\n  cmdUpdateType: CmdUpdateType.ALARM_DATA;\n  allowedEntities: number;\n  totalEntities: number;\n}\n\nexport interface EntityCountUpdateMsg extends CmdUpdateMsg {\n  cmdUpdateType: CmdUpdateType.COUNT_DATA;\n  count: number;\n}\n\nexport type WebsocketDataMsg = AlarmDataUpdateMsg | EntityDataUpdateMsg | EntityCountUpdateMsg | SubscriptionUpdateMsg;\n\nexport function isEntityDataUpdateMsg(message: WebsocketDataMsg): message is EntityDataUpdateMsg {\n  const updateMsg = (message as CmdUpdateMsg);\n  return updateMsg.cmdId !== undefined && updateMsg.cmdUpdateType === CmdUpdateType.ENTITY_DATA;\n}\n\nexport function isAlarmDataUpdateMsg(message: WebsocketDataMsg): message is AlarmDataUpdateMsg {\n  const updateMsg = (message as CmdUpdateMsg);\n  return updateMsg.cmdId !== undefined && updateMsg.cmdUpdateType === CmdUpdateType.ALARM_DATA;\n}\n\nexport function isEntityCountUpdateMsg(message: WebsocketDataMsg): message is EntityCountUpdateMsg {\n  const updateMsg = (message as CmdUpdateMsg);\n  return updateMsg.cmdId !== undefined && updateMsg.cmdUpdateType === CmdUpdateType.COUNT_DATA;\n}\n\nexport class SubscriptionUpdate implements SubscriptionUpdateMsg {\n  subscriptionId: number;\n  errorCode: number;\n  errorMsg: string;\n  data: SubscriptionData;\n\n  constructor(msg: SubscriptionUpdateMsg) {\n    this.subscriptionId = msg.subscriptionId;\n    this.errorCode = msg.errorCode;\n    this.errorMsg = msg.errorMsg;\n    this.data = msg.data;\n  }\n\n  public prepareData(keys: string[]) {\n    if (!this.data) {\n      this.data = {};\n    }\n    if (keys) {\n      keys.forEach((key) => {\n        if (!this.data[key]) {\n          this.data[key] = [];\n        }\n      });\n    }\n  }\n\n  public updateAttributeData(origData: Array<AttributeData>): Array<AttributeData> {\n    for (const key of Object.keys(this.data)) {\n      const keyData = this.data[key];\n      if (keyData.length) {\n        const existing = origData.find((data) => data.key === key);\n        if (existing) {\n          existing.lastUpdateTs = keyData[0][0];\n          existing.value = keyData[0][1];\n        } else {\n          origData.push(\n            {\n              key,\n              lastUpdateTs: keyData[0][0],\n              value: keyData[0][1]\n            }\n          );\n        }\n      }\n    }\n    return origData;\n  }\n}\n\nexport class CmdUpdate implements CmdUpdateMsg {\n  cmdId: number;\n  errorCode: number;\n  errorMsg: string;\n  cmdUpdateType: CmdUpdateType;\n\n  constructor(msg: CmdUpdateMsg) {\n    this.cmdId = msg.cmdId;\n    this.errorCode = msg.errorCode;\n    this.errorMsg = msg.errorMsg;\n    this.cmdUpdateType = msg.cmdUpdateType;\n  }\n}\n\nexport class DataUpdate<T> extends CmdUpdate implements DataUpdateMsg<T> {\n  data?: PageData<T>;\n  update?: Array<T>;\n\n  constructor(msg: DataUpdateMsg<T>) {\n    super(msg);\n    this.data = msg.data;\n    this.update = msg.update;\n  }\n}\n\nexport class EntityDataUpdate extends DataUpdate<EntityData> {\n  constructor(msg: EntityDataUpdateMsg) {\n    super(msg);\n  }\n\n  public prepareData(tsOffset: number) {\n    if (this.data) {\n      this.processEntityData(this.data.data, tsOffset);\n    }\n    if (this.update) {\n      this.processEntityData(this.update, tsOffset);\n    }\n  }\n\n  private processEntityData(data: Array<EntityData>, tsOffset: number) {\n    for (const entityData of data) {\n      if (entityData.timeseries) {\n        for (const key of Object.keys(entityData.timeseries)) {\n          const tsValues = entityData.timeseries[key];\n          for (const tsValue of tsValues) {\n            if (tsValue.ts) {\n              tsValue.ts += tsOffset;\n            }\n          }\n        }\n      }\n      if (entityData.latest) {\n        for (const entityKeyType of Object.keys(entityData.latest)) {\n          const keyTypeValues = entityData.latest[entityKeyType];\n          for (const key of Object.keys(keyTypeValues)) {\n            const tsValue = keyTypeValues[key];\n            if (tsValue.ts) {\n              tsValue.ts += tsOffset;\n            }\n            if (key === entityFields.createdTime.keyName && tsValue.value) {\n              tsValue.value = (Number(tsValue.value) + tsOffset) + '';\n            }\n          }\n        }\n      }\n    }\n  }\n}\n\nexport class AlarmDataUpdate extends DataUpdate<AlarmData> {\n  allowedEntities: number;\n  totalEntities: number;\n\n  constructor(msg: AlarmDataUpdateMsg) {\n    super(msg);\n    this.allowedEntities = msg.allowedEntities;\n    this.totalEntities = msg.totalEntities;\n  }\n\n  public prepareData(tsOffset: number) {\n    if (this.data) {\n      this.processAlarmData(this.data.data, tsOffset);\n    }\n    if (this.update) {\n      this.processAlarmData(this.update, tsOffset);\n    }\n  }\n\n  private processAlarmData(data: Array<AlarmData>, tsOffset: number) {\n    for (const alarmData of data) {\n      alarmData.createdTime += tsOffset;\n      if (alarmData.ackTs) {\n        alarmData.ackTs += tsOffset;\n      }\n      if (alarmData.clearTs) {\n        alarmData.clearTs += tsOffset;\n      }\n      if (alarmData.endTs) {\n        alarmData.endTs += tsOffset;\n      }\n      if (alarmData.latest) {\n        for (const entityKeyType of Object.keys(alarmData.latest)) {\n          const keyTypeValues = alarmData.latest[entityKeyType];\n          for (const key of Object.keys(keyTypeValues)) {\n            const tsValue = keyTypeValues[key];\n            if (tsValue.ts) {\n              tsValue.ts += tsOffset;\n            }\n            if (key in [entityFields.createdTime.keyName,\n                        alarmFields.startTime.keyName,\n                        alarmFields.endTime.keyName,\n                        alarmFields.ackTime.keyName,\n                        alarmFields.clearTime.keyName] && tsValue.value) {\n              tsValue.value = (Number(tsValue.value) + tsOffset) + '';\n            }\n          }\n        }\n      }\n    }\n  }\n}\n\nexport class EntityCountUpdate extends CmdUpdate {\n  count: number;\n\n  constructor(msg: EntityCountUpdateMsg) {\n    super(msg);\n    this.count = msg.count;\n  }\n}\n\nexport interface TelemetryService {\n  subscribe(subscriber: TelemetrySubscriber);\n  update(subscriber: TelemetrySubscriber);\n  unsubscribe(subscriber: TelemetrySubscriber);\n}\n\nexport class TelemetrySubscriber {\n\n  private dataSubject = new ReplaySubject<SubscriptionUpdate>(1);\n  private entityDataSubject = new ReplaySubject<EntityDataUpdate>(1);\n  private alarmDataSubject = new ReplaySubject<AlarmDataUpdate>(1);\n  private entityCountSubject = new ReplaySubject<EntityCountUpdate>(1);\n  private reconnectSubject = new Subject();\n\n  private tsOffset = undefined;\n\n  public subscriptionCommands: Array<WebsocketCmd>;\n\n  public data$ = this.dataSubject.asObservable();\n  public entityData$ = this.entityDataSubject.asObservable();\n  public alarmData$ = this.alarmDataSubject.asObservable();\n  public entityCount$ = this.entityCountSubject.asObservable();\n  public reconnect$ = this.reconnectSubject.asObservable();\n\n  public static createEntityAttributesSubscription(telemetryService: TelemetryService,\n                                                   entityId: EntityId, attributeScope: TelemetryType,\n                                                   zone: NgZone, keys: string[] = null): TelemetrySubscriber {\n    let subscriptionCommand: SubscriptionCmd;\n    if (attributeScope === LatestTelemetry.LATEST_TELEMETRY) {\n      subscriptionCommand = new TimeseriesSubscriptionCmd();\n    } else {\n      subscriptionCommand = new AttributesSubscriptionCmd();\n    }\n    subscriptionCommand.entityType = entityId.entityType as EntityType;\n    subscriptionCommand.entityId = entityId.id;\n    subscriptionCommand.scope = attributeScope as AttributeScope;\n    if (keys) {\n      subscriptionCommand.keys = keys.join(',');\n    }\n    const subscriber = new TelemetrySubscriber(telemetryService, zone);\n    subscriber.subscriptionCommands.push(subscriptionCommand);\n    return subscriber;\n  }\n\n  constructor(private telemetryService: TelemetryService, private zone?: NgZone) {\n    this.subscriptionCommands = [];\n  }\n\n  public subscribe() {\n    this.telemetryService.subscribe(this);\n  }\n\n  public update() {\n    this.telemetryService.update(this);\n  }\n\n  public unsubscribe() {\n    this.telemetryService.unsubscribe(this);\n    this.complete();\n  }\n\n  public complete() {\n    this.dataSubject.complete();\n    this.entityDataSubject.complete();\n    this.alarmDataSubject.complete();\n    this.entityCountSubject.complete();\n    this.reconnectSubject.complete();\n  }\n\n  public setTsOffset(tsOffset: number): boolean {\n    if (this.tsOffset !== tsOffset) {\n      const changed = !isUndefined(this.tsOffset);\n      this.tsOffset = tsOffset;\n      return changed;\n    } else {\n      return false;\n    }\n  }\n\n  public onData(message: SubscriptionUpdate) {\n    const cmdId = message.subscriptionId;\n    let keys: string[];\n    const cmd = this.subscriptionCommands.find((command) => command.cmdId === cmdId);\n    if (cmd) {\n      const telemetryPluginCmd = cmd as TelemetryPluginCmd;\n      if (telemetryPluginCmd.keys && telemetryPluginCmd.keys.length) {\n        keys = telemetryPluginCmd.keys.split(',');\n      }\n    }\n    message.prepareData(keys);\n    if (this.zone) {\n     this.zone.run(\n       () => {\n         this.dataSubject.next(message);\n       }\n     );\n    } else {\n      this.dataSubject.next(message);\n    }\n  }\n\n  public onEntityData(message: EntityDataUpdate) {\n    if (this.tsOffset) {\n      message.prepareData(this.tsOffset);\n    }\n    if (this.zone) {\n      this.zone.run(\n        () => {\n          this.entityDataSubject.next(message);\n        }\n      );\n    } else {\n      this.entityDataSubject.next(message);\n    }\n  }\n\n  public onAlarmData(message: AlarmDataUpdate) {\n    if (this.tsOffset) {\n      message.prepareData(this.tsOffset);\n    }\n    if (this.zone) {\n      this.zone.run(\n        () => {\n          this.alarmDataSubject.next(message);\n        }\n      );\n    } else {\n      this.alarmDataSubject.next(message);\n    }\n  }\n\n  public onEntityCount(message: EntityCountUpdate) {\n    if (this.zone) {\n      this.zone.run(\n        () => {\n          this.entityCountSubject.next(message);\n        }\n      );\n    } else {\n      this.entityCountSubject.next(message);\n    }\n  }\n\n  public onReconnected() {\n    this.reconnectSubject.next();\n  }\n\n  public attributeData$(): Observable<Array<AttributeData>> {\n    const attributeData = new Array<AttributeData>();\n    return this.data$.pipe(\n      map((message) => message.updateAttributeData(attributeData))\n    );\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { RuleNodeType } from '@shared/models/rule-node.models';\n\nexport enum ComponentType {\n  ENRICHMENT = 'ENRICHMENT',\n  FILTER = 'FILTER',\n  TRANSFORMATION = 'TRANSFORMATION',\n  ACTION = 'ACTION',\n  EXTERNAL = 'EXTERNAL'\n}\n\nexport enum ComponentScope {\n  SYSTEM = 'SYSTEM',\n  TENANT = 'TENANT'\n}\n\nexport interface ComponentDescriptor {\n  type: ComponentType | RuleNodeType;\n  scope?: ComponentScope;\n  name: string;\n  clazz: string;\n  configurationDescriptor?: any;\n  actions?: string;\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\nimport { TranslateParser } from '@ngx-translate/core';\nimport { isDefinedAndNotNull } from '@core/utils';\n\n@Injectable({ providedIn: 'root' })\nexport class TranslateDefaultParser extends TranslateParser {\n  templateMatcher: RegExp = /{{\\s?([^{}\\s]*)\\s?}}/g;\n\n  // tslint:disable-next-line:ban-types\n  public interpolate(expr: string | Function, params?: any): string {\n    let result: string;\n\n    if (typeof expr === 'string') {\n      result = this.interpolateString(expr, params);\n    } else if (typeof expr === 'function') {\n      result = this.interpolateFunction(expr, params);\n      if (typeof result === 'string') {\n        result = this.interpolateString(result, params);\n      }\n    } else {\n      result = expr as string;\n    }\n\n    return result;\n  }\n\n  getValue(target: any, key: string): any {\n    const keys = typeof key === 'string' ? key.split('.') : [key];\n    key = '';\n    do {\n      key += keys.shift();\n      if (isDefinedAndNotNull(target) && isDefinedAndNotNull(target[key]) && (typeof target[key] === 'object' || !keys.length)) {\n        target = target[key];\n        key = '';\n      } else if (!keys.length) {\n        target = undefined;\n      } else {\n        key += '.';\n      }\n    } while (keys.length);\n\n    return target;\n  }\n\n  // tslint:disable-next-line:ban-types\n  private interpolateFunction(fn: Function, params?: any) {\n    return fn(params);\n  }\n\n  private interpolateString(expr: string, params?: any) {\n    if (!params) {\n      return expr;\n    }\n\n    return expr.replace(this.templateMatcher, (substring: string, b: string) => {\n      const r = this.getValue(params, b);\n      return isDefinedAndNotNull(r) ? r : substring;\n    });\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { AfterViewInit, Component, ElementRef } from '@angular/core';\n\n@Component({\n  selector: 'tb-toggle-password',\n  templateUrl: 'toggle-password.component.html',\n  styleUrls: [],\n})\nexport class TogglePasswordComponent implements AfterViewInit {\n  showPassword = false;\n  hideToggle = false;\n\n  private input: HTMLInputElement = null;\n\n  constructor(private hostElement: ElementRef) { }\n\n  togglePassword($event: Event) {\n    $event.stopPropagation();\n    this.showPassword = !this.showPassword;\n    this.input.type = this.showPassword ? 'text' : 'password';\n  }\n\n  ngAfterViewInit() {\n    this.input = this.hostElement.nativeElement.closest('mat-form-field').querySelector('input[type=\"password\"]');\n    if (this.input === null) {\n      this.hideToggle = true;\n    }\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<button mat-icon-button type=\"button\" tabindex=\"-1\" (click)=\"togglePassword($event)\" [attr.aria-pressed]=\"showPassword\" *ngIf=\"!hideToggle\">\n  <mat-icon>{{ showPassword ? 'visibility' : 'visibility_off' }}</mat-icon>\n</button>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Directive, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { Hotkey } from 'angular2-hotkeys';\nimport 'mousetrap';\nimport { TbCheatSheetComponent } from '@shared/components/cheatsheet.component';\n\n@Directive({\n  selector : '[tb-hotkeys]'\n})\nexport class TbHotkeysDirective implements OnInit, OnDestroy {\n  @Input() hotkeys: Hotkey[] = [];\n  @Input() cheatSheet: TbCheatSheetComponent;\n\n  private mousetrap: MousetrapInstance;\n  private hotkeysList: Hotkey[] = [];\n\n  private preventIn = ['INPUT', 'SELECT', 'TEXTAREA'];\n\n  constructor(private elementRef: ElementRef) {\n    this.mousetrap = new Mousetrap(this.elementRef.nativeElement);\n    (this.elementRef.nativeElement as HTMLElement).tabIndex = -1;\n    (this.elementRef.nativeElement as HTMLElement).style.outline = '0';\n  }\n\n  ngOnInit() {\n    for (const hotkey of this.hotkeys) {\n      this.hotkeysList.push(hotkey);\n      this.bindEvent(hotkey);\n    }\n    if (this.cheatSheet) {\n      const hotkeyObj: Hotkey = new Hotkey(\n        '?',\n        (event: KeyboardEvent) => {\n          this.cheatSheet.toggleCheatSheet();\n          return false;\n        },\n        [],\n        'Show / hide this help menu',\n      );\n      this.hotkeysList.unshift(hotkeyObj);\n      this.bindEvent(hotkeyObj);\n      this.cheatSheet.setHotKeys(this.hotkeysList);\n    }\n  }\n\n  private bindEvent(hotkey: Hotkey): void {\n    this.mousetrap.bind((hotkey as Hotkey).combo, (event: KeyboardEvent, combo: string) => {\n      let shouldExecute = true;\n      if (event) {\n        const target: HTMLElement = (event.target || event.srcElement) as HTMLElement;\n        const nodeName: string = target.nodeName.toUpperCase();\n        if ((' ' + target.className + ' ').indexOf(' mousetrap ') > -1) {\n          shouldExecute = true;\n        } else if (this.preventIn.indexOf(nodeName) > -1 && (hotkey as Hotkey).\n                   allowIn.map(allow => allow.toUpperCase()).indexOf(nodeName) === -1) {\n          shouldExecute = false;\n        }\n      }\n\n      if (shouldExecute) {\n        return (hotkey as Hotkey).callback.apply(this, [event, combo]);\n      }\n    });\n  }\n\n  ngOnDestroy() {\n    for (const hotkey of this.hotkeysList) {\n      this.mousetrap.unbind(hotkey.combo);\n    }\n  }\n\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, ElementRef, EventEmitter, forwardRef, Input, OnInit, Output, ViewChild } from '@angular/core';\nimport { ControlValueAccessor, FormBuilder, FormGroup, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { ENTER } from '@angular/cdk/keycodes';\nimport { Observable, of } from 'rxjs';\nimport { filter, map, mergeMap, reduce, share, switchMap, tap } from 'rxjs/operators';\nimport { EntityService } from '@core/http/entity.service';\nimport { EntityType } from '@shared/models/entity-type.models';\nimport { Device } from '@shared/models/device.models';\nimport { DialogService } from '@core/services/dialog.service';\nimport { TranslateService } from '@ngx-translate/core';\nimport { DeviceService } from '@core/http/device.service';\nimport { getCurrentAuthUser } from '@core/auth/auth.selectors';\nimport { Authority } from '@shared/models/authority.enum';\n\n@Component({\n  selector: 'tb-entity-gateway-select',\n  templateUrl: './entity-gateway-select.component.html',\n  styleUrls: [],\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => EntityGatewaySelectComponent),\n    multi: true\n  }]\n})\n\nexport class EntityGatewaySelectComponent implements ControlValueAccessor, OnInit {\n  get required(): boolean {\n    return this.requiredValue;\n  }\n\n  @Input()\n  set required(value: boolean) {\n    this.requiredValue = coerceBooleanProperty(value);\n  }\n\n  @Input()\n  set newGatewayType(value: string){\n    this.gatewayType = value;\n  }\n\n  @Input()\n  deviceName: string;\n\n  @Input()\n  isStateForm: boolean;\n\n  @Output()\n  private gatewayNameExist = new EventEmitter();\n\n  constructor(private store: Store<AppState>,\n              private entityService: EntityService,\n              private dialogService: DialogService,\n              private deviceService: DeviceService,\n              private translate: TranslateService,\n              private fb: FormBuilder) {\n  }\n\n  private gatewayType = 'Gateway';\n  private dirty: boolean;\n  private requiredValue: boolean;\n  private gatewayList: Array<Device>;\n\n  searchText = '';\n  filteredGateways: Observable<Array<Device>>;\n  selectDeviceGatewayFormGroup: FormGroup;\n  modelValue: string | null;\n\n  @ViewChild('deviceGatewayInput', {static: true}) deviceGatewayInput: ElementRef<HTMLInputElement>;\n  private propagateChange = (v: any) => { };\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  ngOnInit() {\n    this.selectDeviceGatewayFormGroup = this.fb.group({\n      gateway: this.fb.control({value: null, disabled: this.isStateForm})\n    });\n    this.loadGatewayList();\n    this.filteredGateways = this.selectDeviceGatewayFormGroup.get('gateway').valueChanges\n      .pipe(\n        tap(value => {\n          let modelValue;\n          if (typeof value === 'string' || !value) {\n            modelValue = null;\n          } else {\n            modelValue = value.id.id;\n          }\n          this.updateView(modelValue);\n          if (value === null) {\n            this.clear();\n          }\n        }),\n        map(value => value ? (typeof value === 'string' ? value : value.name) : ''),\n        mergeMap(name => this.fetchGateway(name) ),\n        share()\n      );\n  }\n\n  fetchGateway(searchText?: string): Observable<Array<Device>> {\n    this.searchText = searchText;\n    let result = [];\n    if (searchText && searchText.length) {\n      result = this.gatewayList.filter((gateway) => gateway.name.toLowerCase().includes(searchText.toLowerCase()));\n    } else {\n      result = this.gatewayList;\n    }\n    return of(result);\n  }\n\n  onFocus() {\n    if (this.dirty) {\n      this.selectDeviceGatewayFormGroup.get('gateway').updateValueAndValidity({onlySelf: true, emitEvent: true});\n      this.dirty = false;\n    }\n  }\n\n  displayGatewayFn(gateway?: Device): string | undefined {\n    return gateway ? gateway.name : undefined;\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n  }\n\n  writeValue(value: string | null): void {\n    if(value === null){\n      this.searchText = '';\n      this.selectDeviceGatewayFormGroup.get('gateway').patchValue('', {emitEvent: false});\n      this.dirty = true;\n    }\n  }\n\n  clear(value: string = '', hideList?: boolean) {\n    this.searchText = value;\n    this.selectDeviceGatewayFormGroup.get('gateway').patchValue(value, {emitEvent: true});\n    if(!hideList) {\n      setTimeout(() => {\n        this.deviceGatewayInput.nativeElement.blur();\n        this.deviceGatewayInput.nativeElement.focus();\n      }, 0);\n    }\n  }\n\n  textIsNotEmpty(text: string): boolean {\n    return !!text && text.length > 0;\n  }\n\n  gatewayNameEnter($event: KeyboardEvent) {\n    if ($event.keyCode === ENTER) {\n      if (!this.modelValue) {\n        this.createGateway($event, this.searchText);\n      }\n    }\n  }\n\n  createGateway($event: Event, gatewayName: string) {\n    $event.preventDefault();\n    $event.stopPropagation();\n    const title = this.translate.instant('gateway.create-new-gateway');\n    const content = this.translate.instant('gateway.create-new-gateway-text', {gatewayName});\n    this.dialogService.confirm(title, content, null, null, true).subscribe(value => {\n      if(value){\n        this.createDeviceGateway(gatewayName);\n      } else {\n        this.clear('', true);\n      }\n    });\n  }\n\n  private createDeviceGateway(gatewayName: string){\n    this.deviceService.findByName(gatewayName, {ignoreErrors: true}).subscribe(value => {\n      this.gatewayNameExist.emit(gatewayName)\n    }, () => {\n      const newGateway: Device = {\n        name: gatewayName,\n        label: null,\n        type: this.gatewayType,\n        additionalInfo: {\n          gateway: true\n        }\n      };\n\n      this.deviceService.saveDevice(newGateway).subscribe(\n        (device) => {\n          this.searchText = '';\n          this.gatewayList.push(device);\n          this.selectDeviceGatewayFormGroup.get('gateway').patchValue(device, {emitEvent: true});\n        }\n      );\n    })\n  }\n\n  private loadGatewayList(): void {\n    let listObservable: Observable<any[]>;\n    if (getCurrentAuthUser(this.store).authority === Authority.SYS_ADMIN) {\n      listObservable = of([]);\n    } else {\n      const entityNameFilter = this.isStateForm && this.deviceName ? this.deviceName : '';\n      listObservable = this.entityService.getEntitiesByNameFilter(EntityType.DEVICE, entityNameFilter,\n        -1, '', {ignoreLoading: true});\n    }\n    listObservable.pipe(\n      map((devices) => devices ? devices.filter((device) =>\n        (device as Device)?.additionalInfo?.gateway): []),\n    ).subscribe((devices) => {\n      this.gatewayList = devices;\n      if (!this.searchText) {\n        if (this.gatewayList.length) {\n          let foundGateway: Device = null;\n          if (this.deviceName) {\n            foundGateway = this.gatewayList.find((gateway) => gateway.name === this.deviceName);\n          }\n          if (!foundGateway) {\n            foundGateway = this.gatewayList[0];\n          }\n          if (foundGateway) {\n            this.selectDeviceGatewayFormGroup.get('gateway').patchValue(foundGateway, {emitEvent: true});\n          }\n        }\n      }\n    })\n  }\n\n  private updateView(modelValue: any) {\n    this.propagateChange(modelValue);\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<mat-form-field [formGroup]=\"selectDeviceGatewayFormGroup\" class=\"mat-block\">\n  <input matInput type=\"text\" #deviceGatewayInput placeholder=\"{{ 'gateway.gateway-name' | translate }}\"\n         formControlName=\"gateway\"\n         (focusin)=\"onFocus()\"\n         [required]=\"required\"\n         (keydown)=\"gatewayNameEnter($event)\"\n         (keypress)=\"gatewayNameEnter($event)\"\n         [matAutocomplete]=\"gatewayAutocomplete\"\n  >\n  <button *ngIf=\"selectDeviceGatewayFormGroup.get('gateway').value && !isStateForm\" (click)=\"clear()\"\n          type=\"button\" matSuffix mat-icon-button aria-label=\"Clear\">\n    <mat-icon class=\"material-icons\">close</mat-icon>\n  </button>\n  <mat-autocomplete class=\"tb-autocomplete\"\n                    #gatewayAutocomplete=\"matAutocomplete\"\n                    [displayWith]=\"displayGatewayFn\">\n    <mat-option *ngFor=\"let gateway of filteredGateways | async\" [value]=\"gateway\">\n      <span [innerHTML]=\"gateway.name | highlight:searchText\"></span>\n    </mat-option>\n    <mat-option *ngIf=\"!(filteredGateways | async)?.length\" [value]=\"null\" class=\"tb-not-found\">\n      <div class=\"tb-not-found-content\" (click)=\"$event.stopPropagation()\">\n        <div *ngIf=\"!textIsNotEmpty(searchText); else searchNotEmpty\">\n          <span translate>gateway.no-gateway-found</span>\n        </div>\n        <ng-template #searchNotEmpty>\n          <span translate [translateParams]=\"{item: searchText | truncate:true:6:&apos;...&apos;}\">\n            gateway.no-gateway-matching\n          </span>\n        </ng-template>\n        <span>\n          <a translate (click)=\"createGateway($event, searchText)\">gateway.create-new-gateway</a>\n        </span>\n      </div>\n    </mat-option>\n  </mat-autocomplete>\n  <mat-error *ngIf=\"selectDeviceGatewayFormGroup.get('gateway').hasError('required')\">\n    {{ 'gateway.gateway-name-required' | translate }}\n  </mat-error>\n</mat-form-field>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { AfterViewInit, Component, forwardRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { ControlValueAccessor, FormBuilder, FormGroup, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { Observable, Subject, Subscription, throwError } from 'rxjs';\nimport { map, mergeMap, publishReplay, refCount, startWith, tap } from 'rxjs/operators';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@app/core/core.state';\nimport { TranslateService } from '@ngx-translate/core';\nimport { DeviceService } from '@core/http/device.service';\nimport { EntitySubtype, EntityType } from '@app/shared/models/entity-type.models';\nimport { BroadcastService } from '@app/core/services/broadcast.service';\nimport { AssetService } from '@core/http/asset.service';\nimport { EdgeService } from '@core/http/edge.service';\nimport { EntityViewService } from '@core/http/entity-view.service';\n\n@Component({\n  selector: 'tb-entity-subtype-select',\n  templateUrl: './entity-subtype-select.component.html',\n  styleUrls: ['./entity-subtype-select.component.scss'],\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => EntitySubTypeSelectComponent),\n    multi: true\n  }]\n})\nexport class EntitySubTypeSelectComponent implements ControlValueAccessor, OnInit, AfterViewInit, OnDestroy {\n\n  subTypeFormGroup: FormGroup;\n\n  modelValue: string | null = '';\n\n  @Input()\n  entityType: EntityType;\n\n  @Input()\n  showLabel: boolean;\n\n  @Input()\n  required: boolean;\n\n  @Input()\n  disabled: boolean;\n\n  @Input()\n  typeTranslatePrefix: string;\n\n  entitySubtypeTitle: string;\n  entitySubtypeRequiredText: string;\n\n  subTypesOptions: Observable<Array<EntitySubtype | string>>;\n\n  private subTypesOptionsSubject: Subject<string> = new Subject();\n\n  subTypes: Observable<Array<EntitySubtype | string>>;\n\n  subTypesLoaded = false;\n\n  private broadcastSubscription: Subscription;\n\n  private propagateChange = (v: any) => { };\n\n  constructor(private store: Store<AppState>,\n              private broadcast: BroadcastService,\n              public translate: TranslateService,\n              private deviceService: DeviceService,\n              private assetService: AssetService,\n              private edgeService: EdgeService,\n              private entityViewService: EntityViewService,\n              private fb: FormBuilder) {\n    this.subTypeFormGroup = this.fb.group({\n      subType: ['']\n    });\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  ngOnInit() {\n\n    switch (this.entityType) {\n      case EntityType.ASSET:\n        this.entitySubtypeTitle = 'asset.asset-type';\n        this.entitySubtypeRequiredText = 'asset.asset-type-required';\n        this.broadcastSubscription = this.broadcast.on('assetSaved', () => {\n          this.subTypes = null;\n          this.subTypesOptionsSubject.next('');\n        });\n        break;\n      case EntityType.DEVICE:\n        this.entitySubtypeTitle = 'device.device-type';\n        this.entitySubtypeRequiredText = 'device.device-type-required';\n        this.broadcastSubscription = this.broadcast.on('deviceSaved', () => {\n          this.subTypes = null;\n          this.subTypesOptionsSubject.next('');\n        });\n        break;\n      case EntityType.EDGE:\n        this.entitySubtypeTitle = 'edge.edge-type';\n        this.entitySubtypeRequiredText = 'edge.edge-type-required';\n        this.broadcastSubscription = this.broadcast.on('edgeSaved',() => {\n          this.subTypes = null;\n          this.subTypesOptionsSubject.next('');\n        });\n        break;\n      case EntityType.ENTITY_VIEW:\n        this.entitySubtypeTitle = 'entity-view.entity-view-type';\n        this.entitySubtypeRequiredText = 'entity-view.entity-view-type-required';\n        this.broadcastSubscription = this.broadcast.on('entityViewSaved', () => {\n          this.subTypes = null;\n          this.subTypesOptionsSubject.next('');\n        });\n        break;\n    }\n\n    this.subTypesOptions = this.subTypesOptionsSubject.asObservable().pipe(\n      startWith<string | EntitySubtype>(''),\n      mergeMap(() => this.getSubTypes())\n    );\n\n    this.subTypeFormGroup.get('subType').valueChanges.subscribe(\n      (value) => {\n        let modelValue;\n        if (!value || value === '') {\n          modelValue = '';\n        } else {\n          modelValue = value.type;\n        }\n        this.updateView(modelValue);\n      }\n    );\n  }\n\n  ngAfterViewInit(): void {\n  }\n\n  ngOnDestroy(): void {\n    if (this.broadcastSubscription) {\n      this.broadcastSubscription.unsubscribe();\n    }\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    if (this.disabled) {\n      this.subTypeFormGroup.disable();\n    } else {\n      this.subTypeFormGroup.enable();\n    }\n  }\n\n  writeValue(value: string | null): void {\n    if (value != null && value !== '') {\n      this.modelValue = value;\n      this.findSubTypes(value).subscribe(\n        (subTypes) => {\n          const subType = subTypes && subTypes.length === 1 ? subTypes[0] : '';\n          this.subTypeFormGroup.get('subType').patchValue(subType, {emitEvent: true});\n        }\n      );\n    } else {\n      this.modelValue = '';\n      this.subTypeFormGroup.get('subType').patchValue('', {emitEvent: true});\n    }\n  }\n\n  updateView(value: string | null) {\n    if (this.modelValue !== value) {\n      this.modelValue = value;\n      this.propagateChange(this.modelValue);\n    }\n  }\n\n  displaySubTypeFn(subType?: EntitySubtype | string): string | undefined {\n    if (subType && typeof subType !== 'string') {\n      if (this.typeTranslatePrefix) {\n        return this.translate.instant(this.typeTranslatePrefix + '.' + subType.type);\n      } else {\n        return subType.type;\n      }\n    } else {\n      return this.translate.instant('entity.all-subtypes');\n    }\n  }\n\n  findSubTypes(searchText?: string): Observable<Array<EntitySubtype | string>> {\n    return this.getSubTypes().pipe(\n      map(subTypes => subTypes.filter( subType => {\n          return searchText ? (typeof subType === 'string' ? false : subType.type === searchText) : false;\n      }))\n    );\n  }\n\n  getSubTypes(): Observable<Array<EntitySubtype | string>> {\n    if (!this.subTypes) {\n      switch (this.entityType) {\n        case EntityType.ASSET:\n          this.subTypes = this.assetService.getAssetTypes({ignoreLoading: true});\n          break;\n        case EntityType.DEVICE:\n          this.subTypes = this.deviceService.getDeviceTypes({ignoreLoading: true});\n          break;\n        case EntityType.EDGE:\n          this.subTypes = this.edgeService.getEdgeTypes({ignoreLoading: true});\n          break;\n        case EntityType.ENTITY_VIEW:\n          this.subTypes = this.entityViewService.getEntityViewTypes({ignoreLoading: true});\n          break;\n      }\n      if (this.subTypes) {\n        this.subTypes = this.subTypes.pipe(\n          map((allSubtypes) => {\n              allSubtypes.unshift('');\n              this.subTypesLoaded = true;\n              return allSubtypes;\n          }),\n          tap((subTypes) => {\n            const type: EntitySubtype | string = this.subTypeFormGroup.get('subType').value;\n            const strType = typeof type === 'string' ? type : type.type;\n            const found = subTypes.find((subType) => {\n              if (typeof subType === 'string') {\n                return subType === type;\n              } else {\n                return subType.type === strType;\n              }\n            });\n            if (found) {\n              this.subTypeFormGroup.get('subType').patchValue(found);\n            }\n          }),\n          publishReplay(1),\n          refCount()\n        );\n      } else {\n        return throwError(null);\n      }\n    }\n    return this.subTypes;\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<mat-form-field [formGroup]=\"subTypeFormGroup\" class=\"mat-block\">\n  <mat-label *ngIf=\"showLabel\">{{ entitySubtypeTitle | translate }}</mat-label>\n  <mat-select [fxShow]=\"subTypesLoaded\" class=\"tb-entity-subtype-select\" formControlName=\"subType\">\n    <mat-option *ngFor=\"let subType of subTypesOptions | async\" [value]=\"subType\">\n      {{ displaySubTypeFn(subType) }}\n    </mat-option>\n  </mat-select>\n  <mat-error *ngIf=\"subTypeFormGroup.get('subType').hasError('required')\">\n    {{ entitySubtypeRequiredText | translate }}\n  </mat-error>\n</mat-form-field>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\n\nexport interface SortOrder {\n  property: string;\n  direction: Direction;\n}\n\nexport enum Direction {\n  ASC = 'ASC',\n  DESC = 'DESC'\n}\n\nexport function sortOrderFromString(strSortOrder: string): SortOrder {\n  let property: string;\n  let direction = Direction.ASC;\n  if (strSortOrder.startsWith('-')) {\n    direction = Direction.DESC;\n    property = strSortOrder.substring(1);\n  } else {\n    if (strSortOrder.startsWith('+')) {\n      property = strSortOrder.substring(1);\n    } else {\n      property = strSortOrder;\n    }\n  }\n  return {property, direction};\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, forwardRef, Input, OnInit, ViewChild } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR, NgForm } from '@angular/forms';\nimport { ValueType, valueTypesMap } from '@shared/models/constants';\nimport { isObject } from '@core/utils';\nimport { MatDialog } from '@angular/material/dialog';\nimport {\n  JsonObjectEditDialogComponent,\n  JsonObjectEditDialogData\n} from '@shared/components/dialog/json-object-edit-dialog.component';\n\n@Component({\n  selector: 'tb-value-input',\n  templateUrl: './value-input.component.html',\n  styleUrls: ['./value-input.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => ValueInputComponent),\n      multi: true\n    }\n  ]\n})\nexport class ValueInputComponent implements OnInit, ControlValueAccessor {\n\n  @Input() disabled: boolean;\n\n  @Input() requiredText: string;\n\n  @ViewChild('inputForm', {static: true}) inputForm: NgForm;\n\n  modelValue: any;\n\n  valueType: ValueType;\n\n  public valueTypeEnum = ValueType;\n\n  valueTypeKeys = Object.keys(ValueType);\n\n  valueTypes = valueTypesMap;\n\n  private propagateChange = null;\n\n  constructor(\n    public dialog: MatDialog,\n  ) {\n\n  }\n\n  ngOnInit(): void {\n  }\n\n  openEditJSONDialog($event: Event) {\n    if ($event) {\n      $event.stopPropagation();\n    }\n    this.dialog.open<JsonObjectEditDialogComponent, JsonObjectEditDialogData, object>(JsonObjectEditDialogComponent, {\n      disableClose: true,\n      panelClass: ['tb-dialog', 'tb-fullscreen-dialog'],\n      data: {\n        jsonValue: this.modelValue\n      }\n    }).afterClosed().subscribe(\n      (res) => {\n        if (res) {\n          this.modelValue = res;\n          this.inputForm.control.patchValue({value: this.modelValue});\n        }\n      }\n    );\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n  }\n\n  writeValue(value: any): void {\n    this.modelValue = value;\n    if (this.modelValue === true || this.modelValue === false) {\n      this.valueType = ValueType.BOOLEAN;\n    } else if (typeof this.modelValue === 'number') {\n      if (this.modelValue.toString().indexOf('.') === -1) {\n        this.valueType = ValueType.INTEGER;\n      } else {\n        this.valueType = ValueType.DOUBLE;\n      }\n    } else if (isObject(this.modelValue)) {\n      this.valueType = ValueType.JSON;\n    } else {\n      this.valueType = ValueType.STRING;\n    }\n  }\n\n  updateView() {\n    if (this.inputForm.valid || this.valueType === ValueType.BOOLEAN) {\n      this.propagateChange(this.modelValue);\n    } else {\n      this.propagateChange(null);\n    }\n  }\n\n  onValueTypeChanged() {\n    if (this.valueType === ValueType.BOOLEAN) {\n      this.modelValue = false;\n    } else if (this.valueType === ValueType.JSON) {\n      this.modelValue = {};\n      this.inputForm.form.get('value').patchValue({});\n    } else {\n      this.modelValue = null;\n    }\n    this.updateView();\n  }\n\n  onValueChanged() {\n    this.updateView();\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<form #inputForm=\"ngForm\">\n  <section fxLayout=\"row\" fxLayoutGap=\"8px\">\n    <mat-form-field fxFlex=\"40\" class=\"mat-block tb-value-type\">\n      <mat-label translate>value.type</mat-label>\n      <mat-select [disabled]=\"disabled\" matInput name=\"valueType\" [(ngModel)]=\"valueType\" (ngModelChange)=\"onValueTypeChanged()\">\n        <mat-select-trigger>\n          <mat-icon svgIcon=\"{{ valueTypes.get(valueType).icon }}\"></mat-icon>\n          <span>{{ valueTypes.get(valueType).name | translate }}</span>\n        </mat-select-trigger>\n        <mat-option *ngFor=\"let valueType of valueTypeKeys\" [value]=\"valueType\">\n          <mat-icon svgIcon=\"{{ valueTypes.get(valueTypeEnum[valueType]).icon }}\"></mat-icon>\n          <span>{{ valueTypes.get(valueTypeEnum[valueType]).name | translate }}</span>\n        </mat-option>\n      </mat-select>\n    </mat-form-field>\n    <mat-form-field *ngIf=\"valueType === valueTypeEnum.STRING\" fxFlex=\"60\" class=\"mat-block\">\n      <mat-label translate>value.string-value</mat-label>\n      <input [disabled]=\"disabled\" matInput required name=\"value\" #value=\"ngModel\" [(ngModel)]=\"modelValue\" (ngModelChange)=\"onValueChanged()\"/>\n      <mat-error *ngIf=\"value.hasError('required')\">\n        {{ (requiredText ? requiredText : 'value.string-value-required') | translate }}\n      </mat-error>\n    </mat-form-field>\n    <mat-form-field *ngIf=\"valueType === valueTypeEnum.INTEGER\" fxFlex=\"60\" class=\"mat-block\">\n      <mat-label translate>value.integer-value</mat-label>\n      <input [disabled]=\"disabled\" matInput required name=\"value\" type=\"number\" step=\"1\" pattern=\"^-?[0-9]+$\" #value=\"ngModel\" [(ngModel)]=\"modelValue\" (ngModelChange)=\"onValueChanged()\"/>\n      <mat-error *ngIf=\"value.hasError('required')\">\n        {{ (requiredText ? requiredText : 'value.integer-value-required') | translate }}\n      </mat-error>\n      <mat-error *ngIf=\"value.hasError('pattern')\">\n        {{ 'value.invalid-integer-value' | translate }}\n      </mat-error>\n    </mat-form-field>\n    <mat-form-field *ngIf=\"valueType === valueTypeEnum.DOUBLE\" fxFlex=\"60\" class=\"mat-block\">\n      <mat-label translate>value.double-value</mat-label>\n      <input [disabled]=\"disabled\" matInput required name=\"value\" type=\"number\" step=\"any\" #value=\"ngModel\" [(ngModel)]=\"modelValue\" (ngModelChange)=\"onValueChanged()\"/>\n      <mat-error *ngIf=\"value.hasError('required')\">\n        {{ (requiredText ? requiredText : 'value.double-value-required') | translate }}\n      </mat-error>\n    </mat-form-field>\n    <div fxLayout=\"column\" fxLayoutAlign=\"center\" fxFlex=\"60\" *ngIf=\"valueType === valueTypeEnum.BOOLEAN\">\n      <mat-checkbox [disabled]=\"disabled\" name=\"value\" #value=\"ngModel\" [(ngModel)]=\"modelValue\" (ngModelChange)=\"onValueChanged()\" style=\"margin-bottom: 0;\">\n        {{ (modelValue ? 'value.true' : 'value.false') | translate }}\n      </mat-checkbox>\n    </div>\n    <div fxLayout=\"row\" fxLayoutAlign=\"center\" fxFlex=\"60\" *ngIf=\"valueType === valueTypeEnum.JSON\" class=\"mat-block\">\n      <mat-form-field fxFlex class=\"mat-block\">\n        <mat-label translate>value.json-value</mat-label>\n        <input [disabled]=\"disabled\" matInput tb-json-to-string required name=\"value\" #value=\"ngModel\"\n               [(ngModel)]=\"modelValue\" (ngModelChange)=\"onValueChanged()\"/>\n        <button matSuffix mat-button mat-icon-button (click)=\"openEditJSONDialog($event)\">\n          <mat-icon>open_in_new</mat-icon>\n        </button>\n        <mat-error *ngIf=\"value.hasError('required')\">\n          {{ (requiredText ? requiredText : 'value.json-value-required') | translate }}\n        </mat-error>\n        <mat-error *ngIf=\"value.hasError('invalidJSON')\">\n          {{ 'value.json-value-invalid' | translate }}\n        </mat-error>\n      </mat-form-field>\n    </div>\n  </section>\n</form>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { AfterViewInit, Component, ElementRef, forwardRef, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ControlValueAccessor, FormBuilder, FormGroup, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { Observable, of } from 'rxjs';\nimport {\n  catchError,\n  debounceTime,\n  distinctUntilChanged,\n  map,\n  publishReplay,\n  refCount,\n  switchMap,\n  tap\n} from 'rxjs/operators';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@app/core/core.state';\nimport { TranslateService } from '@ngx-translate/core';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { QueueService } from '@core/http/queue.service';\nimport { ServiceType } from '@shared/models/queue.models';\n\ninterface Queue {\n  queueName: string;\n}\n\n@Component({\n  selector: 'tb-queue-type-list',\n  templateUrl: './queue-type-list.component.html',\n  styleUrls: [],\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => QueueTypeListComponent),\n    multi: true\n  }]\n})\nexport class QueueTypeListComponent implements ControlValueAccessor, OnInit, AfterViewInit, OnDestroy {\n\n  queueFormGroup: FormGroup;\n\n  modelValue: Queue | null;\n\n  private requiredValue: boolean;\n  get required(): boolean {\n    return this.requiredValue;\n  }\n  @Input()\n  set required(value: boolean) {\n    this.requiredValue = coerceBooleanProperty(value);\n  }\n\n  @Input()\n  disabled: boolean;\n\n  @Input()\n  queueType: ServiceType;\n\n  @ViewChild('queueInput', {static: true}) queueInput: ElementRef<HTMLInputElement>;\n\n  filteredQueues: Observable<Array<Queue>>;\n\n  queues: Observable<Array<Queue>>;\n\n  searchText = '';\n\n  private dirty = false;\n\n  private propagateChange = (v: any) => { };\n\n  constructor(private store: Store<AppState>,\n              public translate: TranslateService,\n              private queueService: QueueService,\n              private fb: FormBuilder) {\n    this.queueFormGroup = this.fb.group({\n      queue: [null]\n    });\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  ngOnInit() {\n    this.filteredQueues = this.queueFormGroup.get('queue').valueChanges\n      .pipe(\n        debounceTime(150),\n        distinctUntilChanged(),\n        tap(value => {\n          let modelValue;\n          if (typeof value === 'string' || !value) {\n            modelValue = null;\n          } else {\n            modelValue = value;\n          }\n          this.updateView(modelValue);\n        }),\n        map(value => value ? (typeof value === 'string' ? value : value.queueName) : ''),\n        switchMap(queue => this.fetchQueues(queue) )\n      );\n  }\n\n  ngAfterViewInit(): void {\n  }\n\n  ngOnDestroy(): void {\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    if (this.disabled) {\n      this.queueFormGroup.disable({emitEvent: false});\n    } else {\n      this.queueFormGroup.enable({emitEvent: false});\n    }\n  }\n\n  writeValue(value: string | null): void {\n    this.searchText = '';\n    this.modelValue = value ? { queueName: value } : null;\n    this.queueFormGroup.get('queue').patchValue(this.modelValue, {emitEvent: false});\n    this.dirty = true;\n  }\n\n  onFocus() {\n    if (this.dirty) {\n      this.queueFormGroup.get('queue').updateValueAndValidity({onlySelf: true, emitEvent: true});\n      this.dirty = false;\n    }\n  }\n\n  updateView(value: Queue | null) {\n    if (this.modelValue !== value) {\n      this.modelValue = value;\n      this.propagateChange(this.modelValue ? this.modelValue.queueName : null);\n    }\n  }\n\n  displayQueueFn(queue?: Queue): string | undefined {\n    return queue ? queue.queueName : undefined;\n  }\n\n  fetchQueues(searchText?: string): Observable<Array<Queue>> {\n    this.searchText = searchText;\n    return this.getQueues().pipe(\n      catchError(() => of([] as Array<Queue>)),\n      map(queues => {\n        const result = queues.filter( queue => {\n          return searchText ? queue.queueName.toUpperCase().startsWith(searchText.toUpperCase()) : true;\n        });\n        if (result.length) {\n          result.sort((q1, q2) => q1.queueName.localeCompare(q2.queueName));\n        }\n        return result;\n      })\n    );\n  }\n\n  getQueues(): Observable<Array<Queue>> {\n    if (!this.queues) {\n      this.queues = this.queueService.\n      getTenantQueuesByServiceType(this.queueType, {ignoreLoading: true}).pipe(\n        map((queues) => {\n          return queues.map((queueName) => {\n            return { queueName };\n          });\n        }),\n        publishReplay(1),\n        refCount()\n      );\n    }\n    return this.queues;\n  }\n\n  clear() {\n    this.queueFormGroup.get('queue').patchValue(null, {emitEvent: true});\n    setTimeout(() => {\n      this.queueInput.nativeElement.blur();\n      this.queueInput.nativeElement.focus();\n    }, 0);\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<mat-form-field [formGroup]=\"queueFormGroup\" class=\"mat-block\">\n  <mat-label>{{ 'queue.name' | translate }}</mat-label>\n  <input matInput type=\"text\" placeholder=\"{{ 'queue.select_name' | translate }}\"\n         #queueInput\n         formControlName=\"queue\"\n         (focusin)=\"onFocus()\"\n         [required]=\"required\"\n         [matAutocomplete]=\"queueAutocomplete\">\n  <button *ngIf=\"queueFormGroup.get('queue').value && !disabled\"\n          type=\"button\"\n          matSuffix mat-button mat-icon-button aria-label=\"Clear\"\n          (click)=\"clear()\">\n    <mat-icon class=\"material-icons\">close</mat-icon>\n  </button>\n  <mat-autocomplete\n    class=\"tb-autocomplete\"\n    #queueAutocomplete=\"matAutocomplete\"\n    [displayWith]=\"displayQueueFn\">\n    <mat-option *ngFor=\"let queue of filteredQueues | async\" [value]=\"queue\">\n      <span [innerHTML]=\"queue.queueName | highlight:searchText\"></span>\n    </mat-option>\n    <mat-option *ngIf=\"!(filteredQueues | async)?.length\" [value]=\"null\">\n      <span>\n        {{ translate.get('queue.no-queues-matching', {queue: searchText}) | async }}\n      </span>\n    </mat-option>\n  </mat-autocomplete>\n  <mat-error *ngIf=\"queueFormGroup.get('queue').hasError('required')\">\n    {{ 'queue.name_required' | translate }}\n  </mat-error>\n  <mat-hint class=\"tb-hint\" translate [fxShow]=\"!disabled\">device-profile.select-queue-hint</mat-hint>\n</mat-form-field>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { AuthService } from '@core/auth/auth.service';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { PageComponent } from '@shared/components/page.component';\nimport { FormBuilder } from '@angular/forms';\nimport { ActionNotificationShow } from '@core/notification/notification.actions';\nimport { TranslateService } from '@ngx-translate/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'tb-create-password',\n  templateUrl: './create-password.component.html',\n  styleUrls: ['./create-password.component.scss']\n})\nexport class CreatePasswordComponent extends PageComponent implements OnInit, OnDestroy {\n\n  activateToken = '';\n  sub: Subscription;\n\n  createPassword = this.fb.group({\n    password: [''],\n    password2: ['']\n  });\n\n  constructor(protected store: Store<AppState>,\n              private route: ActivatedRoute,\n              private authService: AuthService,\n              private translate: TranslateService,\n              public fb: FormBuilder) {\n    super(store);\n  }\n\n  ngOnInit() {\n    this.sub = this.route\n      .queryParams\n      .subscribe(params => {\n        this.activateToken = params.activateToken || '';\n      });\n  }\n\n  ngOnDestroy(): void {\n    super.ngOnDestroy();\n    this.sub.unsubscribe();\n  }\n\n  onCreatePassword() {\n    if (this.createPassword.get('password').value !== this.createPassword.get('password2').value) {\n      this.store.dispatch(new ActionNotificationShow({ message: this.translate.instant('login.passwords-mismatch-error'),\n        type: 'error' }));\n    } else {\n      this.authService.activate(\n        this.activateToken,\n        this.createPassword.get('password').value, true).subscribe();\n    }\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<div class=\"tb-create-password-content mat-app-background tb-dark\" fxLayout=\"row\" fxLayoutAlign=\"center center\" style=\"width: 100%;\">\n  <mat-card fxFlex=\"initial\" class=\"tb-create-password-card\">\n    <mat-card-title class=\"layout-padding\">\n      <span translate class=\"mat-headline\">login.create-password</span>\n    </mat-card-title>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\">\n    </mat-progress-bar>\n    <span style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></span>\n    <mat-card-content>\n      <form [formGroup]=\"createPassword\" (ngSubmit)=\"onCreatePassword()\">\n        <fieldset [disabled]=\"isLoading$ | async\">\n          <div tb-toast fxLayout=\"column\" class=\"layout-padding\">\n            <span style=\"height: 50px;\"></span>\n            <mat-form-field class=\"mat-block\">\n              <mat-label translate>common.password</mat-label>\n              <input matInput type=\"password\" autofocus formControlName=\"password\"/>\n              <mat-icon class=\"material-icons\" matPrefix>lock</mat-icon>\n              <tb-toggle-password matSuffix></tb-toggle-password>\n            </mat-form-field>\n            <mat-form-field class=\"mat-block\">\n              <mat-label translate>login.password-again</mat-label>\n              <input matInput type=\"password\" formControlName=\"password2\"/>\n              <mat-icon class=\"material-icons\" matPrefix>lock</mat-icon>\n              <tb-toggle-password matSuffix></tb-toggle-password>\n            </mat-form-field>\n            <div fxLayout=\"column\" fxLayout.gt-xs=\"row\" fxLayoutGap=\"16px\" fxLayoutAlign=\"start center\"\n                 fxLayoutAlign.gt-xs=\"center start\">\n              <button mat-raised-button color=\"accent\" type=\"submit\" [disabled]=\"(isLoading$ | async)\">\n                {{ 'login.create-password' | translate }}\n              </button>\n              <button mat-raised-button color=\"primary\" type=\"button\" [disabled]=\"(isLoading$ | async)\"\n                      routerLink=\"/login\">\n                {{ 'action.cancel' | translate }}\n              </button>\n            </div>\n          </div>\n        </fieldset>\n      </form>\n    </mat-card-content>\n  </mat-card>\n</div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\nimport { defaultHttpOptionsFromConfig, RequestConfig } from './http-utils';\nimport { Observable, of, ReplaySubject, Subject } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\nimport { PageLink } from '@shared/models/page/page-link';\nimport { PageData } from '@shared/models/page/page-data';\nimport { WidgetsBundle } from '@shared/models/widgets-bundle.model';\nimport {\n  Widget,\n  WidgetType,\n  widgetType,\n  WidgetTypeDetails,\n  WidgetTypeInfo,\n  widgetTypesData\n} from '@shared/models/widget.models';\nimport { UtilsService } from '@core/services/utils.service';\nimport { TranslateService } from '@ngx-translate/core';\nimport { ResourcesService } from '../services/resources.service';\nimport { toWidgetInfo, toWidgetTypeDetails, WidgetInfo } from '@app/modules/home/models/widget-component.models';\nimport { filter, map, mergeMap, tap } from 'rxjs/operators';\nimport { WidgetTypeId } from '@shared/models/id/widget-type-id';\nimport { NULL_UUID } from '@shared/models/id/has-uuid';\nimport { ActivationEnd, Router } from '@angular/router';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WidgetService {\n\n  private widgetTypeUpdatedSubject = new Subject<WidgetType>();\n  private widgetsBundleDeletedSubject = new Subject<WidgetsBundle>();\n\n  private allWidgetsBundles: Array<WidgetsBundle>;\n  private systemWidgetsBundles: Array<WidgetsBundle>;\n  private tenantWidgetsBundles: Array<WidgetsBundle>;\n\n  private widgetTypeInfosCache = new Map<string, Array<WidgetTypeInfo>>();\n\n  private loadWidgetsBundleCacheSubject: ReplaySubject<any>;\n\n  constructor(\n    private http: HttpClient,\n    private utils: UtilsService,\n    private resources: ResourcesService,\n    private translate: TranslateService,\n    private router: Router\n  ) {\n    this.router.events.pipe(filter(event => event instanceof ActivationEnd)).subscribe(\n      () => {\n        this.invalidateWidgetsBundleCache();\n      }\n    );\n  }\n\n  public getWidgetScopeVariables(): string[] {\n    return ['tinycolor', 'cssjs', 'moment', '$', 'jQuery'];\n  }\n\n  public getAllWidgetsBundles(config?: RequestConfig): Observable<Array<WidgetsBundle>> {\n    return this.loadWidgetsBundleCache(config).pipe(\n      map(() => this.allWidgetsBundles)\n    );\n  }\n\n  public getSystemWidgetsBundles(config?: RequestConfig): Observable<Array<WidgetsBundle>> {\n    return this.loadWidgetsBundleCache(config).pipe(\n      map(() => this.systemWidgetsBundles)\n    );\n  }\n\n  public getTenantWidgetsBundles(config?: RequestConfig): Observable<Array<WidgetsBundle>> {\n    return this.loadWidgetsBundleCache(config).pipe(\n      map(() => this.tenantWidgetsBundles)\n    );\n  }\n\n  public getWidgetBundles(pageLink: PageLink, config?: RequestConfig): Observable<PageData<WidgetsBundle>> {\n    return this.http.get<PageData<WidgetsBundle>>(`/api/widgetsBundles${pageLink.toQuery()}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getWidgetsBundle(widgetsBundleId: string,\n                          config?: RequestConfig): Observable<WidgetsBundle> {\n    return this.http.get<WidgetsBundle>(`/api/widgetsBundle/${widgetsBundleId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public saveWidgetsBundle(widgetsBundle: WidgetsBundle,\n                           config?: RequestConfig): Observable<WidgetsBundle> {\n    return this.http.post<WidgetsBundle>('/api/widgetsBundle', widgetsBundle,\n      defaultHttpOptionsFromConfig(config)).pipe(\n      tap(() => {\n        this.invalidateWidgetsBundleCache();\n      })\n    );\n  }\n\n  public deleteWidgetsBundle(widgetsBundleId: string, config?: RequestConfig) {\n    return this.getWidgetsBundle(widgetsBundleId, config).pipe(\n      mergeMap((widgetsBundle) => {\n        return this.http.delete(`/api/widgetsBundle/${widgetsBundleId}`,\n          defaultHttpOptionsFromConfig(config)).pipe(\n          tap(() => {\n            this.invalidateWidgetsBundleCache();\n            this.widgetsBundleDeletedSubject.next(widgetsBundle);\n          })\n        );\n      }\n    ));\n  }\n\n  public getBundleWidgetTypes(bundleAlias: string, isSystem: boolean,\n                              config?: RequestConfig): Observable<Array<WidgetType>> {\n    return this.http.get<Array<WidgetType>>(`/api/widgetTypes?isSystem=${isSystem}&bundleAlias=${bundleAlias}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getBundleWidgetTypesDetails(bundleAlias: string, isSystem: boolean,\n                                     config?: RequestConfig): Observable<Array<WidgetTypeDetails>> {\n    return this.http.get<Array<WidgetTypeDetails>>(`/api/widgetTypesDetails?isSystem=${isSystem}&bundleAlias=${bundleAlias}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getBundleWidgetTypeInfos(bundleAlias: string, isSystem: boolean,\n                                  config?: RequestConfig): Observable<Array<WidgetTypeInfo>> {\n    const key = bundleAlias + (isSystem ? '_sys' : '');\n    if (this.widgetTypeInfosCache.has(key)) {\n      return of(this.widgetTypeInfosCache.get(key));\n    } else {\n      return this.http.get<Array<WidgetTypeInfo>>(`/api/widgetTypesInfos?isSystem=${isSystem}&bundleAlias=${bundleAlias}`,\n        defaultHttpOptionsFromConfig(config)).pipe(\n          tap((res) => this.widgetTypeInfosCache.set(key, res) )\n      );\n    }\n  }\n\n  public loadBundleLibraryWidgets(bundleAlias: string, isSystem: boolean,\n                                  config?: RequestConfig): Observable<Array<Widget>> {\n    return this.getBundleWidgetTypes(bundleAlias, isSystem, config).pipe(\n      map((types) => {\n        types = types.sort((a, b) => {\n          let result = widgetType[b.descriptor.type].localeCompare(widgetType[a.descriptor.type]);\n          if (result === 0) {\n            result = b.createdTime - a.createdTime;\n          }\n          return result;\n        });\n        const widgetTypes = new Array<Widget>();\n        let top = 0;\n        const lastTop = [0, 0, 0];\n        let col = 0;\n        let column = 0;\n        types.forEach((type) => {\n          const widgetTypeInfo = toWidgetInfo(type);\n          const sizeX = 8;\n          const sizeY = Math.floor(widgetTypeInfo.sizeY);\n          const widget: Widget = {\n            typeId: type.id,\n            isSystemType: isSystem,\n            bundleAlias,\n            typeAlias: widgetTypeInfo.alias,\n            type: widgetTypeInfo.type,\n            title: widgetTypeInfo.widgetName,\n            sizeX,\n            sizeY,\n            row: top,\n            col,\n            config: JSON.parse(widgetTypeInfo.defaultConfig)\n          };\n\n          widget.config.title = widgetTypeInfo.widgetName;\n\n          widgetTypes.push(widget);\n          top += sizeY;\n          if (top > lastTop[column] + 10) {\n            lastTop[column] = top;\n            column++;\n            if (column > 2) {\n              column = 0;\n            }\n            top = lastTop[column];\n            col = column * 8;\n          }\n        });\n        return widgetTypes;\n      })\n    );\n  }\n\n  public getWidgetType(bundleAlias: string, widgetTypeAlias: string, isSystem: boolean,\n                       config?: RequestConfig): Observable<WidgetType> {\n    return this.http.get<WidgetType>(`/api/widgetType?isSystem=${isSystem}&bundleAlias=${bundleAlias}&alias=${widgetTypeAlias}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public saveWidgetTypeDetails(widgetInfo: WidgetInfo,\n                               id: WidgetTypeId,\n                               bundleAlias: string,\n                               createdTime: number,\n                               config?: RequestConfig): Observable<WidgetTypeDetails> {\n    const widgetTypeDetails = toWidgetTypeDetails(widgetInfo, id, undefined, bundleAlias, createdTime);\n    return this.http.post<WidgetTypeDetails>('/api/widgetType', widgetTypeDetails,\n      defaultHttpOptionsFromConfig(config)).pipe(\n      tap((savedWidgetType) => {\n        this.widgetTypeUpdatedSubject.next(savedWidgetType);\n      }));\n  }\n\n  public saveImportedWidgetTypeDetails(widgetTypeDetails: WidgetTypeDetails,\n                                       config?: RequestConfig): Observable<WidgetTypeDetails> {\n    return this.http.post<WidgetTypeDetails>('/api/widgetType', widgetTypeDetails,\n      defaultHttpOptionsFromConfig(config)).pipe(\n      tap((savedWidgetType) => {\n        this.widgetTypeUpdatedSubject.next(savedWidgetType);\n      }));\n  }\n\n  public deleteWidgetType(bundleAlias: string, widgetTypeAlias: string, isSystem: boolean,\n                          config?: RequestConfig) {\n    return this.getWidgetType(bundleAlias, widgetTypeAlias, isSystem, config).pipe(\n      mergeMap((widgetTypeInstance) => {\n          return this.http.delete(`/api/widgetType/${widgetTypeInstance.id.id}`,\n            defaultHttpOptionsFromConfig(config)).pipe(\n            tap(() => {\n              this.widgetTypeUpdatedSubject.next(widgetTypeInstance);\n            })\n          );\n        }\n      ));\n  }\n\n  public getWidgetTypeById(widgetTypeId: string,\n                           config?: RequestConfig): Observable<WidgetTypeDetails> {\n    return this.http.get<WidgetTypeDetails>(`/api/widgetType/${widgetTypeId}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getWidgetTemplate(widgetTypeParam: widgetType,\n                           config?: RequestConfig): Observable<WidgetInfo> {\n    const templateWidgetType = widgetTypesData.get(widgetTypeParam);\n    return this.getWidgetType(templateWidgetType.template.bundleAlias, templateWidgetType.template.alias, true,\n      config).pipe(\n        map((result) => {\n          const widgetInfo = toWidgetInfo(result);\n          widgetInfo.alias = undefined;\n          return widgetInfo;\n        })\n      );\n  }\n\n  public onWidgetTypeUpdated(): Observable<WidgetType> {\n    return this.widgetTypeUpdatedSubject.asObservable();\n  }\n\n  public onWidgetBundleDeleted(): Observable<WidgetsBundle> {\n    return this.widgetsBundleDeletedSubject.asObservable();\n  }\n\n  private loadWidgetsBundleCache(config?: RequestConfig): Observable<any> {\n    if (!this.allWidgetsBundles) {\n      if (!this.loadWidgetsBundleCacheSubject) {\n        this.loadWidgetsBundleCacheSubject = new ReplaySubject();\n        this.http.get<Array<WidgetsBundle>>('/api/widgetsBundles',\n          defaultHttpOptionsFromConfig(config)).subscribe(\n          (allWidgetsBundles) => {\n            this.allWidgetsBundles = allWidgetsBundles;\n            this.systemWidgetsBundles = new Array<WidgetsBundle>();\n            this.tenantWidgetsBundles = new Array<WidgetsBundle>();\n            this.allWidgetsBundles = this.allWidgetsBundles.sort((wb1, wb2) => {\n              let res = wb1.title.localeCompare(wb2.title);\n              if (res === 0) {\n                res = wb2.createdTime - wb1.createdTime;\n              }\n              return res;\n            });\n            this.allWidgetsBundles.forEach((widgetsBundle) => {\n              if (widgetsBundle.tenantId.id === NULL_UUID) {\n                this.systemWidgetsBundles.push(widgetsBundle);\n              } else {\n                this.tenantWidgetsBundles.push(widgetsBundle);\n              }\n            });\n            this.loadWidgetsBundleCacheSubject.next();\n            this.loadWidgetsBundleCacheSubject.complete();\n          },\n          () => {\n            this.loadWidgetsBundleCacheSubject.error(null);\n          });\n      }\n      return this.loadWidgetsBundleCacheSubject.asObservable();\n    } else {\n      return of(null);\n    }\n  }\n\n  private invalidateWidgetsBundleCache() {\n    this.allWidgetsBundles = undefined;\n    this.systemWidgetsBundles = undefined;\n    this.tenantWidgetsBundles = undefined;\n    this.loadWidgetsBundleCacheSubject = undefined;\n    this.widgetTypeInfosCache.clear();\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, Input, OnInit } from '@angular/core';\nimport { isLocalUrl } from '@core/utils';\n\n@Component({\n  selector: 'tb-social-share-panel',\n  templateUrl: './socialshare-panel.component.html',\n  styleUrls: ['./socialshare-panel.component.scss']\n})\nexport class SocialSharePanelComponent implements OnInit {\n\n  @Input()\n  shareTitle: string;\n\n  @Input()\n  shareText: string;\n\n  @Input()\n  shareLink: string;\n\n  @Input()\n  shareHashTags: string;\n\n  constructor() {\n  }\n\n  ngOnInit(): void {\n  }\n\n  isShareLinkLocal(): boolean {\n    if (this.shareLink && this.shareLink.length > 0) {\n      return isLocalUrl(this.shareLink);\n    } else {\n      return true;\n    }\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<div fxLayout=\"row\" fxLayoutGap=\"12px\" [fxHide]=\"isShareLinkLocal()\">\n  <button mat-icon-button mat-raised-button class=\"mat-primary\"\n          shareButton=\"facebook\"\n          title=\"{{ shareTitle }}\"\n          description=\"{{ shareText }}\"\n          url=\"{{ shareLink }}\"\n          matTooltipPosition=\"above\"\n          matTooltip=\"{{ 'action.share-via' | translate:{provider:'Facebook'} }}\">\n    <mat-icon svgIcon=\"mdi:facebook\"></mat-icon>\n  </button>\n  <button mat-icon-button mat-raised-button class=\"mat-primary\"\n          shareButton=\"twitter\"\n          title=\"{{ shareTitle }}\"\n          tags=\"{{ shareHashTags }}\"\n          url=\"{{ shareLink }}\"\n          matTooltipPosition=\"above\"\n          matTooltip=\"{{ 'action.share-via' | translate:{provider:'Twitter'} }}\">\n    <mat-icon svgIcon=\"mdi:twitter\"></mat-icon>\n  </button>\n  <button mat-icon-button mat-raised-button class=\"mat-primary\"\n          shareButton=\"linkedin\"\n          title=\"{{ shareTitle }}\"\n          url=\"{{ shareLink }}\"\n          matTooltipPosition=\"above\"\n          matTooltip=\"{{ 'action.share-via' | translate:{provider:'Linkedin'} }}\">\n    <mat-icon svgIcon=\"mdi:linkedin\"></mat-icon>\n  </button>\n  <button mat-icon-button mat-raised-button class=\"mat-primary\"\n          shareButton=\"reddit\"\n          title=\"{{ shareTitle }}\"\n          url=\"{{ shareLink }}\"\n          matTooltipPosition=\"above\"\n          matTooltip=\"{{ 'action.share-via' | translate:{provider:'Reddit'} }}\">\n    <mat-icon svgIcon=\"mdi:reddit\"></mat-icon>\n  </button>\n</div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { AuthService } from '@core/auth/auth.service';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { PageComponent } from '@shared/components/page.component';\nimport { FormBuilder } from '@angular/forms';\nimport { ActionNotificationShow } from '@core/notification/notification.actions';\nimport { TranslateService } from '@ngx-translate/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'tb-reset-password',\n  templateUrl: './reset-password.component.html',\n  styleUrls: ['./reset-password.component.scss']\n})\nexport class ResetPasswordComponent extends PageComponent implements OnInit, OnDestroy {\n\n  isExpiredPassword: boolean;\n\n  resetToken = '';\n  sub: Subscription;\n\n  resetPassword = this.fb.group({\n    newPassword: [''],\n    newPassword2: ['']\n  });\n\n  constructor(protected store: Store<AppState>,\n              private route: ActivatedRoute,\n              private authService: AuthService,\n              private translate: TranslateService,\n              public fb: FormBuilder) {\n    super(store);\n  }\n\n  ngOnInit() {\n    this.isExpiredPassword = this.route.snapshot.data.expiredPassword;\n    this.sub = this.route\n      .queryParams\n      .subscribe(params => {\n        this.resetToken = params.resetToken || '';\n      });\n  }\n\n  ngOnDestroy(): void {\n    super.ngOnDestroy();\n    this.sub.unsubscribe();\n  }\n\n  onResetPassword() {\n    if (this.resetPassword.get('newPassword').value !== this.resetPassword.get('newPassword2').value) {\n      this.store.dispatch(new ActionNotificationShow({ message: this.translate.instant('login.passwords-mismatch-error'),\n        type: 'error' }));\n    } else {\n      this.authService.resetPassword(\n        this.resetToken,\n        this.resetPassword.get('newPassword').value).subscribe();\n    }\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<div class=\"tb-reset-password-content mat-app-background tb-dark\" fxLayout=\"row\" fxLayoutAlign=\"center center\" style=\"width: 100%;\">\n  <mat-card fxFlex=\"initial\" class=\"tb-reset-password-card\">\n    <mat-card-title class=\"layout-padding tb-card-title\">\n      <span translate class=\"mat-headline tb-card-title\">login.password-reset</span>\n    </mat-card-title>\n    <mat-card-subtitle *ngIf=\"isExpiredPassword\" class=\"layout-padding tb-card-title\">\n      <div class=\"tb-card-title\" translate>login.expired-password-reset-message</div>\n    </mat-card-subtitle>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\">\n    </mat-progress-bar>\n    <span style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></span>\n    <mat-card-content>\n      <form [formGroup]=\"resetPassword\" (ngSubmit)=\"onResetPassword()\">\n        <fieldset [disabled]=\"isLoading$ | async\">\n          <div tb-toast fxLayout=\"column\" class=\"layout-padding\">\n            <span style=\"height: 50px;\"></span>\n            <mat-form-field class=\"mat-block\">\n              <mat-label translate>login.new-password</mat-label>\n              <input matInput type=\"password\" autofocus formControlName=\"newPassword\"/>\n              <mat-icon class=\"material-icons\" matPrefix>lock</mat-icon>\n              <tb-toggle-password matSuffix></tb-toggle-password>\n            </mat-form-field>\n            <mat-form-field class=\"mat-block\">\n              <mat-label translate>login.new-password-again</mat-label>\n              <input matInput type=\"password\" formControlName=\"newPassword2\"/>\n              <mat-icon class=\"material-icons\" matPrefix>lock</mat-icon>\n              <tb-toggle-password matSuffix></tb-toggle-password>\n            </mat-form-field>\n            <div fxLayout=\"column\" fxLayout.gt-sm=\"row\" fxLayoutGap=\"16px\" fxLayoutAlign=\"start center\"\n                 fxLayoutAlign.gt-sm=\"center start\">\n              <button mat-raised-button color=\"accent\" type=\"submit\" [disabled]=\"(isLoading$ | async)\">\n                {{ 'login.reset-password' | translate }}\n              </button>\n              <button mat-raised-button color=\"primary\" type=\"button\" [disabled]=\"(isLoading$ | async)\"\n                      routerLink=\"/login\">\n                {{ 'action.cancel' | translate }}\n              </button>\n            </div>\n          </div>\n        </fieldset>\n      </form>\n    </mat-card-content>\n  </mat-card>\n</div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { EntityType } from '@shared/models/entity-type.models';\nimport { AttributeData } from './telemetry/telemetry.models';\nimport { EntityId } from '@shared/models/id/entity-id';\nimport { DeviceCredentialMQTTBasic } from '@shared/models/device.models';\nimport { Lwm2mSecurityConfigModels } from '@shared/models/lwm2m-security-config.models';\n\nexport interface EntityInfo {\n  name?: string;\n  label?: string;\n  entityType?: EntityType;\n  id?: string;\n  entityDescription?: string;\n}\n\nexport interface EntityInfoData {\n  id: EntityId;\n  name: string;\n}\n\nexport interface ImportEntityData {\n  lineNumber: number;\n  name: string;\n  type: string;\n  label: string;\n  gateway: boolean;\n  description: string;\n  credential: {\n    accessToken?: string;\n    x509?: string;\n    mqtt?: DeviceCredentialMQTTBasic;\n    lwm2m?: Lwm2mSecurityConfigModels;\n  };\n  attributes: {\n    server: AttributeData[],\n    shared: AttributeData[]\n  };\n  timeseries: AttributeData[];\n}\n\nexport interface EdgeImportEntityData extends ImportEntityData {\n  secret: string;\n  routingKey: string;\n  cloudEndpoint: string;\n  edgeLicenseKey: string;\n}\n\nexport interface ImportEntitiesResultInfo {\n  create?: {\n    entity: number;\n  };\n  update?: {\n    entity: number;\n  };\n  error?: {\n    entity: number;\n    errors?: string;\n  };\n}\n\nexport interface EntityField {\n  keyName: string;\n  value: string;\n  name: string;\n  time?: boolean;\n}\n\nexport interface EntitiesKeysByQuery {\n  attribute: Array<string>;\n  timeseries: Array<string>;\n  entityTypes: EntityType[];\n}\n\nexport const entityFields: {[fieldName: string]: EntityField} = {\n  createdTime: {\n    keyName: 'createdTime',\n    name: 'entity-field.created-time',\n    value: 'createdTime',\n    time: true\n  },\n  name: {\n    keyName: 'name',\n    name: 'entity-field.name',\n    value: 'name'\n  },\n  type: {\n    keyName: 'type',\n    name: 'entity-field.type',\n    value: 'type'\n  },\n  firstName: {\n    keyName: 'firstName',\n    name: 'entity-field.first-name',\n    value: 'firstName'\n  },\n  lastName: {\n    keyName: 'lastName',\n    name: 'entity-field.last-name',\n    value: 'lastName'\n  },\n  email: {\n    keyName: 'email',\n    name: 'entity-field.email',\n    value: 'email'\n  },\n  title: {\n    keyName: 'title',\n    name: 'entity-field.title',\n    value: 'title'\n  },\n  country: {\n    keyName: 'country',\n    name: 'entity-field.country',\n    value: 'country'\n  },\n  state: {\n    keyName: 'state',\n    name: 'entity-field.state',\n    value: 'state'\n  },\n  city: {\n    keyName: 'city',\n    name: 'entity-field.city',\n    value: 'city'\n  },\n  address: {\n    keyName: 'address',\n    name: 'entity-field.address',\n    value: 'address'\n  },\n  address2: {\n    keyName: 'address2',\n    name: 'entity-field.address2',\n    value: 'address2'\n  },\n  zip: {\n    keyName: 'zip',\n    name: 'entity-field.zip',\n    value: 'zip'\n  },\n  phone: {\n    keyName: 'phone',\n    name: 'entity-field.phone',\n    value: 'phone'\n  },\n  label: {\n    keyName: 'label',\n    name: 'entity-field.label',\n    value: 'label'\n  }\n};\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { AfterViewInit, Component, ElementRef, forwardRef, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ControlValueAccessor, FormBuilder, FormGroup, NG_VALUE_ACCESSOR, Validators } from '@angular/forms';\nimport { Observable, of, Subscription, throwError } from 'rxjs';\nimport {\n  catchError,\n  debounceTime,\n  distinctUntilChanged,\n  map,\n  publishReplay,\n  refCount,\n  switchMap,\n  tap\n} from 'rxjs/operators';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@app/core/core.state';\nimport { TranslateService } from '@ngx-translate/core';\nimport { DeviceService } from '@core/http/device.service';\nimport { EntitySubtype, EntityType } from '@app/shared/models/entity-type.models';\nimport { BroadcastService } from '@app/core/services/broadcast.service';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { AssetService } from '@core/http/asset.service';\nimport { EntityViewService } from '@core/http/entity-view.service';\nimport { EdgeService } from '@core/http/edge.service';\n\n@Component({\n  selector: 'tb-entity-subtype-autocomplete',\n  templateUrl: './entity-subtype-autocomplete.component.html',\n  styleUrls: [],\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => EntitySubTypeAutocompleteComponent),\n    multi: true\n  }]\n})\nexport class EntitySubTypeAutocompleteComponent implements ControlValueAccessor, OnInit, AfterViewInit, OnDestroy {\n\n  subTypeFormGroup: FormGroup;\n\n  modelValue: string | null;\n\n  @Input()\n  entityType: EntityType;\n\n  private requiredValue: boolean;\n\n  get required(): boolean {\n    return this.requiredValue;\n  }\n\n  @Input()\n  set required(value: boolean) {\n    this.requiredValue = coerceBooleanProperty(value);\n  }\n\n  @Input()\n  disabled: boolean;\n\n  @ViewChild('subTypeInput', {static: true}) subTypeInput: ElementRef;\n\n  selectEntitySubtypeText: string;\n  entitySubtypeText: string;\n  entitySubtypeRequiredText: string;\n  entitySubtypeMaxLength: string;\n\n  filteredSubTypes: Observable<Array<string>>;\n\n  subTypes: Observable<Array<string>>;\n\n  private broadcastSubscription: Subscription;\n\n  searchText = '';\n\n  private dirty = false;\n\n  private propagateChange = (v: any) => { };\n\n  constructor(private store: Store<AppState>,\n              private broadcast: BroadcastService,\n              public translate: TranslateService,\n              private deviceService: DeviceService,\n              private assetService: AssetService,\n              private edgeService: EdgeService,\n              private entityViewService: EntityViewService,\n              private fb: FormBuilder) {\n    this.subTypeFormGroup = this.fb.group({\n      subType: [null, Validators.maxLength(255)]\n    });\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  ngOnInit() {\n\n    switch (this.entityType) {\n      case EntityType.ASSET:\n        this.selectEntitySubtypeText = 'asset.select-asset-type';\n        this.entitySubtypeText = 'asset.asset-type';\n        this.entitySubtypeRequiredText = 'asset.asset-type-required';\n        this.entitySubtypeMaxLength = 'asset.asset-type-max-length';\n        this.broadcastSubscription = this.broadcast.on('assetSaved', () => {\n          this.subTypes = null;\n        });\n        break;\n      case EntityType.DEVICE:\n        this.selectEntitySubtypeText = 'device.select-device-type';\n        this.entitySubtypeText = 'device.device-type';\n        this.entitySubtypeRequiredText = 'device.device-type-required';\n        this.entitySubtypeMaxLength = 'device.device-type-max-length';\n        this.broadcastSubscription = this.broadcast.on('deviceSaved', () => {\n          this.subTypes = null;\n        });\n        break;\n      case EntityType.EDGE:\n        this.selectEntitySubtypeText = 'edge.select-edge-type';\n        this.entitySubtypeText = 'edge.edge-type';\n        this.entitySubtypeRequiredText = 'edge.edge-type-required';\n        this.entitySubtypeMaxLength = 'edge.type-max-length';\n        this.broadcastSubscription = this.broadcast.on('edgeSaved', () => {\n          this.subTypes = null;\n        });\n        break;\n      case EntityType.ENTITY_VIEW:\n        this.selectEntitySubtypeText = 'entity-view.select-entity-view-type';\n        this.entitySubtypeText = 'entity-view.entity-view-type';\n        this.entitySubtypeRequiredText = 'entity-view.entity-view-type-required';\n        this.entitySubtypeMaxLength = 'entity-view.type-max-length'\n        this.broadcastSubscription = this.broadcast.on('entityViewSaved', () => {\n          this.subTypes = null;\n        });\n        break;\n    }\n\n    this.filteredSubTypes = this.subTypeFormGroup.get('subType').valueChanges\n      .pipe(\n        debounceTime(150),\n        distinctUntilChanged(),\n        tap(value => {\n          this.updateView(value);\n        }),\n        // startWith<string | EntitySubtype>(''),\n        map(value => value ? value : ''),\n        switchMap(type => this.fetchSubTypes(type))\n      );\n  }\n\n  ngAfterViewInit(): void {\n  }\n\n  ngOnDestroy(): void {\n    if (this.broadcastSubscription) {\n      this.broadcastSubscription.unsubscribe();\n    }\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    if (this.disabled) {\n      this.subTypeFormGroup.disable({emitEvent: false});\n    } else {\n      this.subTypeFormGroup.enable({emitEvent: false});\n    }\n  }\n\n  writeValue(value: string | null): void {\n    this.searchText = '';\n    this.modelValue = value;\n    this.subTypeFormGroup.get('subType').patchValue(value, {emitEvent: false});\n    this.dirty = true;\n  }\n\n  onFocus() {\n    if (this.dirty) {\n      this.subTypeFormGroup.get('subType').updateValueAndValidity({onlySelf: true, emitEvent: true});\n      this.dirty = false;\n    }\n  }\n\n  updateView(value: string | null) {\n    if (this.modelValue !== value) {\n      this.modelValue = value;\n      this.propagateChange(this.modelValue);\n    }\n  }\n\n  displaySubTypeFn(subType?: string): string | undefined {\n    return subType ? subType : undefined;\n  }\n\n  fetchSubTypes(searchText?: string, strictMatch: boolean = false): Observable<Array<string>> {\n    this.searchText = searchText;\n    return this.getSubTypes().pipe(\n      map(subTypes => subTypes.filter(subType => {\n        if (strictMatch) {\n          return searchText ? subType === searchText : false;\n        } else {\n          return searchText ? subType.toUpperCase().startsWith(searchText.toUpperCase()) : true;\n        }\n      }))\n    );\n  }\n\n  getSubTypes(): Observable<Array<string>> {\n    if (!this.subTypes) {\n      let subTypesObservable: Observable<Array<EntitySubtype>>;\n      switch (this.entityType) {\n        case EntityType.ASSET:\n          subTypesObservable = this.assetService.getAssetTypes({ignoreLoading: true});\n          break;\n        case EntityType.DEVICE:\n          subTypesObservable = this.deviceService.getDeviceTypes({ignoreLoading: true});\n          break;\n        case EntityType.EDGE:\n          subTypesObservable = this.edgeService.getEdgeTypes({ignoreLoading: true});\n          break;\n        case EntityType.ENTITY_VIEW:\n          subTypesObservable = this.entityViewService.getEntityViewTypes({ignoreLoading: true});\n          break;\n      }\n      if (subTypesObservable) {\n        this.subTypes = subTypesObservable.pipe(\n          catchError(() => of([] as Array<EntitySubtype>)),\n          map(subTypes => subTypes.map(subType => subType.type)),\n          publishReplay(1),\n          refCount()\n        );\n      } else {\n        return throwError(null);\n      }\n    }\n    return this.subTypes;\n  }\n\n  clear() {\n    this.subTypeFormGroup.get('subType').patchValue(null, {emitEvent: true});\n    setTimeout(() => {\n      this.subTypeInput.nativeElement.blur();\n      this.subTypeInput.nativeElement.focus();\n    }, 0);\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<mat-form-field [formGroup]=\"subTypeFormGroup\" class=\"mat-block\">\n  <mat-label>{{ entitySubtypeText | translate }}</mat-label>\n  <input matInput type=\"text\" placeholder=\"{{ selectEntitySubtypeText | translate }}\"\n         #subTypeInput\n         formControlName=\"subType\"\n         (focusin)=\"onFocus()\"\n         [required]=\"required\"\n         [matAutocomplete]=\"subTypeAutocomplete\">\n  <button *ngIf=\"subTypeFormGroup.get('subType').value && !disabled\"\n          type=\"button\"\n          matSuffix mat-button mat-icon-button aria-label=\"Clear\"\n          (click)=\"clear()\">\n    <mat-icon class=\"material-icons\">close</mat-icon>\n  </button>\n  <mat-autocomplete\n    class=\"tb-autocomplete\"\n    #subTypeAutocomplete=\"matAutocomplete\"\n    [displayWith]=\"displaySubTypeFn\">\n    <mat-option *ngFor=\"let subType of filteredSubTypes | async\" [value]=\"subType\">\n      <span [innerHTML]=\"subType | highlight:searchText\"></span>\n    </mat-option>\n  </mat-autocomplete>\n  <mat-error *ngIf=\"subTypeFormGroup.get('subType').hasError('required')\">\n    {{ entitySubtypeRequiredText | translate }}\n  </mat-error>\n  <mat-error *ngIf=\"subTypeFormGroup.get('subType').hasError('maxlength')\">\n    {{ entitySubtypeMaxLength | translate }}\n  </mat-error>\n</mat-form-field>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { EntityId } from '@shared/models/id/entity-id';\nimport { EntityType } from '@shared/models/entity-type.models';\n\nexport const CONTAINS_TYPE = 'Contains';\nexport const MANAGES_TYPE = 'Manages';\n\nexport const RelationTypes = [\n  CONTAINS_TYPE,\n  MANAGES_TYPE\n];\n\nexport enum RelationTypeGroup {\n  COMMON = 'COMMON',\n  ALARM = 'ALARM',\n  DASHBOARD = 'DASHBOARD',\n  RULE_CHAIN = 'RULE_CHAIN',\n  RULE_NODE = 'RULE_NODE',\n}\n\nexport enum EntitySearchDirection {\n  FROM = 'FROM',\n  TO = 'TO'\n}\n\nexport const entitySearchDirectionTranslations = new Map<EntitySearchDirection, string>(\n  [\n    [EntitySearchDirection.FROM, 'relation.search-direction.FROM'],\n    [EntitySearchDirection.TO, 'relation.search-direction.TO'],\n  ]\n);\n\nexport const directionTypeTranslations = new Map<EntitySearchDirection, string>(\n  [\n    [EntitySearchDirection.FROM, 'relation.direction-type.FROM'],\n    [EntitySearchDirection.TO, 'relation.direction-type.TO'],\n  ]\n);\n\nexport interface RelationEntityTypeFilter {\n  relationType: string;\n  entityTypes: Array<EntityType>;\n}\n\nexport interface RelationsSearchParameters {\n  rootId: string;\n  rootType: EntityType;\n  direction: EntitySearchDirection;\n  relationTypeGroup?: RelationTypeGroup;\n  maxLevel?: number;\n  fetchLastLevelOnly?: boolean;\n}\n\nexport interface EntityRelationsQuery {\n  parameters: RelationsSearchParameters;\n  filters: Array<RelationEntityTypeFilter>;\n}\n\nexport interface EntitySearchQuery {\n  parameters: RelationsSearchParameters;\n  relationType: string;\n}\n\nexport interface EntityRelation {\n  from: EntityId;\n  to: EntityId;\n  type: string;\n  typeGroup: RelationTypeGroup;\n  additionalInfo?: any;\n}\n\nexport interface EntityRelationInfo extends EntityRelation {\n  fromName: string;\n  toEntityTypeName?: string;\n  toName: string;\n  fromEntityTypeName?: string;\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport * as tinycolor_ from 'tinycolor2';\n\nconst tinycolor = tinycolor_;\n\nexport interface MaterialColorItem {\n  value: string;\n  group: string;\n  label: string;\n  isDark: boolean;\n}\n\nexport const materialColorPalette: {[palette: string]: {[spectrum: string]: string}} = {\n  red: {\n    50: '#ffebee',\n    100: '#ffcdd2',\n    200: '#ef9a9a',\n    300: '#e57373',\n    400: '#ef5350',\n    500: '#f44336',\n    600: '#e53935',\n    700: '#d32f2f',\n    800: '#c62828',\n    900: '#b71c1c',\n    A100: '#ff8a80',\n    A200: '#ff5252',\n    A400: '#ff1744',\n    A700: '#d50000'\n  },\n  pink: {\n    50: '#fce4ec',\n    100: '#f8bbd0',\n    200: '#f48fb1',\n    300: '#f06292',\n    400: '#ec407a',\n    500: '#e91e63',\n    600: '#d81b60',\n    700: '#c2185b',\n    800: '#ad1457',\n    900: '#880e4f',\n    A100: '#ff80ab',\n    A200: '#ff4081',\n    A400: '#f50057',\n    A700: '#c51162'\n  },\n  purple: {\n    50: '#f3e5f5',\n    100: '#e1bee7',\n    200: '#ce93d8',\n    300: '#ba68c8',\n    400: '#ab47bc',\n    500: '#9c27b0',\n    600: '#8e24aa',\n    700: '#7b1fa2',\n    800: '#6a1b9a',\n    900: '#4a148c',\n    A100: '#ea80fc',\n    A200: '#e040fb',\n    A400: '#d500f9',\n    A700: '#aa00ff'\n  },\n  'deep-purple': {\n    50: '#ede7f6',\n    100: '#d1c4e9',\n    200: '#b39ddb',\n    300: '#9575cd',\n    400: '#7e57c2',\n    500: '#673ab7',\n    600: '#5e35b1',\n    700: '#512da8',\n    800: '#4527a0',\n    900: '#311b92',\n    A100: '#b388ff',\n    A200: '#7c4dff',\n    A400: '#651fff',\n    A700: '#6200ea'\n  },\n  indigo: {\n    50: '#e8eaf6',\n    100: '#c5cae9',\n    200: '#9fa8da',\n    300: '#7986cb',\n    400: '#5c6bc0',\n    500: '#3f51b5',\n    600: '#3949ab',\n    700: '#303f9f',\n    800: '#283593',\n    900: '#1a237e',\n    A100: '#8c9eff',\n    A200: '#536dfe',\n    A400: '#3d5afe',\n    A700: '#304ffe'\n  },\n  blue: {\n    50: '#e3f2fd',\n    100: '#bbdefb',\n    200: '#90caf9',\n    300: '#64b5f6',\n    400: '#42a5f5',\n    500: '#2196f3',\n    600: '#1e88e5',\n    700: '#1976d2',\n    800: '#1565c0',\n    900: '#0d47a1',\n    A100: '#82b1ff',\n    A200: '#448aff',\n    A400: '#2979ff',\n    A700: '#2962ff'\n  },\n  'light-blue': {\n    50: '#e1f5fe',\n    100: '#b3e5fc',\n    200: '#81d4fa',\n    300: '#4fc3f7',\n    400: '#29b6f6',\n    500: '#03a9f4',\n    600: '#039be5',\n    700: '#0288d1',\n    800: '#0277bd',\n    900: '#01579b',\n    A100: '#80d8ff',\n    A200: '#40c4ff',\n    A400: '#00b0ff',\n    A700: '#0091ea'\n  },\n  cyan: {\n    50: '#e0f7fa',\n    100: '#b2ebf2',\n    200: '#80deea',\n    300: '#4dd0e1',\n    400: '#26c6da',\n    500: '#00bcd4',\n    600: '#00acc1',\n    700: '#0097a7',\n    800: '#00838f',\n    900: '#006064',\n    A100: '#84ffff',\n    A200: '#18ffff',\n    A400: '#00e5ff',\n    A700: '#00b8d4'\n  },\n  teal: {\n    50: '#e0f2f1',\n    100: '#b2dfdb',\n    200: '#80cbc4',\n    300: '#4db6ac',\n    400: '#26a69a',\n    500: '#009688',\n    600: '#00897b',\n    700: '#00796b',\n    800: '#00695c',\n    900: '#004d40',\n    A100: '#a7ffeb',\n    A200: '#64ffda',\n    A400: '#1de9b6',\n    A700: '#00bfa5'\n  },\n  green: {\n    50: '#e8f5e9',\n    100: '#c8e6c9',\n    200: '#a5d6a7',\n    300: '#81c784',\n    400: '#66bb6a',\n    500: '#4caf50',\n    600: '#43a047',\n    700: '#388e3c',\n    800: '#2e7d32',\n    900: '#1b5e20',\n    A100: '#b9f6ca',\n    A200: '#69f0ae',\n    A400: '#00e676',\n    A700: '#00c853'\n  },\n  'light-green': {\n    50: '#f1f8e9',\n    100: '#dcedc8',\n    200: '#c5e1a5',\n    300: '#aed581',\n    400: '#9ccc65',\n    500: '#8bc34a',\n    600: '#7cb342',\n    700: '#689f38',\n    800: '#558b2f',\n    900: '#33691e',\n    A100: '#ccff90',\n    A200: '#b2ff59',\n    A400: '#76ff03',\n    A700: '#64dd17'\n  },\n  lime: {\n    50: '#f9fbe7',\n    100: '#f0f4c3',\n    200: '#e6ee9c',\n    300: '#dce775',\n    400: '#d4e157',\n    500: '#cddc39',\n    600: '#c0ca33',\n    700: '#afb42b',\n    800: '#9e9d24',\n    900: '#827717',\n    A100: '#f4ff81',\n    A200: '#eeff41',\n    A400: '#c6ff00',\n    A700: '#aeea00'\n  },\n  yellow: {\n    50: '#fffde7',\n    100: '#fff9c4',\n    200: '#fff59d',\n    300: '#fff176',\n    400: '#ffee58',\n    500: '#ffeb3b',\n    600: '#fdd835',\n    700: '#fbc02d',\n    800: '#f9a825',\n    900: '#f57f17',\n    A100: '#ffff8d',\n    A200: '#ffff00',\n    A400: '#ffea00',\n    A700: '#ffd600'\n  },\n  amber: {\n    50: '#fff8e1',\n    100: '#ffecb3',\n    200: '#ffe082',\n    300: '#ffd54f',\n    400: '#ffca28',\n    500: '#ffc107',\n    600: '#ffb300',\n    700: '#ffa000',\n    800: '#ff8f00',\n    900: '#ff6f00',\n    A100: '#ffe57f',\n    A200: '#ffd740',\n    A400: '#ffc400',\n    A700: '#ffab00'\n  },\n  orange: {\n    50: '#fff3e0',\n    100: '#ffe0b2',\n    200: '#ffcc80',\n    300: '#ffb74d',\n    400: '#ffa726',\n    500: '#ff9800',\n    600: '#fb8c00',\n    700: '#f57c00',\n    800: '#ef6c00',\n    900: '#e65100',\n    A100: '#ffd180',\n    A200: '#ffab40',\n    A400: '#ff9100',\n    A700: '#ff6d00'\n  },\n  'deep-orange': {\n    50: '#fbe9e7',\n    100: '#ffccbc',\n    200: '#ffab91',\n    300: '#ff8a65',\n    400: '#ff7043',\n    500: '#ff5722',\n    600: '#f4511e',\n    700: '#e64a19',\n    800: '#d84315',\n    900: '#bf360c',\n    A100: '#ff9e80',\n    A200: '#ff6e40',\n    A400: '#ff3d00',\n    A700: '#dd2c00'\n  },\n  brown: {\n    50: '#efebe9',\n    100: '#d7ccc8',\n    200: '#bcaaa4',\n    300: '#a1887f',\n    400: '#8d6e63',\n    500: '#795548',\n    600: '#6d4c41',\n    700: '#5d4037',\n    800: '#4e342e',\n    900: '#3e2723',\n    A100: '#d7ccc8',\n    A200: '#bcaaa4',\n    A400: '#8d6e63',\n    A700: '#5d4037'\n  },\n  grey: {\n    50: '#fafafa',\n    100: '#f5f5f5',\n    200: '#eeeeee',\n    300: '#e0e0e0',\n    400: '#bdbdbd',\n    500: '#9e9e9e',\n    600: '#757575',\n    700: '#616161',\n    800: '#424242',\n    900: '#212121',\n    A100: '#ffffff',\n    A200: '#000000',\n    A400: '#303030',\n    A700: '#616161'\n  },\n  'blue-grey': {\n    50: '#eceff1',\n    100: '#cfd8dc',\n    200: '#b0bec5',\n    300: '#90a4ae',\n    400: '#78909c',\n    500: '#607d8b',\n    600: '#546e7a',\n    700: '#455a64',\n    800: '#37474f',\n    900: '#263238',\n    A100: '#cfd8dc',\n    A200: '#b0bec5',\n    A400: '#78909c',\n    A700: '#455a64'\n  }\n};\n\nexport const materialColors = new Array<MaterialColorItem>();\n\nconst colorPalettes = ['blue', 'green', 'red', 'amber', 'blue-grey', 'purple', 'light-green',\n  'indigo', 'pink', 'yellow', 'light-blue', 'orange', 'deep-purple', 'lime', 'teal', 'brown', 'cyan', 'deep-orange', 'grey'];\nconst colorSpectrum = ['500', 'A700', '600', '700', '800', '900', '300', '400', 'A200', 'A400'];\n\nfor (const key of Object.keys(materialColorPalette)) {\n  const value = materialColorPalette[key];\n  for (const label of Object.keys(value)) {\n    if (colorSpectrum.indexOf(label) > -1) {\n      const colorValue = value[label];\n      const color = tinycolor(colorValue);\n      const isDark = color.isDark();\n      const colorItem = {\n        value: color.toHexString(),\n        group: key,\n        label,\n        isDark\n      };\n      materialColors.push(colorItem);\n    }\n  }\n}\n\nmaterialColors.sort((colorItem1, colorItem2) => {\n  const spectrumIndex1 = colorSpectrum.indexOf(colorItem1.label);\n  const spectrumIndex2 = colorSpectrum.indexOf(colorItem2.label);\n  let result = spectrumIndex1 - spectrumIndex2;\n  if (result === 0) {\n    const paletteIndex1 = colorPalettes.indexOf(colorItem1.group);\n    const paletteIndex2 = colorPalettes.indexOf(colorItem2.group);\n    result = paletteIndex1 - paletteIndex2;\n  }\n  return result;\n});\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { animate, keyframes, query, stagger, state, style, transition, trigger } from '@angular/animations';\n\nexport const speedDialFabAnimations = [\n  trigger('fabToggler', [\n    state('inactive', style({\n      transform: 'rotate(0deg)'\n    })),\n    state('active', style({\n      transform: 'rotate(225deg)'\n    })),\n    transition('* <=> *', animate('200ms cubic-bezier(0.4, 0.0, 0.2, 1)')),\n  ]),\n  trigger('speedDialStagger', [\n    transition('* => *', [\n\n      query(':enter', style({ opacity: 0 }), {optional: true}),\n\n      query(':enter', stagger('40ms',\n        [\n          animate('200ms cubic-bezier(0.4, 0.0, 0.2, 1)',\n            keyframes(\n              [\n                style({opacity: 0, transform: 'translateY(10px)'}),\n                style({opacity: 1, transform: 'translateY(0)'}),\n              ]\n            )\n          )\n        ]\n      ), {optional: true}),\n\n      query(':leave',\n        animate('200ms cubic-bezier(0.4, 0.0, 0.2, 1)',\n          keyframes([\n            style({opacity: 1}),\n            style({opacity: 0}),\n          ])\n        ), {optional: true}\n      )\n\n    ])\n  ])\n];\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, Inject, InjectionToken } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { DashboardInfo } from '../models/dashboard.models';\n\nexport const DASHBOARD_SELECT_PANEL_DATA = new InjectionToken<any>('DashboardSelectPanelData');\n\nexport interface DashboardSelectPanelData {\n  dashboards$: Observable<Array<DashboardInfo>>;\n  dashboardId: string;\n  onDashboardSelected: (dashboardId: string) => void;\n}\n\n@Component({\n  selector: 'tb-dashboard-select-panel',\n  templateUrl: './dashboard-select-panel.component.html',\n  styleUrls: ['./dashboard-select-panel.component.scss']\n})\nexport class DashboardSelectPanelComponent {\n\n  dashboards$: Observable<Array<DashboardInfo>>;\n  dashboardId: string;\n\n  constructor(@Inject(DASHBOARD_SELECT_PANEL_DATA)\n              private data: DashboardSelectPanelData) {\n    this.dashboards$ = this.data.dashboards$;\n    this.dashboardId = this.data.dashboardId;\n  }\n\n  public dashboardSelected(dashboardId: string) {\n    this.data.onDashboardSelected(dashboardId);\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<div fxLayout=\"column\" class=\"mat-content mat-padding\">\n  <mat-form-field>\n    <mat-label>{{'dashboard.select-dashboard' | translate}}</mat-label>\n    <mat-select matInput [(ngModel)]=\"dashboardId\"\n                (ngModelChange)=\"dashboardSelected(dashboardId)\">\n      <mat-option *ngFor=\"let dashboard of dashboards$ | async\" [value]=\"dashboard.id.id\">\n        {{dashboard.title}}\n      </mat-option>\n    </mat-select>\n  </mat-form-field>\n</div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { BaseData } from '@shared/models/base-data';\nimport { TenantId } from '@shared/models/id/tenant-id';\nimport { CustomerId } from '@shared/models/id/customer-id';\nimport { EdgeId } from '@shared/models/id/edge-id';\nimport { EntitySearchQuery } from '@shared/models/relation.models';\nimport { RuleChainId } from '@shared/models/id/rule-chain-id';\nimport { BaseEventBody } from '@shared/models/event.models';\nimport { EventId } from '@shared/models/id/event-id';\n\nexport interface Edge extends BaseData<EdgeId> {\n  tenantId?: TenantId;\n  customerId?: CustomerId;\n  name: string;\n  type: string;\n  secret: string;\n  routingKey: string;\n  cloudEndpoint: string;\n  edgeLicenseKey: string;\n  label?: string;\n  additionalInfo?: any;\n  rootRuleChainId?: RuleChainId;\n}\n\nexport interface EdgeInfo extends Edge {\n  customerTitle: string;\n  customerIsPublic: boolean;\n}\n\nexport interface EdgeSearchQuery extends EntitySearchQuery {\n  edgeTypes: Array<string>;\n}\n\nexport enum EdgeEventType {\n  DASHBOARD = \"DASHBOARD\",\n  ASSET = \"ASSET\",\n  DEVICE = \"DEVICE\",\n  DEVICE_PROFILE = \"DEVICE_PROFILE\",\n  ENTITY_VIEW = \"ENTITY_VIEW\",\n  ALARM = \"ALARM\",\n  RULE_CHAIN = \"RULE_CHAIN\",\n  RULE_CHAIN_METADATA = \"RULE_CHAIN_METADATA\",\n  EDGE = \"EDGE\",\n  USER = \"USER\",\n  CUSTOMER = \"CUSTOMER\",\n  RELATION = \"RELATION\",\n  TENANT = \"TENANT\",\n  WIDGETS_BUNDLE = \"WIDGETS_BUNDLE\",\n  WIDGET_TYPE = \"WIDGET_TYPE\",\n  ADMIN_SETTINGS = \"ADMIN_SETTINGS\"\n}\n\nexport enum EdgeEventActionType {\n  ADDED = \"ADDED\",\n  DELETED = \"DELETED\",\n  UPDATED = \"UPDATED\",\n  POST_ATTRIBUTES = \"POST_ATTRIBUTES\",\n  ATTRIBUTES_UPDATED = \"ATTRIBUTES_UPDATED\",\n  ATTRIBUTES_DELETED = \"ATTRIBUTES_DELETED\",\n  TIMESERIES_UPDATED = \"TIMESERIES_UPDATED\",\n  CREDENTIALS_UPDATED = \"CREDENTIALS_UPDATED\",\n  ASSIGNED_TO_CUSTOMER = \"ASSIGNED_TO_CUSTOMER\",\n  UNASSIGNED_FROM_CUSTOMER = \"UNASSIGNED_FROM_CUSTOMER\",\n  RELATION_ADD_OR_UPDATE = \"RELATION_ADD_OR_UPDATE\",\n  RELATION_DELETED = \"RELATION_DELETED\",\n  RPC_CALL = \"RPC_CALL\",\n  ALARM_ACK = \"ALARM_ACK\",\n  ALARM_CLEAR = \"ALARM_CLEAR\",\n  ASSIGNED_TO_EDGE = \"ASSIGNED_TO_EDGE\",\n  UNASSIGNED_FROM_EDGE = \"UNASSIGNED_FROM_EDGE\",\n  CREDENTIALS_REQUEST = \"CREDENTIALS_REQUEST\",\n  ENTITY_MERGE_REQUEST = \"ENTITY_MERGE_REQUEST\"\n}\n\nexport enum EdgeEventStatus {\n  DEPLOYED = \"DEPLOYED\",\n  PENDING = \"PENDING\"\n}\n\nexport const edgeEventTypeTranslations = new Map<EdgeEventType, string>(\n  [\n    [EdgeEventType.DASHBOARD, 'edge-event.type-dashboard'],\n    [EdgeEventType.ASSET, 'edge-event.type-asset'],\n    [EdgeEventType.DEVICE, 'edge-event.type-device'],\n    [EdgeEventType.DEVICE_PROFILE, 'edge-event.type-device-profile'],\n    [EdgeEventType.ENTITY_VIEW, 'edge-event.type-entity-view'],\n    [EdgeEventType.ALARM, 'edge-event.type-alarm'],\n    [EdgeEventType.RULE_CHAIN, 'edge-event.type-rule-chain'],\n    [EdgeEventType.RULE_CHAIN_METADATA, 'edge-event.type-rule-chain-metadata'],\n    [EdgeEventType.EDGE, 'edge-event.type-edge'],\n    [EdgeEventType.USER, 'edge-event.type-user'],\n    [EdgeEventType.CUSTOMER, 'edge-event.type-customer'],\n    [EdgeEventType.RELATION, 'edge-event.type-relation'],\n    [EdgeEventType.TENANT, 'edge-event.type-tenant'],\n    [EdgeEventType.WIDGETS_BUNDLE, 'edge-event.type-widgets-bundle'],\n    [EdgeEventType.WIDGET_TYPE, 'edge-event.type-widgets-type'],\n    [EdgeEventType.ADMIN_SETTINGS, 'edge-event.type-admin-settings']\n  ]\n);\n\nexport const edgeEventActionTypeTranslations = new Map<EdgeEventActionType, string>(\n  [\n    [EdgeEventActionType.ADDED, 'edge-event.action-type-added'],\n    [EdgeEventActionType.DELETED, 'edge-event.action-type-deleted'],\n    [EdgeEventActionType.UPDATED, 'edge-event.action-type-updated'],\n    [EdgeEventActionType.POST_ATTRIBUTES, 'edge-event.action-type-post-attributes'],\n    [EdgeEventActionType.ATTRIBUTES_UPDATED, 'edge-event.action-type-attributes-updated'],\n    [EdgeEventActionType.ATTRIBUTES_DELETED, 'edge-event.action-type-attributes-deleted'],\n    [EdgeEventActionType.TIMESERIES_UPDATED, 'edge-event.action-type-timeseries-updated'],\n    [EdgeEventActionType.CREDENTIALS_UPDATED, 'edge-event.action-type-credentials-updated'],\n    [EdgeEventActionType.ASSIGNED_TO_CUSTOMER, 'edge-event.action-type-assigned-to-customer'],\n    [EdgeEventActionType.UNASSIGNED_FROM_CUSTOMER, 'edge-event.action-type-unassigned-from-customer'],\n    [EdgeEventActionType.RELATION_ADD_OR_UPDATE, 'edge-event.action-type-relation-add-or-update'],\n    [EdgeEventActionType.RELATION_DELETED, 'edge-event.action-type-relation-deleted'],\n    [EdgeEventActionType.RPC_CALL, 'edge-event.action-type-rpc-call'],\n    [EdgeEventActionType.ALARM_ACK, 'edge-event.action-type-alarm-ack'],\n    [EdgeEventActionType.ALARM_CLEAR, 'edge-event.action-type-alarm-clear'],\n    [EdgeEventActionType.ASSIGNED_TO_EDGE, 'edge-event.action-type-assigned-to-edge'],\n    [EdgeEventActionType.UNASSIGNED_FROM_EDGE, 'edge-event.action-type-unassigned-from-edge'],\n    [EdgeEventActionType.CREDENTIALS_REQUEST, 'edge-event.action-type-credentials-request'],\n    [EdgeEventActionType.ENTITY_MERGE_REQUEST, 'edge-event.action-type-entity-merge-request']\n  ]\n);\n\nexport const bodyContentEdgeEventActionTypes: EdgeEventActionType[] = [\n  EdgeEventActionType.POST_ATTRIBUTES,\n  EdgeEventActionType.ATTRIBUTES_UPDATED,\n  EdgeEventActionType.ATTRIBUTES_DELETED,\n  EdgeEventActionType.TIMESERIES_UPDATED,\n  EdgeEventActionType.RPC_CALL\n];\n\nexport const edgeEventStatusColor = new Map<EdgeEventStatus, string>(\n  [\n    [EdgeEventStatus.DEPLOYED, '#000000'],\n    [EdgeEventStatus.PENDING, '#9e9e9e']\n  ]\n);\n\nexport interface EdgeEventBody extends BaseEventBody {\n  type: string;\n  action: string;\n  entityId: string;\n}\n\nexport interface EdgeEvent extends BaseData<EventId> {\n  tenantId: TenantId;\n  entityId: string;\n  edgeId: EdgeId;\n  action: EdgeEventActionType;\n  type: EdgeEventType;\n  uid: string;\n  body: string;\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { AfterViewInit, Component, forwardRef, Input, OnInit } from '@angular/core';\nimport { ControlValueAccessor, FormBuilder, FormGroup, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { TranslateService } from '@ngx-translate/core';\nimport { AliasEntityType, EntityType } from '@shared/models/entity-type.models';\nimport { EntityService } from '@core/http/entity.service';\nimport { EntityId } from '@shared/models/id/entity-id';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { NULL_UUID } from '@shared/models/id/has-uuid';\n\n@Component({\n  selector: 'tb-entity-select',\n  templateUrl: './entity-select.component.html',\n  styleUrls: ['./entity-select.component.scss'],\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => EntitySelectComponent),\n    multi: true\n  }]\n})\nexport class EntitySelectComponent implements ControlValueAccessor, OnInit, AfterViewInit {\n\n  entitySelectFormGroup: FormGroup;\n\n  modelValue: EntityId = {entityType: null, id: null};\n\n  @Input()\n  allowedEntityTypes: Array<EntityType | AliasEntityType>;\n\n  @Input()\n  useAliasEntityTypes: boolean;\n\n  private requiredValue: boolean;\n  get required(): boolean {\n    return this.requiredValue;\n  }\n  @Input()\n  set required(value: boolean) {\n    this.requiredValue = coerceBooleanProperty(value);\n  }\n\n  @Input()\n  disabled: boolean;\n\n  displayEntityTypeSelect: boolean;\n\n  AliasEntityType = AliasEntityType;\n\n  private readonly defaultEntityType: EntityType | AliasEntityType = null;\n\n  private propagateChange = (v: any) => { };\n\n  constructor(private store: Store<AppState>,\n              private entityService: EntityService,\n              public translate: TranslateService,\n              private fb: FormBuilder) {\n\n    const entityTypes = this.entityService.prepareAllowedEntityTypesList(this.allowedEntityTypes,\n                                                                         this.useAliasEntityTypes);\n    if (entityTypes.length === 1) {\n      this.displayEntityTypeSelect = false;\n      this.defaultEntityType = entityTypes[0];\n    } else {\n      this.displayEntityTypeSelect = true;\n    }\n\n    this.entitySelectFormGroup = this.fb.group({\n      entityType: [this.defaultEntityType],\n      entityId: [null]\n    });\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  ngOnInit() {\n    this.entitySelectFormGroup.get('entityType').valueChanges.subscribe(\n      (value) => {\n        this.updateView(value, this.modelValue.id);\n      }\n    );\n    this.entitySelectFormGroup.get('entityId').valueChanges.subscribe(\n      (value) => {\n        const id = value ? (typeof value === 'string' ? value : value.id) : null;\n        this.updateView(this.modelValue.entityType, id);\n      }\n    );\n  }\n\n  ngAfterViewInit(): void {\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    if (this.disabled) {\n      this.entitySelectFormGroup.disable();\n    } else {\n      this.entitySelectFormGroup.enable();\n    }\n  }\n\n  writeValue(value: EntityId | null): void {\n    if (value != null) {\n      if (value.id === NULL_UUID) {\n        value.id = null;\n      }\n      this.modelValue = value;\n      this.entitySelectFormGroup.get('entityType').patchValue(value.entityType, {emitEvent: true});\n      this.entitySelectFormGroup.get('entityId').patchValue(value, {emitEvent: true});\n    } else {\n      this.modelValue = {\n        entityType: this.defaultEntityType,\n        id: null\n      };\n      this.entitySelectFormGroup.get('entityType').patchValue(this.defaultEntityType, {emitEvent: true});\n      this.entitySelectFormGroup.get('entityId').patchValue(null, {emitEvent: true});\n    }\n  }\n\n  updateView(entityType: EntityType | AliasEntityType | null, entityId: string | null) {\n    if (this.modelValue.entityType !== entityType || this.modelValue.id !== entityId) {\n      this.modelValue = {\n        entityType,\n        id: this.modelValue.entityType !== entityType ? null : entityId\n      };\n\n      if (this.modelValue.entityType === AliasEntityType.CURRENT_TENANT\n        || this.modelValue.entityType === AliasEntityType.CURRENT_USER\n        || this.modelValue.entityType === AliasEntityType.CURRENT_USER_OWNER) {\n        this.modelValue.id = NULL_UUID;\n      } else if (this.modelValue.entityType === AliasEntityType.CURRENT_CUSTOMER && !this.modelValue.id) {\n        this.modelValue.id = NULL_UUID;\n      }\n\n      if (this.modelValue.entityType && this.modelValue.id) {\n        this.propagateChange(this.modelValue);\n      } else {\n        this.propagateChange(null);\n      }\n    }\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<div fxLayout=\"row\" class=\"tb-entity-select\" [formGroup]=\"entitySelectFormGroup\">\n  <tb-entity-type-select\n    style=\"min-width: 100px; padding-right: 8px;\"\n    *ngIf=\"displayEntityTypeSelect\"\n    [showLabel]=\"true\"\n    [required]=\"required\"\n    [useAliasEntityTypes]=\"useAliasEntityTypes\"\n    [allowedEntityTypes]=\"allowedEntityTypes\"\n    formControlName=\"entityType\">\n  </tb-entity-type-select>\n  <tb-entity-autocomplete\n    fxFlex\n    *ngIf=\"modelValue.entityType && modelValue.entityType !== AliasEntityType.CURRENT_TENANT\n                                 && modelValue.entityType !== AliasEntityType.CURRENT_USER\n                                 && modelValue.entityType !== AliasEntityType.CURRENT_USER_OWNER\"\n    [required]=\"required\"\n    [entityType]=\"modelValue.entityType\"\n    formControlName=\"entityId\">\n  </tb-entity-autocomplete>\n</div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { EntityId } from './entity-id';\nimport { EntityType } from '@shared/models/entity-type.models';\n\nexport class CustomerId implements EntityId {\n  entityType = EntityType.CUSTOMER;\n  id: string;\n  constructor(id: string) {\n    this.id = id;\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, HostListener, Input } from '@angular/core';\nimport { PageComponent } from '@shared/components/page.component';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { speedDialFabAnimations } from '@shared/animations/speed-dial-fab.animations';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\n\nexport interface FooterFabButton {\n  name: string;\n  icon: string;\n  onAction: ($event: Event) => void;\n}\n\nexport interface FooterFabButtons {\n  fabTogglerName: string;\n  fabTogglerIcon: string;\n  buttons: Array<FooterFabButton>;\n}\n\n@Component({\n  selector: 'tb-footer-fab-buttons',\n  templateUrl: './footer-fab-buttons.component.html',\n  styleUrls: ['./footer-fab-buttons.component.scss'],\n  animations: speedDialFabAnimations\n})\nexport class FooterFabButtonsComponent extends PageComponent {\n\n  @Input()\n  footerFabButtons: FooterFabButtons;\n\n  private relativeValue: boolean;\n  get relative(): boolean {\n    return this.relativeValue;\n  }\n  @Input()\n  set relative(value: boolean) {\n    this.relativeValue = coerceBooleanProperty(value);\n  }\n\n  buttons: Array<FooterFabButton> = [];\n  fabTogglerState = 'inactive';\n\n  closeTimeout = null;\n\n  @HostListener('focusout', ['$event'])\n  onFocusOut($event) {\n    if (!this.closeTimeout) {\n      this.closeTimeout = setTimeout(() => {\n        this.hideItems();\n      }, 100);\n    }\n  }\n\n  @HostListener('focusin', ['$event'])\n  onFocusIn($event) {\n    if (this.closeTimeout) {\n      clearTimeout(this.closeTimeout);\n      this.closeTimeout = null;\n    }\n  }\n\n  constructor(protected store: Store<AppState>) {\n    super(store);\n  }\n\n  showItems() {\n    this.fabTogglerState = 'active';\n    this.buttons = this.footerFabButtons.buttons;\n  }\n\n  hideItems() {\n    this.fabTogglerState = 'inactive';\n    this.buttons = [];\n  }\n\n  onToggleFab() {\n    this.buttons.length ? this.hideItems() : this.showItems();\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<section fxLayout=\"row\" class=\"layout-wrap tb-footer-fab-buttons\" [ngClass]=\"{'relative-buttons': relative}\">\n  <div class=\"fab-container\">\n    <button [disabled]=\"isLoading$ | async\"\n            mat-fab class=\"fab-toggler tb-btn-footer\"\n            color=\"accent\"\n            matTooltip=\"{{ footerFabButtons.fabTogglerName | translate }}\"\n            matTooltipPosition=\"above\"\n            (click)=\"onToggleFab()\">\n      <mat-icon [@fabToggler]=\"{value: fabTogglerState}\">{{ footerFabButtons.fabTogglerIcon }}</mat-icon>\n    </button>\n    <div [@speedDialStagger]=\"buttons.length\">\n      <button *ngFor=\"let btn of buttons\"\n              mat-fab\n              color=\"accent\"\n        matTooltip=\"{{ btn.name | translate }}\"\n        matTooltipPosition=\"above\"\n        (click)=\"btn.onAction($event)\">\n        <mat-icon>{{btn.icon}}</mat-icon>\n      </button>\n    </div>\n  </div>\n</section>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { BaseData } from '@shared/models/base-data';\nimport { TenantId } from '@shared/models/id/tenant-id';\nimport { RuleChainId } from '@shared/models/id/rule-chain-id';\nimport { RuleNodeId } from '@shared/models/id/rule-node-id';\nimport { RuleNode, RuleNodeComponentDescriptor, RuleNodeType } from '@shared/models/rule-node.models';\nimport { ComponentType } from '@shared/models/component-descriptor.models';\n\nexport interface RuleChain extends BaseData<RuleChainId> {\n  tenantId: TenantId;\n  name: string;\n  firstRuleNodeId: RuleNodeId;\n  root: boolean;\n  debugMode: boolean;\n  type: string;\n  configuration?: any;\n  additionalInfo?: any;\n  isDefault?: boolean;\n}\n\nexport interface RuleChainMetaData {\n  ruleChainId: RuleChainId;\n  firstNodeIndex?: number;\n  nodes: Array<RuleNode>;\n  connections: Array<NodeConnectionInfo>;\n  ruleChainConnections: Array<RuleChainConnectionInfo>;\n}\n\nexport interface ResolvedRuleChainMetaData extends RuleChainMetaData {\n  targetRuleChainsMap: {[ruleChainId: string]: RuleChain};\n}\n\nexport interface RuleChainImport {\n  ruleChain: RuleChain;\n  metadata: RuleChainMetaData;\n  resolvedMetadata?: ResolvedRuleChainMetaData;\n}\n\nexport interface NodeConnectionInfo {\n  fromIndex: number;\n  toIndex: number;\n  type: string;\n}\n\nexport interface RuleChainConnectionInfo {\n  fromIndex: number;\n  targetRuleChainId: RuleChainId;\n  additionalInfo: any;\n  type: string;\n}\n\nexport const ruleNodeTypeComponentTypes: ComponentType[] =\n  [\n    ComponentType.FILTER,\n    ComponentType.ENRICHMENT,\n    ComponentType.TRANSFORMATION,\n    ComponentType.ACTION,\n    ComponentType.EXTERNAL\n  ];\n\nexport const ruleChainNodeComponent: RuleNodeComponentDescriptor = {\n  type: RuleNodeType.RULE_CHAIN,\n  name: 'rule chain',\n  clazz: 'tb.internal.RuleChain',\n  configurationDescriptor: {\n    nodeDefinition: {\n      description: '',\n      details: 'Forwards incoming messages to specified Rule Chain',\n      inEnabled: true,\n      outEnabled: false,\n      relationTypes: [],\n      customRelations: false,\n      defaultConfiguration: {}\n    }\n  }\n};\n\nexport const unknownNodeComponent: RuleNodeComponentDescriptor = {\n  type: RuleNodeType.UNKNOWN,\n  name: 'unknown',\n  clazz: 'tb.internal.Unknown',\n  configurationDescriptor: {\n    nodeDefinition: {\n      description: '',\n      details: '',\n      inEnabled: true,\n      outEnabled: true,\n      relationTypes: [],\n      customRelations: false,\n      defaultConfiguration: {}\n    }\n  }\n};\n\nexport const inputNodeComponent: RuleNodeComponentDescriptor = {\n  type: RuleNodeType.INPUT,\n  name: 'Input',\n  clazz: 'tb.internal.Input'\n};\n\nexport enum RuleChainType {\n  CORE = 'CORE',\n  EDGE = 'EDGE'\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { AfterViewInit, Component, forwardRef, Input, OnInit } from '@angular/core';\nimport { ControlValueAccessor, FormBuilder, FormGroup, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@app/core/core.state';\nimport { TranslateService } from '@ngx-translate/core';\nimport { AliasEntityType, EntityType, entityTypeTranslations } from '@app/shared/models/entity-type.models';\nimport { EntityService } from '@core/http/entity.service';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\n\n@Component({\n  selector: 'tb-entity-type-select',\n  templateUrl: './entity-type-select.component.html',\n  styleUrls: ['./entity-type-select.component.scss'],\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => EntityTypeSelectComponent),\n    multi: true\n  }]\n})\nexport class EntityTypeSelectComponent implements ControlValueAccessor, OnInit, AfterViewInit {\n\n  entityTypeFormGroup: FormGroup;\n\n  modelValue: EntityType | AliasEntityType | null;\n\n  @Input()\n  allowedEntityTypes: Array<EntityType | AliasEntityType>;\n\n  @Input()\n  useAliasEntityTypes: boolean;\n\n  private showLabelValue: boolean;\n  get showLabel(): boolean {\n    return this.showLabelValue;\n  }\n  @Input()\n  set showLabel(value: boolean) {\n    this.showLabelValue = coerceBooleanProperty(value);\n  }\n\n  private requiredValue: boolean;\n  get required(): boolean {\n    return this.requiredValue;\n  }\n  @Input()\n  set required(value: boolean) {\n    this.requiredValue = coerceBooleanProperty(value);\n  }\n\n  @Input()\n  disabled: boolean;\n\n  entityTypes: Array<EntityType | AliasEntityType>;\n\n  private propagateChange = (v: any) => { };\n\n  constructor(private store: Store<AppState>,\n              private entityService: EntityService,\n              public translate: TranslateService,\n              private fb: FormBuilder) {\n    this.entityTypeFormGroup = this.fb.group({\n      entityType: [null]\n    });\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  ngOnInit() {\n    this.entityTypes = this.entityService.prepareAllowedEntityTypesList(this.allowedEntityTypes, this.useAliasEntityTypes);\n    this.entityTypeFormGroup.get('entityType').valueChanges.subscribe(\n      (value) => {\n        let modelValue;\n        if (!value || value === '') {\n          modelValue = null;\n        } else {\n          modelValue = value;\n        }\n        this.updateView(modelValue);\n      }\n    );\n  }\n\n  ngAfterViewInit(): void {\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    if (this.disabled) {\n      this.entityTypeFormGroup.disable();\n    } else {\n      this.entityTypeFormGroup.enable();\n    }\n  }\n\n  writeValue(value: EntityType | AliasEntityType | null): void {\n    if (value != null) {\n      this.modelValue = value;\n      this.entityTypeFormGroup.get('entityType').patchValue(value, {emitEvent: true});\n    } else {\n      this.modelValue = null;\n      this.entityTypeFormGroup.get('entityType').patchValue(null, {emitEvent: true});\n    }\n  }\n\n  updateView(value: EntityType | AliasEntityType | null) {\n    if (this.modelValue !== value) {\n      this.modelValue = value;\n      this.propagateChange(this.modelValue);\n    }\n  }\n\n  displayEntityTypeFn(entityType?: EntityType | AliasEntityType | null): string | undefined {\n    if (entityType) {\n      return this.translate.instant(entityTypeTranslations.get(entityType as EntityType).type);\n    } else {\n      return '';\n    }\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<mat-form-field [formGroup]=\"entityTypeFormGroup\">\n  <mat-label *ngIf=\"showLabel\">{{ 'entity.type' | translate }}</mat-label>\n  <mat-select [required]=\"required\"\n              class=\"tb-entity-type-select\" matInput formControlName=\"entityType\">\n    <mat-option *ngFor=\"let type of entityTypes\" [value]=\"type\">\n      {{ displayEntityTypeFn(type) }}\n    </mat-option>\n  </mat-select>\n  <mat-error *ngIf=\"entityTypeFormGroup.get('entityType').hasError('required')\">\n    {{ 'entity.type-required' | translate }}\n  </mat-error>\n</mat-form-field>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport {\n  Directive,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnChanges,\n  OnDestroy,\n  Output,\n  Renderer2,\n  SecurityContext,\n  SimpleChanges,\n  ViewContainerRef\n} from '@angular/core';\nimport { Overlay, OverlayConfig, OverlayRef } from '@angular/cdk/overlay';\nimport { ComponentPortal } from '@angular/cdk/portal';\nimport { TbAnchorComponent } from '@shared/components/tb-anchor.component';\nimport { DomSanitizer, SafeStyle } from '@angular/platform-browser';\n\n@Directive({\n  selector: '[tb-fullscreen]'\n})\nexport class FullscreenDirective implements OnChanges, OnDestroy {\n\n  fullscreenValue = false;\n\n  private overlayRef: OverlayRef;\n  private parentElement: HTMLElement;\n\n  @Input()\n  fullscreen: boolean;\n\n  @Input()\n  fullscreenElement: HTMLElement;\n\n  @Input()\n  fullscreenBackgroundStyle: {[klass: string]: any};\n\n  @Input()\n  fullscreenBackgroundImage: SafeStyle | string;\n\n  @Output()\n  fullscreenChanged = new EventEmitter<boolean>();\n\n  constructor(public elementRef: ElementRef,\n              private renderer: Renderer2,\n              private sanitizer: DomSanitizer,\n              private viewContainerRef: ViewContainerRef,\n              private overlay: Overlay) {\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    let updateFullscreen = false;\n    for (const propName of Object.keys(changes)) {\n      const change = changes[propName];\n      if (!change.firstChange && change.currentValue !== change.previousValue) {\n        if (propName === 'fullscreen') {\n          updateFullscreen = true;\n        }\n      }\n    }\n    if (updateFullscreen) {\n      if (this.fullscreen) {\n        this.enterFullscreen();\n      } else {\n        this.exitFullscreen();\n      }\n    }\n  }\n\n  ngOnDestroy(): void {\n    if (this.fullscreen) {\n      this.exitFullscreen();\n    }\n  }\n\n  enterFullscreen() {\n    const targetElement: HTMLElement = this.fullscreenElement || this.elementRef.nativeElement;\n    this.parentElement = targetElement.parentElement;\n    this.parentElement.removeChild(targetElement);\n    targetElement.classList.add('tb-fullscreen');\n    const position = this.overlay.position();\n    const config = new OverlayConfig({\n      hasBackdrop: false,\n      panelClass: 'tb-fullscreen-parent'\n    });\n    config.minWidth = '100%';\n    config.minHeight = '100%';\n    config.positionStrategy = position.global().top('0%').left('0%')\n      .right('0%').bottom('0%');\n\n    this.overlayRef = this.overlay.create(config);\n    this.overlayRef.attach(new EmptyPortal());\n    if (this.fullscreenBackgroundStyle) {\n      for (const key of Object.keys(this.fullscreenBackgroundStyle)) {\n        this.setStyle(this.overlayRef.overlayElement, key, this.fullscreenBackgroundStyle[key]);\n      }\n    }\n    if (this.fullscreenBackgroundImage) {\n      this.setStyle(this.overlayRef.overlayElement, 'backgroundImage', this.fullscreenBackgroundImage);\n    }\n    this.overlayRef.overlayElement.appendChild( targetElement );\n    this.fullscreenChanged.emit(true);\n  }\n\n  private setStyle(el: any, nameAndUnit: string, value: any): void {\n    const [name, unit] = nameAndUnit.split('.');\n    let renderValue: string|null =\n      this.sanitizer.sanitize(SecurityContext.STYLE, value as{} | string);\n    if (renderValue != null) {\n      renderValue = renderValue.toString();\n    }\n    renderValue = renderValue != null && unit ? `${renderValue}${unit}` : renderValue;\n    if (renderValue != null) {\n      this.renderer.setStyle(this.overlayRef.overlayElement, name, renderValue);\n    } else {\n      this.renderer.removeStyle(this.overlayRef.overlayElement, name);\n    }\n  }\n\n  exitFullscreen() {\n    const targetElement: HTMLElement = this.fullscreenElement || this.elementRef.nativeElement;\n    if (this.parentElement) {\n      this.overlayRef.overlayElement.removeChild( targetElement );\n      this.parentElement.appendChild(targetElement);\n      this.parentElement = null;\n    }\n    targetElement.classList.remove('tb-fullscreen');\n    if (this.elementRef) {\n      this.elementRef.nativeElement.classList.remove('tb-fullscreen');\n    }\n    if (this.overlayRef) {\n      this.overlayRef.dispose();\n    }\n    this.fullscreenChanged.emit(false);\n  }\n}\n\nclass EmptyPortal extends ComponentPortal<TbAnchorComponent> {\n\n  constructor() {\n    super(TbAnchorComponent);\n  }\n\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { AfterViewInit, Component, forwardRef, Input, OnInit } from '@angular/core';\nimport { ControlValueAccessor, FormBuilder, FormGroup, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { TranslateService } from '@ngx-translate/core';\nimport { AliasEntityType, EntityType } from '@shared/models/entity-type.models';\nimport { EntityService } from '@core/http/entity.service';\nimport { EntityId } from '@shared/models/id/entity-id';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\n\ninterface EntityListSelectModel {\n  entityType: EntityType | AliasEntityType;\n  ids: Array<string>;\n}\n\n@Component({\n  selector: 'tb-entity-list-select',\n  templateUrl: './entity-list-select.component.html',\n  styleUrls: ['./entity-list-select.component.scss'],\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => EntityListSelectComponent),\n    multi: true\n  }]\n})\n\nexport class EntityListSelectComponent implements ControlValueAccessor, OnInit, AfterViewInit {\n\n  entityListSelectFormGroup: FormGroup;\n\n  modelValue: EntityListSelectModel = {entityType: null, ids: []};\n\n  @Input()\n  allowedEntityTypes: Array<EntityType | AliasEntityType>;\n\n  @Input()\n  useAliasEntityTypes: boolean;\n\n  private requiredValue: boolean;\n  get required(): boolean {\n    return this.requiredValue;\n  }\n  @Input()\n  set required(value: boolean) {\n    this.requiredValue = coerceBooleanProperty(value);\n  }\n\n  @Input()\n  disabled: boolean;\n\n  displayEntityTypeSelect: boolean;\n\n  private readonly defaultEntityType: EntityType | AliasEntityType = null;\n\n  private propagateChange = (v: any) => { };\n\n  constructor(private store: Store<AppState>,\n              private entityService: EntityService,\n              public translate: TranslateService,\n              private fb: FormBuilder) {\n\n    const entityTypes = this.entityService.prepareAllowedEntityTypesList(this.allowedEntityTypes,\n      this.useAliasEntityTypes);\n    if (entityTypes.length === 1) {\n      this.displayEntityTypeSelect = false;\n      this.defaultEntityType = entityTypes[0];\n    } else {\n      this.displayEntityTypeSelect = true;\n    }\n\n    this.entityListSelectFormGroup = this.fb.group({\n      entityType: [this.defaultEntityType],\n      entityIds: [[]]\n    });\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  ngOnInit() {\n    this.entityListSelectFormGroup.get('entityType').valueChanges.subscribe(\n      (value) => {\n        this.updateView(value, this.modelValue.ids);\n      }\n    );\n    this.entityListSelectFormGroup.get('entityIds').valueChanges.subscribe(\n      (values) => {\n        this.updateView(this.modelValue.entityType, values);\n      }\n    );\n  }\n\n  ngAfterViewInit(): void {\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    if (this.disabled) {\n      this.entityListSelectFormGroup.disable();\n    } else {\n      this.entityListSelectFormGroup.enable();\n    }\n  }\n\n  writeValue(value: Array<EntityId> | null): void {\n    if (value != null && value.length > 0) {\n      const id = value[0];\n      this.modelValue = {\n        entityType: id.entityType,\n        ids: value.map(val => val.id)\n      };\n    } else {\n      this.modelValue = {\n        entityType: this.defaultEntityType,\n        ids: []\n      };\n    }\n    this.entityListSelectFormGroup.get('entityType').patchValue(this.modelValue.entityType, {emitEvent: true});\n    this.entityListSelectFormGroup.get('entityIds').patchValue([...this.modelValue.ids], {emitEvent: true});\n  }\n\n  updateView(entityType: EntityType | AliasEntityType | null, entityIds: Array<string> | null) {\n    if (this.modelValue.entityType !== entityType ||\n      !this.compareIds(this.modelValue.ids, entityIds)) {\n      this.modelValue = {\n        entityType,\n        ids: this.modelValue.entityType !== entityType || !entityIds ? [] : [...entityIds]\n      };\n      this.propagateChange(this.toEntityIds(this.modelValue));\n    }\n  }\n\n  compareIds(ids1: Array<string> | null, ids2: Array<string> | null): boolean {\n    if (ids1 !== null && ids2 !== null) {\n      return JSON.stringify(ids1) === JSON.stringify(ids2);\n    } else {\n      return ids1 === ids2;\n    }\n  }\n\n  toEntityIds(modelValue: EntityListSelectModel): Array<EntityId> {\n    if (modelValue !== null && modelValue.entityType && modelValue.ids && modelValue.ids.length > 0) {\n      const entityType = modelValue.entityType;\n      return modelValue.ids.map(id => ({entityType, id}));\n    } else {\n      return null;\n    }\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<div fxLayout=\"row\" class=\"tb-entity-list-select\" [formGroup]=\"entityListSelectFormGroup\">\n  <tb-entity-type-select\n    style=\"min-width: 100px; padding-right: 8px;\"\n    *ngIf=\"displayEntityTypeSelect\"\n    [showLabel]=\"true\"\n    [required]=\"required\"\n    [useAliasEntityTypes]=\"useAliasEntityTypes\"\n    [allowedEntityTypes]=\"allowedEntityTypes\"\n    formControlName=\"entityType\">\n  </tb-entity-type-select>\n  <tb-entity-list\n    [ngClass]=\"{'tb-not-empty': this.modelValue.ids?.length > 0}\"\n    fxFlex\n    *ngIf=\"modelValue.entityType\"\n    [required]=\"required\"\n    [entityType]=\"modelValue.entityType\"\n    formControlName=\"entityIds\">\n  </tb-entity-list>\n</div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\nimport { defaultHttpOptionsFromConfig, RequestConfig } from './http-utils';\nimport { User } from '@shared/models/user.model';\nimport { Observable } from 'rxjs';\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { PageLink } from '@shared/models/page/page-link';\nimport { PageData } from '@shared/models/page/page-data';\nimport { isDefined } from '@core/utils';\nimport { InterceptorHttpParams } from '@core/interceptors/interceptor-http-params';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserService {\n\n  constructor(\n    private http: HttpClient\n  ) { }\n\n  public getUsers(pageLink: PageLink,\n                  config?: RequestConfig): Observable<PageData<User>> {\n    return this.http.get<PageData<User>>(`/api/users${pageLink.toQuery()}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getTenantAdmins(tenantId: string, pageLink: PageLink,\n                         config?: RequestConfig): Observable<PageData<User>> {\n    return this.http.get<PageData<User>>(`/api/tenant/${tenantId}/users${pageLink.toQuery()}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getCustomerUsers(customerId: string, pageLink: PageLink,\n                          config?: RequestConfig): Observable<PageData<User>> {\n    return this.http.get<PageData<User>>(`/api/customer/${customerId}/users${pageLink.toQuery()}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getUser(userId: string, config?: RequestConfig): Observable<User> {\n    return this.http.get<User>(`/api/user/${userId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public saveUser(user: User, sendActivationMail: boolean = false,\n                  config?: RequestConfig): Observable<User> {\n    let url = '/api/user';\n    url += '?sendActivationMail=' + sendActivationMail;\n    return this.http.post<User>(url, user, defaultHttpOptionsFromConfig(config));\n  }\n\n  public deleteUser(userId: string, config?: RequestConfig) {\n    return this.http.delete(`/api/user/${userId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getActivationLink(userId: string, config?: RequestConfig): Observable<string> {\n    return this.http.get(`/api/user/${userId}/activationLink`,\n      {...{responseType: 'text'}, ...defaultHttpOptionsFromConfig(config)});\n  }\n\n  public sendActivationEmail(email: string, config?: RequestConfig) {\n    const encodeEmail = encodeURIComponent(email);\n    return this.http.post(`/api/user/sendActivationMail?email=${encodeEmail}`, null, defaultHttpOptionsFromConfig(config));\n  }\n\n  public setUserCredentialsEnabled(userId: string, userCredentialsEnabled?: boolean, config?: RequestConfig): Observable<any> {\n    let url = `/api/user/${userId}/userCredentialsEnabled`;\n    if (isDefined(userCredentialsEnabled)) {\n      url += `?userCredentialsEnabled=${userCredentialsEnabled}`;\n    }\n    return this.http.post<User>(url, null, defaultHttpOptionsFromConfig(config));\n  }\n\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Pipe, PipeTransform } from '@angular/core';\n\ntype unit = 'bytes' | 'KB' | 'MB' | 'GB' | 'TB' | 'PB';\ntype unitPrecisionMap = {\n  [u in unit]: number;\n};\n\nconst defaultPrecisionMap: unitPrecisionMap = {\n  bytes: 0,\n  KB: 1,\n  MB: 1,\n  GB: 1,\n  TB: 2,\n  PB: 2\n};\n\n@Pipe({ name: 'fileSize' })\nexport class FileSizePipe implements PipeTransform {\n  private readonly units: unit[] = ['bytes', 'KB', 'MB', 'GB', 'TB', 'PB'];\n\n  transform(bytes: number = 0, precision: number | unitPrecisionMap = defaultPrecisionMap): string {\n    if (isNaN(parseFloat(String(bytes))) || !isFinite(bytes)) {\n      return '?';\n    }\n\n    let unitIndex = 0;\n\n    while (bytes >= 1024) {\n      bytes /= 1024;\n      unitIndex++;\n    }\n\n    const unitSymbol = this.units[unitIndex];\n\n    if (typeof precision === 'number') {\n      return `${bytes.toFixed(+precision)} ${unitSymbol}`;\n    }\n    return `${bytes.toFixed(precision[unitSymbol])} ${unitSymbol}`;\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { ComponentDescriptor, ComponentType } from '@shared/models/component-descriptor.models';\nimport { defaultHttpOptionsFromConfig, RequestConfig } from '@core/http/http-utils';\nimport { Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { RuleNodeType } from '@shared/models/rule-node.models';\nimport { RuleChainType } from '@shared/models/rule-chain.models';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ComponentDescriptorService {\n\n  private componentsByTypeByRuleChainType: Map<RuleChainType, Map<ComponentType | RuleNodeType, Array<ComponentDescriptor>>> =\n    new Map<RuleChainType, Map<ComponentType | RuleNodeType, Array<ComponentDescriptor>>>();\n  private componentsByClazz: Map<string, ComponentDescriptor> = new Map<string, ComponentDescriptor>();\n\n  constructor(\n    private http: HttpClient\n  ) {\n  }\n\n  public getComponentDescriptorsByType(componentType: ComponentType, ruleChainType: RuleChainType, config?: RequestConfig): Observable<Array<ComponentDescriptor>> {\n    if (!this.componentsByTypeByRuleChainType.get(ruleChainType)) {\n      this.componentsByTypeByRuleChainType.set(ruleChainType, new Map<ComponentType | RuleNodeType, Array<ComponentDescriptor>>());\n    }\n    const existing = this.componentsByTypeByRuleChainType.get(ruleChainType).get(componentType);\n    if (existing) {\n      return of(existing);\n    } else {\n      return this.http.get<Array<ComponentDescriptor>>(`/api/components/${componentType}&ruleChainType=${ruleChainType}`, defaultHttpOptionsFromConfig(config)).pipe(\n        map((componentDescriptors) => {\n          this.componentsByTypeByRuleChainType.get(ruleChainType).set(componentType, componentDescriptors);\n          componentDescriptors.forEach((componentDescriptor) => {\n            this.componentsByClazz.set(componentDescriptor.clazz, componentDescriptor);\n          });\n          return componentDescriptors;\n        })\n      );\n    }\n  }\n\n  public getComponentDescriptorsByTypes(componentTypes: Array<ComponentType>, ruleChainType: RuleChainType, config?: RequestConfig): Observable<Array<ComponentDescriptor>> {\n    if (!this.componentsByTypeByRuleChainType.get(ruleChainType)) {\n      this.componentsByTypeByRuleChainType.set(ruleChainType, new Map<ComponentType | RuleNodeType, Array<ComponentDescriptor>>());\n    }\n    let result: ComponentDescriptor[] = [];\n    for (let i = componentTypes.length - 1; i >= 0; i--) {\n      const componentType = componentTypes[i];\n      const componentDescriptors = this.componentsByTypeByRuleChainType.get(ruleChainType).get(componentType);\n      if (componentDescriptors) {\n        result = result.concat(componentDescriptors);\n        componentTypes.splice(i, 1);\n      }\n    }\n    if (!componentTypes.length) {\n      return of(result);\n    } else {\n      return this.http.get<Array<ComponentDescriptor>>(`/api/components?componentTypes=${componentTypes.join(',')}&ruleChainType=${ruleChainType}`,\n        defaultHttpOptionsFromConfig(config)).pipe(\n        map((componentDescriptors) => {\n          componentDescriptors.forEach((componentDescriptor) => {\n            let componentsList = this.componentsByTypeByRuleChainType.get(ruleChainType).get(componentDescriptor.type);\n            if (!componentsList) {\n              componentsList = new Array<ComponentDescriptor>();\n              this.componentsByTypeByRuleChainType.get(ruleChainType).set(componentDescriptor.type, componentsList);\n            }\n            componentsList.push(componentDescriptor);\n            this.componentsByClazz.set(componentDescriptor.clazz, componentDescriptor);\n          });\n          result = result.concat(componentDescriptors);\n          return result;\n        })\n      );\n    }\n  }\n\n  public getComponentDescriptorByClazz(componentDescriptorClazz: string, config?: RequestConfig): Observable<ComponentDescriptor> {\n    const existing = this.componentsByClazz.get(componentDescriptorClazz);\n    if (existing) {\n      return of(existing);\n    } else {\n      return this.http.get<ComponentDescriptor>(`/api/component/${componentDescriptorClazz}`, defaultHttpOptionsFromConfig(config)).pipe(\n        map((componentDescriptor) => {\n          this.componentsByClazz.set(componentDescriptorClazz, componentDescriptor);\n          return componentDescriptor;\n        })\n      );\n    }\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { SettingsState } from './settings.models';\nimport { SettingsActions, SettingsActionTypes } from './settings.actions';\n\nexport const initialState: SettingsState = {\n  userLang: null\n};\n\nexport function settingsReducer(\n  state: SettingsState = initialState,\n  action: SettingsActions\n): SettingsState {\n  switch (action.type) {\n    case SettingsActionTypes.CHANGE_LANGUAGE:\n      return { ...state, ...action.payload };\n    default:\n      return state;\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\n// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  appTitle: 'ThingsBoard',\n  production: false,\n// @ts-ignore\n  tbVersion: TB_VERSION,\n// @ts-ignore\n  supportedLangs: SUPPORTED_LANGS,\n  defaultLang: 'en_US'\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { AfterViewInit, Component, ElementRef, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { RaphaelElement, RaphaelPaper, RaphaelSet } from 'raphael';\nimport * as tinycolor_ from 'tinycolor2';\n\nconst tinycolor = tinycolor_;\n\ninterface CircleElement extends RaphaelElement {\n  theGlow?: RaphaelSet;\n}\n\n@Component({\n  selector: 'tb-led-light',\n  templateUrl: './led-light.component.html',\n  styleUrls: []\n})\nexport class LedLightComponent implements OnInit, AfterViewInit, OnChanges {\n\n  @Input() size: number;\n\n  @Input() colorOn: string;\n\n  @Input() colorOff: string;\n\n  @Input() offOpacity: number;\n\n  private enabledValue: boolean;\n  get enabled(): boolean {\n    return this.enabledValue;\n  }\n  @Input()\n  set enabled(value: boolean) {\n    this.enabledValue = coerceBooleanProperty(value);\n  }\n\n  private canvasSize: number;\n  private radius: number;\n  private glowSize: number;\n  private glowColor: string;\n\n  private paper: RaphaelPaper;\n  private circleElement: CircleElement;\n\n  constructor(private elementRef: ElementRef<HTMLElement>) {\n  }\n\n  ngOnInit(): void {\n    this.offOpacity = this.offOpacity || 0.4;\n    this.glowColor = tinycolor(this.colorOn).lighten().toHexString();\n  }\n\n  ngAfterViewInit(): void {\n    this.update();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    for (const propName of Object.keys(changes)) {\n      const change = changes[propName];\n      if (!change.firstChange && change.currentValue !== change.previousValue) {\n        if (propName === 'enabled' && this.circleElement) {\n          this.draw();\n        } else if (propName === 'size') {\n          this.update();\n        }\n      }\n    }\n  }\n\n  private update() {\n    this.size = this.size || 50;\n    this.canvasSize = this.size;\n    this.radius = this.canvasSize / 4;\n    this.glowSize = this.radius / 5;\n    if (this.paper) {\n      this.paper.remove();\n    }\n    import('raphael').then(\n      (raphael) => {\n        this.paper = raphael.default($('#canvas_container', this.elementRef.nativeElement)[0], this.canvasSize, this.canvasSize);\n        const center = this.canvasSize / 2;\n        this.circleElement = this.paper.circle(center, center, this.radius);\n        this.draw();\n      }\n    );\n  }\n\n  private draw() {\n    if (this.enabled) {\n      this.circleElement.attr('fill', this.colorOn);\n      this.circleElement.attr('stroke', this.colorOn);\n      this.circleElement.attr('opacity', 1);\n      if (this.circleElement.theGlow) {\n        this.circleElement.theGlow.remove();\n      }\n      this.circleElement.theGlow = this.circleElement.glow(\n        {\n          color: this.glowColor,\n          width: this.radius + this.glowSize,\n          opacity: 0.8,\n          fill: true\n        });\n    } else {\n      if (this.circleElement.theGlow) {\n        this.circleElement.theGlow.remove();\n      }\n      this.circleElement.attr('fill', this.colorOff);\n      this.circleElement.attr('stroke', this.colorOff);\n      this.circleElement.attr('opacity', this.offOpacity);\n    }\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<div id=\"canvas_container\" [ngStyle]=\"{width: size + 'px', height: size + 'px'}\"></div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\nimport { defaultHttpOptionsFromConfig, RequestConfig } from './http-utils';\nimport { Observable } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\nimport { EntityRelation, EntityRelationInfo, EntityRelationsQuery } from '@shared/models/relation.models';\nimport { EntityId } from '@app/shared/models/id/entity-id';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EntityRelationService {\n\n  constructor(\n    private http: HttpClient\n  ) { }\n\n  public saveRelation(relation: EntityRelation, config?: RequestConfig): Observable<EntityRelation> {\n    return this.http.post<EntityRelation>('/api/relation', relation, defaultHttpOptionsFromConfig(config));\n  }\n\n  public deleteRelation(fromId: EntityId, relationType: string, toId: EntityId,\n                        config?: RequestConfig) {\n    return this.http.delete(`/api/relation?fromId=${fromId.id}&fromType=${fromId.entityType}` +\n      `&relationType=${relationType}&toId=${toId.id}&toType=${toId.entityType}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public deleteRelations(entityId: EntityId,\n                         config?: RequestConfig) {\n    return this.http.delete(`/api/relations?entityId=${entityId.id}&entityType=${entityId.entityType}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getRelation(fromId: EntityId, relationType: string, toId: EntityId,\n                     config?: RequestConfig): Observable<EntityRelation> {\n    return this.http.get<EntityRelation>(`/api/relation?fromId=${fromId.id}&fromType=${fromId.entityType}` +\n      `&relationType=${relationType}&toId=${toId.id}&toType=${toId.entityType}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public findByFrom(fromId: EntityId,\n                    config?: RequestConfig): Observable<Array<EntityRelation>> {\n    return this.http.get<Array<EntityRelation>>(\n      `/api/relations?fromId=${fromId.id}&fromType=${fromId.entityType}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public findInfoByFrom(fromId: EntityId,\n                        config?: RequestConfig): Observable<Array<EntityRelationInfo>> {\n    return this.http.get<Array<EntityRelationInfo>>(\n      `/api/relations/info?fromId=${fromId.id}&fromType=${fromId.entityType}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public findByFromAndType(fromId: EntityId, relationType: string,\n                           config?: RequestConfig): Observable<Array<EntityRelation>> {\n    return this.http.get<Array<EntityRelation>>(\n      `/api/relations?fromId=${fromId.id}&fromType=${fromId.entityType}&relationType=${relationType}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public findByTo(toId: EntityId,\n                  config?: RequestConfig): Observable<Array<EntityRelation>> {\n    return this.http.get<Array<EntityRelation>>(\n      `/api/relations?toId=${toId.id}&toType=${toId.entityType}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public findInfoByTo(toId: EntityId,\n                      config?: RequestConfig): Observable<Array<EntityRelationInfo>> {\n    return this.http.get<Array<EntityRelationInfo>>(\n      `/api/relations/info?toId=${toId.id}&toType=${toId.entityType}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public findByToAndType(toId: EntityId, relationType: string,\n                         config?: RequestConfig): Observable<Array<EntityRelation>> {\n    return this.http.get<Array<EntityRelation>>(\n      `/api/relations?toId=${toId.id}&toType=${toId.entityType}&relationType=${relationType}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public findByQuery(query: EntityRelationsQuery,\n                     config?: RequestConfig): Observable<Array<EntityRelation>> {\n    return this.http.post<Array<EntityRelation>>(\n      '/api/relations', query,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public findInfoByQuery(query: EntityRelationsQuery,\n                         config?: RequestConfig): Observable<Array<EntityRelationInfo>> {\n    return this.http.post<Array<EntityRelationInfo>>(\n      '/api/relations/info', query,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Action } from '@ngrx/store';\n\nexport enum SettingsActionTypes {\n  CHANGE_LANGUAGE = '[Settings] Change Language'\n}\n\nexport class ActionSettingsChangeLanguage implements Action {\n  readonly type = SettingsActionTypes.CHANGE_LANGUAGE;\n\n  constructor(readonly payload: { userLang: string }) {}\n}\n\nexport type SettingsActions =\n  | ActionSettingsChangeLanguage;\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\nimport { defaultHttpOptionsFromConfig, RequestConfig } from './http-utils';\nimport { forkJoin, Observable, of } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\nimport { EntityId } from '@shared/models/id/entity-id';\nimport { AttributeData, AttributeScope, DataSortOrder, TimeseriesData } from '@shared/models/telemetry/telemetry.models';\nimport { isDefinedAndNotNull } from '@core/utils';\nimport { AggregationType } from '@shared/models/time/time.models';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AttributeService {\n\n  constructor(\n    private http: HttpClient\n  ) { }\n\n  public getEntityAttributes(entityId: EntityId, attributeScope: AttributeScope,\n                             keys?: Array<string>, config?: RequestConfig): Observable<Array<AttributeData>> {\n    let url = `/api/plugins/telemetry/${entityId.entityType}/${entityId.id}/values/attributes/${attributeScope}`;\n    if (keys && keys.length) {\n      url += `?keys=${keys.join(',')}`;\n    }\n    return this.http.get<Array<AttributeData>>(url, defaultHttpOptionsFromConfig(config));\n  }\n\n  public deleteEntityAttributes(entityId: EntityId, attributeScope: AttributeScope, attributes: Array<AttributeData>,\n                                config?: RequestConfig): Observable<any> {\n    const keys = attributes.map(attribute => encodeURI(attribute.key)).join(',');\n    return this.http.delete(`/api/plugins/telemetry/${entityId.entityType}/${entityId.id}/${attributeScope}` +\n      `?keys=${keys}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public deleteEntityTimeseries(entityId: EntityId, timeseries: Array<AttributeData>, deleteAllDataForKeys = false,\n                                startTs?: number, endTs?: number, config?: RequestConfig): Observable<any> {\n    const keys = timeseries.map(attribute => encodeURI(attribute.key)).join(',');\n    let url = `/api/plugins/telemetry/${entityId.entityType}/${entityId.id}/timeseries/delete` +\n      `?keys=${keys}&deleteAllDataForKeys=${deleteAllDataForKeys}`;\n    if (isDefinedAndNotNull(startTs)) {\n      url += `&startTs=${startTs}`;\n    }\n    if (isDefinedAndNotNull(endTs)) {\n      url += `&endTs=${endTs}`;\n    }\n    return this.http.delete(url, defaultHttpOptionsFromConfig(config));\n  }\n\n  public saveEntityAttributes(entityId: EntityId, attributeScope: AttributeScope, attributes: Array<AttributeData>,\n                              config?: RequestConfig): Observable<any> {\n    const attributesData: {[key: string]: any} = {};\n    const deleteAttributes: AttributeData[] = [];\n    attributes.forEach((attribute) => {\n      if (isDefinedAndNotNull(attribute.value)) {\n        attributesData[attribute.key] = attribute.value;\n      } else {\n        deleteAttributes.push(attribute);\n      }\n    });\n    let deleteEntityAttributesObservable: Observable<any>;\n    if (deleteAttributes.length) {\n      deleteEntityAttributesObservable = this.deleteEntityAttributes(entityId, attributeScope, deleteAttributes, config);\n    } else {\n      deleteEntityAttributesObservable = of(null);\n    }\n    let saveEntityAttributesObservable: Observable<any>;\n    if (Object.keys(attributesData).length) {\n      saveEntityAttributesObservable = this.http.post(`/api/plugins/telemetry/${entityId.entityType}/${entityId.id}/${attributeScope}`,\n        attributesData, defaultHttpOptionsFromConfig(config));\n    } else {\n      saveEntityAttributesObservable = of(null);\n    }\n    return forkJoin([saveEntityAttributesObservable, deleteEntityAttributesObservable]);\n  }\n\n  public saveEntityTimeseries(entityId: EntityId, timeseriesScope: string, timeseries: Array<AttributeData>,\n                              config?: RequestConfig): Observable<any> {\n    const timeseriesData: {[key: string]: any} = {};\n    const deleteTimeseries: AttributeData[] = [];\n    timeseries.forEach((attribute) => {\n      if (isDefinedAndNotNull(attribute.value)) {\n        timeseriesData[attribute.key] = attribute.value;\n      } else {\n        deleteTimeseries.push(attribute);\n      }\n    });\n    let deleteEntityTimeseriesObservable: Observable<any>;\n    if (deleteTimeseries.length) {\n      deleteEntityTimeseriesObservable = this.deleteEntityTimeseries(entityId, deleteTimeseries, true, null, null, config);\n    } else {\n      deleteEntityTimeseriesObservable = of(null);\n    }\n    let saveEntityTimeseriesObservable: Observable<any>;\n    if (Object.keys(timeseriesData).length) {\n      saveEntityTimeseriesObservable =\n        this.http.post(`/api/plugins/telemetry/${entityId.entityType}/${entityId.id}/timeseries/${timeseriesScope}`,\n        timeseriesData, defaultHttpOptionsFromConfig(config));\n    } else {\n      saveEntityTimeseriesObservable = of(null);\n    }\n    return forkJoin([saveEntityTimeseriesObservable, deleteEntityTimeseriesObservable]);\n  }\n\n  public getEntityTimeseries(entityId: EntityId, keys: Array<string>, startTs: number, endTs: number,\n                             limit: number = 100, agg: AggregationType = AggregationType.NONE, interval?: number,\n                             orderBy: DataSortOrder = DataSortOrder.DESC, useStrictDataTypes: boolean = false,\n                             config?: RequestConfig): Observable<TimeseriesData> {\n    let url = `/api/plugins/telemetry/${entityId.entityType}/${entityId.id}/values/timeseries?keys=${keys.join(',')}&startTs=${startTs}&endTs=${endTs}`;\n    if (isDefinedAndNotNull(limit)) {\n      url += `&limit=${limit}`;\n    }\n    if (isDefinedAndNotNull(agg)) {\n      url += `&agg=${agg}`;\n    }\n    if (isDefinedAndNotNull(interval)) {\n      url += `&interval=${interval}`;\n    }\n    if (isDefinedAndNotNull(orderBy)) {\n      url += `&orderBy=${orderBy}`;\n    }\n    if (isDefinedAndNotNull(useStrictDataTypes)) {\n      url += `&useStrictDataTypes=${useStrictDataTypes}`;\n    }\n\n    return this.http.get<TimeseriesData>(url, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getEntityTimeseriesLatest(entityId: EntityId, keys?: Array<string>,\n                                   useStrictDataTypes = false, config?: RequestConfig): Observable<TimeseriesData> {\n    let url = `/api/plugins/telemetry/${entityId.entityType}/${entityId.id}/values/timeseries?useStrictDataTypes=${useStrictDataTypes}`;\n    if (isDefinedAndNotNull(keys) && keys.length) {\n      url += `&keys=${keys.join(',')}`;\n    }\n    return this.http.get<TimeseriesData>(url, defaultHttpOptionsFromConfig(config));\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, EventEmitter, forwardRef, Input, OnInit, Output } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { TimeInterval, TimeService } from '@core/services/time.service';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\n\n@Component({\n  selector: 'tb-timeinterval',\n  templateUrl: './timeinterval.component.html',\n  styleUrls: ['./timeinterval.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => TimeintervalComponent),\n      multi: true\n    }\n  ]\n})\nexport class TimeintervalComponent implements OnInit, ControlValueAccessor {\n\n  minValue: number;\n  maxValue: number;\n\n  @Input()\n  set min(min: number) {\n    if (typeof min !== 'undefined' && min !== this.minValue) {\n      this.minValue = min;\n      this.maxValue = Math.max(this.maxValue, this.minValue);\n      this.updateView();\n    }\n  }\n\n  @Input()\n  set max(max: number) {\n    if (typeof max !== 'undefined' && max !== this.maxValue) {\n      this.maxValue = max;\n      this.minValue = Math.min(this.minValue, this.maxValue);\n      this.updateView();\n    }\n  }\n\n  @Input() predefinedName: string;\n\n  isEditValue = false;\n\n  @Input()\n  set isEdit(val) {\n    this.isEditValue = coerceBooleanProperty(val);\n  }\n\n  get isEdit() {\n    return this.isEditValue;\n  }\n\n  hideFlagValue = false;\n\n  @Input()\n  get hideFlag() {\n    return this.hideFlagValue;\n  }\n\n  set hideFlag(val) {\n    this.hideFlagValue = val;\n  }\n\n  @Output() hideFlagChange = new EventEmitter<boolean>();\n\n  @Input() disabled: boolean;\n\n  days = 0;\n  hours = 0;\n  mins = 1;\n  secs = 0;\n\n  intervalMs = 0;\n  modelValue: number;\n\n  advanced = false;\n  rendered = false;\n\n  intervals: Array<TimeInterval>;\n\n  private propagateChange = (_: any) => {};\n\n  constructor(private timeService: TimeService) {\n  }\n\n  ngOnInit(): void {\n    this.boundInterval();\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n  }\n\n  writeValue(intervalMs: number): void {\n    this.modelValue = intervalMs;\n    this.rendered = true;\n    if (typeof this.modelValue !== 'undefined') {\n      const min = this.timeService.boundMinInterval(this.minValue);\n      const max = this.timeService.boundMaxInterval(this.maxValue);\n      if (this.modelValue >= min && this.modelValue <= max) {\n        this.advanced = !this.timeService.matchesExistingInterval(this.minValue, this.maxValue, this.modelValue);\n        this.setIntervalMs(this.modelValue);\n      } else {\n        this.boundInterval();\n      }\n    }\n  }\n\n  setIntervalMs(intervalMs: number) {\n    if (!this.advanced) {\n      this.intervalMs = intervalMs;\n    }\n    const intervalSeconds = Math.floor(intervalMs / 1000);\n    this.days = Math.floor(intervalSeconds / 86400);\n    this.hours = Math.floor((intervalSeconds % 86400) / 3600);\n    this.mins = Math.floor(((intervalSeconds % 86400) % 3600) / 60);\n    this.secs = intervalSeconds % 60;\n  }\n\n  boundInterval() {\n    const min = this.timeService.boundMinInterval(this.minValue);\n    const max = this.timeService.boundMaxInterval(this.maxValue);\n    this.intervals = this.timeService.getIntervals(this.minValue, this.maxValue);\n    if (this.rendered) {\n      let newIntervalMs = this.modelValue;\n      if (newIntervalMs < min) {\n        newIntervalMs = min;\n      } else if (newIntervalMs > max) {\n        newIntervalMs = max;\n      }\n      if (!this.advanced) {\n        newIntervalMs = this.timeService.boundToPredefinedInterval(min, max, newIntervalMs);\n      }\n      if (newIntervalMs !== this.modelValue) {\n        this.setIntervalMs(newIntervalMs);\n        this.updateView();\n      }\n    }\n  }\n\n  updateView() {\n    if (!this.rendered) {\n      return;\n    }\n    let value = null;\n    let intervalMs;\n    if (!this.advanced) {\n      intervalMs = this.intervalMs;\n      if (!intervalMs || isNaN(intervalMs)) {\n        intervalMs = this.calculateIntervalMs();\n      }\n    } else {\n      intervalMs = this.calculateIntervalMs();\n    }\n    if (!isNaN(intervalMs) && intervalMs > 0) {\n      value = intervalMs;\n    }\n    this.modelValue = value;\n    this.propagateChange(this.modelValue);\n    this.boundInterval();\n  }\n\n  calculateIntervalMs(): number {\n    return (this.days * 86400 +\n      this.hours * 3600 +\n      this.mins * 60 +\n      this.secs) * 1000;\n  }\n\n  onIntervalMsChange() {\n    this.updateView();\n  }\n\n  onAdvancedChange() {\n    if (!this.advanced) {\n      this.intervalMs = this.calculateIntervalMs();\n    } else {\n      let intervalMs = this.intervalMs;\n      if (!intervalMs || isNaN(intervalMs)) {\n        intervalMs = this.calculateIntervalMs();\n      }\n      this.setIntervalMs(intervalMs);\n    }\n    this.updateView();\n  }\n\n  onHideFlagChange() {\n    this.hideFlagChange.emit(this.hideFlagValue);\n  }\n\n  onTimeInputChange(type: string) {\n    switch (type) {\n      case 'secs':\n        setTimeout(() => this.onSecsChange(), 0);\n        break;\n      case 'mins':\n        setTimeout(() => this.onMinsChange(), 0);\n        break;\n      case 'hours':\n        setTimeout(() => this.onHoursChange(), 0);\n        break;\n      case 'days':\n        setTimeout(() => this.onDaysChange(), 0);\n        break;\n    }\n  }\n\n  onSecsChange() {\n    if (typeof this.secs === 'undefined') {\n      return;\n    }\n    if (this.secs < 0) {\n      if ((this.days + this.hours + this.mins) > 0) {\n        this.secs = this.secs + 60;\n        this.mins--;\n        this.onMinsChange();\n      } else {\n        this.secs = 0;\n      }\n    } else if (this.secs >= 60) {\n      this.secs = this.secs - 60;\n      this.mins++;\n      this.onMinsChange();\n    }\n    this.updateView();\n  }\n\n  onMinsChange() {\n    if (typeof this.mins === 'undefined') {\n      return;\n    }\n    if (this.mins < 0) {\n      if ((this.days + this.hours) > 0) {\n        this.mins = this.mins + 60;\n        this.hours--;\n        this.onHoursChange();\n      } else {\n        this.mins = 0;\n      }\n    } else if (this.mins >= 60) {\n      this.mins = this.mins - 60;\n      this.hours++;\n      this.onHoursChange();\n    }\n    this.updateView();\n  }\n\n  onHoursChange() {\n    if (typeof this.hours === 'undefined') {\n      return;\n    }\n    if (this.hours < 0) {\n      if (this.days > 0) {\n        this.hours = this.hours + 24;\n        this.days--;\n        this.onDaysChange();\n      } else {\n        this.hours = 0;\n      }\n    } else if (this.hours >= 24) {\n      this.hours = this.hours - 24;\n      this.days++;\n      this.onDaysChange();\n    }\n    this.updateView();\n  }\n\n  onDaysChange() {\n    if (typeof this.days === 'undefined') {\n      return;\n    }\n    if (this.days < 0) {\n      this.days = 0;\n    }\n    this.updateView();\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<section fxLayout=\"row\">\n  <section fxLayout=\"column\" [fxShow]=\"isEdit\">\n    <label class=\"tb-small hide-label\" translate>timewindow.hide</label>\n    <mat-checkbox [(ngModel)]=\"hideFlag\" (ngModelChange)=\"onHideFlagChange()\"></mat-checkbox>\n  </section>\n  <section class=\"interval-section\" fxLayout=\"column\" fxFlex [fxShow]=\"advanced && (isEdit || !hideFlag)\">\n    <label class=\"tb-small interval-label\" translate>{{ predefinedName }}</label>\n    <section fxLayout=\"row wrap\" fxLayoutAlign=\"start start\" fxFlex fxLayoutGap=\"6px\">\n      <mat-form-field class=\"number-input\">\n        <mat-label translate>timeinterval.days</mat-label>\n        <input matInput [disabled]=\"hideFlag || disabled\" type=\"number\" step=\"1\" min=\"0\" [(ngModel)]=\"days\" (ngModelChange)=\"onTimeInputChange('days')\"/>\n      </mat-form-field>\n      <mat-form-field class=\"number-input\">\n        <mat-label translate>timeinterval.hours</mat-label>\n        <input matInput [disabled]=\"hideFlag || disabled\" type=\"number\" step=\"1\" [(ngModel)]=\"hours\" (ngModelChange)=\"onTimeInputChange('hours')\"/>\n      </mat-form-field>\n      <mat-form-field class=\"number-input\">\n        <mat-label translate>timeinterval.minutes</mat-label>\n        <input matInput [disabled]=\"hideFlag || disabled\" type=\"number\" step=\"1\" [(ngModel)]=\"mins\" (ngModelChange)=\"onTimeInputChange('mins')\"/>\n      </mat-form-field>\n      <mat-form-field class=\"number-input\">\n        <mat-label translate>timeinterval.seconds</mat-label>\n        <input matInput [disabled]=\"hideFlag || disabled\" type=\"number\" step=\"1\" [(ngModel)]=\"secs\" (ngModelChange)=\"onTimeInputChange('secs')\"/>\n      </mat-form-field>\n    </section>\n  </section>\n  <section class=\"interval-section\" fxLayout=\"row\" fxFlex [fxShow]=\"!advanced && (isEdit || !hideFlag)\">\n    <mat-form-field fxFlex>\n      <mat-label translate>{{ predefinedName }}</mat-label>\n      <mat-select [disabled]=\"hideFlag || disabled\" [(ngModel)]=\"intervalMs\" (ngModelChange)=\"onIntervalMsChange()\" style=\"min-width: 150px;\">\n        <mat-option *ngFor=\"let interval of intervals\" [value]=\"interval.value\">\n          {{ interval.name | translate:interval.translateParams }}\n        </mat-option>\n      </mat-select>\n    </mat-form-field>\n  </section>\n  <section fxLayout=\"column\" fxLayoutAlign=\"center center\" [fxShow]=\"(isEdit || !hideFlag)\">\n    <label class=\"tb-small advanced-label\" translate>timeinterval.advanced</label>\n    <mat-slide-toggle [disabled]=\"hideFlag || disabled\" class=\"advanced-switch\" [(ngModel)]=\"advanced\" (ngModelChange)=\"onAdvancedChange()\"></mat-slide-toggle>\n  </section>\n</section>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { createFeatureSelector, createSelector, select, Store } from '@ngrx/store';\n\nimport { AppState } from '../core.state';\nimport { AuthState } from './auth.models';\nimport { take } from 'rxjs/operators';\nimport { AuthUser } from '@shared/models/user.model';\n\nexport const selectAuthState = createFeatureSelector<AppState, AuthState>(\n  'auth'\n);\n\nexport const selectAuth = createSelector(\n  selectAuthState,\n  (state: AuthState) => state\n);\n\nexport const selectIsAuthenticated = createSelector(\n  selectAuthState,\n  (state: AuthState) => state.isAuthenticated\n);\n\nexport const selectIsUserLoaded = createSelector(\n  selectAuthState,\n  (state: AuthState) => state.isUserLoaded\n);\n\nexport const selectAuthUser = createSelector(\n  selectAuthState,\n  (state: AuthState) => state.authUser\n);\n\nexport const selectUserDetails = createSelector(\n  selectAuthState,\n  (state: AuthState) => state.userDetails\n);\n\nexport const selectUserTokenAccessEnabled = createSelector(\n  selectAuthState,\n  (state: AuthState) => state.userTokenAccessEnabled\n);\n\nexport function getCurrentAuthState(store: Store<AppState>): AuthState {\n  let state: AuthState;\n  store.pipe(select(selectAuth), take(1)).subscribe(\n    val => state = val\n  );\n  return state;\n}\n\nexport function getCurrentAuthUser(store: Store<AppState>): AuthUser {\n  let authUser: AuthUser;\n  store.pipe(select(selectAuthUser), take(1)).subscribe(\n    val => authUser = val\n  );\n  return authUser;\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { ComponentFactory, Injectable } from '@angular/core';\nimport { defaultHttpOptionsFromConfig, RequestConfig } from './http-utils';\nimport { forkJoin, Observable, of } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\nimport { PageLink } from '@shared/models/page/page-link';\nimport { PageData } from '@shared/models/page/page-data';\nimport {\n  ResolvedRuleChainMetaData,\n  RuleChain,\n  RuleChainConnectionInfo,\n  RuleChainMetaData,\n  ruleChainNodeComponent,\n  RuleChainType,\n  ruleNodeTypeComponentTypes,\n  unknownNodeComponent\n} from '@shared/models/rule-chain.models';\nimport { ComponentDescriptorService } from './component-descriptor.service';\nimport {\n  IRuleNodeConfigurationComponent,\n  LinkLabel,\n  RuleNodeComponentDescriptor,\n  TestScriptInputParams,\n  TestScriptResult\n} from '@app/shared/models/rule-node.models';\nimport { ResourcesService } from '../services/resources.service';\nimport { catchError, map, mergeMap } from 'rxjs/operators';\nimport { TranslateService } from '@ngx-translate/core';\nimport { EntityType } from '@shared/models/entity-type.models';\nimport { deepClone, snakeCase } from '@core/utils';\nimport { DebugRuleNodeEventBody } from '@app/shared/models/event.models';\nimport { Edge } from '@shared/models/edge.models';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RuleChainService {\n\n  private ruleNodeComponentsMap: Map<RuleChainType, Array<RuleNodeComponentDescriptor>> =\n    new Map<RuleChainType, Array<RuleNodeComponentDescriptor>>();\n  private ruleNodeConfigFactories: {[directive: string]: ComponentFactory<IRuleNodeConfigurationComponent>} = {};\n\n  constructor(\n    private http: HttpClient,\n    private componentDescriptorService: ComponentDescriptorService,\n    private resourcesService: ResourcesService,\n    private translate: TranslateService\n  ) { }\n\n  public getRuleChains(pageLink: PageLink, type: RuleChainType = RuleChainType.CORE, config?: RequestConfig): Observable<PageData<RuleChain>> {\n    return this.http.get<PageData<RuleChain>>(`/api/ruleChains${pageLink.toQuery()}&type=${type}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getRuleChain(ruleChainId: string, config?: RequestConfig): Observable<RuleChain> {\n    return this.http.get<RuleChain>(`/api/ruleChain/${ruleChainId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public createDefaultRuleChain(ruleChainName: string, config?: RequestConfig): Observable<RuleChain> {\n    return this.http.post<RuleChain>('/api/ruleChain/device/default', {\n      name: ruleChainName\n    }, defaultHttpOptionsFromConfig(config));\n  }\n\n  public saveRuleChain(ruleChain: RuleChain, config?: RequestConfig): Observable<RuleChain> {\n    return this.http.post<RuleChain>('/api/ruleChain', ruleChain, defaultHttpOptionsFromConfig(config));\n  }\n\n  public deleteRuleChain(ruleChainId: string, config?: RequestConfig) {\n    return this.http.delete(`/api/ruleChain/${ruleChainId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public setRootRuleChain(ruleChainId: string, config?: RequestConfig): Observable<RuleChain> {\n    return this.http.post<RuleChain>(`/api/ruleChain/${ruleChainId}/root`, null, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getRuleChainMetadata(ruleChainId: string, config?: RequestConfig): Observable<RuleChainMetaData> {\n    return this.http.get<RuleChainMetaData>(`/api/ruleChain/${ruleChainId}/metadata`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getResolvedRuleChainMetadata(ruleChainId: string, config?: RequestConfig): Observable<ResolvedRuleChainMetaData> {\n    return this.getRuleChainMetadata(ruleChainId, config).pipe(\n      mergeMap((ruleChainMetaData) => this.resolveRuleChainMetadata(ruleChainMetaData))\n    );\n  }\n\n  public saveRuleChainMetadata(ruleChainMetaData: RuleChainMetaData, config?: RequestConfig): Observable<RuleChainMetaData> {\n    return this.http.post<RuleChainMetaData>('/api/ruleChain/metadata', ruleChainMetaData, defaultHttpOptionsFromConfig(config));\n  }\n\n  public saveAndGetResolvedRuleChainMetadata(ruleChainMetaData: RuleChainMetaData,\n                                             config?: RequestConfig): Observable<ResolvedRuleChainMetaData> {\n    return this.saveRuleChainMetadata(ruleChainMetaData, config).pipe(\n      mergeMap((savedRuleChainMetaData) => this.resolveRuleChainMetadata(savedRuleChainMetaData))\n    );\n  }\n\n  public resolveRuleChainMetadata(ruleChainMetaData: RuleChainMetaData): Observable<ResolvedRuleChainMetaData> {\n    return this.resolveTargetRuleChains(ruleChainMetaData.ruleChainConnections).pipe(\n      map((targetRuleChainsMap) => {\n        const resolvedRuleChainMetadata: ResolvedRuleChainMetaData = {...ruleChainMetaData, targetRuleChainsMap};\n        return resolvedRuleChainMetadata;\n      })\n    );\n  }\n\n  public getRuleNodeComponents(ruleNodeConfigResourcesModulesMap: {[key: string]: any}, ruleChainType: RuleChainType, config?: RequestConfig):\n    Observable<Array<RuleNodeComponentDescriptor>> {\n     if (this.ruleNodeComponentsMap.get(ruleChainType)) {\n       return of(this.ruleNodeComponentsMap.get(ruleChainType));\n     } else {\n      return this.loadRuleNodeComponents(ruleChainType, config).pipe(\n        mergeMap((components) => {\n          return this.resolveRuleNodeComponentsUiResources(components, ruleNodeConfigResourcesModulesMap).pipe(\n            map((ruleNodeComponents) => {\n              this.ruleNodeComponentsMap.set(ruleChainType, ruleNodeComponents);\n              this.ruleNodeComponentsMap.get(ruleChainType).push(ruleChainNodeComponent);\n              this.ruleNodeComponentsMap.get(ruleChainType).sort(\n                (comp1, comp2) => {\n                  let result = comp1.type.toString().localeCompare(comp2.type.toString());\n                  if (result === 0) {\n                    result = comp1.name.localeCompare(comp2.name);\n                  }\n                  return result;\n                }\n              );\n              return this.ruleNodeComponentsMap.get(ruleChainType);\n            })\n          );\n        })\n      );\n    }\n  }\n\n  public getRuleNodeConfigFactory(directive: string): ComponentFactory<IRuleNodeConfigurationComponent> {\n    return this.ruleNodeConfigFactories[directive];\n  }\n\n  public getRuleNodeComponentByClazz(ruleChainType: RuleChainType = RuleChainType.CORE, clazz: string): RuleNodeComponentDescriptor {\n    const found = this.ruleNodeComponentsMap.get(ruleChainType).filter((component) => component.clazz === clazz);\n    if (found && found.length) {\n      return found[0];\n    } else {\n      const unknownComponent = deepClone(unknownNodeComponent);\n      unknownComponent.clazz = clazz;\n      unknownComponent.configurationDescriptor.nodeDefinition.details = 'Unknown Rule Node class: ' + clazz;\n      return unknownComponent;\n    }\n  }\n\n  public getRuleNodeSupportedLinks(component: RuleNodeComponentDescriptor): {[label: string]: LinkLabel} {\n    const relationTypes = component.configurationDescriptor.nodeDefinition.relationTypes;\n    const linkLabels: {[label: string]: LinkLabel} = {};\n    relationTypes.forEach((label) => {\n      linkLabels[label] = {\n        name: label,\n        value: label\n      };\n    });\n    return linkLabels;\n  }\n\n  public ruleNodeAllowCustomLinks(component: RuleNodeComponentDescriptor): boolean {\n    return component.configurationDescriptor.nodeDefinition.customRelations;\n  }\n\n  public getLatestRuleNodeDebugInput(ruleNodeId: string, config?: RequestConfig): Observable<DebugRuleNodeEventBody> {\n    return this.http.get<DebugRuleNodeEventBody>(`/api/ruleNode/${ruleNodeId}/debugIn`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public testScript(inputParams: TestScriptInputParams, config?: RequestConfig): Observable<TestScriptResult> {\n    return this.http.post<TestScriptResult>('/api/ruleChain/testScript', inputParams, defaultHttpOptionsFromConfig(config));\n  }\n\n  private resolveTargetRuleChains(ruleChainConnections: Array<RuleChainConnectionInfo>): Observable<{[ruleChainId: string]: RuleChain}> {\n    if (ruleChainConnections && ruleChainConnections.length) {\n      const tasks: Observable<RuleChain>[] = [];\n      ruleChainConnections.forEach((connection) => {\n        tasks.push(this.resolveRuleChain(connection.targetRuleChainId.id));\n      });\n      return forkJoin(tasks).pipe(\n        map((ruleChains) => {\n          const ruleChainsMap: {[ruleChainId: string]: RuleChain} = {};\n          ruleChains.forEach((ruleChain) => {\n            ruleChainsMap[ruleChain.id.id] = ruleChain;\n          });\n          return ruleChainsMap;\n        })\n      );\n    } else {\n      return of({} as {[ruleChainId: string]: RuleChain});\n    }\n  }\n\n  private loadRuleNodeComponents(ruleChainType: RuleChainType, config?: RequestConfig): Observable<Array<RuleNodeComponentDescriptor>> {\n    return this.componentDescriptorService.getComponentDescriptorsByTypes(ruleNodeTypeComponentTypes, ruleChainType, config).pipe(\n      map((components) => {\n        const ruleNodeComponents: RuleNodeComponentDescriptor[] = [];\n        components.forEach((component) => {\n          ruleNodeComponents.push(component as RuleNodeComponentDescriptor);\n        });\n        return ruleNodeComponents;\n      })\n    );\n  }\n\n  private resolveRuleNodeComponentsUiResources(components: Array<RuleNodeComponentDescriptor>,\n                                               ruleNodeConfigResourcesModulesMap: {[key: string]: any}):\n    Observable<Array<RuleNodeComponentDescriptor>> {\n    const tasks: Observable<RuleNodeComponentDescriptor>[] = [];\n    components.forEach((component) => {\n      tasks.push(this.resolveRuleNodeComponentUiResources(component, ruleNodeConfigResourcesModulesMap));\n    });\n    return forkJoin(tasks).pipe(\n      catchError((err) => {\n        return of(components);\n      })\n    );\n  }\n\n  private resolveRuleNodeComponentUiResources(component: RuleNodeComponentDescriptor,\n                                              ruleNodeConfigResourcesModulesMap: {[key: string]: any}):\n    Observable<RuleNodeComponentDescriptor> {\n    const nodeDefinition = component.configurationDescriptor.nodeDefinition;\n    const uiResources = nodeDefinition.uiResources;\n    if (uiResources && uiResources.length) {\n      const commonResources = uiResources.filter((resource) => !resource.endsWith('.js'));\n      const moduleResource = uiResources.find((resource) => resource.endsWith('.js'));\n      const tasks: Observable<any>[] = [];\n      if (commonResources && commonResources.length) {\n        commonResources.forEach((resource) => {\n          tasks.push(this.resourcesService.loadResource(resource));\n        });\n      }\n      if (moduleResource) {\n        tasks.push(this.resourcesService.loadFactories(moduleResource, ruleNodeConfigResourcesModulesMap).pipe(\n          map((res) => {\n            if (nodeDefinition.configDirective && nodeDefinition.configDirective.length) {\n              const selector = snakeCase(nodeDefinition.configDirective, '-');\n              const componentFactory = res.find((factory) =>\n              factory.selector === selector);\n              if (componentFactory) {\n                this.ruleNodeConfigFactories[nodeDefinition.configDirective] = componentFactory;\n              } else {\n                component.configurationDescriptor.nodeDefinition.uiResourceLoadError =\n                  this.translate.instant('rulenode.directive-is-not-loaded',\n                    {directiveName: nodeDefinition.configDirective});\n              }\n            }\n            return of(component);\n          })\n        ));\n      }\n      return forkJoin(tasks).pipe(\n        map((res) => {\n          return component;\n        }),\n        catchError(() => {\n          component.configurationDescriptor.nodeDefinition.uiResourceLoadError = this.translate.instant('rulenode.ui-resources-load-error');\n          return of(component);\n        })\n      );\n    } else {\n      return of(component);\n    }\n  }\n\n  private resolveRuleChain(ruleChainId: string): Observable<RuleChain> {\n    return this.getRuleChain(ruleChainId, {ignoreErrors: true}).pipe(\n      map(ruleChain => ruleChain),\n      catchError((err) => {\n        const ruleChain = {\n         id: {\n            entityType: EntityType.RULE_CHAIN,\n            id: ruleChainId\n          }\n        } as RuleChain;\n        return of(ruleChain);\n      })\n    );\n  }\n\n  public getEdgeRuleChains(edgeId: string, pageLink: PageLink, config?: RequestConfig): Observable<PageData<RuleChain>> {\n    return this.http.get<PageData<RuleChain>>(`/api/edge/${edgeId}/ruleChains${pageLink.toQuery()}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public assignRuleChainToEdge(edgeId: string, ruleChainId: string, config?: RequestConfig): Observable<RuleChain> {\n    return this.http.post<RuleChain>(`/api/edge/${edgeId}/ruleChain/${ruleChainId}`, null,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public unassignRuleChainFromEdge(edgeId: string, ruleChainId: string, config?: RequestConfig) {\n    return this.http.delete(`/api/edge/${edgeId}/ruleChain/${ruleChainId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public setEdgeTemplateRootRuleChain(ruleChainId: string, config?: RequestConfig): Observable<RuleChain> {\n    return this.http.post<RuleChain>(`/api/ruleChain/${ruleChainId}/edgeTemplateRoot`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public setAutoAssignToEdgeRuleChain(ruleChainId: string, config?: RequestConfig): Observable<RuleChain> {\n    return this.http.post<RuleChain>(`/api/ruleChain/${ruleChainId}/autoAssignToEdge`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public unsetAutoAssignToEdgeRuleChain(ruleChainId: string, config?: RequestConfig): Observable<RuleChain> {\n    return this.http.delete<RuleChain>(`/api/ruleChain/${ruleChainId}/autoAssignToEdge`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getAutoAssignToEdgeRuleChains(config?: RequestConfig): Observable<Array<RuleChain>> {\n    return this.http.get<Array<RuleChain>>(`/api/ruleChain/autoAssignToEdgeRuleChains`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public setEdgeRootRuleChain(edgeId: string, ruleChainId: string, config?: RequestConfig): Observable<Edge> {\n    return this.http.post<Edge>(`/api/edge/${edgeId}/${ruleChainId}/root`, defaultHttpOptionsFromConfig(config));\n  }\n\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { HttpParams } from '@angular/common/http';\nimport { InterceptorConfig } from './interceptor-config';\n\nexport class InterceptorHttpParams extends HttpParams {\n  constructor(\n    public interceptorConfig: InterceptorConfig,\n    params?: { [param: string]: string | string[] }\n  ) {\n    super({ fromObject: params });\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { defaultHttpOptions, defaultHttpOptionsFromConfig, RequestConfig } from '@core/http/http-utils';\nimport { Observable } from 'rxjs';\nimport { publishReplay, refCount } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UiSettingsService {\n\n  private helpBaseUrlObservable: Observable<string>;\n\n  constructor(\n    private http: HttpClient\n  ) { }\n\n  public getHelpBaseUrl(): Observable<string> {\n    if (!this.helpBaseUrlObservable) {\n      this.helpBaseUrlObservable = this.http.get('/api/uiSettings/helpBaseUrl', {responseType: 'text', ...defaultHttpOptions(true)}).pipe(\n        publishReplay(1),\n        refCount()\n      );\n    }\n    return this.helpBaseUrlObservable;\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\nimport { defaultHttpOptionsFromConfig, RequestConfig } from './http-utils';\nimport { Observable, ReplaySubject } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\nimport { PageLink } from '@shared/models/page/page-link';\nimport { PageData } from '@shared/models/page/page-data';\nimport {\n  ClaimRequest,\n  ClaimResult,\n  Device,\n  DeviceCredentials,\n  DeviceInfo,\n  DeviceSearchQuery\n} from '@app/shared/models/device.models';\nimport { EntitySubtype } from '@app/shared/models/entity-type.models';\nimport { AuthService } from '@core/auth/auth.service';\nimport { BulkImportRequest, BulkImportResult } from '@home/components/import-export/import-export.models';\nimport { PersistentRpc } from '@shared/models/rpc.models';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DeviceService {\n\n  constructor(\n    private http: HttpClient\n  ) { }\n\n  public getTenantDeviceInfos(pageLink: PageLink, type: string = '',\n                              config?: RequestConfig): Observable<PageData<DeviceInfo>> {\n    return this.http.get<PageData<DeviceInfo>>(`/api/tenant/deviceInfos${pageLink.toQuery()}&type=${type}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getTenantDeviceInfosByDeviceProfileId(pageLink: PageLink, deviceProfileId: string = '',\n                                               config?: RequestConfig): Observable<PageData<DeviceInfo>> {\n    return this.http.get<PageData<DeviceInfo>>(`/api/tenant/deviceInfos${pageLink.toQuery()}&deviceProfileId=${deviceProfileId}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getCustomerDeviceInfos(customerId: string, pageLink: PageLink, type: string = '',\n                                config?: RequestConfig): Observable<PageData<DeviceInfo>> {\n    return this.http.get<PageData<DeviceInfo>>(`/api/customer/${customerId}/deviceInfos${pageLink.toQuery()}&type=${type}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getCustomerDeviceInfosByDeviceProfileId(customerId: string, pageLink: PageLink, deviceProfileId: string = '',\n                                                 config?: RequestConfig): Observable<PageData<DeviceInfo>> {\n    return this.http.get<PageData<DeviceInfo>>(`/api/customer/${customerId}/deviceInfos${pageLink.toQuery()}&deviceProfileId=${deviceProfileId}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getDevice(deviceId: string, config?: RequestConfig): Observable<Device> {\n    return this.http.get<Device>(`/api/device/${deviceId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getDevices(deviceIds: Array<string>, config?: RequestConfig): Observable<Array<Device>> {\n    return this.http.get<Array<Device>>(`/api/devices?deviceIds=${deviceIds.join(',')}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getDeviceInfo(deviceId: string, config?: RequestConfig): Observable<DeviceInfo> {\n    return this.http.get<DeviceInfo>(`/api/device/info/${deviceId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public saveDevice(device: Device, config?: RequestConfig): Observable<Device> {\n    return this.http.post<Device>('/api/device', device, defaultHttpOptionsFromConfig(config));\n  }\n\n  public deleteDevice(deviceId: string, config?: RequestConfig) {\n    return this.http.delete(`/api/device/${deviceId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getDeviceTypes(config?: RequestConfig): Observable<Array<EntitySubtype>> {\n    return this.http.get<Array<EntitySubtype>>('/api/device/types', defaultHttpOptionsFromConfig(config));\n  }\n\n  public getDeviceCredentials(deviceId: string, sync: boolean = false, config?: RequestConfig): Observable<DeviceCredentials> {\n    const url = `/api/device/${deviceId}/credentials`;\n    if (sync) {\n      const responseSubject = new ReplaySubject<DeviceCredentials>();\n      const request = new XMLHttpRequest();\n      request.open('GET', url, false);\n      request.setRequestHeader('Accept', 'application/json, text/plain, */*');\n      const jwtToken = AuthService.getJwtToken();\n      if (jwtToken) {\n        request.setRequestHeader('X-Authorization', 'Bearer ' + jwtToken);\n      }\n      request.send(null);\n      if (request.status === 200) {\n        const credentials = JSON.parse(request.responseText) as DeviceCredentials;\n        responseSubject.next(credentials);\n      } else {\n        responseSubject.error(null);\n      }\n      return responseSubject.asObservable();\n    } else {\n      return this.http.get<DeviceCredentials>(url, defaultHttpOptionsFromConfig(config));\n    }\n  }\n\n  public saveDeviceCredentials(deviceCredentials: DeviceCredentials, config?: RequestConfig): Observable<DeviceCredentials> {\n    return this.http.post<DeviceCredentials>('/api/device/credentials', deviceCredentials, defaultHttpOptionsFromConfig(config));\n  }\n\n  public makeDevicePublic(deviceId: string, config?: RequestConfig): Observable<Device> {\n    return this.http.post<Device>(`/api/customer/public/device/${deviceId}`, null, defaultHttpOptionsFromConfig(config));\n  }\n\n  public assignDeviceToCustomer(customerId: string, deviceId: string,\n                                config?: RequestConfig): Observable<Device> {\n    return this.http.post<Device>(`/api/customer/${customerId}/device/${deviceId}`, null, defaultHttpOptionsFromConfig(config));\n  }\n\n  public unassignDeviceFromCustomer(deviceId: string, config?: RequestConfig) {\n    return this.http.delete(`/api/customer/device/${deviceId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public sendOneWayRpcCommand(deviceId: string, requestBody: any, config?: RequestConfig): Observable<any> {\n    return this.http.post<Device>(`/api/rpc/oneway/${deviceId}`, requestBody, defaultHttpOptionsFromConfig(config));\n  }\n\n  public sendTwoWayRpcCommand(deviceId: string, requestBody: any, config?: RequestConfig): Observable<any> {\n    return this.http.post<Device>(`/api/rpc/twoway/${deviceId}`, requestBody, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getPersistedRpc(rpcId: string, fullResponse = false, config?: RequestConfig): Observable<PersistentRpc> {\n    return this.http.get<PersistentRpc>(`/api/rpc/persistent/${rpcId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public findByQuery(query: DeviceSearchQuery,\n                     config?: RequestConfig): Observable<Array<Device>> {\n    return this.http.post<Array<Device>>('/api/devices', query, defaultHttpOptionsFromConfig(config));\n  }\n\n  public findByName(deviceName: string, config?: RequestConfig): Observable<Device> {\n    return this.http.get<Device>(`/api/tenant/devices?deviceName=${deviceName}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public claimDevice(deviceName: string, claimRequest: ClaimRequest,\n                     config?: RequestConfig): Observable<ClaimResult> {\n    return this.http.post<ClaimResult>(`/api/customer/device/${deviceName}/claim`, claimRequest, defaultHttpOptionsFromConfig(config));\n  }\n\n  public unclaimDevice(deviceName: string, config?: RequestConfig) {\n    return this.http.delete(`/api/customer/device/${deviceName}/claim`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public assignDeviceToEdge(edgeId: string, deviceId: string,\n                            config?: RequestConfig): Observable<Device> {\n    return this.http.post<Device>(`/api/edge/${edgeId}/device/${deviceId}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public unassignDeviceFromEdge(edgeId: string, deviceId: string,\n                                config?: RequestConfig) {\n    return this.http.delete(`/api/edge/${edgeId}/device/${deviceId}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getEdgeDevices(edgeId: string, pageLink: PageLink, type: string = '',\n                        config?: RequestConfig): Observable<PageData<DeviceInfo>> {\n    return this.http.get<PageData<DeviceInfo>>(`/api/edge/${edgeId}/devices${pageLink.toQuery()}&type=${type}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public bulkImportDevices(entitiesData: BulkImportRequest, config?: RequestConfig): Observable<BulkImportResult> {\n    return this.http.post<BulkImportResult>('/api/device/bulk_import', entitiesData, defaultHttpOptionsFromConfig(config));\n  }\n\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { PageLink } from '@shared/models/page/page-link';\nimport { defaultHttpOptionsFromConfig, defaultHttpUploadOptions, RequestConfig } from '@core/http/http-utils';\nimport { forkJoin, Observable, of } from 'rxjs';\nimport { PageData } from '@shared/models/page/page-data';\nimport {\n  ChecksumAlgorithm,\n  OtaPackage,\n  OtaPackageInfo,\n  OtaPagesIds,\n  OtaUpdateType\n} from '@shared/models/ota-package.models';\nimport { catchError, map, mergeMap } from 'rxjs/operators';\nimport { deepClone } from '@core/utils';\nimport { BaseData } from '@shared/models/base-data';\nimport { EntityId } from '@shared/models/id/entity-id';\nimport { TranslateService } from '@ngx-translate/core';\nimport { DialogService } from '@core/services/dialog.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class OtaPackageService {\n  constructor(\n    private http: HttpClient,\n    private translate: TranslateService,\n    private dialogService: DialogService\n  ) {\n\n  }\n\n  public getOtaPackages(pageLink: PageLink, config?: RequestConfig): Observable<PageData<OtaPackageInfo>> {\n    return this.http.get<PageData<OtaPackageInfo>>(`/api/otaPackages${pageLink.toQuery()}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getOtaPackagesInfoByDeviceProfileId(pageLink: PageLink, deviceProfileId: string, type: OtaUpdateType,\n                                             config?: RequestConfig): Observable<PageData<OtaPackageInfo>> {\n    const url = `/api/otaPackages/${deviceProfileId}/${type}${pageLink.toQuery()}`;\n    return this.http.get<PageData<OtaPackageInfo>>(url, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getOtaPackage(otaPackageId: string, config?: RequestConfig): Observable<OtaPackage> {\n    return this.http.get<OtaPackage>(`/api/otaPackages/${otaPackageId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getOtaPackageInfo(otaPackageId: string, config?: RequestConfig): Observable<OtaPackageInfo> {\n    return this.http.get<OtaPackageInfo>(`/api/otaPackage/info/${otaPackageId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public downloadOtaPackage(otaPackageId: string): Observable<any> {\n    return this.http.get(`/api/otaPackage/${otaPackageId}/download`, { responseType: 'arraybuffer', observe: 'response' }).pipe(\n      map((response) => {\n        const headers = response.headers;\n        const filename = headers.get('x-filename');\n        const contentType = headers.get('content-type');\n        const linkElement = document.createElement('a');\n        try {\n          const blob = new Blob([response.body], { type: contentType });\n          const url = URL.createObjectURL(blob);\n          linkElement.setAttribute('href', url);\n          linkElement.setAttribute('download', filename);\n          const clickEvent = new MouseEvent('click',\n            {\n              view: window,\n              bubbles: true,\n              cancelable: false\n            }\n          );\n          linkElement.dispatchEvent(clickEvent);\n          return null;\n        } catch (e) {\n          throw e;\n        }\n      })\n    );\n  }\n\n  public saveOtaPackage(otaPackage: OtaPackage, config?: RequestConfig): Observable<OtaPackage> {\n    if (!otaPackage.file) {\n      return this.saveOtaPackageInfo(otaPackage, config);\n    }\n    const otaPackageInfo = deepClone(otaPackage);\n    delete otaPackageInfo.file;\n    delete otaPackageInfo.checksum;\n    delete otaPackageInfo.checksumAlgorithm;\n    return this.saveOtaPackageInfo(otaPackageInfo, config).pipe(\n      mergeMap(res => {\n        return this.uploadOtaPackageFile(res.id.id, otaPackage.file, otaPackage.checksumAlgorithm, otaPackage.checksum).pipe(\n          catchError(() => this.deleteOtaPackage(res.id.id))\n        );\n      })\n    );\n  }\n\n  public saveOtaPackageInfo(otaPackageInfo: OtaPackageInfo, config?: RequestConfig): Observable<OtaPackage> {\n    return this.http.post<OtaPackage>('/api/otaPackage', otaPackageInfo, defaultHttpOptionsFromConfig(config));\n  }\n\n  public uploadOtaPackageFile(otaPackageId: string, file: File, checksumAlgorithm: ChecksumAlgorithm,\n                              checksum?: string, config?: RequestConfig): Observable<any> {\n    if (!config) {\n      config = {};\n    }\n    const formData = new FormData();\n    formData.append('file', file);\n    let url = `/api/otaPackage/${otaPackageId}?checksumAlgorithm=${checksumAlgorithm}`;\n    if (checksum) {\n      url += `&checksum=${checksum}`;\n    }\n    return this.http.post(url, formData,\n      defaultHttpUploadOptions(config.ignoreLoading, config.ignoreErrors, config.resendRequest));\n  }\n\n  public deleteOtaPackage(otaPackageId: string, config?: RequestConfig) {\n    return this.http.delete(`/api/otaPackage/${otaPackageId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public countUpdateDeviceAfterChangePackage(type: OtaUpdateType, entityId: EntityId, config?: RequestConfig): Observable<number> {\n    return this.http.get<number>(`/api/devices/count/${type}/${entityId.id}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public confirmDialogUpdatePackage(entity: BaseData<EntityId>&OtaPagesIds,\n                                    originEntity: BaseData<EntityId>&OtaPagesIds): Observable<boolean> {\n    const tasks: Observable<number>[] = [];\n    if (originEntity?.id?.id && originEntity.firmwareId?.id !== entity.firmwareId?.id) {\n      tasks.push(this.countUpdateDeviceAfterChangePackage(OtaUpdateType.FIRMWARE, entity.id));\n    } else {\n      tasks.push(of(0));\n    }\n    if (originEntity?.id?.id && originEntity.softwareId?.id !== entity.softwareId?.id) {\n      tasks.push(this.countUpdateDeviceAfterChangePackage(OtaUpdateType.SOFTWARE, entity.id));\n    } else {\n      tasks.push(of(0));\n    }\n    return forkJoin(tasks).pipe(\n      mergeMap(([deviceFirmwareUpdate, deviceSoftwareUpdate]) => {\n        let text = '';\n        if (deviceFirmwareUpdate > 0) {\n          text += this.translate.instant('ota-update.change-firmware', {count: deviceFirmwareUpdate});\n        }\n        if (deviceSoftwareUpdate > 0) {\n          text += text.length ? ' ' : '';\n          text += this.translate.instant('ota-update.change-software', {count: deviceSoftwareUpdate});\n        }\n        return text !== '' ? this.dialogService.confirm('', text, null, this.translate.instant('common.proceed')) : of(true);\n      })\n    );\n  }\n\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nexport interface PageData<T> {\n  data: Array<T>;\n  totalPages: number;\n  totalElements: number;\n  hasNext: boolean;\n}\n\nexport function emptyPageData<T>(): PageData<T> {\n  return {\n    data: [],\n    totalPages: 0,\n    totalElements: 0,\n    hasNext: false\n  } as PageData<T>;\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport {\n  Component,\n  ElementRef,\n  forwardRef,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  SimpleChanges,\n  ViewChild\n} from '@angular/core';\nimport { ControlValueAccessor, FormControl, NG_VALIDATORS, NG_VALUE_ACCESSOR, Validator } from '@angular/forms';\nimport { Ace } from 'ace-builds';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { ActionNotificationHide, ActionNotificationShow } from '@core/notification/notification.actions';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { ContentType, contentTypesMap } from '@shared/models/constants';\nimport { CancelAnimationFrame, RafService } from '@core/services/raf.service';\nimport { guid } from '@core/utils';\nimport { ResizeObserver } from '@juggle/resize-observer';\nimport { getAce } from '@shared/models/ace/ace.models';\nimport { beautifyJs } from '@shared/models/beautify.models';\n\n@Component({\n  selector: 'tb-json-content',\n  templateUrl: './json-content.component.html',\n  styleUrls: ['./json-content.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => JsonContentComponent),\n      multi: true\n    },\n    {\n      provide: NG_VALIDATORS,\n      useExisting: forwardRef(() => JsonContentComponent),\n      multi: true,\n    }\n  ]\n})\nexport class JsonContentComponent implements OnInit, ControlValueAccessor, Validator, OnChanges, OnDestroy {\n\n  @ViewChild('jsonEditor', {static: true})\n  jsonEditorElmRef: ElementRef;\n\n  private jsonEditor: Ace.Editor;\n  private editorsResizeCaf: CancelAnimationFrame;\n  private editorResize$: ResizeObserver;\n  private ignoreChange = false;\n\n  toastTargetId = `jsonContentEditor-${guid()}`;\n\n  @Input() label: string;\n\n  @Input() contentType: ContentType;\n\n  @Input() disabled: boolean;\n\n  @Input() fillHeight: boolean;\n\n  @Input() editorStyle: {[klass: string]: any};\n\n  private readonlyValue: boolean;\n  get readonly(): boolean {\n    return this.readonlyValue;\n  }\n  @Input()\n  set readonly(value: boolean) {\n    this.readonlyValue = coerceBooleanProperty(value);\n  }\n\n  private validateContentValue: boolean;\n  get validateContent(): boolean {\n    return this.validateContentValue;\n  }\n  @Input()\n  set validateContent(value: boolean) {\n    this.validateContentValue = coerceBooleanProperty(value);\n  }\n\n  private validateOnChangeValue: boolean;\n  get validateOnChange(): boolean {\n    return this.validateOnChangeValue;\n  }\n  @Input()\n  set validateOnChange(value: boolean) {\n    this.validateOnChangeValue = coerceBooleanProperty(value);\n  }\n\n  fullscreen = false;\n\n  contentBody: string;\n\n  contentValid: boolean;\n\n  errorShowed = false;\n\n  private propagateChange = null;\n\n  constructor(public elementRef: ElementRef,\n              protected store: Store<AppState>,\n              private raf: RafService) {\n  }\n\n  ngOnInit(): void {\n    const editorElement = this.jsonEditorElmRef.nativeElement;\n    let mode = 'text';\n    if (this.contentType) {\n      mode = contentTypesMap.get(this.contentType).code;\n    }\n    let editorOptions: Partial<Ace.EditorOptions> = {\n      mode: `ace/mode/${mode}`,\n      showGutter: true,\n      showPrintMargin: false,\n      readOnly: this.disabled || this.readonly\n    };\n\n    const advancedOptions = {\n      enableSnippets: true,\n      enableBasicAutocompletion: true,\n      enableLiveAutocompletion: true\n    };\n\n    editorOptions = {...editorOptions, ...advancedOptions};\n    getAce().subscribe(\n      (ace) => {\n        this.jsonEditor = ace.edit(editorElement, editorOptions);\n        this.jsonEditor.session.setUseWrapMode(true);\n        this.jsonEditor.setValue(this.contentBody ? this.contentBody : '', -1);\n        this.jsonEditor.setReadOnly(this.disabled || this.readonly);\n        this.jsonEditor.on('change', () => {\n          if (!this.ignoreChange) {\n            this.cleanupJsonErrors();\n            this.updateView();\n          }\n        });\n        this.jsonEditor.on('blur', () => {\n          this.contentValid = !this.validateContent || this.doValidate(true);\n        });\n        this.editorResize$ = new ResizeObserver(() => {\n          this.onAceEditorResize();\n        });\n        this.editorResize$.observe(editorElement);\n      }\n    );\n  }\n\n  ngOnDestroy(): void {\n    if (this.editorResize$) {\n      this.editorResize$.disconnect();\n    }\n  }\n\n  private onAceEditorResize() {\n    if (this.editorsResizeCaf) {\n      this.editorsResizeCaf();\n      this.editorsResizeCaf = null;\n    }\n    this.editorsResizeCaf = this.raf.raf(() => {\n      this.jsonEditor.resize();\n      this.jsonEditor.renderer.updateFull();\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    for (const propName of Object.keys(changes)) {\n      const change = changes[propName];\n      if (!change.firstChange && change.currentValue !== change.previousValue) {\n        if (propName === 'contentType') {\n          if (this.jsonEditor) {\n            let mode = 'text';\n            if (this.contentType) {\n              mode = contentTypesMap.get(this.contentType).code;\n            }\n            this.jsonEditor.session.setMode(`ace/mode/${mode}`);\n          }\n        }\n      }\n    }\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    if (this.jsonEditor) {\n      this.jsonEditor.setReadOnly(this.disabled || this.readonly);\n    }\n  }\n\n  public validate(c: FormControl) {\n    return (this.contentValid) ? null : {\n      contentBody: {\n        valid: false,\n      },\n    };\n  }\n\n  validateOnSubmit(): void {\n    if (!this.disabled && !this.readonly) {\n      this.cleanupJsonErrors();\n      this.contentValid = true;\n      this.propagateChange(this.contentBody);\n      this.contentValid = this.doValidate(true);\n      this.propagateChange(this.contentBody);\n    }\n  }\n\n  private doValidate(showErrorToast = false): boolean {\n    try {\n      if (this.validateContent && this.contentType === ContentType.JSON) {\n        JSON.parse(this.contentBody);\n      }\n      return true;\n    } catch (ex) {\n      if (showErrorToast) {\n        let errorInfo = 'Error:';\n        if (ex.name) {\n          errorInfo += ' ' + ex.name + ':';\n        }\n        if (ex.message) {\n          errorInfo += ' ' + ex.message;\n        }\n        this.store.dispatch(new ActionNotificationShow(\n          {\n            message: errorInfo,\n            type: 'error',\n            target: this.toastTargetId,\n            verticalPosition: 'bottom',\n            horizontalPosition: 'left'\n          }));\n        this.errorShowed = true;\n      }\n      return false;\n    }\n  }\n\n  cleanupJsonErrors(): void {\n    if (this.errorShowed) {\n      this.store.dispatch(new ActionNotificationHide(\n        {\n          target: this.toastTargetId\n        }));\n      this.errorShowed = false;\n    }\n  }\n\n  writeValue(value: string): void {\n    this.contentBody = value;\n    this.contentValid = true;\n    if (this.jsonEditor) {\n      this.ignoreChange = true;\n      this.jsonEditor.setValue(this.contentBody ? this.contentBody : '', -1);\n      this.ignoreChange = false;\n    }\n  }\n\n  updateView() {\n    const editorValue = this.jsonEditor.getValue();\n    if (this.contentBody !== editorValue) {\n      this.contentBody = editorValue;\n      this.contentValid = !this.validateOnChange || this.doValidate();\n      this.propagateChange(this.contentBody);\n    }\n  }\n\n  beautifyJSON() {\n    beautifyJs(this.contentBody, {indent_size: 4, wrap_line_length: 60}).subscribe(\n      (res) => {\n        this.jsonEditor.setValue(res ? res : '', -1);\n        this.updateView();\n      }\n    );\n  }\n\n  minifyJSON() {\n    const res = JSON.stringify(this.contentBody);\n    this.jsonEditor.setValue(res ? res : '', -1);\n    this.updateView();\n  }\n\n  onFullscreen() {\n    if (this.jsonEditor) {\n      setTimeout(() => {\n        this.jsonEditor.resize();\n      }, 0);\n    }\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<div style=\"background: #fff;\" [ngClass]=\"{'fill-height': fillHeight}\"\n     tb-fullscreen\n     [fullscreen]=\"fullscreen\" (fullscreenChanged)=\"onFullscreen()\" fxLayout=\"column\">\n  <div fxLayout=\"row\" fxLayoutAlign=\"start center\" style=\"height: 40px;\" class=\"tb-json-content-toolbar\">\n    <label class=\"tb-title no-padding\" [ngClass]=\"{'tb-error': !contentValid}\">{{ label }}</label>\n    <span fxFlex></span>\n    <button type=\"button\"\n            mat-button *ngIf=\"!readonly && !disabled\" class=\"tidy\" (click)=\"beautifyJSON()\">\n      {{'js-func.tidy' | translate }}\n    </button>\n    <button type=\"button\"\n            mat-button *ngIf=\"!readonly && !disabled\" class=\"tidy\" (click)=\"minifyJSON()\">\n      {{'js-func.mini' | translate }}\n    </button>\n    <fieldset style=\"width: initial\">\n      <div matTooltip=\"{{(fullscreen ? 'fullscreen.exit' : 'fullscreen.expand') | translate}}\"\n           matTooltipPosition=\"above\"\n           style=\"border-radius: 50%\"\n           (click)=\"fullscreen = !fullscreen\">\n        <button type='button' mat-button mat-icon-button class=\"tb-mat-32\">\n          <mat-icon class=\"material-icons\">{{ fullscreen ? 'fullscreen_exit' : 'fullscreen' }}</mat-icon>\n        </button>\n      </div>\n    </fieldset>\n  </div>\n  <div id=\"tb-json-panel\" tb-toast toastTarget=\"{{toastTargetId}}\"\n       class=\"tb-json-content-panel\" fxLayout=\"column\">\n    <div #jsonEditor id=\"tb-json-input\" [ngStyle]=\"editorStyle\" [ngClass]=\"{'fill-height': fillHeight}\"></div>\n  </div>\n</div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { createFeatureSelector, createSelector } from '@ngrx/store';\n\nimport { SettingsState } from './settings.models';\nimport { AppState } from '@app/core/core.state';\n\nexport const selectSettingsState = createFeatureSelector<AppState, SettingsState>(\n  'settings'\n);\n\nexport const selectSettings = createSelector(\n  selectSettingsState,\n  (state: SettingsState) => state\n);\n\nexport const selectUserLang = createSelector(\n  selectSettings,\n  (state: SettingsState) => state.userLang\n);\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\n\nconst APP_PREFIX = 'TB-';\n\n// @dynamic\n@Injectable(\n  {\n    providedIn: 'root'\n  }\n)\nexport class LocalStorageService {\n  constructor() {}\n\n  static loadInitialState() {\n    return Object.keys(localStorage).reduce((state: any, storageKey) => {\n      if (storageKey.includes(APP_PREFIX)) {\n        const stateKeys = storageKey\n          .replace(APP_PREFIX, '')\n          .toLowerCase()\n          .split('.')\n          .map(key =>\n            key\n              .split('-')\n              .map(\n                (token, index) =>\n                  index === 0\n                    ? token\n                    : token.charAt(0).toUpperCase() + token.slice(1)\n              )\n              .join('')\n          );\n        let currentStateRef = state;\n        stateKeys.forEach((key, index) => {\n          if (index === stateKeys.length - 1) {\n            currentStateRef[key] = JSON.parse(localStorage.getItem(storageKey));\n            return;\n          }\n          currentStateRef[key] = currentStateRef[key] || {};\n          currentStateRef = currentStateRef[key];\n        });\n      }\n      return state;\n    }, {});\n  }\n\n  setItem(key: string, value: any) {\n    localStorage.setItem(`${APP_PREFIX}${key}`, JSON.stringify(value));\n  }\n\n  getItem(key: string) {\n    return JSON.parse(localStorage.getItem(`${APP_PREFIX}${key}`));\n  }\n\n  removeItem(key: string) {\n    localStorage.removeItem(`${APP_PREFIX}${key}`);\n  }\n  /** Tests that localStorage exists, can be written to, and read from. */\n  testLocalStorage() {\n    const testValue = 'testValue';\n    const testKey = 'testKey';\n    let retrievedValue: string;\n    const errorMessage = 'localStorage did not return expected value';\n\n    this.setItem(testKey, testValue);\n    retrievedValue = this.getItem(testKey);\n    this.removeItem(testKey);\n\n    if (retrievedValue !== testValue) {\n      throw new Error(errorMessage);\n    }\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Inject, Pipe, PipeTransform } from '@angular/core';\nimport { WINDOW } from '@core/services/window.service';\n\n// @dynamic\n@Pipe({\n  name: 'keyboardShortcut'\n})\nexport class KeyboardShortcutPipe implements PipeTransform {\n\n  constructor(@Inject(WINDOW) private window: Window) {}\n\n  transform(value: string): string {\n    if (!value) {\n      return;\n    }\n    const keys = value.split('-');\n    const isOSX = /Mac OS X/.test(this.window.navigator.userAgent);\n\n    const seperator = (!isOSX || keys.length > 2) ? '+' : '';\n\n    const abbreviations = {\n      M: isOSX ? '⌘' : 'Ctrl',\n      A: isOSX ? 'Option' : 'Alt',\n      S: 'Shift'\n    };\n\n    return keys.map((key, index) => {\n      const last = index === keys.length - 1;\n      return last ? key : abbreviations[key];\n    }).join(seperator);\n  }\n\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  forwardRef,\n  Input,\n  OnChanges,\n  OnInit,\n  SimpleChanges,\n  ViewChild\n} from '@angular/core';\nimport { ControlValueAccessor, FormBuilder, FormGroup, NG_VALUE_ACCESSOR, Validators } from '@angular/forms';\nimport { Observable } from 'rxjs';\nimport { filter, map, mergeMap, share, tap } from 'rxjs/operators';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@app/core/core.state';\nimport { TranslateService } from '@ngx-translate/core';\nimport { EntityType } from '@shared/models/entity-type.models';\nimport { BaseData } from '@shared/models/base-data';\nimport { EntityId } from '@shared/models/id/entity-id';\nimport { EntityService } from '@core/http/entity.service';\nimport { MatAutocomplete } from '@angular/material/autocomplete';\nimport { MatChipList } from '@angular/material/chips';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\n\n@Component({\n  selector: 'tb-entity-list',\n  templateUrl: './entity-list.component.html',\n  styleUrls: ['./entity-list.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => EntityListComponent),\n      multi: true\n    }\n  ]\n})\nexport class EntityListComponent implements ControlValueAccessor, OnInit, AfterViewInit, OnChanges {\n\n  entityListFormGroup: FormGroup;\n\n  modelValue: Array<string> | null;\n\n  @Input()\n  entityType: EntityType;\n\n  @Input()\n  subType: string;\n\n  private requiredValue: boolean;\n  get required(): boolean {\n    return this.requiredValue;\n  }\n  @Input()\n  set required(value: boolean) {\n    const newVal = coerceBooleanProperty(value);\n    if (this.requiredValue !== newVal) {\n      this.requiredValue = newVal;\n      this.updateValidators();\n    }\n  }\n\n  @Input()\n  disabled: boolean;\n\n  @ViewChild('entityInput') entityInput: ElementRef<HTMLInputElement>;\n  @ViewChild('entityAutocomplete') matAutocomplete: MatAutocomplete;\n  @ViewChild('chipList', {static: true}) chipList: MatChipList;\n\n  entities: Array<BaseData<EntityId>> = [];\n  filteredEntities: Observable<Array<BaseData<EntityId>>>;\n\n  searchText = '';\n\n  private dirty = false;\n\n  private propagateChange = (v: any) => { };\n\n  constructor(private store: Store<AppState>,\n              public translate: TranslateService,\n              private entityService: EntityService,\n              private fb: FormBuilder) {\n    this.entityListFormGroup = this.fb.group({\n      entities: [this.entities, this.required ? [Validators.required] : []],\n      entity: [null]\n    });\n  }\n\n  updateValidators() {\n    this.entityListFormGroup.get('entities').setValidators(this.required ? [Validators.required] : []);\n    this.entityListFormGroup.get('entities').updateValueAndValidity();\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  ngOnInit() {\n    this.filteredEntities = this.entityListFormGroup.get('entity').valueChanges\n    .pipe(\n      // startWith<string | BaseData<EntityId>>(''),\n      tap((value) => {\n        if (value && typeof value !== 'string') {\n          this.add(value);\n        } else if (value === null) {\n          this.clear(this.entityInput.nativeElement.value);\n        }\n      }),\n      filter((value) => typeof value === 'string'),\n      map((value) => value ? (typeof value === 'string' ? value : value.name) : ''),\n      mergeMap(name => this.fetchEntities(name) ),\n      share()\n    );\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    for (const propName of Object.keys(changes)) {\n      const change = changes[propName];\n      if (!change.firstChange && change.currentValue !== change.previousValue) {\n        if (propName === 'entityType') {\n          this.reset();\n        }\n      }\n    }\n  }\n\n  ngAfterViewInit(): void {\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    if (isDisabled) {\n      this.entityListFormGroup.disable({emitEvent: false});\n    } else {\n      this.entityListFormGroup.enable({emitEvent: false});\n    }\n  }\n\n  writeValue(value: Array<string> | null): void {\n    this.searchText = '';\n    if (value != null && value.length > 0) {\n      this.modelValue = [...value];\n      this.entityService.getEntities(this.entityType, value).subscribe(\n        (entities) => {\n          this.entities = entities;\n          this.entityListFormGroup.get('entities').setValue(this.entities);\n        }\n      );\n    } else {\n      this.entities = [];\n      this.entityListFormGroup.get('entities').setValue(this.entities);\n      this.modelValue = null;\n    }\n    this.dirty = true;\n  }\n\n  reset() {\n    this.entities = [];\n    this.entityListFormGroup.get('entities').setValue(this.entities);\n    this.modelValue = null;\n    if (this.entityInput) {\n      this.entityInput.nativeElement.value = '';\n    }\n    this.entityListFormGroup.get('entity').patchValue('', {emitEvent: false});\n    this.propagateChange(this.modelValue);\n    this.dirty = true;\n  }\n\n  add(entity: BaseData<EntityId>): void {\n    if (!this.modelValue || this.modelValue.indexOf(entity.id.id) === -1) {\n      if (!this.modelValue) {\n        this.modelValue = [];\n      }\n      this.modelValue.push(entity.id.id);\n      this.entities.push(entity);\n      this.entityListFormGroup.get('entities').setValue(this.entities);\n    }\n    this.propagateChange(this.modelValue);\n    this.clear();\n  }\n\n  remove(entity: BaseData<EntityId>) {\n    let index = this.entities.indexOf(entity);\n    if (index >= 0) {\n      this.entities.splice(index, 1);\n      this.entityListFormGroup.get('entities').setValue(this.entities);\n      index = this.modelValue.indexOf(entity.id.id);\n      this.modelValue.splice(index, 1);\n      if (!this.modelValue.length) {\n        this.modelValue = null;\n      }\n      this.propagateChange(this.modelValue);\n      this.clear();\n    }\n  }\n\n  displayEntityFn(entity?: BaseData<EntityId>): string | undefined {\n    return entity ? entity.name : undefined;\n  }\n\n  fetchEntities(searchText?: string): Observable<Array<BaseData<EntityId>>> {\n    this.searchText = searchText;\n\n    return this.entityService.getEntitiesByNameFilter(this.entityType, searchText,\n      50, this.subType ? this.subType : '', {ignoreLoading: true}).pipe(\n      map((data) => data ? data : []));\n  }\n\n  onFocus() {\n    if (this.dirty) {\n      this.entityListFormGroup.get('entity').updateValueAndValidity({onlySelf: true, emitEvent: true});\n      this.dirty = false;\n    }\n  }\n\n  clear(value: string = '') {\n    this.entityInput.nativeElement.value = value;\n    this.entityListFormGroup.get('entity').patchValue(value, {emitEvent: true});\n    setTimeout(() => {\n      this.entityInput.nativeElement.blur();\n      this.entityInput.nativeElement.focus();\n    }, 0);\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<mat-form-field appearance=\"standard\" [formGroup]=\"entityListFormGroup\" class=\"mat-block\">\n  <mat-chip-list #chipList formControlName=\"entities\">\n    <mat-chip\n      *ngFor=\"let entity of entities\"\n      [selectable]=\"!disabled\"\n      [removable]=\"!disabled\"\n      (removed)=\"remove(entity)\">\n      {{entity.name}}\n      <mat-icon matChipRemove *ngIf=\"!disabled\">close</mat-icon>\n    </mat-chip>\n    <input matInput type=\"text\" placeholder=\"{{ !disabled ? ('entity.entity-list' | translate) : '' }}\"\n           style=\"max-width: 200px;\"\n           #entityInput\n           (focusin)=\"onFocus()\"\n           formControlName=\"entity\"\n           matAutocompleteOrigin\n           #origin=\"matAutocompleteOrigin\"\n           [matAutocompleteConnectedTo]=\"origin\"\n           [matAutocomplete]=\"entityAutocomplete\"\n           [matChipInputFor]=\"chipList\">\n  </mat-chip-list>\n  <mat-autocomplete #entityAutocomplete=\"matAutocomplete\"\n                    class=\"tb-autocomplete\"\n                    [displayWith]=\"displayEntityFn\">\n    <mat-option *ngFor=\"let entity of filteredEntities | async\" [value]=\"entity\">\n      <span [innerHTML]=\"entity.name | highlight:searchText\"></span>\n    </mat-option>\n    <mat-option *ngIf=\"!(filteredEntities | async)?.length\" [value]=\"null\">\n      <span>\n          {{ translate.get('entity.no-entities-matching', {entity: searchText}) | async }}\n      </span>\n    </mat-option>\n  </mat-autocomplete>\n  <mat-error *ngIf=\"entityListFormGroup.get('entities').hasError('required')\">\n    {{ 'entity.entity-list-empty' | translate }}\n  </mat-error>\n</mat-form-field>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, forwardRef, Input, OnInit } from '@angular/core';\nimport {\n  AbstractControl,\n  ControlValueAccessor,\n  FormArray,\n  FormBuilder,\n  FormControl,\n  FormGroup,\n  NG_VALIDATORS,\n  NG_VALUE_ACCESSOR,\n  Validator,\n  Validators\n} from '@angular/forms';\nimport { PageComponent } from '@shared/components/page.component';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'tb-key-val-map',\n  templateUrl: './kv-map.component.html',\n  styleUrls: ['./kv-map.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => KeyValMapComponent),\n      multi: true\n    },\n    {\n      provide: NG_VALIDATORS,\n      useExisting: forwardRef(() => KeyValMapComponent),\n      multi: true,\n    }\n  ]\n})\nexport class KeyValMapComponent extends PageComponent implements ControlValueAccessor, OnInit, Validator {\n\n  @Input() disabled: boolean;\n\n  @Input() titleText: string;\n\n  @Input() keyPlaceholderText: string;\n\n  @Input() valuePlaceholderText: string;\n\n  @Input() noDataText: string;\n\n  kvListFormGroup: FormGroup;\n\n  private propagateChange = null;\n\n  private valueChangeSubscription: Subscription = null;\n\n  constructor(protected store: Store<AppState>,\n              private fb: FormBuilder) {\n    super(store);\n  }\n\n  ngOnInit(): void {\n    this.kvListFormGroup = this.fb.group({});\n    this.kvListFormGroup.addControl('keyVals',\n      this.fb.array([]));\n  }\n\n  keyValsFormArray(): FormArray {\n    return this.kvListFormGroup.get('keyVals') as FormArray;\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  setDisabledState?(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    if (this.disabled) {\n      this.kvListFormGroup.disable({emitEvent: false});\n    } else {\n      this.kvListFormGroup.enable({emitEvent: false});\n    }\n  }\n\n  writeValue(keyValMap: {[key: string]: string}): void {\n    if (this.valueChangeSubscription) {\n      this.valueChangeSubscription.unsubscribe();\n    }\n    const keyValsControls: Array<AbstractControl> = [];\n    if (keyValMap) {\n      for (const property of Object.keys(keyValMap)) {\n        if (Object.prototype.hasOwnProperty.call(keyValMap, property)) {\n          keyValsControls.push(this.fb.group({\n            key: [property, [Validators.required]],\n            value: [keyValMap[property], [Validators.required]]\n          }));\n        }\n      }\n    }\n    this.kvListFormGroup.setControl('keyVals', this.fb.array(keyValsControls));\n    this.valueChangeSubscription = this.kvListFormGroup.valueChanges.subscribe(() => {\n      this.updateModel();\n    });\n    if (this.disabled) {\n      this.kvListFormGroup.disable({emitEvent: false});\n    } else {\n      this.kvListFormGroup.enable({emitEvent: false});\n    }\n  }\n\n  public removeKeyVal(index: number) {\n    (this.kvListFormGroup.get('keyVals') as FormArray).removeAt(index);\n  }\n\n  public addKeyVal() {\n    const keyValsFormArray = this.kvListFormGroup.get('keyVals') as FormArray;\n    keyValsFormArray.push(this.fb.group({\n      key: ['', [Validators.required]],\n      value: ['', [Validators.required]]\n    }));\n  }\n\n  public validate(c: FormControl) {\n    const kvList: {key: string; value: string}[] = this.kvListFormGroup.get('keyVals').value;\n    let valid = true;\n    for (const entry of kvList) {\n      if (!entry.key || !entry.value) {\n        valid = false;\n        break;\n      }\n    }\n    return (valid) ? null : {\n      keyVals: {\n        valid: false,\n      },\n    };\n  }\n\n  private updateModel() {\n    const kvList: {key: string; value: string}[] = this.kvListFormGroup.get('keyVals').value;\n    const keyValMap: {[key: string]: string} = {};\n    kvList.forEach((entry) => {\n      keyValMap[entry.key] = entry.value;\n    });\n    this.propagateChange(keyValMap);\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<section fxLayout=\"column\" class=\"tb-kv-map\" [formGroup]=\"kvListFormGroup\">\n  <label translate class=\"tb-title no-padding\">{{ titleText }}</label>\n  <div fxLayout=\"row\" fxLayoutAlign=\"start center\" fxLayoutGap=\"8px\" style=\"max-height: 40px;\"\n       formArrayName=\"keyVals\"\n       *ngFor=\"let keyValControl of keyValsFormArray().controls; let $index = index\">\n    <mat-form-field fxFlex floatLabel=\"always\" hideRequiredMarker class=\"mat-block\"\n                    style=\"max-height: 40px;\">\n      <mat-label></mat-label>\n      <input [formControl]=\"keyValControl.get('key')\" matInput required\n             placeholder=\"{{ (keyPlaceholderText ? keyPlaceholderText : 'key-val.key') | translate }}\"/>\n    </mat-form-field>\n    <mat-form-field fxFlex floatLabel=\"always\" hideRequiredMarker class=\"mat-block\"\n                    style=\"max-height: 40px;\">\n      <mat-label></mat-label>\n      <input [formControl]=\"keyValControl.get('value')\" matInput required\n             placeholder=\"{{ (valuePlaceholderText ? valuePlaceholderText : 'key-val.value') | translate }}\"/>\n    </mat-form-field>\n    <button mat-button mat-icon-button color=\"primary\"\n            [fxShow]=\"!disabled\"\n            type=\"button\"\n            (click)=\"removeKeyVal($index)\"\n            [disabled]=\"isLoading$ | async\"\n            matTooltip=\"{{ 'key-val.remove-entry' | translate }}\"\n            matTooltipPosition=\"above\">\n      <mat-icon>close</mat-icon>\n    </button>\n  </div>\n  <span [fxShow]=\"!keyValsFormArray().length\"\n        fxLayoutAlign=\"center center\" [ngClass]=\"{'disabled': disabled}\"\n        class=\"no-data-found\" translate>{{noDataText ? noDataText : 'key-val.no-data'}}</span>\n  <div style=\"margin-top: 8px;\">\n    <button mat-button mat-raised-button color=\"primary\"\n            [fxShow]=\"!disabled\"\n            [disabled]=\"isLoading$ | async\"\n            (click)=\"addKeyVal()\"\n            type=\"button\"\n            matTooltip=\"{{ 'key-val.add-entry' | translate }}\"\n            matTooltipPosition=\"above\">\n      {{ 'action.add' | translate }}\n    </button>\n  </div>\n</section>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ComponentFactory,\n  ComponentFactoryResolver,\n  ComponentRef,\n  Directive,\n  ElementRef,\n  EventEmitter,\n  Injector,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Optional,\n  Output,\n  Renderer2,\n  SimpleChanges,\n  TemplateRef,\n  ViewChild,\n  ViewContainerRef,\n  ViewEncapsulation\n} from '@angular/core';\nimport { Direction, Directionality } from '@angular/cdk/bidi';\nimport {\n  CdkConnectedOverlay,\n  CdkOverlayOrigin,\n  ConnectedOverlayPositionChange,\n  ConnectionPositionPair\n} from '@angular/cdk/overlay';\nimport { Subject, Subscription } from 'rxjs';\nimport {\n  DEFAULT_POPOVER_POSITIONS,\n  getPlacementName,\n  popoverMotion,\n  PopoverPlacement,\n  POSITION_MAP,\n  PropertyMapping\n} from '@shared/components/popover.models';\nimport { distinctUntilChanged, takeUntil } from 'rxjs/operators';\nimport { isNotEmptyStr, onParentScrollOrWindowResize } from '@core/utils';\n\nexport type TbPopoverTrigger = 'click' | 'focus' | 'hover' | null;\n\n@Directive({\n  selector: '[tb-popover]',\n  exportAs: 'tbPopover',\n  host: {\n    '[class.tb-popover-open]': 'visible'\n  }\n})\nexport class TbPopoverDirective implements OnChanges, OnDestroy, AfterViewInit {\n\n  // tslint:disable:no-input-rename\n  @Input('tbPopoverContent') content?: string | TemplateRef<void>;\n  @Input('tbPopoverTrigger') trigger?: TbPopoverTrigger = 'hover';\n  @Input('tbPopoverPlacement') placement?: string | string[] = 'top';\n  @Input('tbPopoverOrigin') origin?: ElementRef<HTMLElement>;\n  @Input('tbPopoverVisible') visible?: boolean;\n  @Input('tbPopoverMouseEnterDelay') mouseEnterDelay?: number;\n  @Input('tbPopoverMouseLeaveDelay') mouseLeaveDelay?: number;\n  @Input('tbPopoverOverlayClassName') overlayClassName?: string;\n  @Input('tbPopoverOverlayStyle') overlayStyle?: { [klass: string]: any };\n  @Input() tbPopoverBackdrop = false;\n\n  // tslint:disable-next-line:no-output-rename\n  @Output('tbPopoverVisibleChange') readonly visibleChange = new EventEmitter<boolean>();\n\n  componentFactory: ComponentFactory<TbPopoverComponent> = this.resolver.resolveComponentFactory(TbPopoverComponent);\n  component?: TbPopoverComponent;\n\n  private readonly destroy$ = new Subject<void>();\n  private readonly triggerDisposables: Array<() => void> = [];\n  private delayTimer?;\n  private internalVisible = false;\n\n  constructor(\n    private elementRef: ElementRef,\n    private hostView: ViewContainerRef,\n    private resolver: ComponentFactoryResolver,\n    private renderer: Renderer2\n  ) {}\n\n  ngOnChanges(changes: SimpleChanges): void {\n    const { trigger } = changes;\n\n    if (trigger && !trigger.isFirstChange()) {\n      this.registerTriggers();\n    }\n\n    if (this.component) {\n      this.updatePropertiesByChanges(changes);\n    }\n  }\n\n  ngAfterViewInit(): void {\n    this.registerTriggers();\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n    this.clearTogglingTimer();\n    this.removeTriggerListeners();\n  }\n\n  show(): void {\n    if (!this.component) {\n      this.createComponent();\n    }\n    this.component?.show();\n  }\n\n  hide(): void {\n    this.component?.hide();\n  }\n\n  updatePosition(): void {\n    if (this.component) {\n      this.component.updatePosition();\n    }\n  }\n\n  private createComponent(): void {\n    const componentRef = this.hostView.createComponent(this.componentFactory);\n\n    this.component = componentRef.instance;\n\n    this.renderer.removeChild(\n      this.renderer.parentNode(this.elementRef.nativeElement),\n      componentRef.location.nativeElement\n    );\n    this.component.setOverlayOrigin({ elementRef: this.origin || this.elementRef });\n\n    this.initProperties();\n\n    this.component.tbVisibleChange\n      .pipe(distinctUntilChanged(), takeUntil(this.destroy$))\n      .subscribe((visible: boolean) => {\n        this.internalVisible = visible;\n        this.visibleChange.emit(visible);\n      });\n  }\n\n  private registerTriggers(): void {\n    // When the method gets invoked, all properties has been synced to the dynamic component.\n    // After removing the old API, we can just check the directive's own `nzTrigger`.\n    const el = this.elementRef.nativeElement;\n    const trigger = this.trigger;\n\n    this.removeTriggerListeners();\n\n    if (trigger === 'hover') {\n      let overlayElement: HTMLElement;\n      this.triggerDisposables.push(\n        this.renderer.listen(el, 'mouseenter', () => {\n          this.delayEnterLeave(true, true, this.mouseEnterDelay);\n        })\n      );\n      this.triggerDisposables.push(\n        this.renderer.listen(el, 'mouseleave', () => {\n          this.delayEnterLeave(true, false, this.mouseLeaveDelay);\n          if (this.component?.overlay.overlayRef && !overlayElement) {\n            overlayElement = this.component.overlay.overlayRef.overlayElement;\n            this.triggerDisposables.push(\n              this.renderer.listen(overlayElement, 'mouseenter', () => {\n                this.delayEnterLeave(false, true, this.mouseEnterDelay);\n              })\n            );\n            this.triggerDisposables.push(\n              this.renderer.listen(overlayElement, 'mouseleave', () => {\n                this.delayEnterLeave(false, false, this.mouseLeaveDelay);\n              })\n            );\n          }\n        })\n      );\n    } else if (trigger === 'focus') {\n      this.triggerDisposables.push(this.renderer.listen(el, 'focusin', () => this.show()));\n      this.triggerDisposables.push(this.renderer.listen(el, 'focusout', () => this.hide()));\n    } else if (trigger === 'click') {\n      this.triggerDisposables.push(\n        this.renderer.listen(el, 'click', (e: MouseEvent) => {\n          e.preventDefault();\n          if (this.component?.visible) {\n            this.hide();\n          } else {\n            this.show();\n          }\n        })\n      );\n    }\n    // Else do nothing because user wants to control the visibility programmatically.\n  }\n\n  private updatePropertiesByChanges(changes: SimpleChanges): void {\n    this.updatePropertiesByKeys(Object.keys(changes));\n  }\n\n  private updatePropertiesByKeys(keys?: string[]): void {\n    const mappingProperties: PropertyMapping = {\n      // common mappings\n      content: ['tbContent', () => this.content],\n      trigger: ['tbTrigger', () => this.trigger],\n      placement: ['tbPlacement', () => this.placement],\n      visible: ['tbVisible', () => this.visible],\n      mouseEnterDelay: ['tbMouseEnterDelay', () => this.mouseEnterDelay],\n      mouseLeaveDelay: ['tbMouseLeaveDelay', () => this.mouseLeaveDelay],\n      overlayClassName: ['tbOverlayClassName', () => this.overlayClassName],\n      overlayStyle: ['tbOverlayStyle', () => this.overlayStyle],\n      tbPopoverBackdrop: ['tbBackdrop', () => this.tbPopoverBackdrop]\n    };\n\n    (keys || Object.keys(mappingProperties).filter(key => !key.startsWith('directive'))).forEach(\n      (property: any) => {\n        if (mappingProperties[property]) {\n          const [name, valueFn] = mappingProperties[property];\n          this.updateComponentValue(name, valueFn());\n        }\n      }\n    );\n\n    this.component?.updateByDirective();\n  }\n\n\n  private initProperties(): void {\n    this.updatePropertiesByKeys();\n  }\n\n  private updateComponentValue(key: string, value: any): void {\n    if (typeof value !== 'undefined') {\n      // @ts-ignore\n      this.component[key] = value;\n    }\n  }\n\n  private delayEnterLeave(isOrigin: boolean, isEnter: boolean, delay: number = -1): void {\n    if (this.delayTimer) {\n      this.clearTogglingTimer();\n    } else if (delay > 0) {\n      this.delayTimer = setTimeout(() => {\n        this.delayTimer = undefined;\n        isEnter ? this.show() : this.hide();\n      }, delay * 1000);\n    } else {\n      // `isOrigin` is used due to the tooltip will not hide immediately\n      // (may caused by the fade-out animation).\n      isEnter && isOrigin ? this.show() : this.hide();\n    }\n  }\n\n  private removeTriggerListeners(): void {\n    this.triggerDisposables.forEach(dispose => dispose());\n    this.triggerDisposables.length = 0;\n  }\n\n  private clearTogglingTimer(): void {\n    if (this.delayTimer) {\n      clearTimeout(this.delayTimer);\n      this.delayTimer = undefined;\n    }\n  }\n}\n\n@Component({\n  selector: 'tb-popover',\n  exportAs: 'tbPopoverComponent',\n  animations: [popoverMotion],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  styleUrls: ['./popover.component.scss'],\n  template: `\n    <ng-template\n      #overlay=\"cdkConnectedOverlay\"\n      cdkConnectedOverlay\n      [cdkConnectedOverlayHasBackdrop]=\"hasBackdrop\"\n      [cdkConnectedOverlayOrigin]=\"origin\"\n      [cdkConnectedOverlayPositions]=\"positions\"\n      [cdkConnectedOverlayOpen]=\"visible\"\n      [cdkConnectedOverlayPush]=\"true\"\n      (overlayOutsideClick)=\"onClickOutside($event)\"\n      (detach)=\"hide()\"\n      (positionChange)=\"onPositionChange($event)\"\n    >\n      <div #popoverRoot [@popoverMotion]=\"tbAnimationState\"\n           (@popoverMotion.done)=\"animationDone()\">\n        <div\n          class=\"tb-popover\"\n          [class.tb-popover-rtl]=\"dir === 'rtl'\"\n          [ngClass]=\"classMap\"\n          [ngStyle]=\"tbOverlayStyle\"\n        >\n          <div class=\"tb-popover-content\">\n            <div class=\"tb-popover-arrow\">\n              <span class=\"tb-popover-arrow-content\"></span>\n            </div>\n            <div class=\"tb-popover-inner\" [ngStyle]=\"tbPopoverInnerStyle\" role=\"tooltip\">\n              <div class=\"tb-popover-close-button\" (click)=\"closeButtonClick($event)\">×</div>\n              <div style=\"width: 100%; height: 100%;\">\n                <div class=\"tb-popover-inner-content\">\n                  <ng-container *ngIf=\"tbContent\">\n                    <ng-container *tbStringTemplateOutlet=\"tbContent\">{{ tbContent }}</ng-container>\n                  </ng-container>\n                  <ng-container *ngIf=\"tbComponentFactory\"\n                                [tbComponentOutlet]=\"tbComponentFactory\"\n                                [tbComponentInjector]=\"tbComponentInjector\"\n                                [tbComponentOutletContext]=\"tbComponentContext\"\n                                (componentChange)=\"onComponentChange($event)\"\n                                [tbComponentStyle]=\"tbComponentStyle\">\n                  </ng-container>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </ng-template>\n  `\n})\nexport class TbPopoverComponent implements OnDestroy, OnInit {\n\n  @ViewChild('overlay', { static: false }) overlay!: CdkConnectedOverlay;\n  @ViewChild('popoverRoot', { static: false }) popoverRoot!: ElementRef<HTMLElement>;\n\n  tbContent: string | TemplateRef<void> | null = null;\n  tbComponentFactory: ComponentFactory<any> | null = null;\n  tbComponentRef: ComponentRef<any> | null = null;\n  tbComponentContext: any;\n  tbComponentInjector: Injector | null = null;\n  tbComponentStyle: { [klass: string]: any }  = {};\n  tbOverlayClassName!: string;\n  tbOverlayStyle: { [klass: string]: any } = {};\n  tbPopoverInnerStyle: { [klass: string]: any } = {};\n  tbBackdrop = false;\n  tbMouseEnterDelay?: number;\n  tbMouseLeaveDelay?: number;\n  tbHideOnClickOutside = true;\n\n  tbAnimationState = 'active';\n\n  tbVisibleChange = new Subject<boolean>();\n  tbAnimationDone = new Subject<void>();\n  tbComponentChange = new Subject<ComponentRef<any>>();\n  tbDestroy = new Subject<void>();\n\n  set tbVisible(value: boolean) {\n    const visible = value;\n    if (this.visible !== visible) {\n      this.visible = visible;\n      this.tbVisibleChange.next(visible);\n    }\n  }\n\n  get tbVisible(): boolean {\n    return this.visible;\n  }\n\n  visible = false;\n\n  set tbHidden(value: boolean) {\n    const hidden = value;\n    if (this.hidden !== hidden) {\n      this.hidden = hidden;\n      if (this.hidden) {\n        this.renderer.setStyle(this.popoverRoot.nativeElement, 'width', this.popoverRoot.nativeElement.offsetWidth + 'px');\n        this.renderer.setStyle(this.popoverRoot.nativeElement, 'height', this.popoverRoot.nativeElement.offsetHeight + 'px');\n      } else {\n        setTimeout(() => {\n          this.renderer.removeStyle(this.popoverRoot.nativeElement, 'width');\n          this.renderer.removeStyle(this.popoverRoot.nativeElement, 'height');\n        });\n      }\n      this.updateStyles();\n      this.cdr.markForCheck();\n    }\n  }\n\n  get tbHidden(): boolean {\n    return this.hidden;\n  }\n\n  hidden = false;\n  lastIsIntersecting = true;\n\n  set tbTrigger(value: TbPopoverTrigger) {\n    this.trigger = value;\n  }\n\n  get tbTrigger(): TbPopoverTrigger {\n    return this.trigger;\n  }\n\n  protected trigger: TbPopoverTrigger = 'hover';\n\n  set tbPlacement(value: PopoverPlacement | PopoverPlacement[]) {\n    if (typeof value === 'string') {\n      this.positions = [POSITION_MAP[value], ...DEFAULT_POPOVER_POSITIONS];\n    } else {\n      const preferredPosition = value.map(placement => POSITION_MAP[placement]);\n      this.positions = [...preferredPosition, ...DEFAULT_POPOVER_POSITIONS];\n    }\n  }\n\n  get hasBackdrop(): boolean {\n    return this.tbTrigger === 'click' ? this.tbBackdrop : false;\n  }\n\n  preferredPlacement: PopoverPlacement = 'top';\n  origin!: CdkOverlayOrigin;\n  public dir: Direction = 'ltr';\n  classMap: { [klass: string]: any } = {};\n  positions: ConnectionPositionPair[] = [...DEFAULT_POPOVER_POSITIONS];\n  private parentScrollSubscription: Subscription = null;\n  private intersectionObserver = new IntersectionObserver((entries) => {\n    if (this.lastIsIntersecting !== entries[0].isIntersecting) {\n      this.lastIsIntersecting = entries[0].isIntersecting;\n      this.updateStyles();\n      this.cdr.markForCheck();\n    }\n  }, {threshold: [0.5]});\n\n  constructor(\n    public cdr: ChangeDetectorRef,\n    private renderer: Renderer2,\n    @Optional() private directionality: Directionality\n  ) {}\n\n  ngOnInit(): void {\n    this.directionality.change?.pipe(takeUntil(this.tbDestroy)).subscribe((direction: Direction) => {\n      this.dir = direction;\n      this.cdr.detectChanges();\n    });\n\n    this.dir = this.directionality.value;\n  }\n\n  ngOnDestroy(): void {\n    if (this.parentScrollSubscription) {\n      this.parentScrollSubscription.unsubscribe();\n      this.parentScrollSubscription = null;\n    }\n    if (this.origin) {\n      const el = this.origin.elementRef.nativeElement;\n      this.intersectionObserver.unobserve(el);\n    }\n    this.intersectionObserver.disconnect();\n    this.intersectionObserver = null;\n    this.tbVisibleChange.complete();\n    this.tbAnimationDone.complete();\n    this.tbDestroy.next();\n    this.tbDestroy.complete();\n  }\n\n  closeButtonClick($event: Event) {\n    if ($event) {\n      $event.preventDefault();\n      $event.stopPropagation();\n    }\n    this.hide();\n  }\n\n  show(): void {\n    if (this.tbVisible) {\n      return;\n    }\n\n    if (!this.isEmpty()) {\n      this.tbVisible = true;\n      this.tbVisibleChange.next(true);\n      this.cdr.detectChanges();\n    }\n\n    if (this.origin && this.overlay && this.overlay.overlayRef) {\n      if (this.overlay.overlayRef.getDirection() === 'rtl') {\n        this.overlay.overlayRef.setDirection('ltr');\n      }\n      const el = this.origin.elementRef.nativeElement;\n      this.parentScrollSubscription = onParentScrollOrWindowResize(el).subscribe(() => {\n        this.overlay.overlayRef.updatePosition();\n      });\n      this.intersectionObserver.observe(el);\n    }\n  }\n\n  hide(): void {\n    if (!this.tbVisible) {\n      return;\n    }\n    if (this.parentScrollSubscription) {\n      this.parentScrollSubscription.unsubscribe();\n      this.parentScrollSubscription = null;\n    }\n    if (this.origin) {\n      const el = this.origin.elementRef.nativeElement;\n      this.intersectionObserver.unobserve(el);\n    }\n\n    this.tbVisible = false;\n    this.tbVisibleChange.next(false);\n    this.cdr.detectChanges();\n  }\n\n  updateByDirective(): void {\n    this.updateStyles();\n    this.cdr.detectChanges();\n\n    Promise.resolve().then(() => {\n      this.updatePosition();\n      this.updateVisibilityByContent();\n    });\n  }\n\n  updatePosition(): void {\n    if (this.origin && this.overlay && this.overlay.overlayRef) {\n      this.overlay.overlayRef.updatePosition();\n    }\n  }\n\n  onPositionChange(position: ConnectedOverlayPositionChange): void {\n    this.preferredPlacement = getPlacementName(position);\n    this.updateStyles();\n    this.cdr.detectChanges();\n  }\n\n  updateStyles(): void {\n    this.classMap = {\n      [`tb-popover-placement-${this.preferredPlacement}`]: true,\n      ['tb-popover-hidden']: this.tbHidden || !this.lastIsIntersecting\n    };\n    if (this.tbOverlayClassName) {\n      this.classMap[this.tbOverlayClassName] = true;\n    }\n  }\n\n  setOverlayOrigin(origin: CdkOverlayOrigin): void {\n    this.origin = origin;\n    this.cdr.markForCheck();\n  }\n\n  onClickOutside(event: MouseEvent): void {\n    if (this.tbHideOnClickOutside && !this.origin.elementRef.nativeElement.contains(event.target) && this.tbTrigger !== null) {\n      this.hide();\n    }\n  }\n\n  onComponentChange(component: ComponentRef<any>) {\n    this.tbComponentRef = component;\n    this.tbComponentChange.next(component);\n  }\n\n  animationDone() {\n    this.tbAnimationDone.next();\n  }\n\n  private updateVisibilityByContent(): void {\n    if (this.isEmpty()) {\n      this.hide();\n    }\n  }\n\n  private isEmpty(): boolean {\n    return (this.tbComponentFactory instanceof ComponentFactory || this.tbContent instanceof TemplateRef)\n      ? false : !isNotEmptyStr(this.tbContent);\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, ElementRef, forwardRef, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ControlValueAccessor, FormControl, NG_VALIDATORS, NG_VALUE_ACCESSOR, Validator } from '@angular/forms';\nimport { Ace } from 'ace-builds';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { ActionNotificationHide, ActionNotificationShow } from '@core/notification/notification.actions';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { CancelAnimationFrame, RafService } from '@core/services/raf.service';\nimport { guid, isDefinedAndNotNull, isLiteralObject, isUndefined } from '@core/utils';\nimport { ResizeObserver } from '@juggle/resize-observer';\nimport { getAce } from '@shared/models/ace/ace.models';\n\n@Component({\n  selector: 'tb-json-object-edit',\n  templateUrl: './json-object-edit.component.html',\n  styleUrls: ['./json-object-edit.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => JsonObjectEditComponent),\n      multi: true\n    },\n    {\n      provide: NG_VALIDATORS,\n      useExisting: forwardRef(() => JsonObjectEditComponent),\n      multi: true,\n    }\n  ]\n})\nexport class JsonObjectEditComponent implements OnInit, ControlValueAccessor, Validator, OnDestroy {\n\n  @ViewChild('jsonEditor', {static: true})\n  jsonEditorElmRef: ElementRef;\n\n  private jsonEditor: Ace.Editor;\n  private editorsResizeCaf: CancelAnimationFrame;\n  private editorResize$: ResizeObserver;\n\n  toastTargetId = `jsonObjectEditor-${guid()}`;\n\n  @Input() label: string;\n\n  @Input() disabled: boolean;\n\n  @Input() fillHeight: boolean;\n\n  @Input() editorStyle: { [klass: string]: any };\n\n  @Input() sort: (key: string, value: any) => any;\n\n  private requiredValue: boolean;\n\n  get required(): boolean {\n    return this.requiredValue;\n  }\n\n  @Input()\n  set required(value: boolean) {\n    this.requiredValue = coerceBooleanProperty(value);\n  }\n\n  private readonlyValue: boolean;\n\n  get readonly(): boolean {\n    return this.readonlyValue;\n  }\n\n  @Input()\n  set readonly(value: boolean) {\n    this.readonlyValue = coerceBooleanProperty(value);\n  }\n\n  fullscreen = false;\n\n  modelValue: any;\n\n  contentValue: string;\n\n  objectValid: boolean;\n\n  validationError: string;\n\n  errorShowed = false;\n\n  ignoreChange = false;\n\n  private propagateChange = null;\n\n  constructor(public elementRef: ElementRef,\n              protected store: Store<AppState>,\n              private raf: RafService) {\n  }\n\n  ngOnInit(): void {\n    const editorElement = this.jsonEditorElmRef.nativeElement;\n    let editorOptions: Partial<Ace.EditorOptions> = {\n      mode: 'ace/mode/json',\n      showGutter: true,\n      showPrintMargin: false,\n      readOnly: this.disabled || this.readonly\n    };\n\n    const advancedOptions = {\n      enableSnippets: true,\n      enableBasicAutocompletion: true,\n      enableLiveAutocompletion: true\n    };\n\n    editorOptions = {...editorOptions, ...advancedOptions};\n    getAce().subscribe(\n      (ace) => {\n        this.jsonEditor = ace.edit(editorElement, editorOptions);\n        this.jsonEditor.session.setUseWrapMode(false);\n        this.jsonEditor.setValue(this.contentValue ? this.contentValue : '', -1);\n        this.jsonEditor.setReadOnly(this.disabled || this.readonly);\n        this.jsonEditor.on('change', () => {\n          if (!this.ignoreChange) {\n            this.cleanupJsonErrors();\n            this.updateView();\n          }\n        });\n        this.editorResize$ = new ResizeObserver(() => {\n          this.onAceEditorResize();\n        });\n        this.editorResize$.observe(editorElement);\n      }\n    );\n  }\n\n  ngOnDestroy(): void {\n    if (this.editorResize$) {\n      this.editorResize$.disconnect();\n    }\n  }\n\n  private onAceEditorResize() {\n    if (this.editorsResizeCaf) {\n      this.editorsResizeCaf();\n      this.editorsResizeCaf = null;\n    }\n    this.editorsResizeCaf = this.raf.raf(() => {\n      this.jsonEditor.resize();\n      this.jsonEditor.renderer.updateFull();\n    });\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    if (this.jsonEditor) {\n      this.jsonEditor.setReadOnly(this.disabled || this.readonly);\n    }\n  }\n\n  public validate(c: FormControl) {\n    return (this.objectValid) ? null : {\n      jsonParseError: {\n        valid: false,\n      },\n    };\n  }\n\n  validateOnSubmit(): void {\n    if (!this.disabled && !this.readonly) {\n      this.cleanupJsonErrors();\n      if (!this.objectValid) {\n        this.store.dispatch(new ActionNotificationShow(\n          {\n            message: this.validationError,\n            type: 'error',\n            target: this.toastTargetId,\n            verticalPosition: 'bottom',\n            horizontalPosition: 'left'\n          }));\n        this.errorShowed = true;\n      }\n    }\n  }\n\n  cleanupJsonErrors(): void {\n    if (this.errorShowed) {\n      this.store.dispatch(new ActionNotificationHide(\n        {\n          target: this.toastTargetId\n        }));\n      this.errorShowed = false;\n    }\n  }\n\n  beautifyJSON() {\n    if (this.jsonEditor && this.objectValid) {\n      const res = JSON.stringify(this.modelValue, null, 2);\n      this.jsonEditor.setValue(res ? res : '', -1);\n      this.updateView();\n    }\n  }\n\n  minifyJSON() {\n    if (this.jsonEditor && this.objectValid) {\n      const res = JSON.stringify(this.modelValue);\n      this.jsonEditor.setValue(res ? res : '', -1);\n      this.updateView();\n    }\n  }\n\n  writeValue(value: any): void {\n    this.modelValue = value;\n    this.contentValue = '';\n    this.objectValid = false;\n    try {\n      if (isDefinedAndNotNull(this.modelValue)) {\n        this.contentValue = JSON.stringify(this.modelValue, isUndefined(this.sort) ? undefined :\n          (key, objectValue) => {\n            return this.sort(key, objectValue);\n          }, 2);\n        this.objectValid = true;\n      } else {\n        this.objectValid = !this.required;\n        this.validationError = 'Json object is required.';\n      }\n    } catch (e) {\n      //\n    }\n    if (this.jsonEditor) {\n      this.ignoreChange = true;\n      this.jsonEditor.setValue(this.contentValue ? this.contentValue : '', -1);\n      this.ignoreChange = false;\n    }\n  }\n\n  updateView() {\n    const editorValue = this.jsonEditor.getValue();\n    if (this.contentValue !== editorValue) {\n      this.contentValue = editorValue;\n      let data = null;\n      this.objectValid = false;\n      if (this.contentValue && this.contentValue.length > 0) {\n        try {\n          data = JSON.parse(this.contentValue);\n          if (!isLiteralObject(data)) {\n            throw new TypeError(`Value is not a valid JSON`);\n          }\n          this.objectValid = true;\n          this.validationError = '';\n        } catch (ex) {\n          let errorInfo = 'Error:';\n          if (ex.name) {\n            errorInfo += ' ' + ex.name + ':';\n          }\n          if (ex.message) {\n            errorInfo += ' ' + ex.message;\n          }\n          this.validationError = errorInfo;\n        }\n      } else {\n        this.objectValid = !this.required;\n        this.validationError = this.required ? 'Json object is required.' : '';\n      }\n      this.modelValue = data;\n      this.propagateChange(data);\n    }\n  }\n\n  onFullscreen() {\n    if (this.jsonEditor) {\n      setTimeout(() => {\n        this.jsonEditor.resize();\n      }, 0);\n    }\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<div style=\"background: #fff;\" [ngClass]=\"{'fill-height': fillHeight}\"\n     tb-fullscreen\n     [fullscreen]=\"fullscreen\" (fullscreenChanged)=\"onFullscreen()\" fxLayout=\"column\">\n  <div fxLayout=\"row\" fxLayoutAlign=\"start center\" class=\"tb-json-object-toolbar\">\n    <label class=\"tb-title no-padding\"\n           [ngClass]=\"{'tb-required': required,\n                       'tb-readonly': readonly,\n                       'tb-error': !objectValid}\">{{ label }}</label>\n    <span fxFlex></span>\n    <button type=\"button\"\n            mat-button *ngIf=\"!readonly && !disabled\" class=\"tidy\" (click)=\"beautifyJSON()\">\n      {{'js-func.tidy' | translate }}\n    </button>\n    <button type=\"button\"\n            mat-button *ngIf=\"!readonly && !disabled\" class=\"tidy\" (click)=\"minifyJSON()\">\n      {{'js-func.mini' | translate }}\n    </button>\n    <button mat-button mat-icon-button (click)=\"fullscreen = !fullscreen\"\n            matTooltip=\"{{(fullscreen ? 'fullscreen.exit' : 'fullscreen.expand') | translate}}\"\n            matTooltipPosition=\"above\">\n      <mat-icon class=\"material-icons\">{{ fullscreen ? 'fullscreen_exit' : 'fullscreen' }}</mat-icon>\n    </button>\n  </div>\n  <div id=\"tb-json-panel\" tb-toast toastTarget=\"{{toastTargetId}}\"\n       class=\"tb-json-object-panel\" fxLayout=\"column\">\n    <div #jsonEditor id=\"tb-json-input\" [ngStyle]=\"editorStyle\" [ngClass]=\"{'fill-height': fillHeight}\"></div>\n  </div>\n</div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { ChangeDetectionStrategy, Component, Input, OnDestroy, OnInit } from '@angular/core';\nimport { BehaviorSubject, Subject } from 'rxjs';\nimport { BreadCrumb, BreadCrumbConfig } from './breadcrumb';\nimport { ActivatedRoute, ActivatedRouteSnapshot, NavigationEnd, Router } from '@angular/router';\nimport { distinctUntilChanged, filter, map } from 'rxjs/operators';\nimport { TranslateService } from '@ngx-translate/core';\nimport { guid } from '@core/utils';\n\n@Component({\n  selector: 'tb-breadcrumb',\n  templateUrl: './breadcrumb.component.html',\n  styleUrls: ['./breadcrumb.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class BreadcrumbComponent implements OnInit, OnDestroy {\n\n  activeComponentValue: any;\n\n  @Input()\n  set activeComponent(activeComponent: any) {\n    this.activeComponentValue = activeComponent;\n  }\n\n  breadcrumbs$: Subject<Array<BreadCrumb>> = new BehaviorSubject<Array<BreadCrumb>>(this.buildBreadCrumbs(this.activatedRoute.snapshot));\n\n  routerEventsSubscription = this.router.events.pipe(\n    filter((event) => event instanceof NavigationEnd ),\n    distinctUntilChanged(),\n    map( () => this.buildBreadCrumbs(this.activatedRoute.snapshot) )\n  ).subscribe(breadcrumns => this.breadcrumbs$.next(breadcrumns) );\n\n  lastBreadcrumb$ = this.breadcrumbs$.pipe(\n    map( breadcrumbs => breadcrumbs[breadcrumbs.length - 1])\n  );\n\n  constructor(private router: Router,\n              private activatedRoute: ActivatedRoute,\n              private translate: TranslateService) {\n  }\n\n  ngOnInit(): void {\n  }\n\n  ngOnDestroy(): void {\n    if (this.routerEventsSubscription) {\n      this.routerEventsSubscription.unsubscribe();\n    }\n  }\n\n  private lastChild(route: ActivatedRouteSnapshot) {\n    let child = route;\n    while (child.firstChild !== null) {\n      child = child.firstChild;\n    }\n    return child;\n  }\n\n  buildBreadCrumbs(route: ActivatedRouteSnapshot, breadcrumbs: Array<BreadCrumb> = [],\n                   lastChild?: ActivatedRouteSnapshot): Array<BreadCrumb> {\n    if (!lastChild) {\n      lastChild = this.lastChild(route);\n    }\n    let newBreadcrumbs = breadcrumbs;\n    if (route.routeConfig && route.routeConfig.data) {\n      const breadcrumbConfig = route.routeConfig.data.breadcrumb as BreadCrumbConfig<any>;\n      if (breadcrumbConfig && !breadcrumbConfig.skip) {\n        let label;\n        let labelFunction;\n        let ignoreTranslate;\n        if (breadcrumbConfig.labelFunction) {\n          labelFunction = () => {\n            return breadcrumbConfig.labelFunction(route, this.translate, this.activeComponentValue, lastChild.data);\n          };\n          ignoreTranslate = true;\n        } else {\n          label = breadcrumbConfig.label || 'home.home';\n          ignoreTranslate = false;\n        }\n        const icon = breadcrumbConfig.icon || 'home';\n        const isMdiIcon = icon.startsWith('mdi:');\n        const link = [ route.pathFromRoot.map(v => v.url.map(segment => segment.toString()).join('/')).join('/') ];\n        const breadcrumb = {\n          id: guid(),\n          label,\n          labelFunction,\n          ignoreTranslate,\n          icon,\n          isMdiIcon,\n          link,\n          queryParams: null\n        };\n        newBreadcrumbs = [...breadcrumbs, breadcrumb];\n      }\n    }\n    if (route.firstChild) {\n      return this.buildBreadCrumbs(route.firstChild, newBreadcrumbs, lastChild);\n    }\n    return newBreadcrumbs;\n  }\n\n  trackByBreadcrumbs(index: number, breadcrumb: BreadCrumb){\n    return breadcrumb.id;\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<div fxFlex class=\"tb-breadcrumb\" fxLayout=\"row\">\n  <h1 fxFlex fxHide.gt-sm *ngIf=\"lastBreadcrumb$ | async; let breadcrumb\">\n    {{ breadcrumb.ignoreTranslate ? (breadcrumb.labelFunction ? breadcrumb.labelFunction() : breadcrumb.label) : (breadcrumb.label | translate) }}\n  </h1>\n  <span fxHide.lt-md fxLayout=\"row\" *ngFor=\"let breadcrumb of breadcrumbs$ | async; trackBy: trackByBreadcrumbs; last as isLast;\" [ngSwitch]=\"isLast\">\n\t    <a *ngSwitchCase=\"false\" [routerLink]=\"breadcrumb.link\" [queryParams]=\"breadcrumb.queryParams\">\n        <mat-icon *ngIf=\"breadcrumb.isMdiIcon\" [svgIcon]=\"breadcrumb.icon\">\n\t    \t</mat-icon>\n        <mat-icon *ngIf=\"!breadcrumb.isMdiIcon\" class=\"material-icons\">\n          {{ breadcrumb.icon }}\n        </mat-icon>\n        {{ breadcrumb.ignoreTranslate ? (breadcrumb.labelFunction ? breadcrumb.labelFunction() : breadcrumb.label) : (breadcrumb.label | translate) }}\n\t    </a>\n\t    <span *ngSwitchCase=\"true\">\n        <mat-icon *ngIf=\"breadcrumb.isMdiIcon\" [svgIcon]=\"breadcrumb.icon\">\n\t    \t</mat-icon>\n\t    \t<mat-icon *ngIf=\"!breadcrumb.isMdiIcon\" class=\"material-icons\">\n\t    \t  {{ breadcrumb.icon }}\n\t    \t</mat-icon>\n        {{ breadcrumb.ignoreTranslate ? (breadcrumb.labelFunction ? breadcrumb.labelFunction() : breadcrumb.label) : (breadcrumb.label | translate) }}\n      </span>\n\t    <span class=\"divider\" [fxHide]=\"isLast\"> > </span>\n\t</span>\n</div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, Inject, OnInit } from '@angular/core';\nimport { DialogComponent } from '@shared/components/dialog.component';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { Router } from '@angular/router';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\n\nexport interface JsonObjectEditDialogData {\n  jsonValue: object;\n  title?: string;\n}\n\n@Component({\n  selector: 'tb-object-edit-dialog',\n  templateUrl: './json-object-edit-dialog.component.html',\n  styleUrls: []\n})\nexport class JsonObjectEditDialogComponent extends DialogComponent<JsonObjectEditDialogComponent, object> implements OnInit {\n\n  jsonFormGroup: FormGroup;\n  title: string;\n\n  submitted = false;\n\n  constructor(protected store: Store<AppState>,\n              protected router: Router,\n              @Inject(MAT_DIALOG_DATA) public data: JsonObjectEditDialogData,\n              public dialogRef: MatDialogRef<JsonObjectEditDialogComponent, object>,\n              public fb: FormBuilder,\n              private translate: TranslateService) {\n    super(store, router, dialogRef);\n  }\n\n  ngOnInit(): void {\n    this.title = this.data.title ? this.data.title : this.translate.instant('details.edit-json');\n    this.jsonFormGroup = this.fb.group({\n      json: [this.data.jsonValue, []]\n    });\n  }\n\n  cancel(): void {\n    this.dialogRef.close(undefined);\n  }\n\n  add(): void {\n    this.dialogRef.close(this.jsonFormGroup.get('json').value);\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<form [formGroup]=\"jsonFormGroup\" (ngSubmit)=\"add()\" style=\"min-width: 400px;\">\n  <mat-toolbar fxLayout=\"row\" color=\"primary\">\n    <h2>{{ title }}</h2>\n    <span fxFlex></span>\n    <button mat-button mat-icon-button\n            (click)=\"cancel()\"\n            type=\"button\">\n      <mat-icon class=\"material-icons\">close</mat-icon>\n    </button>\n  </mat-toolbar>\n  <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\">\n  </mat-progress-bar>\n  <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n  <div mat-dialog-content>\n    <fieldset [disabled]=\"isLoading$ | async\">\n      <tb-json-object-edit\n        formControlName=\"json\"\n        label=\"{{ 'value.json-value' | translate }}\"\n        validateContent=\"true\"\n        [required]=\"true\"\n        [fillHeight]=\"false\">\n      </tb-json-object-edit>\n    </fieldset>\n  </div>\n  <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\">\n    <span fxFlex></span>\n    <button mat-button color=\"primary\"\n            type=\"button\"\n            [disabled]=\"(isLoading$ | async)\"\n            (click)=\"cancel()\" cdkFocusInitial>\n      {{ 'action.cancel' | translate }}\n    </button>\n    <button mat-button mat-raised-button color=\"primary\"\n            type=\"submit\"\n            [disabled]=\"(isLoading$ | async) || jsonFormGroup.invalid || !jsonFormGroup.dirty\">\n      {{ 'action.save' | translate }}\n    </button>\n  </div>\n</form>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component } from '@angular/core';\n\n@Component({\n  selector: 'tb-footer',\n  templateUrl: './footer.component.html',\n  styleUrls: ['./footer.component.scss']\n})\nexport class FooterComponent {\n\n  year = new Date().getFullYear();\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<section class=\"footer-text\">\n  <small>Copyright © {{year}} The ThingsBoard Authors</small>\n</section>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, ViewContainerRef } from '@angular/core';\n\n@Component({\n  selector: 'tb-anchor',\n  template: '<ng-template></ng-template>'\n})\nexport class TbAnchorComponent {\n  constructor(public viewContainerRef: ViewContainerRef) { }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { AfterViewInit, Component, ElementRef, forwardRef, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ControlValueAccessor, FormBuilder, FormGroup, NG_VALUE_ACCESSOR, Validators } from '@angular/forms';\nimport { Observable, of } from 'rxjs';\nimport { map, mergeMap, tap } from 'rxjs/operators';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@app/core/core.state';\nimport { TranslateService } from '@ngx-translate/core';\nimport { BroadcastService } from '@app/core/services/broadcast.service';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { RelationTypes } from '@app/shared/models/relation.models';\n\n@Component({\n  selector: 'tb-relation-type-autocomplete',\n  templateUrl: './relation-type-autocomplete.component.html',\n  styleUrls: [],\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => RelationTypeAutocompleteComponent),\n    multi: true\n  }]\n})\nexport class RelationTypeAutocompleteComponent implements ControlValueAccessor, OnInit, AfterViewInit, OnDestroy {\n\n  relationTypeFormGroup: FormGroup;\n\n  modelValue: string | null;\n\n  private requiredValue: boolean;\n  get required(): boolean {\n    return this.requiredValue;\n  }\n  @Input()\n  set required(value: boolean) {\n    this.requiredValue = coerceBooleanProperty(value);\n  }\n\n  @Input()\n  disabled: boolean;\n\n  @ViewChild('relationTypeInput', {static: true}) relationTypeInput: ElementRef;\n\n  filteredRelationTypes: Observable<Array<string>>;\n\n  searchText = '';\n\n  private dirty = false;\n\n  private propagateChange = (v: any) => { };\n\n  constructor(private store: Store<AppState>,\n              private broadcast: BroadcastService,\n              public translate: TranslateService,\n              private fb: FormBuilder) {\n    this.relationTypeFormGroup = this.fb.group({\n      relationType: [null, this.required ? [Validators.required, Validators.maxLength(255)] : [Validators.maxLength(255)]]\n    });\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  ngOnInit() {\n\n    this.filteredRelationTypes = this.relationTypeFormGroup.get('relationType').valueChanges\n      .pipe(\n        tap(value => {\n          this.updateView(value);\n        }),\n        // startWith<string | EntitySubtype>(''),\n        map(value => value ? value : ''),\n        mergeMap(type => this.fetchRelationTypes(type) )\n      );\n  }\n\n  ngAfterViewInit(): void {\n  }\n\n  ngOnDestroy(): void {\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    if (this.disabled) {\n      this.relationTypeFormGroup.disable({emitEvent: false});\n    } else {\n      this.relationTypeFormGroup.enable({emitEvent: false});\n    }\n  }\n\n  writeValue(value: string | null): void {\n    this.searchText = '';\n    this.modelValue = value;\n    this.relationTypeFormGroup.get('relationType').patchValue(value, {emitEvent: false});\n    this.dirty = true;\n  }\n\n  onFocus() {\n    if (this.dirty) {\n      this.relationTypeFormGroup.get('relationType').updateValueAndValidity({onlySelf: true, emitEvent: true});\n      this.dirty = false;\n    }\n  }\n\n  updateView(value: string | null) {\n    if (this.modelValue !== value) {\n      this.modelValue = value;\n      this.propagateChange(this.modelValue);\n    }\n  }\n\n  displayRelationTypeFn(relationType?: string): string | undefined {\n    return relationType ? relationType : undefined;\n  }\n\n  fetchRelationTypes(searchText?: string, strictMatch: boolean = false): Observable<Array<string>> {\n    this.searchText = searchText;\n    return of(RelationTypes).pipe(\n      map(relationTypes => relationTypes.filter( relationType => {\n        if (strictMatch) {\n          return searchText ? relationType === searchText : false;\n        } else {\n          return searchText ? relationType.toUpperCase().startsWith(searchText.toUpperCase()) : true;\n        }\n      }))\n    );\n  }\n\n  clear() {\n    this.relationTypeFormGroup.get('relationType').patchValue(null, {emitEvent: true});\n    setTimeout(() => {\n      this.relationTypeInput.nativeElement.blur();\n      this.relationTypeInput.nativeElement.focus();\n    }, 0);\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<mat-form-field [formGroup]=\"relationTypeFormGroup\" class=\"mat-block\">\n  <input matInput type=\"text\" placeholder=\"{{ required  ? ('relation.relation-type' | translate) : ( !modelValue ? ('relation.any-relation-type' | translate) : ' ') }}\"\n         #relationTypeInput\n         formControlName=\"relationType\"\n         (focusin)=\"onFocus()\"\n         [required]=\"required\"\n         [matAutocomplete]=\"relationTypeAutocomplete\">\n  <button *ngIf=\"relationTypeFormGroup.get('relationType').value && !disabled\"\n          type=\"button\"\n          matSuffix mat-icon-button aria-label=\"Clear\"\n          (click)=\"clear()\">\n    <mat-icon class=\"material-icons\">close</mat-icon>\n  </button>\n  <mat-autocomplete\n    class=\"tb-autocomplete\"\n    #relationTypeAutocomplete=\"matAutocomplete\"\n    [displayWith]=\"displayRelationTypeFn\">\n    <mat-option *ngFor=\"let relationType of filteredRelationTypes | async\" [value]=\"relationType\">\n      <span [innerHTML]=\"relationType | highlight:searchText\"></span>\n    </mat-option>\n  </mat-autocomplete>\n  <mat-error *ngIf=\"relationTypeFormGroup.get('relationType').hasError('required')\">\n    {{ 'relation.relation-type-required' | translate }}\n  </mat-error>\n  <mat-error *ngIf=\"relationTypeFormGroup.get('relationType').hasError('maxlength')\">\n    {{ 'relation.relation-type-max-length' | translate }}\n  </mat-error>\n</mat-form-field>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { defaultHttpOptionsFromConfig, RequestConfig } from '@core/http/http-utils';\nimport { Observable } from 'rxjs';\nimport { ServiceType } from '@shared/models/queue.models';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class QueueService {\n\n  constructor(\n    private http: HttpClient\n  ) { }\n\n  public getTenantQueuesByServiceType(serviceType: ServiceType, config?: RequestConfig): Observable<Array<string>> {\n    return this.http.get<Array<string>>(`/api/tenant/queues?serviceType=${serviceType}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { NotificationState } from './notification.models';\nimport { NotificationActions, NotificationActionTypes } from './notification.actions';\n\nexport const initialState: NotificationState = {\n  notification: null,\n  hideNotification: null\n};\n\nexport function notificationReducer(\n  state: NotificationState = initialState,\n  action: NotificationActions\n): NotificationState {\n  switch (action.type) {\n    case NotificationActionTypes.SHOW_NOTIFICATION:\n      return { ...state, notification: action.notification };\n    case NotificationActionTypes.HIDE_NOTIFICATION:\n      return { ...state, hideNotification: action.hideNotification };\n    default:\n      return state;\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { BaseData } from '@shared/models/base-data';\nimport { DeviceId } from './id/device-id';\nimport { TenantId } from '@shared/models/id/tenant-id';\nimport { CustomerId } from '@shared/models/id/customer-id';\nimport { DeviceCredentialsId } from '@shared/models/id/device-credentials-id';\nimport { EntitySearchQuery } from '@shared/models/relation.models';\nimport { DeviceProfileId } from '@shared/models/id/device-profile-id';\nimport { RuleChainId } from '@shared/models/id/rule-chain-id';\nimport { EntityInfoData } from '@shared/models/entity.models';\nimport { FilterPredicateValue, KeyFilter } from '@shared/models/query/query.models';\nimport { TimeUnit } from '@shared/models/time/time.models';\nimport * as _moment from 'moment';\nimport { AbstractControl, ValidationErrors } from '@angular/forms';\nimport { OtaPackageId } from '@shared/models/id/ota-package-id';\nimport { DashboardId } from '@shared/models/id/dashboard-id';\nimport { DataType } from '@shared/models/constants';\nimport {\n  getDefaultBootstrapServerSecurityConfig,\n  getDefaultBootstrapServersSecurityConfig,\n  getDefaultLwM2MServerSecurityConfig,\n  getDefaultProfileClientLwM2mSettingsConfig,\n  getDefaultProfileObserveAttrConfig,\n  PowerMode\n} from '@home/components/profile/device/lwm2m/lwm2m-profile-config.models';\n\nexport enum DeviceProfileType {\n  DEFAULT = 'DEFAULT',\n  SNMP = 'SNMP'\n}\n\nexport enum DeviceTransportType {\n  DEFAULT = 'DEFAULT',\n  MQTT = 'MQTT',\n  COAP = 'COAP',\n  LWM2M = 'LWM2M',\n  SNMP = 'SNMP'\n}\n\nexport enum TransportPayloadType {\n  JSON = 'JSON',\n  PROTOBUF = 'PROTOBUF'\n}\n\nexport enum CoapTransportDeviceType {\n  DEFAULT = 'DEFAULT',\n  EFENTO = 'EFENTO'\n}\n\nexport enum DeviceProvisionType {\n  DISABLED = 'DISABLED',\n  ALLOW_CREATE_NEW_DEVICES = 'ALLOW_CREATE_NEW_DEVICES',\n  CHECK_PRE_PROVISIONED_DEVICES = 'CHECK_PRE_PROVISIONED_DEVICES'\n}\n\nexport interface DeviceConfigurationFormInfo {\n  hasProfileConfiguration: boolean;\n  hasDeviceConfiguration: boolean;\n}\n\nexport const deviceProfileTypeTranslationMap = new Map<DeviceProfileType, string>(\n  [\n    [DeviceProfileType.DEFAULT, 'device-profile.type-default']\n  ]\n);\n\nexport const deviceProfileTypeConfigurationInfoMap = new Map<DeviceProfileType, DeviceConfigurationFormInfo>(\n  [\n    [\n      DeviceProfileType.DEFAULT,\n      {\n        hasProfileConfiguration: false,\n        hasDeviceConfiguration: false,\n      }\n    ],\n    [\n      DeviceProfileType.SNMP,\n      {\n        hasProfileConfiguration: true,\n        hasDeviceConfiguration: true,\n      }\n    ]\n  ]\n);\n\nexport const deviceTransportTypeTranslationMap = new Map<DeviceTransportType, string>(\n  [\n    [DeviceTransportType.DEFAULT, 'device-profile.transport-type-default'],\n    [DeviceTransportType.MQTT, 'device-profile.transport-type-mqtt'],\n    [DeviceTransportType.COAP, 'device-profile.transport-type-coap'],\n    [DeviceTransportType.LWM2M, 'device-profile.transport-type-lwm2m'],\n    [DeviceTransportType.SNMP, 'device-profile.transport-type-snmp']\n  ]\n);\n\n\nexport const deviceProvisionTypeTranslationMap = new Map<DeviceProvisionType, string>(\n  [\n    [DeviceProvisionType.DISABLED, 'device-profile.provision-strategy-disabled'],\n    [DeviceProvisionType.ALLOW_CREATE_NEW_DEVICES, 'device-profile.provision-strategy-created-new'],\n    [DeviceProvisionType.CHECK_PRE_PROVISIONED_DEVICES, 'device-profile.provision-strategy-check-pre-provisioned']\n  ]\n);\n\nexport const deviceTransportTypeHintMap = new Map<DeviceTransportType, string>(\n  [\n    [DeviceTransportType.DEFAULT, 'device-profile.transport-type-default-hint'],\n    [DeviceTransportType.MQTT, 'device-profile.transport-type-mqtt-hint'],\n    [DeviceTransportType.COAP, 'device-profile.transport-type-coap-hint'],\n    [DeviceTransportType.LWM2M, 'device-profile.transport-type-lwm2m-hint'],\n    [DeviceTransportType.SNMP, 'device-profile.transport-type-snmp-hint']\n  ]\n);\n\nexport const transportPayloadTypeTranslationMap = new Map<TransportPayloadType, string>(\n  [\n    [TransportPayloadType.JSON, 'device-profile.transport-device-payload-type-json'],\n    [TransportPayloadType.PROTOBUF, 'device-profile.transport-device-payload-type-proto']\n  ]\n);\n\nexport const defaultTelemetrySchema =\n  'syntax =\"proto3\";\\n' +\n  'package telemetry;\\n' +\n  '\\n' +\n  'message SensorDataReading {\\n' +\n  '\\n' +\n  '  optional double temperature = 1;\\n' +\n  '  optional double humidity = 2;\\n' +\n  '  InnerObject innerObject = 3;\\n' +\n  '\\n' +\n  '  message InnerObject {\\n' +\n  '    optional string key1 = 1;\\n' +\n  '    optional bool key2 = 2;\\n' +\n  '    optional double key3 = 3;\\n' +\n  '    optional int32 key4 = 4;\\n' +\n  '    optional string key5 = 5;\\n' +\n  '  }\\n' +\n  '}\\n';\n\nexport const defaultAttributesSchema =\n  'syntax =\"proto3\";\\n' +\n  'package attributes;\\n' +\n  '\\n' +\n  'message SensorConfiguration {\\n' +\n  '  optional string firmwareVersion = 1;\\n' +\n  '  optional string serialNumber = 2;\\n' +\n  '}';\n\nexport const defaultRpcRequestSchema =\n  'syntax =\"proto3\";\\n' +\n  'package rpc;\\n' +\n  '\\n' +\n  'message RpcRequestMsg {\\n' +\n  '  optional string method = 1;\\n' +\n  '  optional int32 requestId = 2;\\n' +\n  '  optional string params = 3;\\n' +\n  '}';\n\nexport const defaultRpcResponseSchema =\n  'syntax =\"proto3\";\\n' +\n  'package rpc;\\n' +\n  '\\n' +\n  'message RpcResponseMsg {\\n' +\n  '  optional string payload = 1;\\n' +\n  '}';\n\nexport const coapDeviceTypeTranslationMap = new Map<CoapTransportDeviceType, string>(\n  [\n    [CoapTransportDeviceType.DEFAULT, 'device-profile.coap-device-type-default'],\n    [CoapTransportDeviceType.EFENTO, 'device-profile.coap-device-type-efento']\n  ]\n);\n\n\nexport const deviceTransportTypeConfigurationInfoMap = new Map<DeviceTransportType, DeviceConfigurationFormInfo>(\n  [\n    [\n      DeviceTransportType.DEFAULT,\n      {\n        hasProfileConfiguration: false,\n        hasDeviceConfiguration: false,\n      }\n    ],\n    [\n      DeviceTransportType.MQTT,\n      {\n        hasProfileConfiguration: true,\n        hasDeviceConfiguration: false,\n      }\n    ],\n    [\n      DeviceTransportType.LWM2M,\n      {\n        hasProfileConfiguration: true,\n        hasDeviceConfiguration: true,\n      }\n    ],\n    [\n      DeviceTransportType.COAP,\n      {\n        hasProfileConfiguration: true,\n        hasDeviceConfiguration: true,\n      }\n    ],\n    [\n      DeviceTransportType.SNMP,\n      {\n        hasProfileConfiguration: true,\n        hasDeviceConfiguration: true\n      }\n    ]\n  ]\n);\n\nexport interface DefaultDeviceProfileConfiguration {\n  [key: string]: any;\n}\n\nexport type DeviceProfileConfigurations = DefaultDeviceProfileConfiguration;\n\nexport interface DeviceProfileConfiguration extends DeviceProfileConfigurations {\n  type: DeviceProfileType;\n}\n\nexport interface DefaultDeviceProfileTransportConfiguration {\n  [key: string]: any;\n}\n\nexport interface MqttDeviceProfileTransportConfiguration {\n  deviceTelemetryTopic?: string;\n  deviceAttributesTopic?: string;\n  transportPayloadTypeConfiguration?: {\n    transportPayloadType?: TransportPayloadType;\n    enableCompatibilityWithJsonPayloadFormat?: boolean;\n    useJsonPayloadFormatForDefaultDownlinkTopics?: boolean;\n  };\n  [key: string]: any;\n}\n\nexport interface CoapClientSetting {\n  powerMode?: PowerMode | null;\n  edrxCycle?: number;\n  pagingTransmissionWindow?: number;\n  psmActivityTimer?: number;\n}\n\nexport interface CoapDeviceProfileTransportConfiguration {\n  coapDeviceTypeConfiguration?: {\n    coapDeviceType?: CoapTransportDeviceType;\n    transportPayloadTypeConfiguration?: {\n      transportPayloadType?: TransportPayloadType;\n      [key: string]: any;\n    };\n  };\n  clientSettings?: CoapClientSetting;\n}\n\nexport interface Lwm2mDeviceProfileTransportConfiguration {\n  [key: string]: any;\n}\n\nexport interface SnmpDeviceProfileTransportConfiguration {\n  timeoutMs?: number;\n  retries?: number;\n  communicationConfigs?: SnmpCommunicationConfig[];\n}\n\nexport enum SnmpSpecType {\n  TELEMETRY_QUERYING = 'TELEMETRY_QUERYING',\n  CLIENT_ATTRIBUTES_QUERYING = 'CLIENT_ATTRIBUTES_QUERYING',\n  SHARED_ATTRIBUTES_SETTING = 'SHARED_ATTRIBUTES_SETTING',\n  TO_DEVICE_RPC_REQUEST = 'TO_DEVICE_RPC_REQUEST'\n}\n\nexport const SnmpSpecTypeTranslationMap = new Map<SnmpSpecType, string>([\n  [SnmpSpecType.TELEMETRY_QUERYING, ' Telemetry'],\n  [SnmpSpecType.CLIENT_ATTRIBUTES_QUERYING, 'Client attributes'],\n  [SnmpSpecType.SHARED_ATTRIBUTES_SETTING, 'Shared attributes'],\n  [SnmpSpecType.TO_DEVICE_RPC_REQUEST, 'RPC request']\n]);\n\nexport interface SnmpCommunicationConfig {\n  spec: SnmpSpecType;\n  mappings: SnmpMapping[];\n  queryingFrequencyMs?: number;\n}\n\nexport interface SnmpMapping {\n  oid: string;\n  key: string;\n  dataType: DataType;\n}\n\nexport type DeviceProfileTransportConfigurations = DefaultDeviceProfileTransportConfiguration &\n                                                   MqttDeviceProfileTransportConfiguration &\n                                                   CoapDeviceProfileTransportConfiguration &\n                                                   Lwm2mDeviceProfileTransportConfiguration &\n                                                   SnmpDeviceProfileTransportConfiguration;\n\nexport interface DeviceProfileTransportConfiguration extends DeviceProfileTransportConfigurations {\n  type: DeviceTransportType;\n}\n\nexport interface DeviceProvisionConfiguration {\n  type: DeviceProvisionType;\n  provisionDeviceSecret?: string;\n  provisionDeviceKey?: string;\n}\n\nexport function createDeviceProfileConfiguration(type: DeviceProfileType): DeviceProfileConfiguration {\n  let configuration: DeviceProfileConfiguration = null;\n  if (type) {\n    switch (type) {\n      case DeviceProfileType.DEFAULT:\n        const defaultConfiguration: DefaultDeviceProfileConfiguration = {};\n        configuration = {...defaultConfiguration, type: DeviceProfileType.DEFAULT};\n        break;\n    }\n  }\n  return configuration;\n}\n\nexport function createDeviceConfiguration(type: DeviceProfileType): DeviceConfiguration {\n  let configuration: DeviceConfiguration = null;\n  if (type) {\n    switch (type) {\n      case DeviceProfileType.DEFAULT:\n        const defaultConfiguration: DefaultDeviceConfiguration = {};\n        configuration = {...defaultConfiguration, type: DeviceProfileType.DEFAULT};\n        break;\n    }\n  }\n  return configuration;\n}\n\nexport function createDeviceProfileTransportConfiguration(type: DeviceTransportType): DeviceProfileTransportConfiguration {\n  let transportConfiguration: DeviceProfileTransportConfiguration = null;\n  if (type) {\n    switch (type) {\n      case DeviceTransportType.DEFAULT:\n        const defaultTransportConfiguration: DefaultDeviceProfileTransportConfiguration = {};\n        transportConfiguration = {...defaultTransportConfiguration, type: DeviceTransportType.DEFAULT};\n        break;\n      case DeviceTransportType.MQTT:\n        const mqttTransportConfiguration: MqttDeviceProfileTransportConfiguration = {\n          deviceTelemetryTopic: 'v1/devices/me/telemetry',\n          deviceAttributesTopic: 'v1/devices/me/attributes',\n          transportPayloadTypeConfiguration: {\n            transportPayloadType: TransportPayloadType.JSON,\n            enableCompatibilityWithJsonPayloadFormat: false,\n            useJsonPayloadFormatForDefaultDownlinkTopics: false,\n          }\n        };\n        transportConfiguration = {...mqttTransportConfiguration, type: DeviceTransportType.MQTT};\n        break;\n      case DeviceTransportType.COAP:\n        const coapTransportConfiguration: CoapDeviceProfileTransportConfiguration = {\n          coapDeviceTypeConfiguration: {\n            coapDeviceType: CoapTransportDeviceType.DEFAULT,\n            transportPayloadTypeConfiguration: {transportPayloadType: TransportPayloadType.JSON}\n          },\n          clientSettings: {\n            powerMode: PowerMode.DRX\n          }\n        };\n        transportConfiguration = {...coapTransportConfiguration, type: DeviceTransportType.COAP};\n        break;\n      case DeviceTransportType.LWM2M:\n        const lwm2mTransportConfiguration: Lwm2mDeviceProfileTransportConfiguration = {\n          observeAttr: getDefaultProfileObserveAttrConfig(),\n          bootstrap: {\n            servers: getDefaultBootstrapServersSecurityConfig(),\n            bootstrapServer: getDefaultBootstrapServerSecurityConfig(),\n            lwm2mServer: getDefaultLwM2MServerSecurityConfig()\n          },\n          clientLwM2mSettings: getDefaultProfileClientLwM2mSettingsConfig()\n        };\n        transportConfiguration = {...lwm2mTransportConfiguration, type: DeviceTransportType.LWM2M};\n        break;\n      case DeviceTransportType.SNMP:\n        const snmpTransportConfiguration: SnmpDeviceProfileTransportConfiguration = {\n          timeoutMs: 500,\n          retries: 0,\n          communicationConfigs: null\n        };\n        transportConfiguration = {...snmpTransportConfiguration, type: DeviceTransportType.SNMP};\n        break;\n    }\n  }\n  return transportConfiguration;\n}\n\nexport function createDeviceTransportConfiguration(type: DeviceTransportType): DeviceTransportConfiguration {\n  let transportConfiguration: DeviceTransportConfiguration = null;\n  if (type) {\n    switch (type) {\n      case DeviceTransportType.DEFAULT:\n        const defaultTransportConfiguration: DefaultDeviceTransportConfiguration = {};\n        transportConfiguration = {...defaultTransportConfiguration, type: DeviceTransportType.DEFAULT};\n        break;\n      case DeviceTransportType.MQTT:\n        const mqttTransportConfiguration: MqttDeviceTransportConfiguration = {};\n        transportConfiguration = {...mqttTransportConfiguration, type: DeviceTransportType.MQTT};\n        break;\n      case DeviceTransportType.COAP:\n        const coapTransportConfiguration: CoapDeviceTransportConfiguration = {\n          powerMode: null\n        };\n        transportConfiguration = {...coapTransportConfiguration, type: DeviceTransportType.COAP};\n        break;\n      case DeviceTransportType.LWM2M:\n        const lwm2mTransportConfiguration: Lwm2mDeviceTransportConfiguration = {\n          powerMode: null\n        };\n        transportConfiguration = {...lwm2mTransportConfiguration, type: DeviceTransportType.LWM2M};\n        break;\n      case DeviceTransportType.SNMP:\n        const snmpTransportConfiguration: SnmpDeviceTransportConfiguration = {\n          host: 'localhost',\n          port: 161,\n          protocolVersion: SnmpDeviceProtocolVersion.V2C,\n          community: 'public'\n        };\n        transportConfiguration = {...snmpTransportConfiguration, type: DeviceTransportType.SNMP};\n        break;\n    }\n  }\n  return transportConfiguration;\n}\n\nexport enum AlarmConditionType {\n  SIMPLE = 'SIMPLE',\n  DURATION = 'DURATION',\n  REPEATING = 'REPEATING'\n}\n\nexport const AlarmConditionTypeTranslationMap = new Map<AlarmConditionType, string>(\n  [\n    [AlarmConditionType.SIMPLE, 'device-profile.condition-type-simple'],\n    [AlarmConditionType.DURATION, 'device-profile.condition-type-duration'],\n    [AlarmConditionType.REPEATING, 'device-profile.condition-type-repeating']\n  ]\n);\n\nexport interface AlarmConditionSpec{\n  type?: AlarmConditionType;\n  unit?: TimeUnit;\n  predicate: FilterPredicateValue<number>;\n}\n\nexport interface AlarmCondition {\n  condition: Array<KeyFilter>;\n  spec?: AlarmConditionSpec;\n}\n\nexport enum AlarmScheduleType {\n  ANY_TIME = 'ANY_TIME',\n  SPECIFIC_TIME = 'SPECIFIC_TIME',\n  CUSTOM = 'CUSTOM'\n}\n\nexport const AlarmScheduleTypeTranslationMap = new Map<AlarmScheduleType, string>(\n  [\n    [AlarmScheduleType.ANY_TIME, 'device-profile.schedule-any-time'],\n    [AlarmScheduleType.SPECIFIC_TIME, 'device-profile.schedule-specific-time'],\n    [AlarmScheduleType.CUSTOM, 'device-profile.schedule-custom']\n  ]\n);\n\nexport interface AlarmSchedule{\n  type: AlarmScheduleType;\n  timezone?: string;\n  daysOfWeek?: number[];\n  startsOn?: number;\n  endsOn?: number;\n  items?: CustomTimeSchedulerItem[];\n}\n\nexport interface CustomTimeSchedulerItem{\n  enabled: boolean;\n  dayOfWeek: number;\n  startsOn: number;\n  endsOn: number;\n}\n\nexport interface AlarmRule {\n  condition: AlarmCondition;\n  alarmDetails?: string;\n  dashboardId?: DashboardId;\n  schedule?: AlarmSchedule;\n}\n\nexport function alarmRuleValidator(control: AbstractControl): ValidationErrors | null {\n  const alarmRule: AlarmRule = control.value;\n  return alarmRuleValid(alarmRule) ? null : {alarmRule: true};\n}\n\nfunction alarmRuleValid(alarmRule: AlarmRule): boolean {\n  if (!alarmRule || !alarmRule.condition || !alarmRule.condition.condition || !alarmRule.condition.condition.length) {\n    return false;\n  }\n  return true;\n}\n\nexport interface DeviceProfileAlarm {\n  id: string;\n  alarmType: string;\n  createRules: {[severity: string]: AlarmRule};\n  clearRule?: AlarmRule;\n  propagate?: boolean;\n  propagateRelationTypes?: Array<string>;\n}\n\nexport function deviceProfileAlarmValidator(control: AbstractControl): ValidationErrors | null {\n  const deviceProfileAlarm: DeviceProfileAlarm = control.value;\n  if (deviceProfileAlarm && deviceProfileAlarm.id && deviceProfileAlarm.alarmType &&\n    deviceProfileAlarm.createRules) {\n    const severities = Object.keys(deviceProfileAlarm.createRules);\n    if (severities.length) {\n      let alarmRulesValid = true;\n      for (const severity of severities) {\n        const alarmRule = deviceProfileAlarm.createRules[severity];\n        if (!alarmRuleValid(alarmRule)) {\n          alarmRulesValid = false;\n          break;\n        }\n      }\n      if (alarmRulesValid) {\n        if (deviceProfileAlarm.clearRule && !alarmRuleValid(deviceProfileAlarm.clearRule)) {\n          alarmRulesValid = false;\n        }\n      }\n      if (alarmRulesValid) {\n        return null;\n      }\n    }\n  }\n  return {deviceProfileAlarm: true};\n}\n\n\nexport interface DeviceProfileData {\n  configuration: DeviceProfileConfiguration;\n  transportConfiguration: DeviceProfileTransportConfiguration;\n  alarms?: Array<DeviceProfileAlarm>;\n  provisionConfiguration?: DeviceProvisionConfiguration;\n}\n\nexport interface DeviceProfile extends BaseData<DeviceProfileId> {\n  tenantId?: TenantId;\n  name: string;\n  description?: string;\n  default?: boolean;\n  type: DeviceProfileType;\n  image?: string;\n  transportType: DeviceTransportType;\n  provisionType: DeviceProvisionType;\n  provisionDeviceKey?: string;\n  defaultRuleChainId?: RuleChainId;\n  defaultDashboardId?: DashboardId;\n  defaultQueueName?: string;\n  firmwareId?: OtaPackageId;\n  softwareId?: OtaPackageId;\n  profileData: DeviceProfileData;\n}\n\nexport interface DeviceProfileInfo extends EntityInfoData {\n  type: DeviceProfileType;\n  transportType: DeviceTransportType;\n  image?: string;\n  defaultDashboardId?: DashboardId;\n}\n\nexport interface DefaultDeviceConfiguration {\n  [key: string]: any;\n}\n\nexport type DeviceConfigurations = DefaultDeviceConfiguration;\n\nexport interface DeviceConfiguration extends DeviceConfigurations {\n  type: DeviceProfileType;\n}\n\nexport interface DefaultDeviceTransportConfiguration {\n  [key: string]: any;\n}\n\nexport interface MqttDeviceTransportConfiguration {\n  [key: string]: any;\n}\n\nexport interface CoapDeviceTransportConfiguration {\n  powerMode?: PowerMode | null;\n  edrxCycle?: number;\n  pagingTransmissionWindow?: number;\n  psmActivityTimer?: number;\n}\n\nexport interface Lwm2mDeviceTransportConfiguration {\n  powerMode?: PowerMode | null;\n  edrxCycle?: number;\n  pagingTransmissionWindow?: number;\n  psmActivityTimer?: number;\n}\n\nexport enum SnmpDeviceProtocolVersion {\n  V1 = 'V1',\n  V2C = 'V2C',\n  V3 = 'V3'\n}\n\nexport enum SnmpAuthenticationProtocol {\n  SHA_1 = 'SHA_1',\n  SHA_224 = 'SHA_224',\n  SHA_256 = 'SHA_256',\n  SHA_384 = 'SHA_384',\n  SHA_512 = 'SHA_512',\n  MD5 = 'MD%'\n}\n\nexport const SnmpAuthenticationProtocolTranslationMap = new Map<SnmpAuthenticationProtocol, string>([\n  [SnmpAuthenticationProtocol.SHA_1, 'SHA-1'],\n  [SnmpAuthenticationProtocol.SHA_224, 'SHA-224'],\n  [SnmpAuthenticationProtocol.SHA_256, 'SHA-256'],\n  [SnmpAuthenticationProtocol.SHA_384, 'SHA-384'],\n  [SnmpAuthenticationProtocol.SHA_512, 'SHA-512'],\n  [SnmpAuthenticationProtocol.MD5, 'MD5']\n]);\n\nexport enum SnmpPrivacyProtocol {\n  DES = 'DES',\n  AES_128 = 'AES_128',\n  AES_192 = 'AES_192',\n  AES_256 = 'AES_256'\n}\n\nexport const SnmpPrivacyProtocolTranslationMap = new Map<SnmpPrivacyProtocol, string>([\n  [SnmpPrivacyProtocol.DES, 'DES'],\n  [SnmpPrivacyProtocol.AES_128, 'AES-128'],\n  [SnmpPrivacyProtocol.AES_192, 'AES-192'],\n  [SnmpPrivacyProtocol.AES_256, 'AES-256'],\n]);\n\nexport interface SnmpDeviceTransportConfiguration {\n  host?: string;\n  port?: number;\n  protocolVersion?: SnmpDeviceProtocolVersion;\n  community?: string;\n  username?: string;\n  securityName?: string;\n  contextName?: string;\n  authenticationProtocol?: SnmpAuthenticationProtocol;\n  authenticationPassphrase?: string;\n  privacyProtocol?: SnmpPrivacyProtocol;\n  privacyPassphrase?: string;\n  engineId?: string;\n}\n\nexport type DeviceTransportConfigurations = DefaultDeviceTransportConfiguration &\n  MqttDeviceTransportConfiguration &\n  CoapDeviceTransportConfiguration &\n  Lwm2mDeviceTransportConfiguration &\n  SnmpDeviceTransportConfiguration;\n\nexport interface DeviceTransportConfiguration extends DeviceTransportConfigurations {\n  type: DeviceTransportType;\n}\n\nexport interface DeviceData {\n  configuration: DeviceConfiguration;\n  transportConfiguration: DeviceTransportConfiguration;\n}\n\nexport interface Device extends BaseData<DeviceId> {\n  tenantId?: TenantId;\n  customerId?: CustomerId;\n  name: string;\n  type: string;\n  label: string;\n  firmwareId?: OtaPackageId;\n  softwareId?: OtaPackageId;\n  deviceProfileId?: DeviceProfileId;\n  deviceData?: DeviceData;\n  additionalInfo?: any;\n}\n\nexport interface DeviceInfo extends Device {\n  customerTitle: string;\n  customerIsPublic: boolean;\n  deviceProfileName: string;\n}\n\nexport enum DeviceCredentialsType {\n  ACCESS_TOKEN = 'ACCESS_TOKEN',\n  X509_CERTIFICATE = 'X509_CERTIFICATE',\n  MQTT_BASIC = 'MQTT_BASIC',\n  LWM2M_CREDENTIALS = 'LWM2M_CREDENTIALS'\n}\n\nexport const credentialTypeNames = new Map<DeviceCredentialsType, string>(\n  [\n    [DeviceCredentialsType.ACCESS_TOKEN, 'Access token'],\n    [DeviceCredentialsType.X509_CERTIFICATE, 'X.509'],\n    [DeviceCredentialsType.MQTT_BASIC, 'MQTT Basic'],\n    [DeviceCredentialsType.LWM2M_CREDENTIALS, 'LwM2M Credentials']\n  ]\n);\n\nexport const credentialTypesByTransportType = new Map<DeviceTransportType, DeviceCredentialsType[]>(\n  [\n    [DeviceTransportType.DEFAULT, [\n      DeviceCredentialsType.ACCESS_TOKEN, DeviceCredentialsType.X509_CERTIFICATE, DeviceCredentialsType.MQTT_BASIC\n    ]],\n    [DeviceTransportType.MQTT, [\n      DeviceCredentialsType.ACCESS_TOKEN, DeviceCredentialsType.X509_CERTIFICATE, DeviceCredentialsType.MQTT_BASIC\n    ]],\n    [DeviceTransportType.COAP, [DeviceCredentialsType.ACCESS_TOKEN, DeviceCredentialsType.X509_CERTIFICATE]],\n    [DeviceTransportType.LWM2M, [DeviceCredentialsType.LWM2M_CREDENTIALS]],\n    [DeviceTransportType.SNMP, [DeviceCredentialsType.ACCESS_TOKEN]]\n  ]\n);\n\nexport interface DeviceCredentials extends BaseData<DeviceCredentialsId> {\n  deviceId: DeviceId;\n  credentialsType: DeviceCredentialsType;\n  credentialsId: string;\n  credentialsValue: string;\n}\n\nexport interface DeviceCredentialMQTTBasic {\n  clientId: string;\n  userName: string;\n  password: string;\n}\n\nexport function getDeviceCredentialMQTTDefault(): DeviceCredentialMQTTBasic {\n  return {\n    clientId: '',\n    userName: '',\n    password: ''\n  };\n}\n\nexport interface DeviceSearchQuery extends EntitySearchQuery {\n  deviceTypes: Array<string>;\n}\n\nexport interface ClaimRequest {\n  secretKey: string;\n}\n\nexport enum ClaimResponse {\n  SUCCESS = 'SUCCESS',\n  FAILURE = 'FAILURE',\n  CLAIMED = 'CLAIMED'\n}\n\nexport interface ClaimResult {\n  device: Device;\n  response: ClaimResponse;\n}\n\nexport const dayOfWeekTranslations = new Array<string>(\n  'device-profile.schedule-day.monday',\n  'device-profile.schedule-day.tuesday',\n  'device-profile.schedule-day.wednesday',\n  'device-profile.schedule-day.thursday',\n  'device-profile.schedule-day.friday',\n  'device-profile.schedule-day.saturday',\n  'device-profile.schedule-day.sunday'\n);\n\nexport function getDayString(day: number): string {\n  switch (day) {\n    case 0:\n      return 'device-profile.schedule-day.monday';\n    case 1:\n      return this.translate.instant('device-profile.schedule-day.tuesday');\n    case 2:\n      return this.translate.instant('device-profile.schedule-day.wednesday');\n    case 3:\n      return this.translate.instant('device-profile.schedule-day.thursday');\n    case 4:\n      return this.translate.instant('device-profile.schedule-day.friday');\n    case 5:\n      return this.translate.instant('device-profile.schedule-day.saturday');\n    case 6:\n      return this.translate.instant('device-profile.schedule-day.sunday');\n  }\n}\n\nexport function timeOfDayToUTCTimestamp(date: Date | number): number {\n  if (typeof date === 'number' || date === null) {\n    return 0;\n  }\n  return _moment.utc([1970, 0, 1, date.getHours(), date.getMinutes(), date.getSeconds(), 0]).valueOf();\n}\n\nexport function utcTimestampToTimeOfDay(time = 0): Date {\n  return new Date(time + new Date(time).getTimezoneOffset() * 60 * 1000);\n}\n\nfunction timeOfDayToMoment(date: Date | number): _moment.Moment {\n  if (typeof date === 'number' || date === null) {\n    return _moment([1970, 0, 1, 0, 0, 0, 0]);\n  }\n  return _moment([1970, 0, 1, date.getHours(), date.getMinutes(), 0, 0]);\n}\n\nexport function getAlarmScheduleRangeText(startsOn: Date | number, endsOn: Date | number): string {\n  const start = timeOfDayToMoment(startsOn);\n  const end = timeOfDayToMoment(endsOn);\n  if (start < end) {\n    return `<span><span class=\"nowrap\">${start.format('hh:mm A')}</span> – <span class=\"nowrap\">${end.format('hh:mm A')}</span></span>`;\n  } else if (start.valueOf() === 0 && end.valueOf() === 0 || start.isSame(_moment([1970, 0])) && end.isSame(_moment([1970, 0]))) {\n    return '<span><span class=\"nowrap\">12:00 AM</span> – <span class=\"nowrap\">12:00 PM</span></span>';\n  }\n  return `<span><span class=\"nowrap\">12:00 AM</span> – <span class=\"nowrap\">${end.format('hh:mm A')}</span>` +\n    ` and <span class=\"nowrap\">${start.format('hh:mm A')}</span> – <span class=\"nowrap\">12:00 PM</span></span>`;\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, forwardRef, Input, OnChanges, OnInit, SimpleChanges, ViewEncapsulation } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { Observable } from 'rxjs';\nimport { map, share, tap } from 'rxjs/operators';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@app/core/core.state';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { WidgetsBundle } from '@shared/models/widgets-bundle.model';\nimport { WidgetService } from '@core/http/widget.service';\nimport { isDefined } from '@core/utils';\nimport { NULL_UUID } from '@shared/models/id/has-uuid';\nimport { getCurrentAuthState } from '@core/auth/auth.selectors';\n\n@Component({\n  selector: 'tb-widgets-bundle-select',\n  templateUrl: './widgets-bundle-select.component.html',\n  styleUrls: ['./widgets-bundle-select.component.scss'],\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => WidgetsBundleSelectComponent),\n    multi: true\n  }],\n  encapsulation: ViewEncapsulation.None\n})\nexport class WidgetsBundleSelectComponent implements ControlValueAccessor, OnInit, OnChanges {\n\n  @Input()\n  bundlesScope: 'system' | 'tenant';\n\n  @Input()\n  selectFirstBundle: boolean;\n\n  @Input()\n  selectBundleAlias: string;\n\n  private requiredValue: boolean;\n  get required(): boolean {\n    return this.requiredValue;\n  }\n  @Input()\n  set required(value: boolean) {\n    this.requiredValue = coerceBooleanProperty(value);\n  }\n\n  @Input()\n  disabled: boolean;\n\n  widgetsBundles$: Observable<Array<WidgetsBundle>>;\n\n  widgetsBundles: Array<WidgetsBundle>;\n\n  widgetsBundle: WidgetsBundle | null;\n\n  private propagateChange = (v: any) => { };\n\n  constructor(private store: Store<AppState>,\n              private widgetService: WidgetService) {\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  ngOnInit() {\n    this.widgetsBundles$ = this.getWidgetsBundles().pipe(\n      map((widgetsBundles) => {\n        const authState = getCurrentAuthState(this.store);\n        if (!authState.edgesSupportEnabled) {\n          widgetsBundles = widgetsBundles.filter(widgetsBundle => widgetsBundle.alias !== 'edge_widgets');\n        }\n        return widgetsBundles;\n      }),\n      tap((widgetsBundles) => {\n        this.widgetsBundles = widgetsBundles;\n        if (this.selectFirstBundle) {\n          if (widgetsBundles.length > 0) {\n            if (this.widgetsBundle !== widgetsBundles[0]) {\n              this.widgetsBundle = widgetsBundles[0];\n              this.updateView();\n            } else if (isDefined(this.selectBundleAlias)) {\n              this.selectWidgetsBundleByAlias(this.selectBundleAlias);\n            }\n          }\n        }\n      }),\n      share()\n    );\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    for (const propName of Object.keys(changes)) {\n      const change = changes[propName];\n      if (!change.firstChange && change.currentValue !== change.previousValue) {\n        if (propName === 'selectBundleAlias') {\n          this.selectWidgetsBundleByAlias(this.selectBundleAlias);\n        }\n      }\n    }\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n  }\n\n  writeValue(value: WidgetsBundle | null): void {\n    this.widgetsBundle = value;\n  }\n\n  widgetsBundleChanged() {\n    this.updateView();\n  }\n\n  isSystem(item: WidgetsBundle) {\n    return item && item.tenantId.id === NULL_UUID;\n  }\n\n  private selectWidgetsBundleByAlias(alias: string) {\n    if (this.widgetsBundles && alias) {\n      const found = this.widgetsBundles.find((widgetsBundle) => widgetsBundle.alias === alias);\n      if (found && this.widgetsBundle !== found) {\n        this.widgetsBundle = found;\n        this.updateView();\n      }\n    } else if (this.widgetsBundle) {\n      this.widgetsBundle = null;\n      this.updateView();\n    }\n  }\n\n  private updateView() {\n    this.propagateChange(this.widgetsBundle);\n  }\n\n  private getWidgetsBundles(): Observable<Array<WidgetsBundle>> {\n    let widgetsBundlesObservable: Observable<Array<WidgetsBundle>>;\n    if (this.bundlesScope) {\n      if (this.bundlesScope === 'system') {\n        widgetsBundlesObservable = this.widgetService.getSystemWidgetsBundles();\n      } else if (this.bundlesScope === 'tenant') {\n        widgetsBundlesObservable = this.widgetService.getTenantWidgetsBundles();\n      }\n    } else {\n      widgetsBundlesObservable = this.widgetService.getAllWidgetsBundles();\n    }\n    return widgetsBundlesObservable;\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<mat-form-field floatLabel=\"always\" hideRequiredMarker class=\"mat-block\">\n  <mat-label></mat-label>\n  <mat-select [required]=\"required\"\n              [disabled]=\"disabled\"\n              [(ngModel)]=\"widgetsBundle\"\n              matInput\n              panelClass=\"tb-widgets-bundle-select\"\n              placeholder=\"{{ 'widget.select-widgets-bundle' | translate }}\"\n              (ngModelChange)=\"widgetsBundleChanged()\">\n    <mat-select-trigger>\n      <div class=\"tb-bundle-item\">\n        <span>{{widgetsBundle?.title}}</span>\n        <span translate class=\"tb-bundle-system\" *ngIf=\"isSystem(widgetsBundle)\">widgets-bundle.system</span>\n      </div>\n    </mat-select-trigger>\n    <mat-option *ngFor=\"let widgetsBundle of widgetsBundles$ | async\" [value]=\"widgetsBundle\">\n      <div class=\"tb-bundle-item\">\n        <span>{{widgetsBundle.title}}</span>\n        <span translate class=\"tb-bundle-system\" *ngIf=\"isSystem(widgetsBundle)\">widgets-bundle.system</span>\n      </div>\n    </mat-option>\n  </mat-select>\n</mat-form-field>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { EntityId } from './entity-id';\nimport { EntityType } from '@shared/models/entity-type.models';\n\nexport class TenantId implements EntityId {\n  entityType = EntityType.TENANT;\n  id: string;\n  constructor(id: string) {\n    this.id = id;\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'nospace'\n})\nexport class NospacePipe implements PipeTransform {\n\n  transform(value: string, args?: any): string {\n    return (!value) ? '' : value.replace(/ /g, '');\n  }\n\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { EntityType } from '@shared/models/entity-type.models';\nimport { EntityId } from '@shared/models/id/entity-id';\nimport { EntitySearchDirection, RelationEntityTypeFilter } from '@shared/models/relation.models';\nimport { EntityFilter } from '@shared/models/query/query.models';\n\nexport enum AliasFilterType {\n  singleEntity = 'singleEntity',\n  entityList = 'entityList',\n  entityName = 'entityName',\n  entityType = 'entityType',\n  stateEntity = 'stateEntity',\n  assetType = 'assetType',\n  deviceType = 'deviceType',\n  edgeType = 'edgeType',\n  entityViewType = 'entityViewType',\n  apiUsageState = 'apiUsageState',\n  relationsQuery = 'relationsQuery',\n  assetSearchQuery = 'assetSearchQuery',\n  deviceSearchQuery = 'deviceSearchQuery',\n  edgeSearchQuery = 'edgeSearchQuery',\n  entityViewSearchQuery = 'entityViewSearchQuery'\n}\n\nexport const edgeAliasFilterTypes = new Array<string>(\n  AliasFilterType.edgeType,\n  AliasFilterType.edgeSearchQuery\n);\n\nexport const aliasFilterTypeTranslationMap = new Map<AliasFilterType, string>(\n  [\n    [ AliasFilterType.singleEntity, 'alias.filter-type-single-entity' ],\n    [ AliasFilterType.entityList, 'alias.filter-type-entity-list' ],\n    [ AliasFilterType.entityName, 'alias.filter-type-entity-name' ],\n    [ AliasFilterType.entityType, 'alias.filter-type-entity-type' ],\n    [ AliasFilterType.stateEntity, 'alias.filter-type-state-entity' ],\n    [ AliasFilterType.assetType, 'alias.filter-type-asset-type' ],\n    [ AliasFilterType.deviceType, 'alias.filter-type-device-type' ],\n    [ AliasFilterType.edgeType, 'alias.filter-type-edge-type' ],\n    [ AliasFilterType.entityViewType, 'alias.filter-type-entity-view-type' ],\n    [ AliasFilterType.apiUsageState, 'alias.filter-type-apiUsageState' ],\n    [ AliasFilterType.relationsQuery, 'alias.filter-type-relations-query' ],\n    [ AliasFilterType.assetSearchQuery, 'alias.filter-type-asset-search-query' ],\n    [ AliasFilterType.deviceSearchQuery, 'alias.filter-type-device-search-query' ],\n    [ AliasFilterType.edgeSearchQuery, 'alias.filter-type-edge-search-query' ],\n    [ AliasFilterType.entityViewSearchQuery, 'alias.filter-type-entity-view-search-query' ]\n  ]\n);\n\nexport interface SingleEntityFilter {\n  singleEntity?: EntityId;\n}\n\nexport interface EntityListFilter {\n  entityType?: EntityType;\n  entityList?: string[];\n}\n\nexport interface EntityNameFilter {\n  entityType?: EntityType;\n  entityNameFilter?: string;\n}\n\nexport interface EntityTypeFilter {\n  entityType?: EntityType;\n}\n\nexport interface StateEntityFilter {\n  stateEntityParamName?: string;\n  defaultStateEntity?: EntityId;\n}\n\nexport interface AssetTypeFilter {\n  assetType?: string;\n  assetNameFilter?: string;\n}\n\nexport interface DeviceTypeFilter {\n  deviceType?: string;\n  deviceNameFilter?: string;\n}\n\nexport interface EdgeTypeFilter {\n  edgeType?: string;\n  edgeNameFilter?: string;\n}\n\nexport interface EntityViewFilter {\n  entityViewType?: string;\n  entityViewNameFilter?: string;\n}\n\nexport interface RelationsQueryFilter {\n  rootStateEntity?: boolean;\n  stateEntityParamName?: string;\n  defaultStateEntity?: EntityId;\n  rootEntity?: EntityId;\n  direction?: EntitySearchDirection;\n  filters?: Array<RelationEntityTypeFilter>;\n  maxLevel?: number;\n  fetchLastLevelOnly?: boolean;\n}\n\nexport interface EntitySearchQueryFilter {\n  rootStateEntity?: boolean;\n  stateEntityParamName?: string;\n  defaultStateEntity?: EntityId;\n  rootEntity?: EntityId;\n  relationType?: string;\n  direction?: EntitySearchDirection;\n  maxLevel?: number;\n  fetchLastLevelOnly?: boolean;\n}\n\n// tslint:disable-next-line:no-empty-interface\nexport interface ApiUsageStateFilter {\n\n}\n\nexport interface AssetSearchQueryFilter extends EntitySearchQueryFilter {\n  assetTypes?: string[];\n}\n\nexport interface DeviceSearchQueryFilter extends EntitySearchQueryFilter {\n  deviceTypes?: string[];\n}\n\nexport interface EdgeSearchQueryFilter extends EntitySearchQueryFilter {\n  edgeTypes?: string[];\n}\n\nexport interface EntityViewSearchQueryFilter extends EntitySearchQueryFilter {\n  entityViewTypes?: string[];\n}\n\nexport type EntityFilters =\n  SingleEntityFilter &\n  EntityListFilter &\n  EntityNameFilter &\n  EntityTypeFilter &\n  StateEntityFilter &\n  AssetTypeFilter &\n  DeviceTypeFilter &\n  EdgeTypeFilter &\n  EntityViewFilter &\n  RelationsQueryFilter &\n  AssetSearchQueryFilter &\n  DeviceSearchQueryFilter &\n  EntityViewSearchQueryFilter &\n  EntitySearchQueryFilter &\n  EdgeSearchQueryFilter;\n\nexport interface EntityAliasFilter extends EntityFilters {\n  type?: AliasFilterType;\n  resolveMultiple?: boolean;\n}\n\nexport interface EntityAliasInfo {\n  alias: string;\n  filter: EntityAliasFilter;\n  [key: string]: any;\n}\n\nexport interface AliasesInfo {\n  datasourceAliases: {[datasourceIndex: number]: EntityAliasInfo};\n  targetDeviceAliases: {[targetDeviceAliasIndex: number]: EntityAliasInfo};\n}\n\nexport interface EntityAlias extends EntityAliasInfo {\n  id: string;\n}\n\nexport interface EntityAliases {\n  [id: string]: EntityAlias;\n}\n\nexport interface EntityAliasFilterResult {\n  stateEntity: boolean;\n  entityFilter: EntityFilter;\n  entityParamName?: string;\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, OnInit } from '@angular/core';\nimport { AuthService } from '@core/auth/auth.service';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { PageComponent } from '@shared/components/page.component';\nimport { FormBuilder } from '@angular/forms';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { Constants } from '@shared/models/constants';\nimport { Router } from '@angular/router';\nimport { OAuth2ClientInfo } from '@shared/models/oauth2.models';\n\n@Component({\n  selector: 'tb-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss']\n})\nexport class LoginComponent extends PageComponent implements OnInit {\n\n  loginFormGroup = this.fb.group({\n    username: '',\n    password: ''\n  });\n  oauth2Clients: Array<OAuth2ClientInfo> = null;\n\n  constructor(protected store: Store<AppState>,\n              private authService: AuthService,\n              public fb: FormBuilder,\n              private router: Router) {\n    super(store);\n  }\n\n  ngOnInit() {\n    this.oauth2Clients = this.authService.oauth2Clients;\n  }\n\n  login(): void {\n    if (this.loginFormGroup.valid) {\n      this.authService.login(this.loginFormGroup.value).subscribe(\n        () => {},\n        (error: HttpErrorResponse) => {\n          if (error && error.error && error.error.errorCode) {\n            if (error.error.errorCode === Constants.serverErrorCode.credentialsExpired) {\n              this.router.navigateByUrl(`login/resetExpiredPassword?resetToken=${error.error.resetToken}`);\n            }\n          }\n        }\n      );\n    } else {\n      Object.keys(this.loginFormGroup.controls).forEach(field => {\n        const control = this.loginFormGroup.get(field);\n        control.markAsTouched({onlySelf: true});\n      });\n    }\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<div class=\"tb-login-content mat-app-background tb-dark\" fxFlex fxLayoutAlign=\"center center\">\n  <mat-card style=\"max-height: 80vh; overflow-y: auto;\">\n    <mat-card-content>\n      <form class=\"tb-login-form\" [formGroup]=\"loginFormGroup\" (ngSubmit)=\"login()\">\n        <fieldset [disabled]=\"isLoading$ | async\" fxLayout=\"column\">\n          <div fxLayout=\"column\" fxLayoutAlign=\"start center\" style=\"padding: 15px 0;\">\n            <tb-logo class=\"login-logo\"></tb-logo>\n          </div>\n          <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\">\n          </mat-progress-bar>\n          <span style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></span>\n          <div tb-toast fxLayout=\"column\" class=\"layout-padding\">\n            <span style=\"height: 50px;\"></span>\n            <div class=\"oauth-container tb-default\" fxLayout=\"column\" fxLayoutGap=\"16px\" *ngIf=\"oauth2Clients?.length\">\n              <ng-container *ngFor=\"let oauth2Client of oauth2Clients\">\n                <a mat-raised-button class=\"login-with-button\" href=\"{{ oauth2Client.url }}\">\n                  <mat-icon class=\"icon\" svgIcon=\"{{ oauth2Client.icon }}\"></mat-icon>\n                  {{ 'login.login-with' | translate: {name: oauth2Client.name} }}\n                </a>\n              </ng-container>\n              <div class=\"container-divider\">\n                <div class=\"line\"><mat-divider></mat-divider></div>\n                <div class=\"text mat-typography\">{{ \"login.or\" | translate | uppercase }}</div>\n                <div class=\"line\"><mat-divider></mat-divider></div>\n              </div>\n            </div>\n            <mat-form-field>\n              <mat-label translate>login.username</mat-label>\n              <input id=\"username-input\" matInput type=\"email\" autofocus formControlName=\"username\" email required/>\n              <mat-icon matPrefix>email</mat-icon>\n              <mat-error *ngIf=\"loginFormGroup.get('username').invalid\">\n                {{ 'user.invalid-email-format' | translate }}\n              </mat-error>\n            </mat-form-field>\n            <mat-form-field>\n              <mat-label translate>common.password</mat-label>\n              <input id=\"password-input\" matInput type=\"password\" formControlName=\"password\"/>\n              <tb-toggle-password matSuffix></tb-toggle-password>\n              <mat-icon matPrefix>lock</mat-icon>\n            </mat-form-field>\n            <div fxLayoutAlign=\"end center\" class=\"forgot-password\">\n              <button class=\"tb-reset-password\" mat-button type=\"button\" routerLink=\"/login/resetPasswordRequest\">{{ 'login.forgot-password' | translate }}\n              </button>\n            </div>\n            <div fxLayout=\"column\" class=\"tb-action-button\">\n              <button mat-raised-button color=\"accent\" [disabled]=\"(isLoading$ | async)\"\n                      type=\"submit\">{{ 'login.login' | translate }}</button>\n            </div>\n          </div>\n        </fieldset>\n      </form>\n    </mat-card-content>\n  </mat-card>\n</div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, ElementRef, Input, NgZone, OnInit, ViewEncapsulation } from '@angular/core';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { deepClone } from '@core/utils';\n\nexport interface NavTreeNodeState {\n  disabled?: boolean;\n  opened?: boolean;\n  loaded?: boolean;\n}\n\nexport interface NavTreeNode {\n  id: string;\n  icon?: boolean;\n  text?: string;\n  state?: NavTreeNodeState;\n  children?: NavTreeNode[] | boolean;\n  data?: any;\n}\n\nexport interface NavTreeEditCallbacks {\n  selectNode?: (id: string) => void;\n  deselectAll?: () => void;\n  getNode?: (id: string) => NavTreeNode;\n  getParentNodeId?: (id: string) => string;\n  openNode?: (id: string, cb?: () => void) => void;\n  nodeIsOpen?: (id: string) => boolean;\n  nodeIsLoaded?: (id: string) => boolean;\n  refreshNode?: (id: string) => void;\n  updateNode?: (id: string, newName: string, updatedData?: any) => void;\n  createNode?: (parentId: string, node: NavTreeNode, pos: number | string) => void;\n  deleteNode?: (id: string) => void;\n  disableNode?: (id: string) => void;\n  enableNode?: (id: string) => void;\n  setNodeHasChildren?: (id: string, hasChildren: boolean) => void;\n  search?: (searchText: string) => void;\n  clearSearch?: () => void;\n}\n\nexport type NodesCallback = (nodes: NavTreeNode[]) => void;\nexport type LoadNodesCallback = (node: NavTreeNode, cb: NodesCallback) => void;\nexport type NodeSearchCallback = (searchText: string, node: NavTreeNode) => boolean;\nexport type NodeSelectedCallback = (node: NavTreeNode, event: Event) => void;\nexport type NodesInsertedCallback = (nodes: string[], parent: string) => void;\n\n@Component({\n  selector: 'tb-nav-tree',\n  templateUrl: './nav-tree.component.html',\n  styleUrls: ['./nav-tree.component.scss'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class NavTreeComponent implements OnInit {\n\n  private enableSearchValue: boolean;\n  get enableSearch(): boolean {\n    return this.enableSearchValue;\n  }\n  @Input()\n  set enableSearch(value: boolean) {\n    this.enableSearchValue = coerceBooleanProperty(value);\n  }\n\n  @Input()\n  private loadNodes: LoadNodesCallback;\n\n  @Input()\n  private searchCallback: NodeSearchCallback;\n\n  @Input()\n  private onNodeSelected: NodeSelectedCallback;\n\n  @Input()\n  private onNodesInserted: NodesInsertedCallback;\n\n  @Input()\n  private editCallbacks: NavTreeEditCallbacks;\n\n  private treeElement: JSTree;\n\n  constructor(private elementRef: ElementRef<HTMLElement>,\n              private ngZone: NgZone) {\n  }\n\n  ngOnInit(): void {\n    this.initTree();\n  }\n\n  private initTree() {\n\n    const loadNodes: LoadNodesCallback = (node, cb) => {\n      const outCb = (nodes: NavTreeNode[]) => {\n        const copied: NavTreeNode[] = [];\n        if (nodes) {\n          nodes.forEach((n) => {\n            copied.push(deepClone(n, ['data']));\n          });\n        }\n        cb(copied);\n      };\n      this.ngZone.runOutsideAngular(() => {\n        this.loadNodes(node, outCb);\n      });\n    };\n\n    const config: JSTreeStaticDefaults = {\n      core: {\n        worker: false,\n        multiple: false,\n        check_callback: true,\n        themes: { name: 'proton', responsive: true },\n        data: loadNodes,\n        error: () => {\n          console.error('Unexpected jstree error!');\n        }\n      },\n      plugins: []\n    };\n\n    if (this.enableSearch) {\n      config.plugins.push('search');\n      config.search = {\n        ajax: false,\n        fuzzy: false,\n        close_opened_onclear: true,\n        case_sensitive: false,\n        show_only_matches: true,\n        show_only_matches_children: false,\n        search_leaves_only: false,\n        search_callback: this.searchCallback\n      };\n    }\n\n    import('jstree').then(() => {\n\n      this.treeElement = $('.tb-nav-tree-container', this.elementRef.nativeElement).jstree(config);\n\n      this.treeElement.on('changed.jstree', (e: any, data) => {\n        const node: NavTreeNode = data.instance.get_selected(true)[0];\n        if (this.onNodeSelected) {\n          this.ngZone.run(() => this.onNodeSelected(node, e as Event));\n        }\n      });\n\n      this.treeElement.on('model.jstree', (e: any, data) => {\n        if (this.onNodesInserted) {\n          this.ngZone.run(() => this.onNodesInserted(data.nodes, data.parent));\n        }\n      });\n\n      if (this.editCallbacks) {\n        this.editCallbacks.selectNode = id => {\n          const node: NavTreeNode = this.treeElement.jstree('get_node', id);\n          if (node) {\n            this.treeElement.jstree('deselect_all', true);\n            this.treeElement.jstree('select_node', node);\n          }\n        };\n        this.editCallbacks.deselectAll = () => {\n          this.treeElement.jstree('deselect_all');\n        };\n        this.editCallbacks.getNode = (id) => {\n          const node: NavTreeNode = this.treeElement.jstree('get_node', id);\n          return node;\n        };\n        this.editCallbacks.getParentNodeId = (id) => {\n          const node: NavTreeNode = this.treeElement.jstree('get_node', id);\n          if (node) {\n            return this.treeElement.jstree('get_parent', node);\n          }\n        };\n        this.editCallbacks.openNode = (id, cb) => {\n          const node: NavTreeNode = this.treeElement.jstree('get_node', id);\n          if (node) {\n            this.treeElement.jstree('open_node', node, cb);\n          }\n        };\n        this.editCallbacks.nodeIsOpen = (id) => {\n          const node: NavTreeNode = this.treeElement.jstree('get_node', id);\n          if (node) {\n            return this.treeElement.jstree('is_open', node);\n          } else {\n            return true;\n          }\n        };\n        this.editCallbacks.nodeIsLoaded = (id) => {\n          const node: NavTreeNode = this.treeElement.jstree('get_node', id);\n          if (node) {\n            return this.treeElement.jstree('is_loaded', node);\n          } else {\n            return true;\n          }\n        };\n        this.editCallbacks.refreshNode = (id) => {\n          if (id === '#') {\n            this.treeElement.jstree('refresh');\n            this.treeElement.jstree('redraw');\n          } else {\n            const node: NavTreeNode = this.treeElement.jstree('get_node', id);\n            if (node) {\n              const opened = this.treeElement.jstree('is_open', node);\n              this.treeElement.jstree('refresh_node', node);\n              this.treeElement.jstree('redraw');\n              if (node.children && opened/* && !node.children.length*/) {\n                this.treeElement.jstree('open_node', node);\n              }\n            }\n          }\n        };\n        this.editCallbacks.updateNode = (id, newName, updatedData) => {\n          const node: NavTreeNode = this.treeElement.jstree('get_node', id);\n          if (node) {\n            this.treeElement.jstree('rename_node', node, newName);\n          }\n          if (updatedData && node.data) {\n            Object.assign(node.data, updatedData);\n          }\n        };\n        this.editCallbacks.createNode = (parentId, node, pos) => {\n          const parentNode: NavTreeNode = this.treeElement.jstree('get_node', parentId);\n          if (parentNode) {\n            this.treeElement.jstree('create_node', parentNode, node, pos);\n          }\n        };\n        this.editCallbacks.deleteNode = (id) => {\n          const node: NavTreeNode = this.treeElement.jstree('get_node', id);\n          if (node) {\n            this.treeElement.jstree('delete_node', node);\n          }\n        };\n        this.editCallbacks.disableNode = (id) => {\n          const node: NavTreeNode = this.treeElement.jstree('get_node', id);\n          if (node) {\n            this.treeElement.jstree('disable_node', node);\n          }\n        };\n        this.editCallbacks.enableNode = (id) => {\n          const node: NavTreeNode = this.treeElement.jstree('get_node', id);\n          if (node) {\n            this.treeElement.jstree('enable_node', node);\n          }\n        };\n        this.editCallbacks.setNodeHasChildren = (id, hasChildren) => {\n          const node: NavTreeNode = this.treeElement.jstree('get_node', id);\n          if (node) {\n            if (!node.children || (Array.isArray(node.children) && !node.children.length)) {\n              node.children = hasChildren;\n              node.state.loaded = !hasChildren;\n              node.state.opened = false;\n              this.treeElement.jstree('_node_changed', node.id);\n              this.treeElement.jstree('redraw');\n            }\n          }\n        };\n        this.editCallbacks.search = (searchText) => {\n          this.treeElement.jstree('search', searchText);\n        };\n        this.editCallbacks.clearSearch = () => {\n          this.treeElement.jstree('clear_search');\n        };\n      }\n    });\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<div class=\"tb-nav-tree-container\"></div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable, NgZone } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, CanActivateChild, Router, RouterStateSnapshot } from '@angular/router';\nimport { AuthService } from '../auth/auth.service';\nimport { select, Store } from '@ngrx/store';\nimport { AppState } from '../core.state';\nimport { selectAuth } from '../auth/auth.selectors';\nimport { catchError, map, mergeMap, skipWhile, take } from 'rxjs/operators';\nimport { AuthState } from '../auth/auth.models';\nimport { forkJoin, Observable, of } from 'rxjs';\nimport { enterZone } from '@core/operator/enterZone';\nimport { Authority } from '@shared/models/authority.enum';\nimport { DialogService } from '@core/services/dialog.service';\nimport { TranslateService } from '@ngx-translate/core';\nimport { UtilsService } from '@core/services/utils.service';\nimport { isObject } from '@core/utils';\nimport { MobileService } from '@core/services/mobile.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthGuard implements CanActivate, CanActivateChild {\n\n  constructor(private store: Store<AppState>,\n              private router: Router,\n              private authService: AuthService,\n              private dialogService: DialogService,\n              private utils: UtilsService,\n              private translate: TranslateService,\n              private mobileService: MobileService,\n              private zone: NgZone) {}\n\n  getAuthState(): Observable<AuthState> {\n    return this.store.pipe(\n      select(selectAuth),\n      skipWhile((authState) => !authState || !authState.isUserLoaded),\n      take(1),\n      enterZone(this.zone)\n    );\n  }\n\n  canActivate(next: ActivatedRouteSnapshot,\n              state: RouterStateSnapshot) {\n\n    return this.getAuthState().pipe(\n      mergeMap((authState) => {\n        const url: string = state.url;\n\n        let lastChild = state.root;\n        const urlSegments: string[] = [];\n        if (lastChild.url) {\n          urlSegments.push(...lastChild.url.map(segment => segment.path));\n        }\n        while (lastChild.children.length) {\n          lastChild = lastChild.children[0];\n          if (lastChild.url) {\n            urlSegments.push(...lastChild.url.map(segment => segment.path));\n          }\n        }\n        const path = urlSegments.join('.');\n        const publicId = this.utils.getQueryParam('publicId');\n        const data = lastChild.data || {};\n        const params = lastChild.params || {};\n        const isPublic = data.module === 'public';\n\n        if (!authState.isAuthenticated) {\n          if (publicId && publicId.length > 0) {\n            this.authService.setUserFromJwtToken(null, null, false);\n            this.authService.reloadUser();\n            return of(false);\n          } else if (!isPublic) {\n            this.authService.redirectUrl = url;\n            // this.authService.gotoDefaultPlace(false);\n            return of(this.authService.defaultUrl(false));\n          } else {\n            if (path === 'login') {\n              return forkJoin([this.authService.loadOAuth2Clients()]).pipe(\n                map(() => {\n                  return true;\n                })\n              );\n            } else {\n              return of(true);\n            }\n          }\n        } else {\n          if (authState.authUser.isPublic) {\n            if (this.authService.parsePublicId() !== publicId) {\n              if (publicId && publicId.length > 0) {\n                this.authService.setUserFromJwtToken(null, null, false);\n                this.authService.reloadUser();\n              } else {\n                this.authService.logout();\n              }\n              return of(false);\n            }\n          }\n          if (this.mobileService.isMobileApp() && !path.startsWith('dashboard.')) {\n            this.mobileService.handleMobileNavigation(path, params);\n            return of(false);\n          }\n          const defaultUrl = this.authService.defaultUrl(true, authState, path, params);\n          if (defaultUrl) {\n            // this.authService.gotoDefaultPlace(true);\n            return of(defaultUrl);\n          } else {\n            const authority = Authority[authState.authUser.authority];\n            if (data.auth && data.auth.indexOf(authority) === -1) {\n              this.dialogService.forbidden();\n              return of(false);\n            } else if (data.redirectTo) {\n              let redirect;\n              if (isObject(data.redirectTo)) {\n                redirect = data.redirectTo[authority];\n              } else {\n                redirect = data.redirectTo;\n              }\n              return of(this.router.parseUrl(redirect));\n            } else {\n              return of(true);\n            }\n          }\n        }\n      }),\n      catchError((err => { console.error(err); return of(false); } ))\n    );\n  }\n\n  canActivateChild(\n    route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot) {\n    return this.canActivate(route, state);\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Title } from '@angular/platform-browser';\nimport { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot } from '@angular/router';\nimport { TranslateService } from '@ngx-translate/core';\nimport { filter } from 'rxjs/operators';\n\nimport { environment as env } from '@env/environment';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TitleService {\n  constructor(\n    private translate: TranslateService,\n    private title: Title\n  ) {}\n\n  setTitle(\n    snapshot: ActivatedRouteSnapshot,\n    lazyTranslate?: TranslateService\n  ) {\n    let lastChild = snapshot;\n    while (lastChild.children.length) {\n      lastChild = lastChild.children[0];\n    }\n    const { title } = lastChild.data;\n    const translate = lazyTranslate || this.translate;\n    if (title) {\n      translate\n        .get(title)\n        .pipe(filter(translatedTitle => translatedTitle !== title))\n        .subscribe(translatedTitle =>\n          this.title.setTitle(`${env.appTitle} | ${translatedTitle}`)\n        );\n    } else {\n      this.title.setTitle(env.appTitle);\n    }\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { createFeatureSelector, createSelector, select, Store } from '@ngrx/store';\n\nimport { AppState } from '../core.state';\nimport { LoadState } from './load.models';\nimport { take } from 'rxjs/operators';\n\nexport const selectLoadState = createFeatureSelector<AppState, LoadState>(\n  'load'\n);\n\nexport const selectLoad = createSelector(\n  selectLoadState,\n  (state: LoadState) => state\n);\n\nexport const selectIsLoading = createSelector(\n  selectLoadState,\n  (state: LoadState) => state.isLoading\n);\n\nexport function getCurrentIsLoading(store: Store<AppState>): boolean {\n  let isLoading: boolean;\n  store.pipe(select(selectIsLoading), take(1)).subscribe(\n    val => isLoading = val\n  );\n  return isLoading;\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport {\n  Compiler,\n  ComponentFactory,\n  Inject,\n  Injectable,\n  Injector,\n  ModuleWithComponentFactories,\n  Type\n} from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { forkJoin, Observable, ReplaySubject, throwError } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\n\ndeclare const SystemJS;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ResourcesService {\n\n  private loadedResources: { [url: string]: ReplaySubject<any> } = {};\n  private loadedModules: { [url: string]: ReplaySubject<Type<any>[]> } = {};\n  private loadedFactories: { [url: string]: ReplaySubject<ComponentFactory<any>[]> } = {};\n\n  private anchor = this.document.getElementsByTagName('head')[0] || this.document.getElementsByTagName('body')[0];\n\n  constructor(@Inject(DOCUMENT) private readonly document: any,\n              private compiler: Compiler,\n              private http: HttpClient,\n              private injector: Injector) {}\n\n  public loadResource(url: string): Observable<any> {\n    if (this.loadedResources[url]) {\n      return this.loadedResources[url].asObservable();\n    }\n\n    let fileType;\n    const match = /[./](css|less|html|htm|js)?(([?#]).*)?$/.exec(url);\n    if (match !== null) {\n      fileType = match[1];\n    }\n    if (!fileType) {\n      return throwError(new Error(`Unable to detect file type from url: ${url}`));\n    } else if (fileType !== 'css' && fileType !== 'js') {\n      return throwError(new Error(`Unsupported file type: ${fileType}`));\n    }\n    return this.loadResourceByType(fileType, url);\n  }\n\n  public loadFactories(url: string, modulesMap: {[key: string]: any}): Observable<ComponentFactory<any>[]> {\n    if (this.loadedFactories[url]) {\n      return this.loadedFactories[url].asObservable();\n    }\n    const subject = new ReplaySubject<ComponentFactory<any>[]>();\n    this.loadedFactories[url] = subject;\n    if (modulesMap) {\n      for (const moduleId of Object.keys(modulesMap)) {\n        SystemJS.set(moduleId, modulesMap[moduleId]);\n      }\n    }\n    SystemJS.import(url).then(\n      (module) => {\n        const modules = this.extractNgModules(module);\n        if (modules.length) {\n          import('@angular/compiler').then(\n            () => {\n              const tasks: Promise<ModuleWithComponentFactories<any>>[] = [];\n              for (const m of modules) {\n                tasks.push(this.compiler.compileModuleAndAllComponentsAsync(m));\n              }\n              forkJoin(tasks).subscribe((compiled) => {\n                  try {\n                    const componentFactories: ComponentFactory<any>[] = [];\n                    for (const c of compiled) {\n                      c.ngModuleFactory.create(this.injector);\n                      componentFactories.push(...c.componentFactories);\n                    }\n                    this.loadedFactories[url].next(componentFactories);\n                    this.loadedFactories[url].complete();\n                  } catch (e) {\n                    this.loadedFactories[url].error(new Error(`Unable to init module from url: ${url}`));\n                    delete this.loadedFactories[url];\n                  }\n                },\n                (e) => {\n                  this.loadedFactories[url].error(new Error(`Unable to compile module from url: ${url}`));\n                  delete this.loadedFactories[url];\n                });            }\n          );\n        } else {\n          this.loadedFactories[url].error(new Error(`Module '${url}' doesn't have default export!`));\n          delete this.loadedFactories[url];\n        }\n      },\n      (e) => {\n        this.loadedFactories[url].error(new Error(`Unable to load module from url: ${url}`));\n        delete this.loadedFactories[url];\n      }\n    );\n    return subject.asObservable();\n  }\n\n  public loadModules(url: string, modulesMap: {[key: string]: any}): Observable<Type<any>[]> {\n    if (this.loadedModules[url]) {\n      return this.loadedModules[url].asObservable();\n    }\n    const subject = new ReplaySubject<Type<any>[]>();\n    this.loadedModules[url] = subject;\n    if (modulesMap) {\n      for (const moduleId of Object.keys(modulesMap)) {\n        SystemJS.set(moduleId, modulesMap[moduleId]);\n      }\n    }\n    SystemJS.import(url).then(\n      (module) => {\n        try {\n          let modules;\n          try {\n            modules = this.extractNgModules(module);\n          } catch (e) {\n            console.error(e);\n          }\n          if (modules && modules.length) {\n            import('@angular/compiler').then(\n              () => {\n                const tasks: Promise<ModuleWithComponentFactories<any>>[] = [];\n                for (const m of modules) {\n                  tasks.push(this.compiler.compileModuleAndAllComponentsAsync(m));\n                }\n                forkJoin(tasks).subscribe((compiled) => {\n                    try {\n                      for (const c of compiled) {\n                        c.ngModuleFactory.create(this.injector);\n                      }\n                      this.loadedModules[url].next(modules);\n                      this.loadedModules[url].complete();\n                    } catch (e) {\n                      this.loadedModules[url].error(new Error(`Unable to init module from url: ${url}`));\n                      delete this.loadedModules[url];\n                    }\n                  },\n                  (e) => {\n                    this.loadedModules[url].error(new Error(`Unable to compile module from url: ${url}`));\n                    delete this.loadedModules[url];\n                  });\n              }\n            );\n          } else {\n            this.loadedModules[url].error(new Error(`Module '${url}' doesn't have default export or not NgModule!`));\n            delete this.loadedModules[url];\n          }\n        } catch (e) {\n          this.loadedModules[url].error(new Error(`Unable to load module from url: ${url}`));\n          delete this.loadedModules[url];\n        }\n      },\n      (e) => {\n        this.loadedModules[url].error(new Error(`Unable to load module from url: ${url}`));\n        delete this.loadedModules[url];\n        console.error(`Unable to load module from url: ${url}`, e);\n      }\n    );\n    return subject.asObservable();\n  }\n\n  private extractNgModules(module: any, modules: Type<any>[] = []): Type<any>[] {\n    try {\n      let potentialModules = [module];\n      let currentScanDepth = 0;\n\n      while(potentialModules.length && currentScanDepth < 10) {\n        let newPotentialModules = [];\n        for (const module of potentialModules) {\n          if (module && 'ɵmod' in module) {\n            modules.push(module);\n          } else {\n            for (const k of Object.keys(module)) {\n              if(!this.isPrimitive(module[k])) {\n                newPotentialModules.push(module[k]);\n              }\n            }\n          }\n        }\n\n        potentialModules = newPotentialModules;\n        currentScanDepth++;\n      }\n    } catch(e) {\n      console.log('Could not load NgModule', e);\n    }\n    return modules;\n  }\n\n  private isPrimitive(test) {\n    return test !== Object(test);\n  }\n\n  private loadResourceByType(type: 'css' | 'js', url: string): Observable<any> {\n    const subject = new ReplaySubject();\n    this.loadedResources[url] = subject;\n    let el;\n    let loaded = false;\n    switch (type) {\n      case 'js':\n        el = this.document.createElement('script');\n        el.type = 'text/javascript';\n        el.async = true;\n        el.src = url;\n        break;\n      case 'css':\n        el = this.document.createElement('link');\n        el.type = 'text/css';\n        el.rel = 'stylesheet';\n        el.href = url;\n        break;\n    }\n    el.onload = el.onreadystatechange = (e) => {\n      if (el.readyState && !/^c|loade/.test(el.readyState) || loaded) { return; }\n      el.onload = el.onreadystatechange = null;\n      loaded = true;\n      this.loadedResources[url].next();\n      this.loadedResources[url].complete();\n    };\n    el.onerror = () => {\n      this.loadedResources[url].error(new Error(`Unable to load ${url}`));\n      delete this.loadedResources[url];\n    };\n    this.anchor.appendChild(el);\n    return subject.asObservable();\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, mergeMap, tap } from 'rxjs/operators';\nimport { helpBaseUrl as siteBaseUrl } from '@shared/models/constants';\nimport { UiSettingsService } from '@core/http/ui-settings.service';\n\nconst localHelpBaseUrl = '/assets';\n\nconst NOT_FOUND_CONTENT: HelpData = {\n  content: '## Not found',\n  helpBaseUrl: localHelpBaseUrl\n};\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class HelpService {\n\n  private siteBaseUrl = siteBaseUrl;\n  private helpCache: {[lang: string]: {[key: string]: string}} = {};\n\n  constructor(\n    private translate: TranslateService,\n    private http: HttpClient,\n    private uiSettingsService: UiSettingsService\n  ) {}\n\n  getHelpContent(key: string): Observable<string> {\n    const lang = this.translate.currentLang;\n    if (this.helpCache[lang] && this.helpCache[lang][key]) {\n      return of(this.helpCache[lang][key]);\n    } else {\n      return this.loadHelpContent(lang, key).pipe(\n        catchError(() => {\n          const defaultLang = this.translate.getDefaultLang();\n          if (lang !== defaultLang) {\n            return this.loadHelpContent(defaultLang, key).pipe(\n              catchError(() => {\n                return of(NOT_FOUND_CONTENT);\n              })\n            );\n          } else {\n            return of(NOT_FOUND_CONTENT);\n          }\n        }),\n        mergeMap((content) => {\n          return this.processIncludes(this.processVariables(content));\n        }),\n        tap((content) => {\n          let langContent = this.helpCache[lang];\n          if (!langContent) {\n            langContent = {};\n            this.helpCache[lang] = langContent;\n          }\n          langContent[key] = content;\n        })\n      );\n    }\n  }\n\n  private loadHelpContent(lang: string, key: string): Observable<HelpData> {\n    return this.uiSettingsService.getHelpBaseUrl().pipe(\n      mergeMap((helpBaseUrl) => {\n        return this.loadHelpContentFromBaseUrl(helpBaseUrl, lang, key).pipe(\n          catchError((e) => {\n            if (localHelpBaseUrl !== helpBaseUrl) {\n              return this.loadHelpContentFromBaseUrl(localHelpBaseUrl, lang, key);\n            } else {\n              throw e;\n            }\n          })\n        );\n      })\n    );\n  }\n\n  private loadHelpContentFromBaseUrl(helpBaseUrl: string, lang: string, key: string): Observable<HelpData> {\n    return this.http.get(`${helpBaseUrl}/help/${lang}/${key}.md`, {responseType: 'text'} ).pipe(\n      map((content) => {\n        return {\n          content,\n          helpBaseUrl\n        };\n      })\n    );\n  }\n\n  private processVariables(helpData: HelpData): string {\n    const baseUrlReg = /\\${siteBaseUrl}/g;\n    helpData.content = helpData.content.replace(baseUrlReg, this.siteBaseUrl);\n    const helpBaseUrlReg = /\\${helpBaseUrl}/g;\n    return helpData.content.replace(helpBaseUrlReg, helpData.helpBaseUrl);\n  }\n\n  private processIncludes(content: string): Observable<string> {\n    const includesRule = /{% include (.*) %}/;\n    const match = includesRule.exec(content);\n    if (match) {\n      const key = match[1];\n      return this.getHelpContent(key).pipe(\n        mergeMap((include) => {\n          content = content.replace(match[0], include);\n          return this.processIncludes(content);\n        })\n      );\n    } else {\n      return of(content);\n    }\n  }\n\n}\n\ninterface HelpData {\n  content: string;\n  helpBaseUrl: string;\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\n// tslint:disable-next-line:no-reference\n/// <reference path=\"../../../../src/typings/rawloader.typings.d.ts\" />\n\nimport { Inject, Injectable, NgZone } from '@angular/core';\nimport { WINDOW } from '@core/services/window.service';\nimport { ExceptionData } from '@app/shared/models/error.models';\nimport {\n  baseUrl,\n  createLabelFromDatasource,\n  deepClone,\n  deleteNullProperties,\n  guid,\n  isDefined,\n  isDefinedAndNotNull,\n  isString,\n  isUndefined\n} from '@core/utils';\nimport { WindowMessage } from '@shared/models/window-message.model';\nimport { TranslateService } from '@ngx-translate/core';\nimport { customTranslationsPrefix, i18nPrefix } from '@app/shared/models/constants';\nimport { DataKey, Datasource, DatasourceType, KeyInfo } from '@shared/models/widget.models';\nimport { EntityType } from '@shared/models/entity-type.models';\nimport { DataKeyType } from '@app/shared/models/telemetry/telemetry.models';\nimport { alarmFields } from '@shared/models/alarm.models';\nimport { materialColors } from '@app/shared/models/material.models';\nimport { WidgetInfo } from '@home/models/widget-component.models';\nimport jsonSchemaDefaults from 'json-schema-defaults';\nimport materialIconsCodepoints from '!raw-loader!material-design-icons/iconfont/codepoints';\nimport { Observable, of, ReplaySubject } from 'rxjs';\n\nconst i18nRegExp = new RegExp(`{${i18nPrefix}:[^{}]+}`, 'g');\n\nconst predefinedFunctions: { [func: string]: string } = {\n  Sin: 'return Math.round(1000*Math.sin(time/5000));',\n  Cos: 'return Math.round(1000*Math.cos(time/5000));',\n  Random: 'var value = prevValue + Math.random() * 100 - 50;\\n' +\n    'var multiplier = Math.pow(10, 2 || 0);\\n' +\n    'var value = Math.round(value * multiplier) / multiplier;\\n' +\n    'if (value < -1000) {\\n' +\n    '\tvalue = -1000;\\n' +\n    '} else if (value > 1000) {\\n' +\n    '\tvalue = 1000;\\n' +\n    '}\\n' +\n    'return value;'\n};\n\nconst predefinedFunctionsList: Array<string> = [];\nfor (const func of Object.keys(predefinedFunctions)) {\n  predefinedFunctionsList.push(func);\n}\n\nconst defaultAlarmFields: Array<string> = [\n  alarmFields.createdTime.keyName,\n  alarmFields.originator.keyName,\n  alarmFields.type.keyName,\n  alarmFields.severity.keyName,\n  alarmFields.status.keyName\n];\n\nconst commonMaterialIcons: Array<string> = ['more_horiz', 'more_vert', 'open_in_new',\n  'visibility', 'play_arrow', 'arrow_back', 'arrow_downward',\n  'arrow_forward', 'arrow_upwards', 'close', 'refresh', 'menu', 'show_chart', 'multiline_chart', 'pie_chart', 'insert_chart', 'people',\n  'person', 'domain', 'devices_other', 'now_widgets', 'dashboards', 'map', 'pin_drop', 'my_location', 'extension', 'search',\n  'settings', 'notifications', 'notifications_active', 'info', 'info_outline', 'warning', 'list', 'file_download', 'import_export',\n  'share', 'add', 'edit', 'done'];\n\n// @dynamic\n@Injectable({\n  providedIn: 'root'\n})\nexport class UtilsService {\n\n  iframeMode = false;\n  widgetEditMode = false;\n  editWidgetInfo: WidgetInfo = null;\n\n  defaultDataKey: DataKey = {\n    name: 'f(x)',\n    type: DataKeyType.function,\n    label: 'Sin',\n    color: this.getMaterialColor(0),\n    funcBody: this.getPredefinedFunctionBody('Sin'),\n    settings: {},\n    _hash: Math.random()\n  };\n\n  defaultDatasource: Datasource = {\n    type: DatasourceType.function,\n    name: DatasourceType.function,\n    dataKeys: [deepClone(this.defaultDataKey)]\n  };\n\n  defaultAlarmDataKeys: Array<DataKey> = [];\n\n  materialIcons: Array<string> = [];\n\n  constructor(@Inject(WINDOW) private window: Window,\n              private zone: NgZone,\n              private translate: TranslateService) {\n    let frame: Element = null;\n    try {\n      frame = window.frameElement;\n    } catch (e) {\n      // ie11 fix\n    }\n    if (frame) {\n      this.iframeMode = true;\n      const dataWidgetAttr = frame.getAttribute('data-widget');\n      if (dataWidgetAttr && dataWidgetAttr.length) {\n        this.editWidgetInfo = JSON.parse(dataWidgetAttr);\n        this.widgetEditMode = true;\n      }\n    }\n  }\n\n  public getPredefinedFunctionsList(): Array<string> {\n    return predefinedFunctionsList;\n  }\n\n  public getPredefinedFunctionBody(func: string): string {\n    return predefinedFunctions[func];\n  }\n\n  public getDefaultDatasource(dataKeySchema: any): Datasource {\n    const datasource = deepClone(this.defaultDatasource);\n    if (isDefined(dataKeySchema)) {\n      datasource.dataKeys[0].settings = this.generateObjectFromJsonSchema(dataKeySchema);\n    }\n    return datasource;\n  }\n\n  private initDefaultAlarmDataKeys() {\n    for (let i = 0; i < defaultAlarmFields.length; i++) {\n      const name = defaultAlarmFields[i];\n      const dataKey: DataKey = {\n        name,\n        type: DataKeyType.alarm,\n        label: this.translate.instant(alarmFields[name].name),\n        color: this.getMaterialColor(i),\n        settings: {},\n        _hash: Math.random()\n      };\n      this.defaultAlarmDataKeys.push(dataKey);\n    }\n  }\n\n  public getDefaultAlarmDataKeys(): Array<DataKey> {\n    if (!this.defaultAlarmDataKeys.length) {\n      this.initDefaultAlarmDataKeys();\n    }\n    return deepClone(this.defaultAlarmDataKeys);\n  }\n\n  public generateObjectFromJsonSchema(schema: any): any {\n    const obj = jsonSchemaDefaults(schema);\n    deleteNullProperties(obj);\n    return obj;\n  }\n\n  public processWidgetException(exception: any): ExceptionData {\n    const data = this.parseException(exception, -6);\n    if (this.widgetEditMode) {\n      const message: WindowMessage = {\n        type: 'widgetException',\n        data\n      };\n      this.window.parent.postMessage(JSON.stringify(message), '*');\n    }\n    return data;\n  }\n\n  public parseException(exception: any, lineOffset?: number): ExceptionData {\n    const data: ExceptionData = {};\n    if (exception) {\n      if (typeof exception === 'string') {\n        data.message = exception;\n      } else if (exception instanceof String) {\n        data.message = exception.toString();\n      } else {\n        if (exception.name) {\n          data.name = exception.name;\n        } else {\n          data.name = 'UnknownError';\n        }\n        if (exception.message) {\n          data.message = exception.message;\n        }\n        if (exception.lineNumber) {\n          data.lineNumber = exception.lineNumber;\n          if (exception.columnNumber) {\n            data.columnNumber = exception.columnNumber;\n          }\n        } else if (exception.stack) {\n          const lineInfoRegexp = /(.*<anonymous>):(\\d*)(:)?(\\d*)?/g;\n          const lineInfoGroups = lineInfoRegexp.exec(exception.stack);\n          if (lineInfoGroups != null && lineInfoGroups.length >= 3) {\n            if (isUndefined(lineOffset)) {\n              lineOffset = -2;\n            }\n            data.lineNumber = Number(lineInfoGroups[2]) + lineOffset;\n            if (lineInfoGroups.length >= 5) {\n              data.columnNumber = Number(lineInfoGroups[4]);\n            }\n          }\n        }\n      }\n    }\n    return data;\n  }\n\n  public customTranslation(translationValue: string, defaultValue: string): string {\n    if (translationValue && isString(translationValue)) {\n      if (translationValue.includes(`{${i18nPrefix}`)) {\n        const matches = translationValue.match(i18nRegExp);\n        let result = translationValue;\n        for (const match of matches) {\n          const translationId = match.substring(6, match.length - 1);\n          result = result.replace(match, this.doTranslate(translationId, match));\n        }\n        return result;\n      } else {\n        return this.doTranslate(translationValue, defaultValue, customTranslationsPrefix);\n      }\n    } else {\n      return translationValue;\n    }\n  }\n\n  private doTranslate(translationValue: string, defaultValue: string, prefix?: string): string {\n    let result: string;\n    let translationId;\n    if (prefix) {\n      translationId = prefix + translationValue;\n    } else {\n      translationId = translationValue;\n    }\n    const translation = this.translate.instant(translationId);\n    if (translation !== translationId) {\n      result = translation + '';\n    } else {\n      result = defaultValue;\n    }\n    return result;\n  }\n\n  public guid(): string {\n    return guid();\n  }\n\n  public validateDatasources(datasources: Array<Datasource>): Array<Datasource> {\n    datasources.forEach((datasource) => {\n      // @ts-ignore\n      if (datasource.type === 'device') {\n        datasource.type = DatasourceType.entity;\n        datasource.entityType = EntityType.DEVICE;\n        if (datasource.deviceId) {\n          datasource.entityId = datasource.deviceId;\n        } else if (datasource.deviceAliasId) {\n          datasource.entityAliasId = datasource.deviceAliasId;\n        }\n        if (datasource.deviceName) {\n          datasource.entityName = datasource.deviceName;\n        }\n      }\n      if (datasource.type === DatasourceType.entity && datasource.entityId) {\n        datasource.name = datasource.entityName;\n      }\n      if (!datasource.dataKeys) {\n        datasource.dataKeys = [];\n      }\n    });\n    return datasources;\n  }\n\n  public getMaterialIcons(): Observable<Array<string>> {\n    if (this.materialIcons.length) {\n      return of(this.materialIcons);\n    } else {\n      const materialIconsSubject = new ReplaySubject<Array<string>>();\n      this.zone.runOutsideAngular(() => {\n        const codepointsArray = materialIconsCodepoints\n          .split('\\n')\n          .filter((codepoint) => codepoint && codepoint.length);\n        codepointsArray.forEach((codepoint) => {\n          const values = codepoint.split(' ');\n          if (values && values.length === 2) {\n            this.materialIcons.push(values[0]);\n          }\n        });\n        materialIconsSubject.next(this.materialIcons);\n      });\n      return materialIconsSubject.asObservable();\n    }\n  }\n\n  public getCommonMaterialIcons(): Array<string> {\n    return commonMaterialIcons;\n  }\n\n  public getMaterialColor(index: number) {\n    const colorIndex = index % materialColors.length;\n    return materialColors[colorIndex].value;\n  }\n\n  public createKey(keyInfo: KeyInfo, type: DataKeyType, index: number = -1): DataKey {\n    let label;\n    if (type === DataKeyType.alarm && !keyInfo.label) {\n      const alarmField = alarmFields[keyInfo.name];\n      if (alarmField) {\n        label = this.translate.instant(alarmField.name);\n      }\n    }\n    if (!label) {\n      label = keyInfo.label || keyInfo.name;\n    }\n    const dataKey: DataKey = {\n      name: keyInfo.name,\n      type,\n      label,\n      funcBody: keyInfo.funcBody,\n      settings: {},\n      _hash: Math.random()\n    };\n    if (keyInfo.units) {\n      dataKey.units = keyInfo.units;\n    }\n    if (isDefined(keyInfo.decimals)) {\n      dataKey.decimals = keyInfo.decimals;\n    }\n    if (keyInfo.color) {\n      dataKey.color = keyInfo.color;\n    } else if (index > -1) {\n      dataKey.color = this.getMaterialColor(index);\n    }\n    if (keyInfo.postFuncBody && keyInfo.postFuncBody.length) {\n      dataKey.usePostProcessing = true;\n      dataKey.postFuncBody = keyInfo.postFuncBody;\n    }\n    return dataKey;\n  }\n\n  /* public createAdditionalDataKey(dataKey: DataKey, datasource: Datasource, timeUnit: string,\n    datasources: Datasource[], additionalKeysNumber: number): DataKey {\n    const additionalDataKey = deepClone(dataKey);\n    if (dataKey.settings.comparisonSettings.comparisonValuesLabel) {\n      additionalDataKey.label = createLabelFromDatasource(datasource, dataKey.settings.comparisonSettings.comparisonValuesLabel);\n    } else {\n      additionalDataKey.label = dataKey.label + ' ' + this.translate.instant('legend.comparison-time-ago.' + timeUnit);\n    }\n    additionalDataKey.pattern = additionalDataKey.label;\n    if (dataKey.settings.comparisonSettings.color) {\n      additionalDataKey.color = dataKey.settings.comparisonSettings.color;\n    } else {\n      const index = datasources.map((_datasource) => datasource.dataKeys.length)\n        .reduce((previousValue, currentValue) => previousValue + currentValue, 0);\n      additionalDataKey.color = this.getMaterialColor(index + additionalKeysNumber);\n    }\n    additionalDataKey._hash = Math.random();\n    return additionalDataKey;\n  }*/\n\n  public createLabelFromDatasource(datasource: Datasource, pattern: string): string {\n    return createLabelFromDatasource(datasource, pattern);\n  }\n\n  public generateColors(datasources: Array<Datasource>) {\n    let index = 0;\n    datasources.forEach((datasource) => {\n      datasource.dataKeys.forEach((dataKey) => {\n        if (!dataKey.color) {\n          dataKey.color = this.getMaterialColor(index);\n        }\n        index++;\n      });\n    });\n  }\n\n  public currentPerfTime(): number {\n    return this.window.performance && this.window.performance.now ?\n      this.window.performance.now() : Date.now();\n  }\n\n  public getQueryParam(name: string): string {\n    const url = this.window.location.href;\n    name = name.replace(/[\\[\\]]/g, '\\\\$&');\n    const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');\n    const results = regex.exec(url);\n    if (!results) {\n      return null;\n    }\n    if (!results[2]) {\n      return '';\n    }\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n  }\n\n  public removeQueryParams(keys: Array<string>) {\n    let params = this.window.location.search;\n    for (const key of keys) {\n      params = this.updateUrlQueryString(params, key, null);\n    }\n    const baseUrlPart = [baseUrl(), this.window.location.pathname].join('');\n    this.window.history.replaceState({}, '', baseUrlPart + params);\n  }\n\n  public updateQueryParam(name: string, value: string | null) {\n    const baseUrlPart = [baseUrl(), this.window.location.pathname].join('');\n    const urlQueryString = this.window.location.search;\n    const params = this.updateUrlQueryString(urlQueryString, name, value);\n    this.window.history.replaceState({}, '', baseUrlPart + params);\n  }\n\n  private updateUrlQueryString(urlQueryString: string, name: string, value: string | null): string {\n    let newParam = '';\n    let params = '';\n    if (value !== null) {\n      newParam = name + '=' + value;\n    }\n    if (urlQueryString) {\n      const keyRegex = new RegExp('([\\?&])' + name + '[^&]*');\n      if (urlQueryString.match(keyRegex) !== null) {\n        if (newParam) {\n          newParam = '$1' + newParam;\n        }\n        params = urlQueryString.replace(keyRegex, newParam);\n        if (params.startsWith('&')) {\n          params = '?' + params.substring(1);\n        }\n      } else if (newParam) {\n        params = urlQueryString + '&' + newParam;\n      }\n    } else if (newParam) {\n      params = '?' + newParam;\n    }\n    return params;\n  }\n\n  public baseUrl(): string {\n    return baseUrl();\n  }\n\n  public deepClone<T>(target: T, ignoreFields?: string[]): T {\n    return deepClone(target, ignoreFields);\n  }\n\n  public isUndefined(value: any): boolean {\n    return isUndefined(value);\n  }\n\n  public isDefined(value: any): boolean {\n    return isDefined(value);\n  }\n\n  public defaultValue(value: any, defaultValue: any): any {\n    if (isDefinedAndNotNull(value)) {\n      return value;\n    } else {\n      return defaultValue;\n    }\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { NgModule, SecurityContext } from '@angular/core';\nimport { CommonModule, DatePipe } from '@angular/common';\nimport { FooterComponent } from '@shared/components/footer.component';\nimport { LogoComponent } from '@shared/components/logo.component';\nimport { TbSnackBarComponent, ToastDirective } from '@shared/components/toast.directive';\nimport { BreadcrumbComponent } from '@shared/components/breadcrumb.component';\nimport { FlowInjectionToken, NgxFlowModule } from '@flowjs/ngx-flow';\nimport { NgxFlowchartModule } from 'ngx-flowchart/dist/ngx-flowchart';\nimport Flow from '@flowjs/flow.js';\n\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { MatDatepickerModule } from '@angular/material/datepicker';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatExpansionModule } from '@angular/material/expansion';\nimport { MatGridListModule } from '@angular/material/grid-list';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatPaginatorModule } from '@angular/material/paginator';\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatRadioModule } from '@angular/material/radio';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\nimport { MatSliderModule } from '@angular/material/slider';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { MatSortModule } from '@angular/material/sort';\nimport { MatStepperModule } from '@angular/material/stepper';\nimport { MatTableModule } from '@angular/material/table';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatListModule } from '@angular/material/list';\nimport { MatDatetimepickerModule, MatNativeDatetimeModule } from '@mat-datetimepicker/core';\nimport { NgxDaterangepickerMd } from 'ngx-daterangepicker-material';\nimport { GridsterModule } from 'angular-gridster2';\nimport { FlexLayoutModule } from '@angular/flex-layout';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { ShareModule as ShareButtonsModule } from 'ngx-sharebuttons';\nimport { HotkeyModule } from 'angular2-hotkeys';\nimport { ColorPickerModule } from 'ngx-color-picker';\nimport { NgxHmCarouselModule } from 'ngx-hm-carousel';\nimport { UserMenuComponent } from '@shared/components/user-menu.component';\nimport { NospacePipe } from '@shared/pipe/nospace.pipe';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { TbCheckboxComponent } from '@shared/components/tb-checkbox.component';\nimport { HelpComponent } from '@shared/components/help.component';\nimport { TbAnchorComponent } from '@shared/components/tb-anchor.component';\nimport { MillisecondsToTimeStringPipe } from '@shared/pipe/milliseconds-to-time-string.pipe';\nimport { TimewindowComponent } from '@shared/components/time/timewindow.component';\nimport { OverlayModule } from '@angular/cdk/overlay';\nimport { TimewindowPanelComponent } from '@shared/components/time/timewindow-panel.component';\nimport { TimeintervalComponent } from '@shared/components/time/timeinterval.component';\nimport { DatetimePeriodComponent } from '@shared/components/time/datetime-period.component';\nimport { EnumToArrayPipe } from '@shared/pipe/enum-to-array.pipe';\nimport { ClipboardModule } from 'ngx-clipboard';\nimport { ValueInputComponent } from '@shared/components/value-input.component';\nimport { MarkdownModule, MarkedOptions } from 'ngx-markdown';\nimport { FullscreenDirective } from '@shared/components/fullscreen.directive';\nimport { HighlightPipe } from '@shared/pipe/highlight.pipe';\nimport { DashboardAutocompleteComponent } from '@shared/components/dashboard-autocomplete.component';\nimport { EntitySubTypeAutocompleteComponent } from '@shared/components/entity/entity-subtype-autocomplete.component';\nimport { EntitySubTypeSelectComponent } from '@shared/components/entity/entity-subtype-select.component';\nimport { EntityAutocompleteComponent } from '@shared/components/entity/entity-autocomplete.component';\nimport { EntityListComponent } from '@shared/components/entity/entity-list.component';\nimport { EntityTypeSelectComponent } from '@shared/components/entity/entity-type-select.component';\nimport { EntitySelectComponent } from '@shared/components/entity/entity-select.component';\nimport { DatetimeComponent } from '@shared/components/time/datetime.component';\nimport { EntityKeysListComponent } from '@shared/components/entity/entity-keys-list.component';\nimport { SocialSharePanelComponent } from '@shared/components/socialshare-panel.component';\nimport { RelationTypeAutocompleteComponent } from '@shared/components/relation/relation-type-autocomplete.component';\nimport { EntityListSelectComponent } from '@shared/components/entity/entity-list-select.component';\nimport { JsonObjectEditComponent } from '@shared/components/json-object-edit.component';\nimport { FooterFabButtonsComponent } from '@shared/components/footer-fab-buttons.component';\nimport { CircularProgressDirective } from '@shared/components/circular-progress.directive';\nimport {\n  FabActionsDirective,\n  FabToolbarComponent,\n  FabTriggerDirective\n} from '@shared/components/fab-toolbar.component';\nimport { DashboardSelectPanelComponent } from '@shared/components/dashboard-select-panel.component';\nimport { DashboardSelectComponent } from '@shared/components/dashboard-select.component';\nimport { WidgetsBundleSelectComponent } from '@shared/components/widgets-bundle-select.component';\nimport { KeyboardShortcutPipe } from '@shared/pipe/keyboard-shortcut.pipe';\nimport { TbErrorComponent } from '@shared/components/tb-error.component';\nimport { EntityTypeListComponent } from '@shared/components/entity/entity-type-list.component';\nimport { EntitySubTypeListComponent } from '@shared/components/entity/entity-subtype-list.component';\nimport { TruncatePipe } from '@shared/pipe/truncate.pipe';\nimport { TbJsonPipe } from '@shared/pipe/tbJson.pipe';\nimport { ColorPickerDialogComponent } from '@shared/components/dialog/color-picker-dialog.component';\nimport { MatChipDraggableDirective } from '@shared/components/mat-chip-draggable.directive';\nimport { ColorInputComponent } from '@shared/components/color-input.component';\nimport { JsFuncComponent } from '@shared/components/js-func.component';\nimport { JsonFormComponent } from '@shared/components/json-form/json-form.component';\nimport { ConfirmDialogComponent } from '@shared/components/dialog/confirm-dialog.component';\nimport { AlertDialogComponent } from '@shared/components/dialog/alert-dialog.component';\nimport { TodoDialogComponent } from '@shared/components/dialog/todo-dialog.component';\nimport { MaterialIconsDialogComponent } from '@shared/components/dialog/material-icons-dialog.component';\nimport { MaterialIconSelectComponent } from '@shared/components/material-icon-select.component';\nimport { ImageInputComponent } from '@shared/components/image-input.component';\nimport { FileInputComponent } from '@shared/components/file-input.component';\nimport { NodeScriptTestDialogComponent } from '@shared/components/dialog/node-script-test-dialog.component';\nimport { MessageTypeAutocompleteComponent } from '@shared/components/message-type-autocomplete.component';\nimport { JsonContentComponent } from '@shared/components/json-content.component';\nimport { KeyValMapComponent } from '@shared/components/kv-map.component';\nimport { TbCheatSheetComponent } from '@shared/components/cheatsheet.component';\nimport { TbHotkeysDirective } from '@shared/components/hotkeys.directive';\nimport { NavTreeComponent } from '@shared/components/nav-tree.component';\nimport { LedLightComponent } from '@shared/components/led-light.component';\nimport { TbJsonToStringDirective } from '@shared/components/directives/tb-json-to-string.directive';\nimport { JsonObjectEditDialogComponent } from '@shared/components/dialog/json-object-edit-dialog.component';\nimport { HistorySelectorComponent } from './components/time/history-selector/history-selector.component';\nimport { EntityGatewaySelectComponent } from '@shared/components/entity/entity-gateway-select.component';\nimport { DndModule } from 'ngx-drag-drop';\nimport { QueueTypeListComponent } from '@shared/components/queue/queue-type-list.component';\nimport { ContactComponent } from '@shared/components/contact.component';\nimport { TimezoneSelectComponent } from '@shared/components/time/timezone-select.component';\nimport { FileSizePipe } from '@shared/pipe/file-size.pipe';\nimport { WidgetsBundleSearchComponent } from '@shared/components/widgets-bundle-search.component';\nimport { SelectableColumnsPipe } from '@shared/pipe/selectable-columns.pipe';\nimport { QuickTimeIntervalComponent } from '@shared/components/time/quick-time-interval.component';\nimport { OtaPackageAutocompleteComponent } from '@shared/components/ota-package/ota-package-autocomplete.component';\nimport { MAT_DATE_LOCALE } from '@angular/material/core';\nimport { CopyButtonComponent } from '@shared/components/button/copy-button.component';\nimport { TogglePasswordComponent } from '@shared/components/button/toggle-password.component';\nimport { HelpPopupComponent } from '@shared/components/help-popup.component';\nimport { TbPopoverComponent, TbPopoverDirective } from '@shared/components/popover.component';\nimport { TbStringTemplateOutletDirective } from '@shared/components/directives/sring-template-outlet.directive';\nimport { TbComponentOutletDirective} from '@shared/components/directives/component-outlet.directive';\nimport { HelpMarkdownComponent } from '@shared/components/help-markdown.component';\nimport { MarkedOptionsService } from '@shared/components/marked-options.service';\nimport { TbPopoverService } from '@shared/components/popover.service';\nimport { HELP_MARKDOWN_COMPONENT_TOKEN, SHARED_MODULE_TOKEN } from '@shared/components/tokens';\nimport { TbMarkdownComponent } from '@shared/components/markdown.component';\nimport { ProtobufContentComponent } from './components/protobuf-content.component';\n\nexport function MarkedOptionsFactory(markedOptionsService: MarkedOptionsService) {\n  return markedOptionsService;\n}\n\n@NgModule({\n  providers: [\n    DatePipe,\n    MillisecondsToTimeStringPipe,\n    EnumToArrayPipe,\n    HighlightPipe,\n    TruncatePipe,\n    TbJsonPipe,\n    FileSizePipe,\n    {\n      provide: FlowInjectionToken,\n      useValue: Flow\n    },\n    {\n      provide: MAT_DATE_LOCALE,\n      useValue: 'en-GB'\n    },\n    { provide: HELP_MARKDOWN_COMPONENT_TOKEN, useValue: HelpMarkdownComponent },\n    { provide: SHARED_MODULE_TOKEN, useValue: SharedModule },\n    TbPopoverService\n  ],\n  declarations: [\n    FooterComponent,\n    LogoComponent,\n    FooterFabButtonsComponent,\n    ToastDirective,\n    FullscreenDirective,\n    CircularProgressDirective,\n    MatChipDraggableDirective,\n    TbHotkeysDirective,\n    TbAnchorComponent,\n    TbPopoverComponent,\n    TbStringTemplateOutletDirective,\n    TbComponentOutletDirective,\n    TbPopoverDirective,\n    TbMarkdownComponent,\n    HelpComponent,\n    HelpMarkdownComponent,\n    HelpPopupComponent,\n    TbCheckboxComponent,\n    TbSnackBarComponent,\n    TbErrorComponent,\n    TbCheatSheetComponent,\n    BreadcrumbComponent,\n    UserMenuComponent,\n    TimewindowComponent,\n    TimewindowPanelComponent,\n    TimeintervalComponent,\n    QuickTimeIntervalComponent,\n    DashboardSelectComponent,\n    DashboardSelectPanelComponent,\n    DatetimePeriodComponent,\n    DatetimeComponent,\n    TimezoneSelectComponent,\n    ValueInputComponent,\n    DashboardAutocompleteComponent,\n    EntitySubTypeAutocompleteComponent,\n    EntitySubTypeSelectComponent,\n    EntitySubTypeListComponent,\n    EntityAutocompleteComponent,\n    EntityListComponent,\n    EntityTypeSelectComponent,\n    EntitySelectComponent,\n    EntityKeysListComponent,\n    EntityListSelectComponent,\n    EntityTypeListComponent,\n    QueueTypeListComponent,\n    RelationTypeAutocompleteComponent,\n    SocialSharePanelComponent,\n    JsonObjectEditComponent,\n    JsonContentComponent,\n    JsFuncComponent,\n    FabTriggerDirective,\n    FabActionsDirective,\n    FabToolbarComponent,\n    WidgetsBundleSelectComponent,\n    ConfirmDialogComponent,\n    AlertDialogComponent,\n    TodoDialogComponent,\n    ColorPickerDialogComponent,\n    MaterialIconsDialogComponent,\n    ColorInputComponent,\n    MaterialIconSelectComponent,\n    NodeScriptTestDialogComponent,\n    JsonFormComponent,\n    ImageInputComponent,\n    FileInputComponent,\n    MessageTypeAutocompleteComponent,\n    KeyValMapComponent,\n    NavTreeComponent,\n    LedLightComponent,\n    NospacePipe,\n    MillisecondsToTimeStringPipe,\n    EnumToArrayPipe,\n    HighlightPipe,\n    TruncatePipe,\n    TbJsonPipe,\n    FileSizePipe,\n    SelectableColumnsPipe,\n    KeyboardShortcutPipe,\n    TbJsonToStringDirective,\n    JsonObjectEditDialogComponent,\n    HistorySelectorComponent,\n    EntityGatewaySelectComponent,\n    ContactComponent,\n    OtaPackageAutocompleteComponent,\n    WidgetsBundleSearchComponent,\n    CopyButtonComponent,\n    TogglePasswordComponent,\n    ProtobufContentComponent\n  ],\n  imports: [\n    CommonModule,\n    RouterModule,\n    TranslateModule,\n    MatButtonModule,\n    MatCheckboxModule,\n    MatIconModule,\n    MatCardModule,\n    MatProgressBarModule,\n    MatInputModule,\n    MatSnackBarModule,\n    MatSidenavModule,\n    MatToolbarModule,\n    MatMenuModule,\n    MatGridListModule,\n    MatDialogModule,\n    MatSelectModule,\n    MatTooltipModule,\n    MatTableModule,\n    MatPaginatorModule,\n    MatSortModule,\n    MatProgressSpinnerModule,\n    MatDividerModule,\n    MatTabsModule,\n    MatRadioModule,\n    MatSlideToggleModule,\n    MatDatepickerModule,\n    MatNativeDatetimeModule,\n    MatDatetimepickerModule,\n    NgxDaterangepickerMd.forRoot(),\n    MatSliderModule,\n    MatExpansionModule,\n    MatStepperModule,\n    MatAutocompleteModule,\n    MatChipsModule,\n    MatListModule,\n    GridsterModule,\n    ClipboardModule,\n    FlexLayoutModule.withConfig({addFlexToParent: false}),\n    FormsModule,\n    ReactiveFormsModule,\n    OverlayModule,\n    ShareButtonsModule,\n    HotkeyModule,\n    ColorPickerModule,\n    NgxHmCarouselModule,\n    DndModule,\n    NgxFlowModule,\n    NgxFlowchartModule,\n    // ngx-markdown\n    MarkdownModule.forRoot({\n      sanitize: SecurityContext.NONE,\n      markedOptions: {\n        provide: MarkedOptions,\n        useFactory: MarkedOptionsFactory,\n        deps: [MarkedOptionsService]\n      }\n    })\n  ],\n  exports: [\n    FooterComponent,\n    LogoComponent,\n    FooterFabButtonsComponent,\n    ToastDirective,\n    FullscreenDirective,\n    CircularProgressDirective,\n    MatChipDraggableDirective,\n    TbHotkeysDirective,\n    TbAnchorComponent,\n    TbStringTemplateOutletDirective,\n    TbComponentOutletDirective,\n    TbPopoverDirective,\n    TbMarkdownComponent,\n    HelpComponent,\n    HelpMarkdownComponent,\n    HelpPopupComponent,\n    TbCheckboxComponent,\n    TbErrorComponent,\n    TbCheatSheetComponent,\n    BreadcrumbComponent,\n    UserMenuComponent,\n    TimewindowComponent,\n    TimewindowPanelComponent,\n    TimeintervalComponent,\n    QuickTimeIntervalComponent,\n    DashboardSelectComponent,\n    DatetimePeriodComponent,\n    DatetimeComponent,\n    TimezoneSelectComponent,\n    DashboardAutocompleteComponent,\n    EntitySubTypeAutocompleteComponent,\n    EntitySubTypeSelectComponent,\n    EntitySubTypeListComponent,\n    EntityAutocompleteComponent,\n    EntityListComponent,\n    EntityTypeSelectComponent,\n    EntitySelectComponent,\n    EntityKeysListComponent,\n    EntityListSelectComponent,\n    EntityTypeListComponent,\n    QueueTypeListComponent,\n    RelationTypeAutocompleteComponent,\n    SocialSharePanelComponent,\n    JsonObjectEditComponent,\n    JsonContentComponent,\n    JsFuncComponent,\n    FabTriggerDirective,\n    FabActionsDirective,\n    FabToolbarComponent,\n    WidgetsBundleSelectComponent,\n    ValueInputComponent,\n    MatButtonModule,\n    MatCheckboxModule,\n    MatIconModule,\n    MatCardModule,\n    MatProgressBarModule,\n    MatInputModule,\n    MatSnackBarModule,\n    MatSidenavModule,\n    MatToolbarModule,\n    MatMenuModule,\n    MatGridListModule,\n    MatDialogModule,\n    MatSelectModule,\n    MatTooltipModule,\n    MatTableModule,\n    MatPaginatorModule,\n    MatSortModule,\n    MatProgressSpinnerModule,\n    MatDividerModule,\n    MatTabsModule,\n    MatRadioModule,\n    MatSlideToggleModule,\n    MatDatepickerModule,\n    MatNativeDatetimeModule,\n    MatDatetimepickerModule,\n    NgxDaterangepickerMd,\n    MatSliderModule,\n    MatExpansionModule,\n    MatStepperModule,\n    MatAutocompleteModule,\n    MatChipsModule,\n    MatListModule,\n    GridsterModule,\n    ClipboardModule,\n    FlexLayoutModule,\n    FormsModule,\n    ReactiveFormsModule,\n    OverlayModule,\n    ShareButtonsModule,\n    HotkeyModule,\n    ColorPickerModule,\n    NgxHmCarouselModule,\n    DndModule,\n    NgxFlowchartModule,\n    MarkdownModule,\n    ConfirmDialogComponent,\n    AlertDialogComponent,\n    TodoDialogComponent,\n    ColorPickerDialogComponent,\n    MaterialIconsDialogComponent,\n    ColorInputComponent,\n    MaterialIconSelectComponent,\n    NodeScriptTestDialogComponent,\n    JsonFormComponent,\n    ImageInputComponent,\n    FileInputComponent,\n    MessageTypeAutocompleteComponent,\n    KeyValMapComponent,\n    NavTreeComponent,\n    LedLightComponent,\n    NospacePipe,\n    MillisecondsToTimeStringPipe,\n    EnumToArrayPipe,\n    HighlightPipe,\n    TruncatePipe,\n    TbJsonPipe,\n    KeyboardShortcutPipe,\n    FileSizePipe,\n    SelectableColumnsPipe,\n    TranslateModule,\n    JsonObjectEditDialogComponent,\n    HistorySelectorComponent,\n    EntityGatewaySelectComponent,\n    ContactComponent,\n    OtaPackageAutocompleteComponent,\n    WidgetsBundleSearchComponent,\n    CopyButtonComponent,\n    TogglePasswordComponent,\n    ProtobufContentComponent\n  ]\n})\nexport class SharedModule { }\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { HasUUID } from '@shared/models/id/has-uuid';\n\nexport interface OAuth2Info {\n  enabled: boolean;\n  oauth2ParamsInfos: OAuth2ParamsInfo[];\n}\n\nexport interface OAuth2ParamsInfo {\n  clientRegistrations: OAuth2RegistrationInfo[];\n  domainInfos: OAuth2DomainInfo[];\n  mobileInfos: OAuth2MobileInfo[];\n}\n\nexport interface OAuth2DomainInfo {\n  name: string;\n  scheme: DomainSchema;\n}\n\nexport interface OAuth2MobileInfo {\n  pkgName: string;\n  appSecret: string;\n}\n\nexport enum DomainSchema{\n  HTTP = 'HTTP',\n  HTTPS = 'HTTPS',\n  MIXED = 'MIXED'\n}\n\nexport const domainSchemaTranslations = new Map<DomainSchema, string>(\n  [\n    [DomainSchema.HTTP, 'admin.oauth2.domain-schema-http'],\n    [DomainSchema.HTTPS, 'admin.oauth2.domain-schema-https'],\n    [DomainSchema.MIXED, 'admin.oauth2.domain-schema-mixed']\n  ]\n);\n\nexport enum MapperConfigType{\n  BASIC = 'BASIC',\n  CUSTOM = 'CUSTOM',\n  GITHUB = 'GITHUB',\n  APPLE = 'APPLE'\n}\n\nexport enum TenantNameStrategy{\n  DOMAIN = 'DOMAIN',\n  EMAIL = 'EMAIL',\n  CUSTOM = 'CUSTOM'\n}\n\nexport enum PlatformType {\n  WEB = 'WEB',\n  ANDROID = 'ANDROID',\n  IOS = 'IOS'\n}\n\nexport const platformTypeTranslations = new Map<PlatformType, string>(\n  [\n    [PlatformType.WEB, 'admin.oauth2.platform-web'],\n    [PlatformType.ANDROID, 'admin.oauth2.platform-android'],\n    [PlatformType.IOS, 'admin.oauth2.platform-ios']\n  ]\n);\n\nexport interface OAuth2ClientRegistrationTemplate extends OAuth2RegistrationInfo{\n  comment: string;\n  createdTime: number;\n  helpLink: string;\n  name: string;\n  providerId: string;\n  id: HasUUID;\n}\n\nexport interface OAuth2RegistrationInfo {\n  loginButtonLabel: string;\n  loginButtonIcon: string;\n  clientId: string;\n  clientSecret: string;\n  accessTokenUri: string;\n  authorizationUri: string;\n  scope: string[];\n  platforms: PlatformType[];\n  jwkSetUri?: string;\n  userInfoUri: string;\n  clientAuthenticationMethod: ClientAuthenticationMethod;\n  userNameAttributeName: string;\n  mapperConfig: MapperConfig;\n  additionalInfo: string;\n}\n\nexport enum ClientAuthenticationMethod {\n  BASIC = 'BASIC',\n  POST = 'POST'\n}\n\nexport interface MapperConfig {\n  allowUserCreation: boolean;\n  activateUser: boolean;\n  type: MapperConfigType;\n  basic?: MapperConfigBasic;\n  custom?: MapperConfigCustom;\n}\n\nexport interface MapperConfigBasic {\n  emailAttributeKey: string;\n  firstNameAttributeKey?: string;\n  lastNameAttributeKey?: string;\n  tenantNameStrategy: TenantNameStrategy;\n  tenantNamePattern?: string;\n  customerNamePattern?: string;\n  defaultDashboardName?: string;\n  alwaysFullScreen?: boolean;\n}\n\nexport interface MapperConfigCustom {\n  url: string;\n  username?: string;\n  password?: string;\n}\n\nexport interface OAuth2ClientInfo {\n  name: string;\n  icon?: string;\n  url: string;\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { animate, AnimationTriggerMetadata, style, transition, trigger } from '@angular/animations';\nimport { ConnectedOverlayPositionChange, ConnectionPositionPair } from '@angular/cdk/overlay';\nimport { TbPopoverComponent } from '@shared/components/popover.component';\n\nexport const popoverMotion: AnimationTriggerMetadata = trigger('popoverMotion', [\n  transition('void => active', [\n    style({ opacity: 0, transform: 'scale(0.8)' }),\n    animate(\n      '0.2s cubic-bezier(0.08, 0.82, 0.17, 1)',\n      style({\n        opacity: 1,\n        transform: 'scale(1)'\n      })\n    )\n  ]),\n  transition('active => void', [\n    style({ opacity: 1, transform: 'scale(1)' }),\n    animate(\n      '0.2s cubic-bezier(0.78, 0.14, 0.15, 0.86)',\n      style({\n        opacity: 0,\n        transform: 'scale(0.8)'\n      })\n    )\n  ])\n]);\n\nexport const PopoverPlacements = ['top', 'topLeft', 'topRight', 'right', 'rightTop', 'rightBottom', 'bottom', 'bottomLeft', 'bottomRight', 'left', 'leftTop', 'leftBottom'] as const;\ntype PopoverPlacementTuple = typeof PopoverPlacements;\nexport type PopoverPlacement = PopoverPlacementTuple[number];\n\nexport const POSITION_MAP: { [key: string]: ConnectionPositionPair } = {\n  top: new ConnectionPositionPair({ originX: 'center', originY: 'top' }, { overlayX: 'center', overlayY: 'bottom' }),\n  topLeft: new ConnectionPositionPair({ originX: 'start', originY: 'top' }, { overlayX: 'start', overlayY: 'bottom' }),\n  topRight: new ConnectionPositionPair({ originX: 'end', originY: 'top' }, { overlayX: 'end', overlayY: 'bottom' }),\n  right: new ConnectionPositionPair({ originX: 'end', originY: 'center' }, { overlayX: 'start', overlayY: 'center' }),\n  rightTop: new ConnectionPositionPair({ originX: 'end', originY: 'top' }, { overlayX: 'start', overlayY: 'top' }),\n  rightBottom: new ConnectionPositionPair(\n    { originX: 'end', originY: 'bottom' },\n    { overlayX: 'start', overlayY: 'bottom' }\n  ),\n  bottom: new ConnectionPositionPair({ originX: 'center', originY: 'bottom' }, { overlayX: 'center', overlayY: 'top' }),\n  bottomLeft: new ConnectionPositionPair(\n    { originX: 'start', originY: 'bottom' },\n    { overlayX: 'start', overlayY: 'top' }\n  ),\n  bottomRight: new ConnectionPositionPair({ originX: 'end', originY: 'bottom' }, { overlayX: 'end', overlayY: 'top' }),\n  left: new ConnectionPositionPair({ originX: 'start', originY: 'center' }, { overlayX: 'end', overlayY: 'center' }),\n  leftTop: new ConnectionPositionPair({ originX: 'start', originY: 'top' }, { overlayX: 'end', overlayY: 'top' }),\n  leftBottom: new ConnectionPositionPair(\n    { originX: 'start', originY: 'bottom' },\n    { overlayX: 'end', overlayY: 'bottom' }\n  )\n};\n\nexport const DEFAULT_POPOVER_POSITIONS = [POSITION_MAP.top, POSITION_MAP.right, POSITION_MAP.bottom, POSITION_MAP.left];\n\nexport function getPlacementName(position: ConnectedOverlayPositionChange): PopoverPlacement | undefined {\n  for (const placement in POSITION_MAP) {\n    if (\n      position.connectionPair.originX === POSITION_MAP[placement].originX &&\n      position.connectionPair.originY === POSITION_MAP[placement].originY &&\n      position.connectionPair.overlayX === POSITION_MAP[placement].overlayX &&\n      position.connectionPair.overlayY === POSITION_MAP[placement].overlayY\n    ) {\n      return placement as PopoverPlacement;\n    }\n  }\n  return undefined;\n}\n\nexport interface PropertyMapping {\n  [key: string]: [string, () => unknown];\n}\n\nexport interface PopoverWithTrigger {\n  trigger: Element;\n  popoverComponent: TbPopoverComponent;\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport {\n  Component,\n  ElementRef,\n  Input, OnChanges,\n  OnDestroy,\n  Renderer2, SimpleChanges,\n  ViewChild,\n  ViewContainerRef,\n  ViewEncapsulation\n} from '@angular/core';\nimport { TbPopoverService } from '@shared/components/popover.service';\nimport { PopoverPlacement } from '@shared/components/popover.models';\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\nimport { isDefinedAndNotNull } from '@core/utils';\n\n@Component({\n  // tslint:disable-next-line:component-selector\n  selector: '[tb-help-popup], [tb-help-popup-content]',\n  templateUrl: './help-popup.component.html',\n  styleUrls: ['./help-popup.component.scss'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class HelpPopupComponent implements OnChanges, OnDestroy {\n\n  @ViewChild('toggleHelpButton', {read: ElementRef, static: false}) toggleHelpButton: ElementRef;\n  @ViewChild('toggleHelpTextButton', {read: ElementRef, static: false}) toggleHelpTextButton: ElementRef;\n\n  // tslint:disable-next-line:no-input-rename\n  @Input('tb-help-popup') helpId: string;\n\n  // tslint:disable-next-line:no-input-rename\n  @Input('tb-help-popup-content') helpContent: string;\n\n  // tslint:disable-next-line:no-input-rename\n  @Input('trigger-text') triggerText: string;\n\n  // tslint:disable-next-line:no-input-rename\n  @Input('trigger-style') triggerStyle: string;\n\n  // tslint:disable-next-line:no-input-rename\n  @Input('tb-help-popup-placement') helpPopupPlacement: PopoverPlacement;\n\n  // tslint:disable-next-line:no-input-rename\n  @Input('tb-help-popup-style') helpPopupStyle: { [klass: string]: any } = {};\n\n  popoverVisible = false;\n  popoverReady = true;\n\n  triggerSafeHtml: SafeHtml = null;\n  textMode = false;\n\n  constructor(private viewContainerRef: ViewContainerRef,\n              private element: ElementRef<HTMLElement>,\n              private sanitizer: DomSanitizer,\n              private renderer: Renderer2,\n              private popoverService: TbPopoverService) {\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (isDefinedAndNotNull(this.triggerText)) {\n      this.triggerSafeHtml = this.sanitizer.bypassSecurityTrustHtml(this.triggerText);\n    } else {\n      this.triggerSafeHtml = null;\n    }\n    this.textMode = this.triggerSafeHtml != null;\n  }\n\n  toggleHelp() {\n    const trigger = this.textMode ? this.toggleHelpTextButton.nativeElement : this.toggleHelpButton.nativeElement;\n    this.popoverService.toggleHelpPopover(trigger, this.renderer, this.viewContainerRef,\n      this.helpId,\n      this.helpContent,\n      (visible) => {\n        this.popoverVisible = visible;\n      }, (ready => {\n        this.popoverReady = ready;\n      }),\n      this.helpPopupPlacement,\n      {},\n      this.helpPopupStyle);\n  }\n\n  ngOnDestroy(): void {\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<fieldset class=\"tb-help-popup-button-container\" *ngIf=\"!textMode\">\n  <div #toggleHelpButton\n       matTooltip=\"{{'help.show-help' | translate}}\"\n       matTooltipPosition=\"above\"\n       style=\"border-radius: 50%\"\n       (click)=\"toggleHelp()\">\n    <button mat-icon-button\n            color=\"primary\"\n            class=\"tb-help-popup-button tb-mat-32\"\n            type=\"button\">\n      <mat-icon class=\"material-icons\">{{popoverVisible ? 'help' : 'help_outline'}}</mat-icon>\n      <mat-spinner *ngIf=\"popoverVisible && !popoverReady\" class=\"tb-help-popup-button-loading\" mode=\"indeterminate\" diameter=\"20\" strokeWidth=\"2\"></mat-spinner>\n    </button>\n  </div>\n</fieldset>\n<fieldset class=\"tb-help-popup-button-container\" *ngIf=\"textMode\">\n  <div #toggleHelpTextButton\n       (click)=\"toggleHelp()\">\n    <button mat-button\n            color=\"primary\"\n            class=\"tb-help-popup-text-button\"\n            [ngClass]=\"{'mat-stroked-button': popoverVisible && popoverReady}\">\n      <ng-container *ngIf=\"triggerSafeHtml\">\n        <span [style]=\"triggerStyle\" [innerHTML]=\"triggerSafeHtml\"></span>\n      </ng-container>\n      <mat-icon *ngIf=\"!popoverVisible || popoverReady\" class=\"tb-mat-16\">open_in_new</mat-icon>\n      <mat-spinner *ngIf=\"popoverVisible && !popoverReady\" mode=\"indeterminate\" diameter=\"16\" strokeWidth=\"2\"></mat-spinner>\n    </button>\n  </div>\n</fieldset>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { ActionReducer, INIT, UPDATE } from '@ngrx/store';\n\nimport { LocalStorageService } from '../local-storage/local-storage.service';\nimport { AppState } from '../core.state';\n\nexport function initStateFromLocalStorage(\n  reducer: ActionReducer<AppState>\n): ActionReducer<AppState> {\n  return (state, action) => {\n    const newState = reducer(state, action);\n    if ([INIT.toString(), UPDATE.toString()].includes(action.type)) {\n      return { ...newState, ...LocalStorageService.loadInitialState() };\n    }\n    return newState;\n  };\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport {\n  MESSAGE_FORMAT_CONFIG,\n  MessageFormatConfig,\n  TranslateMessageFormatCompiler\n} from 'ngx-translate-messageformat-compiler';\nimport { Inject, Injectable, Optional } from '@angular/core';\nimport messageFormatParser from 'messageformat-parser';\n\n@Injectable({ providedIn: 'root' })\nexport class TranslateDefaultCompiler extends TranslateMessageFormatCompiler {\n\n  constructor(\n    @Optional()\n    @Inject(MESSAGE_FORMAT_CONFIG)\n      config?: MessageFormatConfig\n  ) {\n    super(config);\n  }\n\n  public compile(value: string, lang: string): (params: any) => string {\n    return this.defaultCompile(value, lang);\n  }\n\n  public compileTranslations(translations: any, lang: string): any {\n    return this.defaultCompile(translations, lang);\n  }\n\n  private defaultCompile(src: any, lang: string): any {\n    if (typeof src !== 'object') {\n      if (this.checkIsPlural(src)) {\n        return super.compile(src, lang);\n      } else {\n        return src;\n      }\n    } else {\n      const result = {};\n      for (const key of Object.keys(src)) {\n        result[key] = this.defaultCompile(src[key], lang);\n      }\n      return result;\n    }\n  }\n\n  private checkIsPlural(src: string): boolean {\n    let tokens: any[];\n    try {\n      tokens = messageFormatParser.parse(src.replace(/\\{\\{/g, '{').replace(/\\}\\}/g, '}'),\n        {cardinal: [], ordinal: []});\n    } catch (e) {\n      console.warn(`Failed to parse source: ${src}`);\n      console.error(e);\n      return false;\n    }\n    const res = tokens.filter(\n      (value) => typeof value !== 'string' && value.type === 'plural'\n    );\n    return res.length > 0;\n  }\n\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { AuthPayload, AuthState } from './auth.models';\nimport { AuthActions, AuthActionTypes } from './auth.actions';\n\nconst emptyUserAuthState: AuthPayload = {\n  authUser: null,\n  userDetails: null,\n  userTokenAccessEnabled: false,\n  forceFullscreen: false,\n  allowedDashboardIds: [],\n  edgesSupportEnabled: false\n};\n\nexport const initialState: AuthState = {\n  isAuthenticated: false,\n  isUserLoaded: false,\n  lastPublicDashboardId: null,\n  ...emptyUserAuthState\n};\n\nexport function authReducer(\n  state: AuthState = initialState,\n  action: AuthActions\n): AuthState {\n  switch (action.type) {\n    case AuthActionTypes.AUTHENTICATED:\n      return { ...state, isAuthenticated: true, ...action.payload };\n\n    case AuthActionTypes.UNAUTHENTICATED:\n      return { ...state, isAuthenticated: false, ...emptyUserAuthState };\n\n    case AuthActionTypes.LOAD_USER:\n      return { ...state, ...action.payload, isAuthenticated: action.payload.isUserLoaded ? state.isAuthenticated : false,\n        ...action.payload.isUserLoaded ? {} : emptyUserAuthState };\n\n    case AuthActionTypes.UPDATE_USER_DETAILS:\n      return { ...state, ...action.payload};\n\n    case AuthActionTypes.UPDATE_LAST_PUBLIC_DASHBOARD_ID:\n      return { ...state, ...action.payload};\n\n    default:\n      return state;\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport {\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  forwardRef, Injector,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit, Renderer2,\n  SimpleChanges,\n  ViewChild, ViewContainerRef,\n  ViewEncapsulation\n} from '@angular/core';\nimport { ControlValueAccessor, FormControl, NG_VALIDATORS, NG_VALUE_ACCESSOR, Validator } from '@angular/forms';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { deepClone, isString } from '@app/core/utils';\nimport { TranslateService } from '@ngx-translate/core';\nimport { JsonFormProps } from './react/json-form.models';\nimport inspector from 'schema-inspector';\nimport * as tinycolor_ from 'tinycolor2';\nimport { DialogService } from '@app/core/services/dialog.service';\n// import * as React from 'react';\n// import * as ReactDOM from 'react-dom';\n// import ReactSchemaForm from './react/json-form-react';\nimport JsonFormUtils from './react/json-form-utils';\nimport { JsonFormComponentData } from './json-form-component.models';\nimport { GroupInfo } from '@shared/models/widget.models';\nimport { Observable } from 'rxjs/internal/Observable';\nimport { forkJoin, from } from 'rxjs';\nimport { MouseEvent } from 'react';\nimport { TbPopoverService } from '@shared/components/popover.service';\n\nconst tinycolor = tinycolor_;\n\n@Component({\n  selector: 'tb-json-form',\n  templateUrl: './json-form.component.html',\n  styleUrls: ['./json-form.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => JsonFormComponent),\n      multi: true\n    },\n    {\n      provide: NG_VALIDATORS,\n      useExisting: forwardRef(() => JsonFormComponent),\n      multi: true,\n    }\n  ],\n  encapsulation: ViewEncapsulation.None\n})\nexport class JsonFormComponent implements OnInit, ControlValueAccessor, Validator, OnChanges, OnDestroy {\n\n  @ViewChild('reactRoot', {static: true})\n  reactRootElmRef: ElementRef<HTMLElement>;\n\n  private readonlyValue: boolean;\n  get readonly(): boolean {\n    return this.readonlyValue;\n  }\n  @Input()\n  set required(value: boolean) {\n    this.readonlyValue = coerceBooleanProperty(value);\n  }\n\n  formProps: JsonFormProps = {\n    isFullscreen: false,\n    option: {\n      formDefaults: {\n        startEmpty: true\n      }\n    },\n    onModelChange: this.onModelChange.bind(this),\n    onColorClick: this.onColorClick.bind(this),\n    onIconClick: this.onIconClick.bind(this),\n    onToggleFullscreen: this.onToggleFullscreen.bind(this),\n    onHelpClick: this.onHelpClick.bind(this)\n  };\n\n  data: JsonFormComponentData;\n\n  model: any;\n  schema: any;\n  form: any;\n  groupInfoes: GroupInfo[];\n\n  isModelValid = true;\n\n  isFullscreen = false;\n  targetFullscreenElement: HTMLElement;\n  fullscreenFinishFn: () => void;\n\n  private propagateChange = null;\n  private propagateChangePending = false;\n  private writingValue = false;\n  private updateViewPending = false;\n\n  constructor(public elementRef: ElementRef,\n              private translate: TranslateService,\n              private dialogs: DialogService,\n              private popoverService: TbPopoverService,\n              private renderer: Renderer2,\n              private viewContainerRef: ViewContainerRef,\n              protected store: Store<AppState>,\n              private cd: ChangeDetectorRef) {\n  }\n\n  ngOnInit(): void {\n  }\n\n  ngOnDestroy(): void {\n    this.destroyReactSchemaForm();\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n    if (this.propagateChangePending) {\n      this.propagateChangePending = false;\n      setTimeout(() => {\n        this.propagateChange(this.data);\n      }, 0);\n    }\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n  }\n\n  public validate(c: FormControl) {\n    return this.isModelValid ? null : {\n      modelValid: false\n    };\n  }\n\n  writeValue(data: JsonFormComponentData): void {\n    this.writingValue = true;\n    this.data = data;\n    this.schema = this.data && this.data.schema ? deepClone(this.data.schema) : {\n      type: 'object'\n    };\n    this.schema.strict = true;\n    this.form = this.data && this.data.form ? deepClone(this.data.form) : [ '*' ];\n    this.groupInfoes = this.data && this.data.groupInfoes ? deepClone(this.data.groupInfoes) : [];\n    this.model = this.data && this.data.model || {};\n    this.model = inspector.sanitize(this.schema, this.model).data;\n    this.updateAndRender();\n    this.isModelValid = this.validateModel();\n    this.writingValue = false;\n    if (!this.isModelValid || this.updateViewPending) {\n      this.updateView();\n    }\n}\n\n  updateView() {\n    if (!this.writingValue) {\n      this.updateViewPending = false;\n      if (this.data) {\n        this.data.model = this.model;\n        if (this.propagateChange) {\n          try {\n            this.propagateChange(this.data);\n          } catch (e) {\n            this.propagateChangePending = true;\n          }\n        } else {\n          this.propagateChangePending = true;\n        }\n      }\n    } else {\n      this.updateViewPending = true;\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    for (const propName of Object.keys(changes)) {\n      const change = changes[propName];\n      if (!change.firstChange && change.currentValue !== change.previousValue) {\n        if (propName === 'readonly') {\n          this.updateAndRender();\n        }\n      }\n    }\n  }\n\n  private onModelChange(key: (string | number)[], val: any, forceUpdate = false) {\n    if (isString(val) && val === '') {\n      val = undefined;\n    }\n    if (JsonFormUtils.updateValue(key, this.model, val) || forceUpdate) {\n      this.isModelValid = this.validateModel();\n      this.updateView();\n    }\n  }\n\n  private onColorClick(key: (string | number)[],\n                       val: tinycolor.ColorFormats.RGBA,\n                       colorSelectedFn: (color: tinycolor.ColorFormats.RGBA) => void) {\n    this.dialogs.colorPicker(tinycolor(val).toRgbString()).subscribe((color) => {\n      if (colorSelectedFn) {\n        colorSelectedFn(tinycolor(color).toRgb());\n      }\n    });\n  }\n\n  private onIconClick(key: (string | number)[],\n                      val: string,\n                      iconSelectedFn: (icon: string) => void) {\n    this.dialogs.materialIconPicker(val).subscribe((icon) => {\n      if (icon && iconSelectedFn) {\n        iconSelectedFn(icon);\n      }\n    });\n  }\n\n  private onToggleFullscreen(element: HTMLElement, fullscreenFinishFn?: () => void) {\n    this.targetFullscreenElement = element;\n    this.isFullscreen = !this.isFullscreen;\n    this.fullscreenFinishFn = fullscreenFinishFn;\n    this.cd.markForCheck();\n  }\n\n  onFullscreenChanged(fullscreen: boolean) {\n    this.formProps.isFullscreen = fullscreen;\n    this.renderReactSchemaForm(false);\n    if (this.fullscreenFinishFn) {\n      this.fullscreenFinishFn();\n      this.fullscreenFinishFn = null;\n    }\n  }\n\n  private onHelpClick(event: MouseEvent, helpId: string, helpVisibleFn: (visible: boolean) => void, helpReadyFn: (ready: boolean) => void) {\n    const trigger = event.currentTarget as Element;\n    this.popoverService.toggleHelpPopover(trigger, this.renderer, this.viewContainerRef, helpId, '', helpVisibleFn, helpReadyFn);\n  }\n\n  private updateAndRender() {\n\n    this.formProps.option.formDefaults.readonly = this.readonly;\n    this.formProps.schema = this.schema;\n    this.formProps.form = this.form;\n    this.formProps.groupInfoes = this.groupInfoes;\n    this.formProps.model = this.model;\n    this.renderReactSchemaForm();\n  }\n\n  private renderReactSchemaForm(destroy: boolean = true) {\n    if (destroy) {\n      this.destroyReactSchemaForm();\n    }\n\n    // import ReactSchemaForm from './react/json-form-react';\n    const reactSchemaFormObservables: Observable<any>[] = [];\n    reactSchemaFormObservables.push(from(import('react')));\n    reactSchemaFormObservables.push(from(import('react-dom')));\n    reactSchemaFormObservables.push(from(import('./react/json-form-react')));\n    forkJoin(reactSchemaFormObservables).subscribe(\n      (modules) => {\n        const react =  modules[0];\n        const reactDom =  modules[1];\n        const jsonFormReact = modules[2].default;\n        reactDom.render(react.createElement(jsonFormReact, this.formProps), this.reactRootElmRef.nativeElement);\n      }\n    );\n    /* import('./react/json-form-react').then(\n      (mod) => {\n        ReactDOM.render(React.createElement(mod.default, this.formProps), this.reactRootElmRef.nativeElement);\n      }\n    );*/\n    // ReactDOM.render(React.createElement(ReactSchemaForm, this.formProps), this.reactRootElmRef.nativeElement);\n  }\n\n  private destroyReactSchemaForm() {\n    import('react-dom').then(\n      (reactDom) => {\n        reactDom.unmountComponentAtNode(this.reactRootElmRef.nativeElement);\n      }\n    );\n    // ReactDOM.unmountComponentAtNode(this.reactRootElmRef.nativeElement);\n  }\n\n  private validateModel(): boolean {\n    if (this.schema && this.model) {\n      return JsonFormUtils.validateBySchema(this.schema, this.model).valid;\n    }\n    return true;\n  }\n}\n\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<div class=\"tb-json-form\" style=\"background: #fff;\" tb-fullscreen [fullscreenElement]=\"targetFullscreenElement\"\n     [fullscreen]=\"isFullscreen\"\n     (fullscreenChanged)=\"onFullscreenChanged($event)\">\n  <div #reactRoot></div>\n</div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport {\n  AfterViewInit,\n  Component,\n  Directive,\n  ElementRef,\n  Inject,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  SimpleChanges,\n  ViewEncapsulation\n} from '@angular/core';\nimport { WINDOW } from '@core/services/window.service';\nimport { CanColorCtor, mixinColor } from '@angular/material/core';\nimport { ResizeObserver } from '@juggle/resize-observer';\n\nexport declare type FabToolbarDirection = 'left' | 'right';\n\nclass MatFabToolbarBase {\n  // tslint:disable-next-line:variable-name\n  constructor(public _elementRef: ElementRef) {}\n}\nconst MatFabToolbarMixinBase: CanColorCtor & typeof MatFabToolbarBase = mixinColor(MatFabToolbarBase);\n\n@Directive({\n  // tslint:disable-next-line:directive-selector\n  selector: 'mat-fab-trigger'\n})\nexport class FabTriggerDirective {\n\n  constructor(private el: ElementRef<HTMLElement>) {\n  }\n\n}\n\n@Directive({\n  // tslint:disable-next-line:directive-selector\n  selector: 'mat-fab-actions'\n})\nexport class FabActionsDirective implements OnInit {\n\n  constructor(private el: ElementRef<HTMLElement>) {\n  }\n\n  ngOnInit(): void {\n    const element = $(this.el.nativeElement);\n    const children = element.children();\n    children.wrap('<div class=\"mat-fab-action-item\">');\n  }\n\n}\n\n// @dynamic\n@Component({\n  // tslint:disable-next-line:component-selector\n  selector: 'mat-fab-toolbar',\n  templateUrl: './fab-toolbar.component.html',\n  styleUrls: ['./fab-toolbar.component.scss'],\n  inputs: ['color'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class FabToolbarComponent extends MatFabToolbarMixinBase implements OnInit, OnDestroy, AfterViewInit, OnChanges {\n\n  private fabToolbarResize$: ResizeObserver;\n\n  @Input()\n  isOpen: boolean;\n\n  @Input()\n  direction: FabToolbarDirection;\n\n  constructor(private el: ElementRef<HTMLElement>,\n              @Inject(WINDOW) private window: Window) {\n    super(el);\n  }\n\n  ngOnInit(): void {\n    const element = $(this.el.nativeElement);\n    element.addClass('mat-fab-toolbar');\n    element.find('mat-fab-trigger').find('button')\n      .prepend('<div class=\"mat-fab-toolbar-background\"></div>');\n    element.addClass(`mat-${this.direction}`);\n    this.fabToolbarResize$ = new ResizeObserver(() => {\n      this.onFabToolbarResize();\n    });\n    this.fabToolbarResize$.observe(this.el.nativeElement);\n  }\n\n  ngOnDestroy(): void {\n    this.fabToolbarResize$.disconnect();\n  }\n\n  ngAfterViewInit(): void {\n    this.triggerOpenClose(true);\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    for (const propName of Object.keys(changes)) {\n      const change = changes[propName];\n      if (!change.firstChange && change.currentValue !== change.previousValue) {\n        if (propName === 'isOpen') {\n          this.triggerOpenClose();\n        }\n      }\n    }\n  }\n\n  private onFabToolbarResize() {\n    if (this.isOpen) {\n      this.triggerOpenClose(true);\n    }\n  }\n\n  private triggerOpenClose(disableAnimation?: boolean): void {\n    const el = this.el.nativeElement;\n    const element = $(this.el.nativeElement);\n    if (disableAnimation) {\n      element.removeClass('mat-animation');\n    } else {\n      element.addClass('mat-animation');\n    }\n    const backgroundElement: HTMLElement = el.querySelector('.mat-fab-toolbar-background');\n    const triggerElement: HTMLElement = el.querySelector('mat-fab-trigger button');\n    const toolbarElement: HTMLElement = el.querySelector('mat-toolbar');\n    const iconElement: HTMLElement = el.querySelector('mat-fab-trigger button mat-icon');\n    const actions = element.find<HTMLElement>('mat-fab-actions').children();\n    if (triggerElement && backgroundElement) {\n      const width = el.offsetWidth;\n      const scale = 2 * (width / triggerElement.offsetWidth);\n\n      backgroundElement.style.borderRadius = width + 'px';\n\n      if (this.isOpen) {\n        element.addClass('mat-is-open');\n        toolbarElement.style.pointerEvents = 'inherit';\n\n        backgroundElement.style.width = triggerElement.offsetWidth + 'px';\n        backgroundElement.style.height = triggerElement.offsetHeight + 'px';\n        backgroundElement.style.transform = 'scale(' + scale + ')';\n\n        backgroundElement.style.transitionDelay = '0ms';\n        if (iconElement) {\n          iconElement.style.transitionDelay = disableAnimation ? '0ms' : '.3s';\n        }\n\n        actions.each((index, action) => {\n          action.style.transitionDelay = disableAnimation ? '0ms' : ((actions.length - index) * 25 + 'ms');\n        });\n\n      } else {\n        element.removeClass('mat-is-open');\n        toolbarElement.style.pointerEvents = 'none';\n\n        backgroundElement.style.transform = 'scale(1)';\n\n        backgroundElement.style.top = '0';\n\n        if (element.hasClass('mat-right')) {\n          backgroundElement.style.left = '0';\n          backgroundElement.style.right = null;\n        }\n\n        if (element.hasClass('mat-left')) {\n          backgroundElement.style.right = '0';\n          backgroundElement.style.left = null;\n        }\n\n        backgroundElement.style.transitionDelay = disableAnimation ? '0ms' : '200ms';\n\n        actions.each((index, action) => {\n          action.style.transitionDelay = (disableAnimation ? 0 : 200) + (index * 25) + 'ms';\n        });\n      }\n    }\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<div class=\"mat-fab-toolbar-wrapper\">\n  <div class=\"mat-fab-toolbar-content\">\n    <ng-content></ng-content>\n  </div>\n</div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Directive, OnDestroy } from '@angular/core';\nimport { select, Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { Observable, Subscription } from 'rxjs';\nimport { selectIsLoading } from '@core/interceptors/load.selectors';\nimport { delay, share } from 'rxjs/operators';\nimport { AbstractControl } from '@angular/forms';\n\n@Directive()\nexport abstract class PageComponent implements OnDestroy {\n\n  isLoading$: Observable<boolean>;\n  loadingSubscription: Subscription;\n  disabledOnLoadFormControls: Array<AbstractControl> = [];\n\n  protected constructor(protected store: Store<AppState>) {\n    this.isLoading$ = this.store.pipe(delay(0), select(selectIsLoading), share());\n  }\n\n  protected registerDisableOnLoadFormControl(control: AbstractControl) {\n    this.disabledOnLoadFormControls.push(control);\n    if (!this.loadingSubscription) {\n      this.loadingSubscription = this.isLoading$.subscribe((isLoading) => {\n        for (const formControl of this.disabledOnLoadFormControls) {\n          if (isLoading) {\n            formControl.disable({emitEvent: false});\n          } else {\n            formControl.enable({emitEvent: false});\n          }\n        }\n      });\n    }\n  }\n\n  ngOnDestroy(): void {\n    if (this.loadingSubscription) {\n      this.loadingSubscription.unsubscribe();\n    }\n  }\n\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { MatDialog, MatDialogConfig } from '@angular/material/dialog';\nimport { TranslateService } from '@ngx-translate/core';\nimport { AuthService } from '@core/auth/auth.service';\nimport {\n  ColorPickerDialogComponent,\n  ColorPickerDialogData\n} from '@shared/components/dialog/color-picker-dialog.component';\nimport {\n  MaterialIconsDialogComponent,\n  MaterialIconsDialogData\n} from '@shared/components/dialog/material-icons-dialog.component';\nimport { ConfirmDialogComponent } from '@shared/components/dialog/confirm-dialog.component';\nimport { AlertDialogComponent } from '@shared/components/dialog/alert-dialog.component';\nimport { TodoDialogComponent } from '@shared/components/dialog/todo-dialog.component';\n\n@Injectable(\n  {\n    providedIn: 'root'\n  }\n)\nexport class DialogService {\n\n  constructor(\n    private translate: TranslateService,\n    private authService: AuthService,\n    public dialog: MatDialog\n  ) {\n  }\n\n  confirm(title: string, message: string, cancel: string = null, ok: string = null, fullscreen: boolean = false): Observable<boolean> {\n    const dialogConfig: MatDialogConfig = {\n      disableClose: true,\n      data: {\n        title,\n        message,\n        cancel: cancel || this.translate.instant('action.cancel'),\n        ok: ok || this.translate.instant('action.ok')\n      }\n    };\n    if (fullscreen) {\n      dialogConfig.panelClass = ['tb-fullscreen-dialog'];\n    }\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, dialogConfig);\n    return dialogRef.afterClosed();\n  }\n\n  alert(title: string, message: string, ok: string = null, fullscreen: boolean = false): Observable<boolean> {\n    const dialogConfig: MatDialogConfig = {\n      disableClose: true,\n      data: {\n        title,\n        message,\n        ok: ok || this.translate.instant('action.ok')\n      }\n    };\n    if (fullscreen) {\n      dialogConfig.panelClass = ['tb-fullscreen-dialog'];\n    }\n    const dialogRef = this.dialog.open(AlertDialogComponent, dialogConfig);\n    return dialogRef.afterClosed();\n  }\n\n  colorPicker(color: string): Observable<string> {\n    return this.dialog.open<ColorPickerDialogComponent, ColorPickerDialogData, string>(ColorPickerDialogComponent,\n      {\n        disableClose: true,\n        panelClass: ['tb-dialog', 'tb-fullscreen-dialog'],\n        data: {\n          color\n        }\n    }).afterClosed();\n  }\n\n  materialIconPicker(icon: string): Observable<string> {\n    return this.dialog.open<MaterialIconsDialogComponent, MaterialIconsDialogData, string>(MaterialIconsDialogComponent,\n      {\n        disableClose: true,\n        panelClass: ['tb-dialog', 'tb-fullscreen-dialog'],\n        data: {\n          icon\n        }\n      }).afterClosed();\n  }\n\n  private permissionDenied() {\n    this.alert(\n      this.translate.instant('access.permission-denied'),\n      this.translate.instant('access.permission-denied-text'),\n      this.translate.instant('action.close')\n    );\n  }\n\n  forbidden(): Observable<boolean> {\n    const observable = this.confirm(\n      this.translate.instant('access.access-forbidden'),\n      this.translate.instant('access.access-forbidden-text'),\n      this.translate.instant('action.cancel'),\n      this.translate.instant('action.sign-in'),\n      true\n    );\n    observable.subscribe((res) => {\n      if (res) {\n        this.authService.logout();\n      }\n    });\n    return observable;\n  }\n\n  todo(): Observable<any> {\n    const dialogConfig: MatDialogConfig = {\n      disableClose: true,\n      panelClass: ['tb-fullscreen-dialog']\n    };\n    const dialogRef = this.dialog.open(TodoDialogComponent, dialogConfig);\n    return dialogRef.afterClosed();\n  }\n\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { AfterViewInit, Component, Inject, OnInit, QueryList, ViewChildren } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { Router } from '@angular/router';\nimport { DialogComponent } from '@shared/components/dialog.component';\nimport { UtilsService } from '@core/services/utils.service';\nimport { FormControl } from '@angular/forms';\nimport { merge, Observable, of } from 'rxjs';\nimport { delay, map, mapTo, mergeMap, share, startWith, tap } from 'rxjs/operators';\n\nexport interface MaterialIconsDialogData {\n  icon: string;\n}\n\n@Component({\n  selector: 'tb-material-icons-dialog',\n  templateUrl: './material-icons-dialog.component.html',\n  providers: [],\n  styleUrls: ['./material-icons-dialog.component.scss']\n})\nexport class MaterialIconsDialogComponent extends DialogComponent<MaterialIconsDialogComponent, string>\n  implements OnInit, AfterViewInit {\n\n  @ViewChildren('iconButtons') iconButtons: QueryList<HTMLElement>;\n\n  selectedIcon: string;\n  icons$: Observable<Array<string>>;\n  loadingIcons$: Observable<boolean>;\n\n  showAllControl: FormControl;\n\n  constructor(protected store: Store<AppState>,\n              protected router: Router,\n              @Inject(MAT_DIALOG_DATA) public data: MaterialIconsDialogData,\n              private utils: UtilsService,\n              public dialogRef: MatDialogRef<MaterialIconsDialogComponent, string>) {\n    super(store, router, dialogRef);\n    this.selectedIcon = data.icon;\n    this.showAllControl = new FormControl(false);\n  }\n\n  ngOnInit(): void {\n    this.icons$ = this.showAllControl.valueChanges.pipe(\n      map((showAll) => {\n        return {firstTime: false, showAll};\n      }),\n      startWith<{firstTime: boolean, showAll: boolean}>({firstTime: true, showAll: false}),\n      mergeMap((data) => {\n        if (data.showAll) {\n          return this.utils.getMaterialIcons().pipe(delay(100));\n        } else {\n          const res = of(this.utils.getCommonMaterialIcons());\n          return data.firstTime ? res : res.pipe(delay(50));\n        }\n      }),\n      share()\n    );\n  }\n\n  ngAfterViewInit(): void {\n    this.loadingIcons$ = merge(\n      this.showAllControl.valueChanges.pipe(\n        mapTo(true),\n      ),\n      this.iconButtons.changes.pipe(\n        delay(100),\n        mapTo( false),\n      )\n    ).pipe(\n      tap((loadingIcons) => {\n        if (loadingIcons) {\n          this.showAllControl.disable({emitEvent: false});\n        } else {\n          this.showAllControl.enable({emitEvent: false});\n        }\n      }),\n      share()\n    );\n  }\n\n  selectIcon(icon: string) {\n    this.dialogRef.close(icon);\n  }\n\n  cancel(): void {\n    this.dialogRef.close(null);\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<form class=\"tb-material-icons-dialog\" style=\"min-width: 600px;\">\n  <mat-toolbar fxLayout=\"row\" color=\"primary\">\n    <h2>{{ 'icon.select-icon' | translate }}</h2>\n    <span fxFlex></span>\n    <section fxLayout=\"row\" fxLayoutAlign=\"start center\" fxLayoutGap=\"8px\">\n      <mat-slide-toggle [formControl]=\"showAllControl\">\n      </mat-slide-toggle>\n      <label translate>icon.show-all</label>\n    </section>\n    <button mat-button mat-icon-button\n            (click)=\"cancel()\"\n            type=\"button\">\n      <mat-icon class=\"material-icons\">close</mat-icon>\n    </button>\n  </mat-toolbar>\n  <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\">\n  </mat-progress-bar>\n  <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n  <div class=\"tb-absolute-fill tb-icons-load\" *ngIf=\"loadingIcons$ | async\" fxLayout=\"column\" fxLayoutAlign=\"center center\">\n    <mat-spinner color=\"accent\" mode=\"indeterminate\" diameter=\"40\"></mat-spinner>\n  </div>\n  <div mat-dialog-content>\n    <div class=\"mat-content mat-padding\" fxLayout=\"column\">\n      <fieldset [disabled]=\"(isLoading$ | async)\">\n        <ng-template ngFor let-icon [ngForOf]=\"icons$ | async\" let-last=\"last\">\n          <ng-container #iconButtons>\n            <button *ngIf=\"icon === selectedIcon\"\n                    class=\"tb-select-icon-button\"\n                    mat-button mat-icon-button\n                    mat-raised-button\n                    color=\"primary\"\n                    (click)=\"selectIcon(icon)\"\n                    matTooltip=\"{{ icon }}\"\n                    matTooltipPosition=\"above\"\n                    type=\"button\">\n              <mat-icon>{{icon}}</mat-icon>\n            </button>\n            <button *ngIf=\"icon !== selectedIcon\"\n                    class=\"tb-select-icon-button\"\n                    mat-button mat-icon-button\n                    (click)=\"selectIcon(icon)\"\n                    matTooltip=\"{{ icon }}\"\n                    matTooltipPosition=\"above\"\n                    type=\"button\">\n              <mat-icon>{{icon}}</mat-icon>\n            </button>\n          </ng-container>\n        </ng-template>\n      </fieldset>\n    </div>\n  </div>\n  <div mat-dialog-actions fxLayout=\"row\">\n    <span fxFlex></span>\n    <button mat-button\n            type=\"button\"\n            [disabled]=\"(isLoading$ | async)\"\n            (click)=\"cancel()\">\n      {{ 'action.cancel' | translate }}\n    </button>\n  </div>\n</form>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport 'hammerjs';\n\nimport { Component, OnInit } from '@angular/core';\n\nimport { environment as env } from '@env/environment';\n\nimport { TranslateService } from '@ngx-translate/core';\nimport { select, Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { LocalStorageService } from '@core/local-storage/local-storage.service';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { MatIconRegistry } from '@angular/material/icon';\nimport { combineLatest } from 'rxjs';\nimport { selectIsAuthenticated, selectIsUserLoaded } from '@core/auth/auth.selectors';\nimport { distinctUntilChanged, filter, map, skip } from 'rxjs/operators';\nimport { AuthService } from '@core/auth/auth.service';\n\n@Component({\n  selector: 'tb-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent implements OnInit {\n\n  constructor(private store: Store<AppState>,\n              private storageService: LocalStorageService,\n              private translate: TranslateService,\n              private matIconRegistry: MatIconRegistry,\n              private domSanitizer: DomSanitizer,\n              private authService: AuthService) {\n\n    console.log(`ThingsBoard Version: ${env.tbVersion}`);\n\n    this.matIconRegistry.addSvgIconSetInNamespace('mdi',\n      this.domSanitizer.bypassSecurityTrustResourceUrl('./assets/mdi.svg'));\n\n    this.matIconRegistry.addSvgIconLiteral(\n      'google-logo',\n      this.domSanitizer.bypassSecurityTrustHtml(\n        '<svg viewBox=\"0 0 48 48\"><path fill=\"#EA4335\" d=\"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z\"/><path fill=\"#4285F4\" d=\"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z\"/><path fill=\"#FBBC05\" d=\"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z\"/><path fill=\"#34A853\" d=\"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z\"/><path fill=\"none\" d=\"M0 0h48v48H0z\"/></svg>'\n      )\n    );\n\n    this.matIconRegistry.addSvgIconLiteral(\n      'github-logo',\n      this.domSanitizer.bypassSecurityTrustHtml(\n        '<svg viewBox=\"0 0 32.7 32.7\"><path d=\"M16.3 0C7.3 0 0 7.3 0 16.3c0 7.2 4.7 13.3 11.1 15.5.8.1 1.1-.4 1.1-.8v-2.8c-4.5 1-5.5-2.2-5.5-2.2-.7-1.9-1.8-2.4-1.8-2.4-1.5-1 .1-1 .1-1 1.6.1 2.5 1.7 2.5 1.7 1.5 2.5 3.8 1.8 4.7 1.4.1-1.1.6-1.8 1-2.2-3.6-.4-7.4-1.8-7.4-8.1 0-1.8.6-3.2 1.7-4.4-.2-.4-.7-2.1.2-4.3 0 0 1.4-.4 4.5 1.7 1.3-.4 2.7-.5 4.1-.5s2.8.2 4.1.5c3.1-2.1 4.5-1.7 4.5-1.7.9 2.2.3 3.9.2 4.3 1 1.1 1.7 2.6 1.7 4.4 0 6.3-3.8 7.6-7.4 8 .6.5 1.1 1.5 1.1 3v4.5c0 .4.3.9 1.1.8 6.5-2.2 11.1-8.3 11.1-15.5C32.6 7.3 25.3 0 16.3 0z\" fill=\"#211c19\"/></svg>'\n      )\n    );\n\n    this.matIconRegistry.addSvgIconLiteral(\n      'facebook-logo',\n      this.domSanitizer.bypassSecurityTrustHtml(\n        '<svg viewBox=\"0 0 263 263\"><path d=\"M263 131.5C263 58.9 204.1 0 131.5 0S0 58.9 0 131.5c0 65.6 48.1 120 110.9 129.9v-91.9H77.5v-38h33.4v-29c0-33 19.6-51.2 49.7-51.2 14.4 0 29.4 2.6 29.4 2.6v32.4h-16.5c-16.3 0-21.4 10.1-21.4 20.5v24.7h36.4l-5.8 38h-30.6v91.9c62.8-9.9 110.9-64.3 110.9-129.9z\" fill=\"#1877f2\"/><path d=\"M182.7 169.5l5.8-38H152v-24.7c0-10.4 5.1-20.5 21.4-20.5H190V53.9s-15-2.6-29.4-2.6c-30 0-49.7 18.2-49.7 51.2v29H77.5v38h33.4v91.9c6.7 1.1 13.6 1.6 20.5 1.6s13.9-.5 20.5-1.6v-91.9h30.8z\" fill=\"#fff\"/></svg>'\n      )\n    );\n\n    this.matIconRegistry.addSvgIconLiteral(\n      'apple-logo',\n      this.domSanitizer.bypassSecurityTrustHtml(\n        '<svg viewBox=\"0 0 256 315\"><path d=\"M213.803394,167.030943 C214.2452,214.609646 255.542482,230.442639 256,230.644727 C255.650812,231.761357 249.401383,253.208293 234.24263,275.361446 C221.138555,294.513969 207.538253,313.596333 186.113759,313.991545 C165.062051,314.379442 158.292752,301.507828 134.22469,301.507828 C110.163898,301.507828 102.642899,313.596301 82.7151126,314.379442 C62.0350407,315.16201 46.2873831,293.668525 33.0744079,274.586162 C6.07529317,235.552544 -14.5576169,164.286328 13.147166,116.18047 C26.9103111,92.2909053 51.5060917,77.1630356 78.2026125,76.7751096 C98.5099145,76.3877456 117.677594,90.4371851 130.091705,90.4371851 C142.497945,90.4371851 165.790755,73.5415029 190.277627,76.0228474 C200.528668,76.4495055 229.303509,80.1636878 247.780625,107.209389 C246.291825,108.132333 213.44635,127.253405 213.803394,167.030988 M174.239142,50.1987033 C185.218331,36.9088319 192.607958,18.4081019 190.591988,0 C174.766312,0.636050225 155.629514,10.5457909 144.278109,23.8283506 C134.10507,35.5906758 125.195775,54.4170275 127.599657,72.4607932 C145.239231,73.8255433 163.259413,63.4970262 174.239142,50.1987249\" fill=\"#000000\"></path></svg>'\n      )\n    );\n\n    this.storageService.testLocalStorage();\n\n    this.setupTranslate();\n    this.setupAuth();\n  }\n\n  setupTranslate() {\n    if (!env.production) {\n      console.log(`Supported Langs: ${env.supportedLangs}`);\n    }\n    this.translate.addLangs(env.supportedLangs);\n    if (!env.production) {\n      console.log(`Default Lang: ${env.defaultLang}`);\n    }\n    this.translate.setDefaultLang(env.defaultLang);\n  }\n\n  setupAuth() {\n    combineLatest([\n      this.store.pipe(select(selectIsAuthenticated)),\n      this.store.pipe(select(selectIsUserLoaded))]\n    ).pipe(\n      map(results => ({isAuthenticated: results[0], isUserLoaded: results[1]})),\n      distinctUntilChanged(),\n      filter((data) => data.isUserLoaded ),\n      skip(1),\n    ).subscribe((data) => {\n      this.authService.gotoDefaultPlace(data.isAuthenticated);\n    });\n    this.authService.reloadUser();\n  }\n\n  ngOnInit() {\n  }\n\n  onActivateComponent($event: any) {\n    const loadingElement = $('div#tb-loading-spinner');\n    if (loadingElement.length) {\n      loadingElement.remove();\n    }\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<!--The content below is only a placeholder and can be replaced.-->\n\n<router-outlet (activate)=\"onActivateComponent($event)\"></router-outlet>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Pipe, PipeTransform } from '@angular/core';\nimport { isString } from '@core/utils';\n\n@Pipe({ name: 'truncate' })\nexport class TruncatePipe implements PipeTransform {\n  transform(text: string, wordwise: boolean, max: any, tail: string): string {\n    if (!text) { return ''; }\n    if (isString(max)) {\n      max = parseInt(max, 10);\n    }\n    if (!max) { return text; }\n    if (text.length <= max) { return text; }\n\n    text = text.substr(0, max);\n    if (wordwise) {\n      let lastspace = text.lastIndexOf(' ');\n      if (lastspace !== -1) {\n        if (text.charAt(lastspace - 1) === '.' || text.charAt(lastspace - 1) === ',') {\n          lastspace = lastspace - 1;\n        }\n        text = text.substr(0, lastspace);\n      }\n    }\n    return text + (tail || ' …');\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Inject, Injectable } from '@angular/core';\nimport { WINDOW } from '@core/services/window.service';\nimport { isDefined } from '@core/utils';\nimport { MobileActionResult, WidgetMobileActionResult, WidgetMobileActionType } from '@shared/models/widget.models';\nimport { from, of } from 'rxjs';\nimport { Observable } from 'rxjs/internal/Observable';\nimport { catchError, tap } from 'rxjs/operators';\nimport { OpenDashboardMessage, ReloadUserMessage, WindowMessage } from '@shared/models/window-message.model';\nimport { Params, Router } from '@angular/router';\nimport { AuthService } from '@core/auth/auth.service';\n\nconst dashboardStateNameHandler = 'tbMobileDashboardStateNameHandler';\nconst dashboardLoadedHandler = 'tbMobileDashboardLoadedHandler';\nconst dashboardLayoutHandler = 'tbMobileDashboardLayoutHandler';\nconst navigationHandler = 'tbMobileNavigationHandler';\nconst mobileHandler = 'tbMobileHandler';\n\n// @dynamic\n@Injectable({\n  providedIn: 'root'\n})\nexport class MobileService {\n\n  private readonly mobileApp;\n  private readonly mobileChannel;\n\n  private readonly onWindowMessageListener = this.onWindowMessage.bind(this);\n\n  private reloadUserObservable: Observable<boolean>;\n  private lastDashboardId: string;\n  private toggleLayoutFunction: () => void;\n\n  constructor(@Inject(WINDOW) private window: Window,\n              private router: Router,\n              private authService: AuthService) {\n    const w = (this.window as any);\n    this.mobileChannel = w.flutter_inappwebview;\n    this.mobileApp = isDefined(this.mobileChannel);\n    if (this.mobileApp) {\n      window.addEventListener('message', this.onWindowMessageListener);\n    }\n  }\n\n  public isMobileApp(): boolean {\n    return this.mobileApp;\n  }\n\n  public handleDashboardStateName(name: string) {\n    if (this.mobileApp) {\n      this.mobileChannel.callHandler(dashboardStateNameHandler, name);\n    }\n  }\n\n  public onDashboardLoaded(hasRightLayout: boolean, rightLayoutOpened: boolean) {\n    if (this.mobileApp) {\n      this.mobileChannel.callHandler(dashboardLoadedHandler, hasRightLayout, rightLayoutOpened);\n    }\n  }\n\n  public onDashboardRightLayoutChanged(opened: boolean) {\n    if (this.mobileApp) {\n      this.mobileChannel.callHandler(dashboardLayoutHandler, opened);\n    }\n  }\n\n  public registerToggleLayoutFunction(toggleLayoutFunction: () => void) {\n    this.toggleLayoutFunction = toggleLayoutFunction;\n  }\n\n  public unregisterToggleLayoutFunction() {\n    this.toggleLayoutFunction = null;\n  }\n\n  public handleWidgetMobileAction<T extends MobileActionResult>(type: WidgetMobileActionType, ...args: any[]):\n    Observable<WidgetMobileActionResult<T>> {\n    if (this.mobileApp) {\n      return from(\n        this.mobileChannel.callHandler(mobileHandler, type, ...args) as Promise<WidgetMobileActionResult<T>>).pipe(\n        catchError((err: Error) => {\n          return of({\n            hasError: true,\n            error: err?.message ? err.message : `Failed to execute mobile action ${type}`\n          } as WidgetMobileActionResult<any>);\n        })\n      );\n    } else {\n      return of(null);\n    }\n  }\n\n  public handleMobileNavigation(path?: string, params?: Params) {\n    if (this.mobileApp) {\n      this.mobileChannel.callHandler(navigationHandler, path, params);\n    }\n  }\n\n  private onWindowMessage(event: MessageEvent) {\n    if (event.data) {\n      let message: WindowMessage;\n      try {\n        message = JSON.parse(event.data);\n      } catch (e) {}\n      if (message && message.type) {\n        switch (message.type) {\n          case 'openDashboardMessage':\n            const openDashboardMessage: OpenDashboardMessage = message.data;\n            this.openDashboard(openDashboardMessage);\n            break;\n          case 'reloadUserMessage':\n            const reloadUserMessage: ReloadUserMessage = message.data;\n            this.reloadUser(reloadUserMessage);\n            break;\n          case 'toggleDashboardLayout':\n            if (this.toggleLayoutFunction) {\n              this.toggleLayoutFunction();\n            }\n            break;\n        }\n      }\n    }\n  }\n\n  private openDashboard(openDashboardMessage: OpenDashboardMessage) {\n    if (openDashboardMessage && openDashboardMessage.dashboardId) {\n      if (this.reloadUserObservable) {\n        this.reloadUserObservable.subscribe(\n          (authenticated) => {\n            if (authenticated) {\n              this.doDashboardNavigation(openDashboardMessage);\n            }\n          }\n        );\n      } else {\n        this.doDashboardNavigation(openDashboardMessage);\n      }\n    }\n  }\n\n  private doDashboardNavigation(openDashboardMessage: OpenDashboardMessage) {\n    let url = `/dashboard/${openDashboardMessage.dashboardId}`;\n    const params = [];\n    if (openDashboardMessage.state) {\n      params.push(`state=${openDashboardMessage.state}`);\n    }\n    if (openDashboardMessage.embedded) {\n      params.push(`embedded=true`);\n    }\n    if (openDashboardMessage.hideToolbar) {\n      params.push(`hideToolbar=true`);\n    }\n    if (this.lastDashboardId === openDashboardMessage.dashboardId) {\n      params.push(`reload=${new Date().getTime()}`);\n    }\n    if (params.length) {\n      url += `?${params.join('&')}`;\n    }\n    this.lastDashboardId = openDashboardMessage.dashboardId;\n    this.router.navigateByUrl(url, {replaceUrl: true});\n  }\n\n  private reloadUser(reloadUserMessage: ReloadUserMessage) {\n    if (reloadUserMessage && reloadUserMessage.accessToken && reloadUserMessage.refreshToken) {\n      this.reloadUserObservable = this.authService.setUserFromJwtToken(reloadUserMessage.accessToken,\n        reloadUserMessage.refreshToken, true).pipe(\n        tap(\n          () => {\n            this.reloadUserObservable = null;\n          }\n        )\n      );\n    }\n  }\n\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  EventEmitter,\n  forwardRef,\n  Input,\n  OnInit,\n  Output,\n  ViewChild\n} from '@angular/core';\nimport { ControlValueAccessor, FormBuilder, FormGroup, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { merge, Observable, of, Subject } from 'rxjs';\nimport { catchError, debounceTime, map, share, switchMap, tap } from 'rxjs/operators';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@app/core/core.state';\nimport { TranslateService } from '@ngx-translate/core';\nimport { AliasEntityType, EntityType } from '@shared/models/entity-type.models';\nimport { BaseData } from '@shared/models/base-data';\nimport { EntityId } from '@shared/models/id/entity-id';\nimport { EntityService } from '@core/http/entity.service';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { getCurrentAuthUser } from '@core/auth/auth.selectors';\nimport { Authority } from '@shared/models/authority.enum';\nimport { isEqual } from '@core/utils';\n\n@Component({\n  selector: 'tb-entity-autocomplete',\n  templateUrl: './entity-autocomplete.component.html',\n  styleUrls: ['./entity-autocomplete.component.scss'],\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => EntityAutocompleteComponent),\n    multi: true\n  }]\n})\nexport class EntityAutocompleteComponent implements ControlValueAccessor, OnInit, AfterViewInit {\n\n  selectEntityFormGroup: FormGroup;\n\n  modelValue: string | null;\n\n  entityTypeValue: EntityType | AliasEntityType;\n\n  entitySubtypeValue: string;\n\n  @Input()\n  set entityType(entityType: EntityType) {\n    if (this.entityTypeValue !== entityType) {\n      this.entityTypeValue = entityType;\n      this.load();\n      this.reset();\n      this.refresh$.next([]);\n      this.dirty = true;\n    }\n  }\n\n  @Input()\n  set entitySubtype(entitySubtype: string) {\n    if (this.entitySubtypeValue !== entitySubtype) {\n      this.entitySubtypeValue = entitySubtype;\n      const currentEntity = this.getCurrentEntity();\n      if (currentEntity) {\n        if ((currentEntity as any).type !== this.entitySubtypeValue) {\n          this.reset();\n          this.refresh$.next([]);\n          this.dirty = true;\n        }\n      }\n      this.selectEntityFormGroup.get('entity').updateValueAndValidity();\n    }\n  }\n\n  @Input()\n  excludeEntityIds: Array<string>;\n\n  @Input()\n  labelText: string;\n\n  @Input()\n  requiredText: string;\n\n  private requiredValue: boolean;\n  get required(): boolean {\n    return this.requiredValue;\n  }\n  @Input()\n  set required(value: boolean) {\n    this.requiredValue = coerceBooleanProperty(value);\n  }\n\n  @Input()\n  disabled: boolean;\n\n  @Output()\n  entityChanged = new EventEmitter<BaseData<EntityId>>();\n\n  @ViewChild('entityInput', {static: true}) entityInput: ElementRef;\n\n  entityText: string;\n  noEntitiesMatchingText: string;\n  entityRequiredText: string;\n\n  filteredEntities: Observable<Array<BaseData<EntityId>>>;\n\n  searchText = '';\n\n  private dirty = false;\n\n  private refresh$ = new Subject<Array<BaseData<EntityId>>>();\n\n  private propagateChange = (v: any) => { };\n\n  constructor(private store: Store<AppState>,\n              public translate: TranslateService,\n              private entityService: EntityService,\n              private fb: FormBuilder) {\n    this.selectEntityFormGroup = this.fb.group({\n      entity: [null]\n    });\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  ngOnInit() {\n    this.filteredEntities = merge(\n      this.refresh$.asObservable(),\n      this.selectEntityFormGroup.get('entity').valueChanges\n        .pipe(\n          debounceTime(150),\n          tap(value => {\n            let modelValue;\n            if (typeof value === 'string' || !value) {\n              modelValue = null;\n            } else {\n              modelValue = value.id.id;\n            }\n            this.updateView(modelValue, value);\n            if (value === null) {\n              this.clear();\n            }\n          }),\n          // startWith<string | BaseData<EntityId>>(''),\n          map(value => value ? (typeof value === 'string' ? value : value.name) : ''),\n          switchMap(name => this.fetchEntities(name)),\n          share()\n        )\n    );\n  }\n\n  ngAfterViewInit(): void {}\n\n  load(): void {\n    if (this.entityTypeValue) {\n      switch (this.entityTypeValue) {\n        case EntityType.ASSET:\n          this.entityText = 'asset.asset';\n          this.noEntitiesMatchingText = 'asset.no-assets-matching';\n          this.entityRequiredText = 'asset.asset-required';\n          break;\n        case EntityType.DEVICE:\n          this.entityText = 'device.device';\n          this.noEntitiesMatchingText = 'device.no-devices-matching';\n          this.entityRequiredText = 'device.device-required';\n          break;\n        case EntityType.EDGE:\n          this.entityText = 'edge.edge';\n          this.noEntitiesMatchingText = 'edge.no-edges-matching';\n          this.entityRequiredText = 'edge.edge-required';\n          break;\n        case EntityType.ENTITY_VIEW:\n          this.entityText = 'entity-view.entity-view';\n          this.noEntitiesMatchingText = 'entity-view.no-entity-views-matching';\n          this.entityRequiredText = 'entity-view.entity-view-required';\n          break;\n        case EntityType.RULE_CHAIN:\n          this.entityText = 'rulechain.rulechain';\n          this.noEntitiesMatchingText = 'rulechain.no-rulechains-matching';\n          this.entityRequiredText = 'rulechain.rulechain-required';\n          break;\n        case EntityType.TENANT:\n        case AliasEntityType.CURRENT_TENANT:\n          this.entityText = 'tenant.tenant';\n          this.noEntitiesMatchingText = 'tenant.no-tenants-matching';\n          this.entityRequiredText = 'tenant.tenant-required';\n          break;\n        case EntityType.CUSTOMER:\n          this.entityText = 'customer.customer';\n          this.noEntitiesMatchingText = 'customer.no-customers-matching';\n          this.entityRequiredText = 'customer.customer-required';\n          break;\n        case EntityType.USER:\n        case AliasEntityType.CURRENT_USER:\n          this.entityText = 'user.user';\n          this.noEntitiesMatchingText = 'user.no-users-matching';\n          this.entityRequiredText = 'user.user-required';\n          break;\n        case EntityType.DASHBOARD:\n          this.entityText = 'dashboard.dashboard';\n          this.noEntitiesMatchingText = 'dashboard.no-dashboards-matching';\n          this.entityRequiredText = 'dashboard.dashboard-required';\n          break;\n        case EntityType.ALARM:\n          this.entityText = 'alarm.alarm';\n          this.noEntitiesMatchingText = 'alarm.no-alarms-matching';\n          this.entityRequiredText = 'alarm.alarm-required';\n          break;\n        case AliasEntityType.CURRENT_CUSTOMER:\n          this.entityText = 'customer.default-customer';\n          this.noEntitiesMatchingText = 'customer.no-customers-matching';\n          this.entityRequiredText = 'customer.default-customer-required';\n          break;\n        case AliasEntityType.CURRENT_USER_OWNER:\n          const authUser =  getCurrentAuthUser(this.store);\n          if (authUser.authority === Authority.TENANT_ADMIN) {\n            this.entityText = 'tenant.tenant';\n            this.noEntitiesMatchingText = 'tenant.no-tenants-matching';\n            this.entityRequiredText = 'tenant.tenant-required';\n          } else {\n            this.entityText = 'customer.customer';\n            this.noEntitiesMatchingText = 'customer.no-customers-matching';\n            this.entityRequiredText = 'customer.customer-required';\n          }\n          break;\n      }\n    }\n    if (this.labelText && this.labelText.length) {\n      this.entityText = this.labelText;\n    }\n    if (this.requiredText && this.requiredText.length) {\n      this.entityRequiredText = this.requiredText;\n    }\n    const currentEntity = this.getCurrentEntity();\n    if (currentEntity) {\n      const currentEntityType = currentEntity.id.entityType;\n      if (this.entityTypeValue && currentEntityType !== this.entityTypeValue) {\n        this.reset();\n      }\n    }\n  }\n\n  getCurrentEntity(): BaseData<EntityId> | null {\n    const currentEntity = this.selectEntityFormGroup.get('entity').value;\n    if (currentEntity && typeof currentEntity !== 'string') {\n      return currentEntity as BaseData<EntityId>;\n    } else {\n      return null;\n    }\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    if (this.disabled) {\n      this.selectEntityFormGroup.disable({emitEvent: false});\n    } else {\n      this.selectEntityFormGroup.enable({emitEvent: false});\n    }\n  }\n\n  async writeValue(value: string | EntityId | null): Promise<void> {\n    this.searchText = '';\n    if (value !== null && (typeof value === 'string' ||  (value.entityType && value.id))) {\n      let targetEntityType: EntityType;\n      let id: string;\n      if (typeof value === 'string') {\n        targetEntityType = this.checkEntityType(this.entityTypeValue);\n        id = value;\n      } else {\n        targetEntityType = this.checkEntityType(value.entityType);\n        id = value.id;\n      }\n      let entity: BaseData<EntityId> = null;\n      try {\n        entity = await this.entityService.getEntity(targetEntityType, id, {ignoreLoading: true, ignoreErrors: true}).toPromise();\n      } catch (e) {\n        this.propagateChange(null);\n      }\n      this.modelValue = entity !== null ? entity.id.id : null;\n      this.selectEntityFormGroup.get('entity').patchValue(entity !== null ? entity : '', {emitEvent: false});\n      this.entityChanged.emit(entity);\n    } else {\n      this.modelValue = null;\n      this.selectEntityFormGroup.get('entity').patchValue('', {emitEvent: false});\n    }\n    this.dirty = true;\n  }\n\n  onFocus() {\n    if (this.dirty) {\n      this.selectEntityFormGroup.get('entity').updateValueAndValidity({onlySelf: true, emitEvent: true});\n      this.dirty = false;\n    }\n  }\n\n  reset() {\n    this.selectEntityFormGroup.get('entity').patchValue('', {emitEvent: false});\n  }\n\n  updateView(value: string | null, entity: BaseData<EntityId> | null) {\n    if (!isEqual(this.modelValue, value)) {\n      this.modelValue = value;\n      this.propagateChange(this.modelValue);\n      this.entityChanged.emit(entity);\n    }\n  }\n\n  displayEntityFn(entity?: BaseData<EntityId>): string | undefined {\n    return entity ? entity.name : undefined;\n  }\n\n  fetchEntities(searchText?: string): Observable<Array<BaseData<EntityId>>> {\n    this.searchText = searchText;\n    const targetEntityType = this.checkEntityType(this.entityTypeValue);\n    return this.entityService.getEntitiesByNameFilter(targetEntityType, searchText,\n      50, this.entitySubtypeValue, {ignoreLoading: true}).pipe(\n      catchError(() => of(null)),\n      map((data) => {\n        if (data) {\n          if (this.excludeEntityIds && this.excludeEntityIds.length) {\n            const entities: Array<BaseData<EntityId>> = [];\n            data.forEach((entity) => {\n              if (this.excludeEntityIds.indexOf(entity.id.id) === -1) {\n                entities.push(entity);\n              }\n            });\n            return entities;\n          } else {\n            return data;\n          }\n        } else {\n          return [];\n        }\n      }\n    ));\n  }\n\n  clear() {\n    this.selectEntityFormGroup.get('entity').patchValue('', {emitEvent: true});\n    setTimeout(() => {\n      this.entityInput.nativeElement.blur();\n      this.entityInput.nativeElement.focus();\n    }, 0);\n  }\n\n  checkEntityType(entityType: EntityType | AliasEntityType): EntityType {\n    if (entityType === AliasEntityType.CURRENT_CUSTOMER) {\n      return EntityType.CUSTOMER;\n    } else if (entityType === AliasEntityType.CURRENT_TENANT) {\n      return EntityType.TENANT;\n    } else if (entityType === AliasEntityType.CURRENT_USER) {\n      return EntityType.USER;\n    } else if (entityType === AliasEntityType.CURRENT_USER_OWNER) {\n      const authUser =  getCurrentAuthUser(this.store);\n      if (authUser.authority === Authority.TENANT_ADMIN) {\n        return EntityType.TENANT;\n      } else {\n        return EntityType.CUSTOMER;\n      }\n    }\n    return entityType;\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<mat-form-field [formGroup]=\"selectEntityFormGroup\" class=\"mat-block\">\n  <input matInput type=\"text\" placeholder=\"{{ entityText | translate }}\"\n         #entityInput\n         formControlName=\"entity\"\n         (focusin)=\"onFocus()\"\n         [required]=\"required\"\n         [matAutocomplete]=\"entityAutocomplete\">\n  <button *ngIf=\"selectEntityFormGroup.get('entity').value && !disabled\"\n          type=\"button\"\n          matSuffix mat-button mat-icon-button aria-label=\"Clear\"\n          (click)=\"clear()\">\n    <mat-icon class=\"material-icons\">close</mat-icon>\n  </button>\n  <mat-autocomplete class=\"tb-autocomplete\"\n                    #entityAutocomplete=\"matAutocomplete\"\n                    [displayWith]=\"displayEntityFn\">\n    <mat-option *ngFor=\"let entity of filteredEntities | async\" [value]=\"entity\">\n      <span [innerHTML]=\"entity.name | highlight:searchText\"></span>\n    </mat-option>\n    <mat-option *ngIf=\"!(filteredEntities | async)?.length\" [value]=\"null\">\n      <span>\n          {{ translate.get(noEntitiesMatchingText, {entity: searchText}) | async }}\n      </span>\n    </mat-option>\n  </mat-autocomplete>\n  <mat-error *ngIf=\"selectEntityFormGroup.get('entity').hasError('required')\">\n    {{ entityRequiredText | translate }}\n  </mat-error>\n</mat-form-field>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { TenantId } from './id/tenant-id';\nimport { BaseData, HasId } from '@shared/models/base-data';\n\nexport enum EntityType {\n  TENANT = 'TENANT',\n  TENANT_PROFILE = 'TENANT_PROFILE',\n  CUSTOMER = 'CUSTOMER',\n  USER = 'USER',\n  DASHBOARD = 'DASHBOARD',\n  ASSET = 'ASSET',\n  DEVICE = 'DEVICE',\n  DEVICE_PROFILE = 'DEVICE_PROFILE',\n  ALARM = 'ALARM',\n  RULE_CHAIN = 'RULE_CHAIN',\n  RULE_NODE = 'RULE_NODE',\n  EDGE = 'EDGE',\n  ENTITY_VIEW = 'ENTITY_VIEW',\n  WIDGETS_BUNDLE = 'WIDGETS_BUNDLE',\n  WIDGET_TYPE = 'WIDGET_TYPE',\n  API_USAGE_STATE = 'API_USAGE_STATE',\n  TB_RESOURCE = 'TB_RESOURCE',\n  OTA_PACKAGE = 'OTA_PACKAGE',\n  RPC = 'RPC'\n}\n\nexport enum AliasEntityType {\n  CURRENT_CUSTOMER = 'CURRENT_CUSTOMER',\n  CURRENT_TENANT = 'CURRENT_TENANT',\n  CURRENT_USER = 'CURRENT_USER',\n  CURRENT_USER_OWNER = 'CURRENT_USER_OWNER'\n}\n\nexport interface EntityTypeTranslation {\n  type?: string;\n  typePlural?: string;\n  list?: string;\n  nameStartsWith?: string;\n  details?: string;\n  add?: string;\n  noEntities?: string;\n  selectedEntities?: string;\n  search?: string;\n}\n\nexport interface EntityTypeResource<T> {\n  helpLinkId: string;\n  helpLinkIdForEntity?(entity: T): string;\n}\n\nexport const entityTypeTranslations = new Map<EntityType | AliasEntityType, EntityTypeTranslation>(\n  [\n    [\n      EntityType.TENANT,\n      {\n        type: 'entity.type-tenant',\n        typePlural: 'entity.type-tenants',\n        list: 'entity.list-of-tenants',\n        nameStartsWith: 'entity.tenant-name-starts-with',\n        details: 'tenant.tenant-details',\n        add: 'tenant.add',\n        noEntities: 'tenant.no-tenants-text',\n        search: 'tenant.search',\n        selectedEntities: 'tenant.selected-tenants'\n      }\n    ],\n    [\n      EntityType.TENANT_PROFILE,\n      {\n        type: 'entity.type-tenant-profile',\n        typePlural: 'entity.type-tenant-profiles',\n        list: 'entity.list-of-tenant-profiles',\n        nameStartsWith: 'entity.tenant-profile-name-starts-with',\n        details: 'tenant-profile.tenant-profile-details',\n        add: 'tenant-profile.add',\n        noEntities: 'tenant-profile.no-tenant-profiles-text',\n        search: 'tenant-profile.search',\n        selectedEntities: 'tenant-profile.selected-tenant-profiles'\n      }\n    ],\n    [\n      EntityType.CUSTOMER,\n      {\n        type: 'entity.type-customer',\n        typePlural: 'entity.type-customers',\n        list: 'entity.list-of-customers',\n        nameStartsWith: 'entity.customer-name-starts-with',\n        details: 'customer.customer-details',\n        add: 'customer.add',\n        noEntities: 'customer.no-customers-text',\n        search: 'customer.search',\n        selectedEntities: 'customer.selected-customers'\n      }\n    ],\n    [\n      EntityType.USER,\n      {\n        type: 'entity.type-user',\n        typePlural: 'entity.type-users',\n        list: 'entity.list-of-users',\n        nameStartsWith: 'entity.user-name-starts-with',\n        details: 'user.user-details',\n        add: 'user.add',\n        noEntities: 'user.no-users-text',\n        search: 'user.search',\n        selectedEntities: 'user.selected-users'\n      }\n    ],\n    [\n      EntityType.DEVICE,\n      {\n        type: 'entity.type-device',\n        typePlural: 'entity.type-devices',\n        list: 'entity.list-of-devices',\n        nameStartsWith: 'entity.device-name-starts-with',\n        details: 'device.device-details',\n        add: 'device.add',\n        noEntities: 'device.no-devices-text',\n        search: 'device.search',\n        selectedEntities: 'device.selected-devices'\n      }\n    ],\n    [\n      EntityType.DEVICE_PROFILE,\n      {\n        type: 'entity.type-device-profile',\n        typePlural: 'entity.type-device-profiles',\n        list: 'entity.list-of-device-profiles',\n        nameStartsWith: 'entity.device-profile-name-starts-with',\n        details: 'device-profile.device-profile-details',\n        add: 'device-profile.add',\n        noEntities: 'device-profile.no-device-profiles-text',\n        search: 'device-profile.search',\n        selectedEntities: 'device-profile.selected-device-profiles'\n      }\n    ],\n    [\n      EntityType.ASSET,\n      {\n        type: 'entity.type-asset',\n        typePlural: 'entity.type-assets',\n        list: 'entity.list-of-assets',\n        nameStartsWith: 'entity.asset-name-starts-with',\n        details: 'asset.asset-details',\n        add: 'asset.add',\n        noEntities: 'asset.no-assets-text',\n        search: 'asset.search',\n        selectedEntities: 'asset.selected-assets'\n      }\n    ],\n    [\n      EntityType.EDGE,\n      {\n        type: 'entity.type-edge',\n        typePlural: 'entity.type-edges',\n        list: 'entity.list-of-edges',\n        nameStartsWith: 'entity.edge-name-starts-with',\n        details: 'edge.edge-details',\n        add: 'edge.add',\n        noEntities: 'edge.no-edges-text',\n        search: 'edge.search',\n        selectedEntities: 'edge.selected-edges'\n      }\n    ],\n    [\n      EntityType.ENTITY_VIEW,\n      {\n        type: 'entity.type-entity-view',\n        typePlural: 'entity.type-entity-views',\n        list: 'entity.list-of-entity-views',\n        nameStartsWith: 'entity.entity-view-name-starts-with',\n        details: 'entity-view.entity-view-details',\n        add: 'entity-view.add',\n        noEntities: 'entity-view.no-entity-views-text',\n        search: 'entity-view.search',\n        selectedEntities: 'entity-view.selected-entity-views'\n      }\n    ],\n    [\n      EntityType.RULE_CHAIN,\n      {\n        type: 'entity.type-rulechain',\n        typePlural: 'entity.type-rulechains',\n        list: 'entity.list-of-rulechains',\n        nameStartsWith: 'entity.rulechain-name-starts-with',\n        details: 'rulechain.rulechain-details',\n        add: 'rulechain.add',\n        noEntities: 'rulechain.no-rulechains-text',\n        search: 'rulechain.search',\n        selectedEntities: 'rulechain.selected-rulechains'\n      }\n    ],\n    [\n      EntityType.RULE_NODE,\n      {\n        type: 'entity.type-rulenode',\n        typePlural: 'entity.type-rulenodes',\n        list: 'entity.list-of-rulenodes',\n        nameStartsWith: 'entity.rulenode-name-starts-with'\n      }\n    ],\n    [\n      EntityType.DASHBOARD,\n      {\n        type: 'entity.type-dashboard',\n        typePlural: 'entity.type-dashboards',\n        list: 'entity.list-of-dashboards',\n        nameStartsWith: 'entity.dashboard-name-starts-with',\n        details: 'dashboard.dashboard-details',\n        add: 'dashboard.add',\n        noEntities: 'dashboard.no-dashboards-text',\n        search: 'dashboard.search',\n        selectedEntities: 'dashboard.selected-dashboards'\n      }\n    ],\n    [\n      EntityType.ALARM,\n      {\n        type: 'entity.type-alarm',\n        typePlural: 'entity.type-alarms',\n        list: 'entity.list-of-alarms',\n        nameStartsWith: 'entity.alarm-name-starts-with',\n        details: 'dashboard.dashboard-details',\n        noEntities: 'alarm.no-alarms-prompt',\n        search: 'alarm.search',\n        selectedEntities: 'alarm.selected-alarms'\n      }\n    ],\n    [\n      EntityType.API_USAGE_STATE,\n      {\n        type: 'entity.type-api-usage-state'\n      }\n    ],\n    [\n      EntityType.WIDGETS_BUNDLE,\n      {\n        details: 'widgets-bundle.widgets-bundle-details',\n        add: 'widgets-bundle.add',\n        noEntities: 'widgets-bundle.no-widgets-bundles-text',\n        search: 'widgets-bundle.search',\n        selectedEntities: 'widgets-bundle.selected-widgets-bundles'\n      }\n    ],\n    [\n      AliasEntityType.CURRENT_CUSTOMER,\n      {\n        type: 'entity.type-current-customer',\n        list: 'entity.type-current-customer'\n      }\n    ],\n    [\n      AliasEntityType.CURRENT_TENANT,\n      {\n        type: 'entity.type-current-tenant',\n        list: 'entity.type-current-tenant'\n      }\n    ],\n    [\n      AliasEntityType.CURRENT_USER,\n      {\n        type: 'entity.type-current-user',\n        list: 'entity.type-current-user'\n      }\n    ],\n    [\n      AliasEntityType.CURRENT_USER_OWNER,\n      {\n        type: 'entity.type-current-user-owner',\n        list: 'entity.type-current-user-owner'\n      }\n    ],\n    [\n      EntityType.TB_RESOURCE,\n      {\n        type: 'entity.type-tb-resource',\n        details: 'resource.resource-library-details',\n        add: 'resource.add',\n        noEntities: 'resource.no-resource-text',\n        search: 'resource.search',\n        selectedEntities: 'resource.selected-resources'\n      }\n    ],\n    [\n      EntityType.OTA_PACKAGE,\n      {\n        type: 'entity.type-ota-package',\n        details: 'ota-update.ota-update-details',\n        add: 'ota-update.add',\n        noEntities: 'ota-update.no-packages-text',\n        search: 'ota-update.search',\n        selectedEntities: 'ota-update.selected-package'\n      }\n    ]\n  ]\n);\n\nexport const entityTypeResources = new Map<EntityType, EntityTypeResource<BaseData<HasId>>>(\n  [\n    [\n      EntityType.TENANT,\n      {\n        helpLinkId: 'tenants'\n      }\n    ],\n    [\n      EntityType.TENANT_PROFILE,\n      {\n        helpLinkId: 'tenantProfiles'\n      }\n    ],\n    [\n      EntityType.CUSTOMER,\n      {\n        helpLinkId: 'customers'\n      }\n    ],\n    [\n      EntityType.USER,\n      {\n        helpLinkId: 'users'\n      }\n    ],\n    [\n      EntityType.DEVICE,\n      {\n        helpLinkId: 'devices'\n      }\n    ],\n    [\n      EntityType.DEVICE_PROFILE,\n      {\n        helpLinkId: 'deviceProfiles'\n      }\n    ],\n    [\n      EntityType.ASSET,\n      {\n        helpLinkId: 'assets'\n      }\n    ],\n    [\n      EntityType.EDGE,\n      {\n        helpLinkId: 'edges'\n      }\n    ],\n    [\n      EntityType.ENTITY_VIEW,\n      {\n        helpLinkId: 'entityViews'\n      }\n    ],\n    [\n      EntityType.RULE_CHAIN,\n      {\n        helpLinkId: 'rulechains'\n      }\n    ],\n    [\n      EntityType.DASHBOARD,\n      {\n        helpLinkId: 'dashboards'\n      }\n    ],\n    [\n      EntityType.WIDGETS_BUNDLE,\n      {\n        helpLinkId: 'widgetsBundles'\n      }\n    ],\n    [\n      EntityType.TB_RESOURCE,\n      {\n        helpLinkId: 'resources'\n      }\n    ],\n    [\n      EntityType.OTA_PACKAGE,\n      {\n        helpLinkId: 'otaUpdates'\n      }\n    ]\n  ]\n);\n\nexport interface EntitySubtype {\n  tenantId: TenantId;\n  entityType: EntityType;\n  type: string;\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { BaseData } from '@shared/models/base-data';\nimport { TenantId } from '@shared/models/id/tenant-id';\nimport { AlarmId } from '@shared/models/id/alarm-id';\nimport { EntityId } from '@shared/models/id/entity-id';\nimport { TimePageLink } from '@shared/models/page/page-link';\nimport { NULL_UUID } from '@shared/models/id/has-uuid';\nimport { EntityType } from '@shared/models/entity-type.models';\nimport { CustomerId } from '@shared/models/id/customer-id';\nimport { TableCellButtonActionDescriptor } from '@home/components/widget/lib/table-widget.models';\n\nexport enum AlarmSeverity {\n  CRITICAL = 'CRITICAL',\n  MAJOR = 'MAJOR',\n  MINOR = 'MINOR',\n  WARNING = 'WARNING',\n  INDETERMINATE = 'INDETERMINATE'\n}\n\nexport enum AlarmStatus {\n  ACTIVE_UNACK = 'ACTIVE_UNACK',\n  ACTIVE_ACK = 'ACTIVE_ACK',\n  CLEARED_UNACK = 'CLEARED_UNACK',\n  CLEARED_ACK = 'CLEARED_ACK'\n}\n\nexport enum AlarmSearchStatus {\n  ANY = 'ANY',\n  ACTIVE = 'ACTIVE',\n  CLEARED = 'CLEARED',\n  ACK = 'ACK',\n  UNACK = 'UNACK'\n}\n\nexport const alarmSeverityTranslations = new Map<AlarmSeverity, string>(\n  [\n    [AlarmSeverity.CRITICAL, 'alarm.severity-critical'],\n    [AlarmSeverity.MAJOR, 'alarm.severity-major'],\n    [AlarmSeverity.MINOR, 'alarm.severity-minor'],\n    [AlarmSeverity.WARNING, 'alarm.severity-warning'],\n    [AlarmSeverity.INDETERMINATE, 'alarm.severity-indeterminate']\n  ]\n);\n\nexport const alarmStatusTranslations = new Map<AlarmStatus, string>(\n  [\n    [AlarmStatus.ACTIVE_UNACK, 'alarm.display-status.ACTIVE_UNACK'],\n    [AlarmStatus.ACTIVE_ACK, 'alarm.display-status.ACTIVE_ACK'],\n    [AlarmStatus.CLEARED_UNACK, 'alarm.display-status.CLEARED_UNACK'],\n    [AlarmStatus.CLEARED_ACK, 'alarm.display-status.CLEARED_ACK'],\n  ]\n);\n\nexport const alarmSearchStatusTranslations = new Map<AlarmSearchStatus, string>(\n  [\n    [AlarmSearchStatus.ANY, 'alarm.search-status.ANY'],\n    [AlarmSearchStatus.ACTIVE, 'alarm.search-status.ACTIVE'],\n    [AlarmSearchStatus.CLEARED, 'alarm.search-status.CLEARED'],\n    [AlarmSearchStatus.ACK, 'alarm.search-status.ACK'],\n    [AlarmSearchStatus.UNACK, 'alarm.search-status.UNACK']\n  ]\n);\n\nexport const alarmSeverityColors = new Map<AlarmSeverity, string>(\n  [\n    [AlarmSeverity.CRITICAL, 'red'],\n    [AlarmSeverity.MAJOR, 'orange'],\n    [AlarmSeverity.MINOR, '#ffca3d'],\n    [AlarmSeverity.WARNING, '#abab00'],\n    [AlarmSeverity.INDETERMINATE, 'green']\n  ]\n);\n\nexport interface Alarm extends BaseData<AlarmId> {\n  tenantId: TenantId;\n  customerId: CustomerId;\n  type: string;\n  originator: EntityId;\n  severity: AlarmSeverity;\n  status: AlarmStatus;\n  startTs: number;\n  endTs: number;\n  ackTs: number;\n  clearTs: number;\n  propagate: boolean;\n  details?: any;\n}\n\nexport interface AlarmInfo extends Alarm {\n  originatorName: string;\n}\n\nexport interface AlarmDataInfo extends AlarmInfo {\n  actionCellButtons?: TableCellButtonActionDescriptor[];\n  hasActions?: boolean;\n  [key: string]: any;\n}\n\nexport const simulatedAlarm: AlarmInfo = {\n  id: new AlarmId(NULL_UUID),\n  tenantId: new TenantId(NULL_UUID),\n  customerId: new CustomerId(NULL_UUID),\n  createdTime: new Date().getTime(),\n  startTs: new Date().getTime(),\n  endTs: 0,\n  ackTs: 0,\n  clearTs: 0,\n  originatorName: 'Simulated',\n  originator: {\n    entityType: EntityType.DEVICE,\n    id: '1'\n  },\n  type: 'TEMPERATURE',\n  severity: AlarmSeverity.MAJOR,\n  status: AlarmStatus.ACTIVE_UNACK,\n  details: {\n    message: 'Temperature is high!'\n  },\n  propagate: false\n};\n\nexport interface AlarmField {\n  keyName: string;\n  value: string;\n  name: string;\n  time?: boolean;\n}\n\nexport const alarmFields: {[fieldName: string]: AlarmField} = {\n  createdTime: {\n    keyName: 'createdTime',\n    value: 'createdTime',\n    name: 'alarm.created-time',\n    time: true\n  },\n  startTime: {\n    keyName: 'startTime',\n    value: 'startTs',\n    name: 'alarm.start-time',\n    time: true\n  },\n  endTime: {\n    keyName: 'endTime',\n    value: 'endTs',\n    name: 'alarm.end-time',\n    time: true\n  },\n  ackTime: {\n    keyName: 'ackTime',\n    value: 'ackTs',\n    name: 'alarm.ack-time',\n    time: true\n  },\n  clearTime: {\n    keyName: 'clearTime',\n    value: 'clearTs',\n    name: 'alarm.clear-time',\n    time: true\n  },\n  originator: {\n    keyName: 'originator',\n    value: 'originatorName',\n    name: 'alarm.originator'\n  },\n  originatorType: {\n    keyName: 'originatorType',\n    value: 'originator.entityType',\n    name: 'alarm.originator-type'\n  },\n  type: {\n    keyName: 'type',\n    value: 'type',\n    name: 'alarm.type'\n  },\n  severity: {\n    keyName: 'severity',\n    value: 'severity',\n    name: 'alarm.severity'\n  },\n  status: {\n    keyName: 'status',\n    value: 'status',\n    name: 'alarm.status'\n  }\n};\n\nexport class AlarmQuery {\n\n  affectedEntityId: EntityId;\n  pageLink: TimePageLink;\n  searchStatus: AlarmSearchStatus;\n  status: AlarmStatus;\n  fetchOriginator: boolean;\n\n  constructor(entityId: EntityId, pageLink: TimePageLink,\n              searchStatus: AlarmSearchStatus, status: AlarmStatus,\n              fetchOriginator: boolean) {\n    this.affectedEntityId = entityId;\n    this.pageLink = pageLink;\n    this.searchStatus = searchStatus;\n    this.status = status;\n    this.fetchOriginator = fetchOriginator;\n  }\n\n  public toQuery(): string {\n    let query = `/${this.affectedEntityId.entityType}/${this.affectedEntityId.id}`;\n    query += this.pageLink.toQuery();\n    if (this.searchStatus) {\n      query += `&searchStatus=${this.searchStatus}`;\n    } else if (this.status) {\n      query += `&status=${this.status}`;\n    }\n    if (typeof this.fetchOriginator !== 'undefined' && this.fetchOriginator !== null) {\n      query += `&fetchOriginator=${this.fetchOriginator}`;\n    }\n    return query;\n  }\n\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Observable } from 'rxjs/internal/Observable';\nimport { from, of } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\n\nlet jsBeautifyModule: any;\nlet htmlBeautifyModule: any;\nlet cssBeautifyModule: any;\n\nfunction loadJsBeautify(): Observable<any> {\n  if (jsBeautifyModule) {\n    return of(jsBeautifyModule);\n  } else {\n    return from(import('js-beautify/js/lib/beautify.js')).pipe(\n      tap((module) => {\n        jsBeautifyModule = module;\n      })\n    );\n  }\n}\n\nfunction loadHtmlBeautify(): Observable<any> {\n  if (htmlBeautifyModule) {\n    return of(htmlBeautifyModule);\n  } else {\n    return from(import('js-beautify/js/lib/beautify-html.js')).pipe(\n      tap((module) => {\n        htmlBeautifyModule = module;\n      })\n    );\n  }\n}\n\nfunction loadCssBeautify(): Observable<any> {\n  if (cssBeautifyModule) {\n    return of(cssBeautifyModule);\n  } else {\n    return from(import('js-beautify/js/lib/beautify-css.js')).pipe(\n      tap((module) => {\n        cssBeautifyModule = module;\n      })\n    );\n  }\n}\n\nexport function beautifyJs(source: string, options?: any): Observable<string> {\n  return loadJsBeautify().pipe(\n    map((mod) => {\n      return mod.js_beautify(source, options);\n    })\n  );\n}\n\nexport function beautifyCss(source: string, options?: any): Observable<string> {\n  return loadCssBeautify().pipe(\n    map((mod) => mod.css_beautify(source, options))\n  );\n}\n\nexport function beautifyHtml(source: string, options?: any): Observable<string> {\n  return loadHtmlBeautify().pipe(\n    map((mod) => mod.html_beautify(source, options))\n  );\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { ChangeDetectionStrategy, Component, Input, OnInit } from '@angular/core';\nimport { MenuSection } from '@core/services/menu.models';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'tb-menu-toggle',\n  templateUrl: './menu-toggle.component.html',\n  styleUrls: ['./menu-toggle.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class MenuToggleComponent implements OnInit {\n\n  @Input() section: MenuSection;\n\n  constructor(private router: Router) {\n  }\n\n  ngOnInit() {\n  }\n\n  sectionActive(): boolean {\n    return this.router.isActive(this.section.path, false);\n  }\n\n  sectionHeight(): string {\n    if (this.router.isActive(this.section.path, false)) {\n      return this.section.height;\n    } else {\n      return '0px';\n    }\n  }\n\n  trackBySectionPages(index: number, section: MenuSection){\n    return section.id;\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<a mat-button class=\"tb-button-toggle\"\n        routerLinkActive=\"tb-active\" [routerLinkActiveOptions]=\"{exact: true}\" routerLink=\"{{section.path}}\">\n  <mat-icon *ngIf=\"!section.isMdiIcon && section.icon != null\" class=\"material-icons\">{{section.icon}}</mat-icon>\n  <mat-icon *ngIf=\"section.isMdiIcon && section.icon != null\" [svgIcon]=\"section.icon\"></mat-icon>\n  <span>{{section.name | translate}}</span>\n  <span class=\" pull-right fa fa-chevron-down tb-toggle-icon\"\n        [ngClass]=\"{'tb-toggled' : sectionActive()}\"></span>\n</a>\n<ul id=\"docs-menu-{{section.name | nospace}}\" class=\"tb-menu-toggle-list\" [ngStyle]=\"{height: sectionHeight()}\">\n  <li *ngFor=\"let page of section.pages; trackBy: trackBySectionPages\">\n    <tb-menu-link [section]=\"page\"></tb-menu-link>\n  </li>\n</ul>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport {\n  ComponentFactory, ComponentRef,\n  Directive, EventEmitter, Injector,\n  Input,\n  OnChanges, Output, Renderer2,\n  SimpleChange,\n  SimpleChanges,\n  TemplateRef,\n  ViewContainerRef\n} from '@angular/core';\n\n@Directive({\n  // tslint:disable-next-line:directive-selector\n  selector: '[tbComponentOutlet]',\n  exportAs: 'tbComponentOutlet'\n})\nexport class TbComponentOutletDirective<_T = unknown> implements OnChanges {\n  private componentRef: ComponentRef<any> | null = null;\n  private context = new TbComponentOutletContext();\n  @Input() tbComponentOutletContext: any | null = null;\n  @Input() tbComponentStyle: { [klass: string]: any } | null = null;\n  @Input() tbComponentInjector: Injector | null = null;\n  @Input() tbComponentOutlet: ComponentFactory<any> = null;\n  @Output() componentChange = new EventEmitter<ComponentRef<any>>();\n\n  static ngTemplateContextGuard<T>(\n    // tslint:disable-next-line:variable-name\n    _dir: TbComponentOutletDirective<T>,\n    // tslint:disable-next-line:variable-name\n    _ctx: any\n  ): _ctx is TbComponentOutletContext {\n    return true;\n  }\n\n  private recreateComponent(): void {\n    this.viewContainer.clear();\n    this.componentRef = this.viewContainer.createComponent(this.tbComponentOutlet, 0, this.tbComponentInjector);\n    this.componentChange.next(this.componentRef);\n    if (this.tbComponentOutletContext) {\n      for (const propName of Object.keys(this.tbComponentOutletContext)) {\n        this.componentRef.instance[propName] = this.tbComponentOutletContext[propName];\n      }\n    }\n    if (this.tbComponentStyle) {\n      for (const propName of Object.keys(this.tbComponentStyle)) {\n        this.renderer.setStyle(this.componentRef.location.nativeElement, propName, this.tbComponentStyle[propName]);\n      }\n    }\n  }\n\n  private updateContext(): void {\n    const newCtx = this.tbComponentOutletContext;\n    const oldCtx = this.componentRef.instance as any;\n    if (newCtx) {\n      for (const propName of Object.keys(newCtx)) {\n        oldCtx[propName] = newCtx[propName];\n      }\n    }\n  }\n\n  constructor(private viewContainer: ViewContainerRef,\n              private renderer: Renderer2) {}\n\n  ngOnChanges(changes: SimpleChanges): void {\n    const { tbComponentOutletContext, tbComponentOutlet } = changes;\n    const shouldRecreateComponent = (): boolean => {\n      let shouldOutletRecreate = false;\n      if (tbComponentOutlet) {\n        if (tbComponentOutlet.firstChange) {\n          shouldOutletRecreate = true;\n        } else {\n          const isPreviousOutletTemplate = tbComponentOutlet.previousValue instanceof ComponentFactory;\n          const isCurrentOutletTemplate = tbComponentOutlet.currentValue instanceof ComponentFactory;\n          shouldOutletRecreate = isPreviousOutletTemplate || isCurrentOutletTemplate;\n        }\n      }\n      const hasContextShapeChanged = (ctxChange: SimpleChange): boolean => {\n        const prevCtxKeys = Object.keys(ctxChange.previousValue || {});\n        const currCtxKeys = Object.keys(ctxChange.currentValue || {});\n        if (prevCtxKeys.length === currCtxKeys.length) {\n          for (const propName of currCtxKeys) {\n            if (prevCtxKeys.indexOf(propName) === -1) {\n              return true;\n            }\n          }\n          return false;\n        } else {\n          return true;\n        }\n      };\n      const shouldContextRecreate =\n        tbComponentOutletContext && hasContextShapeChanged(tbComponentOutletContext);\n      return shouldContextRecreate || shouldOutletRecreate;\n    };\n\n    if (tbComponentOutlet) {\n      this.context.$implicit = tbComponentOutlet.currentValue;\n    }\n\n    const recreateComponent = shouldRecreateComponent();\n    if (recreateComponent) {\n      this.recreateComponent();\n    } else {\n      this.updateContext();\n    }\n  }\n}\n\nexport class TbComponentOutletContext {\n  public $implicit: any;\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, Inject, OnInit, SkipSelf } from '@angular/core';\nimport { ErrorStateMatcher } from '@angular/material/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { FormBuilder, FormControl, FormGroup, FormGroupDirective, NgForm, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { DialogComponent } from '@shared/components/dialog.component';\n\nexport interface ColorPickerDialogData {\n  color: string;\n}\n\n@Component({\n  selector: 'tb-color-picker-dialog',\n  templateUrl: './color-picker-dialog.component.html',\n  providers: [{provide: ErrorStateMatcher, useExisting: ColorPickerDialogComponent}],\n  styleUrls: []\n})\nexport class ColorPickerDialogComponent extends DialogComponent<ColorPickerDialogComponent, string>\n  implements OnInit, ErrorStateMatcher {\n\n  colorPickerFormGroup: FormGroup;\n\n  submitted = false;\n\n  constructor(protected store: Store<AppState>,\n              protected router: Router,\n              @Inject(MAT_DIALOG_DATA) public data: ColorPickerDialogData,\n              @SkipSelf() private errorStateMatcher: ErrorStateMatcher,\n              public dialogRef: MatDialogRef<ColorPickerDialogComponent, string>,\n              public fb: FormBuilder) {\n    super(store, router, dialogRef);\n  }\n\n  ngOnInit(): void {\n    this.colorPickerFormGroup = this.fb.group({\n      color: [this.data.color, [Validators.required]]\n    });\n  }\n\n  isErrorState(control: FormControl | null, form: FormGroupDirective | NgForm | null): boolean {\n    const originalErrorState = this.errorStateMatcher.isErrorState(control, form);\n    const customErrorState = !!(control && control.invalid && this.submitted);\n    return originalErrorState || customErrorState;\n  }\n\n  onColorChange(color: string) {\n    this.colorPickerFormGroup.get('color').setValue(color);\n    this.colorPickerFormGroup.markAsDirty();\n  }\n\n  cancel(): void {\n    this.dialogRef.close(null);\n  }\n\n  select(): void {\n    this.submitted = true;\n    const color: string = this.colorPickerFormGroup.get('color').value;\n    this.dialogRef.close(color);\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<form [formGroup]=\"colorPickerFormGroup\" (ngSubmit)=\"select()\">\n  <div mat-dialog-content fxLayout=\"row\" fxLayoutAlign=\"center\">\n    <span [style.background]=\"colorPickerFormGroup.get('color').value\"\n          [cpToggle]=\"true\"\n          [cpDialogDisplay]=\"'inline'\"\n          [colorPicker]=\"colorPickerFormGroup.get('color').value\"\n          (colorPickerChange)=\"onColorChange($event)\">\n    </span>\n  </div>\n  <div mat-dialog-actions fxLayout=\"row\">\n    <span fxFlex></span>\n    <button mat-button\n            type=\"button\"\n            [disabled]=\"(isLoading$ | async)\"\n            (click)=\"cancel()\">\n      {{ 'action.cancel' | translate }}\n    </button>\n    <button mat-button\n            type=\"submit\"\n            [disabled]=\"(isLoading$ | async) || colorPickerFormGroup.invalid || !colorPickerFormGroup.dirty\">\n      {{ 'action.select' | translate }}\n    </button>\n  </div>\n</form>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable, NgZone } from '@angular/core';\nimport { JwtHelperService } from '@auth0/angular-jwt';\nimport { HttpClient } from '@angular/common/http';\n\nimport { forkJoin, Observable, of, ReplaySubject, throwError } from 'rxjs';\nimport { catchError, map, mergeMap, tap } from 'rxjs/operators';\n\nimport { LoginRequest, LoginResponse, PublicLoginRequest } from '@shared/models/login.models';\nimport { ActivatedRoute, Router, UrlTree } from '@angular/router';\nimport { defaultHttpOptions } from '../http/http-utils';\nimport { UserService } from '../http/user.service';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '../core.state';\nimport { ActionAuthAuthenticated, ActionAuthLoadUser, ActionAuthUnauthenticated } from './auth.actions';\nimport { getCurrentAuthState, getCurrentAuthUser } from './auth.selectors';\nimport { Authority } from '@shared/models/authority.enum';\nimport { ActionSettingsChangeLanguage } from '@app/core/settings/settings.actions';\nimport { AuthPayload, AuthState, SysParamsState } from '@core/auth/auth.models';\nimport { TranslateService } from '@ngx-translate/core';\nimport { AuthUser } from '@shared/models/user.model';\nimport { TimeService } from '@core/services/time.service';\nimport { UtilsService } from '@core/services/utils.service';\nimport { DashboardService } from '@core/http/dashboard.service';\nimport { PageLink } from '@shared/models/page/page-link';\nimport { DashboardInfo } from '@shared/models/dashboard.models';\nimport { PageData } from '@app/shared/models/page/page-data';\nimport { AdminService } from '@core/http/admin.service';\nimport { ActionNotificationShow } from '@core/notification/notification.actions';\nimport { MatDialog, MatDialogConfig } from '@angular/material/dialog';\nimport { AlertDialogComponent } from '@shared/components/dialog/alert-dialog.component';\nimport { OAuth2ClientInfo, PlatformType } from '@shared/models/oauth2.models';\nimport { isDefinedAndNotNull, isMobileApp } from '@core/utils';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class AuthService {\n\n  constructor(\n    private store: Store<AppState>,\n    private http: HttpClient,\n    private userService: UserService,\n    private timeService: TimeService,\n    private router: Router,\n    private route: ActivatedRoute,\n    private zone: NgZone,\n    private utils: UtilsService,\n    private dashboardService: DashboardService,\n    private adminService: AdminService,\n    private translate: TranslateService,\n    private dialog: MatDialog\n  ) {\n  }\n\n  redirectUrl: string;\n  oauth2Clients: Array<OAuth2ClientInfo> = null;\n\n  private refreshTokenSubject: ReplaySubject<LoginResponse> = null;\n  private jwtHelper = new JwtHelperService();\n\n  private static _storeGet(key) {\n    return localStorage.getItem(key);\n  }\n\n  private static isTokenValid(prefix) {\n    const clientExpiration = AuthService._storeGet(prefix + '_expiration');\n    return clientExpiration && Number(clientExpiration) > (new Date().valueOf() + 2000);\n  }\n\n  public static isJwtTokenValid() {\n    return AuthService.isTokenValid('jwt_token');\n  }\n\n  private static clearTokenData() {\n    localStorage.removeItem('jwt_token');\n    localStorage.removeItem('jwt_token_expiration');\n    localStorage.removeItem('refresh_token');\n    localStorage.removeItem('refresh_token_expiration');\n  }\n\n  public static getJwtToken() {\n    return AuthService._storeGet('jwt_token');\n  }\n\n  public reloadUser() {\n    this.loadUser(true).subscribe(\n      (authPayload) => {\n        this.notifyAuthenticated(authPayload);\n        this.notifyUserLoaded(true);\n      },\n      () => {\n        this.notifyUnauthenticated();\n        this.notifyUserLoaded(true);\n      }\n    );\n  }\n\n\n  public login(loginRequest: LoginRequest): Observable<LoginResponse> {\n    return this.http.post<LoginResponse>('/api/auth/login', loginRequest, defaultHttpOptions()).pipe(\n      tap((loginResponse: LoginResponse) => {\n          this.setUserFromJwtToken(loginResponse.token, loginResponse.refreshToken, true);\n        }\n      ));\n  }\n\n  public publicLogin(publicId: string): Observable<LoginResponse> {\n    const publicLoginRequest: PublicLoginRequest = {\n      publicId\n    };\n    return this.http.post<LoginResponse>('/api/auth/login/public', publicLoginRequest, defaultHttpOptions());\n  }\n\n  public sendResetPasswordLink(email: string) {\n    return this.http.post('/api/noauth/resetPasswordByEmail',\n      {email}, defaultHttpOptions());\n  }\n\n  public activate(activateToken: string, password: string, sendActivationMail: boolean): Observable<LoginResponse> {\n    return this.http.post<LoginResponse>(`/api/noauth/activate?sendActivationMail=${sendActivationMail}`,\n      {activateToken, password}, defaultHttpOptions()).pipe(\n      tap((loginResponse: LoginResponse) => {\n          this.setUserFromJwtToken(loginResponse.token, loginResponse.refreshToken, true);\n        }\n      ));\n  }\n\n  public resetPassword(resetToken: string, password: string): Observable<LoginResponse> {\n    return this.http.post<LoginResponse>('/api/noauth/resetPassword', {resetToken, password}, defaultHttpOptions()).pipe(\n      tap((loginResponse: LoginResponse) => {\n          this.setUserFromJwtToken(loginResponse.token, loginResponse.refreshToken, true);\n        }\n      ));\n  }\n\n  public changePassword(currentPassword: string, newPassword: string) {\n    return this.http.post('/api/auth/changePassword', {currentPassword, newPassword}, defaultHttpOptions()).pipe(\n      tap((loginResponse: LoginResponse) => {\n          this.setUserFromJwtToken(loginResponse.token, loginResponse.refreshToken, false);\n        }\n      ));\n  }\n\n  public activateByEmailCode(emailCode: string): Observable<LoginResponse> {\n    return this.http.post<LoginResponse>(`/api/noauth/activateByEmailCode?emailCode=${emailCode}`,\n      null, defaultHttpOptions());\n  }\n\n  public resendEmailActivation(email: string) {\n    const encodeEmail = encodeURIComponent(email);\n    return this.http.post(`/api/noauth/resendEmailActivation?email=${encodeEmail}`,\n      null, defaultHttpOptions());\n  }\n\n  public loginAsUser(userId: string) {\n    return this.http.get<LoginResponse>(`/api/user/${userId}/token`, defaultHttpOptions()).pipe(\n      tap((loginResponse: LoginResponse) => {\n          this.setUserFromJwtToken(loginResponse.token, loginResponse.refreshToken, true);\n        }\n      ));\n  }\n\n  public logout(captureLastUrl: boolean = false) {\n    if (captureLastUrl) {\n      this.redirectUrl = this.router.url;\n    }\n    this.http.post('/api/auth/logout', null, defaultHttpOptions(true, true))\n      .subscribe(() => {\n          this.clearJwtToken();\n        },\n        () => {\n          this.clearJwtToken();\n        }\n      );\n  }\n\n  private notifyUserLoaded(isUserLoaded: boolean) {\n    this.store.dispatch(new ActionAuthLoadUser({isUserLoaded}));\n  }\n\n  public gotoDefaultPlace(isAuthenticated: boolean) {\n    if (!isMobileApp()) {\n      const authState = getCurrentAuthState(this.store);\n      const url = this.defaultUrl(isAuthenticated, authState);\n      this.zone.run(() => {\n        this.router.navigateByUrl(url);\n      });\n    }\n  }\n\n  public loadOAuth2Clients(): Observable<Array<OAuth2ClientInfo>> {\n    const url = '/api/noauth/oauth2Clients?platform=' + PlatformType.WEB;\n    return this.http.post<Array<OAuth2ClientInfo>>(url,\n      null, defaultHttpOptions()).pipe(\n      catchError(err => of([])),\n      tap((OAuth2Clients) => {\n        this.oauth2Clients = OAuth2Clients;\n      })\n    );\n  }\n\n  private forceDefaultPlace(authState?: AuthState, path?: string, params?: any): boolean {\n    if (authState && authState.authUser) {\n      if (authState.authUser.authority === Authority.TENANT_ADMIN || authState.authUser.authority === Authority.CUSTOMER_USER) {\n        if ((this.userHasDefaultDashboard(authState) && authState.forceFullscreen) || authState.authUser.isPublic) {\n          if (path === 'profile') {\n            if (this.userHasProfile(authState.authUser)) {\n              return false;\n            } else {\n              return true;\n            }\n          } else if (path.startsWith('dashboard.') || path.startsWith('dashboards.') &&\n              authState.allowedDashboardIds.indexOf(params.dashboardId) > -1) {\n            return false;\n          } else {\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  }\n\n  public defaultUrl(isAuthenticated: boolean, authState?: AuthState, path?: string, params?: any): UrlTree {\n    let result: UrlTree = null;\n    if (isAuthenticated) {\n      if (!path || path === 'login' || this.forceDefaultPlace(authState, path, params)) {\n        if (this.redirectUrl) {\n          const redirectUrl = this.redirectUrl;\n          this.redirectUrl = null;\n          result = this.router.parseUrl(redirectUrl);\n        } else {\n          result = this.router.parseUrl('home');\n        }\n        if (authState.authUser.authority === Authority.TENANT_ADMIN || authState.authUser.authority === Authority.CUSTOMER_USER) {\n          if (this.userHasDefaultDashboard(authState)) {\n            const dashboardId = authState.userDetails.additionalInfo.defaultDashboardId;\n            if (authState.forceFullscreen) {\n              result = this.router.parseUrl(`dashboard/${dashboardId}`);\n            } else {\n              result = this.router.parseUrl(`dashboards/${dashboardId}`);\n            }\n          } else if (authState.authUser.isPublic) {\n            result = this.router.parseUrl(`dashboard/${authState.lastPublicDashboardId}`);\n          }\n        } else if (authState.authUser.authority === Authority.SYS_ADMIN) {\n          this.adminService.checkUpdates().subscribe((updateMessage) => {\n            if (updateMessage && updateMessage.updateAvailable) {\n              this.store.dispatch(new ActionNotificationShow(\n                {message: updateMessage.message,\n                           type: 'info',\n                           verticalPosition: 'bottom',\n                           horizontalPosition: 'right'}));\n            }\n          });\n        }\n      }\n    } else {\n      result = this.router.parseUrl('login');\n    }\n    return result;\n  }\n\n  private loadUser(doTokenRefresh): Observable<AuthPayload> {\n    const authUser = getCurrentAuthUser(this.store);\n    if (!authUser) {\n      const publicId = this.utils.getQueryParam('publicId');\n      const accessToken = this.utils.getQueryParam('accessToken');\n      const refreshToken = this.utils.getQueryParam('refreshToken');\n      const username = this.utils.getQueryParam('username');\n      const password = this.utils.getQueryParam('password');\n      const loginError = this.utils.getQueryParam('loginError');\n      if (publicId) {\n        return this.publicLogin(publicId).pipe(\n          mergeMap((response) => {\n            this.updateAndValidateTokens(response.token, response.refreshToken, false);\n            return this.procceedJwtTokenValidate();\n          }),\n          catchError((err) => {\n            this.utils.updateQueryParam('publicId', null);\n            throw Error();\n          })\n        );\n      } else if (accessToken) {\n        const queryParamsToRemove = ['accessToken'];\n        if (refreshToken) {\n          queryParamsToRemove.push('refreshToken');\n        }\n        this.utils.removeQueryParams(queryParamsToRemove);\n        try {\n          this.updateAndValidateToken(accessToken, 'jwt_token', false);\n          if (refreshToken) {\n            this.updateAndValidateToken(refreshToken, 'refresh_token', false);\n          } else {\n            localStorage.removeItem('refresh_token');\n            localStorage.removeItem('refresh_token_expiration');\n          }\n        } catch (e) {\n          return throwError(e);\n        }\n        return this.procceedJwtTokenValidate();\n      } else if (username && password) {\n        this.utils.updateQueryParam('username', null);\n        this.utils.updateQueryParam('password', null);\n        const loginRequest: LoginRequest = {\n          username,\n          password\n        };\n        return this.http.post<LoginResponse>('/api/auth/login', loginRequest, defaultHttpOptions()).pipe(\n          mergeMap((loginResponse: LoginResponse) => {\n              this.updateAndValidateTokens(loginResponse.token, loginResponse.refreshToken, false);\n              return this.procceedJwtTokenValidate();\n            }\n          )\n        );\n      } else if (loginError) {\n        this.showLoginErrorDialog(loginError);\n        this.utils.updateQueryParam('loginError', null);\n        return throwError(Error());\n      }\n      return this.procceedJwtTokenValidate(doTokenRefresh);\n    } else {\n      return of({} as AuthPayload);\n    }\n  }\n\n  private showLoginErrorDialog(loginError: string) {\n    this.translate.get(['login.error', 'action.close']).subscribe(\n      (translations) => {\n        const dialogConfig: MatDialogConfig = {\n          disableClose: true,\n          data: {\n            title: translations['login.error'],\n            message: loginError,\n            ok: translations['action.close']\n          }\n        };\n        this.dialog.open(AlertDialogComponent, dialogConfig);\n      }\n    );\n  }\n\n  private procceedJwtTokenValidate(doTokenRefresh?: boolean): Observable<AuthPayload> {\n    const loadUserSubject = new ReplaySubject<AuthPayload>();\n    this.validateJwtToken(doTokenRefresh).subscribe(\n      () => {\n        let authPayload = {} as AuthPayload;\n        const jwtToken = AuthService._storeGet('jwt_token');\n        authPayload.authUser = this.jwtHelper.decodeToken(jwtToken);\n        if (authPayload.authUser && authPayload.authUser.scopes && authPayload.authUser.scopes.length) {\n          authPayload.authUser.authority = Authority[authPayload.authUser.scopes[0]];\n        } else if (authPayload.authUser) {\n          authPayload.authUser.authority = Authority.ANONYMOUS;\n        }\n        if (authPayload.authUser.isPublic) {\n          authPayload.forceFullscreen = true;\n        }\n        if (authPayload.authUser.isPublic) {\n          this.loadSystemParams(authPayload).subscribe(\n            (sysParams) => {\n              authPayload = {...authPayload, ...sysParams};\n              loadUserSubject.next(authPayload);\n              loadUserSubject.complete();\n            },\n            (err) => {\n              loadUserSubject.error(err);\n            }\n          );\n        } else if (authPayload.authUser.userId) {\n          this.userService.getUser(authPayload.authUser.userId).subscribe(\n            (user) => {\n              authPayload.userDetails = user;\n              authPayload.forceFullscreen = false;\n              if (this.userForceFullscreen(authPayload)) {\n                authPayload.forceFullscreen = true;\n              }\n              this.loadSystemParams(authPayload).subscribe(\n                (sysParams) => {\n                  authPayload = {...authPayload, ...sysParams};\n                  let userLang;\n                  if (authPayload.userDetails.additionalInfo && authPayload.userDetails.additionalInfo.lang) {\n                    userLang = authPayload.userDetails.additionalInfo.lang;\n                  } else {\n                    userLang = null;\n                  }\n                  this.notifyUserLang(userLang);\n                  loadUserSubject.next(authPayload);\n                  loadUserSubject.complete();\n                },\n                (err) => {\n                  loadUserSubject.error(err);\n                  this.logout();\n                });\n            },\n            (err) => {\n              loadUserSubject.error(err);\n              this.logout();\n            }\n          );\n        } else {\n          loadUserSubject.error(null);\n        }\n      },\n      (err) => {\n        loadUserSubject.error(err);\n      }\n    );\n    return loadUserSubject;\n  }\n\n  private loadIsUserTokenAccessEnabled(authUser: AuthUser): Observable<boolean> {\n    if (authUser.authority === Authority.SYS_ADMIN ||\n        authUser.authority === Authority.TENANT_ADMIN) {\n      return this.http.get<boolean>('/api/user/tokenAccessEnabled', defaultHttpOptions());\n    } else {\n      return of(false);\n    }\n  }\n\n  public loadIsEdgesSupportEnabled(): Observable<boolean> {\n    return this.http.get<boolean>('/api/edges/enabled', defaultHttpOptions());\n  }\n\n  private loadSystemParams(authPayload: AuthPayload): Observable<SysParamsState> {\n    const sources = [this.loadIsUserTokenAccessEnabled(authPayload.authUser),\n                     this.fetchAllowedDashboardIds(authPayload),\n                     this.loadIsEdgesSupportEnabled(),\n                     this.timeService.loadMaxDatapointsLimit()];\n    return forkJoin(sources)\n      .pipe(map((data) => {\n        const userTokenAccessEnabled: boolean = data[0] as boolean;\n        const allowedDashboardIds: string[] = data[1] as string[];\n        const edgesSupportEnabled: boolean = data[2] as boolean;\n        return {userTokenAccessEnabled, allowedDashboardIds, edgesSupportEnabled};\n      }, catchError((err) => {\n        return of({});\n      })));\n  }\n\n  public refreshJwtToken(loadUserElseStoreJwtToken = true): Observable<LoginResponse> {\n    let response: Observable<LoginResponse> = this.refreshTokenSubject;\n    if (this.refreshTokenSubject === null) {\n        this.refreshTokenSubject = new ReplaySubject<LoginResponse>(1);\n        response = this.refreshTokenSubject;\n        const refreshToken = AuthService._storeGet('refresh_token');\n        const refreshTokenValid = AuthService.isTokenValid('refresh_token');\n        this.setUserFromJwtToken(null, null, false);\n        if (!refreshTokenValid) {\n          this.translate.get('access.refresh-token-expired').subscribe(\n            (translation) => {\n              this.refreshTokenSubject.error(new Error(translation));\n              this.refreshTokenSubject = null;\n            }\n          );\n        } else {\n          const refreshTokenRequest = {\n            refreshToken\n          };\n          const refreshObservable = this.http.post<LoginResponse>('/api/auth/token', refreshTokenRequest, defaultHttpOptions());\n          refreshObservable.subscribe((loginResponse: LoginResponse) => {\n            if (loadUserElseStoreJwtToken) {\n              this.setUserFromJwtToken(loginResponse.token, loginResponse.refreshToken, false);\n            } else {\n              this.updateAndValidateTokens(loginResponse.token, loginResponse.refreshToken, true);\n            }\n            this.refreshTokenSubject.next(loginResponse);\n            this.refreshTokenSubject.complete();\n            this.refreshTokenSubject = null;\n          }, () => {\n            this.clearJwtToken();\n            this.refreshTokenSubject.error(new Error(this.translate.instant('access.refresh-token-failed')));\n            this.refreshTokenSubject = null;\n          });\n        }\n    }\n    return response;\n  }\n\n  private validateJwtToken(doRefresh): Observable<void> {\n    const subject = new ReplaySubject<void>();\n    if (!AuthService.isTokenValid('jwt_token')) {\n      if (doRefresh) {\n        this.refreshJwtToken(!doRefresh).subscribe(\n          () => {\n            subject.next();\n            subject.complete();\n          },\n          (err) => {\n            subject.error(err);\n          }\n        );\n      } else {\n        this.clearJwtToken();\n        subject.error(null);\n      }\n    } else {\n      subject.next();\n      subject.complete();\n    }\n    return subject;\n  }\n\n  public refreshTokenPending() {\n    return this.refreshTokenSubject !== null;\n  }\n\n  public setUserFromJwtToken(jwtToken, refreshToken, notify): Observable<boolean> {\n    const authenticatedSubject = new ReplaySubject<boolean>();\n    if (!jwtToken) {\n      AuthService.clearTokenData();\n      if (notify) {\n        this.notifyUnauthenticated();\n      }\n      authenticatedSubject.next(false);\n      authenticatedSubject.complete();\n    } else {\n      this.updateAndValidateTokens(jwtToken, refreshToken, true);\n      if (notify) {\n        this.notifyUserLoaded(false);\n        this.loadUser(false).subscribe(\n          (authPayload) => {\n            this.notifyUserLoaded(true);\n            this.notifyAuthenticated(authPayload);\n            authenticatedSubject.next(true);\n            authenticatedSubject.complete();\n          },\n          () => {\n            this.notifyUserLoaded(true);\n            this.notifyUnauthenticated();\n            authenticatedSubject.next(false);\n            authenticatedSubject.complete();\n          }\n        );\n      } else {\n        this.loadUser(false).subscribe(\n          () => {\n            authenticatedSubject.next(true);\n            authenticatedSubject.complete();\n          },\n          () => {\n            authenticatedSubject.next(false);\n            authenticatedSubject.complete();\n          }\n        );\n      }\n    }\n    return authenticatedSubject;\n  }\n\n  private updateAndValidateTokens(jwtToken, refreshToken, notify: boolean) {\n    this.updateAndValidateToken(jwtToken, 'jwt_token', notify);\n    this.updateAndValidateToken(refreshToken, 'refresh_token', notify);\n  }\n\n  public parsePublicId(): string {\n    const token = AuthService.getJwtToken();\n    if (token) {\n      const tokenData = this.jwtHelper.decodeToken(token);\n      if (tokenData && tokenData.isPublic) {\n        return tokenData.sub;\n      }\n    }\n    return null;\n  }\n\n  private notifyUnauthenticated() {\n    this.store.dispatch(new ActionAuthUnauthenticated());\n  }\n\n  private notifyAuthenticated(authPayload: AuthPayload) {\n    this.store.dispatch(new ActionAuthAuthenticated(authPayload));\n  }\n\n  private notifyUserLang(userLang: string) {\n    this.store.dispatch(new ActionSettingsChangeLanguage({userLang}));\n  }\n\n  private updateAndValidateToken(token, prefix, notify) {\n    let valid = false;\n    const tokenData = this.jwtHelper.decodeToken(token);\n    const issuedAt = tokenData.iat;\n    const expTime = tokenData.exp;\n    if (issuedAt && expTime) {\n      const ttl = expTime - issuedAt;\n      if (ttl > 0) {\n        const clientExpiration = new Date().valueOf() + ttl * 1000;\n        localStorage.setItem(prefix, token);\n        localStorage.setItem(prefix + '_expiration', '' + clientExpiration);\n        valid = true;\n      }\n    }\n    if (!valid && notify) {\n      this.notifyUnauthenticated();\n    }\n  }\n\n  private clearJwtToken() {\n    this.setUserFromJwtToken(null, null, true);\n  }\n\n  private userForceFullscreen(authPayload: AuthPayload): boolean {\n    return (authPayload.authUser && authPayload.authUser.isPublic) ||\n      (authPayload.userDetails && authPayload.userDetails.additionalInfo &&\n        authPayload.userDetails.additionalInfo.defaultDashboardFullscreen &&\n        authPayload.userDetails.additionalInfo.defaultDashboardFullscreen === true);\n  }\n\n  private userHasProfile(authUser: AuthUser): boolean {\n    return authUser && !authUser.isPublic;\n  }\n\n  private userHasDefaultDashboard(authState: AuthState): boolean {\n    if (authState && authState.userDetails && authState.userDetails.additionalInfo\n      && authState.userDetails.additionalInfo.defaultDashboardId) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  private fetchAllowedDashboardIds(authPayload: AuthPayload): Observable<string[]> {\n    if (authPayload.forceFullscreen && (authPayload.authUser.authority === Authority.TENANT_ADMIN ||\n      authPayload.authUser.authority === Authority.CUSTOMER_USER)) {\n      const pageLink = new PageLink(100);\n      let fetchDashboardsObservable: Observable<PageData<DashboardInfo>>;\n      if (authPayload.authUser.authority === Authority.TENANT_ADMIN) {\n        fetchDashboardsObservable = this.dashboardService.getTenantDashboards(pageLink);\n      } else {\n        fetchDashboardsObservable = this.dashboardService.getCustomerDashboards(authPayload.authUser.customerId, pageLink);\n      }\n      return fetchDashboardsObservable.pipe(\n        map((result) => {\n          const dashboards = result.data;\n          return dashboards.map(dashboard => dashboard.id.id);\n        })\n      );\n    } else {\n      return of([]);\n    }\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { ActionReducerMap, MetaReducer } from '@ngrx/store';\nimport { storeFreeze } from 'ngrx-store-freeze';\n\nimport { environment as env } from '@env/environment';\n\nimport { initStateFromLocalStorage } from './meta-reducers/init-state-from-local-storage.reducer';\nimport { debug } from './meta-reducers/debug.reducer';\nimport { LoadState } from './interceptors/load.models';\nimport { loadReducer } from './interceptors/load.reducer';\nimport { AuthState } from './auth/auth.models';\nimport { authReducer } from './auth/auth.reducer';\nimport { settingsReducer } from '@app/core/settings/settings.reducer';\nimport { SettingsState } from '@app/core/settings/settings.models';\nimport { Type } from '@angular/core';\nimport { SettingsEffects } from '@app/core/settings/settings.effects';\nimport { NotificationState } from '@app/core/notification/notification.models';\nimport { notificationReducer } from '@app/core/notification/notification.reducer';\nimport { NotificationEffects } from '@app/core/notification/notification.effects';\n\nexport const reducers: ActionReducerMap<AppState> = {\n  load: loadReducer,\n  auth: authReducer,\n  settings: settingsReducer,\n  notification: notificationReducer\n};\n\nexport const metaReducers: MetaReducer<AppState>[] = [\n  initStateFromLocalStorage\n];\nif (!env.production) {\n  metaReducers.unshift(storeFreeze);\n  metaReducers.unshift(debug);\n}\n\nexport const effects: Type<any>[] = [\n  SettingsEffects,\n  NotificationEffects\n];\n\nexport interface AppState {\n  load: LoadState;\n  auth: AuthState;\n  settings: SettingsState;\n  notification: NotificationState;\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { Hotkey, HotkeysService } from 'angular2-hotkeys';\n\n@Component({\n  selector : 'tb-hotkeys-cheatsheet',\n  styles : [`\n.tb-hotkeys-container {\n  display: table !important;\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  color: #333;\n  font-size: 1em;\n  background-color: rgba(255,255,255,0.9);\n  outline: 0;\n}\n.tb-hotkeys-container.fade {\n  z-index: -1024;\n  visibility: hidden;\n  opacity: 0;\n  -webkit-transition: opacity 0.15s linear;\n  -moz-transition: opacity 0.15s linear;\n  -o-transition: opacity 0.15s linear;\n  transition: opacity 0.15s linear;\n}\n.tb-hotkeys-container.fade.in {\n  z-index: 10002;\n  visibility: visible;\n  opacity: 1;\n}\n.tb-hotkeys-title {\n  font-weight: bold;\n  text-align: center;\n  font-size: 1.2em;\n}\n.tb-hotkeys {\n  width: 100%;\n  height: 100%;\n  display: table-cell;\n  vertical-align: middle;\n}\n.tb-hotkeys table {\n  margin: auto;\n  color: #333;\n}\n.tb-content {\n  display: table-cell;\n  vertical-align: middle;\n}\n.tb-hotkeys-keys {\n  padding: 5px;\n  text-align: right;\n}\n.tb-hotkeys-key {\n  display: inline-block;\n  color: #fff;\n  background-color: #333;\n  border: 1px solid #333;\n  border-radius: 5px;\n  text-align: center;\n  margin-right: 5px;\n  box-shadow: inset 0 1px 0 #666, 0 1px 0 #bbb;\n  padding: 5px 9px;\n  font-size: 1em;\n}\n.tb-hotkeys-text {\n  padding-left: 10px;\n  font-size: 1em;\n}\n.tb-hotkeys-close {\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  font-size: 2em;\n  font-weight: bold;\n  padding: 5px 10px;\n  border: 1px solid #ddd;\n  border-radius: 5px;\n  min-height: 45px;\n  min-width: 45px;\n  text-align: center;\n}\n.tb-hotkeys-close:hover {\n  background-color: #fff;\n  cursor: pointer;\n}\n@media all and (max-width: 500px) {\n  .tb-hotkeys {\n    font-size: 0.8em;\n  }\n}\n@media all and (min-width: 750px) {\n  .tb-hotkeys {\n    font-size: 1.2em;\n  }\n}  `],\n  template : `<div tabindex=\"-1\" class=\"tb-hotkeys-container fade\" [ngClass]=\"{'in': helpVisible}\" style=\"display:none\"><div class=\"tb-hotkeys\">\n  <h4 class=\"tb-hotkeys-title\">{{ title }}</h4>\n  <table *ngIf=\"helpVisible\"><tbody>\n    <tr *ngFor=\"let hotkey of hotkeysList\">\n      <td class=\"tb-hotkeys-keys\">\n        <span *ngFor=\"let key of hotkey.formatted\" class=\"tb-hotkeys-key\">{{ key }}</span>\n      </td>\n      <td class=\"tb-hotkeys-text\">{{ hotkey.description }}</td>\n    </tr>\n  </tbody></table>\n  <div class=\"tb-hotkeys-close\" (click)=\"toggleCheatSheet()\">&#215;</div>\n</div></div>`,\n})\nexport class TbCheatSheetComponent implements OnInit, OnDestroy {\n\n  helpVisible = false;\n  @Input() title = 'Keyboard Shortcuts:';\n\n  @Input()\n  hotkeys: Hotkey[];\n\n  hotkeysList: Hotkey[];\n\n  private mousetrap: MousetrapInstance;\n\n  constructor(private elementRef: ElementRef,\n              private hotkeysService: HotkeysService) {\n    this.mousetrap = new Mousetrap(this.elementRef.nativeElement);\n    this.mousetrap.bind('?', (event: KeyboardEvent, combo: string) => {\n      this.toggleCheatSheet();\n    });\n  }\n\n  public ngOnInit(): void {\n    if (this.hotkeys) {\n      this.hotkeysList = this.hotkeys.filter(hotkey => hotkey.description);\n    }\n  }\n\n  public setHotKeys(hotkeys: Hotkey[]) {\n    this.hotkeysList = hotkeys.filter(hotkey => hotkey.description);\n  }\n\n  public toggleCheatSheet(): void {\n    this.helpVisible = !this.helpVisible;\n  }\n\n  ngOnDestroy() {\n    this.mousetrap.unbind('?');\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Pipe, PipeTransform } from '@angular/core';\nimport { isNumber, isObject } from '@core/utils';\n\n@Pipe({name: 'tbJson'})\nexport class TbJsonPipe implements PipeTransform {\n  transform(value: any): string {\n    if (isObject(value)) {\n      return JSON.stringify(value);\n    } else if (isNumber(value)) {\n      return value.toString();\n    }\n    return value;\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\nimport { defaultHttpOptionsFromConfig, RequestConfig } from './http-utils';\nimport { Observable } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\nimport { PageLink } from '@shared/models/page/page-link';\nimport { PageData } from '@shared/models/page/page-data';\nimport { Tenant, TenantInfo } from '@shared/models/tenant.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TenantService {\n\n  constructor(\n    private http: HttpClient\n  ) { }\n\n  public getTenants(pageLink: PageLink, config?: RequestConfig): Observable<PageData<Tenant>> {\n    return this.http.get<PageData<Tenant>>(`/api/tenants${pageLink.toQuery()}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getTenantInfos(pageLink: PageLink, config?: RequestConfig): Observable<PageData<TenantInfo>> {\n    return this.http.get<PageData<TenantInfo>>(`/api/tenantInfos${pageLink.toQuery()}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getTenant(tenantId: string, config?: RequestConfig): Observable<Tenant> {\n    return this.http.get<Tenant>(`/api/tenant/${tenantId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getTenantInfo(tenantId: string, config?: RequestConfig): Observable<TenantInfo> {\n    return this.http.get<TenantInfo>(`/api/tenant/info/${tenantId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public saveTenant(tenant: Tenant, config?: RequestConfig): Observable<Tenant> {\n    return this.http.post<Tenant>('/api/tenant', tenant, defaultHttpOptionsFromConfig(config));\n  }\n\n  public deleteTenant(tenantId: string, config?: RequestConfig) {\n    return this.http.delete(`/api/tenant/${tenantId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { EntityId } from './entity-id';\nimport { EntityType } from '@shared/models/entity-type.models';\n\nexport class AlarmId implements EntityId {\n  entityType = EntityType.ALARM;\n  id: string;\n  constructor(id: string) {\n    this.id = id;\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport * as tv from 'tv4';\nimport ObjectPath from 'objectpath';\nimport _ from 'lodash';\nimport {\n  DefaultsFormOptions,\n  FormOption,\n  JsonFormData,\n  JsonSchemaData,\n  SchemaValidationResult\n} from './json-form.models';\nimport { isDefined, isEqual, isString, isUndefined } from '@core/utils';\n\nfunction validateBySchema(schema: any, value: any): SchemaValidationResult {\n  return tv.validateResult(value, schema);\n}\n\nfunction validate(form: any, value: any): SchemaValidationResult {\n\n  if (!form) {\n    return {valid: true};\n  }\n  const schema = form.schema;\n\n  if (!schema) {\n    return {valid: true};\n  }\n\n  if (value === '') {\n    value = undefined;\n  }\n\n  // Numbers fields will give a null value, which also means empty field\n  if (form.type === 'number' && value === null) {\n    value = undefined;\n  }\n\n  if (form.type === 'number' && isNaN(parseFloat(value))) {\n    value = undefined;\n  }\n  const wrap: any = {type: 'object', properties: {}};\n  const propName = form.key[form.key.length - 1];\n  wrap.properties[propName] = schema;\n\n  if (form.required) {\n    wrap.required = [propName];\n  }\n  const valueWrap = {};\n  if (typeof value !== 'undefined') {\n    valueWrap[propName] = value;\n  }\n\n  const tv4Result: SchemaValidationResult = tv.validateResult(valueWrap, wrap);\n  if (tv4Result != null && !tv4Result.valid && form.validationMessage != null && typeof value !== 'undefined') {\n    tv4Result.error.message = form.validationMessage;\n  }\n  return tv4Result;\n}\n\nfunction stripNullType(type: any): string {\n  if (Array.isArray(type) && type.length === 2) {\n    if (type[0] === 'null') {\n      return type[1];\n    }\n    if (type[1] === 'null') {\n      return type[0];\n    }\n  }\n  return type;\n}\n\nconst enumToTitleMap = (enm: string[]): { name: string, value: string }[] => {\n  const titleMap: { name: string, value: string }[] = [];\n  enm.forEach((name) => {\n    titleMap.push({name, value: name});\n  });\n  return titleMap;\n};\n\nconst canonicalTitleMap = (titleMap: any, originalEnum?: string[]): { name: string, value: string }[] => {\n  if (!_.isArray(titleMap)) {\n    const canonical: { name: string, value: string }[] = [];\n    if (originalEnum) {\n      originalEnum.forEach((value) => {\n        canonical.push({name: titleMap[value], value});\n      });\n    } else {\n      for (const k of Object.keys(titleMap)) {\n        if (titleMap.hasOwnProperty(k)) {\n          canonical.push({name: k, value: titleMap[k]});\n        }\n      }\n    }\n    return canonical;\n  }\n  return titleMap;\n};\n\nconst stdFormObj = (name: string, schema: any, options: DefaultsFormOptions): any => {\n  options = options || {};\n  const f: any = options.global && options.global.formDefaults ? _.cloneDeep(options.global.formDefaults) : {};\n  if (options.global && options.global.supressPropertyTitles === true) {\n    f.title = schema.title;\n  } else {\n    f.title = schema.title || name;\n  }\n\n  if (schema.description) {\n    f.description = schema.description;\n  }\n  if (options.required === true || schema.required === true) {\n    f.required = true;\n  }\n  if (schema.maxLength) {\n    f.maxlength = schema.maxLength;\n  }\n  if (schema.minLength) {\n    f.minlength = schema.minLength;\n  }\n  if (schema.readOnly || schema.readonly) {\n    f.readonly = true;\n  }\n  if (schema.minimum) {\n    f.minimum = schema.minimum + (schema.exclusiveMinimum ? 1 : 0);\n  }\n  if (schema.maximum) {\n    f.maximum = schema.maximum - (schema.exclusiveMaximum ? 1 : 0);\n  }\n\n  // Non standard attributes (DONT USE DEPRECATED)\n  // If you must set stuff like this in the schema use the x-schema-form attribute\n  if (schema.validationMessage) {\n    f.validationMessage = schema.validationMessage;\n  }\n  if (schema.enumNames) {\n    f.titleMap = canonicalTitleMap(schema.enumNames, schema.enum);\n  }\n  f.schema = schema;\n\n  // Ng model options doesn't play nice with undefined, might be defined\n  // globally though\n  f.ngModelOptions = f.ngModelOptions || {};\n\n  return f;\n};\n\nconst text = (name: string, schema: any, options: DefaultsFormOptions): any => {\n  if (stripNullType(schema.type) === 'string' && !schema.enum) {\n    const f = stdFormObj(name, schema, options);\n    f.key = options.path;\n    f.type = 'text';\n    options.lookup[ObjectPath.stringify(options.path)] = f;\n    return f;\n  }\n};\n\nconst numberType = (name: string, schema: any, options: DefaultsFormOptions): any => {\n  if (stripNullType(schema.type) === 'number') {\n    const f = stdFormObj(name, schema, options);\n    f.key = options.path;\n    f.type = 'number';\n    options.lookup[ObjectPath.stringify(options.path)] = f;\n    return f;\n  }\n};\n\nconst integer = (name: string, schema: any, options: DefaultsFormOptions): any => {\n  if (stripNullType(schema.type) === 'integer') {\n    const f = stdFormObj(name, schema, options);\n    f.key = options.path;\n    f.type = 'number';\n    options.lookup[ObjectPath.stringify(options.path)] = f;\n    return f;\n  }\n};\n\nconst date = (name: string, schema: any, options: DefaultsFormOptions): any => {\n  if (stripNullType(schema.type) === 'date') {\n    const f = stdFormObj(name, schema, options);\n    f.key = options.path;\n    f.type = 'date';\n    options.lookup[ObjectPath.stringify(options.path)] = f;\n    return f;\n  }\n};\n\nconst checkbox = (name: string, schema: any, options: DefaultsFormOptions): any => {\n  if (stripNullType(schema.type) === 'boolean') {\n    const f = stdFormObj(name, schema, options);\n    f.key = options.path;\n    f.type = 'checkbox';\n    options.lookup[ObjectPath.stringify(options.path)] = f;\n    return f;\n  }\n};\n\nconst select = (name: string, schema: any, options: DefaultsFormOptions): any => {\n  if (stripNullType(schema.type) === 'string' && schema.enum) {\n    const f = stdFormObj(name, schema, options);\n    f.key = options.path;\n    f.type = 'select';\n    if (!f.titleMap) {\n      f.titleMap = enumToTitleMap(schema.enum);\n    }\n    options.lookup[ObjectPath.stringify(options.path)] = f;\n    return f;\n  }\n};\n\nconst checkboxes = (name: string, schema: any, options: DefaultsFormOptions): any => {\n  if (stripNullType(schema.type) === 'array' && schema.items && schema.items.enum) {\n    const f = stdFormObj(name, schema, options);\n    f.key = options.path;\n    f.type = 'checkboxes';\n    if (!f.titleMap) {\n      f.titleMap = enumToTitleMap(schema.items.enum);\n    }\n    options.lookup[ObjectPath.stringify(options.path)] = f;\n    return f;\n  }\n};\n\nconst fieldset = (name: string, schema: any, options: DefaultsFormOptions): any => {\n  if (stripNullType(schema.type) === 'object') {\n    const f = stdFormObj(name, schema, options);\n    f.type = 'fieldset';\n    f.items = [];\n    options.lookup[ObjectPath.stringify(options.path)] = f;\n\n    // recurse down into properties\n    for (const k of Object.keys(schema.properties)) {\n      if (schema.properties.hasOwnProperty(k)) {\n        const path = options.path.slice();\n        path.push(k);\n        if (options.ignore[ObjectPath.stringify(path)] !== true) {\n          const required = schema.required && schema.required.indexOf(k) !== -1;\n\n          const def = defaultFormDefinition(k, schema.properties[k], {\n            path,\n            required: required || false,\n            lookup: options.lookup,\n            ignore: options.ignore,\n            global: options.global\n          });\n          if (def) {\n            f.items.push(def);\n          }\n        }\n      }\n    }\n    return f;\n  }\n};\n\nconst array = (name: string, schema: any, options: DefaultsFormOptions): any => {\n\n  if (stripNullType(schema.type) === 'array') {\n    const f = stdFormObj(name, schema, options);\n    f.type = 'array';\n    f.key = options.path;\n    options.lookup[ObjectPath.stringify(options.path)] = f;\n\n    // don't do anything if items is not defined.\n    if (typeof schema.items !== 'undefined') {\n      const required = schema.required && schema.required.indexOf(options.path[options.path.length - 1]) !== -1;\n\n      const arrPath = options.path.slice();\n      arrPath.push('');\n      const def = defaultFormDefinition(name, schema.items, {\n        path: arrPath,\n        required: required || false,\n        lookup: options.lookup,\n        ignore: options.ignore,\n        global: options.global\n      });\n      if (def) {\n        f.items = [def];\n      } else {\n        // This is the case that item only contains key value pair for rc-select multipel\n        f.items = schema.items;\n      }\n    }\n    return f;\n  }\n};\n\nconst defaults: { [key: string]: ((name: string, schema: any, options: DefaultsFormOptions) => any)[] } = {\n  string: [select, text],\n  object: [fieldset],\n  number: [numberType],\n  integer: [integer],\n  boolean: [checkbox],\n  array: [checkboxes, array],\n  date: [date]\n};\n\nfunction defaultFormDefinition(name: string, schema: any, options: DefaultsFormOptions): any {\n  const rules = defaults[stripNullType(schema.type)];\n  if (rules) {\n    let def;\n    for (const rule of rules) {\n      def = rule(name, schema, options);\n      if (def) {\n\n        // Do we have form defaults in the schema under the x-schema-form-attribute?\n        if (def.schema['x-schema-form'] && _.isObject(def.schema['x-schema-form'])) {\n          def = _.extend(def, def.schema['x-schema-form']);\n        }\n        return def;\n      }\n    }\n  }\n}\n\ninterface DefaultsFormData {\n  form: any[];\n  lookup: { [key: string]: any };\n}\n\nfunction getDefaults(schema: any, ignore: { [key: string]: boolean }, globalOptions: FormOption): DefaultsFormData {\n  const form = [];\n  const lookup: { [key: string]: any } = {};\n  ignore = ignore || {};\n  globalOptions = globalOptions || {};\n  if (stripNullType(schema.type) === 'object') {\n    for (const k of Object.keys(schema.properties)) {\n      if (schema.properties.hasOwnProperty(k)) {\n        if (ignore[k] !== true) {\n          const required = schema.required && schema.required.indexOf(k) !== -1;\n          const def = defaultFormDefinition(k, schema.properties[k], {\n            path: [k], // Path to this property in bracket notation.\n            lookup, // Extra map to register with. Optimization for merger.\n            ignore, // The ignore list of paths (sans root level name)\n            required, // Is it required? (v4 json schema style)\n            global: globalOptions // Global options, including form defaults\n          });\n          if (def) {\n            form.push(def);\n          }\n        }\n      }\n    }\n  } else {\n    throw new Error('Not implemented. Only type \"object\" allowed at root level of schema.');\n  }\n  return {form, lookup};\n}\n\nconst postProcessFn = (form: any[]): any[] => {\n  return form;\n};\n\nfunction merge(schema: any, form: any[], ignore: { [key: string]: boolean }, options: FormOption, isReadonly?: boolean): any[] {\n  form = form || ['*'];\n  options = options || {};\n  isReadonly = isReadonly || schema.readonly || schema.readOnly;\n  const stdForm = getDefaults(schema, ignore, options);\n  const idx = form.indexOf('*');\n  if (idx !== -1) {\n    form = form.slice(0, idx).concat(stdForm.form).concat(form.slice(idx + 1));\n  }\n  const lookup = stdForm.lookup;\n  return postProcessFn(form.map((obj) => {\n\n    if (typeof obj === 'string') {\n      obj = {key: obj};\n    }\n\n    if (obj.key) {\n      if (typeof obj.key === 'string') {\n        obj.key = ObjectPath.parse(obj.key);\n      }\n    }\n\n    if (obj.titleMap) {\n      obj.titleMap = canonicalTitleMap(obj.titleMap);\n    }\n\n    if (obj.itemForm) {\n      obj.items = [];\n      const str: string = ObjectPath.stringify(obj.key);\n      const lookupForm = lookup[str];\n      lookupForm.items.forEach((item) => {\n        const o = _.cloneDeep(obj.itemForm);\n        o.key = item.key;\n        obj.items.push(o);\n      });\n    }\n\n    if (obj.key) {\n      const strid: string = ObjectPath.stringify(obj.key);\n      if (lookup[strid]) {\n        const schemaDefaults = lookup[strid];\n        for (const k of Object.keys(schemaDefaults)) {\n          if (schemaDefaults.hasOwnProperty(k)) {\n            if (obj[k] === undefined) {\n              obj[k] = schemaDefaults[k];\n            }\n          }\n        }\n      }\n    }\n\n    if (isReadonly === true) {\n      obj.readonly = true;\n    }\n\n    if (obj.items && obj.items.length > 0) {\n      obj.items = merge(schema, obj.items, ignore, options, obj.readonly);\n    }\n\n    if (obj.tabs) {\n      obj.tabs.forEach((tab) => {\n        tab.items = merge(schema, tab.items, ignore, options, obj.readonly);\n      });\n    }\n\n    if (obj.type === 'checkbox' && _.isUndefined(obj.schema.default)) {\n      obj.schema.default = false;\n    }\n\n    return obj;\n  }));\n}\n\nfunction selectOrSet(projection: string | (string | number)[], obj: any, valueToSet?: any): any {\n  const numRe = /^\\d+$/;\n\n  if (!obj) {\n    obj = this;\n  }\n  const parts = typeof projection === 'string' ? ObjectPath.parse(projection) : projection;\n\n  if (typeof valueToSet !== 'undefined' && parts.length === 1) {\n    obj[parts[0]] = valueToSet;\n    return obj;\n  }\n\n  if (typeof valueToSet !== 'undefined' && typeof obj[parts[0]] === 'undefined') {\n    obj[parts[0]] = parts.length > 2 && numRe.test(parts[1]) ? [] : {};\n  }\n\n  let value = obj[parts[0]];\n  for (let i = 1; i < parts.length; i++) {\n    if (parts[i] === '') {\n      return undefined;\n    }\n    if (typeof valueToSet !== 'undefined') {\n      if (i === parts.length - 1) {\n        value[parts[i]] = valueToSet;\n        return valueToSet;\n      } else {\n        let tmp = value[parts[i]];\n        if (typeof tmp === 'undefined' || tmp === null) {\n          tmp = numRe.test(parts[i + 1]) ? [] : {};\n          value[parts[i]] = tmp;\n        }\n        value = tmp;\n      }\n    } else if (value) {\n      value = value[parts[i]];\n    }\n  }\n  return value;\n}\n\nfunction updateValue(projection: string | (string | number)[], obj: any, valueToSet: any): boolean {\n  const numRe = /^\\d+$/;\n\n  if (!obj) {\n    obj = this;\n  }\n\n  if (!obj) {\n    return false;\n  }\n\n  const parts: string[] = isString(projection) ? ObjectPath.parse(projection) : projection;\n\n  if (parts.length === 1) {\n    return setValue(obj, parts[0], valueToSet);\n  }\n\n  if (isUndefined(obj[parts[0]])) {\n    obj[parts[0]] = parts.length > 2 && numRe.test(parts[1]) ? [] : {};\n  }\n\n  let value = obj[parts[0]];\n  for (let i = 1; i < parts.length; i++) {\n    if (parts[i] === '') {\n      return false;\n    }\n    if (i === parts.length - 1) {\n      return setValue(value, parts[i], valueToSet);\n    } else {\n      let tmp = value[parts[i]];\n      if (isUndefined(tmp) || tmp === null) {\n        tmp = numRe.test(parts[i + 1]) ? [] : {};\n        value[parts[i]] = tmp;\n      }\n      value = tmp;\n    }\n  }\n  return value;\n}\n\n\nfunction setValue(obj: any, key: string, val: any): boolean {\n  let changed = false;\n  if (obj) {\n    if (isUndefined(val)) {\n      if (isDefined(obj[key])) {\n        delete obj[key];\n        changed = true;\n      }\n    } else {\n      changed = !isEqual(obj[key], val);\n      obj[key] = val;\n    }\n  }\n  return changed;\n}\n\nfunction traverseSchema(schema: JsonSchemaData, fn: (prop: any, path: string[]) => any, path?: string[], ignoreArrays?: boolean) {\n  ignoreArrays = typeof ignoreArrays !== 'undefined' ? ignoreArrays : true;\n\n  path = path || [];\n\n  const traverse = ($schema: JsonSchemaData, $fn: (prop: any, path: string[]) => any, $path: string[]) => {\n    $fn($schema, $path);\n    if ($schema.properties) {\n      for (const k of Object.keys($schema.properties)) {\n        if ($schema.properties.hasOwnProperty(k)) {\n          const currentPath = $path.slice();\n          currentPath.push(k);\n          traverse($schema.properties[k], $fn, currentPath);\n        }\n      }\n    }\n    if (!ignoreArrays && $schema.items) {\n      const arrPath = $path.slice();\n      arrPath.push('');\n      traverse($schema.items, $fn, arrPath);\n    }\n  };\n\n  traverse(schema, fn, path || []);\n}\n\nfunction traverseForm(form: JsonFormData, fn: (form: JsonFormData) => any) {\n  fn(form);\n  if (form.items) {\n    form.items.forEach((f) => {\n      traverseForm(f, fn);\n    });\n  }\n\n  if (form.tabs) {\n    form.tabs.forEach((tab) => {\n      tab.items.forEach((f) => {\n        traverseForm(f, fn);\n      });\n    });\n  }\n}\n\n\nconst utils = {\n  validateBySchema,\n  validate,\n  merge,\n  updateValue,\n  selectOrSet,\n  traverseSchema,\n  traverseForm\n};\nexport default utils;\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, EventEmitter, forwardRef, Input, Output } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\n\n@Component({\n  selector: 'tb-checkbox',\n  templateUrl: './tb-checkbox.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => TbCheckboxComponent),\n      multi: true\n    }\n  ]\n})\nexport class TbCheckboxComponent implements ControlValueAccessor {\n\n  innerValue: boolean;\n\n  @Input() disabled: boolean;\n  @Input() trueValue: any = true;\n  @Input() falseValue: any = false;\n  @Output() valueChange = new EventEmitter();\n\n  private propagateChange = (_: any) => {};\n\n  onHostChange(ev) {\n    this.propagateChange(ev.checked ? this.trueValue : this.falseValue);\n  }\n\n  modelChange($event) {\n    if ($event) {\n      this.innerValue = true;\n      this.valueChange.emit(this.trueValue);\n    } else {\n      this.innerValue = false;\n      this.valueChange.emit(this.falseValue);\n    }\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n  }\n\n  writeValue(obj: any): void {\n    if (obj === this.trueValue) {\n      this.innerValue = true;\n    } else {\n      this.innerValue = false;\n    }\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<mat-checkbox [(ngModel)]=\"innerValue\"\n              (ngModelChange)=\"modelChange($event)\"\n              [checked]=\"innerValue\"\n              [disabled]=\"disabled\"\n              (change)=\"onHostChange($event)\">\n  <ng-content></ng-content>\n</mat-checkbox>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  EventEmitter,\n  forwardRef,\n  Input,\n  OnChanges,\n  OnDestroy,\n  Output,\n  SimpleChanges,\n  ViewChild\n} from '@angular/core';\nimport { PageComponent } from '@shared/components/page.component';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { FlowDirective } from '@flowjs/ngx-flow';\nimport { TranslateService } from '@ngx-translate/core';\nimport { UtilsService } from '@core/services/utils.service';\n\n@Component({\n  selector: 'tb-file-input',\n  templateUrl: './file-input.component.html',\n  styleUrls: ['./file-input.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => FileInputComponent),\n      multi: true\n    }\n  ]\n})\nexport class FileInputComponent extends PageComponent implements AfterViewInit, OnDestroy, ControlValueAccessor, OnChanges {\n\n  @Input()\n  label: string;\n\n  @Input()\n  accept = '*/*';\n\n  @Input()\n  noFileText = 'import.no-file';\n\n  @Input()\n  inputId = this.utils.guid();\n\n  @Input()\n  allowedExtensions: string;\n\n  @Input()\n  dropLabel: string;\n\n  @Input()\n  contentConvertFunction: (content: string) => any;\n\n  private requiredValue: boolean;\n\n  get required(): boolean {\n    return this.requiredValue;\n  }\n\n  @Input()\n  set required(value: boolean) {\n    const newVal = coerceBooleanProperty(value);\n    if (this.requiredValue !== newVal) {\n      this.requiredValue = newVal;\n    }\n  }\n\n  private requiredAsErrorValue: boolean;\n\n  get requiredAsError(): boolean {\n    return this.requiredAsErrorValue;\n  }\n\n  @Input()\n  set requiredAsError(value: boolean) {\n    const newVal = coerceBooleanProperty(value);\n    if (this.requiredAsErrorValue !== newVal) {\n      this.requiredAsErrorValue = newVal;\n    }\n  }\n\n  @Input()\n  disabled: boolean;\n\n  @Input()\n  existingFileName: string;\n\n  @Input()\n  readAsBinary = false;\n\n  @Input()\n  workFromFileObj = false;\n\n  private multipleFileValue = false;\n\n  @Input()\n  set multipleFile(value: boolean) {\n    this.multipleFileValue = value;\n    if (this.flow?.flowJs) {\n      this.updateMultipleFileMode(this.multipleFile);\n    }\n  }\n\n  get multipleFile(): boolean {\n    return this.multipleFileValue;\n  }\n\n  @Output()\n  fileNameChanged = new EventEmitter<string|string[]>();\n\n  fileName: string | string[];\n  fileContent: any;\n  files: File[];\n\n  @ViewChild('flow', {static: true})\n  flow: FlowDirective;\n\n  @ViewChild('flowInput', {static: true})\n  flowInput: ElementRef;\n\n  autoUploadSubscription: Subscription;\n\n  private propagateChange = null;\n\n  constructor(protected store: Store<AppState>,\n              private utils: UtilsService,\n              public translate: TranslateService) {\n    super(store);\n  }\n\n  ngAfterViewInit() {\n    this.autoUploadSubscription = this.flow.events$.subscribe(event => {\n      if (event.type === 'filesAdded') {\n        const readers = [];\n        (event.event[0] as flowjs.FlowFile[]).forEach(file => {\n          if (this.filterFile(file)) {\n            readers.push(this.readerAsFile(file));\n          }\n        });\n        if (readers.length) {\n          Promise.all(readers).then((files) => {\n            files = files.filter(file => file.fileContent != null || file.files != null);\n            if (files.length === 1) {\n              this.fileContent = files[0].fileContent;\n              this.fileName = files[0].fileName;\n              this.files = files[0].files;\n              this.updateModel();\n            } else if (files.length > 1) {\n              this.fileContent = files.map(content => content.fileContent);\n              this.fileName = files.map(content => content.fileName);\n              this.files = files.map(content => content.files);\n              this.updateModel();\n            }\n          });\n        }\n      }\n    });\n    if (!this.multipleFile) {\n      this.updateMultipleFileMode(this.multipleFile);\n    }\n  }\n\n  private readerAsFile(file: flowjs.FlowFile): Promise<any> {\n    return new Promise((resolve) => {\n      const reader = new FileReader();\n      reader.onload = () => {\n        let fileName = null;\n        let fileContent = null;\n        let files = null;\n        if (typeof reader.result === 'string') {\n          fileContent = reader.result;\n          if (fileContent && fileContent.length > 0) {\n            if (!this.workFromFileObj) {\n              if (this.contentConvertFunction) {\n                fileContent = this.contentConvertFunction(fileContent);\n              }\n              if (fileContent) {\n                fileName = file.name;\n              }\n            } else {\n              files = file.file;\n              fileName = file.name;\n            }\n          }\n        }\n        resolve({fileContent, fileName, files});\n      };\n      reader.onerror = () => {\n        resolve({fileContent: null, fileName: null, files: null});\n      };\n      if (this.readAsBinary) {\n        reader.readAsBinaryString(file.file);\n      } else {\n        reader.readAsText(file.file);\n      }\n    });\n  }\n\n  private filterFile(file: flowjs.FlowFile): boolean {\n    if (this.allowedExtensions) {\n      return this.allowedExtensions.split(',').indexOf(file.getExtension()) > -1;\n    } else {\n      return true;\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.autoUploadSubscription) {\n      this.autoUploadSubscription.unsubscribe();\n    }\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n  }\n\n  writeValue(value: any): void {\n    let fileName = null;\n    if (this.workFromFileObj && value instanceof File) {\n      fileName = Array.isArray(value) ? value.map(file => file.name) : value.name;\n    }\n    this.fileName = this.existingFileName || fileName;\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    for (const propName of Object.keys(changes)) {\n      const change = changes[propName];\n      if (change.currentValue !== change.previousValue) {\n        if (propName === 'existingFileName') {\n          this.fileName = this.existingFileName || null;\n        }\n      }\n    }\n  }\n\n  private updateModel() {\n    if (this.workFromFileObj) {\n      this.propagateChange(this.files);\n    } else {\n      this.propagateChange(this.fileContent);\n      this.fileNameChanged.emit(this.fileName);\n    }\n  }\n\n  clearFile() {\n    this.fileName = null;\n    this.fileContent = null;\n    this.files = null;\n    this.updateModel();\n  }\n\n  private updateMultipleFileMode(multiple: boolean) {\n    this.flow.flowJs.opts.singleFile = !multiple;\n    if (!multiple) {\n      this.flowInput.nativeElement.removeAttribute('multiple');\n    }\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<div class=\"tb-container\">\n  <label class=\"tb-title\">{{ label }}</label>\n  <ng-container #flow=\"flow\"\n                [flowConfig]=\"{allowDuplicateUploads: true}\">\n    <div class=\"tb-file-select-container\">\n      <div class=\"tb-file-clear-container\">\n        <button mat-button mat-icon-button color=\"primary\"\n                type=\"button\"\n                (click)=\"clearFile()\"\n                class=\"tb-file-clear-btn\"\n                matTooltip=\"{{ 'action.remove' | translate }}\"\n                matTooltipPosition=\"above\">\n          <mat-icon>close</mat-icon>\n        </button>\n      </div>\n      <div class=\"drop-area tb-flow-drop\"\n           flowDrop\n           [flow]=\"flow.flowJs\">\n        <label for=\"{{inputId}}\">{{ dropLabel }}</label>\n        <input class=\"file-input\" flowButton #flowInput type=\"file\" [flow]=\"flow.flowJs\" [flowAttributes]=\"{accept: accept}\" id=\"{{inputId}}\">\n      </div>\n    </div>\n  </ng-container>\n</div>\n<div>\n  <tb-error *ngIf=\"!fileName && required && requiredAsError\" error=\"{{ noFileText | translate }}\"></tb-error>\n  <div *ngIf=\"!fileName && !requiredAsError\" translate>{{ noFileText }}</div>\n  <div *ngIf=\"fileName\">{{ fileName }}</div>\n</div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { AfterViewInit, Component, ElementRef, forwardRef, Input, OnInit, ViewChild } from '@angular/core';\nimport { ControlValueAccessor, FormBuilder, FormGroup, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { Observable, of } from 'rxjs';\nimport { PageLink } from '@shared/models/page/page-link';\nimport { Direction } from '@shared/models/page/sort-order';\nimport { catchError, debounceTime, distinctUntilChanged, map, startWith, switchMap, tap } from 'rxjs/operators';\nimport { emptyPageData, PageData } from '@shared/models/page/page-data';\nimport { DashboardInfo } from '@app/shared/models/dashboard.models';\nimport { DashboardService } from '@core/http/dashboard.service';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@app/core/core.state';\nimport { getCurrentAuthUser } from '@app/core/auth/auth.selectors';\nimport { Authority } from '@shared/models/authority.enum';\nimport { TranslateService } from '@ngx-translate/core';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { FloatLabelType } from '@angular/material/form-field/form-field';\n\n@Component({\n  selector: 'tb-dashboard-autocomplete',\n  templateUrl: './dashboard-autocomplete.component.html',\n  styleUrls: [],\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => DashboardAutocompleteComponent),\n    multi: true\n  }]\n})\nexport class DashboardAutocompleteComponent implements ControlValueAccessor, OnInit, AfterViewInit {\n\n  selectDashboardFormGroup: FormGroup;\n\n  modelValue: DashboardInfo | string | null;\n\n  @Input()\n  useIdValue = true;\n\n  @Input()\n  selectFirstDashboard = false;\n\n  @Input()\n  placeholder: string;\n\n  @Input()\n  dashboardsScope: 'customer' | 'tenant';\n\n  @Input()\n  tenantId: string;\n\n  @Input()\n  customerId: string;\n\n  @Input()\n  floatLabel: FloatLabelType = 'auto';\n\n  private requiredValue: boolean;\n  get required(): boolean {\n    return this.requiredValue;\n  }\n  @Input()\n  set required(value: boolean) {\n    this.requiredValue = coerceBooleanProperty(value);\n  }\n\n  @Input()\n  disabled: boolean;\n\n  @ViewChild('dashboardInput', {static: true}) dashboardInput: ElementRef;\n\n  filteredDashboards: Observable<Array<DashboardInfo>>;\n\n  searchText = '';\n\n  private propagateChange = (v: any) => { };\n\n  constructor(private store: Store<AppState>,\n              public translate: TranslateService,\n              private dashboardService: DashboardService,\n              private fb: FormBuilder) {\n    this.selectDashboardFormGroup = this.fb.group({\n      dashboard: [null]\n    });\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  ngOnInit() {\n    this.filteredDashboards = this.selectDashboardFormGroup.get('dashboard').valueChanges\n      .pipe(\n        debounceTime(150),\n        tap(value => {\n          let modelValue;\n          if (typeof value === 'string' || !value) {\n            modelValue = null;\n          } else {\n            modelValue = this.useIdValue ? value.id.id : value;\n          }\n          this.updateView(modelValue);\n        }),\n        startWith<string | DashboardInfo>(''),\n        map(value => value ? (typeof value === 'string' ? value : value.name) : ''),\n        distinctUntilChanged(),\n        switchMap(name => this.fetchDashboards(name) )\n      );\n  }\n\n  ngAfterViewInit(): void {\n    // this.selectFirstDashboardIfNeeded();\n  }\n\n  selectFirstDashboardIfNeeded(): void {\n    if (this.selectFirstDashboard && !this.modelValue) {\n      this.getDashboards(new PageLink(1)).subscribe(\n        (data) => {\n          if (data.data.length) {\n            const dashboard = data.data[0];\n            this.modelValue = this.useIdValue ? dashboard.id.id : dashboard;\n            this.selectDashboardFormGroup.get('dashboard').patchValue(dashboard, {emitEvent: false});\n            this.propagateChange(this.modelValue);\n          }\n        }\n      );\n    }\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    if (this.disabled) {\n      this.selectDashboardFormGroup.disable({emitEvent: false});\n    } else {\n      this.selectDashboardFormGroup.enable({emitEvent: false});\n    }\n  }\n\n  writeValue(value: DashboardInfo | string | null): void {\n    this.searchText = '';\n    if (value != null) {\n      if (typeof value === 'string') {\n        this.dashboardService.getDashboardInfo(value).subscribe(\n          (dashboard) => {\n            this.modelValue = this.useIdValue ? dashboard.id.id : dashboard;\n            this.selectDashboardFormGroup.get('dashboard').patchValue(dashboard, {emitEvent: true});\n          }\n        );\n      } else {\n        this.modelValue = this.useIdValue ? value.id.id : value;\n        this.selectDashboardFormGroup.get('dashboard').patchValue(value, {emitEvent: true});\n      }\n    } else {\n      this.modelValue = null;\n      this.selectDashboardFormGroup.get('dashboard').patchValue(null, {emitEvent: true});\n      this.selectFirstDashboardIfNeeded();\n    }\n  }\n\n  updateView(value: DashboardInfo | string | null) {\n    if (this.modelValue !== value) {\n      this.modelValue = value;\n      this.propagateChange(this.modelValue);\n    }\n  }\n\n  displayDashboardFn(dashboard?: DashboardInfo): string | undefined {\n    return dashboard ? dashboard.title : undefined;\n  }\n\n  fetchDashboards(searchText?: string): Observable<Array<DashboardInfo>> {\n    this.searchText = searchText;\n    const pageLink = new PageLink(10, 0, searchText, {\n      property: 'title',\n      direction: Direction.ASC\n    });\n    return this.getDashboards(pageLink).pipe(\n      catchError(() => of(emptyPageData<DashboardInfo>())),\n      map(pageData => {\n        return pageData.data;\n      })\n    );\n  }\n\n  getDashboards(pageLink: PageLink): Observable<PageData<DashboardInfo>> {\n    let dashboardsObservable: Observable<PageData<DashboardInfo>>;\n    const authUser = getCurrentAuthUser(this.store);\n    if (this.dashboardsScope === 'customer' || authUser.authority === Authority.CUSTOMER_USER) {\n      if (this.customerId) {\n        dashboardsObservable = this.dashboardService.getCustomerDashboards(this.customerId, pageLink,\n          {ignoreLoading: true});\n      } else {\n        dashboardsObservable = of(emptyPageData());\n      }\n    } else {\n      if (authUser.authority === Authority.SYS_ADMIN) {\n        if (this.tenantId) {\n          dashboardsObservable = this.dashboardService.getTenantDashboardsByTenantId(this.tenantId, pageLink,\n            {ignoreLoading: true});\n        } else {\n          dashboardsObservable = of(emptyPageData());\n        }\n      } else {\n        dashboardsObservable = this.dashboardService.getTenantDashboards(pageLink,\n          {ignoreLoading: true});\n      }\n    }\n    return dashboardsObservable;\n  }\n\n  clear() {\n    this.selectDashboardFormGroup.get('dashboard').patchValue(null, {emitEvent: true});\n    setTimeout(() => {\n      this.dashboardInput.nativeElement.blur();\n      this.dashboardInput.nativeElement.focus();\n    }, 0);\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<mat-form-field [formGroup]=\"selectDashboardFormGroup\" class=\"mat-block\" [floatLabel]=\"floatLabel\">\n  <input matInput type=\"text\" placeholder=\"{{ placeholder || ('dashboard.dashboard' | translate) }}\"\n         #dashboardInput\n         formControlName=\"dashboard\"\n         [required]=\"required\"\n         [matAutocomplete]=\"dashboardAutocomplete\">\n  <button *ngIf=\"selectDashboardFormGroup.get('dashboard').value && !disabled\"\n          type=\"button\"\n          matSuffix mat-button mat-icon-button aria-label=\"Clear\"\n          (click)=\"clear()\">\n    <mat-icon class=\"material-icons\">close</mat-icon>\n  </button>\n  <mat-autocomplete\n    class=\"tb-autocomplete\"\n    #dashboardAutocomplete=\"matAutocomplete\"\n    [displayWith]=\"displayDashboardFn\">\n    <mat-option *ngFor=\"let dashboard of filteredDashboards | async\" [value]=\"dashboard\">\n      <span [innerHTML]=\"dashboard.title | highlight:searchText\"></span>\n    </mat-option>\n    <mat-option *ngIf=\"!(filteredDashboards | async)?.length\" [value]=\"null\">\n      <span>\n          {{ translate.get('dashboard.no-dashboards-matching', {entity: searchText}) | async }}\n      </span>\n    </mat-option>\n  </mat-autocomplete>\n  <mat-error>\n    <ng-content select=\"[tb-error]\"></ng-content>\n  </mat-error>\n  <mat-hint>\n    <ng-content select=\"[tb-hint]\"></ng-content>\n  </mat-hint>\n</mat-form-field>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\nimport { HideNotification, NotificationMessage } from '@app/core/notification/notification.models';\nimport { Observable, Subject } from 'rxjs';\n\n\n@Injectable(\n  {\n    providedIn: 'root'\n  }\n)\nexport class NotificationService {\n\n  private notificationSubject: Subject<NotificationMessage> = new Subject();\n\n  private hideNotificationSubject: Subject<HideNotification> = new Subject();\n\n  constructor(\n  ) {\n  }\n\n  dispatchNotification(notification: NotificationMessage) {\n    this.notificationSubject.next(notification);\n  }\n\n  hideNotification(hideNotification: HideNotification) {\n    this.hideNotificationSubject.next(hideNotification);\n  }\n\n  getNotification(): Observable<NotificationMessage> {\n    return this.notificationSubject.asObservable();\n  }\n\n  getHideNotification(): Observable<HideNotification> {\n    return this.hideNotificationSubject.asObservable();\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { InterceptorHttpParams } from '../interceptors/interceptor-http-params';\nimport { HttpHeaders } from '@angular/common/http';\nimport { InterceptorConfig } from '../interceptors/interceptor-config';\n\nexport interface RequestConfig {\n  ignoreLoading?: boolean;\n  ignoreErrors?: boolean;\n  resendRequest?: boolean;\n}\n\nexport function defaultHttpOptionsFromConfig(config?: RequestConfig) {\n  if (!config) {\n    config = {};\n  }\n  return defaultHttpOptions(config.ignoreLoading, config.ignoreErrors, config.resendRequest);\n}\n\nexport function defaultHttpOptions(ignoreLoading: boolean = false,\n                                   ignoreErrors: boolean = false,\n                                   resendRequest: boolean = false) {\n  return {\n    headers: new HttpHeaders({'Content-Type': 'application/json'}),\n    params: new InterceptorHttpParams(new InterceptorConfig(ignoreLoading, ignoreErrors, resendRequest))\n  };\n}\n\nexport function defaultHttpUploadOptions(ignoreLoading: boolean = false,\n                                         ignoreErrors: boolean = false,\n                                         resendRequest: boolean = false) {\n  return {\n    params: new InterceptorHttpParams(new InterceptorConfig(ignoreLoading, ignoreErrors, resendRequest))\n  };\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Inject, Injectable } from '@angular/core';\nimport { defaultHttpOptions, defaultHttpOptionsFromConfig, RequestConfig } from './http-utils';\nimport { Observable } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\nimport { PageLink } from '@shared/models/page/page-link';\nimport { PageData } from '@shared/models/page/page-data';\nimport { Dashboard, DashboardInfo, HomeDashboard, HomeDashboardInfo } from '@shared/models/dashboard.models';\nimport { WINDOW } from '@core/services/window.service';\nimport { NavigationEnd, Router } from '@angular/router';\nimport { filter, map, publishReplay, refCount } from 'rxjs/operators';\n\n// @dynamic\n@Injectable({\n  providedIn: 'root'\n})\nexport class DashboardService {\n\n  stDiffObservable: Observable<number>;\n  currentUrl: string;\n\n  constructor(\n    private http: HttpClient,\n    private router: Router,\n    @Inject(WINDOW) private window: Window\n  ) {\n    this.currentUrl = this.router.url.split('?')[0];\n    this.router.events.pipe(filter(event => event instanceof NavigationEnd)).subscribe(\n      () => {\n        const newUrl = this.router.url.split('?')[0];\n        if (this.currentUrl !== newUrl) {\n          this.stDiffObservable = null;\n          this.currentUrl = newUrl;\n        }\n      }\n    );\n  }\n\n  public getTenantDashboards(pageLink: PageLink, config?: RequestConfig): Observable<PageData<DashboardInfo>> {\n    return this.http.get<PageData<DashboardInfo>>(`/api/tenant/dashboards${pageLink.toQuery()}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getTenantDashboardsByTenantId(tenantId: string, pageLink: PageLink,\n                                       config?: RequestConfig): Observable<PageData<DashboardInfo>> {\n    return this.http.get<PageData<DashboardInfo>>(`/api/tenant/${tenantId}/dashboards${pageLink.toQuery()}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getCustomerDashboards(customerId: string, pageLink: PageLink, config?: RequestConfig): Observable<PageData<DashboardInfo>> {\n    return this.http.get<PageData<DashboardInfo>>(`/api/customer/${customerId}/dashboards${pageLink.toQuery()}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getDashboard(dashboardId: string, config?: RequestConfig): Observable<Dashboard> {\n    return this.http.get<Dashboard>(`/api/dashboard/${dashboardId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getDashboardInfo(dashboardId: string, config?: RequestConfig): Observable<DashboardInfo> {\n    return this.http.get<DashboardInfo>(`/api/dashboard/info/${dashboardId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public saveDashboard(dashboard: Dashboard, config?: RequestConfig): Observable<Dashboard> {\n    return this.http.post<Dashboard>('/api/dashboard', dashboard, defaultHttpOptionsFromConfig(config));\n  }\n\n  public deleteDashboard(dashboardId: string, config?: RequestConfig) {\n    return this.http.delete(`/api/dashboard/${dashboardId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public assignDashboardToCustomer(customerId: string, dashboardId: string,\n                                   config?: RequestConfig): Observable<Dashboard> {\n    return this.http.post<Dashboard>(`/api/customer/${customerId}/dashboard/${dashboardId}`,\n      null, defaultHttpOptionsFromConfig(config));\n  }\n\n  public unassignDashboardFromCustomer(customerId: string, dashboardId: string,\n                                       config?: RequestConfig) {\n    return this.http.delete(`/api/customer/${customerId}/dashboard/${dashboardId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public makeDashboardPublic(dashboardId: string, config?: RequestConfig): Observable<Dashboard> {\n    return this.http.post<Dashboard>(`/api/customer/public/dashboard/${dashboardId}`, null,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public makeDashboardPrivate(dashboardId: string, config?: RequestConfig): Observable<Dashboard> {\n    return this.http.delete<Dashboard>(`/api/customer/public/dashboard/${dashboardId}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public updateDashboardCustomers(dashboardId: string, customerIds: Array<string>,\n                                  config?: RequestConfig): Observable<Dashboard> {\n    return this.http.post<Dashboard>(`/api/dashboard/${dashboardId}/customers`, customerIds,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public addDashboardCustomers(dashboardId: string, customerIds: Array<string>,\n                               config?: RequestConfig): Observable<Dashboard> {\n    return this.http.post<Dashboard>(`/api/dashboard/${dashboardId}/customers/add`, customerIds,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public removeDashboardCustomers(dashboardId: string, customerIds: Array<string>,\n                                  config?: RequestConfig): Observable<Dashboard> {\n    return this.http.post<Dashboard>(`/api/dashboard/${dashboardId}/customers/remove`, customerIds,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getHomeDashboard(config?: RequestConfig): Observable<HomeDashboard> {\n    return this.http.get<HomeDashboard>('/api/dashboard/home', defaultHttpOptionsFromConfig(config));\n  }\n\n  public getTenantHomeDashboardInfo(config?: RequestConfig): Observable<HomeDashboardInfo> {\n    return this.http.get<HomeDashboardInfo>('/api/tenant/dashboard/home/info', defaultHttpOptionsFromConfig(config));\n  }\n\n  public setTenantHomeDashboardInfo(homeDashboardInfo: HomeDashboardInfo, config?: RequestConfig): Observable<any> {\n    return this.http.post<any>('/api/tenant/dashboard/home/info', homeDashboardInfo,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getPublicDashboardLink(dashboard: DashboardInfo): string | null {\n    if (dashboard && dashboard.assignedCustomers && dashboard.assignedCustomers.length > 0) {\n      const publicCustomers = dashboard.assignedCustomers\n        .filter(customerInfo => customerInfo.public);\n      if (publicCustomers.length > 0) {\n        const publicCustomerId = publicCustomers[0].customerId.id;\n        let url = this.window.location.protocol + '//' + this.window.location.hostname;\n        const port = this.window.location.port;\n        if (port && port.length > 0 && port !== '80' && port !== '443') {\n          url += ':' + port;\n        }\n        url += `/dashboard/${dashboard.id.id}?publicId=${publicCustomerId}`;\n        return url;\n      }\n    }\n    return null;\n  }\n\n  public getServerTimeDiff(): Observable<number> {\n    if (!this.stDiffObservable) {\n      const url = '/api/dashboard/serverTime';\n      const ct1 = Date.now();\n      this.stDiffObservable = this.http.get<number>(url, defaultHttpOptions(true)).pipe(\n        map((st) => {\n          const ct2 = Date.now();\n          const stDiff = Math.ceil(st - (ct1 + ct2) / 2);\n          return stDiff;\n        }),\n        publishReplay(1),\n        refCount()\n      );\n    }\n    return this.stDiffObservable;\n  }\n\n  public getEdgeDashboards(edgeId: string, pageLink: PageLink, type: string = '',\n                           config?: RequestConfig): Observable<PageData<DashboardInfo>> {\n    return this.http.get<PageData<DashboardInfo>>(`/api/edge/${edgeId}/dashboards${pageLink.toQuery()}&type=${type}`,\n      defaultHttpOptionsFromConfig(config))\n  }\n\n  public assignDashboardToEdge(edgeId: string, dashboardId: string,\n                               config?: RequestConfig): Observable<Dashboard> {\n    return this.http.post<Dashboard>(`/api/edge/${edgeId}/dashboard/${dashboardId}`, null,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public unassignDashboardFromEdge(edgeId: string, dashboardId: string,\n                                   config?: RequestConfig) {\n    return this.http.delete(`/api/edge/${edgeId}/dashboard/${dashboardId}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport {\n  Compiler,\n  Component,\n  ComponentFactory,\n  Injectable,\n  Injector,\n  NgModule,\n  NgModuleRef,\n  OnDestroy,\n  Type,\n  ɵresetCompiledComponents\n} from '@angular/core';\nimport { from, Observable } from 'rxjs';\nimport { CommonModule } from '@angular/common';\nimport { catchError, map, mergeMap } from 'rxjs/operators';\n\n@NgModule()\nexport abstract class DynamicComponentModule implements OnDestroy {\n\n  ngOnDestroy(): void {\n  }\n\n}\n\ninterface DynamicComponentModuleData {\n  moduleRef: NgModuleRef<DynamicComponentModule>;\n  moduleType: Type<DynamicComponentModule>;\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class DynamicComponentFactoryService {\n\n  private dynamicComponentModulesMap = new Map<ComponentFactory<any>, DynamicComponentModuleData>();\n\n  constructor(private compiler: Compiler,\n              private injector: Injector) {\n  }\n\n  public createDynamicComponentFactory<T>(\n                     componentType: Type<T>,\n                     template: string,\n                     modules?: Type<any>[],\n                     preserveWhitespaces?: boolean,\n                     compileAttempt = 1): Observable<ComponentFactory<T>> {\n    return from(import('@angular/compiler')).pipe(\n      mergeMap(() => {\n        const comp = this.createDynamicComponent(componentType, template, preserveWhitespaces);\n        let moduleImports: Type<any>[] = [CommonModule];\n        if (modules) {\n          moduleImports = [...moduleImports, ...modules];\n        }\n        // noinspection AngularInvalidImportedOrDeclaredSymbol\n        const dynamicComponentInstanceModule = NgModule({\n          declarations: [comp],\n          imports: moduleImports\n        })(class DynamicComponentInstanceModule extends DynamicComponentModule {});\n        return from(this.compiler.compileModuleAsync(dynamicComponentInstanceModule)).pipe(\n          map((module) => {\n            let moduleRef: NgModuleRef<any>;\n            try {\n              moduleRef = module.create(this.injector);\n            } catch (e) {\n              this.compiler.clearCacheFor(module.moduleType);\n              throw e;\n            }\n            const factory = moduleRef.componentFactoryResolver.resolveComponentFactory(comp);\n            this.dynamicComponentModulesMap.set(factory, {\n              moduleRef,\n              moduleType: module.moduleType\n            });\n            return factory;\n          }),\n          catchError((error) => {\n            if (compileAttempt === 1) {\n              ɵresetCompiledComponents();\n              return this.createDynamicComponentFactory(componentType, template, modules, preserveWhitespaces, ++compileAttempt);\n            } else {\n              throw error;\n            }\n          })\n        );\n      })\n    );\n  }\n\n  public destroyDynamicComponentFactory<T>(factory: ComponentFactory<T>) {\n    const moduleData = this.dynamicComponentModulesMap.get(factory);\n    if (moduleData) {\n      moduleData.moduleRef.destroy();\n      this.compiler.clearCacheFor(moduleData.moduleType);\n      this.dynamicComponentModulesMap.delete(factory);\n    }\n  }\n\n  private createDynamicComponent<T>(componentType: Type<T>, template: string, preserveWhitespaces?: boolean): Type<T> {\n    // noinspection AngularMissingOrInvalidDeclarationInModule\n    return Component({\n      template,\n      preserveWhitespaces\n    })(componentType);\n  }\n\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { NgModule } from '@angular/core';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { CoreModule } from '@core/core.module';\nimport { LoginModule } from '@modules/login/login.module';\nimport { HomeModule } from '@home/home.module';\n\nimport { AppComponent } from './app.component';\nimport { DashboardRoutingModule } from '@modules/dashboard/dashboard-routing.module';\nimport { RouterModule, Routes } from '@angular/router';\n\nconst routes: Routes = [\n  { path: '**',\n    redirectTo: 'home'\n  }\n];\n\n@NgModule({\n  imports: [\n    RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class PageNotFoundRoutingModule { }\n\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    AppRoutingModule,\n    CoreModule,\n    LoginModule,\n    HomeModule,\n    DashboardRoutingModule,\n    PageNotFoundRoutingModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Directive, ElementRef, forwardRef, HostListener, Renderer2, SkipSelf } from '@angular/core';\nimport {\n  ControlValueAccessor,\n  FormControl,\n  FormGroupDirective,\n  NG_VALIDATORS,\n  NG_VALUE_ACCESSOR,\n  NgForm,\n  ValidationErrors,\n  Validator\n} from '@angular/forms';\nimport { ErrorStateMatcher } from '@angular/material/core';\n\n@Directive({\n  selector: '[tb-json-to-string]',\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => TbJsonToStringDirective),\n    multi: true\n  },\n  {\n    provide: NG_VALIDATORS,\n    useExisting: forwardRef(() => TbJsonToStringDirective),\n    multi: true,\n  },\n  {\n    provide: ErrorStateMatcher,\n    useExisting: TbJsonToStringDirective\n  }]\n})\n\nexport class TbJsonToStringDirective implements ControlValueAccessor, Validator, ErrorStateMatcher {\n  private propagateChange = null;\n  private parseError: boolean;\n  private data: any;\n\n  @HostListener('input', ['$event.target.value']) input(newValue: any): void {\n    try {\n      this.data = JSON.parse(newValue);\n      this.parseError = false;\n    } catch (e) {\n      this.parseError = true;\n    }\n\n    this.propagateChange(this.data);\n  }\n\n  constructor(private render: Renderer2,\n              private element: ElementRef,\n              @SkipSelf() private errorStateMatcher: ErrorStateMatcher) {\n\n  }\n\n  isErrorState(control: FormControl | null, form: FormGroupDirective | NgForm | null): boolean {\n    const originalErrorState = this.errorStateMatcher.isErrorState(control, form);\n    const customErrorState = !!(control && control.invalid && this.parseError);\n    return originalErrorState || customErrorState;\n  }\n\n  validate(c: FormControl): ValidationErrors {\n    return (!this.parseError) ? null : {\n      invalidJSON: {\n        valid: false\n      }\n    };\n  }\n\n  writeValue(obj: any): void {\n    if (obj) {\n      this.data = obj;\n      this.parseError = false;\n      this.render.setProperty(this.element.nativeElement, 'value', JSON.stringify(obj));\n    }\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { TimeService } from '@core/services/time.service';\nimport { deepClone, isDefined, isNumeric, isUndefined } from '@app/core/utils';\nimport * as moment_ from 'moment';\nimport * as momentTz from 'moment-timezone';\n\nconst moment = moment_;\n\nexport const SECOND = 1000;\nexport const MINUTE = 60 * SECOND;\nexport const HOUR = 60 * MINUTE;\nexport const DAY = 24 * HOUR;\nexport const WEEK = 7 * DAY;\nexport const YEAR = DAY * 365;\n\nexport type ComparisonDuration = moment_.unitOfTime.DurationConstructor | 'previousInterval' | 'customInterval';\n\nexport enum TimewindowType {\n  REALTIME,\n  HISTORY\n}\n\nexport enum RealtimeWindowType {\n  LAST_INTERVAL,\n  INTERVAL\n}\n\nexport enum HistoryWindowType {\n  LAST_INTERVAL,\n  FIXED,\n  INTERVAL\n}\n\nexport interface IntervalWindow {\n  interval?: number;\n  timewindowMs?: number;\n  quickInterval?: QuickTimeInterval;\n}\n\nexport interface RealtimeWindow extends IntervalWindow{\n  realtimeType?: RealtimeWindowType;\n}\n\nexport interface FixedWindow {\n  startTimeMs: number;\n  endTimeMs: number;\n}\n\nexport interface HistoryWindow extends IntervalWindow {\n  historyType?: HistoryWindowType;\n  fixedTimewindow?: FixedWindow;\n}\n\nexport enum AggregationType {\n  MIN = 'MIN',\n  MAX = 'MAX',\n  AVG = 'AVG',\n  SUM = 'SUM',\n  COUNT = 'COUNT',\n  NONE = 'NONE'\n}\n\nexport const aggregationTranslations = new Map<AggregationType, string>(\n  [\n    [AggregationType.MIN, 'aggregation.min'],\n    [AggregationType.MAX, 'aggregation.max'],\n    [AggregationType.AVG, 'aggregation.avg'],\n    [AggregationType.SUM, 'aggregation.sum'],\n    [AggregationType.COUNT, 'aggregation.count'],\n    [AggregationType.NONE, 'aggregation.none'],\n  ]\n);\n\nexport interface Aggregation {\n  interval?: number;\n  type: AggregationType;\n  limit: number;\n}\n\nexport interface Timewindow {\n  displayValue?: string;\n  displayTimezoneAbbr?: string;\n  hideInterval?: boolean;\n  hideAggregation?: boolean;\n  hideAggInterval?: boolean;\n  hideTimezone?: boolean;\n  selectedTab?: TimewindowType;\n  realtime?: RealtimeWindow;\n  history?: HistoryWindow;\n  aggregation?: Aggregation;\n  timezone?: string;\n}\n\nexport interface SubscriptionAggregation extends Aggregation {\n  interval?: number;\n  timeWindow?: number;\n  stateData?: boolean;\n}\n\nexport interface SubscriptionTimewindow {\n  startTs?: number;\n  quickInterval?: QuickTimeInterval;\n  timezone?: string;\n  tsOffset?: number;\n  realtimeWindowMs?: number;\n  fixedWindow?: FixedWindow;\n  aggregation?: SubscriptionAggregation;\n  timeForComparison?: ComparisonDuration;\n}\n\nexport interface WidgetTimewindow {\n  minTime?: number;\n  maxTime?: number;\n  interval?: number;\n  timezone?: string;\n  stDiff?: number;\n}\n\nexport enum QuickTimeInterval {\n  YESTERDAY = 'YESTERDAY',\n  DAY_BEFORE_YESTERDAY = 'DAY_BEFORE_YESTERDAY',\n  THIS_DAY_LAST_WEEK = 'THIS_DAY_LAST_WEEK',\n  PREVIOUS_WEEK = 'PREVIOUS_WEEK',\n  PREVIOUS_WEEK_ISO = 'PREVIOUS_WEEK_ISO',\n  PREVIOUS_MONTH = 'PREVIOUS_MONTH',\n  PREVIOUS_YEAR = 'PREVIOUS_YEAR',\n  CURRENT_HOUR = 'CURRENT_HOUR',\n  CURRENT_DAY = 'CURRENT_DAY',\n  CURRENT_DAY_SO_FAR = 'CURRENT_DAY_SO_FAR',\n  CURRENT_WEEK = 'CURRENT_WEEK',\n  CURRENT_WEEK_ISO = 'CURRENT_WEEK_ISO',\n  CURRENT_WEEK_SO_FAR = 'CURRENT_WEEK_SO_FAR',\n  CURRENT_WEEK_ISO_SO_FAR = 'CURRENT_WEEK_ISO_SO_FAR',\n  CURRENT_MONTH = 'CURRENT_MONTH',\n  CURRENT_MONTH_SO_FAR = 'CURRENT_MONTH_SO_FAR',\n  CURRENT_YEAR = 'CURRENT_YEAR',\n  CURRENT_YEAR_SO_FAR = 'CURRENT_YEAR_SO_FAR'\n}\n\nexport const QuickTimeIntervalTranslationMap = new Map<QuickTimeInterval, string>([\n  [QuickTimeInterval.YESTERDAY, 'timeinterval.predefined.yesterday'],\n  [QuickTimeInterval.DAY_BEFORE_YESTERDAY, 'timeinterval.predefined.day-before-yesterday'],\n  [QuickTimeInterval.THIS_DAY_LAST_WEEK, 'timeinterval.predefined.this-day-last-week'],\n  [QuickTimeInterval.PREVIOUS_WEEK, 'timeinterval.predefined.previous-week'],\n  [QuickTimeInterval.PREVIOUS_WEEK_ISO, 'timeinterval.predefined.previous-week-iso'],\n  [QuickTimeInterval.PREVIOUS_MONTH, 'timeinterval.predefined.previous-month'],\n  [QuickTimeInterval.PREVIOUS_YEAR, 'timeinterval.predefined.previous-year'],\n  [QuickTimeInterval.CURRENT_HOUR, 'timeinterval.predefined.current-hour'],\n  [QuickTimeInterval.CURRENT_DAY, 'timeinterval.predefined.current-day'],\n  [QuickTimeInterval.CURRENT_DAY_SO_FAR, 'timeinterval.predefined.current-day-so-far'],\n  [QuickTimeInterval.CURRENT_WEEK, 'timeinterval.predefined.current-week'],\n  [QuickTimeInterval.CURRENT_WEEK_ISO, 'timeinterval.predefined.current-week-iso'],\n  [QuickTimeInterval.CURRENT_WEEK_SO_FAR, 'timeinterval.predefined.current-week-so-far'],\n  [QuickTimeInterval.CURRENT_WEEK_ISO_SO_FAR, 'timeinterval.predefined.current-week-iso-so-far'],\n  [QuickTimeInterval.CURRENT_MONTH, 'timeinterval.predefined.current-month'],\n  [QuickTimeInterval.CURRENT_MONTH_SO_FAR, 'timeinterval.predefined.current-month-so-far'],\n  [QuickTimeInterval.CURRENT_YEAR, 'timeinterval.predefined.current-year'],\n  [QuickTimeInterval.CURRENT_YEAR_SO_FAR, 'timeinterval.predefined.current-year-so-far']\n]);\n\nexport function historyInterval(timewindowMs: number): Timewindow {\n  return {\n    selectedTab: TimewindowType.HISTORY,\n    history: {\n      historyType: HistoryWindowType.LAST_INTERVAL,\n      timewindowMs\n    }\n  };\n}\n\nexport function defaultTimewindow(timeService: TimeService): Timewindow {\n  const currentTime = moment().valueOf();\n  return {\n    displayValue: '',\n    hideInterval: false,\n    hideAggregation: false,\n    hideAggInterval: false,\n    hideTimezone: false,\n    selectedTab: TimewindowType.REALTIME,\n    realtime: {\n      realtimeType: RealtimeWindowType.LAST_INTERVAL,\n      interval: SECOND,\n      timewindowMs: MINUTE,\n      quickInterval: QuickTimeInterval.CURRENT_DAY\n    },\n    history: {\n      historyType: HistoryWindowType.LAST_INTERVAL,\n      interval: SECOND,\n      timewindowMs: MINUTE,\n      fixedTimewindow: {\n        startTimeMs: currentTime - DAY,\n        endTimeMs: currentTime\n      },\n      quickInterval: QuickTimeInterval.CURRENT_DAY\n    },\n    aggregation: {\n      type: AggregationType.AVG,\n      limit: Math.floor(timeService.getMaxDatapointsLimit() / 2)\n    }\n  };\n}\n\nfunction getTimewindowType(timewindow: Timewindow): TimewindowType {\n  if (isUndefined(timewindow.selectedTab)) {\n    return isDefined(timewindow.realtime) ? TimewindowType.REALTIME : TimewindowType.HISTORY;\n  } else {\n    return timewindow.selectedTab;\n  }\n}\n\nexport function initModelFromDefaultTimewindow(value: Timewindow, timeService: TimeService): Timewindow {\n  const model = defaultTimewindow(timeService);\n  if (value) {\n    model.hideInterval = value.hideInterval;\n    model.hideAggregation = value.hideAggregation;\n    model.hideAggInterval = value.hideAggInterval;\n    model.hideTimezone = value.hideTimezone;\n    model.selectedTab = getTimewindowType(value);\n    if (model.selectedTab === TimewindowType.REALTIME) {\n      if (isDefined(value.realtime.interval)) {\n        model.realtime.interval = value.realtime.interval;\n      }\n      if (isUndefined(value.realtime.realtimeType)) {\n        if (isDefined(value.realtime.quickInterval)) {\n          model.realtime.realtimeType = RealtimeWindowType.INTERVAL;\n        } else {\n          model.realtime.realtimeType = RealtimeWindowType.LAST_INTERVAL;\n        }\n      } else {\n        model.realtime.realtimeType = value.realtime.realtimeType;\n      }\n      if (model.realtime.realtimeType === RealtimeWindowType.INTERVAL) {\n        model.realtime.quickInterval = value.realtime.quickInterval;\n      } else {\n        model.realtime.timewindowMs = value.realtime.timewindowMs;\n      }\n    } else {\n      if (isDefined(value.history.interval)) {\n        model.history.interval = value.history.interval;\n      }\n      if (isUndefined(value.history.historyType)) {\n        if (isDefined(value.history.timewindowMs)) {\n          model.history.historyType = HistoryWindowType.LAST_INTERVAL;\n        } else if (isDefined(value.history.quickInterval)) {\n          model.history.historyType = HistoryWindowType.INTERVAL;\n        } else {\n          model.history.historyType = HistoryWindowType.FIXED;\n        }\n      } else {\n        model.history.historyType = value.history.historyType;\n      }\n      if (model.history.historyType === HistoryWindowType.LAST_INTERVAL) {\n        model.history.timewindowMs = value.history.timewindowMs;\n      } else if (model.history.historyType === HistoryWindowType.INTERVAL) {\n        model.history.quickInterval = value.history.quickInterval;\n      } else {\n        model.history.fixedTimewindow.startTimeMs = value.history.fixedTimewindow.startTimeMs;\n        model.history.fixedTimewindow.endTimeMs = value.history.fixedTimewindow.endTimeMs;\n      }\n    }\n    if (value.aggregation) {\n      if (value.aggregation.type) {\n        model.aggregation.type = value.aggregation.type;\n      }\n      model.aggregation.limit = value.aggregation.limit || Math.floor(timeService.getMaxDatapointsLimit() / 2);\n    }\n    model.timezone = value.timezone;\n  }\n  return model;\n}\n\nexport function toHistoryTimewindow(timewindow: Timewindow, startTimeMs: number, endTimeMs: number,\n                                    interval: number, timeService: TimeService): Timewindow {\n  if (timewindow.history) {\n    interval = isDefined(interval) ? interval : timewindow.history.interval;\n  } else if (timewindow.realtime) {\n    interval = timewindow.realtime.interval;\n  }  else {\n    interval = 0;\n  }\n  let aggType: AggregationType;\n  let limit: number;\n  if (timewindow.aggregation) {\n    aggType = timewindow.aggregation.type || AggregationType.AVG;\n    limit = timewindow.aggregation.limit || timeService.getMaxDatapointsLimit();\n  } else {\n    aggType = AggregationType.AVG;\n    limit = timeService.getMaxDatapointsLimit();\n  }\n  return {\n    hideInterval: timewindow.hideInterval || false,\n    hideAggregation: timewindow.hideAggregation || false,\n    hideAggInterval: timewindow.hideAggInterval || false,\n    hideTimezone: timewindow.hideTimezone || false,\n    selectedTab: TimewindowType.HISTORY,\n    history: {\n      historyType: HistoryWindowType.FIXED,\n      fixedTimewindow: {\n        startTimeMs,\n        endTimeMs\n      },\n      interval: timeService.boundIntervalToTimewindow(endTimeMs - startTimeMs, interval, AggregationType.AVG)\n    },\n    aggregation: {\n      type: aggType,\n      limit\n    },\n    timezone: timewindow.timezone\n  };\n}\n\nexport function timewindowTypeChanged(newTimewindow: Timewindow, oldTimewindow: Timewindow): boolean {\n  if (!newTimewindow || !oldTimewindow) {\n    return false;\n  }\n  const newType = getTimewindowType(newTimewindow);\n  const oldType = getTimewindowType(oldTimewindow);\n  return newType !== oldType;\n}\n\nexport function calculateTsOffset(timezone?: string): number {\n  if (timezone) {\n    const tz = getTimezone(timezone);\n    const localOffset = moment().utcOffset();\n    return (tz.utcOffset() - localOffset) * 60 * 1000;\n  } else {\n    return 0;\n  }\n}\n\nexport function isHistoryTypeTimewindow(timewindow: Timewindow): boolean {\n  return getTimewindowType(timewindow) === TimewindowType.HISTORY;\n}\n\nexport function createSubscriptionTimewindow(timewindow: Timewindow, stDiff: number, stateData: boolean,\n                                             timeService: TimeService): SubscriptionTimewindow {\n  const subscriptionTimewindow: SubscriptionTimewindow = {\n    fixedWindow: null,\n    realtimeWindowMs: null,\n    aggregation: {\n      interval: SECOND,\n      limit: timeService.getMaxDatapointsLimit(),\n      type: AggregationType.AVG\n    },\n    timezone: timewindow.timezone,\n    tsOffset: calculateTsOffset(timewindow.timezone)\n  };\n  let aggTimewindow;\n  if (stateData) {\n    subscriptionTimewindow.aggregation.type = AggregationType.NONE;\n    subscriptionTimewindow.aggregation.stateData = true;\n  }\n  if (isDefined(timewindow.aggregation) && !stateData) {\n    subscriptionTimewindow.aggregation = {\n      type: timewindow.aggregation.type || AggregationType.AVG,\n      limit: timewindow.aggregation.limit || timeService.getMaxDatapointsLimit()\n    };\n  }\n  const selectedTab = getTimewindowType(timewindow);\n  if (selectedTab === TimewindowType.REALTIME) {\n    let realtimeType = timewindow.realtime.realtimeType;\n    if (isUndefined(realtimeType)) {\n      if (isDefined(timewindow.realtime.quickInterval)) {\n        realtimeType = RealtimeWindowType.INTERVAL;\n      } else {\n        realtimeType = RealtimeWindowType.LAST_INTERVAL;\n      }\n    }\n    if (realtimeType === RealtimeWindowType.INTERVAL) {\n      subscriptionTimewindow.realtimeWindowMs =\n        getSubscriptionRealtimeWindowFromTimeInterval(timewindow.realtime.quickInterval, timewindow.timezone);\n      subscriptionTimewindow.quickInterval = timewindow.realtime.quickInterval;\n      const currentDate = getCurrentTime(timewindow.timezone);\n      subscriptionTimewindow.startTs = calculateIntervalStartTime(timewindow.realtime.quickInterval, currentDate).valueOf();\n    } else {\n      subscriptionTimewindow.realtimeWindowMs = timewindow.realtime.timewindowMs;\n      const currentDate = getCurrentTime(timewindow.timezone);\n      subscriptionTimewindow.startTs = currentDate.valueOf() + stDiff - subscriptionTimewindow.realtimeWindowMs;\n    }\n    subscriptionTimewindow.aggregation.interval =\n      timeService.boundIntervalToTimewindow(subscriptionTimewindow.realtimeWindowMs, timewindow.realtime.interval,\n        subscriptionTimewindow.aggregation.type);\n    aggTimewindow = subscriptionTimewindow.realtimeWindowMs;\n    if (realtimeType !== RealtimeWindowType.INTERVAL) {\n      const startDiff = subscriptionTimewindow.startTs % subscriptionTimewindow.aggregation.interval;\n      if (startDiff) {\n        subscriptionTimewindow.startTs -= startDiff;\n        aggTimewindow += subscriptionTimewindow.aggregation.interval;\n      }\n    }\n  } else {\n    let historyType = timewindow.history.historyType;\n    if (isUndefined(historyType)) {\n      if (isDefined(timewindow.history.timewindowMs)) {\n        historyType = HistoryWindowType.LAST_INTERVAL;\n      } else if (isDefined(timewindow.history.quickInterval)) {\n        historyType = HistoryWindowType.INTERVAL;\n      } else {\n        historyType = HistoryWindowType.FIXED;\n      }\n    }\n    if (historyType === HistoryWindowType.LAST_INTERVAL) {\n      const currentDate = getCurrentTime(timewindow.timezone);\n      const currentTime = currentDate.valueOf();\n      subscriptionTimewindow.fixedWindow = {\n        startTimeMs: currentTime - timewindow.history.timewindowMs,\n        endTimeMs: currentTime\n      };\n      aggTimewindow = timewindow.history.timewindowMs;\n    } else if (historyType === HistoryWindowType.INTERVAL) {\n      const startEndTime = calculateIntervalStartEndTime(timewindow.history.quickInterval, timewindow.timezone);\n      subscriptionTimewindow.fixedWindow = {\n        startTimeMs: startEndTime[0],\n        endTimeMs: startEndTime[1]\n      };\n      aggTimewindow = subscriptionTimewindow.fixedWindow.endTimeMs - subscriptionTimewindow.fixedWindow.startTimeMs;\n      subscriptionTimewindow.quickInterval = timewindow.history.quickInterval;\n    } else {\n      subscriptionTimewindow.fixedWindow = {\n        startTimeMs: timewindow.history.fixedTimewindow.startTimeMs - subscriptionTimewindow.tsOffset,\n        endTimeMs: timewindow.history.fixedTimewindow.endTimeMs - subscriptionTimewindow.tsOffset\n      };\n      aggTimewindow = subscriptionTimewindow.fixedWindow.endTimeMs - subscriptionTimewindow.fixedWindow.startTimeMs;\n    }\n    subscriptionTimewindow.startTs = subscriptionTimewindow.fixedWindow.startTimeMs;\n    subscriptionTimewindow.aggregation.interval =\n      timeService.boundIntervalToTimewindow(aggTimewindow, timewindow.history.interval, subscriptionTimewindow.aggregation.type);\n  }\n  const aggregation = subscriptionTimewindow.aggregation;\n  aggregation.timeWindow = aggTimewindow;\n  if (aggregation.type !== AggregationType.NONE) {\n    aggregation.limit = Math.ceil(aggTimewindow / subscriptionTimewindow.aggregation.interval);\n  }\n  return subscriptionTimewindow;\n}\n\nfunction getSubscriptionRealtimeWindowFromTimeInterval(interval: QuickTimeInterval, tz?: string): number {\n  let currentDate;\n  switch (interval) {\n    case QuickTimeInterval.CURRENT_HOUR:\n      return HOUR;\n    case QuickTimeInterval.CURRENT_DAY:\n    case QuickTimeInterval.CURRENT_DAY_SO_FAR:\n      return DAY;\n    case QuickTimeInterval.CURRENT_WEEK:\n    case QuickTimeInterval.CURRENT_WEEK_ISO:\n    case QuickTimeInterval.CURRENT_WEEK_SO_FAR:\n    case QuickTimeInterval.CURRENT_WEEK_ISO_SO_FAR:\n      return WEEK;\n    case QuickTimeInterval.CURRENT_MONTH:\n    case QuickTimeInterval.CURRENT_MONTH_SO_FAR:\n      currentDate = getCurrentTime(tz);\n      return currentDate.endOf('month').diff(currentDate.clone().startOf('month'));\n    case QuickTimeInterval.CURRENT_YEAR:\n    case QuickTimeInterval.CURRENT_YEAR_SO_FAR:\n      currentDate = getCurrentTime(tz);\n      return currentDate.endOf('year').diff(currentDate.clone().startOf('year'));\n  }\n}\n\nexport function calculateIntervalStartEndTime(interval: QuickTimeInterval, tz?: string): [number, number] {\n  const startEndTs: [number, number] = [0, 0];\n  const currentDate = getCurrentTime(tz);\n  const startDate = calculateIntervalStartTime(interval, currentDate);\n  startEndTs[0] = startDate.valueOf();\n  const endDate = calculateIntervalEndTime(interval, startDate, tz);\n  startEndTs[1] = endDate.valueOf();\n  return startEndTs;\n}\n\nexport function calculateIntervalStartTime(interval: QuickTimeInterval, currentDate: moment_.Moment): moment_.Moment {\n  switch (interval) {\n    case QuickTimeInterval.YESTERDAY:\n      currentDate.subtract(1, 'days');\n      return currentDate.startOf('day');\n    case QuickTimeInterval.DAY_BEFORE_YESTERDAY:\n      currentDate.subtract(2, 'days');\n      return currentDate.startOf('day');\n    case QuickTimeInterval.THIS_DAY_LAST_WEEK:\n      currentDate.subtract(1, 'weeks');\n      return currentDate.startOf('day');\n    case QuickTimeInterval.PREVIOUS_WEEK:\n      currentDate.subtract(1, 'weeks');\n      return currentDate.startOf('week');\n    case QuickTimeInterval.PREVIOUS_WEEK_ISO:\n      currentDate.subtract(1, 'weeks');\n      return currentDate.startOf('isoWeek');\n    case QuickTimeInterval.PREVIOUS_MONTH:\n      currentDate.subtract(1, 'months');\n      return currentDate.startOf('month');\n    case QuickTimeInterval.PREVIOUS_YEAR:\n      currentDate.subtract(1, 'years');\n      return currentDate.startOf('year');\n    case QuickTimeInterval.CURRENT_HOUR:\n      return currentDate.startOf('hour');\n    case QuickTimeInterval.CURRENT_DAY:\n    case QuickTimeInterval.CURRENT_DAY_SO_FAR:\n      return currentDate.startOf('day');\n    case QuickTimeInterval.CURRENT_WEEK:\n    case QuickTimeInterval.CURRENT_WEEK_SO_FAR:\n      return currentDate.startOf('week');\n    case QuickTimeInterval.CURRENT_WEEK_ISO:\n    case QuickTimeInterval.CURRENT_WEEK_ISO_SO_FAR:\n      return currentDate.startOf('isoWeek');\n    case QuickTimeInterval.CURRENT_MONTH:\n    case QuickTimeInterval.CURRENT_MONTH_SO_FAR:\n      return currentDate.startOf('month');\n    case QuickTimeInterval.CURRENT_YEAR:\n    case QuickTimeInterval.CURRENT_YEAR_SO_FAR:\n      return currentDate.startOf('year');\n  }\n}\n\nexport function calculateIntervalEndTime(interval: QuickTimeInterval, startDate: moment_.Moment, tz?: string): number {\n  switch (interval) {\n    case QuickTimeInterval.YESTERDAY:\n    case QuickTimeInterval.DAY_BEFORE_YESTERDAY:\n    case QuickTimeInterval.THIS_DAY_LAST_WEEK:\n    case QuickTimeInterval.CURRENT_DAY:\n      return startDate.add(1, 'day').valueOf();\n    case QuickTimeInterval.PREVIOUS_WEEK:\n    case QuickTimeInterval.PREVIOUS_WEEK_ISO:\n    case QuickTimeInterval.CURRENT_WEEK:\n    case QuickTimeInterval.CURRENT_WEEK_ISO:\n      return startDate.add(1, 'week').valueOf();\n    case QuickTimeInterval.PREVIOUS_MONTH:\n    case QuickTimeInterval.CURRENT_MONTH:\n      return startDate.add(1, 'month').valueOf();\n    case QuickTimeInterval.PREVIOUS_YEAR:\n    case QuickTimeInterval.CURRENT_YEAR:\n      return startDate.add(1, 'year').valueOf();\n    case QuickTimeInterval.CURRENT_HOUR:\n      return startDate.add(1, 'hour').valueOf();\n    case QuickTimeInterval.CURRENT_DAY_SO_FAR:\n    case QuickTimeInterval.CURRENT_WEEK_SO_FAR:\n    case QuickTimeInterval.CURRENT_WEEK_ISO_SO_FAR:\n    case QuickTimeInterval.CURRENT_MONTH_SO_FAR:\n    case QuickTimeInterval.CURRENT_YEAR_SO_FAR:\n      return getCurrentTime(tz).valueOf();\n  }\n}\n\nexport function quickTimeIntervalPeriod(interval: QuickTimeInterval): number {\n  switch (interval) {\n    case QuickTimeInterval.CURRENT_HOUR:\n      return HOUR;\n    case QuickTimeInterval.YESTERDAY:\n    case QuickTimeInterval.DAY_BEFORE_YESTERDAY:\n    case QuickTimeInterval.THIS_DAY_LAST_WEEK:\n    case QuickTimeInterval.CURRENT_DAY:\n    case QuickTimeInterval.CURRENT_DAY_SO_FAR:\n      return DAY;\n    case QuickTimeInterval.PREVIOUS_WEEK:\n    case QuickTimeInterval.PREVIOUS_WEEK_ISO:\n    case QuickTimeInterval.CURRENT_WEEK:\n    case QuickTimeInterval.CURRENT_WEEK_ISO:\n    case QuickTimeInterval.CURRENT_WEEK_SO_FAR:\n    case QuickTimeInterval.CURRENT_WEEK_ISO_SO_FAR:\n      return WEEK;\n    case QuickTimeInterval.PREVIOUS_MONTH:\n    case QuickTimeInterval.CURRENT_MONTH:\n    case QuickTimeInterval.CURRENT_MONTH_SO_FAR:\n      return DAY * 30;\n    case QuickTimeInterval.PREVIOUS_YEAR:\n    case QuickTimeInterval.CURRENT_YEAR:\n    case QuickTimeInterval.CURRENT_YEAR_SO_FAR:\n      return YEAR;\n  }\n}\n\nexport function calculateIntervalComparisonStartTime(interval: QuickTimeInterval,\n                                                     startDate: moment_.Moment): moment_.Moment {\n  switch (interval) {\n    case QuickTimeInterval.YESTERDAY:\n    case QuickTimeInterval.DAY_BEFORE_YESTERDAY:\n    case QuickTimeInterval.CURRENT_DAY:\n    case QuickTimeInterval.CURRENT_DAY_SO_FAR:\n      startDate.subtract(1, 'days');\n      return startDate.startOf('day');\n    case QuickTimeInterval.THIS_DAY_LAST_WEEK:\n      startDate.subtract(1, 'weeks');\n      return startDate.startOf('day');\n    case QuickTimeInterval.PREVIOUS_WEEK:\n    case QuickTimeInterval.CURRENT_WEEK:\n    case QuickTimeInterval.CURRENT_WEEK_SO_FAR:\n      startDate.subtract(1, 'weeks');\n      return startDate.startOf('week');\n    case QuickTimeInterval.PREVIOUS_WEEK_ISO:\n    case QuickTimeInterval.CURRENT_WEEK_ISO:\n    case QuickTimeInterval.CURRENT_WEEK_ISO_SO_FAR:\n      startDate.subtract(1, 'weeks');\n      return startDate.startOf('isoWeek');\n    case QuickTimeInterval.PREVIOUS_MONTH:\n    case QuickTimeInterval.CURRENT_MONTH:\n    case QuickTimeInterval.CURRENT_MONTH_SO_FAR:\n      startDate.subtract(1, 'months');\n      return startDate.startOf('month');\n    case QuickTimeInterval.PREVIOUS_YEAR:\n    case QuickTimeInterval.CURRENT_YEAR:\n    case QuickTimeInterval.CURRENT_YEAR_SO_FAR:\n      startDate.subtract(1, 'years');\n      return startDate.startOf('year');\n    case QuickTimeInterval.CURRENT_HOUR:\n      startDate.subtract(1, 'hour');\n      return startDate.startOf('hour');\n  }\n}\n\nexport function calculateIntervalComparisonEndTime(interval: QuickTimeInterval,\n                                                   comparisonStartDate: moment_.Moment,\n                                                   endDate: moment_.Moment): number {\n  switch (interval) {\n    case QuickTimeInterval.CURRENT_DAY_SO_FAR:\n      return endDate.subtract(1, 'days').valueOf();\n    case QuickTimeInterval.CURRENT_WEEK_SO_FAR:\n    case QuickTimeInterval.CURRENT_WEEK_ISO_SO_FAR:\n      return endDate.subtract(1, 'week').valueOf();\n    case QuickTimeInterval.CURRENT_MONTH_SO_FAR:\n      return endDate.subtract(1, 'month').valueOf();\n    case QuickTimeInterval.CURRENT_YEAR_SO_FAR:\n      return endDate.subtract(1, 'year').valueOf();\n    default:\n      return calculateIntervalEndTime(interval, comparisonStartDate);\n  }\n}\n\nexport function createTimewindowForComparison(subscriptionTimewindow: SubscriptionTimewindow,\n                                              timeUnit: ComparisonDuration, customIntervalValue: number): SubscriptionTimewindow {\n  const timewindowForComparison: SubscriptionTimewindow = {\n    fixedWindow: null,\n    realtimeWindowMs: null,\n    aggregation: subscriptionTimewindow.aggregation,\n    tsOffset: subscriptionTimewindow.tsOffset\n  };\n\n  if (subscriptionTimewindow.fixedWindow) {\n    let startTimeMs;\n    let endTimeMs;\n    if (timeUnit === 'previousInterval') {\n      if (subscriptionTimewindow.quickInterval) {\n        const startDate = moment(subscriptionTimewindow.fixedWindow.startTimeMs);\n        const endDate = moment(subscriptionTimewindow.fixedWindow.endTimeMs);\n        if (subscriptionTimewindow.timezone) {\n          startDate.tz(subscriptionTimewindow.timezone);\n          endDate.tz(subscriptionTimewindow.timezone);\n        }\n        const comparisonStartDate = calculateIntervalComparisonStartTime(subscriptionTimewindow.quickInterval, startDate);\n        startTimeMs = comparisonStartDate.valueOf();\n        endTimeMs = calculateIntervalComparisonEndTime(subscriptionTimewindow.quickInterval, comparisonStartDate, endDate);\n      } else {\n        const timeInterval = subscriptionTimewindow.fixedWindow.endTimeMs - subscriptionTimewindow.fixedWindow.startTimeMs;\n        endTimeMs = subscriptionTimewindow.fixedWindow.startTimeMs;\n        startTimeMs = endTimeMs - timeInterval;\n      }\n    } else if (timeUnit === 'customInterval') {\n      if (isNumeric(customIntervalValue) && isFinite(customIntervalValue) && customIntervalValue > 0) {\n        const timeInterval = subscriptionTimewindow.fixedWindow.endTimeMs - subscriptionTimewindow.fixedWindow.startTimeMs;\n        endTimeMs = subscriptionTimewindow.fixedWindow.endTimeMs - Math.round(customIntervalValue);\n        startTimeMs = endTimeMs - timeInterval;\n      } else {\n        endTimeMs = subscriptionTimewindow.fixedWindow.endTimeMs;\n        startTimeMs = subscriptionTimewindow.fixedWindow.startTimeMs;\n      }\n    } else {\n      const timeInterval = subscriptionTimewindow.fixedWindow.endTimeMs - subscriptionTimewindow.fixedWindow.startTimeMs;\n      endTimeMs = moment(subscriptionTimewindow.fixedWindow.endTimeMs).subtract(1, timeUnit).valueOf();\n      startTimeMs = endTimeMs - timeInterval;\n    }\n    timewindowForComparison.startTs = startTimeMs;\n    timewindowForComparison.fixedWindow = {\n      startTimeMs: timewindowForComparison.startTs,\n      endTimeMs\n    };\n  }\n\n  return timewindowForComparison;\n}\n\nexport function cloneSelectedTimewindow(timewindow: Timewindow): Timewindow {\n  const cloned: Timewindow = {};\n  cloned.hideInterval = timewindow.hideInterval || false;\n  cloned.hideAggregation = timewindow.hideAggregation || false;\n  cloned.hideAggInterval = timewindow.hideAggInterval || false;\n  cloned.hideTimezone = timewindow.hideTimezone || false;\n  if (isDefined(timewindow.selectedTab)) {\n    cloned.selectedTab = timewindow.selectedTab;\n    if (timewindow.selectedTab === TimewindowType.REALTIME) {\n      cloned.realtime = deepClone(timewindow.realtime);\n    } else if (timewindow.selectedTab === TimewindowType.HISTORY) {\n      cloned.history = deepClone(timewindow.history);\n    }\n  }\n  cloned.aggregation = deepClone(timewindow.aggregation);\n  cloned.timezone = timewindow.timezone;\n  return cloned;\n}\n\nexport interface TimeInterval {\n  name: string;\n  translateParams: {[key: string]: any};\n  value: number;\n}\n\nexport const defaultTimeIntervals = new Array<TimeInterval>(\n  {\n    name: 'timeinterval.seconds-interval',\n    translateParams: {seconds: 1},\n    value: SECOND\n  },\n  {\n    name: 'timeinterval.seconds-interval',\n    translateParams: {seconds: 5},\n    value: 5 * SECOND\n  },\n  {\n    name: 'timeinterval.seconds-interval',\n    translateParams: {seconds: 10},\n    value: 10 * SECOND\n  },\n  {\n    name: 'timeinterval.seconds-interval',\n    translateParams: {seconds: 15},\n    value: 15 * SECOND\n  },\n  {\n    name: 'timeinterval.seconds-interval',\n    translateParams: {seconds: 30},\n    value: 30 * SECOND\n  },\n  {\n    name: 'timeinterval.minutes-interval',\n    translateParams: {minutes: 1},\n    value: MINUTE\n  },\n  {\n    name: 'timeinterval.minutes-interval',\n    translateParams: {minutes: 2},\n    value: 2 * MINUTE\n  },\n  {\n    name: 'timeinterval.minutes-interval',\n    translateParams: {minutes: 5},\n    value: 5 * MINUTE\n  },\n  {\n    name: 'timeinterval.minutes-interval',\n    translateParams: {minutes: 10},\n    value: 10 * MINUTE\n  },\n  {\n    name: 'timeinterval.minutes-interval',\n    translateParams: {minutes: 15},\n    value: 15 * MINUTE\n  },\n  {\n    name: 'timeinterval.minutes-interval',\n    translateParams: {minutes: 30},\n    value: 30 * MINUTE\n  },\n  {\n    name: 'timeinterval.hours-interval',\n    translateParams: {hours: 1},\n    value: HOUR\n  },\n  {\n    name: 'timeinterval.hours-interval',\n    translateParams: {hours: 2},\n    value: 2 * HOUR\n  },\n  {\n    name: 'timeinterval.hours-interval',\n    translateParams: {hours: 5},\n    value: 5 * HOUR\n  },\n  {\n    name: 'timeinterval.hours-interval',\n    translateParams: {hours: 10},\n    value: 10 * HOUR\n  },\n  {\n    name: 'timeinterval.hours-interval',\n    translateParams: {hours: 12},\n    value: 12 * HOUR\n  },\n  {\n    name: 'timeinterval.days-interval',\n    translateParams: {days: 1},\n    value: DAY\n  },\n  {\n    name: 'timeinterval.days-interval',\n    translateParams: {days: 7},\n    value: 7 * DAY\n  },\n  {\n    name: 'timeinterval.days-interval',\n    translateParams: {days: 30},\n    value: 30 * DAY\n  }\n);\n\nexport enum TimeUnit {\n  SECONDS = 'SECONDS',\n  MINUTES = 'MINUTES',\n  HOURS = 'HOURS',\n  DAYS = 'DAYS'\n}\n\nexport enum TimeUnitMilli {\n  MILLISECONDS = 'MILLISECONDS'\n}\n\nexport type FullTimeUnit = TimeUnit | TimeUnitMilli;\n\nexport const timeUnitTranslationMap = new Map<FullTimeUnit, string>(\n  [\n    [TimeUnitMilli.MILLISECONDS, 'timeunit.milliseconds'],\n    [TimeUnit.SECONDS, 'timeunit.seconds'],\n    [TimeUnit.MINUTES, 'timeunit.minutes'],\n    [TimeUnit.HOURS, 'timeunit.hours'],\n    [TimeUnit.DAYS, 'timeunit.days']\n  ]\n);\n\nexport interface TimezoneInfo {\n  id: string;\n  name: string;\n  offset: string;\n  nOffset: number;\n  abbr: string;\n}\n\nlet timezones: TimezoneInfo[] = null;\nlet defaultTimezone: string = null;\n\nexport function getTimezones(): TimezoneInfo[] {\n  if (!timezones) {\n    timezones = momentTz.tz.names().map((zoneName) => {\n      const tz = momentTz.tz(zoneName);\n      return {\n        id: zoneName,\n        name: zoneName.replace(/_/g, ' '),\n        offset: `UTC${tz.format('Z')}`,\n        nOffset: tz.utcOffset(),\n        abbr: tz.zoneAbbr()\n      };\n    });\n  }\n  return timezones;\n}\n\nexport function getTimezoneInfo(timezoneId: string, defaultTimezoneId?: string, userTimezoneByDefault?: boolean): TimezoneInfo {\n  const timezoneList = getTimezones();\n  let foundTimezone = timezoneId ? timezoneList.find(timezoneInfo => timezoneInfo.id === timezoneId) : null;\n  if (!foundTimezone) {\n    if (userTimezoneByDefault) {\n      const userTimezone = getDefaultTimezone();\n      foundTimezone = timezoneList.find(timezoneInfo => timezoneInfo.id === userTimezone);\n    } else if (defaultTimezoneId) {\n      foundTimezone = timezoneList.find(timezoneInfo => timezoneInfo.id === defaultTimezoneId);\n    }\n  }\n  return foundTimezone;\n}\n\nexport function getDefaultTimezoneInfo(): TimezoneInfo {\n  const userTimezone = getDefaultTimezone();\n  return getTimezoneInfo(userTimezone);\n}\n\nexport function getDefaultTimezone(): string {\n  if (!defaultTimezone) {\n    defaultTimezone = momentTz.tz.guess();\n  }\n  return defaultTimezone;\n}\n\nexport function getCurrentTime(tz?: string): moment_.Moment {\n  if (tz) {\n    return moment().tz(tz);\n  } else {\n    return moment();\n  }\n}\n\nexport function getTime(ts: number, tz?: string): moment_.Moment {\n  if (tz) {\n    return moment(ts).tz(tz);\n  } else {\n    return moment(ts);\n  }\n}\n\nexport function getTimezone(tz: string): moment_.Moment {\n    return moment.tz(tz);\n}\n\nexport function getCurrentTimeForComparison(timeForComparison: moment_.unitOfTime.DurationConstructor, tz?: string): moment_.Moment {\n  return getCurrentTime(tz).subtract(1, timeForComparison);\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { AfterViewInit, Component, ElementRef, forwardRef, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ControlValueAccessor, FormBuilder, FormGroup, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { Observable, of } from 'rxjs';\nimport { map, mergeMap, startWith, tap } from 'rxjs/operators';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@app/core/core.state';\nimport { TranslateService } from '@ngx-translate/core';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { MessageType, messageTypeNames } from '@shared/models/rule-node.models';\nimport { objectValues } from '@core/utils';\n\n@Component({\n  selector: 'tb-message-type-autocomplete',\n  templateUrl: './message-type-autocomplete.component.html',\n  styleUrls: [],\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => MessageTypeAutocompleteComponent),\n    multi: true\n  }]\n})\nexport class MessageTypeAutocompleteComponent implements ControlValueAccessor, OnInit, AfterViewInit, OnDestroy {\n\n  messageTypeFormGroup: FormGroup;\n\n  modelValue: string | null;\n\n  private requiredValue: boolean;\n  get required(): boolean {\n    return this.requiredValue;\n  }\n  @Input()\n  set required(value: boolean) {\n    this.requiredValue = coerceBooleanProperty(value);\n  }\n\n  @Input()\n  disabled: boolean;\n\n  @ViewChild('messageTypeInput', {static: true}) messageTypeInput: ElementRef;\n\n  filteredMessageTypes: Observable<Array<MessageType | string>>;\n\n  searchText = '';\n\n  private dirty = false;\n\n  private propagateChange = (v: any) => { };\n\n  constructor(private store: Store<AppState>,\n              public translate: TranslateService,\n              private fb: FormBuilder) {\n    this.messageTypeFormGroup = this.fb.group({\n      messageType: [null]\n    });\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  ngOnInit() {\n    this.filteredMessageTypes = this.messageTypeFormGroup.get('messageType').valueChanges\n      .pipe(\n        tap(value => {\n          this.updateView(value);\n        }),\n        startWith<string | MessageType>(''),\n        map(value => value ? value : ''),\n        mergeMap(messageType => this.fetchMessageTypes(messageType) )\n      );\n  }\n\n  ngAfterViewInit(): void {\n  }\n\n  ngOnDestroy(): void {\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    if (this.disabled) {\n      this.messageTypeFormGroup.disable({emitEvent: false});\n    } else {\n      this.messageTypeFormGroup.enable({emitEvent: false});\n    }\n  }\n\n  writeValue(value: string | null): void {\n    this.searchText = '';\n    this.modelValue = value;\n    let res: MessageType | string = null;\n    if (value) {\n      if (objectValues(MessageType).includes(value)) {\n        res = MessageType[value];\n      } else {\n        res = value;\n      }\n    }\n    this.messageTypeFormGroup.get('messageType').patchValue(res, {emitEvent: false});\n    this.dirty = true;\n  }\n\n  onFocus() {\n    if (this.dirty) {\n      this.messageTypeFormGroup.get('messageType').updateValueAndValidity({onlySelf: true, emitEvent: true});\n      this.dirty = false;\n    }\n  }\n\n  updateView(value: MessageType | string | null) {\n    let res: string = null;\n    if (value) {\n      if (objectValues(MessageType).includes(value)) {\n        res = MessageType[value];\n      } else {\n        res = value;\n      }\n    }\n    if (this.modelValue !== res) {\n      this.modelValue = res;\n      this.propagateChange(this.modelValue);\n    }\n  }\n\n  displayMessageTypeFn(messageType?: MessageType | string): string | undefined {\n    if (messageType) {\n      if (objectValues(MessageType).includes(messageType)) {\n        return messageTypeNames.get(MessageType[messageType]);\n      } else {\n        return messageType;\n      }\n    }\n    return undefined;\n  }\n\n  fetchMessageTypes(searchText?: string): Observable<Array<MessageType | string>> {\n    this.searchText = searchText;\n    const result: Array<MessageType | string> = [];\n    messageTypeNames.forEach((value, key) => {\n      if (value.toUpperCase().includes(searchText.toUpperCase())) {\n        result.push(key);\n      }\n    });\n    if (result.length) {\n      return of(result);\n    } else {\n      return of([searchText]);\n    }\n  }\n\n  clear() {\n    this.messageTypeFormGroup.get('messageType').patchValue(null, {emitEvent: true});\n    setTimeout(() => {\n      this.messageTypeInput.nativeElement.blur();\n      this.messageTypeInput.nativeElement.focus();\n    }, 0);\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<mat-form-field [formGroup]=\"messageTypeFormGroup\" class=\"mat-block\">\n  <mat-label>{{ 'rulenode.message-type' | translate }}</mat-label>\n  <input matInput type=\"text\" placeholder=\"{{ 'rulenode.select-message-type' | translate }}\"\n         #messageTypeInput\n         formControlName=\"messageType\"\n         (focusin)=\"onFocus()\"\n         [required]=\"required\"\n         [matAutocomplete]=\"messageTypeAutocomplete\">\n  <button *ngIf=\"messageTypeFormGroup.get('messageType').value && !disabled\"\n          type=\"button\"\n          matSuffix mat-button mat-icon-button aria-label=\"Clear\"\n          (click)=\"clear()\">\n    <mat-icon class=\"material-icons\">close</mat-icon>\n  </button>\n  <mat-autocomplete\n    class=\"tb-autocomplete\"\n    #messageTypeAutocomplete=\"matAutocomplete\"\n    [displayWith]=\"displayMessageTypeFn\">\n    <mat-option *ngFor=\"let messageType of filteredMessageTypes | async\" [value]=\"messageType\">\n      <span [innerHTML]=\"displayMessageTypeFn(messageType) | highlight:searchText\"></span>\n    </mat-option>\n  </mat-autocomplete>\n  <mat-error *ngIf=\"messageTypeFormGroup.get('messageType').hasError('required')\">\n    {{ 'rulenode.message-type-required' | translate }}\n  </mat-error>\n</mat-form-field>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, ElementRef, forwardRef, Input, ViewChild, ViewEncapsulation } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\n\n@Component({\n  selector: 'tb-widgets-bundle-search',\n  templateUrl: './widgets-bundle-search.component.html',\n  styleUrls: ['./widgets-bundle-search.component.scss'],\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => WidgetsBundleSearchComponent),\n    multi: true\n  }],\n  encapsulation: ViewEncapsulation.None\n})\nexport class WidgetsBundleSearchComponent implements ControlValueAccessor {\n\n  searchText: string;\n  focus = false;\n\n  @Input() placeholder: string;\n\n  @ViewChild('searchInput') searchInput: ElementRef<HTMLInputElement>;\n\n  private propagateChange = (v: any) => { };\n\n  constructor() {\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  writeValue(value: string | null): void {\n    this.searchText = value;\n  }\n\n  updateSearchText(): void {\n    this.updateView();\n  }\n\n  private updateView() {\n    this.propagateChange(this.searchText);\n  }\n\n  clear($event: Event): void {\n    $event.preventDefault();\n    $event.stopPropagation();\n    this.searchText = '';\n    this.updateView();\n  }\n\n  toggleFocus() {\n    this.focus = !this.focus;\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<div class=\"input-wrapper\" [ngClass]=\"{'focus': focus}\" fxLayoutAlign=\"start center\" fxLayoutGap=\"16px\">\n  <mat-icon>search</mat-icon>\n  <input type=\"text\"\n         [(ngModel)]=\"searchText\"\n         (ngModelChange)=\"updateSearchText()\"\n         (focus)=\"toggleFocus()\"\n         (blur)=\"toggleFocus()\"\n         [placeholder]=placeholder>\n  <button mat-button type=\"button\" *ngIf=\"searchText\" mat-icon-button (click)=\"clear($event)\">\n    <mat-icon class=\"close\">close</mat-icon>\n  </button>\n</div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({ name: 'highlight' })\nexport class HighlightPipe implements PipeTransform {\n  transform(text: string, search): string {\n    const pattern = search\n      .replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n    const regex = new RegExp('^' + pattern, 'i');\n\n    return search ? text.replace(regex, match => `<b>${match}</b>`) : text;\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { ChangeDetectorRef, Component, EventEmitter, Input, OnChanges, Output } from '@angular/core';\nimport { interval } from 'rxjs';\nimport { filter } from 'rxjs/operators';\nimport { HistorySelectSettings } from '@app/modules/home/components/widget/lib/maps/map-models';\n\n@Component({\n  selector: 'tb-history-selector',\n  templateUrl: './history-selector.component.html',\n  styleUrls: ['./history-selector.component.scss']\n})\nexport class HistorySelectorComponent implements OnChanges {\n\n  @Input() settings: HistorySelectSettings;\n  @Input() minTime: number;\n  @Input() maxTime: number;\n  @Input() step = 1000;\n  @Input() anchors = [];\n  @Input() useAnchors = false;\n\n  @Output() timeUpdated: EventEmitter<number> = new EventEmitter();\n\n  minTimeIndex = 0;\n  maxTimeIndex = 0;\n  speed = 1;\n  index = 0;\n  playing = false;\n  interval;\n  speeds = [1, 5, 10, 25];\n  currentTime = null;\n\n\n  constructor(private cd: ChangeDetectorRef) { }\n\n  ngOnChanges() {\n    this.maxTimeIndex =  Math.ceil((this.maxTime - this.minTime) / this.step);\n    this.currentTime = this.minTime === Infinity ? null : this.minTime;\n  }\n\n  play() {\n    this.playing = true;\n    if (!this.interval) {\n      this.interval = interval(1000 / this.speed)\n        .pipe(\n          filter(() => this.playing)\n        ).subscribe(() => {\n          this.index++;\n          this.currentTime = this.minTime + this.index * this.step;\n          if (this.index <= this.maxTimeIndex) {\n            this.cd.detectChanges();\n            this.timeUpdated.emit(this.currentTime);\n          } else {\n            this.playing = false;\n            this.interval.complete();\n            this.cd.detectChanges();\n          }\n        }, err => {\n          console.error(err);\n        }, () => {\n          this.interval = null;\n        });\n    }\n  }\n\n  reInit() {\n    if (this.interval) {\n      this.interval.complete();\n    }\n    if (this.playing) {\n      this.play();\n    }\n  }\n\n  pause() {\n    this.playing = false;\n    this.currentTime = this.minTime + this.index * this.step;\n    this.cd.detectChanges();\n    this.timeUpdated.emit(this.currentTime);\n  }\n\n  moveNext() {\n    if (this.index < this.maxTimeIndex) {\n      if (this.useAnchors) {\n        const anchorIndex = this.findIndex(this.currentTime, this.anchors) + 1;\n        this.index = Math.floor((this.anchors[anchorIndex] - this.minTime) / this.step);\n      } else {\n        this.index++;\n      }\n    }\n    this.pause();\n  }\n\n  movePrev() {\n    if (this.index > this.minTimeIndex) {\n      if (this.useAnchors) {\n        const anchorIndex = this.findIndex(this.currentTime, this.anchors) - 1;\n        this.index = Math.floor((this.anchors[anchorIndex] - this.minTime) / this.step);\n      } else {\n        this.index--;\n      }\n    }\n    this.pause();\n  }\n\n  findIndex(value: number, array: number[]): number {\n    let i = 0;\n    while (array[i] < value) {\n      i++;\n    }\n    return i;\n  }\n\n  moveStart() {\n    this.index = this.minTimeIndex;\n    this.pause();\n  }\n\n  moveEnd() {\n    this.index = this.maxTimeIndex;\n    this.pause();\n  }\n\n  changeIndex(index: number) {\n    this.index = index;\n    this.currentTime = this.minTime + index * this.step;\n    this.timeUpdated.emit(this.currentTime);\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<div class=\"trip-animation-control-panel\">\n    <div fxFlex fxLayout=\"row\" fxFlexAlign=\"center\">\n        <button mat-icon-button class=\"mat-icon-button\" aria-label=\"Start\" (click)=\"moveStart()\">\n            <mat-icon class=\"material-icons\" [ngStyle]=\"{'color': settings.buttonColor}\">fast_rewind</mat-icon>\n        </button>\n        <button mat-icon-button class=\"mat-icon-button\" aria-label=\"Previous\" (click)=\"movePrev()\">\n            <mat-icon class=\"material-icons\" [ngStyle]=\"{'color': settings.buttonColor}\">skip_previous</mat-icon>\n        </button>\n        <div fxLayout=\"column\" fxFlex=\"100\">\n            <mat-slider [(ngModel)]=\"index\" [min]=\"minTimeIndex\" [max]=\"maxTimeIndex\" (input)=\"changeIndex($event.value)\">\n            </mat-slider>\n            <div class=\"panel-timer\">\n                <span *ngIf=\"this.currentTime\">{{ this.currentTime | date:'medium'}}</span>\n                <span *ngIf=\"!this.currentTime\">{{ \"widget.no-data-found\" | translate}}</span>\n            </div>\n        </div>\n        <button mat-icon-button class=\"mat-icon-button\" aria-label=\"Next\" (click)=\"moveNext()\">\n            <mat-icon class=\"material-icons\" [ngStyle]=\"{'color': settings.buttonColor}\">skip_next</mat-icon>\n        </button>\n        <button mat-icon-button class=\"mat-icon-button\" aria-label=\"End\" (click)=\"moveEnd()\">\n            <mat-icon class=\"material-icons\" [ngStyle]=\"{'color': settings.buttonColor}\">fast_forward</mat-icon>\n        </button>\n        <button mat-icon-button class=\"mat-icon-button\" *ngIf=\"!playing\" (click)=\"play()\" aria-label=\"Play\">\n            <mat-icon class=\"material-icons\" [ngStyle]=\"{'color': settings.buttonColor}\">\n                play_circle_outline\n            </mat-icon>\n        </button>\n        <button mat-icon-button class=\"mat-icon-button\" *ngIf=\"playing\" (click)=\"pause()\" aria-label=\"Stop\">\n            <mat-icon class=\"material-icons\" [ngStyle]=\"{'color': settings.buttonColor}\">\n                pause_circle_outline\n            </mat-icon>\n        </button>\n        <mat-select [(ngModel)]=\"speed\" (selectionChange)=\"reInit()\" class=\"speed-select\" aria-label=\"Speed selector\">\n            <mat-option [value]=\"speedValue\" *ngFor=\"let speedValue of speeds\">{{speedValue}} </mat-option>\n        </mat-select>\n    </div>\n</div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\n\nimport { MonoTypeOperatorFunction, Observable, Operator, Subscriber } from 'rxjs';\n\nexport type EnterZoneSignature<T> = (zone: { run: (fn: any) => any }) => Observable<T>;\n\nexport function enterZone<T>(zone: { run: (fn: any) => any }): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => {\n    return source.lift(new EnterZoneOperator(zone));\n  };\n}\n\nexport class EnterZoneOperator<T> implements Operator<T, T> {\n  constructor(private zone: { run: (fn: any) => any }) { }\n\n  call(subscriber: Subscriber<T>, source: any): any {\n    return source._subscribe(new EnterZoneSubscriber(subscriber, this.zone));\n  }\n}\n\nclass EnterZoneSubscriber<T> extends Subscriber<T> {\n  constructor(destination: Subscriber<T>, private zone: { run: (fn: any) => any }) {\n    super(destination);\n  }\n\n  protected _next(value: T) {\n    this.zone.run(() => this.destination.next(value));\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport {\n  Directive,\n  EmbeddedViewRef,\n  Input,\n  OnChanges,\n  SimpleChange,\n  SimpleChanges,\n  TemplateRef,\n  ViewContainerRef\n} from '@angular/core';\n\n@Directive({\n  // tslint:disable-next-line:directive-selector\n  selector: '[tbStringTemplateOutlet]',\n  exportAs: 'tbStringTemplateOutlet'\n})\nexport class TbStringTemplateOutletDirective<_T = unknown> implements OnChanges {\n  private embeddedViewRef: EmbeddedViewRef<any> | null = null;\n  private context = new TbStringTemplateOutletContext();\n  @Input() tbStringTemplateOutletContext: any | null = null;\n  @Input() tbStringTemplateOutlet: any | TemplateRef<any> = null;\n\n  static ngTemplateContextGuard<T>(\n    // tslint:disable-next-line:variable-name\n    _dir: TbStringTemplateOutletDirective<T>,\n    // tslint:disable-next-line:variable-name\n    _ctx: any\n  ): _ctx is TbStringTemplateOutletContext {\n    return true;\n  }\n\n  private recreateView(): void {\n    this.viewContainer.clear();\n    const isTemplateRef = this.tbStringTemplateOutlet instanceof TemplateRef;\n    const templateRef = (isTemplateRef ? this.tbStringTemplateOutlet : this.templateRef) as any;\n    this.embeddedViewRef = this.viewContainer.createEmbeddedView(\n      templateRef,\n      isTemplateRef ? this.tbStringTemplateOutletContext : this.context\n    );\n  }\n\n  private updateContext(): void {\n    const isTemplateRef = this.tbStringTemplateOutlet instanceof TemplateRef;\n    const newCtx = isTemplateRef ? this.tbStringTemplateOutletContext : this.context;\n    const oldCtx = this.embeddedViewRef.context as any;\n    if (newCtx) {\n      for (const propName of Object.keys(newCtx)) {\n        oldCtx[propName] = newCtx[propName];\n      }\n    }\n  }\n\n  constructor(private viewContainer: ViewContainerRef, private templateRef: TemplateRef<any>) {}\n\n  ngOnChanges(changes: SimpleChanges): void {\n    const { tbStringTemplateOutletContext, tbStringTemplateOutlet } = changes;\n    const shouldRecreateView = (): boolean => {\n      let shouldOutletRecreate = false;\n      if (tbStringTemplateOutlet) {\n        if (tbStringTemplateOutlet.firstChange) {\n          shouldOutletRecreate = true;\n        } else {\n          const isPreviousOutletTemplate = tbStringTemplateOutlet.previousValue instanceof TemplateRef;\n          const isCurrentOutletTemplate = tbStringTemplateOutlet.currentValue instanceof TemplateRef;\n          shouldOutletRecreate = isPreviousOutletTemplate || isCurrentOutletTemplate;\n        }\n      }\n      const hasContextShapeChanged = (ctxChange: SimpleChange): boolean => {\n        const prevCtxKeys = Object.keys(ctxChange.previousValue || {});\n        const currCtxKeys = Object.keys(ctxChange.currentValue || {});\n        if (prevCtxKeys.length === currCtxKeys.length) {\n          for (const propName of currCtxKeys) {\n            if (prevCtxKeys.indexOf(propName) === -1) {\n              return true;\n            }\n          }\n          return false;\n        } else {\n          return true;\n        }\n      };\n      const shouldContextRecreate =\n        tbStringTemplateOutletContext && hasContextShapeChanged(tbStringTemplateOutletContext);\n      return shouldContextRecreate || shouldOutletRecreate;\n    };\n\n    if (tbStringTemplateOutlet) {\n      this.context.$implicit = tbStringTemplateOutlet.currentValue;\n    }\n\n    const recreateView = shouldRecreateView();\n    if (recreateView) {\n      this.recreateView();\n    } else {\n      this.updateContext();\n    }\n  }\n}\n\nexport class TbStringTemplateOutletContext {\n  public $implicit: any;\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { ChangeDetectionStrategy, Component, Input, OnDestroy, OnInit } from '@angular/core';\nimport { User } from '@shared/models/user.model';\nimport { Authority } from '@shared/models/authority.enum';\nimport { select, Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { selectAuthUser, selectUserDetails } from '@core/auth/auth.selectors';\nimport { map } from 'rxjs/operators';\nimport { AuthService } from '@core/auth/auth.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'tb-user-menu',\n  templateUrl: './user-menu.component.html',\n  styleUrls: ['./user-menu.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class UserMenuComponent implements OnInit, OnDestroy {\n\n  @Input() displayUserInfo: boolean;\n\n  authorities = Authority;\n\n  authority$ = this.store.pipe(\n    select(selectAuthUser),\n    map((authUser) => authUser ? authUser.authority : Authority.ANONYMOUS)\n  );\n\n  authorityName$ = this.store.pipe(\n    select(selectUserDetails),\n    map((user) => this.getAuthorityName(user))\n  );\n\n  userDisplayName$ = this.store.pipe(\n    select(selectUserDetails),\n    map((user) => this.getUserDisplayName(user))\n  );\n\n  constructor(private store: Store<AppState>,\n              private router: Router,\n              private authService: AuthService) {\n  }\n\n  ngOnInit(): void {\n  }\n\n  ngOnDestroy(): void {\n  }\n\n  getAuthorityName(user: User): string {\n    let name = null;\n    if (user) {\n      const authority = user.authority;\n      switch (authority) {\n        case Authority.SYS_ADMIN:\n          name = 'user.sys-admin';\n          break;\n        case Authority.TENANT_ADMIN:\n          name = 'user.tenant-admin';\n          break;\n        case Authority.CUSTOMER_USER:\n          name = 'user.customer';\n          break;\n      }\n    }\n    return name;\n  }\n\n  getUserDisplayName(user: User): string {\n    let name = '';\n    if (user) {\n      if ((user.firstName && user.firstName.length > 0) ||\n        (user.lastName && user.lastName.length > 0)) {\n        if (user.firstName) {\n          name += user.firstName;\n        }\n        if (user.lastName) {\n          if (name.length > 0) {\n            name += ' ';\n          }\n          name += user.lastName;\n        }\n      } else {\n        name = user.email;\n      }\n    }\n    return name;\n  }\n\n  openProfile(): void {\n    this.router.navigate(['profile']);\n  }\n\n  logout(): void {\n    this.authService.logout();\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<section fxLayout=\"row\">\n  <div fxHide.lt-lg *ngIf=\"displayUserInfo\" class=\"tb-user-info\" fxLayout=\"row\">\n    <mat-icon class=\"material-icons tb-mini-avatar\">account_circle</mat-icon>\n    <div fxLayout=\"column\" fxLayoutAlign=\"center\">\n      <span *ngIf=\"userDisplayName$ | async; let userDisplayName\" class=\"tb-user-display-name\">{{ userDisplayName }}</span>\n      <span *ngIf=\"authorityName$ | async; let authorityName\" class=\"tb-user-authority\">{{ authorityName | translate }}</span>\n    </div>\n  </div>\n  <button mat-button mat-icon-button [matMenuTriggerFor]=\"userMenu\">\n    <mat-icon class=\"material-icons\">more_vert</mat-icon>\n  </button>\n  <mat-menu #userMenu=\"matMenu\" xPosition=\"before\">\n    <div class=\"tb-user-menu-items\" *ngIf=\"authority$ | async; let authority\">\n      <button mat-menu-item (click)=\"openProfile()\">\n        <mat-icon class=\"material-icons\">account_circle</mat-icon>\n        <span translate>home.profile</span>\n      </button>\n      <button mat-menu-item (click)=\"logout()\">\n        <mat-icon class=\"material-icons\">exit_to_app</mat-icon>\n        <span translate>home.logout</span>\n      </button>\n    </div>\n  </mat-menu>\n</section>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport {\n  Component,\n  ElementRef,\n  forwardRef,\n  Input,\n  OnDestroy,\n  OnInit,\n  ViewChild\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { Ace } from 'ace-builds';\nimport { CancelAnimationFrame, RafService } from '@core/services/raf.service';\nimport { ResizeObserver } from '@juggle/resize-observer';\nimport { guid } from '@core/utils';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { getAce } from '@shared/models/ace/ace.models';\nimport { beautifyJs } from '@shared/models/beautify.models';\n\n@Component({\n  selector: 'tb-protobuf-content',\n  templateUrl: './protobuf-content.component.html',\n  styleUrls: ['./protobuf-content.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => ProtobufContentComponent),\n      multi: true\n    }\n  ]\n})\nexport class ProtobufContentComponent implements OnInit, ControlValueAccessor, OnDestroy {\n\n  @ViewChild('protobufEditor', {static: true})\n  protobufEditorElmRef: ElementRef;\n\n  private protobufEditor: Ace.Editor;\n  private editorsResizeCaf: CancelAnimationFrame;\n  private editorResize$: ResizeObserver;\n  private ignoreChange = false;\n\n  toastTargetId = `protobufContentEditor-${guid()}`;\n\n  @Input() label: string;\n\n  @Input() disabled: boolean;\n\n  @Input() fillHeight: boolean;\n\n  @Input() editorStyle: {[klass: string]: any};\n\n  @Input() tbPlaceholder: string;\n\n  private readonlyValue: boolean;\n  get readonly(): boolean {\n    return this.readonlyValue;\n  }\n  @Input()\n  set readonly(value: boolean) {\n    this.readonlyValue = coerceBooleanProperty(value);\n  }\n\n  fullscreen = false;\n\n  contentBody: string;\n\n  errorShowed = false;\n\n  private propagateChange = null;\n\n  constructor(public elementRef: ElementRef,\n              protected store: Store<AppState>,\n              private raf: RafService) {\n  }\n\n  ngOnInit(): void {\n    const editorElement = this.protobufEditorElmRef.nativeElement;\n    let editorOptions: Partial<Ace.EditorOptions> = {\n      mode: `ace/mode/protobuf`,\n      showGutter: true,\n      showPrintMargin: false,\n      readOnly: this.disabled || this.readonly,\n    };\n\n    const advancedOptions = {\n      enableSnippets: true,\n      enableBasicAutocompletion: true,\n      enableLiveAutocompletion: true\n    };\n\n    editorOptions = {...editorOptions, ...advancedOptions};\n    getAce().subscribe(\n      (ace) => {\n        this.protobufEditor = ace.edit(editorElement, editorOptions);\n        this.protobufEditor.session.setUseWrapMode(true);\n        this.protobufEditor.setValue(this.contentBody ? this.contentBody : '', -1);\n        this.protobufEditor.setReadOnly(this.disabled || this.readonly);\n        this.protobufEditor.on('change', () => {\n          if (!this.ignoreChange) {\n            this.updateView();\n          }\n        });\n        this.editorResize$ = new ResizeObserver(() => {\n          this.onAceEditorResize();\n        });\n        this.editorResize$.observe(editorElement);\n      }\n    );\n  }\n\n  ngOnDestroy(): void {\n    if (this.editorResize$) {\n      this.editorResize$.disconnect();\n    }\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    if (this.protobufEditor) {\n      this.protobufEditor.setReadOnly(this.disabled || this.readonly);\n    }\n  }\n\n  writeValue(value: string): void {\n    this.contentBody = value;\n    if (this.protobufEditor) {\n      this.ignoreChange = true;\n      this.protobufEditor.setValue(this.contentBody ? this.contentBody : '', -1);\n      this.ignoreChange = false;\n    }\n  }\n\n  updateView() {\n    const editorValue = this.protobufEditor.getValue();\n    if (this.contentBody !== editorValue) {\n      this.contentBody = editorValue;\n      this.propagateChange(this.contentBody);\n    }\n  }\n\n  beautifyProtobuf() {\n    beautifyJs(this.contentBody, {indent_size: 4, wrap_line_length: 60}).subscribe(\n      (res) => {\n        this.protobufEditor.setValue(res ? res : '', -1);\n        this.updateView();\n      }\n    );\n  }\n\n  onFullscreen() {\n    if (this.protobufEditor) {\n      setTimeout(() => {\n        this.protobufEditor.resize();\n      }, 0);\n    }\n  }\n\n  private onAceEditorResize() {\n    if (this.editorsResizeCaf) {\n      this.editorsResizeCaf();\n      this.editorsResizeCaf = null;\n    }\n    this.editorsResizeCaf = this.raf.raf(() => {\n      this.protobufEditor.resize();\n      this.protobufEditor.renderer.updateFull();\n    });\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<div style=\"background: #fff;\" [ngClass]=\"{'fill-height': fillHeight}\"\n     tb-fullscreen\n     [fullscreen]=\"fullscreen\" (fullscreenChanged)=\"onFullscreen()\" fxLayout=\"column\">\n  <div fxLayout=\"row\" fxLayoutAlign=\"start center\" style=\"height: 40px;\" class=\"tb-protobuf-content-toolbar\">\n    <label class=\"tb-title no-padding\">{{ label }}</label>\n    <span fxFlex></span>\n    <button type=\"button\"\n            mat-button *ngIf=\"!readonly && !disabled\" class=\"tidy\" (click)=\"beautifyProtobuf()\">\n      {{'js-func.tidy' | translate }}\n    </button>\n    <fieldset style=\"width: initial\">\n      <div matTooltip=\"{{(fullscreen ? 'fullscreen.exit' : 'fullscreen.expand') | translate}}\"\n           matTooltipPosition=\"above\"\n           style=\"border-radius: 50%\"\n           (click)=\"fullscreen = !fullscreen\">\n        <button type='button' mat-button mat-icon-button class=\"tb-mat-32\">\n          <mat-icon class=\"material-icons\">{{ fullscreen ? 'fullscreen_exit' : 'fullscreen' }}</mat-icon>\n        </button>\n      </div>\n    </fieldset>\n  </div>\n  <div id=\"tb-protobuf-panel\" tb-toast toastTarget=\"{{toastTargetId}}\"\n       class=\"tb-protobuf-content-panel\" fxLayout=\"column\">\n    <div #protobufEditor id=\"tb-protobuf-input\" [ngStyle]=\"editorStyle\" [ngClass]=\"{'fill-height': fillHeight}\"></div>\n  </div>\n</div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { LoadState } from './load.models';\nimport { LoadActions, LoadActionTypes } from './load.actions';\n\nexport const initialState: LoadState = {\n  isLoading: false\n};\n\nexport function loadReducer(\n  state: LoadState = initialState,\n  action: LoadActions\n): LoadState {\n  switch (action.type) {\n    case LoadActionTypes.START_LOAD:\n      return { ...state, isLoading: true };\n\n    case LoadActionTypes.FINISH_LOAD:\n      return { ...state, isLoading: false };\n\n    default:\n      return state;\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'enumToArray'\n})\nexport class EnumToArrayPipe implements PipeTransform {\n  transform(data: object): string[] {\n    const keys = Object.keys(data);\n    return keys.slice(keys.length / 2);\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { PageLink } from '@shared/models/page/page-link';\nimport { defaultHttpOptionsFromConfig, RequestConfig } from './http-utils';\nimport { Observable, of, throwError } from 'rxjs';\nimport { PageData } from '@shared/models/page/page-data';\nimport { DeviceProfile, DeviceProfileInfo, DeviceTransportType } from '@shared/models/device.models';\nimport { deepClone, isDefinedAndNotNull, isEmptyStr } from '@core/utils';\nimport {\n  ObjectLwM2M,\n  securityConfigMode,\n  ServerSecurityConfig,\n  ServerSecurityConfigInfo\n} from '@home/components/profile/device/lwm2m/lwm2m-profile-config.models';\nimport { SortOrder } from '@shared/models/page/sort-order';\nimport { OtaPackageService } from '@core/http/ota-package.service';\nimport { map, mergeMap, tap } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DeviceProfileService {\n\n  private lwm2mBootstrapSecurityInfoInMemoryCache = new Map<boolean, ServerSecurityConfigInfo>();\n\n  constructor(\n    private http: HttpClient,\n    private otaPackageService: OtaPackageService\n  ) {\n  }\n\n  public getDeviceProfiles(pageLink: PageLink, config?: RequestConfig): Observable<PageData<DeviceProfile>> {\n    return this.http.get<PageData<DeviceProfile>>(`/api/deviceProfiles${pageLink.toQuery()}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getDeviceProfile(deviceProfileId: string, config?: RequestConfig): Observable<DeviceProfile> {\n    return this.http.get<DeviceProfile>(`/api/deviceProfile/${deviceProfileId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getLwm2mObjects(sortOrder: SortOrder, objectIds?: string[], searchText?: string, config?: RequestConfig):\n    Observable<Array<ObjectLwM2M>> {\n    let url = `/api/resource/lwm2m/?sortProperty=${sortOrder.property}&sortOrder=${sortOrder.direction}`;\n    if (isDefinedAndNotNull(objectIds) && objectIds.length > 0) {\n      url += `&objectIds=${objectIds}`;\n    }\n    if (isDefinedAndNotNull(searchText) && !isEmptyStr(searchText)) {\n      url += `&searchText=${searchText}`;\n    }\n    return this.http.get<Array<ObjectLwM2M>>(url, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getLwm2mBootstrapSecurityInfo(isBootstrapServer: boolean, config?: RequestConfig): Observable<ServerSecurityConfigInfo> {\n    const securityConfig = this.lwm2mBootstrapSecurityInfoInMemoryCache.get(isBootstrapServer);\n    if (securityConfig) {\n      return of(securityConfig);\n    } else {\n      return this.http.get<ServerSecurityConfigInfo>(\n        `/api/lwm2m/deviceProfile/bootstrap/${isBootstrapServer}`,\n        defaultHttpOptionsFromConfig(config)\n      ).pipe(\n        tap(serverConfig => this.lwm2mBootstrapSecurityInfoInMemoryCache.set(isBootstrapServer, serverConfig))\n      );\n    }\n  }\n\n  public getLwm2mBootstrapSecurityInfoBySecurityType(isBootstrapServer: boolean, securityMode = securityConfigMode.NO_SEC,\n                                                     config?: RequestConfig): Observable<ServerSecurityConfig> {\n    return this.getLwm2mBootstrapSecurityInfo(isBootstrapServer, config).pipe(\n      map(securityConfig => {\n        const serverSecurityConfigInfo = deepClone(securityConfig);\n        switch (securityMode) {\n          case securityConfigMode.PSK:\n            serverSecurityConfigInfo.port = serverSecurityConfigInfo.securityPort;\n            serverSecurityConfigInfo.host = serverSecurityConfigInfo.securityHost;\n            serverSecurityConfigInfo.serverPublicKey = '';\n            break;\n          case securityConfigMode.RPK:\n          case securityConfigMode.X509:\n            serverSecurityConfigInfo.port = serverSecurityConfigInfo.securityPort;\n            serverSecurityConfigInfo.host = serverSecurityConfigInfo.securityHost;\n            break;\n          case securityConfigMode.NO_SEC:\n            serverSecurityConfigInfo.serverPublicKey = '';\n            break;\n        }\n        return serverSecurityConfigInfo;\n      })\n    );\n  }\n\n  public getLwm2mObjectsPage(pageLink: PageLink, config?: RequestConfig): Observable<Array<ObjectLwM2M>> {\n    return this.http.get<Array<ObjectLwM2M>>(\n      `/api/resource/lwm2m/page${pageLink.toQuery()}`,\n      defaultHttpOptionsFromConfig(config)\n    );\n  }\n\n  public saveDeviceProfileAndConfirmOtaChange(originDeviceProfile: DeviceProfile, deviceProfile: DeviceProfile,\n                                              config?: RequestConfig): Observable<DeviceProfile> {\n    return this.otaPackageService.confirmDialogUpdatePackage(deviceProfile, originDeviceProfile).pipe(\n      mergeMap((update) => update ? this.saveDeviceProfile(deviceProfile, config) : throwError('Canceled saving device profiles'))\n    );\n  }\n\n  public saveDeviceProfile(deviceProfile: DeviceProfile, config?: RequestConfig): Observable<DeviceProfile> {\n    return this.http.post<DeviceProfile>('/api/deviceProfile', deviceProfile, defaultHttpOptionsFromConfig(config));\n  }\n\n  public deleteDeviceProfile(deviceProfileId: string, config?: RequestConfig) {\n    return this.http.delete(`/api/deviceProfile/${deviceProfileId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public setDefaultDeviceProfile(deviceProfileId: string, config?: RequestConfig): Observable<DeviceProfile> {\n    return this.http.post<DeviceProfile>(`/api/deviceProfile/${deviceProfileId}/default`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getDefaultDeviceProfileInfo(config?: RequestConfig): Observable<DeviceProfileInfo> {\n    return this.http.get<DeviceProfileInfo>('/api/deviceProfileInfo/default', defaultHttpOptionsFromConfig(config));\n  }\n\n  public getDeviceProfileInfo(deviceProfileId: string, config?: RequestConfig): Observable<DeviceProfileInfo> {\n    return this.http.get<DeviceProfileInfo>(`/api/deviceProfileInfo/${deviceProfileId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getDeviceProfileInfos(pageLink: PageLink, transportType?: DeviceTransportType,\n                               config?: RequestConfig): Observable<PageData<DeviceProfileInfo>> {\n    let url = `/api/deviceProfileInfos${pageLink.toQuery()}`;\n    if (isDefinedAndNotNull(transportType)) {\n      url += `&transportType=${transportType}`;\n    }\n    return this.http.get<PageData<DeviceProfileInfo>>(url, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getDeviceProfileDevicesAttributesKeys(deviceProfileId?: string, config?: RequestConfig): Observable<Array<string>> {\n    let url = `/api/deviceProfile/devices/keys/attributes`;\n    if (isDefinedAndNotNull(deviceProfileId)) {\n      url += `?deviceProfileId=${deviceProfileId}`;\n    }\n    return this.http.get<Array<string>>(url, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getDeviceProfileDevicesTimeseriesKeys(deviceProfileId?: string, config?: RequestConfig): Observable<Array<string>> {\n    let url = `/api/deviceProfile/devices/keys/timeseries`;\n    if (isDefinedAndNotNull(deviceProfileId)) {\n      url += `?deviceProfileId=${deviceProfileId}`;\n    }\n    return this.http.get<Array<string>>(url, defaultHttpOptionsFromConfig(config));\n  }\n\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { LoginRoutingModule } from './login-routing.module';\nimport { LoginComponent } from './pages/login/login.component';\nimport { SharedModule } from '@app/shared/shared.module';\nimport { ResetPasswordRequestComponent } from '@modules/login/pages/login/reset-password-request.component';\nimport { ResetPasswordComponent } from '@modules/login/pages/login/reset-password.component';\nimport { CreatePasswordComponent } from '@modules/login/pages/login/create-password.component';\n\n@NgModule({\n  declarations: [\n    LoginComponent,\n    ResetPasswordRequestComponent,\n    ResetPasswordComponent,\n    CreatePasswordComponent\n  ],\n  imports: [\n    CommonModule,\n    SharedModule,\n    LoginRoutingModule\n  ]\n})\nexport class LoginModule { }\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { ValidatorFn, Validators } from '@angular/forms';\n\nexport const PAGE_SIZE_LIMIT = 50;\nexport const INSTANCES = 'instances';\nexport const RESOURCES = 'resources';\nexport const OBSERVE = 'observe';\nexport const ATTRIBUTE = 'attribute';\nexport const TELEMETRY = 'telemetry';\nexport const KEY_NAME = 'keyName';\nexport const DEFAULT_ID_SERVER = 123;\nexport const DEFAULT_ID_BOOTSTRAP = 111;\nexport const DEFAULT_LOCAL_HOST_NAME = 'localhost';\nexport const DEFAULT_PORT_SERVER_NO_SEC = 5685;\nexport const DEFAULT_PORT_BOOTSTRAP_NO_SEC = 5687;\nexport const DEFAULT_CLIENT_HOLD_OFF_TIME = 1;\nexport const DEFAULT_LIFE_TIME = 300;\nexport const DEFAULT_MIN_PERIOD = 1;\nexport const DEFAULT_NOTIF_IF_DESIBLED = true;\nexport const DEFAULT_BINDING = 'UQ';\nexport const DEFAULT_BOOTSTRAP_SERVER_ACCOUNT_TIME_OUT = 0;\nexport const KEY_REGEXP_HEX_DEC = /^[-+]?[0-9A-Fa-f]+\\.?[0-9A-Fa-f]*?$/;\nexport const INSTANCES_ID_VALUE_MIN = 0;\nexport const INSTANCES_ID_VALUE_MAX = 65535;\nexport const DEFAULT_OTA_UPDATE_PROTOCOL = 'coap://';\nexport const DEFAULT_FW_UPDATE_RESOURCE = DEFAULT_OTA_UPDATE_PROTOCOL + DEFAULT_LOCAL_HOST_NAME + ':' + DEFAULT_PORT_SERVER_NO_SEC;\nexport const DEFAULT_SW_UPDATE_RESOURCE = DEFAULT_OTA_UPDATE_PROTOCOL + DEFAULT_LOCAL_HOST_NAME + ':' + DEFAULT_PORT_SERVER_NO_SEC;\nexport const DEFAULT_PSM_ACTIVITY_TIMER = 10000;\nexport const DEFAULT_EDRX_CYCLE = 81000;\nexport const DEFAULT_PAGING_TRANSMISSION_WINDOW = 10000;\n\nexport enum BingingMode {\n  U = 'U',\n  UQ = 'UQ',\n  T = 'T',\n  TQ = 'TQ',\n  S = 'S',\n  SQ = 'SQ',\n  US = 'US',\n  TS = 'TS',\n  UQS = 'UQS',\n  TQS = 'TQS'\n}\n\nexport const BingingModeTranslationsMap = new Map<BingingMode, string>(\n  [\n    [BingingMode.U, 'device-profile.lwm2m.binding-type.u'],\n    [BingingMode.UQ, 'device-profile.lwm2m.binding-type.uq'],\n    [BingingMode.US, 'device-profile.lwm2m.binding-type.us'],\n    [BingingMode.UQS, 'device-profile.lwm2m.binding-type.uqs'],\n    [BingingMode.T, 'device-profile.lwm2m.binding-type.t'],\n    [BingingMode.TQ, 'device-profile.lwm2m.binding-type.tq'],\n    [BingingMode.TS, 'device-profile.lwm2m.binding-type.ts'],\n    [BingingMode.TQS, 'device-profile.lwm2m.binding-type.tqs'],\n    [BingingMode.S, 'device-profile.lwm2m.binding-type.s'],\n    [BingingMode.SQ, 'device-profile.lwm2m.binding-type.sq']\n  ]\n);\n// TODO: wait release Leshan for issues: https://github.com/eclipse/leshan/issues/1026\nexport enum AttributeName {\n  pmin = 'pmin',\n  pmax = 'pmax',\n  gt = 'gt',\n  lt = 'lt',\n  st = 'st'\n  // epmin = 'epmin',\n  // epmax = 'epmax'\n}\n\nexport const AttributeNameTranslationMap = new Map<AttributeName, string>(\n  [\n    [AttributeName.pmin, 'device-profile.lwm2m.attributes-name.min-period'],\n    [AttributeName.pmax, 'device-profile.lwm2m.attributes-name.max-period'],\n    [AttributeName.gt, 'device-profile.lwm2m.attributes-name.greater-than'],\n    [AttributeName.lt, 'device-profile.lwm2m.attributes-name.less-than'],\n    [AttributeName.st, 'device-profile.lwm2m.attributes-name.step'],\n    // [AttributeName.epmin, 'device-profile.lwm2m.attributes-name.min-evaluation-period'],\n    // [AttributeName.epmax, 'device-profile.lwm2m.attributes-name.max-evaluation-period']\n  ]\n);\n\nexport enum securityConfigMode {\n  PSK = 'PSK',\n  RPK = 'RPK',\n  X509 = 'X509',\n  NO_SEC = 'NO_SEC'\n}\n\nexport const securityConfigModeNames = new Map<securityConfigMode, string>(\n  [\n    [securityConfigMode.PSK, 'Pre-Shared Key'],\n    [securityConfigMode.RPK, 'Raw Public Key'],\n    [securityConfigMode.X509, 'X.509 Certificate'],\n    [securityConfigMode.NO_SEC, 'No Security']\n  ]\n);\n\nexport enum PowerMode {\n  PSM = 'PSM',\n  DRX = 'DRX',\n  E_DRX = 'E_DRX'\n}\n\nexport const PowerModeTranslationMap = new Map<PowerMode, string>(\n  [\n    [PowerMode.PSM, 'device-profile.power-saving-mode-type.psm'],\n    [PowerMode.DRX, 'device-profile.power-saving-mode-type.drx'],\n    [PowerMode.E_DRX, 'device-profile.power-saving-mode-type.edrx']\n  ]\n);\n\nexport interface BootstrapServersSecurityConfig {\n  shortId: number;\n  lifetime: number;\n  defaultMinPeriod: number;\n  notifIfDisabled: boolean;\n  binding: string;\n}\n\nexport interface ServerSecurityConfig {\n  host?: string;\n  port?: number;\n  securityMode: securityConfigMode;\n  serverPublicKey?: string;\n  clientHoldOffTime?: number;\n  serverId?: number;\n  bootstrapServerAccountTimeout: number;\n}\n\nexport interface ServerSecurityConfigInfo extends ServerSecurityConfig {\n  securityHost?: string;\n  securityPort?: number;\n  bootstrapServerIs: boolean;\n}\n\ninterface BootstrapSecurityConfig {\n  servers: BootstrapServersSecurityConfig;\n  bootstrapServer: ServerSecurityConfig;\n  lwm2mServer: ServerSecurityConfig;\n}\n\nexport interface Lwm2mProfileConfigModels {\n  clientLwM2mSettings: ClientLwM2mSettings;\n  observeAttr: ObservableAttributes;\n  bootstrap: BootstrapSecurityConfig;\n}\n\nexport interface ClientLwM2mSettings {\n  clientOnlyObserveAfterConnect: number;\n  fwUpdateStrategy: number;\n  swUpdateStrategy: number;\n  fwUpdateResource?: string;\n  swUpdateResource?: string;\n  powerMode: PowerMode;\n  edrxCycle?: number;\n  pagingTransmissionWindow?: number;\n  psmActivityTimer?: number;\n  compositeOperationsSupport: boolean;\n}\n\nexport interface ObservableAttributes {\n  observe: string[];\n  attribute: string[];\n  telemetry: string[];\n  keyName: {};\n  attributeLwm2m: AttributesNameValueMap;\n}\n\nexport function getDefaultBootstrapServersSecurityConfig(): BootstrapServersSecurityConfig {\n  return {\n    shortId: DEFAULT_ID_SERVER,\n    lifetime: DEFAULT_LIFE_TIME,\n    defaultMinPeriod: DEFAULT_MIN_PERIOD,\n    notifIfDisabled: DEFAULT_NOTIF_IF_DESIBLED,\n    binding: DEFAULT_BINDING\n  };\n}\n\nexport function getDefaultBootstrapServerSecurityConfig(): ServerSecurityConfig {\n  return {\n    bootstrapServerAccountTimeout: DEFAULT_BOOTSTRAP_SERVER_ACCOUNT_TIME_OUT,\n    clientHoldOffTime: DEFAULT_CLIENT_HOLD_OFF_TIME,\n    host: DEFAULT_LOCAL_HOST_NAME,\n    port: DEFAULT_PORT_BOOTSTRAP_NO_SEC,\n    securityMode: securityConfigMode.NO_SEC,\n    serverId: DEFAULT_ID_BOOTSTRAP,\n    serverPublicKey: ''\n  };\n}\n\nexport function getDefaultLwM2MServerSecurityConfig(): ServerSecurityConfig {\n  const DefaultLwM2MServerSecurityConfig = getDefaultBootstrapServerSecurityConfig();\n  DefaultLwM2MServerSecurityConfig.port = DEFAULT_PORT_SERVER_NO_SEC;\n  DefaultLwM2MServerSecurityConfig.serverId = DEFAULT_ID_SERVER;\n  return DefaultLwM2MServerSecurityConfig;\n}\n\nexport function getDefaultProfileObserveAttrConfig(): ObservableAttributes {\n  return {\n    observe: [],\n    attribute: [],\n    telemetry: [],\n    keyName: {},\n    attributeLwm2m: {}\n  };\n}\n\nexport function getDefaultProfileClientLwM2mSettingsConfig(): ClientLwM2mSettings {\n  return {\n    clientOnlyObserveAfterConnect: 1,\n    fwUpdateStrategy: 1,\n    swUpdateStrategy: 1,\n    powerMode: PowerMode.DRX,\n    compositeOperationsSupport: false\n  };\n}\n\nexport type ResourceSettingTelemetry = 'observe' | 'attribute' | 'telemetry';\n\nexport interface ResourceLwM2M {\n  id: number;\n  name: string;\n  observe: boolean;\n  attribute: boolean;\n  telemetry: boolean;\n  keyName: string;\n  attributes?: AttributesNameValueMap;\n}\n\nexport interface Instance {\n  id: number;\n  attributes?: AttributesNameValueMap;\n  resources: ResourceLwM2M[];\n}\n\n/**\n * multiple  == true  => Multiple\n * multiple  == false => Single\n * mandatory == true  => Mandatory\n * mandatory == false => Optional\n */\nexport interface ObjectLwM2M {\n  id: number;\n  keyId: string;\n  name: string;\n  multiple?: boolean;\n  mandatory?: boolean;\n  attributes?: AttributesNameValueMap;\n  instances?: Instance [];\n}\n\nexport type AttributesNameValueMap = {\n  [key in AttributeName]?: number;\n};\n\nexport interface AttributesNameValue {\n  name: AttributeName;\n  value: number;\n}\n\nexport function valueValidatorByAttributeName(attributeName: AttributeName): ValidatorFn[] {\n  const validators = [Validators.required];\n  switch (attributeName) {\n    case AttributeName.pmin:\n    case AttributeName.pmax:\n    // case AttributeName.epmin:\n    // case AttributeName.epmax:\n      validators.push(Validators.min(0), Validators.pattern('[0-9]*'));\n      break;\n  }\n  return validators;\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\nimport { Subject, Subscription } from 'rxjs';\nimport { BroadcastEvent, BroadcastListener, BroadcastMessage } from '@core/services/broadcast.models';\nimport { filter } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class BroadcastService {\n\n  private broadcastSubject: Subject<BroadcastMessage> = new Subject();\n\n  broadcast(name: string, ...args: Array<any>) {\n    const message = {\n      name,\n      args\n    } as BroadcastMessage;\n    this.broadcastSubject.next(message);\n  }\n\n  on(name: string, listener: BroadcastListener): Subscription {\n    return this.broadcastSubject.asObservable().pipe(\n      filter((message) => message.name === name)\n    ).subscribe(\n      (message) => {\n        const event = {\n          name: message.name\n        } as BroadcastEvent;\n        listener(event, message.args);\n      }\n    );\n  }\n\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Ace } from 'ace-builds';\n\nexport type tbMetaType = 'object' | 'function' | 'service' | 'property' | 'argument';\n\nexport type TbEditorCompletions = {[name: string]: TbEditorCompletion};\n\nexport interface FunctionArgType {\n  type?: string;\n  description?: string;\n}\n\nexport interface FunctionArg extends FunctionArgType {\n  name: string;\n  type?: string;\n  description?: string;\n  optional?: boolean;\n}\n\nexport interface TbEditorCompletion {\n  meta: tbMetaType;\n  description?: string;\n  type?: string;\n  args?: FunctionArg[];\n  return?: FunctionArgType;\n  children?: TbEditorCompletions;\n}\n\ninterface TbEditorAceCompletion extends Ace.Completion {\n  isTbEditorAceCompletion: true;\n  snippet: string;\n  description?: string;\n  type?: string;\n  args?: FunctionArg[];\n  return?: FunctionArgType;\n}\n\nexport class TbEditorCompleter implements Ace.Completer {\n\n  identifierRegexps: RegExp[] = [\n    /[a-zA-Z_0-9\\$\\-\\u00A2-\\u2000\\u2070-\\uFFFF.]/\n  ];\n\n  constructor(private editorCompletions: TbEditorCompletions) {\n  }\n\n  getCompletions(editor: Ace.Editor, session: Ace.EditSession,\n                 position: Ace.Point, prefix: string, callback: Ace.CompleterCallback): void {\n    const result = this.prepareCompletions(prefix);\n    if (result) {\n      callback(null, result);\n    }\n  }\n\n  private resolvePath(prefix: string): string[] {\n    if (!prefix || !prefix.length) {\n      return [];\n    }\n    let parts = prefix.split('.');\n    if (parts.length) {\n      parts.pop();\n    } else {\n      parts = [];\n    }\n    let currentCompletions = this.editorCompletions;\n    for (const part of parts) {\n      if (currentCompletions[part]) {\n        currentCompletions = currentCompletions[part].children;\n        if (!currentCompletions) {\n          return null;\n        }\n      } else {\n        return null;\n      }\n    }\n    return parts;\n  }\n\n  private prepareCompletions(prefix: string): Ace.Completion[]  {\n    const path = this.resolvePath(prefix);\n    if (path !== null) {\n      return this.toAceCompletionsList(this.editorCompletions, path);\n    } else {\n      return [];\n    }\n  }\n\n  private toAceCompletionsList(completions: TbEditorCompletions, parentPath: string[]): Ace.Completion[]  {\n    const result: Ace.Completion[] = [];\n    let targetCompletions = completions;\n    let parentPrefix = '';\n    if (parentPath.length) {\n      parentPrefix = parentPath.join('.') + '.';\n      for (const path of parentPath) {\n        targetCompletions = targetCompletions[path].children;\n      }\n    }\n    for (const key of Object.keys(targetCompletions)) {\n      result.push(this.toAceCompletion(key, targetCompletions[key], parentPrefix));\n    }\n    return result;\n  }\n\n  private toAceCompletion(name: string, completion: TbEditorCompletion, parentPrefix: string): Ace.Completion {\n    const aceCompletion: TbEditorAceCompletion = {\n      isTbEditorAceCompletion: true,\n      snippet: parentPrefix + name,\n      name,\n      caption: parentPrefix + name,\n      score: 100000,\n      value: parentPrefix + name,\n      meta: completion.meta,\n      type: completion.type,\n      description: completion.description,\n      args: completion.args,\n      return: completion.return\n    };\n    return aceCompletion;\n  }\n\n  getDocTooltip(completion: TbEditorAceCompletion) {\n    if (completion && completion.isTbEditorAceCompletion) {\n      return {\n        docHTML: this.createDocHTML(completion)\n      };\n    }\n  }\n\n  private createDocHTML(completion: TbEditorAceCompletion): string {\n    let title = `<b>${completion.name}</b>`;\n    if (completion.meta === 'function') {\n      title += '(';\n      if (completion.args) {\n        const strArgs: string[] = [];\n        for (const arg of completion.args) {\n          let strArg = `${arg.name}`;\n          if (arg.optional) {\n            strArg += '?';\n          }\n          if (arg.type) {\n            strArg += `: ${arg.type}`;\n          }\n          strArgs.push(strArg);\n        }\n        title += strArgs.join(', ');\n      }\n      title += '): ';\n      if (completion.return) {\n        title += completion.return.type;\n      } else {\n        title += 'void';\n      }\n    } else {\n      title += `: ${completion.type ? completion.type : completion.meta}`;\n    }\n    let html = `<div class=\"tb-ace-doc-tooltip\"><code class=\"title\">${title}</code>`;\n    if (completion.description) {\n      html += `<hr><div>${completion.description}</div>`;\n    }\n    if (completion.args || completion.return) {\n      let functionInfoBlock = '<div class=\"tb-function-info\">';\n      if (completion.args) {\n        functionInfoBlock += '<div class=\"tb-api-title\">Parameters</div>';\n        let argsTable = '<table class=\"tb-api-table\"><tbody>';\n        const strArgs: string[] = [];\n        for (const arg of completion.args) {\n          let strArg = `<tr><td class=\"arg-name\"><code>${arg.name}`;\n          if (arg.optional) {\n            strArg += ' (optional)';\n          }\n          strArg += '</code></td><td>';\n          if (arg.type) {\n            strArg += `<code>${arg.type}</code>`;\n          }\n          strArg += '</td><td class=\"arg-description\">';\n          if (arg.description) {\n            strArg += `${arg.description}`;\n          }\n          strArg += '</td></tr>';\n          strArgs.push(strArg);\n        }\n        argsTable += strArgs.join('') + '</tbody></table>';\n        functionInfoBlock += argsTable;\n      }\n      if (completion.return) {\n        let returnStr = '<div class=\"tb-api-title\">Returns</div>';\n        returnStr += `<div class=\"tb-function-return\"><code>${completion.return.type}</code>`;\n        if (completion.return.description) {\n          returnStr += `: ${completion.return.description}`;\n        }\n        returnStr += '</div>';\n        functionInfoBlock += returnStr;\n      }\n      functionInfoBlock += '</div>';\n      html += functionInfoBlock;\n    }\n    html += '</div>';\n    return html;\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, forwardRef, Input, OnInit } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\n\n@Component({\n  selector: 'tb-datetime',\n  templateUrl: './datetime.component.html',\n  styleUrls: ['./datetime.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => DatetimeComponent),\n      multi: true\n    }\n  ]\n})\nexport class DatetimeComponent implements OnInit, ControlValueAccessor {\n\n  private requiredValue: boolean;\n  get required(): boolean {\n    return this.requiredValue;\n  }\n  @Input()\n  set required(value: boolean) {\n    this.requiredValue = coerceBooleanProperty(value);\n  }\n\n  @Input()\n  disabled: boolean;\n\n  @Input()\n  dateText: string;\n\n  @Input()\n  timeText: string;\n\n  @Input()\n  showLabel = true;\n\n  minDateValue: Date | null;\n\n  @Input()\n  set minDate(minDate: number | null) {\n    this.minDateValue = minDate ? new Date(minDate) : null;\n  }\n\n  maxDateValue: Date | null;\n\n  @Input()\n  set maxDate(maxDate: number | null) {\n    this.maxDateValue = maxDate ? new Date(maxDate) : null;\n  }\n\n  modelValue: number;\n\n  date: Date;\n\n  private propagateChange = (v: any) => { };\n\n  constructor() {\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n  }\n\n  ngOnInit(): void {\n  }\n\n  writeValue(datetime: number | null): void {\n    this.modelValue = datetime;\n    if (this.modelValue) {\n      this.date = new Date(this.modelValue);\n    } else {\n      this.date = null;\n    }\n  }\n\n  updateView(value: number | null) {\n    if (this.modelValue !== value) {\n      this.modelValue = value;\n      this.propagateChange(this.modelValue);\n    }\n  }\n\n  onDateChange() {\n    const value = this.date ? this.date.getTime() : null;\n    this.updateView(value);\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<section fxLayout=\"row\" fxLayoutAlign=\"start start\" fxLayoutGap=\"16px\">\n  <mat-form-field [floatLabel]=\"showLabel ? 'auto' : 'always'\" [hideRequiredMarker]=\"!showLabel\" [ngClass]=\"{'no-label': !showLabel}\">\n    <mat-placeholder *ngIf=\"showLabel\">{{ dateText | translate }}</mat-placeholder>\n    <mat-datetimepicker-toggle [for]=\"datePicker\" matPrefix></mat-datetimepicker-toggle>\n    <mat-datetimepicker #datePicker type=\"date\" openOnFocus=\"true\"></mat-datetimepicker>\n    <input [min]=\"minDateValue\" [max]=\"maxDateValue\"\n           [disabled]=\"disabled\"\n           [required]=\"required\"\n           matInput [(ngModel)]=\"date\"\n           [matDatetimepicker]=\"datePicker\" (ngModelChange)=\"onDateChange()\">\n  </mat-form-field>\n  <mat-form-field [floatLabel]=\"showLabel ? 'auto' : 'always'\" [hideRequiredMarker]=\"!showLabel\" [ngClass]=\"{'no-label': !showLabel}\">\n    <mat-placeholder *ngIf=\"showLabel\">{{ timeText | translate }}</mat-placeholder>\n    <mat-datetimepicker-toggle [for]=\"timePicker\" matPrefix></mat-datetimepicker-toggle>\n    <mat-datetimepicker #timePicker type=\"time\" openOnFocus=\"true\"></mat-datetimepicker>\n    <input [min]=\"minDateValue\" [max]=\"maxDateValue\"\n           [disabled]=\"disabled\"\n           [required]=\"required\"\n           matInput\n           [(ngModel)]=\"date\"\n           [matDatetimepicker]=\"timePicker\" (ngModelChange)=\"onDateChange()\">\n  </mat-form-field>\n</section>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Directive, OnDestroy } from '@angular/core';\nimport { PageComponent } from '@shared/components/page.component';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { NavigationStart, Router, RouterEvent } from '@angular/router';\nimport { Subscription } from 'rxjs';\nimport { filter } from 'rxjs/operators';\n\n@Directive()\nexport abstract class DialogComponent<T, R = any> extends PageComponent implements OnDestroy {\n\n  routerSubscription: Subscription;\n\n  protected constructor(protected store: Store<AppState>,\n                        protected router: Router,\n                        protected dialogRef: MatDialogRef<T, R>) {\n    super(store);\n    this.routerSubscription = this.router.events\n      .pipe(\n        filter((event: RouterEvent) => event instanceof NavigationStart),\n        filter(() => !!this.dialogRef)\n      )\n      .subscribe(() => {\n        this.dialogRef.close();\n      });\n  }\n\n  ngOnDestroy(): void {\n    super.ngOnDestroy();\n    if (this.routerSubscription) {\n      this.routerSubscription.unsubscribe();\n    }\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { ActionReducer } from '@ngrx/store';\n\nimport { AppState } from '../core.state';\n\nexport function debug(\n  reducer: ActionReducer<AppState>\n): ActionReducer<AppState> {\n  return (state, action) => {\n    const newState = reducer(state, action);\n    console.log(`[DEBUG] action: ${action.type}`, {\n      payload: (action as any).payload,\n      oldState: state,\n      newState\n    });\n    return newState;\n  };\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { InjectionToken } from '@angular/core';\n\nexport const Constants = {\n  serverErrorCode: {\n    general: 2,\n    authentication: 10,\n    jwtTokenExpired: 11,\n    tenantTrialExpired: 12,\n    credentialsExpired: 15,\n    permissionDenied: 20,\n    invalidArguments: 30,\n    badRequestParams: 31,\n    itemNotFound: 32,\n    tooManyRequests: 33,\n    tooManyUpdates: 34\n  },\n  entryPoints: {\n    login: '/api/auth/login',\n    tokenRefresh: '/api/auth/token',\n    nonTokenBased: '/api/noauth'\n  }\n};\n\nexport const MediaBreakpoints = {\n  xs: 'screen and (max-width: 599px)',\n  sm: 'screen and (min-width: 600px) and (max-width: 959px)',\n  md: 'screen and (min-width: 960px) and (max-width: 1279px)',\n  lg: 'screen and (min-width: 1280px) and (max-width: 1919px)',\n  xl: 'screen and (min-width: 1920px) and (max-width: 5000px)',\n  'lt-sm': 'screen and (max-width: 599px)',\n  'lt-md': 'screen and (max-width: 959px)',\n  'lt-lg': 'screen and (max-width: 1279px)',\n  'lt-xl': 'screen and (max-width: 1919px)',\n  'gt-xs': 'screen and (min-width: 600px)',\n  'gt-sm': 'screen and (min-width: 960px)',\n  'gt-md': 'screen and (min-width: 1280px)',\n  'gt-lg': 'screen and (min-width: 1920px)',\n  'gt-xl': 'screen and (min-width: 5001px)'\n};\n\nexport const helpBaseUrl = 'https://thingsboard.io';\n\nexport const HelpLinks = {\n  linksMap: {\n    outgoingMailSettings: helpBaseUrl + '/docs/user-guide/ui/mail-settings',\n    smsProviderSettings: helpBaseUrl + '/docs/user-guide/ui/sms-provider-settings',\n    securitySettings: helpBaseUrl + '/docs/user-guide/ui/security-settings',\n    oauth2Settings: helpBaseUrl + '/docs/user-guide/oauth-2-support/',\n    ruleEngine: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/overview/',\n    ruleNodeCheckRelation: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/filter-nodes/#check-relation-filter-node',\n    ruleNodeCheckExistenceFields: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/filter-nodes/#check-existence-fields-node',\n    ruleNodeGpsGeofencingFilter: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/filter-nodes/#gps-geofencing-filter-node',\n    ruleNodeJsFilter: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/filter-nodes/#script-filter-node',\n    ruleNodeJsSwitch: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/filter-nodes/#switch-node',\n    ruleNodeMessageTypeFilter: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/filter-nodes/#message-type-filter-node',\n    ruleNodeMessageTypeSwitch: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/filter-nodes/#message-type-switch-node',\n    ruleNodeOriginatorTypeFilter: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/filter-nodes/#originator-type-filter-node',\n    ruleNodeOriginatorTypeSwitch: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/filter-nodes/#originator-type-switch-node',\n    ruleNodeOriginatorAttributes: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/enrichment-nodes/#originator-attributes',\n    ruleNodeOriginatorFields: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/enrichment-nodes/#originator-fields',\n    ruleNodeOriginatorTelemetry: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/enrichment-nodes/#originator-telemetry',\n    ruleNodeCustomerAttributes: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/enrichment-nodes/#customer-attributes',\n    ruleNodeCustomerDetails: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/enrichment-nodes/#customer-details',\n    ruleNodeDeviceAttributes: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/enrichment-nodes/#device-attributes',\n    ruleNodeRelatedAttributes: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/enrichment-nodes/#related-attributes',\n    ruleNodeTenantAttributes: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/enrichment-nodes/#tenant-attributes',\n    ruleNodeTenantDetails: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/enrichment-nodes/#tenant-details',\n    ruleNodeChangeOriginator: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/transformation-nodes/#change-originator',\n    ruleNodeTransformMsg: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/transformation-nodes/#script-transformation-node',\n    ruleNodeMsgToEmail: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/transformation-nodes/#to-email-node',\n    ruleNodeAssignToCustomer: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/transformation-nodes/#assign-to-customer-node',\n    ruleNodeUnassignFromCustomer: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/transformation-nodes/#unassign-from-customer-node',\n    ruleNodeClearAlarm: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/action-nodes/#clear-alarm-node',\n    ruleNodeCreateAlarm: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/action-nodes/#create-alarm-node',\n    ruleNodeCreateRelation: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/action-nodes/#create-relation-node',\n    ruleNodeDeleteRelation: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/action-nodes/#delete-relation-node',\n    ruleNodeMsgDelay: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/action-nodes/#delay-node',\n    ruleNodeMsgGenerator: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/action-nodes/#generator-node',\n    ruleNodeGpsGeofencingEvents: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/action-nodes/#gps-geofencing-events-node',\n    ruleNodeLog: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/action-nodes/#log-node',\n    ruleNodeRpcCallReply: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/action-nodes/#rpc-call-reply-node',\n    ruleNodeRpcCallRequest: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/action-nodes/#rpc-call-request-node',\n    ruleNodeSaveAttributes: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/action-nodes/#save-attributes-node',\n    ruleNodeSaveTimeseries: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/action-nodes/#save-timeseries-node',\n    ruleNodeSaveToCustomTable: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/action-nodes/#save-to-custom-table',\n    ruleNodeRuleChain: helpBaseUrl + '/docs/user-guide/ui/rule-chains/',\n    ruleNodeAwsSns: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/external-nodes/#aws-sns-node',\n    ruleNodeAwsSqs: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/external-nodes/#aws-sqs-node',\n    ruleNodeKafka: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/external-nodes/#kafka-node',\n    ruleNodeMqtt: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/external-nodes/#mqtt-node',\n    ruleNodeAzureIotHub: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/external-nodes/#azure-iot-hub-node',\n    ruleNodeRabbitMq: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/external-nodes/#rabbitmq-node',\n    ruleNodeRestApiCall: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/external-nodes/#rest-api-call-node',\n    ruleNodeSendEmail: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/external-nodes/#send-email-node',\n    ruleNodeSendSms: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/external-nodes/#send-sms-node',\n    tenants: helpBaseUrl + '/docs/user-guide/ui/tenants',\n    tenantProfiles: helpBaseUrl + '/docs/user-guide/ui/tenant-profiles',\n    customers: helpBaseUrl + '/docs/user-guide/ui/customers',\n    users: helpBaseUrl + '/docs/user-guide/ui/users',\n    devices: helpBaseUrl + '/docs/user-guide/ui/devices',\n    deviceProfiles: helpBaseUrl + '/docs/user-guide/ui/device-profiles',\n    edges: helpBaseUrl + '/docs/user-guide/ui/edges',\n    assets: helpBaseUrl + '/docs/user-guide/ui/assets',\n    entityViews: helpBaseUrl + '/docs/user-guide/ui/entity-views',\n    entitiesImport: helpBaseUrl + '/docs/user-guide/bulk-provisioning',\n    rulechains: helpBaseUrl + '/docs/user-guide/ui/rule-chains',\n    resources: helpBaseUrl + '/docs/user-guide/ui/resources',\n    dashboards: helpBaseUrl + '/docs/user-guide/ui/dashboards',\n    otaUpdates: helpBaseUrl + '/docs/user-guide/ui/ota-updates',\n    widgetsBundles: helpBaseUrl + '/docs/user-guide/ui/widget-library#bundles',\n    widgetsConfig:  helpBaseUrl + '/docs/user-guide/ui/dashboards#widget-configuration',\n    widgetsConfigTimeseries:  helpBaseUrl + '/docs/user-guide/ui/dashboards#timeseries',\n    widgetsConfigLatest: helpBaseUrl +  '/docs/user-guide/ui/dashboards#latest',\n    widgetsConfigRpc: helpBaseUrl +  '/docs/user-guide/ui/dashboards#rpc',\n    widgetsConfigAlarm: helpBaseUrl +  '/docs/user-guide/ui/dashboards#alarm',\n    widgetsConfigStatic: helpBaseUrl +  '/docs/user-guide/ui/dashboards#static',\n    ruleNodePushToCloud: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/action-nodes/#push-to-cloud',\n    ruleNodePushToEdge: helpBaseUrl + '/docs/user-guide/rule-engine-2-0/action-nodes/#push-to-edge'\n  }\n};\n\nexport interface ValueTypeData {\n  name: string;\n  icon: string;\n}\n\nexport enum ValueType {\n  STRING = 'STRING',\n  INTEGER = 'INTEGER',\n  DOUBLE = 'DOUBLE',\n  BOOLEAN = 'BOOLEAN',\n  JSON = 'JSON'\n}\n\nexport enum DataType {\n  STRING = 'STRING',\n  LONG = 'LONG',\n  BOOLEAN = 'BOOLEAN',\n  DOUBLE = 'DOUBLE',\n  JSON = 'JSON'\n}\n\nexport const DataTypeTranslationMap = new Map([\n  [DataType.STRING, 'value.string'],\n  [DataType.LONG, 'value.integer'],\n  [DataType.BOOLEAN, 'value.boolean'],\n  [DataType.DOUBLE, 'value.double'],\n  [DataType.JSON, 'value.json']\n]);\n\nexport const valueTypesMap = new Map<ValueType, ValueTypeData>(\n  [\n    [\n      ValueType.STRING,\n      {\n        name: 'value.string',\n        icon: 'mdi:format-text'\n      }\n    ],\n    [\n      ValueType.INTEGER,\n      {\n        name: 'value.integer',\n        icon: 'mdi:numeric'\n      }\n    ],\n    [\n      ValueType.DOUBLE,\n      {\n        name: 'value.double',\n        icon: 'mdi:numeric'\n      }\n    ],\n    [\n      ValueType.BOOLEAN,\n      {\n        name: 'value.boolean',\n        icon: 'mdi:checkbox-marked-outline'\n      }\n    ],\n    [\n      ValueType.JSON,\n      {\n        name: 'value.json',\n        icon: 'mdi:json'\n      }\n    ]\n  ]\n);\n\nexport interface ContentTypeData {\n  name: string;\n  code: string;\n}\n\nexport enum ContentType {\n  JSON = 'JSON',\n  TEXT = 'TEXT',\n  BINARY = 'BINARY'\n}\n\nexport const contentTypesMap = new Map<ContentType, ContentTypeData>(\n  [\n    [\n      ContentType.JSON,\n      {\n        name: 'content-type.json',\n        code: 'json'\n      }\n    ],\n    [\n      ContentType.TEXT,\n      {\n        name: 'content-type.text',\n        code: 'text'\n      }\n    ],\n    [\n      ContentType.BINARY,\n      {\n        name: 'content-type.binary',\n        code: 'text'\n      }\n    ]\n  ]\n);\n\nexport const customTranslationsPrefix = 'custom.';\nexport const i18nPrefix = 'i18n';\n\nexport const MODULES_MAP = new InjectionToken<{[key: string]: any}>('ModulesMap');\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, Input } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { COUNTRIES } from '@home/models/contact.models';\n\n@Component({\n  selector: 'tb-contact',\n  templateUrl: './contact.component.html'\n})\nexport class ContactComponent {\n\n  @Input()\n  parentForm: FormGroup;\n\n  @Input() isEdit: boolean;\n\n  countries = COUNTRIES;\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<section [formGroup]=\"parentForm\">\n  <mat-form-field class=\"mat-block\">\n    <mat-label translate>contact.country</mat-label>\n    <mat-select formControlName=\"country\">\n      <mat-option *ngFor=\"let country of countries\" [value]=\"country\">\n        {{ country }}\n      </mat-option>\n    </mat-select>\n  </mat-form-field>\n  <div fxLayout.gt-sm=\"row\" fxLayoutGap.gt-sm=\"10px\">\n    <mat-form-field class=\"mat-block\">\n      <mat-label translate>contact.city</mat-label>\n      <input matInput formControlName=\"city\">\n      <mat-error *ngIf=\"parentForm.get('city').hasError('maxlength')\">\n        {{ 'contact.city-max-length' | translate }}\n      </mat-error>\n    </mat-form-field>\n    <mat-form-field class=\"mat-block\">\n      <mat-label translate>contact.state</mat-label>\n      <input matInput formControlName=\"state\">\n      <mat-error *ngIf=\"parentForm.get('state').hasError('maxlength')\">\n        {{ 'contact.state-max-length' | translate }}\n      </mat-error>\n    </mat-form-field>\n    <mat-form-field class=\"mat-block\">\n      <mat-label translate>contact.postal-code</mat-label>\n      <input matInput formControlName=\"zip\">\n      <mat-error *ngIf=\"parentForm.get('zip').hasError('pattern')\">\n        {{ 'contact.postal-code-invalid' | translate }}\n      </mat-error>\n    </mat-form-field>\n  </div>\n  <mat-form-field class=\"mat-block\">\n    <mat-label translate>contact.address</mat-label>\n    <input matInput formControlName=\"address\">\n  </mat-form-field>\n  <mat-form-field class=\"mat-block\">\n    <mat-label translate>contact.address2</mat-label>\n    <input matInput formControlName=\"address2\">\n  </mat-form-field>\n  <mat-form-field class=\"mat-block\">\n    <mat-label translate>contact.phone</mat-label>\n    <input matInput formControlName=\"phone\">\n    <mat-error *ngIf=\"parentForm.get('phone').hasError('maxlength')\">\n      {{ 'contact.phone-max-length' | translate }}\n    </mat-error>\n  </mat-form-field>\n  <mat-form-field class=\"mat-block\">\n    <mat-label translate>contact.email</mat-label>\n    <input matInput formControlName=\"email\">\n    <mat-error *ngIf=\"parentForm.get('email').hasError('email')\">\n      {{ 'user.invalid-email-format' | translate }}\n    </mat-error>\n  </mat-form-field>\n</section>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nexport class InterceptorConfig {\n  constructor(public ignoreLoading: boolean = false,\n              public ignoreErrors: boolean = false,\n              public resendRequest: boolean = false) {}\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component } from '@angular/core';\nimport { MatDialogRef } from '@angular/material/dialog';\n\n@Component({\n  selector: 'tb-todo-dialog',\n  templateUrl: './todo-dialog.component.html',\n  styleUrls: ['./todo-dialog.component.scss']\n})\nexport class TodoDialogComponent {\n  constructor(public dialogRef: MatDialogRef<TodoDialogComponent>) {\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<h2 mat-dialog-title>Coming soon!</h2>\n<div mat-dialog-content>\n  <h1>COMING SOON!</h1>\n</div>\n<div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\">\n  <button mat-button color=\"primary\" [mat-dialog-close]=\"true\" cdkFocusInitial>Ok</button>\n</div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { HomeRoutingModule } from './home-routing.module';\nimport { HomeComponent } from './home.component';\nimport { SharedModule } from '@app/shared/shared.module';\nimport { MenuLinkComponent } from '@modules/home/menu/menu-link.component';\nimport { MenuToggleComponent } from '@modules/home/menu/menu-toggle.component';\nimport { SideMenuComponent } from '@modules/home/menu/side-menu.component';\n\n@NgModule({\n  declarations:\n    [\n      HomeComponent,\n      MenuLinkComponent,\n      MenuToggleComponent,\n      SideMenuComponent\n    ],\n  imports: [\n    CommonModule,\n    SharedModule,\n    HomeRoutingModule\n  ]\n})\nexport class HomeModule { }\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, Inject, InjectionToken, OnInit, ViewContainerRef } from '@angular/core';\nimport {\n  aggregationTranslations,\n  AggregationType,\n  DAY,\n  HistoryWindowType,\n  quickTimeIntervalPeriod,\n  RealtimeWindowType,\n  Timewindow,\n  TimewindowType\n} from '@shared/models/time/time.models';\nimport { OverlayRef } from '@angular/cdk/overlay';\nimport { PageComponent } from '@shared/components/page.component';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { TimeService } from '@core/services/time.service';\n\nexport const TIMEWINDOW_PANEL_DATA = new InjectionToken<any>('TimewindowPanelData');\n\nexport interface TimewindowPanelData {\n  historyOnly: boolean;\n  timewindow: Timewindow;\n  aggregation: boolean;\n  timezone: boolean;\n  isEdit: boolean;\n}\n\n@Component({\n  selector: 'tb-timewindow-panel',\n  templateUrl: './timewindow-panel.component.html',\n  styleUrls: ['./timewindow-panel.component.scss']\n})\nexport class TimewindowPanelComponent extends PageComponent implements OnInit {\n\n  historyOnly = false;\n\n  aggregation = false;\n\n  timezone = false;\n\n  isEdit = false;\n\n  timewindow: Timewindow;\n\n  result: Timewindow;\n\n  timewindowForm: FormGroup;\n\n  historyTypes = HistoryWindowType;\n\n  realtimeTypes = RealtimeWindowType;\n\n  timewindowTypes = TimewindowType;\n\n  aggregationTypes = AggregationType;\n\n  aggregations = Object.keys(AggregationType);\n\n  aggregationTypesTranslations = aggregationTranslations;\n\n  constructor(@Inject(TIMEWINDOW_PANEL_DATA) public data: TimewindowPanelData,\n              public overlayRef: OverlayRef,\n              protected store: Store<AppState>,\n              public fb: FormBuilder,\n              private timeService: TimeService,\n              public viewContainerRef: ViewContainerRef) {\n    super(store);\n    this.historyOnly = data.historyOnly;\n    this.timewindow = data.timewindow;\n    this.aggregation = data.aggregation;\n    this.timezone = data.timezone;\n    this.isEdit = data.isEdit;\n  }\n\n  ngOnInit(): void {\n    const hideInterval = this.timewindow.hideInterval || false;\n    const hideAggregation = this.timewindow.hideAggregation || false;\n    const hideAggInterval = this.timewindow.hideAggInterval || false;\n    const hideTimezone = this.timewindow.hideTimezone || false;\n\n    this.timewindowForm = this.fb.group({\n        realtime: this.fb.group(\n          {\n            realtimeType: this.fb.control({\n              value: this.timewindow.realtime && typeof this.timewindow.realtime.realtimeType !== 'undefined'\n                ? this.timewindow.realtime.realtimeType : RealtimeWindowType.LAST_INTERVAL,\n              disabled: hideInterval\n            }),\n            timewindowMs: [\n              this.timewindow.realtime && typeof this.timewindow.realtime.timewindowMs !== 'undefined'\n                ? this.timewindow.realtime.timewindowMs : null\n            ],\n            interval: [\n              this.timewindow.realtime && typeof this.timewindow.realtime.interval !== 'undefined'\n                ? this.timewindow.realtime.interval : null\n            ],\n            quickInterval: this.fb.control({\n              value: this.timewindow.realtime && typeof this.timewindow.realtime.quickInterval !== 'undefined'\n                ? this.timewindow.realtime.quickInterval : null,\n              disabled: hideInterval\n            })\n          }\n        ),\n        history: this.fb.group(\n          {\n            historyType: this.fb.control({\n              value: this.timewindow.history && typeof this.timewindow.history.historyType !== 'undefined'\n                ? this.timewindow.history.historyType : HistoryWindowType.LAST_INTERVAL,\n              disabled: hideInterval\n            }),\n            timewindowMs: this.fb.control({\n              value: this.timewindow.history && typeof this.timewindow.history.timewindowMs !== 'undefined'\n                ? this.timewindow.history.timewindowMs : null,\n              disabled: hideInterval\n            }),\n            interval: [\n              this.timewindow.history && typeof this.timewindow.history.interval !== 'undefined'\n                ? this.timewindow.history.interval : null\n            ],\n            fixedTimewindow: this.fb.control({\n              value: this.timewindow.history && typeof this.timewindow.history.fixedTimewindow !== 'undefined'\n                ? this.timewindow.history.fixedTimewindow : null,\n              disabled: hideInterval\n            }),\n            quickInterval: this.fb.control({\n              value: this.timewindow.history && typeof this.timewindow.history.quickInterval !== 'undefined'\n                ? this.timewindow.history.quickInterval : null,\n              disabled: hideInterval\n            })\n          }\n        ),\n        aggregation: this.fb.group(\n          {\n            type: this.fb.control({\n              value: this.timewindow.aggregation && typeof this.timewindow.aggregation.type !== 'undefined'\n                ? this.timewindow.aggregation.type : null,\n              disabled: hideAggregation\n            }),\n            limit: this.fb.control({\n              value: this.timewindow.aggregation && typeof this.timewindow.aggregation.limit !== 'undefined'\n                ? this.timewindow.aggregation.limit : null,\n              disabled: hideAggInterval\n            }, [Validators.min(this.minDatapointsLimit()), Validators.max(this.maxDatapointsLimit())])\n          }\n        ),\n        timezone: this.fb.control({\n          value: this.timewindow.timezone !== 'undefined'\n            ? this.timewindow.timezone : null,\n          disabled: hideTimezone\n        })\n    });\n  }\n\n  update() {\n    const timewindowFormValue = this.timewindowForm.getRawValue();\n    this.timewindow.realtime = {\n      realtimeType: timewindowFormValue.realtime.realtimeType,\n      timewindowMs: timewindowFormValue.realtime.timewindowMs,\n      quickInterval: timewindowFormValue.realtime.quickInterval,\n      interval: timewindowFormValue.realtime.interval\n    };\n    this.timewindow.history = {\n      historyType: timewindowFormValue.history.historyType,\n      timewindowMs: timewindowFormValue.history.timewindowMs,\n      interval: timewindowFormValue.history.interval,\n      fixedTimewindow: timewindowFormValue.history.fixedTimewindow,\n      quickInterval: timewindowFormValue.history.quickInterval,\n    };\n    if (this.aggregation) {\n      this.timewindow.aggregation = {\n        type: timewindowFormValue.aggregation.type,\n        limit: timewindowFormValue.aggregation.limit\n      };\n    }\n    if (this.timezone) {\n      this.timewindow.timezone = timewindowFormValue.timezone;\n    }\n    this.result = this.timewindow;\n    this.overlayRef.dispose();\n  }\n\n  cancel() {\n    this.overlayRef.dispose();\n  }\n\n  minDatapointsLimit() {\n    return this.timeService.getMinDatapointsLimit();\n  }\n\n  maxDatapointsLimit() {\n    return this.timeService.getMaxDatapointsLimit();\n  }\n\n  minRealtimeAggInterval() {\n    return this.timeService.minIntervalLimit(this.currentRealtimeTimewindow());\n  }\n\n  maxRealtimeAggInterval() {\n    return this.timeService.maxIntervalLimit(this.currentRealtimeTimewindow());\n  }\n\n  currentRealtimeTimewindow(): number {\n    const timeWindowFormValue = this.timewindowForm.getRawValue();\n    switch (timeWindowFormValue.realtime.realtimeType) {\n      case RealtimeWindowType.LAST_INTERVAL:\n        return timeWindowFormValue.realtime.timewindowMs;\n      case RealtimeWindowType.INTERVAL:\n        return quickTimeIntervalPeriod(timeWindowFormValue.realtime.quickInterval);\n      default:\n        return DAY;\n    }\n  }\n\n  minHistoryAggInterval() {\n    return this.timeService.minIntervalLimit(this.currentHistoryTimewindow());\n  }\n\n  maxHistoryAggInterval() {\n    return this.timeService.maxIntervalLimit(this.currentHistoryTimewindow());\n  }\n\n  currentHistoryTimewindow() {\n    const timewindowFormValue = this.timewindowForm.getRawValue();\n    if (timewindowFormValue.history.historyType === HistoryWindowType.LAST_INTERVAL) {\n      return timewindowFormValue.history.timewindowMs;\n    } else if (timewindowFormValue.history.historyType === HistoryWindowType.INTERVAL) {\n      return quickTimeIntervalPeriod(timewindowFormValue.history.quickInterval);\n    } else if (timewindowFormValue.history.fixedTimewindow) {\n      return timewindowFormValue.history.fixedTimewindow.endTimeMs -\n        timewindowFormValue.history.fixedTimewindow.startTimeMs;\n    } else {\n      return DAY;\n    }\n  }\n\n  onHideIntervalChanged() {\n    if (this.timewindow.hideInterval) {\n      this.timewindowForm.get('history.historyType').disable({emitEvent: false});\n      this.timewindowForm.get('history.timewindowMs').disable({emitEvent: false});\n      this.timewindowForm.get('history.fixedTimewindow').disable({emitEvent: false});\n      this.timewindowForm.get('history.quickInterval').disable({emitEvent: false});\n      this.timewindowForm.get('realtime.realtimeType').disable({emitEvent: false});\n      this.timewindowForm.get('realtime.timewindowMs').disable({emitEvent: false});\n      this.timewindowForm.get('realtime.quickInterval').disable({emitEvent: false});\n    } else {\n      this.timewindowForm.get('history.historyType').enable({emitEvent: false});\n      this.timewindowForm.get('history.timewindowMs').enable({emitEvent: false});\n      this.timewindowForm.get('history.fixedTimewindow').enable({emitEvent: false});\n      this.timewindowForm.get('history.quickInterval').enable({emitEvent: false});\n      this.timewindowForm.get('realtime.realtimeType').enable({emitEvent: false});\n      this.timewindowForm.get('realtime.timewindowMs').enable({emitEvent: false});\n      this.timewindowForm.get('realtime.quickInterval').enable({emitEvent: false});\n    }\n    this.timewindowForm.markAsDirty();\n  }\n\n  onHideAggregationChanged() {\n    if (this.timewindow.hideAggregation) {\n      this.timewindowForm.get('aggregation.type').disable({emitEvent: false});\n    } else {\n      this.timewindowForm.get('aggregation.type').enable({emitEvent: false});\n    }\n    this.timewindowForm.markAsDirty();\n  }\n\n  onHideAggIntervalChanged() {\n    if (this.timewindow.hideAggInterval) {\n      this.timewindowForm.get('aggregation.limit').disable({emitEvent: false});\n    } else {\n      this.timewindowForm.get('aggregation.limit').enable({emitEvent: false});\n    }\n    this.timewindowForm.markAsDirty();\n  }\n\n  onHideTimezoneChanged() {\n    if (this.timewindow.hideTimezone) {\n      this.timewindowForm.get('timezone').disable({emitEvent: false});\n    } else {\n      this.timewindowForm.get('timezone').enable({emitEvent: false});\n    }\n    this.timewindowForm.markAsDirty();\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<form [formGroup]=\"timewindowForm\" (ngSubmit)=\"update()\">\n  <fieldset [disabled]=\"(isLoading$ | async)\">\n    <div class=\"mat-content\" fxLayout=\"column\">\n      <mat-tab-group dynamicHeight [ngClass]=\"{'tb-headless': historyOnly}\"\n                     (selectedIndexChange)=\"timewindowForm.markAsDirty()\" [(selectedIndex)]=\"timewindow.selectedTab\">\n        <mat-tab label=\"{{ 'timewindow.realtime' | translate }}\">\n          <section fxLayout=\"row\">\n            <section *ngIf=\"isEdit\" fxLayout=\"column\" style=\"padding-top: 8px; padding-left: 16px;\">\n              <label class=\"tb-small hide-label\" translate>timewindow.hide</label>\n              <mat-checkbox [ngModelOptions]=\"{standalone: true}\" [(ngModel)]=\"timewindow.hideInterval\"\n                            (ngModelChange)=\"onHideIntervalChanged()\"></mat-checkbox>\n            </section>\n            <section fxLayout=\"column\" fxFlex [fxShow]=\"isEdit || !timewindow.hideInterval\">\n              <div formGroupName=\"realtime\" class=\"mat-content mat-padding\" style=\"padding-top: 8px;\">\n                <mat-radio-group formControlName=\"realtimeType\">\n                  <mat-radio-button [value]=\"realtimeTypes.LAST_INTERVAL\" color=\"primary\">\n                    <section fxLayout=\"column\">\n                      <span translate>timewindow.last</span>\n                      <tb-timeinterval\n                        formControlName=\"timewindowMs\"\n                        predefinedName=\"timewindow.last\"\n                        [fxShow]=\"timewindowForm.get('realtime.realtimeType').value === realtimeTypes.LAST_INTERVAL\"\n                        [required]=\"timewindow.selectedTab === timewindowTypes.REALTIME &&\n                                timewindowForm.get('realtime.realtimeType').value === realtimeTypes.LAST_INTERVAL\"\n                        style=\"padding-top: 8px;\"></tb-timeinterval>\n                    </section>\n                  </mat-radio-button>\n                  <mat-radio-button [value]=\"realtimeTypes.INTERVAL\" color=\"primary\">\n                    <section fxLayout=\"column\">\n                      <span translate>timewindow.interval</span>\n                      <tb-quick-time-interval\n                        formControlName=\"quickInterval\"\n                        onlyCurrentInterval=\"true\"\n                        [fxShow]=\"timewindowForm.get('realtime.realtimeType').value === realtimeTypes.INTERVAL\"\n                        [required]=\"timewindow.selectedTab === timewindowTypes.REALTIME &&\n                                timewindowForm.get('realtime.realtimeType').value === realtimeTypes.INTERVAL\"\n                        style=\"padding-top: 8px\"></tb-quick-time-interval>\n                    </section>\n                  </mat-radio-button>\n                </mat-radio-group>\n              </div>\n            </section>\n          </section>\n        </mat-tab>\n        <mat-tab label=\"{{ 'timewindow.history' | translate }}\">\n          <section fxLayout=\"row\">\n            <section *ngIf=\"isEdit\" fxLayout=\"column\" style=\"padding-top: 8px; padding-left: 16px;\">\n              <label class=\"tb-small hide-label\" translate>timewindow.hide</label>\n              <mat-checkbox [ngModelOptions]=\"{standalone: true}\" [(ngModel)]=\"timewindow.hideInterval\"\n                            (ngModelChange)=\"onHideIntervalChanged()\"></mat-checkbox>\n            </section>\n            <section fxLayout=\"column\" fxFlex [fxShow]=\"isEdit || !timewindow.hideInterval\">\n              <div formGroupName=\"history\" class=\"mat-content mat-padding\" style=\"padding-top: 8px;\">\n                <mat-radio-group formControlName=\"historyType\">\n                  <mat-radio-button [value]=\"historyTypes.LAST_INTERVAL\" color=\"primary\">\n                    <section fxLayout=\"column\">\n                      <span translate>timewindow.last</span>\n                      <tb-timeinterval\n                        formControlName=\"timewindowMs\"\n                        predefinedName=\"timewindow.last\"\n                        class=\"history-time-input\"\n                        [fxShow]=\"timewindowForm.get('history.historyType').value === historyTypes.LAST_INTERVAL\"\n                        [required]=\"timewindow.selectedTab === timewindowTypes.HISTORY &&\n                                timewindowForm.get('history.historyType').value === historyTypes.LAST_INTERVAL\"\n                        style=\"padding-top: 8px;\"></tb-timeinterval>\n                    </section>\n                  </mat-radio-button>\n                  <mat-radio-button [value]=\"historyTypes.FIXED\" color=\"primary\">\n                    <section fxLayout=\"column\">\n                      <span translate>timewindow.time-period</span>\n                      <tb-datetime-period\n                        formControlName=\"fixedTimewindow\"\n                        class=\"history-time-input\"\n                        [fxShow]=\"timewindowForm.get('history.historyType').value === historyTypes.FIXED\"\n                        [required]=\"timewindow.selectedTab === timewindowTypes.HISTORY &&\n                                timewindowForm.get('history.historyType').value === historyTypes.FIXED\"\n                        style=\"padding-top: 8px;\"></tb-datetime-period>\n                    </section>\n                  </mat-radio-button>\n                  <mat-radio-button [value]=\"historyTypes.INTERVAL\" color=\"primary\">\n                    <section fxLayout=\"column\">\n                      <span translate>timewindow.interval</span>\n                      <tb-quick-time-interval\n                        formControlName=\"quickInterval\"\n                        class=\"history-time-input\"\n                        [fxShow]=\"timewindowForm.get('history.historyType').value === historyTypes.INTERVAL\"\n                        [required]=\"timewindow.selectedTab === timewindowTypes.HISTORY &&\n                              timewindowForm.get('history.historyType').value === historyTypes.INTERVAL\"\n                        style=\"padding-top: 8px\"></tb-quick-time-interval>\n                    </section>\n                  </mat-radio-button>\n                </mat-radio-group>\n              </div>\n            </section>\n          </section>\n        </mat-tab>\n      </mat-tab-group>\n      <div *ngIf=\"aggregation\" formGroupName=\"aggregation\" class=\"mat-content mat-padding\" fxLayout=\"column\">\n        <section fxLayout=\"row\">\n          <section fxLayout=\"column\" [fxShow]=\"isEdit\">\n            <label class=\"tb-small hide-label\" translate>timewindow.hide</label>\n            <mat-checkbox [ngModelOptions]=\"{standalone: true}\" [(ngModel)]=\"timewindow.hideAggregation\"\n                          (ngModelChange)=\"onHideAggregationChanged()\"></mat-checkbox>\n          </section>\n          <section fxFlex fxLayout=\"column\" [fxShow]=\"isEdit || !timewindow.hideAggregation\">\n            <mat-form-field>\n              <mat-label translate>aggregation.function</mat-label>\n              <mat-select formControlName=\"type\" style=\"min-width: 150px;\">\n                <mat-option *ngFor=\"let aggregation of aggregations\" [value]=\"aggregation\">\n                  {{ aggregationTypesTranslations.get(aggregationTypes[aggregation]) | translate }}\n                </mat-option>\n              </mat-select>\n            </mat-form-field>\n          </section>\n        </section>\n        <section fxLayout=\"row\" [fxShow]=\"timewindowForm.get('aggregation.type').value === aggregationTypes.NONE\">\n          <section fxLayout=\"column\" [fxShow]=\"isEdit\">\n            <label class=\"tb-small hide-label\" translate>timewindow.hide</label>\n            <mat-checkbox [ngModelOptions]=\"{standalone: true}\" [(ngModel)]=\"timewindow.hideAggInterval\"\n                          (ngModelChange)=\"onHideAggIntervalChanged()\"></mat-checkbox>\n          </section>\n          <section fxLayout=\"column\" fxFlex [fxShow]=\"isEdit || !timewindow.hideAggInterval\">\n            <div class=\"limit-slider-container\" fxLayout=\"row\" fxLayoutAlign=\"start center\"\n                                                fxLayout.xs=\"column\"  fxLayoutAlign.xs=\"stretch\">\n              <label translate>aggregation.limit</label>\n              <div fxLayout=\"row\" fxLayoutAlign=\"start center\" fxFlex>\n                <mat-slider fxFlex formControlName=\"limit\"\n                            thumbLabel\n                            [value]=\"timewindowForm.get('aggregation.limit').value\"\n                            min=\"{{minDatapointsLimit()}}\"\n                            max=\"{{maxDatapointsLimit()}}\">\n                </mat-slider>\n                <mat-form-field class=\"limit-slider-value\">\n                  <input matInput formControlName=\"limit\" type=\"number\" step=\"1\"\n                         [value]=\"timewindowForm.get('aggregation.limit').value\"\n                         min=\"{{minDatapointsLimit()}}\"\n                         max=\"{{maxDatapointsLimit()}}\"/>\n                </mat-form-field>\n              </div>\n            </div>\n          </section>\n        </section>\n      </div>\n      <div formGroupName=\"realtime\"\n           *ngIf=\"aggregation && timewindowForm.get('aggregation.type').value !== aggregationTypes.NONE &&\n           timewindow.selectedTab === timewindowTypes.REALTIME\" class=\"mat-content mat-padding\" fxLayout=\"column\">\n        <tb-timeinterval\n          formControlName=\"interval\"\n          [isEdit]=\"isEdit\"\n          [(hideFlag)]=\"timewindow.hideAggInterval\"\n          (hideFlagChange)=\"onHideAggIntervalChanged()\"\n          [min]=\"minRealtimeAggInterval()\" [max]=\"maxRealtimeAggInterval()\"\n          predefinedName=\"aggregation.group-interval\">\n        </tb-timeinterval>\n      </div>\n      <div formGroupName=\"history\"\n           *ngIf=\"aggregation && timewindowForm.get('aggregation.type').value !== aggregationTypes.NONE &&\n           timewindow.selectedTab === timewindowTypes.HISTORY\" class=\"mat-content mat-padding\" fxLayout=\"column\">\n        <tb-timeinterval\n          formControlName=\"interval\"\n          [isEdit]=\"isEdit\"\n          [(hideFlag)]=\"timewindow.hideAggInterval\"\n          (hideFlagChange)=\"onHideAggIntervalChanged()\"\n          [min]=\"minHistoryAggInterval()\" [max]=\"maxHistoryAggInterval()\"\n          predefinedName=\"aggregation.group-interval\">\n        </tb-timeinterval>\n      </div>\n      <div *ngIf=\"timezone\" class=\"mat-content mat-padding\" fxLayout=\"row\">\n        <section fxLayout=\"column\" [fxShow]=\"isEdit\">\n          <label class=\"tb-small hide-label\" translate>timewindow.hide</label>\n          <mat-checkbox [ngModelOptions]=\"{standalone: true}\" [(ngModel)]=\"timewindow.hideTimezone\"\n                        (ngModelChange)=\"onHideTimezoneChanged()\"></mat-checkbox>\n        </section>\n        <tb-timezone-select fxFlex [fxShow]=\"isEdit || !timewindow.hideTimezone\"\n                        localBrowserTimezonePlaceholderOnEmpty=\"true\"\n                        formControlName=\"timezone\">\n        </tb-timezone-select>\n      </div>\n      <div fxLayout=\"row\" class=\"tb-panel-actions\" fxLayoutAlign=\"end center\">\n        <button type=\"button\"\n                mat-button\n                [disabled]=\"(isLoading$ | async)\"\n                (click)=\"cancel()\">\n          {{ 'action.cancel' | translate }}\n        </button>\n        <button type=\"submit\"\n                mat-raised-button\n                color=\"primary\"\n                [disabled]=\"(isLoading$ | async) || timewindowForm.invalid || !timewindowForm.dirty\">\n            {{ 'action.update' | translate }}\n        </button>\n      </div>\n    </div>\n  </fieldset>\n</form>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\nimport { defaultHttpOptionsFromConfig, RequestConfig } from './http-utils';\nimport { Observable } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\nimport { PageLink } from '@shared/models/page/page-link';\nimport { PageData } from '@shared/models/page/page-data';\nimport { EntitySubtype } from '@app/shared/models/entity-type.models';\nimport { EntityView, EntityViewInfo, EntityViewSearchQuery } from '@app/shared/models/entity-view.models';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EntityViewService {\n\n  constructor(\n    private http: HttpClient\n  ) { }\n\n  public getTenantEntityViewInfos(pageLink: PageLink, type: string = '', config?: RequestConfig): Observable<PageData<EntityViewInfo>> {\n    return this.http.get<PageData<EntityViewInfo>>(`/api/tenant/entityViewInfos${pageLink.toQuery()}&type=${type}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getCustomerEntityViewInfos(customerId: string, pageLink: PageLink, type: string = '',\n                                    config?: RequestConfig): Observable<PageData<EntityViewInfo>> {\n    return this.http.get<PageData<EntityViewInfo>>(`/api/customer/${customerId}/entityViewInfos${pageLink.toQuery()}&type=${type}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getEntityView(entityViewId: string, config?: RequestConfig): Observable<EntityView> {\n    return this.http.get<EntityView>(`/api/entityView/${entityViewId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getEntityViewInfo(entityViewId: string, config?: RequestConfig): Observable<EntityViewInfo> {\n    return this.http.get<EntityViewInfo>(`/api/entityView/info/${entityViewId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public saveEntityView(entityView: EntityView, config?: RequestConfig): Observable<EntityView> {\n    return this.http.post<EntityView>('/api/entityView', entityView, defaultHttpOptionsFromConfig(config));\n  }\n\n  public deleteEntityView(entityViewId: string, config?: RequestConfig) {\n    return this.http.delete(`/api/entityView/${entityViewId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getEntityViewTypes(config?: RequestConfig): Observable<Array<EntitySubtype>> {\n    return this.http.get<Array<EntitySubtype>>('/api/entityView/types', defaultHttpOptionsFromConfig(config));\n  }\n\n  public makeEntityViewPublic(entityViewId: string, config?: RequestConfig): Observable<EntityView> {\n    return this.http.post<EntityView>(`/api/customer/public/entityView/${entityViewId}`, null,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public assignEntityViewToCustomer(customerId: string, entityViewId: string,\n                                    config?: RequestConfig): Observable<EntityView> {\n    return this.http.post<EntityView>(`/api/customer/${customerId}/entityView/${entityViewId}`, null,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public unassignEntityViewFromCustomer(entityViewId: string, config?: RequestConfig) {\n    return this.http.delete(`/api/customer/entityView/${entityViewId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public findByQuery(query: EntityViewSearchQuery,\n                     config?: RequestConfig): Observable<Array<EntityView>> {\n    return this.http.post<Array<EntityView>>('/api/entityViews', query, defaultHttpOptionsFromConfig(config));\n  }\n\n  public assignEntityViewToEdge(edgeId: string, entityViewId: string, config?: RequestConfig): Observable<EntityView> {\n    return this.http.post<EntityView>(`/api/edge/${edgeId}/entityView/${entityViewId}`, null,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public unassignEntityViewFromEdge(edgeId: string, entityViewId: string,\n                                    config?: RequestConfig) {\n    return this.http.delete(`/api/edge/${edgeId}/entityView/${entityViewId}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getEdgeEntityViews(edgeId: string, pageLink: PageLink, type: string = '',\n                            config?: RequestConfig): Observable<PageData<EntityViewInfo>> {\n    return this.http.get<PageData<EntityViewInfo>>(`/api/edge/${edgeId}/entityViews${pageLink.toQuery()}&type=${type}`,\n      defaultHttpOptionsFromConfig(config))\n  }\n\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { InjectionToken, Type } from '@angular/core';\nimport { ComponentType } from '@angular/cdk/portal';\n\nexport const HELP_MARKDOWN_COMPONENT_TOKEN: InjectionToken<ComponentType<any>> =\n  new InjectionToken<ComponentType<any>>('HELP_MARKDOWN_COMPONENT_TOKEN');\n\nexport const SHARED_MODULE_TOKEN: InjectionToken<Type<any>> =\n  new InjectionToken<Type<any>>('HELP_MARKDOWN_COMPONENT_TOKEN');\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { ChangeDetectorRef, Component, EventEmitter, Input, Output } from '@angular/core';\nimport { ClipboardService } from 'ngx-clipboard';\nimport { TooltipPosition } from '@angular/material/tooltip';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'tb-copy-button',\n  styleUrls: ['copy-button.component.scss'],\n  templateUrl: './copy-button.component.html'\n})\nexport class CopyButtonComponent {\n\n  private timer;\n\n  copied = false;\n\n  @Input()\n  copyText: string;\n\n  @Input()\n  disabled = false;\n\n  @Input()\n  mdiIcon: string;\n\n  @Input()\n  icon: string;\n\n  @Input()\n  tooltipText: string;\n\n  @Input()\n  tooltipPosition: TooltipPosition;\n\n  @Input()\n  style: {[key: string]: any} = {};\n\n  @Input()\n  color: string;\n\n  @Output()\n  successCopied = new EventEmitter<string>();\n\n  constructor(private clipboardService: ClipboardService,\n              private translate: TranslateService,\n              private cd: ChangeDetectorRef) {\n  }\n\n  copy($event: Event): void {\n    $event.stopPropagation();\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n    this.clipboardService.copy(this.copyText);\n    this.successCopied.emit(this.copyText);\n    this.copied = true;\n    this.timer = setTimeout(() => {\n      this.copied = false;\n      this.cd.detectChanges();\n    }, 1500);\n  }\n\n  get matTooltipText(): string {\n    return this.copied ? this.translate.instant('ota-update.copied') : this.tooltipText;\n  }\n\n  get matTooltipPosition(): TooltipPosition {\n    return this.copied ? 'below' : this.tooltipPosition;\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<button mat-icon-button\n        type=\"button\"\n        [color]=\"color\"\n        [disabled]=\"disabled\"\n        [matTooltip]=\"matTooltipText\"\n        [matTooltipPosition]=\"matTooltipPosition\"\n        (click)=\"copy($event)\">\n  <mat-icon [svgIcon]=\"mdiIcon\" [ngStyle]=\"style\" *ngIf=\"!copied; else copiedTemplate\">\n    {{ icon }}\n  </mat-icon>\n  <ng-template #copiedTemplate>\n    <mat-icon [ngStyle]=\"style\" class=\"copied\">done</mat-icon>\n  </ng-template>\n</button>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Ace } from 'ace-builds';\nimport { Observable } from 'rxjs/internal/Observable';\nimport { forkJoin, from, of } from 'rxjs';\nimport { map, mergeMap, tap } from 'rxjs/operators';\n\nlet aceDependenciesLoaded = false;\nlet aceModule: any;\n\nfunction loadAceDependencies(): Observable<any> {\n  if (aceDependenciesLoaded) {\n    return of(null);\n  } else {\n    const aceObservables: Observable<any>[] = [];\n    aceObservables.push(from(import('ace-builds/src-noconflict/ext-language_tools')));\n    aceObservables.push(from(import('ace-builds/src-noconflict/ext-searchbox')));\n    aceObservables.push(from(import('ace-builds/src-noconflict/mode-java')));\n    aceObservables.push(from(import('ace-builds/src-noconflict/mode-css')));\n    aceObservables.push(from(import('ace-builds/src-noconflict/mode-json')));\n    aceObservables.push(from(import('ace-builds/src-noconflict/mode-javascript')));\n    aceObservables.push(from(import('ace-builds/src-noconflict/mode-text')));\n    aceObservables.push(from(import('ace-builds/src-noconflict/mode-markdown')));\n    aceObservables.push(from(import('ace-builds/src-noconflict/mode-html')));\n    aceObservables.push(from(import('ace-builds/src-noconflict/mode-c_cpp')));\n    aceObservables.push(from(import('ace-builds/src-noconflict/mode-protobuf')));\n    aceObservables.push(from(import('ace-builds/src-noconflict/snippets/java')));\n    aceObservables.push(from(import('ace-builds/src-noconflict/snippets/css')));\n    aceObservables.push(from(import('ace-builds/src-noconflict/snippets/json')));\n    aceObservables.push(from(import('ace-builds/src-noconflict/snippets/javascript')));\n    aceObservables.push(from(import('ace-builds/src-noconflict/snippets/text')));\n    aceObservables.push(from(import('ace-builds/src-noconflict/snippets/markdown')));\n    aceObservables.push(from(import('ace-builds/src-noconflict/snippets/html')));\n    aceObservables.push(from(import('ace-builds/src-noconflict/snippets/c_cpp')));\n    aceObservables.push(from(import('ace-builds/src-noconflict/snippets/protobuf')));\n    aceObservables.push(from(import('ace-builds/src-noconflict/theme-textmate')));\n    aceObservables.push(from(import('ace-builds/src-noconflict/theme-github')));\n    return forkJoin(aceObservables).pipe(\n      tap(() => {\n        aceDependenciesLoaded = true;\n      })\n    );\n  }\n}\n\nexport function getAce(): Observable<any> {\n  if (aceModule) {\n    return of(aceModule);\n  } else {\n    return from(import('ace')).pipe(\n      mergeMap((module) => {\n        return loadAceDependencies().pipe(\n         map(() => module)\n        );\n      }),\n      tap((module) => {\n        aceModule = module;\n      })\n    );\n  }\n}\n\nexport class Range implements Ace.Range {\n\n  public start: Ace.Point;\n  public end: Ace.Point;\n\n  constructor(startRow: number, startColumn: number, endRow: number, endColumn: number) {\n    this.start = {\n      row: startRow,\n      column: startColumn\n    };\n\n    this.end = {\n      row: endRow,\n      column: endColumn\n    };\n  }\n\n  static fromPoints(start: Ace.Point, end: Ace.Point): Ace.Range {\n    return new Range(start.row, start.column, end.row, end.column);\n  }\n\n  clipRows(firstRow: number, lastRow: number): Ace.Range {\n    let end: Ace.Point;\n    let start: Ace.Point;\n    if (this.end.row > lastRow) {\n      end = {row: lastRow + 1, column: 0};\n    } else if (this.end.row < firstRow) {\n      end = {row: firstRow, column: 0};\n    }\n\n    if (this.start.row > lastRow) {\n      start = {row: lastRow + 1, column: 0};\n    } else if (this.start.row < firstRow) {\n      start = {row: firstRow, column: 0};\n    }\n    return Range.fromPoints(start || this.start, end || this.end);\n  }\n\n  clone(): Ace.Range {\n    return Range.fromPoints(this.start, this.end);\n  }\n\n  collapseRows(): Ace.Range {\n    if (this.end.column === 0) {\n      return new Range(this.start.row, 0, Math.max(this.start.row, this.end.row - 1), 0);\n    } else {\n      return new Range(this.start.row, 0, this.end.row, 0);\n    }\n  }\n\n  compare(row: number, column: number): number {\n    if (!this.isMultiLine()) {\n      if (row === this.start.row) {\n        return column < this.start.column ? -1 : (column > this.end.column ? 1 : 0);\n      }\n    }\n\n    if (row < this.start.row) {\n      return -1;\n    }\n\n    if (row > this.end.row) {\n      return 1;\n    }\n\n    if (this.start.row === row) {\n      return column >= this.start.column ? 0 : -1;\n    }\n\n    if (this.end.row === row) {\n      return column <= this.end.column ? 0 : 1;\n    }\n\n    return 0;\n  }\n\n  compareEnd(row: number, column: number): number {\n    if (this.end.row === row && this.end.column === column) {\n      return 1;\n    } else {\n      return this.compare(row, column);\n    }\n  }\n\n  compareInside(row: number, column: number): number {\n    if (this.end.row === row && this.end.column === column) {\n      return 1;\n    } else if (this.start.row === row && this.start.column === column) {\n      return -1;\n    } else {\n      return this.compare(row, column);\n    }\n  }\n\n  comparePoint(p: Ace.Point): number {\n    return this.compare(p.row, p.column);\n  }\n\n  compareRange(range: Ace.Range): number {\n    let cmp: number;\n    const end = range.end;\n    const start = range.start;\n\n    cmp = this.compare(end.row, end.column);\n    if (cmp === 1) {\n      cmp = this.compare(start.row, start.column);\n      if (cmp === 1) {\n        return 2;\n      } else if (cmp === 0) {\n        return 1;\n      } else {\n        return 0;\n      }\n    } else if (cmp === -1) {\n      return -2;\n    } else {\n      cmp = this.compare(start.row, start.column);\n      if (cmp === -1) {\n        return -1;\n      } else if (cmp === 1) {\n        return 42;\n      } else {\n        return 0;\n      }\n    }\n  }\n\n  compareStart(row: number, column: number): number {\n    if (this.start.row === row && this.start.column === column) {\n      return -1;\n    } else {\n      return this.compare(row, column);\n    }\n  }\n\n  contains(row: number, column: number): boolean {\n    return this.compare(row, column) === 0;\n  }\n\n  containsRange(range: Ace.Range): boolean {\n    return this.comparePoint(range.start) === 0 && this.comparePoint(range.end) === 0;\n  }\n\n  extend(row: number, column: number): Ace.Range {\n    const cmp = this.compare(row, column);\n    let end: Ace.Point;\n    let start: Ace.Point;\n    if (cmp === 0) {\n      return this;\n    } else if (cmp === -1) {\n      start = {row, column};\n    } else {\n      end = {row, column};\n    }\n    return Range.fromPoints(start || this.start, end || this.end);\n  }\n\n  inside(row: number, column: number): boolean {\n    if (this.compare(row, column) === 0) {\n      if (this.isEnd(row, column) || this.isStart(row, column)) {\n        return false;\n      } else {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  insideEnd(row: number, column: number): boolean {\n    if (this.compare(row, column) === 0) {\n      if (this.isStart(row, column)) {\n        return false;\n      } else {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  insideStart(row: number, column: number): boolean {\n    if (this.compare(row, column) === 0) {\n      if (this.isEnd(row, column)) {\n        return false;\n      } else {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  intersects(range: Ace.Range): boolean {\n    const cmp = this.compareRange(range);\n    return (cmp === -1 || cmp === 0 || cmp === 1);\n  }\n\n  isEmpty(): boolean {\n    return (this.start.row === this.end.row && this.start.column === this.end.column);\n  }\n\n  isEnd(row: number, column: number): boolean {\n    return this.end.row === row && this.end.column === column;\n  }\n\n  isEqual(range: Ace.Range): boolean {\n    return this.start.row === range.start.row &&\n      this.end.row === range.end.row &&\n      this.start.column === range.start.column &&\n      this.end.column === range.end.column;\n  }\n\n  isMultiLine(): boolean {\n    return (this.start.row !== this.end.row);\n  }\n\n  isStart(row: number, column: number): boolean {\n    return this.start.row === row && this.start.column === column;\n  }\n\n  moveBy(row: number, column: number): void {\n    this.start.row += row;\n    this.start.column += column;\n    this.end.row += row;\n    this.end.column += column;\n  }\n\n  setEnd(row: number, column: number): void {\n    if (typeof row === 'object') {\n      this.end.column = (row as Ace.Point).column;\n      this.end.row = (row as Ace.Point).row;\n    } else {\n      this.end.row = row;\n      this.end.column = column;\n    }\n  }\n\n  setStart(row: number, column: number): void {\n    if (typeof row === 'object') {\n      this.start.column = (row as Ace.Point).column;\n      this.start.row = (row as Ace.Point).row;\n    } else {\n      this.start.row = row;\n      this.start.column = column;\n    }\n  }\n\n  toScreenRange(session: Ace.EditSession): Ace.Range {\n    const screenPosStart = session.documentToScreenPosition(this.start);\n    const screenPosEnd = session.documentToScreenPosition(this.end);\n\n    return new Range(\n      screenPosStart.row, screenPosStart.column,\n      screenPosEnd.row, screenPosEnd.column\n    );\n  }\n\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\nimport { defaultHttpOptionsFromConfig, RequestConfig } from './http-utils';\nimport { Observable } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\nimport {\n  AdminSettings,\n  MailServerSettings,\n  SecuritySettings,\n  TestSmsRequest,\n  UpdateMessage\n} from '@shared/models/settings.models';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AdminService {\n\n  constructor(\n    private http: HttpClient\n  ) { }\n\n  public getAdminSettings<T>(key: string, config?: RequestConfig): Observable<AdminSettings<T>> {\n    return this.http.get<AdminSettings<T>>(`/api/admin/settings/${key}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public saveAdminSettings<T>(adminSettings: AdminSettings<T>,\n                              config?: RequestConfig): Observable<AdminSettings<T>> {\n    return this.http.post<AdminSettings<T>>('/api/admin/settings', adminSettings, defaultHttpOptionsFromConfig(config));\n  }\n\n  public sendTestMail(adminSettings: AdminSettings<MailServerSettings>,\n                      config?: RequestConfig): Observable<void> {\n    return this.http.post<void>('/api/admin/settings/testMail', adminSettings, defaultHttpOptionsFromConfig(config));\n  }\n\n  public sendTestSms(testSmsRequest: TestSmsRequest,\n                     config?: RequestConfig): Observable<void> {\n    return this.http.post<void>('/api/admin/settings/testSms', testSmsRequest, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getSecuritySettings(config?: RequestConfig): Observable<SecuritySettings> {\n    return this.http.get<SecuritySettings>(`/api/admin/securitySettings`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public saveSecuritySettings(securitySettings: SecuritySettings,\n                              config?: RequestConfig): Observable<SecuritySettings> {\n    return this.http.post<SecuritySettings>('/api/admin/securitySettings', securitySettings,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public checkUpdates(config?: RequestConfig): Observable<UpdateMessage> {\n    return this.http.get<UpdateMessage>(`/api/admin/updates`, defaultHttpOptionsFromConfig(config));\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\n\nexport interface AlertDialogData {\n  title: string;\n  message: string;\n  ok: string;\n}\n\n@Component({\n  selector: 'tb-alert-dialog',\n  templateUrl: './alert-dialog.component.html',\n  styleUrls: ['./alert-dialog.component.scss']\n})\nexport class AlertDialogComponent {\n  constructor(public dialogRef: MatDialogRef<AlertDialogComponent>,\n              @Inject(MAT_DIALOG_DATA) public data: AlertDialogData) {}\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<h2 mat-dialog-title>{{data.title}}</h2>\n<div mat-dialog-content [innerHTML]=\"data.message\"></div>\n<div mat-dialog-actions fxLayoutAlign=\"end center\">\n  <button mat-button color=\"primary\" [mat-dialog-close]=\"true\" cdkFocusInitial>{{data.ok}}</button>\n</div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, forwardRef, Input, OnInit } from '@angular/core';\nimport { PageComponent } from '@shared/components/page.component';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { ControlValueAccessor, FormBuilder, FormGroup, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { DialogService } from '@core/services/dialog.service';\n\n@Component({\n  selector: 'tb-material-icon-select',\n  templateUrl: './material-icon-select.component.html',\n  styleUrls: ['./material-icon-select.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => MaterialIconSelectComponent),\n      multi: true\n    }\n  ]\n})\nexport class MaterialIconSelectComponent extends PageComponent implements OnInit, ControlValueAccessor {\n\n  @Input()\n  disabled: boolean;\n\n  private modelValue: string;\n\n  private propagateChange = null;\n\n  public materialIconFormGroup: FormGroup;\n\n  constructor(protected store: Store<AppState>,\n              private dialogs: DialogService,\n              private fb: FormBuilder) {\n    super(store);\n  }\n\n  ngOnInit(): void {\n    this.materialIconFormGroup = this.fb.group({\n      icon: [null, []]\n    });\n\n    this.materialIconFormGroup.valueChanges.subscribe(() => {\n      this.updateModel();\n    });\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    if (isDisabled) {\n      this.materialIconFormGroup.disable({emitEvent: false});\n    } else {\n      this.materialIconFormGroup.enable({emitEvent: false});\n    }\n  }\n\n  writeValue(value: string): void {\n    this.modelValue = value;\n    this.materialIconFormGroup.patchValue(\n      { icon: this.modelValue }, {emitEvent: false}\n    );\n  }\n\n  private updateModel() {\n    const icon: string = this.materialIconFormGroup.get('icon').value;\n    if (this.modelValue !== icon) {\n      this.modelValue = icon;\n      this.propagateChange(this.modelValue);\n    }\n  }\n\n  openIconDialog() {\n    if (!this.disabled) {\n      this.dialogs.materialIconPicker(this.materialIconFormGroup.get('icon').value).subscribe(\n        (icon) => {\n          if (icon) {\n            this.materialIconFormGroup.patchValue(\n              {icon}, {emitEvent: true}\n            );\n          }\n        }\n      );\n    }\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<div fxLayout=\"row\" [formGroup]=\"materialIconFormGroup\">\n  <mat-icon (click)=\"openIconDialog()\">{{materialIconFormGroup.get('icon').value}}</mat-icon>\n  <mat-form-field fxFlex>\n    <mat-label translate>icon.icon</mat-label>\n    <input matInput formControlName=\"icon\" (mousedown)=\"openIconDialog()\">\n  </mat-form-field>\n</div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport {\n  ChangeDetectorRef,\n  Component,\n  forwardRef,\n  Inject,\n  Injector,\n  Input,\n  OnDestroy,\n  OnInit,\n  StaticProvider,\n  ViewChild,\n  ViewContainerRef\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\nimport { MillisecondsToTimeStringPipe } from '@shared/pipe/milliseconds-to-time-string.pipe';\nimport {\n  cloneSelectedTimewindow,\n  getTimezoneInfo,\n  HistoryWindowType,\n  initModelFromDefaultTimewindow,\n  QuickTimeIntervalTranslationMap,\n  RealtimeWindowType,\n  Timewindow,\n  TimewindowType\n} from '@shared/models/time/time.models';\nimport { DatePipe, DOCUMENT } from '@angular/common';\nimport { CdkOverlayOrigin, ConnectedPosition, Overlay, OverlayConfig, OverlayRef } from '@angular/cdk/overlay';\nimport {\n  TIMEWINDOW_PANEL_DATA,\n  TimewindowPanelComponent,\n  TimewindowPanelData\n} from '@shared/components/time/timewindow-panel.component';\nimport { ComponentPortal } from '@angular/cdk/portal';\nimport { MediaBreakpoints } from '@shared/models/constants';\nimport { BreakpointObserver } from '@angular/cdk/layout';\nimport { WINDOW } from '@core/services/window.service';\nimport { TimeService } from '@core/services/time.service';\nimport { TooltipPosition } from '@angular/material/tooltip';\nimport { deepClone, isDefinedAndNotNull } from '@core/utils';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\n\n// @dynamic\n@Component({\n  selector: 'tb-timewindow',\n  templateUrl: './timewindow.component.html',\n  styleUrls: ['./timewindow.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => TimewindowComponent),\n      multi: true\n    }\n  ]\n})\nexport class TimewindowComponent implements OnInit, OnDestroy, ControlValueAccessor {\n\n  historyOnlyValue = false;\n\n  @Input()\n  set historyOnly(val) {\n    this.historyOnlyValue = coerceBooleanProperty(val);\n  }\n\n  get historyOnly() {\n    return this.historyOnlyValue;\n  }\n\n  aggregationValue = false;\n\n  @Input()\n  set aggregation(val) {\n    this.aggregationValue = coerceBooleanProperty(val);\n  }\n\n  get aggregation() {\n    return this.aggregationValue;\n  }\n\n  timezoneValue = false;\n\n  @Input()\n  set timezone(val) {\n    this.timezoneValue = coerceBooleanProperty(val);\n  }\n\n  get timezone() {\n    return this.timezoneValue;\n  }\n\n  isToolbarValue = false;\n\n  @Input()\n  set isToolbar(val) {\n    this.isToolbarValue = coerceBooleanProperty(val);\n  }\n\n  get isToolbar() {\n    return this.isToolbarValue;\n  }\n\n  asButtonValue = false;\n\n  @Input()\n  set asButton(val) {\n    this.asButtonValue = coerceBooleanProperty(val);\n  }\n\n  get asButton() {\n    return this.asButtonValue;\n  }\n\n  isEditValue = false;\n\n  @Input()\n  set isEdit(val) {\n    this.isEditValue = coerceBooleanProperty(val);\n    this.timewindowDisabled = this.isTimewindowDisabled();\n  }\n\n  get isEdit() {\n    return this.isEditValue;\n  }\n\n  @Input()\n  direction: 'left' | 'right' = 'left';\n\n  @Input()\n  tooltipPosition: TooltipPosition = 'above';\n\n  @Input() disabled: boolean;\n\n  @ViewChild('timewindowPanelOrigin') timewindowPanelOrigin: CdkOverlayOrigin;\n\n  innerValue: Timewindow;\n\n  timewindowDisabled: boolean;\n\n  private propagateChange = (_: any) => {};\n\n  constructor(private translate: TranslateService,\n              private timeService: TimeService,\n              private millisecondsToTimeStringPipe: MillisecondsToTimeStringPipe,\n              private datePipe: DatePipe,\n              private overlay: Overlay,\n              private cd: ChangeDetectorRef,\n              public viewContainerRef: ViewContainerRef,\n              public breakpointObserver: BreakpointObserver,\n              @Inject(DOCUMENT) private document: Document,\n              @Inject(WINDOW) private window: Window) {\n  }\n\n  ngOnInit(): void {\n  }\n\n  ngOnDestroy(): void {\n  }\n\n  openEditMode() {\n    if (this.timewindowDisabled) {\n      return;\n    }\n    const isGtXs = this.breakpointObserver.isMatched(MediaBreakpoints['gt-xs']);\n    const position = this.overlay.position();\n    const config = new OverlayConfig({\n      panelClass: 'tb-timewindow-panel',\n      backdropClass: 'cdk-overlay-transparent-backdrop',\n      hasBackdrop: isGtXs,\n    });\n    if (isGtXs) {\n      config.minWidth = '417px';\n      config.maxHeight = '550px';\n      const panelHeight = 375;\n      const panelWidth = 417;\n      const el = this.timewindowPanelOrigin.elementRef.nativeElement;\n      const offset = el.getBoundingClientRect();\n      const scrollTop = this.window.pageYOffset || this.document.documentElement.scrollTop || this.document.body.scrollTop || 0;\n      const scrollLeft = this.window.pageXOffset || this.document.documentElement.scrollLeft || this.document.body.scrollLeft || 0;\n      const bottomY = offset.bottom - scrollTop;\n      const leftX = offset.left - scrollLeft;\n      let originX;\n      let originY;\n      let overlayX;\n      let overlayY;\n      const wHeight = this.document.documentElement.clientHeight;\n      const wWidth = this.document.documentElement.clientWidth;\n      if (bottomY + panelHeight > wHeight) {\n        originY = 'top';\n        overlayY = 'bottom';\n      } else {\n        originY = 'bottom';\n        overlayY = 'top';\n      }\n      if (leftX + panelWidth > wWidth) {\n        originX = 'end';\n        overlayX = 'end';\n      } else {\n        originX = 'start';\n        overlayX = 'start';\n      }\n      const connectedPosition: ConnectedPosition = {\n        originX,\n        originY,\n        overlayX,\n        overlayY\n      };\n      config.positionStrategy = position.flexibleConnectedTo(this.timewindowPanelOrigin.elementRef)\n        .withPositions([connectedPosition]);\n    } else {\n      config.minWidth = '100%';\n      config.minHeight = '100%';\n      config.positionStrategy = position.global().top('0%').left('0%')\n        .right('0%').bottom('0%');\n    }\n\n    const overlayRef = this.overlay.create(config);\n\n    overlayRef.backdropClick().subscribe(() => {\n      overlayRef.dispose();\n    });\n\n    const injector = this._createTimewindowPanelInjector(\n      overlayRef,\n      {\n        timewindow: deepClone(this.innerValue),\n        historyOnly: this.historyOnly,\n        aggregation: this.aggregation,\n        timezone: this.timezone,\n        isEdit: this.isEdit\n      }\n    );\n\n    const componentRef = overlayRef.attach(new ComponentPortal(TimewindowPanelComponent, this.viewContainerRef, injector));\n    componentRef.onDestroy(() => {\n      if (componentRef.instance.result) {\n        this.innerValue = componentRef.instance.result;\n        this.timewindowDisabled = this.isTimewindowDisabled();\n        this.updateDisplayValue();\n        this.notifyChanged();\n      }\n    });\n  }\n\n  private _createTimewindowPanelInjector(overlayRef: OverlayRef, data: TimewindowPanelData): Injector {\n    const providers: StaticProvider[] = [\n      {provide: TIMEWINDOW_PANEL_DATA, useValue: data},\n      {provide: OverlayRef, useValue: overlayRef}\n    ];\n    return Injector.create({parent: this.viewContainerRef.injector, providers});\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    this.timewindowDisabled = this.isTimewindowDisabled();\n  }\n\n  writeValue(obj: Timewindow): void {\n    this.innerValue = initModelFromDefaultTimewindow(obj, this.timeService);\n    this.timewindowDisabled = this.isTimewindowDisabled();\n    this.updateDisplayValue();\n  }\n\n  notifyChanged() {\n    this.propagateChange(cloneSelectedTimewindow(this.innerValue));\n  }\n\n  updateDisplayValue() {\n    if (this.innerValue.selectedTab === TimewindowType.REALTIME && !this.historyOnly) {\n      this.innerValue.displayValue = this.translate.instant('timewindow.realtime') + ' - ';\n      if (this.innerValue.realtime.realtimeType === RealtimeWindowType.INTERVAL) {\n        this.innerValue.displayValue += this.translate.instant(QuickTimeIntervalTranslationMap.get(this.innerValue.realtime.quickInterval));\n      } else {\n        this.innerValue.displayValue +=  this.translate.instant('timewindow.last-prefix') + ' ' +\n          this.millisecondsToTimeStringPipe.transform(this.innerValue.realtime.timewindowMs);\n      }\n    } else {\n      this.innerValue.displayValue = !this.historyOnly ? (this.translate.instant('timewindow.history') + ' - ') : '';\n      if (this.innerValue.history.historyType === HistoryWindowType.LAST_INTERVAL) {\n        this.innerValue.displayValue += this.translate.instant('timewindow.last-prefix') + ' ' +\n          this.millisecondsToTimeStringPipe.transform(this.innerValue.history.timewindowMs);\n      } else if (this.innerValue.history.historyType === HistoryWindowType.INTERVAL) {\n        this.innerValue.displayValue += this.translate.instant(QuickTimeIntervalTranslationMap.get(this.innerValue.history.quickInterval));\n      } else {\n        const startString = this.datePipe.transform(this.innerValue.history.fixedTimewindow.startTimeMs, 'yyyy-MM-dd HH:mm:ss');\n        const endString = this.datePipe.transform(this.innerValue.history.fixedTimewindow.endTimeMs, 'yyyy-MM-dd HH:mm:ss');\n        this.innerValue.displayValue += this.translate.instant('timewindow.period', {startTime: startString, endTime: endString});\n      }\n    }\n    if (isDefinedAndNotNull(this.innerValue.timezone) && this.innerValue.timezone !== '') {\n      this.innerValue.displayValue += ' ';\n      this.innerValue.displayTimezoneAbbr = getTimezoneInfo(this.innerValue.timezone).abbr;\n    } else {\n      this.innerValue.displayTimezoneAbbr = '';\n    }\n    this.cd.detectChanges();\n  }\n\n  hideLabel() {\n    return this.isToolbar && !this.breakpointObserver.isMatched(MediaBreakpoints['gt-md']);\n  }\n\n  private isTimewindowDisabled(): boolean {\n    return this.disabled ||\n      (!this.isEdit && (!this.innerValue || this.innerValue.hideInterval &&\n        (!this.aggregation || this.innerValue.hideAggregation && this.innerValue.hideAggInterval)));\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<button *ngIf=\"asButton\" cdkOverlayOrigin #timewindowPanelOrigin=\"cdkOverlayOrigin\" [disabled]=\"timewindowDisabled\"\n        type=\"button\"\n        mat-raised-button color=\"primary\" (click)=\"openEditMode()\">\n  <mat-icon class=\"material-icons\">query_builder</mat-icon>\n  <span>{{innerValue?.displayValue}}</span>\n</button>\n<section *ngIf=\"!asButton\" cdkOverlayOrigin #timewindowPanelOrigin=\"cdkOverlayOrigin\"\n         class=\"tb-timewindow\" fxLayout=\"row\" fxLayoutAlign=\"start center\">\n  <button *ngIf=\"direction === 'left'\" [disabled]=\"timewindowDisabled\" mat-icon-button class=\"tb-mat-32\"\n          type=\"button\"\n          (click)=\"openEditMode()\"\n          matTooltip=\"{{ 'timewindow.edit' | translate }}\"\n          [matTooltipPosition]=\"tooltipPosition\">\n    <mat-icon class=\"material-icons\">query_builder</mat-icon>\n  </button>\n  <span [fxHide]=\"hideLabel()\"\n        (click)=\"openEditMode()\"\n        matTooltip=\"{{ 'timewindow.edit' | translate }}\"\n        [matTooltipPosition]=\"tooltipPosition\">\n    {{innerValue?.displayValue}} <span [fxShow]=\"innerValue?.displayTimezoneAbbr !== ''\">| <span class=\"timezone-abbr\">{{innerValue.displayTimezoneAbbr}}</span></span>\n  </span>\n  <button *ngIf=\"direction === 'right'\" [disabled]=\"timewindowDisabled\" mat-icon-button class=\"tb-mat-32\"\n          type=\"button\"\n          (click)=\"openEditMode()\"\n          matTooltip=\"{{ 'timewindow.edit' | translate }}\"\n          [matTooltipPosition]=\"tooltipPosition\">\n    <mat-icon class=\"material-icons\">query_builder</mat-icon>\n  </button>\n</section>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\nimport {\n  AggregationType,\n  DAY,\n  defaultTimeIntervals,\n  defaultTimewindow,\n  SECOND,\n  Timewindow\n} from '@shared/models/time/time.models';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { defaultHttpOptions } from '@core/http/http-utils';\nimport { map } from 'rxjs/operators';\nimport { isDefined } from '@core/utils';\n\nexport interface TimeInterval {\n  name: string;\n  translateParams: { [key: string]: any };\n  value: number;\n}\n\nconst MIN_INTERVAL = SECOND;\nconst MAX_INTERVAL = 365 * 20 * DAY;\n\nconst MIN_LIMIT = 7;\n\nconst MAX_DATAPOINTS_LIMIT = 500;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TimeService {\n\n  private maxDatapointsLimit = MAX_DATAPOINTS_LIMIT;\n\n  constructor(\n    private http: HttpClient\n  ) {}\n\n  public loadMaxDatapointsLimit(): Observable<number> {\n    return this.http.get<number>('/api/dashboard/maxDatapointsLimit',\n      defaultHttpOptions(true)).pipe(\n      map((limit) => {\n        this.maxDatapointsLimit = limit;\n        if (!this.maxDatapointsLimit || this.maxDatapointsLimit <= MIN_LIMIT) {\n          this.maxDatapointsLimit = MIN_LIMIT + 1;\n        }\n        return this.maxDatapointsLimit;\n      })\n    );\n  }\n\n  public matchesExistingInterval(min: number, max: number, intervalMs: number): boolean {\n    const intervals = this.getIntervals(min, max);\n    return intervals.findIndex(interval => interval.value === intervalMs) > -1;\n  }\n\n  public getIntervals(min: number, max: number): Array<TimeInterval> {\n    min = this.boundMinInterval(min);\n    max = this.boundMaxInterval(max);\n    return defaultTimeIntervals.filter((interval) => interval.value >= min && interval.value <= max);\n  }\n\n  public boundMinInterval(min: number): number {\n    if (isDefined(min)) {\n      min = Math.ceil(min / 1000) * 1000;\n    }\n    return this.toBound(min, MIN_INTERVAL, MAX_INTERVAL, MIN_INTERVAL);\n  }\n\n  public boundMaxInterval(max: number): number {\n    if (isDefined(max)) {\n      max = Math.floor(max / 1000) * 1000;\n    }\n    return this.toBound(max, MIN_INTERVAL, MAX_INTERVAL, MAX_INTERVAL);\n  }\n\n  public boundToPredefinedInterval(min: number, max: number, intervalMs: number): number {\n    const intervals = this.getIntervals(min, max);\n    let minDelta = MAX_INTERVAL;\n    const boundedInterval = intervalMs || min;\n    if (!intervals.length) {\n      return boundedInterval;\n    }\n    let matchedInterval: TimeInterval = intervals[0];\n    intervals.forEach((interval) => {\n      const delta = Math.abs(interval.value - boundedInterval);\n      if (delta < minDelta) {\n        matchedInterval = interval;\n        minDelta = delta;\n      }\n    });\n    return matchedInterval.value;\n  }\n\n  public boundIntervalToTimewindow(timewindow: number, intervalMs: number, aggType: AggregationType): number {\n    if (aggType === AggregationType.NONE) {\n      return SECOND;\n    } else {\n      const min = this.minIntervalLimit(timewindow);\n      const max = this.maxIntervalLimit(timewindow);\n      if (intervalMs) {\n        return this.toBound(intervalMs, min, max, intervalMs);\n      } else {\n        return this.boundToPredefinedInterval(min, max, this.avgInterval(timewindow));\n      }\n    }\n  }\n\n  public getMaxDatapointsLimit(): number {\n    return this.maxDatapointsLimit;\n  }\n\n  public getMinDatapointsLimit(): number {\n    return MIN_LIMIT;\n  }\n\n  public avgInterval(timewindow: number): number {\n    const avg = timewindow / 200;\n    return this.boundMinInterval(avg);\n  }\n\n  public minIntervalLimit(timewindowMs: number): number {\n    const min = timewindowMs / 500;\n    return this.boundMinInterval(min);\n  }\n\n  public maxIntervalLimit(timewindowMs: number): number {\n    const max = timewindowMs / MIN_LIMIT;\n    return this.boundMaxInterval(max);\n  }\n\n  public defaultTimewindow(): Timewindow {\n    return defaultTimewindow(this);\n  }\n\n  private toBound(value: number, min: number, max: number, defValue: number): number {\n    if (isDefined(value)) {\n      value = Math.max(value, min);\n      value = Math.min(value, max);\n      return value;\n    } else {\n      return defValue;\n    }\n  }\n\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nexport const COUNTRIES = [\n  'Afghanistan',\n  'Åland Islands',\n  'Albania',\n  'Algeria',\n  'American Samoa',\n  'Andorra',\n  'Angola',\n  'Anguilla',\n  'Antarctica',\n  'Antigua and Barbuda',\n  'Argentina',\n  'Armenia',\n  'Aruba',\n  'Australia',\n  'Austria',\n  'Azerbaijan',\n  'Bahamas',\n  'Bahrain',\n  'Bangladesh',\n  'Barbados',\n  'Belarus',\n  'Belgium',\n  'Belize',\n  'Benin',\n  'Bermuda',\n  'Bhutan',\n  'Bolivia',\n  'Bonaire, Sint Eustatius and Saba',\n  'Bosnia and Herzegovina',\n  'Botswana',\n  'Bouvet Island',\n  'Brazil',\n  'British Indian Ocean Territory',\n  'Brunei Darussalam',\n  'Bulgaria',\n  'Burkina Faso',\n  'Burundi',\n  'Cambodia',\n  'Cameroon',\n  'Canada',\n  'Cape Verde',\n  'Cayman Islands',\n  'Central African Republic',\n  'Chad',\n  'Chile',\n  'China',\n  'Christmas Island',\n  'Cocos (Keeling) Islands',\n  'Colombia',\n  'Comoros',\n  'Congo',\n  'Congo, The Democratic Republic of the',\n  'Cook Islands',\n  'Costa Rica',\n  'Côte d\\'Ivoire',\n  'Croatia',\n  'Cuba',\n  'Curaçao',\n  'Cyprus',\n  'Czech Republic',\n  'Denmark',\n  'Djibouti',\n  'Dominica',\n  'Dominican Republic',\n  'Ecuador',\n  'Egypt',\n  'El Salvador',\n  'Equatorial Guinea',\n  'Eritrea',\n  'Estonia',\n  'Ethiopia',\n  'Falkland Islands (Malvinas)',\n  'Faroe Islands',\n  'Fiji',\n  'Finland',\n  'France',\n  'French Guiana',\n  'French Polynesia',\n  'French Southern Territories',\n  'Gabon',\n  'Gambia',\n  'Georgia',\n  'Germany',\n  'Ghana',\n  'Gibraltar',\n  'Greece',\n  'Greenland',\n  'Grenada',\n  'Guadeloupe',\n  'Guam',\n  'Guatemala',\n  'Guernsey',\n  'Guinea',\n  'Guinea-Bissau',\n  'Guyana',\n  'Haiti',\n  'Heard Island and McDonald Islands',\n  'Holy See (Vatican City State)',\n  'Honduras',\n  'Hong Kong',\n  'Hungary',\n  'Iceland',\n  'India',\n  'Indonesia',\n  'Iran, Islamic Republic of',\n  'Iraq',\n  'Ireland',\n  'Isle of Man',\n  'Israel',\n  'Italy',\n  'Jamaica',\n  'Japan',\n  'Jersey',\n  'Jordan',\n  'Kazakhstan',\n  'Kenya',\n  'Kiribati',\n  'Korea, Democratic People\\'s Republic of',\n  'Korea, Republic of',\n  'Kuwait',\n  'Kyrgyzstan',\n  'Lao People\\'s Democratic Republic',\n  'Latvia',\n  'Lebanon',\n  'Lesotho',\n  'Liberia',\n  'Libya',\n  'Liechtenstein',\n  'Lithuania',\n  'Luxembourg',\n  'Macao',\n  'Macedonia, Republic Of',\n  'Madagascar',\n  'Malawi',\n  'Malaysia',\n  'Maldives',\n  'Mali',\n  'Malta',\n  'Marshall Islands',\n  'Martinique',\n  'Mauritania',\n  'Mauritius',\n  'Mayotte',\n  'Mexico',\n  'Micronesia, Federated States of',\n  'Moldova, Republic of',\n  'Monaco',\n  'Mongolia',\n  'Montenegro',\n  'Montserrat',\n  'Morocco',\n  'Mozambique',\n  'Myanmar',\n  'Namibia',\n  'Nauru',\n  'Nepal',\n  'Netherlands',\n  'New Caledonia',\n  'New Zealand',\n  'Nicaragua',\n  'Niger',\n  'Nigeria',\n  'Niue',\n  'Norfolk Island',\n  'Northern Mariana Islands',\n  'Norway',\n  'Oman',\n  'Pakistan',\n  'Palau',\n  'Palestinian Territory, Occupied',\n  'Panama',\n  'Papua New Guinea',\n  'Paraguay',\n  'Peru',\n  'Philippines',\n  'Pitcairn',\n  'Poland',\n  'Portugal',\n  'Puerto Rico',\n  'Qatar',\n  'Reunion',\n  'Romania',\n  'Russian Federation',\n  'Rwanda',\n  'Saint Barthélemy',\n  'Saint Helena, Ascension and Tristan da Cunha',\n  'Saint Kitts and Nevis',\n  'Saint Lucia',\n  'Saint Martin (French Part)',\n  'Saint Pierre and Miquelon',\n  'Saint Vincent and the Grenadines',\n  'Samoa',\n  'San Marino',\n  'Sao Tome and Principe',\n  'Saudi Arabia',\n  'Senegal',\n  'Serbia',\n  'Seychelles',\n  'Sierra Leone',\n  'Singapore',\n  'Sint Maarten (Dutch Part)',\n  'Slovakia',\n  'Slovenia',\n  'Solomon Islands',\n  'Somalia',\n  'South Africa',\n  'South Georgia and the South Sandwich Islands',\n  'South Sudan',\n  'Spain',\n  'Sri Lanka',\n  'Sudan',\n  'Suriname',\n  'Svalbard and Jan Mayen',\n  'Swaziland',\n  'Sweden',\n  'Switzerland',\n  'Syrian Arab Republic',\n  'Taiwan',\n  'Tajikistan',\n  'Tanzania, United Republic of',\n  'Thailand',\n  'Timor-Leste',\n  'Togo',\n  'Tokelau',\n  'Tonga',\n  'Trinidad and Tobago',\n  'Tunisia',\n  'Turkey',\n  'Turkmenistan',\n  'Turks and Caicos Islands',\n  'Tuvalu',\n  'Uganda',\n  'Ukraine',\n  'United Arab Emirates',\n  'United Kingdom',\n  'United States',\n  'United States Minor Outlying Islands',\n  'Uruguay',\n  'Uzbekistan',\n  'Vanuatu',\n  'Venezuela',\n  'Viet Nam',\n  'Virgin Islands, British',\n  'Virgin Islands, U.S.',\n  'Wallis and Futuna',\n  'Western Sahara',\n  'Yemen',\n  'Zambia',\n  'Zimbabwe'\n];\n\n/* tslint:disable */\nexport const POSTAL_CODE_PATTERNS = {\n  'United States': '(\\\\d{5}([\\\\-]\\\\d{4})?)',\n  'Australia': '[0-9]{4}',\n  'Austria': '[0-9]{4}',\n  'Belgium': '[0-9]{4}',\n  'Brazil': '[0-9]{5}[\\\\-]?[0-9]{3}',\n  'Canada': '^(?!.*[DFIOQU])[A-VXY][0-9][A-Z][ -]?[0-9][A-Z][0-9]$',\n  'Denmark': '[0-9]{3,4}',\n  'Faroe Islands': '[0-9]{3,4}',\n  'Netherlands': '[1-9][0-9]{3}\\\\s?[a-zA-Z]{2}',\n  'Germany': '[0-9]{5}',\n  'Hungary': '[0-9]{4}',\n  'Italy': '[0-9]{5}',\n  'Japan': '\\\\d{3}-\\\\d{4}',\n  'Luxembourg': '(L\\\\s*(-|—|–))\\\\s*?[\\\\d]{4}',\n  'Poland': '[0-9]{2}\\\\-[0-9]{3}',\n  'Spain': '((0[1-9]|5[0-2])|[1-4][0-9])[0-9]{3}',\n  'Sweden': '\\\\d{3}\\\\s?\\\\d{2}',\n  'United Kingdom': '[A-Za-z]{1,2}[0-9Rr][0-9A-Za-z]? [0-9][ABD-HJLNP-UW-Zabd-hjlnp-uw-z]{2}'\n};\n/* tslint:enable */\n\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, Input } from '@angular/core';\nimport { HelpLinks } from '@shared/models/constants';\n\n@Component({\n  // tslint:disable-next-line:component-selector\n  selector: '[tb-help]',\n  templateUrl: './help.component.html'\n})\nexport class HelpComponent {\n\n  // tslint:disable-next-line:no-input-rename\n  @Input('tb-help') helpLinkId: string;\n\n  gotoHelpPage(): void {\n    let helpUrl = HelpLinks.linksMap[this.helpLinkId];\n    if (!helpUrl && this.helpLinkId &&\n      (this.helpLinkId.startsWith('http://') || this.helpLinkId.startsWith('https://'))) {\n      helpUrl = this.helpLinkId;\n    }\n    if (helpUrl) {\n      window.open(helpUrl, '_blank');\n    }\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<button color=\"primary\" mat-button mat-icon-button\n        type=\"button\"\n        (click)=\"gotoHelpPage()\"\n        matTooltip=\"{{'help.goto-help-page' | translate}}\"\n        matTooltipPosition=\"above\">\n  <mat-icon class=\"material-icons\">help</mat-icon>\n</button>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\nimport { defaultHttpOptionsFromConfig, RequestConfig } from './http-utils';\nimport { Observable } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\nimport { PageLink } from '@shared/models/page/page-link';\nimport { PageData } from '@shared/models/page/page-data';\nimport { Customer } from '@shared/models/customer.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CustomerService {\n\n  constructor(\n    private http: HttpClient\n  ) { }\n\n  public getCustomers(pageLink: PageLink, config?: RequestConfig): Observable<PageData<Customer>> {\n    return this.http.get<PageData<Customer>>(`/api/customers${pageLink.toQuery()}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getCustomer(customerId: string, config?: RequestConfig): Observable<Customer> {\n    return this.http.get<Customer>(`/api/customer/${customerId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public saveCustomer(customer: Customer, config?: RequestConfig): Observable<Customer> {\n    return this.http.post<Customer>('/api/customer', customer, defaultHttpOptionsFromConfig(config));\n  }\n\n  public deleteCustomer(customerId: string, config?: RequestConfig) {\n    return this.http.delete(`/api/customer/${customerId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<a mat-button routerLinkActive=\"tb-active\" [routerLinkActiveOptions]=\"{exact: !section.notExact}\" routerLink=\"{{section.path}}\">\n  <mat-icon *ngIf=\"!section.isMdiIcon && section.icon != null\" class=\"material-icons\">{{section.icon}}</mat-icon>\n  <mat-icon *ngIf=\"section.isMdiIcon && section.icon != null\" [svgIcon]=\"section.icon\"></mat-icon>\n  <span>{{section.name | translate}}</span>\n</a>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { ChangeDetectionStrategy, Component, Input, OnInit } from '@angular/core';\nimport { MenuSection } from '@core/services/menu.models';\n\n@Component({\n  selector: 'tb-menu-link',\n  templateUrl: './menu-link.component.html',\n  styleUrls: ['./menu-link.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class MenuLinkComponent implements OnInit {\n\n  @Input() section: MenuSection;\n\n  constructor() {\n  }\n\n  ngOnInit() {\n  }\n\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Action } from '@ngrx/store';\n\nexport enum LoadActionTypes {\n  START_LOAD = '[Load] Start',\n  FINISH_LOAD = '[Load] Finish'\n}\n\nexport class ActionLoadStart implements Action {\n  readonly type = LoadActionTypes.START_LOAD;\n}\n\nexport class ActionLoadFinish implements Action {\n  readonly type = LoadActionTypes.FINISH_LOAD;\n}\n\nexport type LoadActions = ActionLoadStart | ActionLoadFinish;\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Direction, SortOrder } from '@shared/models/page/sort-order';\nimport { emptyPageData, PageData } from '@shared/models/page/page-data';\nimport { getDescendantProp, isObject } from '@core/utils';\nimport { SortDirection } from '@angular/material/sort';\n\nexport const MAX_SAFE_PAGE_SIZE = 2147483647;\n\nexport type PageLinkSearchFunction<T> = (entity: T, textSearch: string, searchProperty?: string) => boolean;\n\nexport function defaultPageLinkSearchFunction(searchProperty?: string): PageLinkSearchFunction<any> {\n  return (entity, textSearch) => defaultPageLinkSearch(entity, textSearch, searchProperty);\n}\n\nconst defaultPageLinkSearch: PageLinkSearchFunction<any> =\n  (entity: any, textSearch: string, searchProperty?: string) => {\n    if (textSearch === null || !textSearch.length) {\n      return true;\n    }\n    const expected = ('' + textSearch).toLowerCase();\n    if (searchProperty && searchProperty.length) {\n      if (Object.prototype.hasOwnProperty.call(entity, searchProperty)) {\n        const val = entity[searchProperty];\n        if (val !== null) {\n          if (val !== Object(val)) {\n            const actual = ('' + val).toLowerCase();\n            if (actual.indexOf(expected) !== -1) {\n              return true;\n            }\n          }\n        }\n      }\n    } else {\n      for (const key of Object.keys(entity)) {\n        const val = entity[key];\n        if (val !== null) {\n          if (val !== Object(val)) {\n            const actual = ('' + val).toLowerCase();\n            if (actual.indexOf(expected) !== -1) {\n              return true;\n            }\n          } else if (isObject(val)) {\n            if (defaultPageLinkSearch(val, textSearch)) {\n              return true;\n            }\n          }\n        }\n      }\n    }\n    return false;\n  };\n\nexport function sortItems(item1: any, item2: any, property: string, asc: boolean): number {\n  const item1Value = getDescendantProp(item1, property);\n  const item2Value = getDescendantProp(item2, property);\n  let result = 0;\n  if (item1Value !== item2Value) {\n    const item1Type = typeof item1Value;\n    const item2Type = typeof item2Value;\n    if (item1Type === 'number' && item2Type === 'number') {\n      result = item1Value - item2Value;\n    } else if (item1Type === 'string' && item2Type === 'string') {\n      result = item1Value.localeCompare(item2Value);\n    } else if ((item1Type === 'boolean' && item2Type === 'boolean') || (item1Type !== item2Type)) {\n      if (item1Value && !item2Value) {\n        result = 1;\n      } else if (!item1Value && item2Value) {\n        result = -1;\n      }\n    }\n  }\n  return asc ? result : result * -1;\n}\n\nexport class PageLink {\n\n  textSearch: string;\n  pageSize: number;\n  page: number;\n  sortOrder: SortOrder;\n\n  constructor(pageSize: number, page: number = 0, textSearch: string = null, sortOrder: SortOrder = null) {\n    this.textSearch = textSearch;\n    this.pageSize = pageSize;\n    this.page = page;\n    this.sortOrder = sortOrder;\n  }\n\n  public nextPageLink(): PageLink {\n    return new PageLink(this.pageSize, this.page + 1, this.textSearch, this.sortOrder);\n  }\n\n  public toQuery(): string {\n    let query = `?pageSize=${this.pageSize}&page=${this.page}`;\n    if (this.textSearch && this.textSearch.length) {\n      const textSearch = encodeURIComponent(this.textSearch);\n      query += `&textSearch=${textSearch}`;\n    }\n    if (this.sortOrder) {\n      query += `&sortProperty=${this.sortOrder.property}&sortOrder=${this.sortOrder.direction}`;\n    }\n    return query;\n  }\n\n  public sort(item1: any, item2: any): number {\n    if (this.sortOrder) {\n      const sortProperty = this.sortOrder.property;\n      const asc = this.sortOrder.direction === Direction.ASC;\n      return sortItems(item1, item2, sortProperty, asc);\n    }\n    return 0;\n  }\n\n  public filterData<T>(data: Array<T>,\n                       searchFunction: PageLinkSearchFunction<T> = defaultPageLinkSearchFunction()): PageData<T> {\n    const pageData = emptyPageData<T>();\n    pageData.data = [...data];\n    if (this.textSearch && this.textSearch.length) {\n      pageData.data = pageData.data.filter((entity) => searchFunction(entity, this.textSearch));\n    }\n    pageData.totalElements = pageData.data.length;\n    pageData.totalPages = this.pageSize === Number.POSITIVE_INFINITY ? 1 : Math.ceil(pageData.totalElements / this.pageSize);\n    if (this.sortOrder) {\n      const sortProperty = this.sortOrder.property;\n      const asc = this.sortOrder.direction === Direction.ASC;\n      pageData.data = pageData.data.sort((a, b) => sortItems(a, b, sortProperty, asc));\n    }\n    if (this.pageSize !== Number.POSITIVE_INFINITY) {\n      const startIndex = this.pageSize * this.page;\n      pageData.data = pageData.data.slice(startIndex, startIndex + this.pageSize);\n      pageData.hasNext = pageData.totalElements > startIndex + pageData.data.length;\n    }\n    return pageData;\n  }\n\n  public sortDirection(): SortDirection {\n    if (this.sortOrder) {\n      return (this.sortOrder.direction + '').toLowerCase() as SortDirection;\n    } else {\n      return '' as SortDirection;\n    }\n  }\n\n}\n\nexport class TimePageLink extends PageLink {\n\n  startTime: number;\n  endTime: number;\n\n  constructor(pageSize: number, page: number = 0, textSearch: string = null, sortOrder: SortOrder = null,\n              startTime: number = null, endTime: number = null) {\n    super(pageSize, page, textSearch, sortOrder);\n    this.startTime = startTime;\n    this.endTime = endTime;\n  }\n\n  public nextPageLink(): TimePageLink {\n    return new TimePageLink(this.pageSize, this.page + 1, this.textSearch, this.sortOrder, this.startTime, this.endTime);\n  }\n\n  public toQuery(): string {\n    let query = super.toQuery();\n    if (this.startTime) {\n      query += `&startTime=${this.startTime}`;\n    }\n    if (this.endTime) {\n      query += `&endTime=${this.endTime}`;\n    }\n    return query;\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  HostBinding,\n  Inject,\n  OnInit,\n  QueryList,\n  SkipSelf,\n  ViewChild,\n  ViewChildren,\n  ViewEncapsulation\n} from '@angular/core';\nimport { ErrorStateMatcher } from '@angular/material/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { FormBuilder, FormControl, FormGroup, FormGroupDirective, NgForm, Validators } from '@angular/forms';\nimport { NEVER, Observable, of } from 'rxjs';\nimport { Router } from '@angular/router';\nimport { DialogComponent } from '@shared/components/dialog.component';\nimport { ContentType } from '@shared/models/constants';\nimport { JsonContentComponent } from '@shared/components/json-content.component';\nimport { TestScriptInputParams } from '@shared/models/rule-node.models';\nimport { RuleChainService } from '@core/http/rule-chain.service';\nimport { mergeMap } from 'rxjs/operators';\nimport { ActionNotificationShow } from '@core/notification/notification.actions';\nimport { beautifyJs } from '@shared/models/beautify.models';\n\nexport interface NodeScriptTestDialogData {\n  script: string;\n  scriptType: string;\n  functionTitle: string;\n  functionName: string;\n  argNames: string[];\n  msg?: any;\n  metadata?: {[key: string]: string};\n  msgType?: string;\n  helpId?: string;\n}\n\n// @dynamic\n@Component({\n  selector: 'tb-node-script-test-dialog',\n  templateUrl: './node-script-test-dialog.component.html',\n  providers: [{provide: ErrorStateMatcher, useExisting: NodeScriptTestDialogComponent}],\n  styleUrls: ['./node-script-test-dialog.component.scss'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class NodeScriptTestDialogComponent extends DialogComponent<NodeScriptTestDialogComponent,\n  string> implements OnInit, AfterViewInit, ErrorStateMatcher {\n\n  @HostBinding('style.width') width = '100%';\n  @HostBinding('style.height') height = '100%';\n\n  @ViewChildren('topPanel')\n  topPanelElmRef: QueryList<ElementRef<HTMLElement>>;\n\n  @ViewChildren('topLeftPanel')\n  topLeftPanelElmRef: QueryList<ElementRef<HTMLElement>>;\n\n  @ViewChildren('topRightPanel')\n  topRightPanelElmRef: QueryList<ElementRef<HTMLElement>>;\n\n  @ViewChildren('bottomPanel')\n  bottomPanelElmRef: QueryList<ElementRef<HTMLElement>>;\n\n  @ViewChildren('bottomLeftPanel')\n  bottomLeftPanelElmRef: QueryList<ElementRef<HTMLElement>>;\n\n  @ViewChildren('bottomRightPanel')\n  bottomRightPanelElmRef: QueryList<ElementRef<HTMLElement>>;\n\n  @ViewChild('payloadContent', {static: true}) payloadContent: JsonContentComponent;\n\n  nodeScriptTestFormGroup: FormGroup;\n\n  functionTitle: string;\n\n  submitted = false;\n\n  contentTypes = ContentType;\n\n  constructor(protected store: Store<AppState>,\n              protected router: Router,\n              @Inject(MAT_DIALOG_DATA) public data: NodeScriptTestDialogData,\n              @SkipSelf() private errorStateMatcher: ErrorStateMatcher,\n              public dialogRef: MatDialogRef<NodeScriptTestDialogComponent, string>,\n              public fb: FormBuilder,\n              private ruleChainService: RuleChainService) {\n    super(store, router, dialogRef);\n    this.functionTitle = this.data.functionTitle;\n  }\n\n  ngOnInit(): void {\n    this.nodeScriptTestFormGroup = this.fb.group({\n      payload: this.fb.group({\n        msgType: [this.data.msgType, [Validators.required]],\n        msg: [null, []],\n      }),\n      metadata: [this.data.metadata, [Validators.required]],\n      script: [this.data.script, []],\n      output: ['', []]\n    });\n    beautifyJs(JSON.stringify(this.data.msg), {indent_size: 4}).subscribe(\n      (res) => {\n        this.nodeScriptTestFormGroup.get('payload').get('msg').patchValue(res, {emitEvent: false});\n      }\n    );\n  }\n\n  ngAfterViewInit(): void {\n    this.initSplitLayout(this.topPanelElmRef.first.nativeElement,\n                         this.topLeftPanelElmRef.first.nativeElement,\n                         this.topRightPanelElmRef.first.nativeElement,\n                         this.bottomPanelElmRef.first.nativeElement,\n                         this.bottomLeftPanelElmRef.first.nativeElement,\n                         this.bottomRightPanelElmRef.first.nativeElement);\n  }\n\n  private initSplitLayout(topPanel: any,\n                          topLeftPanel: any,\n                          topRightPanel: any,\n                          bottomPanel: any,\n                          bottomLeftPanel: any,\n                          bottomRightPanel: any) {\n\n    Split([topPanel, bottomPanel], {\n      sizes: [35, 65],\n      gutterSize: 8,\n      cursor: 'row-resize',\n      direction: 'vertical'\n    });\n\n    Split([topLeftPanel, topRightPanel], {\n      sizes: [50, 50],\n      gutterSize: 8,\n      cursor: 'col-resize'\n    });\n\n    Split([bottomLeftPanel, bottomRightPanel], {\n      sizes: [50, 50],\n      gutterSize: 8,\n      cursor: 'col-resize'\n    });\n  }\n\n  isErrorState(control: FormControl | null, form: FormGroupDirective | NgForm | null): boolean {\n    const originalErrorState = this.errorStateMatcher.isErrorState(control, form);\n    const customErrorState = !!(control && control.invalid && this.submitted);\n    return originalErrorState || customErrorState;\n  }\n\n  cancel(): void {\n    this.dialogRef.close(null);\n  }\n\n  test(): void {\n    this.testNodeScript().subscribe((output) => {\n      beautifyJs(output, {indent_size: 4}).subscribe(\n        (res) => {\n          this.nodeScriptTestFormGroup.get('output').setValue(res);\n        }\n      );\n    });\n  }\n\n  private testNodeScript(): Observable<string> {\n    if (this.checkInputParamErrors()) {\n      const inputParams: TestScriptInputParams = {\n        argNames: this.data.argNames,\n        scriptType: this.data.scriptType,\n        msgType: this.nodeScriptTestFormGroup.get('payload.msgType').value,\n        msg: this.nodeScriptTestFormGroup.get('payload.msg').value,\n        metadata: this.nodeScriptTestFormGroup.get('metadata').value,\n        script: this.nodeScriptTestFormGroup.get('script').value\n      };\n      return this.ruleChainService.testScript(inputParams).pipe(\n        mergeMap((result) => {\n          if (result.error) {\n            this.store.dispatch(new ActionNotificationShow(\n              {\n                message: result.error,\n                type: 'error'\n              }));\n            return NEVER;\n          } else {\n            return of(result.output);\n          }\n        })\n      );\n    } else {\n      return NEVER;\n    }\n  }\n\n  private checkInputParamErrors(): boolean {\n    this.payloadContent.validateOnSubmit();\n    if (!this.nodeScriptTestFormGroup.get('payload').valid) {\n      return false;\n    }\n    return true;\n  }\n\n  save(): void {\n    this.submitted = true;\n    this.testNodeScript().subscribe(() => {\n      this.nodeScriptTestFormGroup.get('script').markAsPristine();\n      this.dialogRef.close(this.nodeScriptTestFormGroup.get('script').value);\n    });\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<form class=\"tb-node-script-test-dialog\"\n      [formGroup]=\"nodeScriptTestFormGroup\" (ngSubmit)=\"save()\">\n  <mat-toolbar fxLayout=\"row\" color=\"primary\">\n    <h2>{{ 'rulenode.test-script-function' | translate }}</h2>\n    <span fxFlex></span>\n    <button mat-button mat-icon-button\n            (click)=\"cancel()\"\n            type=\"button\">\n      <mat-icon class=\"material-icons\">close</mat-icon>\n    </button>\n  </mat-toolbar>\n  <div mat-dialog-content fxFlex style=\"position: relative;\">\n    <div class=\"tb-absolute-fill\">\n      <div #topPanel class=\"tb-split tb-split-vertical\">\n        <div #topLeftPanel class=\"tb-split tb-content\">\n          <div class=\"tb-resize-container\">\n            <div class=\"tb-editor-area-title-panel\">\n              <label translate>rulenode.message</label>\n            </div>\n            <div formGroupName=\"payload\" fxLayout=\"column\" style=\"height: 100%;\">\n              <div fxLayout=\"row\">\n                <tb-message-type-autocomplete\n                  style=\"margin-bottom: 0; min-width: 300px;\"\n                  formControlName=\"msgType\"\n                  required>\n                </tb-message-type-autocomplete>\n              </div>\n              <tb-json-content\n                #payloadContent\n                fxFlex\n                formControlName=\"msg\"\n                label=\"{{ 'rulenode.message' | translate }}\"\n                [contentType]=\"contentTypes.JSON\"\n                validateContent\n                [fillHeight]=\"true\">\n              </tb-json-content>\n            </div>\n          </div>\n        </div>\n        <div #topRightPanel class=\"tb-split tb-content\">\n          <div tb-toast toastTarget=\"metadataPanel\" class=\"tb-resize-container\">\n            <div class=\"tb-editor-area-title-panel\">\n              <label translate>rulenode.metadata</label>\n            </div>\n            <tb-key-val-map\n              formControlName=\"metadata\"\n              titleText=\"rulenode.metadata\">\n            </tb-key-val-map>\n          </div>\n        </div>\n      </div>\n      <div #bottomPanel class=\"tb-split tb-split-vertical\">\n        <div #bottomLeftPanel class=\"tb-split tb-content\">\n          <div class=\"tb-resize-container\">\n            <div class=\"tb-editor-area-title-panel tb-js-function\" [ngClass]=\"{'tb-js-function-help': data.helpId}\">\n              <label>{{ functionTitle }}</label>\n            </div>\n            <tb-js-func\n              formControlName=\"script\"\n              functionName=\"{{ data.functionName }}\"\n              [functionArgs]=\"data.argNames\"\n              [validationArgs]=\"[data.msg, data.metadata, data.msgType]\"\n              resultType=\"object\"\n              [helpId]=\"data.helpId\"\n              [fillHeight]=\"true\">\n            </tb-js-func>\n          </div>\n        </div>\n        <div #bottomRightPanel class=\"tb-split tb-content\">\n          <div class=\"tb-resize-container\">\n            <div class=\"tb-editor-area-title-panel\">\n              <label translate>rulenode.output</label>\n            </div>\n            <tb-json-content\n              fxFlex\n              formControlName=\"output\"\n              label=\"{{ 'rulenode.output' | translate }}\"\n              [contentType]=\"contentTypes.JSON\"\n              validateContent=\"false\"\n              readonly=\"true\"\n              [fillHeight]=\"true\">\n            </tb-json-content>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div mat-dialog-actions fxLayout=\"row\">\n    <button mat-button mat-raised-button color=\"primary\"\n            type=\"button\"\n            (click)=\"test()\"\n            [disabled]=\"(isLoading$ | async) || nodeScriptTestFormGroup.invalid\">\n      {{ 'rulenode.test' | translate }}\n    </button>\n    <span fxFlex></span>\n    <button mat-button color=\"primary\"\n            type=\"button\"\n            cdkFocusInitial\n            [disabled]=\"(isLoading$ | async)\"\n            (click)=\"cancel()\">\n      {{ 'action.cancel' | translate }}\n    </button>\n    <button mat-button mat-raised-button color=\"primary\"\n            type=\"submit\"\n            [disabled]=\"(isLoading$ | async) || nodeScriptTestFormGroup.get('script').invalid || !nodeScriptTestFormGroup.get('script').dirty\">\n      {{ 'action.save' | translate }}\n    </button>\n  </div>\n</form>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Inject, Injectable, NgZone } from '@angular/core';\nimport { WINDOW } from '@core/services/window.service';\n\nexport type CancelAnimationFrame = () => void;\n\n// @dynamic\n@Injectable({\n  providedIn: 'root'\n})\nexport class RafService {\n\n  private readonly rafFunction: (frameCallback: () => void) => CancelAnimationFrame;\n  private readonly rafSupported: boolean;\n\n  constructor(\n    @Inject(WINDOW) private window: Window,\n    private ngZone: NgZone\n  ) {\n    const requestAnimationFrame: (frameCallback: () => void) => number = window.requestAnimationFrame ||\n      window.webkitRequestAnimationFrame;\n    const cancelAnimationFrame = window.cancelAnimationFrame ||\n      window.webkitCancelAnimationFrame ||\n      // @ts-ignore\n      window.webkitCancelRequestAnimationFrame;\n\n    this.rafSupported = !!requestAnimationFrame;\n\n    if (this.rafSupported) {\n      this.rafFunction = (frameCallback: () => void) => {\n        const id = requestAnimationFrame(frameCallback);\n        return () => {\n          cancelAnimationFrame(id);\n        };\n      };\n    } else {\n      this.rafFunction = (frameCallback: () => void) => {\n        const timeoutId = setTimeout(frameCallback, 16.66);\n        return () => {\n          clearTimeout(timeoutId);\n        };\n      };\n    }\n  }\n\n  public raf(frameCallback: () => void, runInZone = false): CancelAnimationFrame {\n    if (runInZone) {\n      return this.rafFunction(frameCallback);\n    } else {\n      return this.ngZone.runOutsideAngular(() => this.rafFunction(frameCallback));\n    }\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, forwardRef, Input, OnInit } from '@angular/core';\nimport { PageComponent } from '@shared/components/page.component';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { ControlValueAccessor, FormBuilder, FormGroup, NG_VALUE_ACCESSOR, Validators } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { DialogService } from '@core/services/dialog.service';\n\n@Component({\n  selector: 'tb-color-input',\n  templateUrl: './color-input.component.html',\n  styleUrls: ['./color-input.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => ColorInputComponent),\n      multi: true\n    }\n  ]\n})\nexport class ColorInputComponent extends PageComponent implements OnInit, ControlValueAccessor {\n\n  @Input()\n  icon: string;\n\n  @Input()\n  label: string;\n\n  @Input()\n  requiredText: string;\n\n  private colorClearButtonValue: boolean;\n  get colorClearButton(): boolean {\n    return this.colorClearButtonValue;\n  }\n  @Input()\n  set colorClearButton(value: boolean) {\n    const newVal = coerceBooleanProperty(value);\n    if (this.colorClearButtonValue !== newVal) {\n      this.colorClearButtonValue = newVal;\n    }\n  }\n\n  private openOnInputValue: boolean;\n  get openOnInput(): boolean {\n    return this.openOnInputValue;\n  }\n  @Input()\n  set openOnInput(value: boolean) {\n    const newVal = coerceBooleanProperty(value);\n    if (this.openOnInputValue !== newVal) {\n      this.openOnInputValue = newVal;\n    }\n  }\n\n  private requiredValue: boolean;\n  get required(): boolean {\n    return this.requiredValue;\n  }\n  @Input()\n  set required(value: boolean) {\n    const newVal = coerceBooleanProperty(value);\n    if (this.requiredValue !== newVal) {\n      this.requiredValue = newVal;\n      this.updateValidators();\n    }\n  }\n\n  @Input()\n  disabled: boolean;\n\n  private modelValue: string;\n\n  private propagateChange = null;\n\n  public colorFormGroup: FormGroup;\n\n  constructor(protected store: Store<AppState>,\n              private dialogs: DialogService,\n              private translate: TranslateService,\n              private fb: FormBuilder) {\n    super(store);\n  }\n\n  ngOnInit(): void {\n    this.colorFormGroup = this.fb.group({\n      color: [null, this.required ? [Validators.required] : []]\n    });\n\n    this.colorFormGroup.valueChanges.subscribe(() => {\n      this.updateModel();\n    });\n  }\n\n  updateValidators() {\n    if (this.colorFormGroup) {\n      this.colorFormGroup.get('color').setValidators(this.required ? [Validators.required] : []);\n      this.colorFormGroup.get('color').updateValueAndValidity();\n    }\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    if (isDisabled) {\n      this.colorFormGroup.disable({emitEvent: false});\n    } else {\n      this.colorFormGroup.enable({emitEvent: false});\n    }\n  }\n\n  writeValue(value: string): void {\n    this.modelValue = value;\n    this.colorFormGroup.patchValue(\n      { color: this.modelValue }, {emitEvent: false}\n    );\n  }\n\n  private updateModel() {\n    const color: string = this.colorFormGroup.get('color').value;\n    if (this.modelValue !== color) {\n      this.modelValue = color;\n      this.propagateChange(this.modelValue);\n    }\n  }\n\n  showColorPicker() {\n    this.dialogs.colorPicker(this.colorFormGroup.get('color').value).subscribe(\n      (color) => {\n        if (color) {\n          this.colorFormGroup.patchValue(\n            {color}, {emitEvent: true}\n          );\n        }\n      }\n    );\n  }\n\n  clear() {\n    this.colorFormGroup.get('color').patchValue(null, {emitEvent: true});\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<mat-form-field [formGroup]=\"colorFormGroup\">\n  <mat-label>\n    <mat-icon *ngIf=\"icon\">{{icon}}</mat-icon>\n    <span *ngIf=\"label\">{{label}}</span>\n  </mat-label>\n  <div matPrefix class=\"tb-color-preview\" (click)=\"!disabled && showColorPicker()\" style=\"margin-right: 5px;\">\n    <div class=\"tb-color-result\" [ngStyle]=\"{background: colorFormGroup.get('color').value}\"></div>\n  </div>\n  <input matInput formControlName=\"color\" (mousedown)=\"openOnInput && showColorPicker()\" [required]=\"required\">\n  <button *ngIf=\"colorClearButton\"\n          type=\"button\"\n          matSuffix mat-button mat-icon-button aria-label=\"Clear\"\n          (click)=\"clear()\">\n    <mat-icon class=\"material-icons\">close</mat-icon>\n  </button>\n  <mat-error *ngIf=\"colorFormGroup.get('color').hasError('required')\">\n    {{ requiredText }}\n  </mat-error>\n</mat-form-field>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport {\n  ChangeDetectorRef,\n  Component,\n  ComponentFactory,\n  ComponentRef, ElementRef,\n  EventEmitter,\n  Inject,\n  Injector,\n  Input, OnChanges,\n  Output,\n  SimpleChanges,\n  Type, ViewChild,\n  ViewContainerRef\n} from '@angular/core';\nimport { HelpService } from '@core/services/help.service';\nimport { MarkdownService, PrismPlugin } from 'ngx-markdown';\nimport { DynamicComponentFactoryService } from '@core/services/dynamic-component-factory.service';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { SHARED_MODULE_TOKEN } from '@shared/components/tokens';\nimport { isDefinedAndNotNull } from '@core/utils';\nimport { Observable, of, ReplaySubject } from 'rxjs';\n\n@Component({\n  selector: 'tb-markdown',\n  templateUrl: './markdown.component.html'\n})\nexport class TbMarkdownComponent implements OnChanges {\n\n  @ViewChild('markdownContainer', {read: ViewContainerRef, static: true}) markdownContainer: ViewContainerRef;\n  @ViewChild('fallbackElement', {static: true}) fallbackElement: ElementRef<HTMLElement>;\n\n  @Input() data: string | undefined;\n\n  @Input() markdownClass: string | undefined;\n\n  @Input() style: { [klass: string]: any } = {};\n\n  @Input()\n  get lineNumbers(): boolean { return this.lineNumbersValue; }\n  set lineNumbers(value: boolean) { this.lineNumbersValue = coerceBooleanProperty(value); }\n\n  @Input()\n  get fallbackToPlainMarkdown(): boolean { return this.fallbackToPlainMarkdownValue; }\n  set fallbackToPlainMarkdown(value: boolean) { this.fallbackToPlainMarkdownValue = coerceBooleanProperty(value); }\n\n  @Output() ready = new EventEmitter<void>();\n\n  private lineNumbersValue = false;\n  private fallbackToPlainMarkdownValue = false;\n\n  isMarkdownReady = false;\n\n  error = null;\n\n  private tbMarkdownInstanceComponentRef: ComponentRef<any>;\n  private tbMarkdownInstanceComponentFactory: ComponentFactory<any>;\n\n  constructor(private help: HelpService,\n              private cd: ChangeDetectorRef,\n              public markdownService: MarkdownService,\n              @Inject(SHARED_MODULE_TOKEN) private sharedModule: Type<any>,\n              private dynamicComponentFactoryService: DynamicComponentFactoryService) {}\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (isDefinedAndNotNull(this.data)) {\n      this.render(this.data);\n    }\n  }\n\n  private render(markdown: string) {\n    const compiled = this.markdownService.compile(markdown, false);\n    let template = this.sanitizeCurlyBraces(compiled);\n    let markdownClass = 'tb-markdown-view';\n    if (this.markdownClass) {\n      markdownClass += ` ${this.markdownClass}`;\n    }\n    template = `<div [ngStyle]=\"style\" class=\"${markdownClass}\">${template}</div>`;\n    this.markdownContainer.clear();\n    const parent = this;\n    let readyObservable: Observable<void>;\n    this.dynamicComponentFactoryService.createDynamicComponentFactory(\n      class TbMarkdownInstance {\n        ngOnDestroy(): void {\n          parent.destroyMarkdownInstanceResources();\n        }\n      },\n      template,\n      [this.sharedModule],\n      true\n    ).subscribe((factory) => {\n      this.tbMarkdownInstanceComponentFactory = factory;\n      const injector: Injector = Injector.create({providers: [], parent: this.markdownContainer.injector});\n      try {\n        this.tbMarkdownInstanceComponentRef =\n          this.markdownContainer.createComponent(this.tbMarkdownInstanceComponentFactory, 0, injector);\n        this.tbMarkdownInstanceComponentRef.instance.style = this.style;\n        this.handlePlugins(this.tbMarkdownInstanceComponentRef.location.nativeElement);\n        this.markdownService.highlight(this.tbMarkdownInstanceComponentRef.location.nativeElement);\n        readyObservable = this.handleImages(this.tbMarkdownInstanceComponentRef.location.nativeElement);\n        this.error = null;\n      } catch (error) {\n        readyObservable = this.handleError(compiled, error);\n      }\n      this.cd.detectChanges();\n      readyObservable.subscribe(() => {\n        this.ready.emit();\n      });\n    },\n    (error) => {\n      readyObservable = this.handleError(compiled, error);\n      this.cd.detectChanges();\n      readyObservable.subscribe(() => {\n        this.ready.emit();\n      });\n    });\n  }\n\n  private handleError(template: string, error): Observable<void> {\n    this.error = (error ? error + '' : 'Failed to render markdown!').replace(/\\n/g, '<br>');\n    this.destroyMarkdownInstanceResources();\n    if (this.fallbackToPlainMarkdownValue) {\n      this.markdownContainer.clear();\n      const element = this.fallbackElement.nativeElement;\n      element.innerHTML = template;\n      this.handlePlugins(element);\n      this.markdownService.highlight(element);\n      return this.handleImages(element);\n    } else {\n      return of(null);\n    }\n  }\n\n  private handlePlugins(element: HTMLElement): void {\n    if (this.lineNumbers) {\n      this.setPluginClass(element, PrismPlugin.LineNumbers);\n    }\n  }\n\n  private setPluginClass(element: HTMLElement, plugin: string | string[]): void {\n    const preElements = element.querySelectorAll('pre');\n    for (let i = 0; i < preElements.length; i++) {\n      const classes = plugin instanceof Array ? plugin : [plugin];\n      preElements.item(i).classList.add(...classes);\n    }\n  }\n\n  private handleImages(element: HTMLElement): Observable<void> {\n    const imgs = $('img', element);\n    if (imgs.length) {\n      let totalImages = imgs.length;\n      const imagesLoadedSubject = new ReplaySubject<void>();\n      imgs.each((index, img) => {\n        $(img).one('load error', () => {\n          totalImages--;\n          if (totalImages === 0) {\n            imagesLoadedSubject.next();\n            imagesLoadedSubject.complete();\n          }\n        });\n      });\n      return imagesLoadedSubject.asObservable();\n    } else {\n      return of(null);\n    }\n  }\n\n  private sanitizeCurlyBraces(template: string): string {\n    return template.replace(/{/g, '&#123;').replace(/}/g, '&#125;');\n  }\n\n  private destroyMarkdownInstanceResources() {\n    if (this.tbMarkdownInstanceComponentFactory) {\n      this.dynamicComponentFactoryService.destroyDynamicComponentFactory(this.tbMarkdownInstanceComponentFactory);\n      this.tbMarkdownInstanceComponentFactory = null;\n    }\n    this.tbMarkdownInstanceComponentRef = null;\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<ng-container #markdownContainer>\n</ng-container>\n<div *ngIf=\"error && !fallbackToPlainMarkdown\" style=\"color: #f00; font-size: 14px;\n                                                      line-height: 28px;\n                                                      background: #efefef;\">\n  {{error}}\n</div>\n<div #fallbackElement [fxShow]=\"error && fallbackToPlainMarkdown\" class=\"tb-markdown-view\" [ngClass]=\"markdownClass\" [ngStyle]=\"style\">\n</div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nexport const NULL_UUID = '13814000-1dd2-11b2-8080-808080808080';\n\nexport interface HasUUID {\n  id: string;\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\n\nexport interface ConfirmDialogData {\n  title: string;\n  message: string;\n  cancel: string;\n  ok: string;\n}\n\n// @dynamic\n@Component({\n  selector: 'tb-confirm-dialog',\n  templateUrl: './confirm-dialog.component.html',\n  styleUrls: ['./confirm-dialog.component.scss']\n})\nexport class ConfirmDialogComponent {\n  constructor(public dialogRef: MatDialogRef<ConfirmDialogComponent>,\n              @Inject(MAT_DIALOG_DATA) public data: ConfirmDialogData) {}\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<h2 mat-dialog-title>{{data.title}}</h2>\n<div mat-dialog-content [innerHTML]=\"data.message\"></div>\n<div mat-dialog-actions fxLayoutAlign=\"end center\">\n  <button mat-button color=\"primary\" [mat-dialog-close]=\"false\">{{data.cancel}}</button>\n  <button mat-button color=\"primary\" [mat-dialog-close]=\"true\" cdkFocusInitial>{{data.ok}}</button>\n</div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HTTP_INTERCEPTORS, HttpClient, HttpClientModule } from '@angular/common/http';\nimport { StoreModule } from '@ngrx/store';\nimport { EffectsModule } from '@ngrx/effects';\nimport { StoreDevtoolsModule } from '@ngrx/store-devtools';\nimport { GlobalHttpInterceptor } from './interceptors/global-http-interceptor';\nimport { effects, metaReducers, reducers } from './core.state';\nimport { environment as env } from '@env/environment';\n\nimport {\n  MissingTranslationHandler,\n  TranslateCompiler,\n  TranslateLoader,\n  TranslateModule,\n  TranslateParser\n} from '@ngx-translate/core';\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\nimport { TbMissingTranslationHandler } from './translate/missing-translate-handler';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { FlexLayoutModule } from '@angular/flex-layout';\nimport { TranslateDefaultCompiler } from '@core/translate/translate-default-compiler';\nimport { WINDOW_PROVIDERS } from '@core/services/window.service';\nimport { HotkeyModule } from 'angular2-hotkeys';\nimport { TranslateDefaultParser } from '@core/translate/translate-default-parser';\n\nexport function HttpLoaderFactory(http: HttpClient) {\n  return new TranslateHttpLoader(http, './assets/locale/locale.constant-', '.json');\n}\n\n@NgModule({\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    FlexLayoutModule.withConfig({addFlexToParent: false}),\n    MatDialogModule,\n    MatButtonModule,\n    MatSnackBarModule,\n\n    // ngx-translate\n    TranslateModule.forRoot({\n      loader: {\n        provide: TranslateLoader,\n        useFactory: HttpLoaderFactory,\n        deps: [HttpClient]\n      },\n      missingTranslationHandler: {\n        provide: MissingTranslationHandler,\n        useClass: TbMissingTranslationHandler\n      },\n      compiler: {\n        provide: TranslateCompiler,\n        useClass: TranslateDefaultCompiler\n      },\n      parser: {\n        provide: TranslateParser,\n        useClass: TranslateDefaultParser\n      }\n    }),\n    HotkeyModule.forRoot(),\n\n    // ngrx\n    StoreModule.forRoot(reducers,\n      { metaReducers,\n        runtimeChecks: {\n          strictStateImmutability: true,\n          strictActionImmutability: true,\n          strictStateSerializability: true,\n          strictActionSerializability: true\n        }}\n    ),\n    EffectsModule.forRoot(effects),\n    env.production\n      ? []\n      : StoreDevtoolsModule.instrument({\n        name: env.appTitle\n      })\n  ],\n  providers: [\n    {\n      provide: HTTP_INTERCEPTORS,\n      useClass: GlobalHttpInterceptor,\n      multi: true\n    },\n    WINDOW_PROVIDERS\n  ],\n  exports: []\n})\nexport class CoreModule {\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { AfterViewInit, Component, forwardRef, Input, NgZone, OnInit, ViewChild } from '@angular/core';\nimport { ControlValueAccessor, FormBuilder, FormGroup, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { Observable, of } from 'rxjs';\nimport { map, mergeMap, share, tap } from 'rxjs/operators';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@app/core/core.state';\nimport { TranslateService } from '@ngx-translate/core';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { MatAutocompleteTrigger } from '@angular/material/autocomplete';\nimport { getDefaultTimezoneInfo, getTimezoneInfo, getTimezones, TimezoneInfo } from '@shared/models/time/time.models';\nimport { deepClone } from '@core/utils';\n\n@Component({\n  selector: 'tb-timezone-select',\n  templateUrl: './timezone-select.component.html',\n  styleUrls: [],\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => TimezoneSelectComponent),\n    multi: true\n  }]\n})\nexport class TimezoneSelectComponent implements ControlValueAccessor, OnInit, AfterViewInit {\n\n  selectTimezoneFormGroup: FormGroup;\n\n  modelValue: string | null;\n\n  defaultTimezoneId: string = null;\n\n  @Input()\n  set defaultTimezone(timezone: string) {\n    if (this.defaultTimezoneId !== timezone) {\n      this.defaultTimezoneId = timezone;\n    }\n  }\n\n  private requiredValue: boolean;\n  get required(): boolean {\n    return this.requiredValue;\n  }\n  @Input()\n  set required(value: boolean) {\n    this.requiredValue = coerceBooleanProperty(value);\n  }\n\n  private userTimezoneByDefaultValue: boolean;\n  get userTimezoneByDefault(): boolean {\n    return this.userTimezoneByDefaultValue;\n  }\n  @Input()\n  set userTimezoneByDefault(value: boolean) {\n    this.userTimezoneByDefaultValue = coerceBooleanProperty(value);\n  }\n\n  private localBrowserTimezonePlaceholderOnEmptyValue: boolean;\n  get localBrowserTimezonePlaceholderOnEmpty(): boolean {\n    return this.localBrowserTimezonePlaceholderOnEmptyValue;\n  }\n  @Input()\n  set localBrowserTimezonePlaceholderOnEmpty(value: boolean) {\n    this.localBrowserTimezonePlaceholderOnEmptyValue = coerceBooleanProperty(value);\n  }\n\n  @Input()\n  disabled: boolean;\n\n  @ViewChild('timezoneInput', {static: true, read: MatAutocompleteTrigger}) timezoneInputTrigger: MatAutocompleteTrigger;\n\n  filteredTimezones: Observable<Array<TimezoneInfo>>;\n\n  searchText = '';\n\n  ignoreClosePanel = false;\n\n  private dirty = false;\n\n  private localBrowserTimezoneInfoPlaceholder: TimezoneInfo;\n\n  private timezones: Array<TimezoneInfo>;\n\n  private propagateChange = (v: any) => { };\n\n  constructor(private store: Store<AppState>,\n              public translate: TranslateService,\n              private ngZone: NgZone,\n              private fb: FormBuilder) {\n    this.selectTimezoneFormGroup = this.fb.group({\n      timezone: [null]\n    });\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  ngOnInit() {\n    this.filteredTimezones = this.selectTimezoneFormGroup.get('timezone').valueChanges\n      .pipe(\n        tap(value => {\n          let modelValue;\n          if (typeof value === 'string' || !value) {\n            modelValue = null;\n          } else {\n            modelValue = value.id;\n          }\n          this.updateView(modelValue);\n          if (value === null) {\n            this.clear();\n          }\n        }),\n        map(value => value ? (typeof value === 'string' ? value : value.name) : ''),\n        mergeMap(name => this.fetchTimezones(name) ),\n        share()\n      );\n  }\n\n  ngAfterViewInit(): void {\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    if (this.disabled) {\n      this.selectTimezoneFormGroup.disable({emitEvent: false});\n    } else {\n      this.selectTimezoneFormGroup.enable({emitEvent: false});\n    }\n  }\n\n  writeValue(value: string | null): void {\n    this.searchText = '';\n    const foundTimezone = getTimezoneInfo(value, this.defaultTimezoneId, this.userTimezoneByDefaultValue);\n    if (foundTimezone !== null) {\n      this.selectTimezoneFormGroup.get('timezone').patchValue(foundTimezone, {emitEvent: false});\n      if (foundTimezone.id !== value) {\n        setTimeout(() => {\n          this.updateView(foundTimezone.id);\n        }, 0);\n      } else {\n        this.modelValue = value;\n      }\n    } else {\n      this.modelValue = null;\n      if (this.localBrowserTimezonePlaceholderOnEmptyValue) {\n        this.selectTimezoneFormGroup.get('timezone').patchValue(this.getLocalBrowserTimezoneInfoPlaceholder(), {emitEvent: false});\n      } else {\n        this.selectTimezoneFormGroup.get('timezone').patchValue('', {emitEvent: false});\n      }\n    }\n    this.dirty = true;\n  }\n\n  onFocus() {\n    if (this.dirty) {\n      this.selectTimezoneFormGroup.get('timezone').updateValueAndValidity({onlySelf: true, emitEvent: true});\n      this.dirty = false;\n    }\n  }\n\n  onPanelClosed() {\n    if (this.ignoreClosePanel) {\n      this.ignoreClosePanel = false;\n    } else {\n      if (!this.modelValue) {\n        if (this.defaultTimezoneId || this.userTimezoneByDefaultValue) {\n          const defaultTimezoneInfo = getTimezoneInfo(this.defaultTimezoneId, this.defaultTimezoneId, this.userTimezoneByDefaultValue);\n          if (defaultTimezoneInfo !== null) {\n            this.ngZone.run(() => {\n              this.selectTimezoneFormGroup.get('timezone').reset(defaultTimezoneInfo, {emitEvent: true});\n            });\n          }\n        } else if (this.localBrowserTimezonePlaceholderOnEmptyValue) {\n          this.ngZone.run(() => {\n            this.selectTimezoneFormGroup.get('timezone').reset(this.getLocalBrowserTimezoneInfoPlaceholder(), {emitEvent: true});\n          });\n        }\n      }\n    }\n  }\n\n  updateView(value: string | null) {\n    if (this.modelValue !== value) {\n      this.modelValue = value;\n      this.propagateChange(this.modelValue);\n    }\n  }\n\n  displayTimezoneFn(timezone?: TimezoneInfo): string | undefined {\n    return timezone ? `${timezone.name} (${timezone.offset})` : undefined;\n  }\n\n  fetchTimezones(searchText?: string): Observable<Array<TimezoneInfo>> {\n    this.searchText = searchText;\n    if (searchText && searchText.length) {\n      return of(this.loadTimezones().filter((timezoneInfo) =>\n          timezoneInfo.name.toLowerCase().includes(searchText.toLowerCase())));\n    }\n    return of(this.loadTimezones());\n  }\n\n  clear() {\n    this.selectTimezoneFormGroup.get('timezone').patchValue('', {emitEvent: true});\n    setTimeout(() => {\n      this.timezoneInputTrigger.openPanel();\n    }, 0);\n  }\n\n  private loadTimezones(): Array<TimezoneInfo> {\n    if (!this.timezones) {\n      this.timezones = [];\n      if (this.localBrowserTimezonePlaceholderOnEmptyValue) {\n        this.timezones.push(this.getLocalBrowserTimezoneInfoPlaceholder());\n      }\n      this.timezones.push(...getTimezones());\n    }\n    return this.timezones;\n  }\n\n  private getLocalBrowserTimezoneInfoPlaceholder(): TimezoneInfo {\n    if (!this.localBrowserTimezoneInfoPlaceholder) {\n      this.localBrowserTimezoneInfoPlaceholder = deepClone(getDefaultTimezoneInfo());\n      this.localBrowserTimezoneInfoPlaceholder.id = null;\n      this.localBrowserTimezoneInfoPlaceholder.name = this.translate.instant('timezone.browser-time');\n    }\n    return this.localBrowserTimezoneInfoPlaceholder;\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<mat-form-field [formGroup]=\"selectTimezoneFormGroup\" fxFlex class=\"mat-block\">\n  <mat-label translate>timezone.timezone</mat-label>\n  <input matInput type=\"text\" placeholder=\"{{ 'timezone.select-timezone' | translate }}\"\n         #timezoneInput\n         formControlName=\"timezone\"\n         (focusin)=\"onFocus()\"\n         [required]=\"required\"\n         [matAutocomplete]=\"timezoneAutocomplete\">\n  <button *ngIf=\"selectTimezoneFormGroup.get('timezone').value && !disabled\"\n          type=\"button\" style=\"margin-right: 1px\"\n          matSuffix mat-button mat-icon-button aria-label=\"Clear\"\n          (mousedown)=\"ignoreClosePanel = true\"\n          (click)=\"clear()\">\n    <mat-icon class=\"material-icons\">close</mat-icon>\n  </button>\n  <mat-autocomplete class=\"tb-autocomplete\"\n                    #timezoneAutocomplete=\"matAutocomplete\"\n                    (closed)=\"onPanelClosed()\"\n                    (optionSelected)=\"ignoreClosePanel = true\"\n                    [displayWith]=\"displayTimezoneFn\">\n    <mat-option *ngFor=\"let timezone of filteredTimezones | async\" [value]=\"timezone\">\n      <span [innerHTML]=\"displayTimezoneFn(timezone) | highlight:searchText\"></span>\n    </mat-option>\n    <mat-option *ngIf=\"!(filteredTimezones | async)?.length\" [value]=\"null\">\n      <span>\n          {{ translate.get('timezone.no-timezones-matching', {timezone: searchText}) | async }}\n      </span>\n    </mat-option>\n  </mat-autocomplete>\n  <mat-error *ngIf=\"selectTimezoneFormGroup.get('timezone').hasError('required')\">\n    {{ 'timezone.timezone-required' | translate }}\n  </mat-error>\n</mat-form-field>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nexport interface ISearchableComponent {\n  onSearchTextUpdated(searchText: string);\n}\n\nexport function instanceOfSearchableComponent(object: any): object is ISearchableComponent {\n  return 'onSearchTextUpdated' in object;\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, ElementRef, forwardRef, Input, OnInit, ViewChild } from '@angular/core';\nimport { ControlValueAccessor, FormBuilder, FormGroup, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { Observable, of } from 'rxjs';\nimport { catchError, debounceTime, distinctUntilChanged, map, share, switchMap, tap } from 'rxjs/operators';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { TranslateService } from '@ngx-translate/core';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { EntityId } from '@shared/models/id/entity-id';\nimport { EntityType } from '@shared/models/entity-type.models';\nimport { BaseData } from '@shared/models/base-data';\nimport { EntityService } from '@core/http/entity.service';\nimport { TruncatePipe } from '@shared/pipe/truncate.pipe';\nimport { OtaPackageInfo, OtaUpdateTranslation, OtaUpdateType } from '@shared/models/ota-package.models';\nimport { OtaPackageService } from '@core/http/ota-package.service';\nimport { PageLink } from '@shared/models/page/page-link';\nimport { Direction } from '@shared/models/page/sort-order';\nimport { emptyPageData } from \"@shared/models/page/page-data\";\n\n@Component({\n  selector: 'tb-ota-package-autocomplete',\n  templateUrl: './ota-package-autocomplete.component.html',\n  styleUrls: [],\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => OtaPackageAutocompleteComponent),\n    multi: true\n  }]\n})\nexport class OtaPackageAutocompleteComponent implements ControlValueAccessor, OnInit {\n\n  otaPackageFormGroup: FormGroup;\n\n  modelValue: string | EntityId | null;\n\n  @Input()\n  type = OtaUpdateType.FIRMWARE;\n\n  @Input()\n  deviceProfileId: string;\n\n  @Input()\n  labelText: string;\n\n  @Input()\n  requiredText: string;\n\n  @Input()\n  useFullEntityId = false;\n\n  private requiredValue: boolean;\n\n  get required(): boolean {\n    return this.requiredValue;\n  }\n\n  @Input()\n  set required(value: boolean) {\n    this.requiredValue = coerceBooleanProperty(value);\n  }\n\n  @Input()\n  disabled: boolean;\n\n  @ViewChild('packageInput', {static: true}) packageInput: ElementRef;\n\n  filteredPackages: Observable<Array<OtaPackageInfo>>;\n\n  searchText = '';\n\n  private dirty = false;\n\n  private propagateChange = (v: any) => { };\n\n  constructor(private store: Store<AppState>,\n              public translate: TranslateService,\n              public truncate: TruncatePipe,\n              private entityService: EntityService,\n              private otaPackageService: OtaPackageService,\n              private fb: FormBuilder) {\n    this.otaPackageFormGroup = this.fb.group({\n      packageId: [null]\n    });\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  ngOnInit() {\n    this.filteredPackages = this.otaPackageFormGroup.get('packageId').valueChanges\n      .pipe(\n        debounceTime(150),\n        tap(value => {\n          let modelValue;\n          if (typeof value === 'string' || !value) {\n            modelValue = null;\n          } else {\n            modelValue = this.useFullEntityId ? value.id : value.id.id;\n          }\n          this.updateView(modelValue);\n          if (value === null) {\n            this.clear();\n          }\n        }),\n        map(value => value ? (typeof value === 'string' ? value : value.title) : ''),\n        distinctUntilChanged(),\n        switchMap(name => this.fetchPackages(name)),\n        share()\n      );\n  }\n\n  ngAfterViewInit(): void {\n  }\n\n  getCurrentEntity(): BaseData<EntityId> | null {\n    const currentRuleChain = this.otaPackageFormGroup.get('packageId').value;\n    if (currentRuleChain && typeof currentRuleChain !== 'string') {\n      return currentRuleChain as BaseData<EntityId>;\n    } else {\n      return null;\n    }\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    if (this.disabled) {\n      this.otaPackageFormGroup.disable({emitEvent: false});\n    } else {\n      this.otaPackageFormGroup.enable({emitEvent: false});\n    }\n  }\n\n  textIsNotEmpty(text: string): boolean {\n    return (text && text.length > 0);\n  }\n\n  writeValue(value: string | EntityId | null): void {\n    this.searchText = '';\n    if (value != null && value !== '') {\n      let packageId = '';\n      if (typeof value === 'string') {\n        packageId = value;\n      } else if (value.entityType && value.id) {\n        packageId = value.id;\n      }\n      if (packageId !== '') {\n        this.entityService.getEntity(EntityType.OTA_PACKAGE, packageId, {ignoreLoading: true, ignoreErrors: true}).subscribe(\n          (entity) => {\n            this.modelValue = this.useFullEntityId ? entity.id : entity.id.id;\n            this.otaPackageFormGroup.get('packageId').patchValue(entity, {emitEvent: false});\n          },\n          () => {\n            this.modelValue = null;\n            this.otaPackageFormGroup.get('packageId').patchValue('', {emitEvent: false});\n            if (value !== null) {\n              this.propagateChange(this.modelValue);\n            }\n          }\n        );\n      } else {\n        this.modelValue = null;\n        this.otaPackageFormGroup.get('packageId').patchValue('', {emitEvent: false});\n        this.propagateChange(null);\n      }\n    } else {\n      this.modelValue = null;\n      this.otaPackageFormGroup.get('packageId').patchValue('', {emitEvent: false});\n    }\n    this.dirty = true;\n  }\n\n  onFocus() {\n    if (this.dirty) {\n      this.otaPackageFormGroup.get('packageId').updateValueAndValidity({onlySelf: true, emitEvent: true});\n      this.dirty = false;\n    }\n  }\n\n  reset() {\n    this.otaPackageFormGroup.get('packageId').patchValue('', {emitEvent: false});\n  }\n\n  updateView(value: string | null) {\n    if (this.modelValue !== value) {\n      this.modelValue = value;\n      this.propagateChange(this.modelValue);\n    }\n  }\n\n  displayPackageFn(packageInfo?: OtaPackageInfo): string | undefined {\n    return packageInfo ? `${packageInfo.title} (${packageInfo.version})` : undefined;\n  }\n\n  fetchPackages(searchText?: string): Observable<Array<OtaPackageInfo>> {\n    this.searchText = searchText;\n    const pageLink = new PageLink(50, 0, searchText, {\n      property: 'title',\n      direction: Direction.ASC\n    });\n    return this.otaPackageService.getOtaPackagesInfoByDeviceProfileId(pageLink, this.deviceProfileId, this.type,\n                                                                {ignoreLoading: true}).pipe(\n      catchError(() => of(emptyPageData<OtaPackageInfo>())),\n      map((data) => data && data.data.length ? data.data : null)\n    );\n  }\n\n  clear() {\n    this.otaPackageFormGroup.get('packageId').patchValue('', {emitEvent: false});\n    setTimeout(() => {\n      this.packageInput.nativeElement.blur();\n      this.packageInput.nativeElement.focus();\n    }, 0);\n  }\n\n  get placeholderText(): string {\n    return this.labelText || OtaUpdateTranslation.get(this.type).label;\n  }\n\n  get requiredErrorText(): string {\n    return this.requiredText || OtaUpdateTranslation.get(this.type).required;\n  }\n\n  get notFoundPackage(): string {\n    return OtaUpdateTranslation.get(this.type).noFound;\n  }\n\n  get notMatchingPackage(): string {\n    return OtaUpdateTranslation.get(this.type).noMatching;\n  }\n\n  get hintText(): string {\n    return OtaUpdateTranslation.get(this.type).hint;\n  }\n\n  packageTitleText(firpackageInfomware: OtaPackageInfo): string {\n    return `${firpackageInfomware.title} (${firpackageInfomware.version})`;\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<mat-form-field [formGroup]=\"otaPackageFormGroup\" class=\"mat-block\">\n  <input matInput type=\"text\" placeholder=\"{{ placeholderText | translate }}\"\n         #packageInput\n         formControlName=\"packageId\"\n         (focusin)=\"onFocus()\"\n         [required]=\"required\"\n         [matAutocomplete]=\"packageAutocomplete\"\n         [matAutocompleteDisabled]=\"disabled\">\n  <button *ngIf=\"otaPackageFormGroup.get('packageId').value && !disabled\"\n          type=\"button\"\n          matSuffix mat-button mat-icon-button aria-label=\"Clear\"\n          (click)=\"clear()\">\n    <mat-icon class=\"material-icons\">close</mat-icon>\n  </button>\n  <mat-autocomplete class=\"tb-autocomplete\"\n                    #packageAutocomplete=\"matAutocomplete\"\n                    [displayWith]=\"displayPackageFn\">\n    <mat-option *ngFor=\"let package of filteredPackages | async\" [value]=\"package\">\n      <span [innerHTML]=\"this.packageTitleText(package) | highlight:searchText\"></span>\n    </mat-option>\n    <mat-option *ngIf=\"!(filteredPackages | async)?.length\" [value]=\"null\" class=\"tb-not-found\">\n      <div class=\"tb-not-found-content\" (click)=\"$event.stopPropagation()\">\n        <div *ngIf=\"!textIsNotEmpty(searchText); else searchNotEmpty\">\n          <span>{{ notFoundPackage | translate }}</span>\n        </div>\n        <ng-template #searchNotEmpty>\n          <span>\n              {{ translate.get(notMatchingPackage,\n            {entity: truncate.transform(searchText, true, 6, &apos;...&apos;)}) | async }}\n          </span>\n        </ng-template>\n      </div>\n    </mat-option>\n  </mat-autocomplete>\n  <mat-error *ngIf=\"otaPackageFormGroup.get('packageId').hasError('required')\">\n    {{ requiredErrorText | translate }}\n  </mat-error>\n  <mat-hint *ngIf=\"!disabled\">{{ hintText | translate }}</mat-hint>\n</mat-form-field>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { LoginComponent } from './pages/login/login.component';\nimport { AuthGuard } from '@core/guards/auth.guard';\nimport { ResetPasswordRequestComponent } from '@modules/login/pages/login/reset-password-request.component';\nimport { ResetPasswordComponent } from '@modules/login/pages/login/reset-password.component';\nimport { CreatePasswordComponent } from '@modules/login/pages/login/create-password.component';\n\nconst routes: Routes = [\n  {\n    path: 'login',\n    component: LoginComponent,\n    data: {\n      title: 'login.login',\n      module: 'public'\n    },\n    canActivate: [AuthGuard]\n  },\n  {\n    path: 'login/resetPasswordRequest',\n    component: ResetPasswordRequestComponent,\n    data: {\n      title: 'login.request-password-reset',\n      module: 'public'\n    },\n    canActivate: [AuthGuard]\n  },\n  {\n    path: 'login/resetPassword',\n    component: ResetPasswordComponent,\n    data: {\n      title: 'login.reset-password',\n      module: 'public'\n    },\n    canActivate: [AuthGuard]\n  },\n  {\n    path: 'login/resetExpiredPassword',\n    component: ResetPasswordComponent,\n    data: {\n      title: 'login.reset-password',\n      module: 'public',\n      expiredPassword: true\n    },\n    canActivate: [AuthGuard]\n  },\n  {\n    path: 'login/createPassword',\n    component: CreatePasswordComponent,\n    data: {\n      title: 'login.create-password',\n      module: 'public'\n    },\n    canActivate: [AuthGuard]\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class LoginRoutingModule { }\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, OnInit } from '@angular/core';\nimport { AuthService } from '@core/auth/auth.service';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { PageComponent } from '@shared/components/page.component';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { ActionNotificationShow } from '@core/notification/notification.actions';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'tb-reset-password-request',\n  templateUrl: './reset-password-request.component.html',\n  styleUrls: ['./reset-password-request.component.scss']\n})\nexport class ResetPasswordRequestComponent extends PageComponent implements OnInit {\n\n  clicked: boolean = false;\n\n  requestPasswordRequest = this.fb.group({\n    email: ['', [Validators.email, Validators.required]]\n  }, {updateOn: 'submit'});\n\n  constructor(protected store: Store<AppState>,\n              private authService: AuthService,\n              private translate: TranslateService,\n              public fb: FormBuilder) {\n    super(store);\n  }\n\n  ngOnInit() {\n  }\n\n  disableInputs() {\n    this.requestPasswordRequest.disable();\n    this.clicked = true;\n  }\n\n  sendResetPasswordLink() {\n    if (this.requestPasswordRequest.valid) {\n      this.disableInputs();\n      this.authService.sendResetPasswordLink(this.requestPasswordRequest.get('email').value).subscribe(\n        () => {\n          this.store.dispatch(new ActionNotificationShow({\n            message: this.translate.instant('login.password-link-sent-message'),\n            type: 'success'\n          }));\n        }\n      );\n    }\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<div class=\"tb-request-password-reset-content mat-app-background tb-dark\" fxLayout=\"row\" fxLayoutAlign=\"center center\"\n     style=\"width: 100%;\">\n  <mat-card fxFlex=\"initial\" class=\"tb-request-password-reset-card\">\n    <mat-card-title class=\"layout-padding\">\n      <span translate class=\"mat-headline\">login.request-password-reset</span>\n    </mat-card-title>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\">\n    </mat-progress-bar>\n    <span style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></span>\n    <mat-card-content>\n      <form [formGroup]=\"requestPasswordRequest\" (ngSubmit)=\"sendResetPasswordLink()\">\n        <fieldset [disabled]=\"isLoading$ | async\">\n          <div tb-toast fxLayout=\"column\" class=\"layout-padding\">\n            <span style=\"height: 50px;\"></span>\n            <mat-form-field class=\"mat-block\" hideRequiredMarker>\n              <mat-label translate>login.email</mat-label>\n              <input matInput type=\"email\" autofocus formControlName=\"email\" email required/>\n              <mat-icon class=\"material-icons\" matPrefix>email</mat-icon>\n              <mat-error *ngIf=\"requestPasswordRequest.get('email').invalid\">\n                {{ 'user.invalid-email-format' | translate }}\n              </mat-error>\n            </mat-form-field>\n            <div fxLayout=\"column\" fxLayout.gt-xs=\"row\" fxLayoutGap=\"16px\" fxLayoutAlign=\"start center\"\n                 fxLayoutAlign.gt-xs=\"center start\">\n              <button mat-raised-button color=\"accent\" type=\"submit\" [disabled]=\"(isLoading$ | async) || this.clicked\">\n                {{ 'login.request-password-reset' | translate }}\n              </button>\n              <button mat-raised-button color=\"primary\" type=\"button\" [disabled]=\"(isLoading$ | async)\"\n                      routerLink=\"/login\">\n                {{ 'action.cancel' | translate }}\n              </button>\n            </div>\n          </div>\n        </fieldset>\n      </form>\n    </mat-card-content>\n  </mat-card>\n</div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport {\n  AfterViewInit, ChangeDetectorRef,\n  Component, ComponentFactoryResolver, ComponentRef,\n  Directive,\n  ElementRef, HostBinding,\n  Inject,\n  Injector,\n  Input,\n  NgZone,\n  OnDestroy, Optional,\n  StaticProvider,\n  ViewChild,\n  ViewContainerRef\n} from '@angular/core';\nimport { MAT_SNACK_BAR_DATA, MatSnackBar, MatSnackBarConfig, MatSnackBarRef } from '@angular/material/snack-bar';\nimport { NotificationMessage } from '@app/core/notification/notification.models';\nimport { Subscription } from 'rxjs';\nimport { NotificationService } from '@app/core/services/notification.service';\nimport { BreakpointObserver } from '@angular/cdk/layout';\nimport { MediaBreakpoints } from '@shared/models/constants';\nimport { MatButton } from '@angular/material/button';\nimport Timeout = NodeJS.Timeout;\n\n@Directive({\n  selector: '[tb-toast]'\n})\nexport class ToastDirective implements AfterViewInit, OnDestroy {\n\n  @Input()\n  toastTarget = 'root';\n\n  private notificationSubscription: Subscription = null;\n  private hideNotificationSubscription: Subscription = null;\n\n  private snackBarRef: MatSnackBarRef<any> = null;\n  private toastComponentRef: ComponentRef<TbSnackBarComponent>;\n  private currentMessage: NotificationMessage = null;\n\n  private dismissTimeout: Timeout = null;\n\n  constructor(private elementRef: ElementRef,\n              private viewContainerRef: ViewContainerRef,\n              private notificationService: NotificationService,\n              private componentFactoryResolver: ComponentFactoryResolver,\n              private snackBar: MatSnackBar,\n              private ngZone: NgZone,\n              private breakpointObserver: BreakpointObserver,\n              private cd: ChangeDetectorRef) {\n  }\n\n  ngAfterViewInit(): void {\n    this.notificationSubscription = this.notificationService.getNotification().subscribe(\n      (notificationMessage) => {\n        if (this.shouldDisplayMessage(notificationMessage)) {\n          this.currentMessage = notificationMessage;\n          const isGtSm = this.breakpointObserver.isMatched(MediaBreakpoints['gt-sm']);\n          if (isGtSm && this.toastTarget !== 'root') {\n            this.showToastPanel(notificationMessage);\n          } else {\n            this.showSnackBar(notificationMessage, isGtSm);\n          }\n        }\n      }\n    );\n\n    this.hideNotificationSubscription = this.notificationService.getHideNotification().subscribe(\n      (hideNotification) => {\n        if (hideNotification) {\n          const target = hideNotification.target || 'root';\n          if (this.toastTarget === target) {\n            this.ngZone.run(() => {\n              if (this.snackBarRef) {\n                this.snackBarRef.dismiss();\n              }\n              if (this.toastComponentRef) {\n                this.toastComponentRef.instance.actionButton._elementRef.nativeElement.click();\n              }\n            });\n          }\n        }\n      }\n    );\n  }\n\n  private showToastPanel(notificationMessage: NotificationMessage) {\n    this.ngZone.run(() => {\n      if (this.snackBarRef) {\n        this.snackBarRef.dismiss();\n      }\n      if (this.toastComponentRef) {\n        this.viewContainerRef.detach(0);\n        this.toastComponentRef.destroy();\n      }\n      let panelClass = ['tb-toast-panel', 'toast-panel'];\n      if (notificationMessage.panelClass) {\n        if (typeof notificationMessage.panelClass === 'string') {\n          panelClass.push(notificationMessage.panelClass);\n        } else if (notificationMessage.panelClass.length) {\n          panelClass = panelClass.concat(notificationMessage.panelClass);\n        }\n      }\n      const horizontalPosition = notificationMessage.horizontalPosition || 'left';\n      const verticalPosition = notificationMessage.verticalPosition || 'top';\n      if (horizontalPosition === 'start' || horizontalPosition === 'left') {\n        panelClass.push('left');\n      } else if (horizontalPosition === 'end' || horizontalPosition === 'right') {\n        panelClass.push('right');\n      } else {\n        panelClass.push('h-center');\n      }\n      if (verticalPosition === 'top') {\n        panelClass.push('top');\n      } else {\n        panelClass.push('bottom');\n      }\n\n      const componentFactory = this.componentFactoryResolver.resolveComponentFactory(TbSnackBarComponent);\n      const data: ToastPanelData = {\n        notification: notificationMessage,\n        panelClass,\n        destroyToastComponent: () => {\n          this.viewContainerRef.detach(0);\n          this.toastComponentRef.destroy();\n        }\n      };\n      const providers: StaticProvider[] = [\n        {provide: MAT_SNACK_BAR_DATA, useValue: data}\n      ];\n      const injector = Injector.create({parent: this.viewContainerRef.injector, providers});\n      this.toastComponentRef = this.viewContainerRef.createComponent(componentFactory, 0, injector);\n      this.cd.detectChanges();\n\n      if (notificationMessage.duration && notificationMessage.duration > 0) {\n        if (this.dismissTimeout !== null) {\n          clearTimeout(this.dismissTimeout);\n          this.dismissTimeout = null;\n        }\n        this.dismissTimeout = setTimeout(() => {\n          if (this.toastComponentRef) {\n            this.toastComponentRef.instance.actionButton._elementRef.nativeElement.click();\n          }\n          this.dismissTimeout = null;\n        }, notificationMessage.duration + 500);\n      }\n      this.toastComponentRef.onDestroy(() => {\n        if (this.dismissTimeout !== null) {\n          clearTimeout(this.dismissTimeout);\n          this.dismissTimeout = null;\n        }\n        this.toastComponentRef = null;\n        this.currentMessage = null;\n      });\n    });\n  }\n\n  private showSnackBar(notificationMessage: NotificationMessage, isGtSm: boolean) {\n    this.ngZone.run(() => {\n      if (this.snackBarRef) {\n        this.snackBarRef.dismiss();\n      }\n      const data: ToastPanelData = {\n        notification: notificationMessage,\n        parent: this.elementRef,\n        panelClass: [],\n        destroyToastComponent: () => {}\n      };\n      const config: MatSnackBarConfig = {\n        horizontalPosition: notificationMessage.horizontalPosition || 'left',\n        verticalPosition: !isGtSm ? 'bottom' : (notificationMessage.verticalPosition || 'top'),\n        viewContainerRef: this.viewContainerRef,\n        duration: notificationMessage.duration,\n        panelClass: notificationMessage.panelClass,\n        data\n      };\n      this.snackBarRef = this.snackBar.openFromComponent(TbSnackBarComponent, config);\n      if (notificationMessage.duration && notificationMessage.duration > 0 && notificationMessage.forceDismiss) {\n        if (this.dismissTimeout !== null) {\n          clearTimeout(this.dismissTimeout);\n          this.dismissTimeout = null;\n        }\n        this.dismissTimeout = setTimeout(() => {\n          if (this.snackBarRef) {\n            this.snackBarRef.instance.actionButton._elementRef.nativeElement.click();\n          }\n          this.dismissTimeout = null;\n        }, notificationMessage.duration);\n      }\n      this.snackBarRef.afterDismissed().subscribe(() => {\n        if (this.dismissTimeout !== null) {\n          clearTimeout(this.dismissTimeout);\n          this.dismissTimeout = null;\n        }\n        this.snackBarRef = null;\n        this.currentMessage = null;\n      });\n    });\n  }\n\n  private shouldDisplayMessage(notificationMessage: NotificationMessage): boolean {\n    if (notificationMessage && notificationMessage.message) {\n      const target = notificationMessage.target || 'root';\n      if (this.toastTarget === target) {\n        if (!this.currentMessage || this.currentMessage.message !== notificationMessage.message\n          || this.currentMessage.type !== notificationMessage.type) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  ngOnDestroy(): void {\n    if (this.toastComponentRef) {\n      this.viewContainerRef.detach(0);\n      this.toastComponentRef.destroy();\n    }\n    if (this.notificationSubscription) {\n      this.notificationSubscription.unsubscribe();\n    }\n    if (this.hideNotificationSubscription) {\n      this.hideNotificationSubscription.unsubscribe();\n    }\n  }\n}\n\ninterface ToastPanelData {\n  notification: NotificationMessage;\n  parent?: ElementRef;\n  panelClass: string[];\n  destroyToastComponent: () => void;\n}\n\nimport {\n  AnimationTriggerMetadata,\n  AnimationEvent,\n  trigger,\n  state,\n  transition,\n  style,\n  animate,\n} from '@angular/animations';\nimport { onParentScrollOrWindowResize } from '@core/utils';\n\nexport const toastAnimations: {\n  readonly showHideToast: AnimationTriggerMetadata;\n} = {\n  showHideToast: trigger('showHideAnimation', [\n    state('in', style({ transform: 'scale(1)', opacity: 1 })),\n    transition('void => opened', [style({ transform: 'scale(0)', opacity: 0 }), animate('{{ open }}ms')]),\n    transition(\n      'opened => closing',\n      animate('{{ close }}ms', style({ transform: 'scale(0)', opacity: 0 })),\n    ),\n  ]),\n};\n\nexport type ToastAnimationState = 'default' | 'opened' | 'closing';\n\n@Component({\n  selector: 'tb-snack-bar-component',\n  templateUrl: 'snack-bar-component.html',\n  styleUrls: ['snack-bar-component.scss'],\n  animations: [toastAnimations.showHideToast]\n})\nexport class TbSnackBarComponent implements AfterViewInit, OnDestroy {\n\n  @ViewChild('actionButton', {static: true}) actionButton: MatButton;\n\n  @HostBinding('class')\n  get panelClass(): string[] {\n    return this.data.panelClass;\n  }\n\n  private parentEl: HTMLElement;\n  private snackBarContainerEl: HTMLElement;\n  private parentScrollSubscription: Subscription = null;\n\n  public notification: NotificationMessage;\n\n  animationState: ToastAnimationState;\n\n  animationParams = {\n    open: 100,\n    close: 100\n  };\n\n  constructor(@Inject(MAT_SNACK_BAR_DATA)\n              private data: ToastPanelData,\n              private elementRef: ElementRef,\n              @Optional()\n              private snackBarRef: MatSnackBarRef<TbSnackBarComponent>) {\n    this.animationState = !!this.snackBarRef ? 'default' : 'opened';\n    this.notification = data.notification;\n  }\n\n  ngAfterViewInit() {\n    if (this.snackBarRef) {\n      this.parentEl = this.data.parent.nativeElement;\n      this.snackBarContainerEl = $(this.elementRef.nativeElement).closest('snack-bar-container')[0];\n      this.snackBarContainerEl.style.position = 'absolute';\n      this.updateContainerRect();\n      this.updatePosition(this.snackBarRef.containerInstance.snackBarConfig);\n      this.parentScrollSubscription = onParentScrollOrWindowResize(this.parentEl).subscribe(() => {\n        this.updateContainerRect();\n      });\n    }\n  }\n\n  private updatePosition(config: MatSnackBarConfig) {\n    const isRtl = config.direction === 'rtl';\n    const isLeft = (config.horizontalPosition === 'left' ||\n      (config.horizontalPosition === 'start' && !isRtl) ||\n      (config.horizontalPosition === 'end' && isRtl));\n    const isRight = !isLeft && config.horizontalPosition !== 'center';\n    if (isLeft) {\n      this.snackBarContainerEl.style.justifyContent = 'flex-start';\n    } else if (isRight) {\n      this.snackBarContainerEl.style.justifyContent = 'flex-end';\n    } else {\n      this.snackBarContainerEl.style.justifyContent = 'center';\n    }\n    if (config.verticalPosition === 'top') {\n      this.snackBarContainerEl.style.alignItems = 'flex-start';\n    } else {\n      this.snackBarContainerEl.style.alignItems = 'flex-end';\n    }\n  }\n\n  private updateContainerRect() {\n    const viewportOffset = this.parentEl.getBoundingClientRect();\n    this.snackBarContainerEl.style.top = viewportOffset.top + 'px';\n    this.snackBarContainerEl.style.left = viewportOffset.left + 'px';\n    this.snackBarContainerEl.style.width = viewportOffset.width + 'px';\n    this.snackBarContainerEl.style.height = viewportOffset.height + 'px';\n  }\n\n  ngOnDestroy() {\n    if (this.parentScrollSubscription) {\n      this.parentScrollSubscription.unsubscribe();\n    }\n  }\n\n  action(event: MouseEvent): void {\n    event.stopPropagation();\n    if (this.snackBarRef) {\n      this.snackBarRef.dismissWithAction();\n    } else {\n      this.animationState = 'closing';\n    }\n  }\n\n  onHideFinished(event: AnimationEvent) {\n    const { toState } = event;\n    const isFadeOut = (toState as ToastAnimationState) === 'closing';\n    const itFinished = this.animationState === 'closing';\n    if (isFadeOut && itFinished) {\n      this.data.destroyToastComponent();\n    }\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<div fxLayout=\"row\" fxLayoutAlign=\"start center\" class=\"tb-toast\"\n     [@showHideAnimation]=\"{value: animationState, params: animationParams}\"\n     (@showHideAnimation.done)=\"onHideFinished($event)\"\n     [ngClass]=\"{\n          'error-toast': notification.type === 'error',\n          'warn-toast': notification.type === 'warn',\n          'success-toast': notification.type === 'success',\n          'info-toast': notification.type === 'info'\n     }\">\n  <div class=\"toast-text\" [innerHTML]=\"notification.message\"></div>\n  <button #actionButton type=\"button\" mat-button (click)=\"action($event)\">{{ 'action.close' | translate }}</button>\n</div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { COMMA, ENTER, SEMICOLON } from '@angular/cdk/keycodes';\nimport { AfterViewInit, Component, ElementRef, forwardRef, Input, OnInit, ViewChild } from '@angular/core';\nimport { ControlValueAccessor, FormBuilder, FormGroup, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { Observable, of } from 'rxjs';\nimport { map, mergeMap, share } from 'rxjs/operators';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@app/core/core.state';\nimport { TranslateService } from '@ngx-translate/core';\nimport { EntityId } from '@shared/models/id/entity-id';\nimport { EntityService } from '@core/http/entity.service';\nimport { MatAutocomplete, MatAutocompleteSelectedEvent } from '@angular/material/autocomplete';\nimport { MatChipInputEvent, MatChipList } from '@angular/material/chips';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { DataKeyType } from '@shared/models/telemetry/telemetry.models';\nimport { isEqual } from '@core/utils';\n\n@Component({\n  selector: 'tb-entity-keys-list',\n  templateUrl: './entity-keys-list.component.html',\n  styleUrls: ['./entity-keys-list.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => EntityKeysListComponent),\n      multi: true\n    }\n  ]\n})\nexport class EntityKeysListComponent implements ControlValueAccessor, OnInit, AfterViewInit {\n\n  keysListFormGroup: FormGroup;\n\n  modelValue: Array<string> | null;\n\n  entityIdValue: EntityId;\n\n  @Input()\n  set entityId(entityId: EntityId) {\n    if (!isEqual(this.entityIdValue, entityId)) {\n      this.entityIdValue = entityId;\n      this.dirty = true;\n    }\n  }\n\n  @Input()\n  keysText: string;\n\n  @Input()\n  dataKeyType: DataKeyType;\n\n  private requiredValue: boolean;\n  get required(): boolean {\n    return this.requiredValue;\n  }\n  @Input()\n  set required(value: boolean) {\n    this.requiredValue = coerceBooleanProperty(value);\n  }\n\n  @Input()\n  disabled: boolean;\n\n  @ViewChild('keyInput') keyInput: ElementRef<HTMLInputElement>;\n  @ViewChild('keyAutocomplete') matAutocomplete: MatAutocomplete;\n  @ViewChild('chipList') chipList: MatChipList;\n\n  filteredKeys: Observable<Array<string>>;\n\n  separatorKeysCodes: number[] = [ENTER, COMMA, SEMICOLON];\n\n  searchText = '';\n\n  private dirty = false;\n\n  private propagateChange = (v: any) => { };\n\n  constructor(private store: Store<AppState>,\n              public translate: TranslateService,\n              private entityService: EntityService,\n              private fb: FormBuilder) {\n    this.keysListFormGroup = this.fb.group({\n      key: [null]\n    });\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  ngOnInit() {\n    this.filteredKeys = this.keysListFormGroup.get('key').valueChanges\n      .pipe(\n        map((value) => value ? value : ''),\n        mergeMap(name => this.fetchKeys(name) ),\n        share()\n      );\n  }\n\n  ngAfterViewInit(): void {}\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    if (this.disabled) {\n      this.keysListFormGroup.disable({emitEvent: false});\n    } else {\n      this.keysListFormGroup.enable({emitEvent: false});\n    }\n  }\n\n  writeValue(value: Array<string> | null): void {\n    this.searchText = '';\n    if (value != null) {\n      this.modelValue = [...value];\n    } else {\n      this.modelValue = [];\n    }\n  }\n\n  onFocus() {\n    if (this.dirty) {\n      this.keysListFormGroup.get('key').updateValueAndValidity({onlySelf: true, emitEvent: true});\n      this.dirty = false;\n    }\n  }\n\n  addKey(key: string): void {\n    if (!this.modelValue || this.modelValue.indexOf(key) === -1) {\n      if (!this.modelValue) {\n        this.modelValue = [];\n      }\n      this.modelValue.push(key);\n      if (this.required) {\n        this.chipList.errorState = false;\n      }\n    }\n    this.propagateChange(this.modelValue);\n  }\n\n  add(event: MatChipInputEvent): void {\n   if (!this.matAutocomplete.isOpen) {\n      const value = (event.value || '').trim();\n      if (value) {\n        this.addKey(value);\n      }\n      this.clear('', document.activeElement === this.keyInput.nativeElement);\n   }\n  }\n\n  remove(key: string) {\n    const index = this.modelValue.indexOf(key);\n    if (index >= 0) {\n      this.modelValue.splice(index, 1);\n      if (!this.modelValue.length) {\n        if (this.required) {\n          this.chipList.errorState = true;\n        }\n      }\n      this.propagateChange(this.modelValue.length ? this.modelValue : null);\n    }\n  }\n\n  selected(event: MatAutocompleteSelectedEvent): void {\n    this.addKey(event.option.viewValue);\n    this.clear('');\n  }\n\n  displayKeyFn(key?: string): string | undefined {\n    return key ? key : undefined;\n  }\n\n  fetchKeys(searchText?: string): Observable<Array<string>> {\n    this.searchText = searchText;\n    return this.entityIdValue ? this.entityService.getEntityKeys(this.entityIdValue, searchText,\n      this.dataKeyType, {ignoreLoading: true}).pipe(\n      map((data) => data ? data : [])) : of([]);\n  }\n\n  clear(value: string = '', emitEvent = true) {\n    this.keyInput.nativeElement.value = value;\n    this.keysListFormGroup.get('key').patchValue(null, {emitEvent});\n    if (emitEvent) {\n      setTimeout(() => {\n        this.keyInput.nativeElement.blur();\n        this.keyInput.nativeElement.focus();\n      }, 0);\n    }\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<mat-form-field appearance=\"standard\" [formGroup]=\"keysListFormGroup\" class=\"mat-block\">\n  <mat-chip-list #chipList>\n    <mat-chip\n      *ngFor=\"let key of modelValue\"\n      [selectable]=\"!disabled\"\n      [removable]=\"!disabled\"\n      (removed)=\"remove(key)\">\n      {{key}}\n      <mat-icon matChipRemove *ngIf=\"!disabled\">close</mat-icon>\n    </mat-chip>\n    <input matInput type=\"text\" placeholder=\"{{ !disabled ? (keysText | translate) : '' }}\"\n           style=\"max-width: 200px;\"\n           #keyInput\n           formControlName=\"key\"\n           matAutocompleteOrigin\n           #origin=\"matAutocompleteOrigin\"\n           [matAutocompleteConnectedTo]=\"origin\"\n           (focusin)=\"onFocus()\"\n           [matAutocomplete]=\"keyAutocomplete\"\n           [matChipInputFor]=\"chipList\"\n           [matChipInputSeparatorKeyCodes]=\"separatorKeysCodes\"\n           matChipInputAddOnBlur\n           (matChipInputTokenEnd)=\"add($event)\">\n  </mat-chip-list>\n  <mat-autocomplete #keyAutocomplete=\"matAutocomplete\"\n                    class=\"tb-autocomplete\"\n                    (optionSelected)=\"selected($event)\"\n                    [displayWith]=\"displayKeyFn\">\n    <mat-option *ngFor=\"let key of filteredKeys | async\" [value]=\"key\">\n      <span [innerHTML]=\"key | highlight:searchText\"></span>\n    </mat-option>\n  </mat-autocomplete>\n</mat-form-field>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Action } from '@ngrx/store';\nimport { User } from '@shared/models/user.model';\nimport { AuthPayload } from '@core/auth/auth.models';\n\nexport enum AuthActionTypes {\n  AUTHENTICATED = '[Auth] Authenticated',\n  UNAUTHENTICATED = '[Auth] Unauthenticated',\n  LOAD_USER = '[Auth] Load User',\n  UPDATE_USER_DETAILS = '[Auth] Update User Details',\n  UPDATE_LAST_PUBLIC_DASHBOARD_ID = '[Auth] Update Last Public Dashboard Id'\n}\n\nexport class ActionAuthAuthenticated implements Action {\n  readonly type = AuthActionTypes.AUTHENTICATED;\n\n  constructor(readonly payload: AuthPayload) {}\n}\n\nexport class ActionAuthUnauthenticated implements Action {\n  readonly type = AuthActionTypes.UNAUTHENTICATED;\n}\n\nexport class ActionAuthLoadUser implements Action {\n  readonly type = AuthActionTypes.LOAD_USER;\n\n  constructor(readonly payload: { isUserLoaded: boolean }) {}\n}\n\nexport class ActionAuthUpdateUserDetails implements Action {\n  readonly type = AuthActionTypes.UPDATE_USER_DETAILS;\n\n  constructor(readonly payload: { userDetails: User }) {}\n}\n\nexport class ActionAuthUpdateLastPublicDashboardId implements Action {\n  readonly type = AuthActionTypes.UPDATE_LAST_PUBLIC_DASHBOARD_ID;\n\n  constructor(readonly payload: { lastPublicDashboardId: string }) {}\n}\n\nexport type AuthActions = ActionAuthAuthenticated | ActionAuthUnauthenticated |\n  ActionAuthLoadUser | ActionAuthUpdateUserDetails | ActionAuthUpdateLastPublicDashboardId;\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { ComponentFactoryResolver, ComponentRef, Directive, ElementRef, Input, ViewContainerRef } from '@angular/core';\nimport { MatSpinner } from '@angular/material/progress-spinner';\n\n@Directive({\n  selector: '[tb-circular-progress]'\n})\nexport class CircularProgressDirective {\n\n  showProgressValue = false;\n\n  children: JQuery<any>;\n\n  cssWidth: any;\n\n  @Input('tb-circular-progress')\n  set showProgress(showProgress: boolean) {\n    if (this.showProgressValue !== showProgress) {\n      const element = this.elementRef.nativeElement;\n      this.showProgressValue = showProgress;\n      this.spinnerRef.instance._elementRef.nativeElement.style.display = showProgress ? 'block' : 'none';\n      if (showProgress) {\n        this.cssWidth = $(element).prop('style').width;\n        if (!this.cssWidth) {\n          $(element).css('width', '');\n          const width = $(element).prop('offsetWidth');\n          $(element).css('width', width + 'px');\n        }\n        this.children = $(element).children();\n        $(element).empty();\n        $(element).append($(this.spinnerRef.instance._elementRef.nativeElement));\n      } else {\n        $(element).empty();\n        $(element).append(this.children);\n        if (this.cssWidth) {\n          $(element).css('width', this.cssWidth);\n        } else {\n          $(element).css('width', '');\n        }\n      }\n    }\n  }\n\n  spinnerRef: ComponentRef<MatSpinner>;\n\n  constructor(private elementRef: ElementRef,\n              private componentFactoryResolver: ComponentFactoryResolver,\n              private viewContainerRef: ViewContainerRef) {\n    this.createCircularProgress();\n  }\n\n  createCircularProgress() {\n    this.elementRef.nativeElement.style.position = 'relative';\n    const factory = this.componentFactoryResolver.resolveComponentFactory(MatSpinner);\n    this.spinnerRef = this.viewContainerRef.createComponent(factory, 0);\n    this.spinnerRef.instance.mode = 'indeterminate';\n    this.spinnerRef.instance.diameter = 20;\n    const el = this.spinnerRef.instance._elementRef.nativeElement;\n    el.style.margin = 'auto';\n    el.style.position = 'absolute';\n    el.style.left = '0';\n    el.style.right = '0';\n    el.style.top = '0';\n    el.style.bottom = '0';\n    el.style.display = 'none';\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';\nimport { MenuService } from '@core/services/menu.service';\nimport { MenuSection } from '@core/services/menu.models';\n\n@Component({\n  selector: 'tb-side-menu',\n  templateUrl: './side-menu.component.html',\n  styleUrls: ['./side-menu.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class SideMenuComponent implements OnInit {\n\n  menuSections$ = this.menuService.menuSections();\n\n  constructor(private menuService: MenuService) {\n  }\n\n  trackByMenuSection(index: number, section: MenuSection){\n    return section.id;\n  }\n\n  ngOnInit() {\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<ul fxFlex fxLayout=\"column\" fxLayoutAlign=\"start stretch\" class=\"tb-side-menu\">\n  <li *ngFor=\"let section of menuSections$ | async; trackBy: trackByMenuSection\" [ngSwitch]=\"section.type === 'link'\">\n    <tb-menu-link *ngSwitchCase=\"true\" [section]=\"section\"></tb-menu-link>\n    <tb-menu-toggle *ngSwitchCase=\"false\" [section]=\"section\"></tb-menu-toggle>\n  </li>\n</ul>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { ActivationEnd, Router } from '@angular/router';\nimport { Injectable } from '@angular/core';\nimport { select, Store } from '@ngrx/store';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { TranslateService } from '@ngx-translate/core';\nimport { merge } from 'rxjs';\nimport { distinctUntilChanged, filter, map, tap, withLatestFrom } from 'rxjs/operators';\n\nimport { SettingsActions, SettingsActionTypes, } from './settings.actions';\nimport { selectSettingsState } from './settings.selectors';\nimport { AppState } from '@app/core/core.state';\nimport { LocalStorageService } from '@app/core/local-storage/local-storage.service';\nimport { TitleService } from '@app/core/services/title.service';\nimport { updateUserLang } from '@app/core/settings/settings.utils';\nimport { AuthService } from '@core/auth/auth.service';\nimport { UtilsService } from '@core/services/utils.service';\nimport { getCurrentAuthUser } from '@core/auth/auth.selectors';\nimport { ActionAuthUpdateLastPublicDashboardId } from '../auth/auth.actions';\n\nexport const SETTINGS_KEY = 'SETTINGS';\n\n@Injectable()\nexport class SettingsEffects {\n  constructor(\n    private actions$: Actions<SettingsActions>,\n    private store: Store<AppState>,\n    private authService: AuthService,\n    private utils: UtilsService,\n    private router: Router,\n    private localStorageService: LocalStorageService,\n    private titleService: TitleService,\n    private translate: TranslateService\n  ) {\n  }\n\n  @Effect({dispatch: false})\n  persistSettings = this.actions$.pipe(\n    ofType(\n      SettingsActionTypes.CHANGE_LANGUAGE,\n    ),\n    withLatestFrom(this.store.pipe(select(selectSettingsState))),\n    tap(([action, settings]) =>\n      this.localStorageService.setItem(SETTINGS_KEY, settings)\n    )\n  );\n\n  @Effect({dispatch: false})\n  setTranslateServiceLanguage = this.store.pipe(\n    select(selectSettingsState),\n    map(settings => settings.userLang),\n    distinctUntilChanged(),\n    tap(userLang => updateUserLang(this.translate, userLang))\n  );\n\n  @Effect({dispatch: false})\n  setTitle = merge(\n    this.actions$.pipe(ofType(SettingsActionTypes.CHANGE_LANGUAGE)),\n    this.router.events.pipe(filter(event => event instanceof ActivationEnd))\n  ).pipe(\n    tap(() => {\n      this.titleService.setTitle(\n        this.router.routerState.snapshot.root,\n        this.translate\n      );\n    })\n  );\n\n  @Effect({dispatch: false})\n  setPublicId = merge(\n    this.router.events.pipe(filter(event => event instanceof ActivationEnd))\n  ).pipe(\n    tap((event) => {\n      const authUser = getCurrentAuthUser(this.store);\n      const snapshot = (event as ActivationEnd).snapshot;\n      if (authUser && authUser.isPublic && snapshot.url && snapshot.url.length\n          && snapshot.url[0].path === 'dashboard') {\n        this.utils.updateQueryParam('publicId', authUser.sub);\n        this.store.dispatch(new ActionAuthUpdateLastPublicDashboardId(\n          { lastPublicDashboardId: snapshot.params.dashboardId}));\n      }\n    })\n  );\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Pipe, PipeTransform } from '@angular/core';\nimport { DisplayColumn } from '@home/components/widget/lib/table-widget.models';\n\n@Pipe({ name: 'selectableColumns' })\nexport class SelectableColumnsPipe implements PipeTransform {\n  transform(allColumns: DisplayColumn[]): DisplayColumn[] {\n    return allColumns.filter(column => column.selectable);\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport {\n  Component,\n  forwardRef,\n  Inject,\n  Injector,\n  Input,\n  OnInit,\n  StaticProvider,\n  ViewChild,\n  ViewContainerRef\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { Observable, of } from 'rxjs';\nimport { PageLink } from '@shared/models/page/page-link';\nimport { map, share } from 'rxjs/operators';\nimport { emptyPageData, PageData } from '@shared/models/page/page-data';\nimport { DashboardInfo } from '@app/shared/models/dashboard.models';\nimport { DashboardService } from '@core/http/dashboard.service';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@app/core/core.state';\nimport { getCurrentAuthUser } from '@app/core/auth/auth.selectors';\nimport { Authority } from '@shared/models/authority.enum';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { TooltipPosition } from '@angular/material/tooltip';\nimport { CdkOverlayOrigin, ConnectedPosition, Overlay, OverlayConfig, OverlayRef } from '@angular/cdk/overlay';\nimport { BreakpointObserver } from '@angular/cdk/layout';\nimport { DOCUMENT } from '@angular/common';\nimport { WINDOW } from '@core/services/window.service';\nimport { ComponentPortal } from '@angular/cdk/portal';\nimport {\n  DASHBOARD_SELECT_PANEL_DATA,\n  DashboardSelectPanelComponent,\n  DashboardSelectPanelData\n} from './dashboard-select-panel.component';\nimport { NULL_UUID } from '@shared/models/id/has-uuid';\n\n// @dynamic\n@Component({\n  selector: 'tb-dashboard-select',\n  templateUrl: './dashboard-select.component.html',\n  styleUrls: ['./dashboard-select.component.scss'],\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => DashboardSelectComponent),\n    multi: true\n  }]\n})\nexport class DashboardSelectComponent implements ControlValueAccessor, OnInit {\n\n  @Input()\n  dashboardsScope: 'customer' | 'tenant';\n\n  @Input()\n  customerId: string;\n\n  @Input()\n  tooltipPosition: TooltipPosition = 'above';\n\n  private requiredValue: boolean;\n  get required(): boolean {\n    return this.requiredValue;\n  }\n  @Input()\n  set required(value: boolean) {\n    this.requiredValue = coerceBooleanProperty(value);\n  }\n\n  @Input()\n  disabled: boolean;\n\n  dashboards$: Observable<Array<DashboardInfo>>;\n\n  dashboardId: string | null;\n\n  @ViewChild('dashboardSelectPanelOrigin') dashboardSelectPanelOrigin: CdkOverlayOrigin;\n\n  private propagateChange = (v: any) => { };\n\n  constructor(private store: Store<AppState>,\n              private dashboardService: DashboardService,\n              private overlay: Overlay,\n              private breakpointObserver: BreakpointObserver,\n              private viewContainerRef: ViewContainerRef,\n              @Inject(DOCUMENT) private document: Document,\n              @Inject(WINDOW) private window: Window) {\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  ngOnInit() {\n\n    const pageLink = new PageLink(100);\n\n    this.dashboards$ = this.getDashboards(pageLink).pipe(\n      map((pageData) => pageData.data),\n      share()\n    );\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n  }\n\n  writeValue(value: string | null): void {\n    this.dashboardId = value;\n  }\n\n  dashboardIdChanged() {\n    this.updateView();\n  }\n\n  openDashboardSelectPanel() {\n    if (this.disabled) {\n      return;\n    }\n    const panelHeight = this.breakpointObserver.isMatched('min-height: 350px') ? 250 : 150;\n    const panelWidth = 300;\n    const position = this.overlay.position();\n    const config = new OverlayConfig({\n      panelClass: 'tb-dashboard-select-panel',\n      backdropClass: 'cdk-overlay-transparent-backdrop',\n      hasBackdrop: true,\n    });\n    const el = this.dashboardSelectPanelOrigin.elementRef.nativeElement;\n    const offset = el.getBoundingClientRect();\n    const scrollTop = this.window.pageYOffset || this.document.documentElement.scrollTop || this.document.body.scrollTop || 0;\n    const scrollLeft = this.window.pageXOffset || this.document.documentElement.scrollLeft || this.document.body.scrollLeft || 0;\n    const bottomY = offset.bottom - scrollTop;\n    const leftX = offset.left - scrollLeft;\n    let originX;\n    let originY;\n    let overlayX;\n    let overlayY;\n    const wHeight = this.document.documentElement.clientHeight;\n    const wWidth = this.document.documentElement.clientWidth;\n    if (bottomY + panelHeight > wHeight) {\n      originY = 'top';\n      overlayY = 'bottom';\n    } else {\n      originY = 'bottom';\n      overlayY = 'top';\n    }\n    if (leftX + panelWidth > wWidth) {\n      originX = 'end';\n      overlayX = 'end';\n    } else {\n      originX = 'start';\n      overlayX = 'start';\n    }\n    const connectedPosition: ConnectedPosition = {\n      originX,\n      originY,\n      overlayX,\n      overlayY\n    };\n    config.positionStrategy = position.flexibleConnectedTo(this.dashboardSelectPanelOrigin.elementRef)\n      .withPositions([connectedPosition]);\n    const overlayRef = this.overlay.create(config);\n    overlayRef.backdropClick().subscribe(() => {\n      overlayRef.dispose();\n    });\n\n    const injector = this._createDashboardSelectPanelInjector(\n      overlayRef,\n      {\n        dashboards$: this.dashboards$,\n        dashboardId: this.dashboardId,\n        onDashboardSelected: (dashboardId) => {\n          overlayRef.dispose();\n          this.dashboardId = dashboardId;\n          this.updateView();\n        }\n      }\n    );\n    overlayRef.attach(new ComponentPortal(DashboardSelectPanelComponent, this.viewContainerRef, injector));\n  }\n\n  private _createDashboardSelectPanelInjector(overlayRef: OverlayRef, data: DashboardSelectPanelData): Injector {\n    const providers: StaticProvider[] = [\n      {provide: DASHBOARD_SELECT_PANEL_DATA, useValue: data},\n      {provide: OverlayRef, useValue: overlayRef}\n    ];\n    return Injector.create({parent: this.viewContainerRef.injector, providers});\n  }\n\n  private updateView() {\n    this.propagateChange(this.dashboardId);\n  }\n\n  private getDashboards(pageLink: PageLink): Observable<PageData<DashboardInfo>> {\n    let dashboardsObservable: Observable<PageData<DashboardInfo>>;\n    const authUser = getCurrentAuthUser(this.store);\n    if (this.dashboardsScope === 'customer' || authUser.authority === Authority.CUSTOMER_USER) {\n      if (this.customerId && this.customerId !== NULL_UUID) {\n        dashboardsObservable = this.dashboardService.getCustomerDashboards(this.customerId, pageLink,\n          {ignoreLoading: true});\n      } else {\n        dashboardsObservable = of(emptyPageData());\n      }\n    } else {\n      dashboardsObservable = this.dashboardService.getTenantDashboards(pageLink, {ignoreLoading: true});\n    }\n    return dashboardsObservable;\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<mat-select fxHide.lt-lg\n            [required]=\"required\"\n            [disabled]=\"disabled\"\n            [(ngModel)]=\"dashboardId\"\n            (ngModelChange)=\"dashboardIdChanged()\">\n  <mat-option *ngFor=\"let dashboard of dashboards$ | async\" [value]=\"dashboard.id.id\">\n    {{dashboard.title}}\n  </mat-option>\n</mat-select>\n<section fxHide.gt-md class=\"tb-dashboard-select\">\n  <button mat-button mat-icon-button\n          cdkOverlayOrigin #dashboardSelectPanelOrigin=\"cdkOverlayOrigin\"\n          (click)=\"openDashboardSelectPanel()\"\n          matTooltip=\"{{ 'dashboard.select-dashboard' | translate }}\"\n          [matTooltipPosition]=\"tooltipPosition\">\n    <mat-icon>dashboards</mat-icon>\n  </button>\n</section>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { AuthGuard } from '@core/guards/auth.guard';\nimport { StoreModule } from '@ngrx/store';\n\nconst routes: Routes = [\n  { path: '',\n    data: {\n      title: 'dashboard.dashboard',\n      breadcrumb: {\n        skip: true\n      }\n    },\n    canActivate: [AuthGuard],\n    canActivateChild: [AuthGuard],\n    loadChildren: () => import('./dashboard-pages.module').then(m => m.DashboardPagesModule)\n  }\n];\n\n@NgModule({\n  imports: [\n    StoreModule,\n    RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class DashboardRoutingModule { }\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nconst routes: Routes = [\n  { path: '',\n    redirectTo: 'home',\n    pathMatch: 'full',\n    data: {\n      breadcrumb: {\n        skip: true\n      }\n    }\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { map } from 'rxjs/operators';\n\nimport { NotificationActions, NotificationActionTypes } from '@app/core/notification/notification.actions';\nimport { NotificationService } from '@app/core/services/notification.service';\n\n@Injectable()\nexport class NotificationEffects {\n  constructor(\n    private actions$: Actions<NotificationActions>,\n    private notificationService: NotificationService\n  ) {\n  }\n\n  @Effect({dispatch: false})\n  dispatchNotification = this.actions$.pipe(\n    ofType(\n      NotificationActionTypes.SHOW_NOTIFICATION,\n    ),\n    map(({ notification }) => {\n      this.notificationService.dispatchNotification(notification);\n    })\n  );\n\n  @Effect({dispatch: false})\n  hideNotification = this.actions$.pipe(\n    ofType(\n      NotificationActionTypes.HIDE_NOTIFICATION,\n    ),\n    map(({ hideNotification }) => {\n      this.notificationService.hideNotification(hideNotification);\n    })\n  );\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport {\n  ComponentFactory,\n  ComponentFactoryResolver, ElementRef, Inject,\n  Injectable, Injector,\n  Renderer2,\n  Type,\n  ViewContainerRef\n} from '@angular/core';\nimport { PopoverPlacement, PopoverWithTrigger } from '@shared/components/popover.models';\nimport { TbPopoverComponent } from '@shared/components/popover.component';\nimport { ComponentType } from '@angular/cdk/portal';\nimport { HELP_MARKDOWN_COMPONENT_TOKEN } from '@shared/components/tokens';\n\n@Injectable()\nexport class TbPopoverService {\n\n  private popoverWithTriggers: PopoverWithTrigger[] = [];\n\n  componentFactory: ComponentFactory<TbPopoverComponent> = this.resolver.resolveComponentFactory(TbPopoverComponent);\n\n  constructor(private resolver: ComponentFactoryResolver,\n              @Inject(HELP_MARKDOWN_COMPONENT_TOKEN) private helpMarkdownComponent: ComponentType<any>) {\n  }\n\n  hasPopover(trigger: Element): boolean {\n    const res = this.findPopoverByTrigger(trigger);\n    return res !== null;\n  }\n\n  hidePopover(trigger: Element): boolean {\n    const component: TbPopoverComponent = this.findPopoverByTrigger(trigger);\n    if (component && component.tbVisible) {\n      component.hide();\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  displayPopover<T>(trigger: Element, renderer: Renderer2, hostView: ViewContainerRef,\n                    componentType: Type<T>, preferredPlacement: PopoverPlacement = 'top', hideOnClickOutside = true,\n                    injector?: Injector, context?: any, overlayStyle: any = {}, popoverStyle: any = {}, style?: any): TbPopoverComponent {\n    const componentRef = hostView.createComponent(this.componentFactory);\n    const component = componentRef.instance;\n    this.popoverWithTriggers.push({\n      trigger,\n      popoverComponent: component\n    });\n    renderer.removeChild(\n      renderer.parentNode(trigger),\n      componentRef.location.nativeElement\n    );\n    const originElementRef = new ElementRef(trigger);\n    component.setOverlayOrigin({ elementRef: originElementRef });\n    component.tbPlacement = preferredPlacement;\n    component.tbComponentFactory = this.resolver.resolveComponentFactory(componentType);\n    component.tbComponentInjector = injector;\n    component.tbComponentContext = context;\n    component.tbOverlayStyle = overlayStyle;\n    component.tbPopoverInnerStyle = popoverStyle;\n    component.tbComponentStyle = style;\n    component.tbHideOnClickOutside = hideOnClickOutside;\n    component.tbVisibleChange.subscribe((visible: boolean) => {\n      if (!visible) {\n        component.tbAnimationDone.subscribe(() => {\n          componentRef.destroy();\n        });\n      }\n    });\n    component.tbDestroy.subscribe(() => {\n      this.removePopoverByComponent(component);\n    });\n    component.show();\n    return component;\n  }\n\n  toggleHelpPopover(trigger: Element, renderer: Renderer2, hostView: ViewContainerRef, helpId = '',\n                    helpContent = '',\n                    visibleFn: (visible: boolean) => void = () => {},\n                    readyFn: (ready: boolean) => void = () => {},\n                    preferredPlacement: PopoverPlacement = 'bottom',\n                    overlayStyle: any = {}, helpStyle: any = {}) {\n    if (this.hasPopover(trigger)) {\n      this.hidePopover(trigger);\n    } else {\n      readyFn(false);\n      const injector = Injector.create({\n        parent: hostView.injector, providers: []\n      });\n      const componentRef = hostView.createComponent(this.componentFactory);\n      const component = componentRef.instance;\n      this.popoverWithTriggers.push({\n        trigger,\n        popoverComponent: component\n      });\n      renderer.removeChild(\n        renderer.parentNode(trigger),\n        componentRef.location.nativeElement\n      );\n      const originElementRef = new ElementRef(trigger);\n      component.tbAnimationState = 'void';\n      component.tbOverlayStyle = {...overlayStyle, opacity: '0' };\n      component.setOverlayOrigin({ elementRef: originElementRef });\n      component.tbPlacement = preferredPlacement;\n      component.tbComponentFactory = this.resolver.resolveComponentFactory(this.helpMarkdownComponent);\n      component.tbComponentInjector = injector;\n      component.tbComponentContext = {\n        helpId,\n        helpContent,\n        style: helpStyle,\n        visible: true\n      };\n      component.tbHideOnClickOutside = true;\n      component.tbVisibleChange.subscribe((visible: boolean) => {\n        if (!visible) {\n          visibleFn(false);\n          component.tbAnimationDone.subscribe(() => {\n            componentRef.destroy();\n          });\n        }\n      });\n      component.tbDestroy.subscribe(() => {\n        this.removePopoverByComponent(component);\n      });\n      const showHelpMarkdownComponent = () => {\n        component.tbOverlayStyle = {...component.tbOverlayStyle, opacity: '1' };\n        component.tbAnimationState = 'active';\n        component.updatePosition();\n        readyFn(true);\n        setTimeout(() => {\n          component.updatePosition();\n        });\n      };\n      const setupHelpMarkdownComponent = (helpMarkdownComponent: any) => {\n        if (helpMarkdownComponent.isMarkdownReady) {\n          showHelpMarkdownComponent();\n        } else {\n          helpMarkdownComponent.markdownReady.subscribe(() => {\n            showHelpMarkdownComponent();\n          });\n        }\n      };\n      if (component.tbComponentRef) {\n        setupHelpMarkdownComponent(component.tbComponentRef.instance);\n      } else {\n        component.tbComponentChange.subscribe((helpMarkdownComponentRef) => {\n          setupHelpMarkdownComponent(helpMarkdownComponentRef.instance);\n        });\n      }\n      component.show();\n      visibleFn(true);\n    }\n  }\n\n  private findPopoverByTrigger(trigger: Element): TbPopoverComponent | null {\n    const res = this.popoverWithTriggers.find(val => this.elementsAreEqualOrDescendant(trigger, val.trigger));\n    if (res) {\n      return res.popoverComponent;\n    } else {\n      return null;\n    }\n  }\n\n  private removePopoverByComponent(component: TbPopoverComponent): void {\n    const index = this.popoverWithTriggers.findIndex(val => val.popoverComponent === component);\n    if (index > -1) {\n      this.popoverWithTriggers.splice(index, 1);\n    }\n  }\n\n  private elementsAreEqualOrDescendant(element1: Element, element2: Element): boolean {\n    return element1 === element2 || element1.contains(element2) || element2.contains(element1);\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { AfterViewInit, Component, ElementRef, forwardRef, Input, OnInit, ViewChild } from '@angular/core';\nimport { ControlValueAccessor, FormBuilder, FormGroup, NG_VALUE_ACCESSOR, Validators } from '@angular/forms';\nimport { Observable, of } from 'rxjs';\nimport { filter, map, mergeMap, share, tap } from 'rxjs/operators';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@app/core/core.state';\nimport { TranslateService } from '@ngx-translate/core';\nimport { AliasEntityType, EntityType, entityTypeTranslations } from '@shared/models/entity-type.models';\nimport { EntityService } from '@core/http/entity.service';\nimport { MatAutocomplete } from '@angular/material/autocomplete';\nimport { MatChipList } from '@angular/material/chips';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\n\ninterface EntityTypeInfo {\n  name: string;\n  value: EntityType;\n}\n\n@Component({\n  selector: 'tb-entity-type-list',\n  templateUrl: './entity-type-list.component.html',\n  styleUrls: [],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => EntityTypeListComponent),\n      multi: true\n    }\n  ]\n})\nexport class EntityTypeListComponent implements ControlValueAccessor, OnInit, AfterViewInit {\n\n  entityTypeListFormGroup: FormGroup;\n\n  modelValue: Array<EntityType> | null;\n\n  private requiredValue: boolean;\n  get required(): boolean {\n    return this.requiredValue;\n  }\n  @Input()\n  set required(value: boolean) {\n    const newVal = coerceBooleanProperty(value);\n    if (this.requiredValue !== newVal) {\n      this.requiredValue = newVal;\n      this.updateValidators();\n    }\n  }\n\n  @Input()\n  disabled: boolean;\n\n  @Input()\n  allowedEntityTypes: Array<EntityType | AliasEntityType>;\n\n  @Input()\n  ignoreAuthorityFilter: boolean;\n\n  @ViewChild('entityTypeInput') entityTypeInput: ElementRef<HTMLInputElement>;\n  @ViewChild('entityTypeAutocomplete') entityTypeAutocomplete: MatAutocomplete;\n  @ViewChild('chipList', {static: true}) chipList: MatChipList;\n\n  allEntityTypeList: Array<EntityTypeInfo> = [];\n  entityTypeList: Array<EntityTypeInfo> = [];\n  filteredEntityTypeList: Observable<Array<EntityTypeInfo>>;\n\n  placeholder: string;\n  secondaryPlaceholder: string;\n\n  searchText = '';\n\n  private dirty = false;\n\n  private propagateChange = (v: any) => { };\n\n  constructor(private store: Store<AppState>,\n              public translate: TranslateService,\n              private entityService: EntityService,\n              private fb: FormBuilder) {\n    this.entityTypeListFormGroup = this.fb.group({\n      entityTypeList: [this.entityTypeList, this.required ? [Validators.required] : []],\n      entityType: [null]\n    });\n  }\n\n  updateValidators() {\n    this.entityTypeListFormGroup.get('entityTypeList').setValidators(this.required ? [Validators.required] : []);\n    this.entityTypeListFormGroup.get('entityTypeList').updateValueAndValidity();\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  ngOnInit() {\n\n    this.placeholder = this.required ? this.translate.instant('entity.enter-entity-type')\n      : this.translate.instant('entity.any-entity');\n    this.secondaryPlaceholder = '+' + this.translate.instant('entity.entity-type');\n\n    let entityTypes: Array<EntityType | AliasEntityType>;\n    if (this.ignoreAuthorityFilter && this.allowedEntityTypes\n      && this.allowedEntityTypes.length) {\n      entityTypes = [];\n      this.allowedEntityTypes.forEach((entityTypeValue) => {\n        entityTypes.push(entityTypeValue);\n      });\n    } else {\n      entityTypes = this.entityService.prepareAllowedEntityTypesList(this.allowedEntityTypes) as Array<EntityType>;\n    }\n\n    entityTypes.forEach((entityType) => {\n      this.allEntityTypeList.push({\n        name: this.translate.instant(entityTypeTranslations.get(entityType).type),\n        value: entityType as EntityType\n      });\n    });\n\n    this.filteredEntityTypeList = this.entityTypeListFormGroup.get('entityType').valueChanges\n      .pipe(\n        // startWith<string | BaseData<EntityId>>(''),\n        tap((value) => {\n          if (value && typeof value !== 'string') {\n            this.add(value);\n          } else if (value === null) {\n            this.clear(this.entityTypeInput.nativeElement.value);\n          }\n        }),\n        filter((value) => typeof value === 'string'),\n        map((value) => value ? (typeof value === 'string' ? value : value.name) : ''),\n        mergeMap(name => this.fetchEntityTypes(name) ),\n        share()\n      );\n  }\n\n  ngAfterViewInit(): void {\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    if (isDisabled) {\n      this.entityTypeListFormGroup.disable({emitEvent: false});\n    } else {\n      this.entityTypeListFormGroup.enable({emitEvent: false});\n    }\n  }\n\n  writeValue(value: Array<EntityType> | null): void {\n    this.searchText = '';\n    if (value != null && value.length > 0) {\n      this.modelValue = [...value];\n      this.entityTypeList = [];\n      value.forEach((entityType) => {\n        this.entityTypeList.push({\n          name: entityTypeTranslations.has(entityType) ? this.translate.instant(entityTypeTranslations.get(entityType).type) : 'Unknown',\n          value: entityType\n        });\n      });\n      this.entityTypeListFormGroup.get('entityTypeList').setValue(this.entityTypeList);\n    } else {\n      this.entityTypeList = [];\n      this.entityTypeListFormGroup.get('entityTypeList').setValue(this.entityTypeList);\n      this.modelValue = null;\n    }\n    this.dirty = true;\n  }\n\n  add(entityType: EntityTypeInfo): void {\n    if (!this.modelValue || this.modelValue.indexOf(entityType.value) === -1) {\n      if (!this.modelValue) {\n        this.modelValue = [];\n      }\n      this.modelValue.push(entityType.value);\n      this.entityTypeList.push(entityType);\n      this.entityTypeListFormGroup.get('entityTypeList').setValue(this.entityTypeList);\n    }\n    this.propagateChange(this.modelValue);\n    this.clear();\n  }\n\n  remove(entityType: EntityTypeInfo) {\n    const index = this.entityTypeList.indexOf(entityType);\n    if (index >= 0) {\n      this.entityTypeList.splice(index, 1);\n      this.entityTypeListFormGroup.get('entityTypeList').setValue(this.entityTypeList);\n      this.modelValue.splice(index, 1);\n      if (!this.modelValue.length) {\n        this.modelValue = null;\n      }\n      this.propagateChange(this.modelValue);\n      this.clear();\n    }\n  }\n\n  displayEntityTypeFn(entityType?: EntityTypeInfo): string | undefined {\n    return entityType ? entityType.name : undefined;\n  }\n\n  fetchEntityTypes(searchText?: string): Observable<Array<EntityTypeInfo>> {\n    this.searchText = searchText;\n    let result = this.allEntityTypeList;\n    if (searchText && searchText.length) {\n      result = this.allEntityTypeList.filter((entityTypeInfo) => entityTypeInfo.name.toLowerCase().includes(searchText.toLowerCase()));\n    }\n    return of(result);\n  }\n\n  onFocus() {\n    if (this.dirty) {\n      this.entityTypeListFormGroup.get('entityType').updateValueAndValidity({onlySelf: true, emitEvent: true});\n      this.dirty = false;\n    }\n  }\n\n  clear(value: string = '') {\n    this.entityTypeInput.nativeElement.value = value;\n    this.entityTypeListFormGroup.get('entityType').patchValue(value, {emitEvent: true});\n    setTimeout(() => {\n      this.entityTypeInput.nativeElement.blur();\n      this.entityTypeInput.nativeElement.focus();\n    }, 0);\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<mat-form-field appearance=\"standard\" [formGroup]=\"entityTypeListFormGroup\" class=\"mat-block\">\n  <mat-chip-list #chipList formControlName=\"entityTypeList\">\n    <mat-chip\n      *ngFor=\"let entityType of entityTypeList\"\n      [selectable]=\"!disabled\"\n      [removable]=\"!disabled\"\n      (removed)=\"remove(entityType)\">\n      {{entityType.name}}\n      <mat-icon matChipRemove *ngIf=\"!disabled\">close</mat-icon>\n    </mat-chip>\n    <input matInput type=\"text\" placeholder=\"{{ !disabled ? ((!entityTypeList || !entityTypeList.length) ? placeholder : secondaryPlaceholder) : '' }}\"\n           style=\"max-width: 200px;\"\n           #entityTypeInput\n           (focusin)=\"onFocus()\"\n           formControlName=\"entityType\"\n           matAutocompleteOrigin\n           #origin=\"matAutocompleteOrigin\"\n           [matAutocompleteConnectedTo]=\"origin\"\n           [matAutocomplete]=\"entityTypeAutocomplete\"\n           [matChipInputFor]=\"chipList\">\n  </mat-chip-list>\n  <mat-autocomplete #entityTypeAutocomplete=\"matAutocomplete\"\n                    class=\"tb-autocomplete\"\n                    [displayWith]=\"displayEntityTypeFn\">\n    <mat-option *ngFor=\"let entityType of filteredEntityTypeList | async\" [value]=\"entityType\">\n      <span [innerHTML]=\"entityType.name | highlight:searchText\"></span>\n    </mat-option>\n    <mat-option *ngIf=\"!(filteredEntityTypeList | async)?.length\" [value]=\"null\">\n      <span>\n          {{ translate.get('entity.no-entity-types-matching', {entityType: searchText}) | async }}\n      </span>\n    </mat-option>\n  </mat-autocomplete>\n  <mat-error *ngIf=\"entityTypeListFormGroup.get('entityTypeList').hasError('required')\">\n    {{ 'entity.entity-type-list-empty' | translate }}\n  </mat-error>\n</mat-form-field>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport {\n  Component,\n  EventEmitter,\n  Input, OnChanges,\n  OnDestroy, OnInit,\n  Output, SimpleChanges\n} from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\nimport { share } from 'rxjs/operators';\nimport { HelpService } from '@core/services/help.service';\n\n@Component({\n  selector: 'tb-help-markdown',\n  templateUrl: './help-markdown.component.html',\n  styleUrls: ['./help-markdown.component.scss']\n})\nexport class HelpMarkdownComponent implements OnDestroy, OnInit, OnChanges {\n\n  @Input() helpId: string;\n\n  @Input() helpContent: string;\n\n  @Input() visible: boolean;\n\n  @Input() style: { [klass: string]: any } = {};\n\n  @Output() markdownReady = new EventEmitter<void>();\n\n  markdownText = new BehaviorSubject<string>(null);\n\n  markdownText$ = this.markdownText.pipe(\n    share()\n  );\n\n  private loadHelpPending = false;\n\n  constructor(private help: HelpService) {}\n\n  ngOnInit(): void {\n    this.loadHelpWhenVisible();\n  }\n\n  ngOnDestroy(): void {\n    this.markdownText.complete();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    for (const propName of Object.keys(changes)) {\n      const change = changes[propName];\n      if (!change.firstChange && change.currentValue !== change.previousValue) {\n        if (propName === 'visible') {\n          if (this.loadHelpPending) {\n            this.loadHelpPending = false;\n            this.loadHelp();\n          }\n        }\n        if (propName === 'helpId' || propName === 'helpContent') {\n          this.markdownText.next(null);\n          this.loadHelpWhenVisible();\n        }\n      }\n    }\n  }\n\n  private loadHelpWhenVisible() {\n    if (this.visible) {\n      this.loadHelp();\n    } else {\n      this.loadHelpPending = true;\n    }\n  }\n\n  private loadHelp() {\n    if (this.helpId) {\n      this.help.getHelpContent(this.helpId).subscribe((content) => {\n        this.markdownText.next(content);\n      });\n    } else if (this.helpContent) {\n      this.markdownText.next(this.helpContent);\n    }\n  }\n\n  onMarkdownReady() {\n    this.markdownReady.next();\n  }\n\n  markdownClick($event: MouseEvent) {\n  }\n\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<tb-markdown [style]=\"style\" [data]=\"markdownText$ | async\" lineNumbers (ready)=\"onMarkdownReady()\" markdownClass=\"tb-help-markdown\" (click)=\"markdownClick($event)\"></tb-markdown>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\n\nimport { isPlatformBrowser } from '@angular/common';\nimport { ClassProvider, FactoryProvider, Injectable, InjectionToken, PLATFORM_ID } from '@angular/core';\n\n/* Create a new injection token for injecting the window into a component. */\nexport const WINDOW = new InjectionToken('WindowToken');\n\n/* Define abstract class for obtaining reference to the global window object. */\nexport abstract class WindowRef {\n\n  get nativeWindow(): Window | object {\n    throw new Error('Not implemented.');\n  }\n\n}\n\n/* Define class that implements the abstract class and returns the native window object. */\n@Injectable()\nexport class BrowserWindowRef extends WindowRef {\n\n  constructor() {\n    super();\n  }\n\n  get nativeWindow(): Window | object {\n    return window;\n  }\n\n}\n\n/* Create an factory function that returns the native window object. */\nexport function windowFactory(browserWindowRef: BrowserWindowRef, platformId: object): Window | object {\n  if (isPlatformBrowser(platformId)) {\n    return browserWindowRef.nativeWindow;\n  }\n  return new Object();\n}\n\n/* Create a injectable provider for the WindowRef token that uses the BrowserWindowRef class. */\nexport const browserWindowProvider: ClassProvider = {\n  provide: WindowRef,\n  useClass: BrowserWindowRef\n};\n\n/* Create an injectable provider that uses the windowFactory function for returning the native window object. */\nexport const windowProvider: FactoryProvider = {\n  provide: WINDOW,\n  useFactory: windowFactory,\n  deps: [ WindowRef, PLATFORM_ID ]\n};\n\n/* Create an array of providers. */\nexport const WINDOW_PROVIDERS = [\n  browserWindowProvider,\n  windowProvider\n];\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Action } from '@ngrx/store';\nimport { HideNotification, NotificationMessage } from '@app/core/notification/notification.models';\n\nexport enum NotificationActionTypes {\n  SHOW_NOTIFICATION = '[Notification] Show',\n  HIDE_NOTIFICATION = '[Notification] Hide'\n}\n\nexport class ActionNotificationShow implements Action {\n  readonly type = NotificationActionTypes.SHOW_NOTIFICATION;\n\n  constructor(readonly notification: NotificationMessage ) {}\n}\n\nexport class ActionNotificationHide implements Action {\n  readonly type = NotificationActionTypes.HIDE_NOTIFICATION;\n\n  constructor(readonly hideNotification: HideNotification ) {}\n}\n\nexport type NotificationActions =\n  | ActionNotificationShow | ActionNotificationHide;\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { HttpErrorResponse, HttpEvent, HttpHandler, HttpInterceptor, HttpRequest } from '@angular/common/http';\nimport { Observable } from 'rxjs/internal/Observable';\nimport { Inject, Injectable } from '@angular/core';\nimport { AuthService } from '@core/auth/auth.service';\nimport { Constants } from '@shared/models/constants';\nimport { InterceptorHttpParams } from './interceptor-http-params';\nimport { catchError, delay, finalize, mergeMap, switchMap } from 'rxjs/operators';\nimport { of, throwError } from 'rxjs';\nimport { InterceptorConfig } from './interceptor-config';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { ActionLoadFinish, ActionLoadStart } from './load.actions';\nimport { ActionNotificationShow } from '@app/core/notification/notification.actions';\nimport { DialogService } from '@core/services/dialog.service';\nimport { TranslateService } from '@ngx-translate/core';\n\nlet tmpHeaders = {};\n\n@Injectable()\nexport class GlobalHttpInterceptor implements HttpInterceptor {\n\n  private AUTH_SCHEME = 'Bearer ';\n  private AUTH_HEADER_NAME = 'X-Authorization';\n\n  private internalUrlPrefixes = [\n    '/api/auth/token',\n    '/api/rpc'\n  ];\n\n  private activeRequests = 0;\n\n  constructor(@Inject(Store) private store: Store<AppState>,\n              @Inject(DialogService) private dialogService: DialogService,\n              @Inject(TranslateService) private translate: TranslateService,\n              @Inject(AuthService) private authService: AuthService) {\n  }\n\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    if (req.url.startsWith('/api/')) {\n      const config = this.getInterceptorConfig(req);\n      this.updateLoadingState(config, true);\n      let observable$: Observable<HttpEvent<any>>;\n      if (this.isTokenBasedAuthEntryPoint(req.url)) {\n        if (!AuthService.getJwtToken() && !this.authService.refreshTokenPending()) {\n          observable$ = this.handleResponseError(req, next, new HttpErrorResponse({error: {message: 'Unauthorized!'}, status: 401}));\n        } else if (!AuthService.isJwtTokenValid()) {\n          observable$ = this.handleResponseError(req, next, new HttpErrorResponse({error: {refreshTokenPending: true}}));\n        } else {\n          observable$ = this.jwtIntercept(req, next);\n        }\n      } else {\n        observable$ = this.handleRequest(req, next);\n      }\n      return observable$.pipe(\n        finalize(() => {\n          if (req.url.startsWith('/api/')) {\n            this.updateLoadingState(config, false);\n          }\n        })\n      );\n    } else {\n      return next.handle(req);\n    }\n  }\n\n  private jwtIntercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    const newReq = this.updateAuthorizationHeader(req);\n    if (newReq) {\n      return this.handleRequest(newReq, next);\n    } else {\n      return throwError(new Error('Could not get JWT token from store.'));\n    }\n  }\n\n  private handleRequest(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    return next.handle(req).pipe(\n      catchError((err) => {\n        const errorResponse = err as HttpErrorResponse;\n        return this.handleResponseError(req, next, errorResponse);\n      }));\n  }\n\n  private handleResponseError(req: HttpRequest<any>, next: HttpHandler, errorResponse: HttpErrorResponse): Observable<HttpEvent<any>> {\n    const config = this.getInterceptorConfig(req);\n    let unhandled = false;\n    const ignoreErrors = config.ignoreErrors;\n    const resendRequest = config.resendRequest;\n    const errorCode = errorResponse.error ? errorResponse.error.errorCode : null;\n    if (errorResponse.error && errorResponse.error.refreshTokenPending || errorResponse.status === 401) {\n      if (errorResponse.error && errorResponse.error.refreshTokenPending ||\n          errorCode && errorCode === Constants.serverErrorCode.jwtTokenExpired) {\n          return this.refreshTokenAndRetry(req, next);\n      } else if (errorCode !== Constants.serverErrorCode.credentialsExpired) {\n        unhandled = true;\n      }\n    } else if (errorResponse.status === 429) {\n      if (resendRequest) {\n        return this.retryRequest(req, next);\n      }\n    } else if (errorResponse.status === 403) {\n      if (!ignoreErrors) {\n        this.dialogService.forbidden();\n      }\n    } else if (errorResponse.status === 0 || errorResponse.status === -1) {\n        this.showError('Unable to connect');\n    } else if (!(req.url.startsWith('/api/rpc') || req.url.startsWith('/api/plugins/rpc'))) {\n      if (errorResponse.status === 404) {\n        if (!ignoreErrors) {\n          this.showError(req.method + ': ' + req.url + '<br/>' +\n            errorResponse.status + ': ' + errorResponse.statusText);\n        }\n      } else {\n        unhandled = true;\n      }\n    }\n\n    if (unhandled && !ignoreErrors) {\n      let error = null;\n      if (req.responseType === 'text') {\n        try {\n          error = errorResponse.error ? JSON.parse(errorResponse.error) : null;\n        } catch (e) {}\n      } else {\n        error = errorResponse.error;\n      }\n      if (error && !error.message) {\n        this.showError(this.prepareMessageFromData(error));\n      } else if (error && error.message) {\n        this.showError(error.message, error.timeout ? error.timeout : 0);\n      } else {\n        this.showError('Unhandled error code ' + (error ? error.status : '\\'Unknown\\''));\n      }\n    }\n    return throwError(errorResponse);\n  }\n\n  private prepareMessageFromData(data) {\n    if (typeof data === 'object' && data.constructor === ArrayBuffer) {\n      const msg = String.fromCharCode.apply(null, new Uint8Array(data));\n      try {\n        const msgObj = JSON.parse(msg);\n        if (msgObj.message) {\n          return msgObj.message;\n        } else {\n          return msg;\n        }\n      } catch (e) {\n        return msg;\n      }\n    } else {\n      return data;\n    }\n  }\n\n  private retryRequest(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    const thisTimeout =  1000 + Math.random() * 3000;\n    return of(null).pipe(\n      delay(thisTimeout),\n      mergeMap(() => {\n        return this.jwtIntercept(req, next);\n      }\n    ));\n  }\n\n  private refreshTokenAndRetry(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    return this.authService.refreshJwtToken().pipe(switchMap(() => {\n      return this.jwtIntercept(req, next);\n    }),\n    catchError((err: Error) => {\n      this.authService.logout(true);\n      const message = err ? err.message : 'Unauthorized!';\n      return this.handleResponseError(req, next, new HttpErrorResponse({error: {message, timeout: 200}, status: 401}));\n    }));\n  }\n\n  private updateAuthorizationHeader(req: HttpRequest<any>): HttpRequest<any> {\n    const jwtToken = AuthService.getJwtToken();\n    if (jwtToken) {\n      req = req.clone({\n        setHeaders: (tmpHeaders = {},\n          tmpHeaders[this.AUTH_HEADER_NAME] = '' + this.AUTH_SCHEME + jwtToken,\n          tmpHeaders)\n      });\n      return req;\n    } else {\n      return null;\n    }\n  }\n\n  private isInternalUrlPrefix(url): boolean {\n    for (const index in this.internalUrlPrefixes) {\n      if (url.startsWith(this.internalUrlPrefixes[index])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  private isTokenBasedAuthEntryPoint(url): boolean {\n    return  url.startsWith('/api/') &&\n      !url.startsWith(Constants.entryPoints.login) &&\n      !url.startsWith(Constants.entryPoints.tokenRefresh) &&\n      !url.startsWith(Constants.entryPoints.nonTokenBased);\n  }\n\n  private updateLoadingState(config: InterceptorConfig, isLoading: boolean) {\n    if (!config.ignoreLoading) {\n      if (isLoading) {\n        this.activeRequests++;\n      } else {\n        this.activeRequests--;\n      }\n      if (this.activeRequests === 1 && isLoading) {\n        this.store.dispatch(new ActionLoadStart());\n      } else if (this.activeRequests === 0) {\n        this.store.dispatch(new ActionLoadFinish());\n      }\n    }\n  }\n\n  private getInterceptorConfig(req: HttpRequest<any>): InterceptorConfig {\n    let config: InterceptorConfig;\n    if (req.params && req.params instanceof InterceptorHttpParams) {\n      config = (req.params as InterceptorHttpParams).interceptorConfig;\n    } else {\n      config = new InterceptorConfig(false, false);\n    }\n    if (this.isInternalUrlPrefix(req.url)) {\n      config.ignoreLoading = true;\n    }\n    return config;\n  }\n\n  private showError(error: string, timeout: number = 0) {\n    setTimeout(() => {\n      this.store.dispatch(new ActionNotificationShow({message: error, type: 'error'}));\n    }, timeout);\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { AliasFilterType, EntityFilters } from '@shared/models/alias.models';\nimport { EntityId } from '@shared/models/id/entity-id';\nimport { SortDirection } from '@angular/material/sort';\nimport { DataKeyType } from '@shared/models/telemetry/telemetry.models';\nimport { EntityInfo } from '@shared/models/entity.models';\nimport { EntityType } from '@shared/models/entity-type.models';\nimport { DataKey, Datasource, DatasourceType } from '@shared/models/widget.models';\nimport { PageData } from '@shared/models/page/page-data';\nimport { isDefined, isEqual } from '@core/utils';\nimport { TranslateService } from '@ngx-translate/core';\nimport { AlarmInfo, AlarmSearchStatus, AlarmSeverity } from '../alarm.models';\nimport { Filter } from '@material-ui/icons';\nimport { DatePipe } from '@angular/common';\n\nexport enum EntityKeyType {\n  ATTRIBUTE = 'ATTRIBUTE',\n  CLIENT_ATTRIBUTE = 'CLIENT_ATTRIBUTE',\n  SHARED_ATTRIBUTE = 'SHARED_ATTRIBUTE',\n  SERVER_ATTRIBUTE = 'SERVER_ATTRIBUTE',\n  TIME_SERIES = 'TIME_SERIES',\n  ENTITY_FIELD = 'ENTITY_FIELD',\n  ALARM_FIELD = 'ALARM_FIELD',\n  CONSTANT = 'CONSTANT',\n  COUNT = 'COUNT'\n}\n\nexport const entityKeyTypeTranslationMap = new Map<EntityKeyType, string>(\n  [\n    [EntityKeyType.ATTRIBUTE, 'filter.key-type.attribute'],\n    [EntityKeyType.TIME_SERIES, 'filter.key-type.timeseries'],\n    [EntityKeyType.ENTITY_FIELD, 'filter.key-type.entity-field'],\n    [EntityKeyType.CONSTANT, 'filter.key-type.constant']\n  ]\n);\n\nexport function entityKeyTypeToDataKeyType(entityKeyType: EntityKeyType): DataKeyType {\n  switch (entityKeyType) {\n    case EntityKeyType.ATTRIBUTE:\n    case EntityKeyType.CLIENT_ATTRIBUTE:\n    case EntityKeyType.SHARED_ATTRIBUTE:\n    case EntityKeyType.SERVER_ATTRIBUTE:\n      return DataKeyType.attribute;\n    case EntityKeyType.TIME_SERIES:\n      return DataKeyType.timeseries;\n    case EntityKeyType.ENTITY_FIELD:\n      return DataKeyType.entityField;\n    case EntityKeyType.ALARM_FIELD:\n      return DataKeyType.alarm;\n    case EntityKeyType.COUNT:\n      return DataKeyType.count;\n  }\n}\n\nexport function dataKeyTypeToEntityKeyType(dataKeyType: DataKeyType): EntityKeyType {\n  switch (dataKeyType) {\n    case DataKeyType.timeseries:\n      return EntityKeyType.TIME_SERIES;\n    case DataKeyType.attribute:\n      return EntityKeyType.ATTRIBUTE;\n    case DataKeyType.function:\n      return EntityKeyType.ENTITY_FIELD;\n    case DataKeyType.alarm:\n      return EntityKeyType.ALARM_FIELD;\n    case DataKeyType.entityField:\n      return EntityKeyType.ENTITY_FIELD;\n    case DataKeyType.count:\n      return EntityKeyType.COUNT;\n  }\n}\n\nexport interface EntityKey {\n  type: EntityKeyType;\n  key: string;\n}\n\nexport function dataKeyToEntityKey(dataKey: DataKey): EntityKey {\n  return {\n    key: dataKey.name,\n    type: dataKeyTypeToEntityKeyType(dataKey.type)\n  };\n}\n\nexport enum EntityKeyValueType {\n  STRING = 'STRING',\n  NUMERIC = 'NUMERIC',\n  BOOLEAN = 'BOOLEAN',\n  DATE_TIME = 'DATE_TIME'\n}\n\nexport interface EntityKeyValueTypeData {\n  name: string;\n  icon: string;\n}\n\nexport const entityKeyValueTypesMap = new Map<EntityKeyValueType, EntityKeyValueTypeData>(\n  [\n    [\n      EntityKeyValueType.STRING,\n      {\n        name: 'filter.value-type.string',\n        icon: 'mdi:format-text'\n      }\n    ],\n    [\n      EntityKeyValueType.NUMERIC,\n      {\n        name: 'filter.value-type.numeric',\n        icon: 'mdi:numeric'\n      }\n    ],\n    [\n      EntityKeyValueType.BOOLEAN,\n      {\n        name: 'filter.value-type.boolean',\n        icon: 'mdi:checkbox-marked-outline'\n      }\n    ],\n    [\n      EntityKeyValueType.DATE_TIME,\n      {\n        name: 'filter.value-type.date-time',\n        icon: 'mdi:calendar-clock'\n      }\n    ]\n  ]\n);\n\nexport function entityKeyValueTypeToFilterPredicateType(valueType: EntityKeyValueType): FilterPredicateType {\n  switch (valueType) {\n    case EntityKeyValueType.STRING:\n      return FilterPredicateType.STRING;\n    case EntityKeyValueType.NUMERIC:\n    case EntityKeyValueType.DATE_TIME:\n      return FilterPredicateType.NUMERIC;\n    case EntityKeyValueType.BOOLEAN:\n      return FilterPredicateType.BOOLEAN;\n  }\n}\n\nexport function createDefaultFilterPredicateInfo(valueType: EntityKeyValueType, complex: boolean): KeyFilterPredicateInfo {\n  const predicate = createDefaultFilterPredicate(valueType, complex);\n  return {\n    keyFilterPredicate: predicate,\n    userInfo: createDefaultFilterPredicateUserInfo()\n  };\n}\n\nexport function createDefaultFilterPredicateUserInfo(): KeyFilterPredicateUserInfo {\n  return {\n    editable: true,\n    label: '',\n    autogeneratedLabel: true,\n    order: 0\n  };\n}\n\nexport function createDefaultFilterPredicate(valueType: EntityKeyValueType, complex: boolean): KeyFilterPredicate {\n  const predicate = {\n    type: complex ? FilterPredicateType.COMPLEX : entityKeyValueTypeToFilterPredicateType(valueType)\n  } as KeyFilterPredicate;\n  switch (predicate.type) {\n    case FilterPredicateType.STRING:\n      predicate.operation = StringOperation.STARTS_WITH;\n      predicate.value = {\n        defaultValue: ''\n      };\n      predicate.ignoreCase = false;\n      break;\n    case FilterPredicateType.NUMERIC:\n      predicate.operation = NumericOperation.EQUAL;\n      predicate.value = {\n        defaultValue: valueType === EntityKeyValueType.DATE_TIME ? Date.now() : 0\n      };\n      break;\n    case FilterPredicateType.BOOLEAN:\n      predicate.operation = BooleanOperation.EQUAL;\n      predicate.value = {\n        defaultValue: false\n      };\n      break;\n    case FilterPredicateType.COMPLEX:\n      predicate.operation = ComplexOperation.AND;\n      predicate.predicates = [];\n      break;\n  }\n  return predicate;\n}\n\nexport function getDynamicSourcesForAllowUser(allow: boolean): DynamicValueSourceType[] {\n  const dynamicValueSourceTypes = [DynamicValueSourceType.CURRENT_TENANT,\n    DynamicValueSourceType.CURRENT_CUSTOMER];\n  if (allow) {\n    dynamicValueSourceTypes.push(DynamicValueSourceType.CURRENT_USER);\n  } else {\n    dynamicValueSourceTypes.push(DynamicValueSourceType.CURRENT_DEVICE);\n  }\n  return dynamicValueSourceTypes;\n}\n\nexport enum FilterPredicateType {\n  STRING = 'STRING',\n  NUMERIC = 'NUMERIC',\n  BOOLEAN = 'BOOLEAN',\n  COMPLEX = 'COMPLEX'\n}\n\nexport enum StringOperation {\n  EQUAL = 'EQUAL',\n  NOT_EQUAL = 'NOT_EQUAL',\n  STARTS_WITH = 'STARTS_WITH',\n  ENDS_WITH = 'ENDS_WITH',\n  CONTAINS = 'CONTAINS',\n  NOT_CONTAINS = 'NOT_CONTAINS'\n}\n\nexport const stringOperationTranslationMap = new Map<StringOperation, string>(\n  [\n    [StringOperation.EQUAL, 'filter.operation.equal'],\n    [StringOperation.NOT_EQUAL, 'filter.operation.not-equal'],\n    [StringOperation.STARTS_WITH, 'filter.operation.starts-with'],\n    [StringOperation.ENDS_WITH, 'filter.operation.ends-with'],\n    [StringOperation.CONTAINS, 'filter.operation.contains'],\n    [StringOperation.NOT_CONTAINS, 'filter.operation.not-contains']\n  ]\n);\n\nexport enum NumericOperation {\n  EQUAL = 'EQUAL',\n  NOT_EQUAL = 'NOT_EQUAL',\n  GREATER = 'GREATER',\n  LESS = 'LESS',\n  GREATER_OR_EQUAL = 'GREATER_OR_EQUAL',\n  LESS_OR_EQUAL = 'LESS_OR_EQUAL'\n}\n\nexport const numericOperationTranslationMap = new Map<NumericOperation, string>(\n  [\n    [NumericOperation.EQUAL, 'filter.operation.equal'],\n    [NumericOperation.NOT_EQUAL, 'filter.operation.not-equal'],\n    [NumericOperation.GREATER, 'filter.operation.greater'],\n    [NumericOperation.LESS, 'filter.operation.less'],\n    [NumericOperation.GREATER_OR_EQUAL, 'filter.operation.greater-or-equal'],\n    [NumericOperation.LESS_OR_EQUAL, 'filter.operation.less-or-equal']\n  ]\n);\n\nexport enum BooleanOperation {\n  EQUAL = 'EQUAL',\n  NOT_EQUAL = 'NOT_EQUAL'\n}\n\nexport const booleanOperationTranslationMap = new Map<BooleanOperation, string>(\n  [\n    [BooleanOperation.EQUAL, 'filter.operation.equal'],\n    [BooleanOperation.NOT_EQUAL, 'filter.operation.not-equal']\n  ]\n);\n\nexport enum ComplexOperation {\n  AND = 'AND',\n  OR = 'OR'\n}\n\nexport const complexOperationTranslationMap = new Map<ComplexOperation, string>(\n  [\n    [ComplexOperation.AND, 'filter.operation.and'],\n    [ComplexOperation.OR, 'filter.operation.or']\n  ]\n);\n\nexport enum DynamicValueSourceType {\n  CURRENT_TENANT = 'CURRENT_TENANT',\n  CURRENT_CUSTOMER = 'CURRENT_CUSTOMER',\n  CURRENT_USER = 'CURRENT_USER',\n  CURRENT_DEVICE = 'CURRENT_DEVICE'\n}\n\nexport const dynamicValueSourceTypeTranslationMap = new Map<DynamicValueSourceType, string>(\n  [\n    [DynamicValueSourceType.CURRENT_TENANT, 'filter.current-tenant'],\n    [DynamicValueSourceType.CURRENT_CUSTOMER, 'filter.current-customer'],\n    [DynamicValueSourceType.CURRENT_USER, 'filter.current-user'],\n    [DynamicValueSourceType.CURRENT_DEVICE, 'filter.current-device']\n  ]\n);\n\nexport const inheritModeForDynamicValueSourceType = [\n  DynamicValueSourceType.CURRENT_CUSTOMER,\n  DynamicValueSourceType.CURRENT_DEVICE];\n\nexport interface DynamicValue<T> {\n  sourceType: DynamicValueSourceType;\n  sourceAttribute: string;\n  inherit?: boolean;\n}\n\nexport interface FilterPredicateValue<T> {\n  defaultValue: T;\n  userValue?: T;\n  dynamicValue?: DynamicValue<T>;\n}\n\nexport interface StringFilterPredicate {\n  type: FilterPredicateType.STRING;\n  operation: StringOperation;\n  value: FilterPredicateValue<string>;\n  ignoreCase: boolean;\n}\n\nexport interface NumericFilterPredicate {\n  type: FilterPredicateType.NUMERIC;\n  operation: NumericOperation;\n  value: FilterPredicateValue<number>;\n}\n\nexport interface BooleanFilterPredicate {\n  type: FilterPredicateType.BOOLEAN;\n  operation: BooleanOperation;\n  value: FilterPredicateValue<boolean>;\n}\n\nexport interface BaseComplexFilterPredicate<T extends KeyFilterPredicate | KeyFilterPredicateInfo> {\n  type: FilterPredicateType.COMPLEX;\n  operation: ComplexOperation;\n  predicates: Array<T>;\n}\n\nexport type ComplexFilterPredicate = BaseComplexFilterPredicate<KeyFilterPredicate>;\n\nexport type ComplexFilterPredicateInfo = BaseComplexFilterPredicate<KeyFilterPredicateInfo>;\n\nexport type KeyFilterPredicate = StringFilterPredicate |\n  NumericFilterPredicate |\n  BooleanFilterPredicate |\n  ComplexFilterPredicate |\n  ComplexFilterPredicateInfo;\n\nexport interface KeyFilterPredicateUserInfo {\n  editable: boolean;\n  label: string;\n  autogeneratedLabel: boolean;\n  order?: number;\n}\n\nexport interface KeyFilterPredicateInfo {\n  keyFilterPredicate: KeyFilterPredicate;\n  userInfo: KeyFilterPredicateUserInfo;\n}\n\nexport interface KeyFilter {\n  key: EntityKey;\n  valueType: EntityKeyValueType;\n  value?: string | number | boolean;\n  predicate: KeyFilterPredicate;\n}\n\nexport interface KeyFilterInfo {\n  key: EntityKey;\n  valueType: EntityKeyValueType;\n  value?: string | number | boolean;\n  predicates: Array<KeyFilterPredicateInfo>;\n}\n\nexport interface FilterInfo {\n  filter: string;\n  editable: boolean;\n  keyFilters: Array<KeyFilterInfo>;\n}\n\nexport interface FiltersInfo {\n  datasourceFilters: {[datasourceIndex: number]: FilterInfo};\n}\n\nexport function keyFiltersToText(translate: TranslateService, datePipe: DatePipe, keyFilters: Array<KeyFilter>): string {\n  const filtersText = keyFilters.map(keyFilter =>\n      keyFilterToText(translate, datePipe, keyFilter,\n        keyFilters.length > 1 ? ComplexOperation.AND : undefined));\n  let result: string;\n  if (filtersText.length > 1) {\n    const andText = translate.instant('filter.operation.and');\n    result = filtersText.join(' <span class=\"tb-filter-complex-operation\">' + andText + '</span> ');\n  } else {\n    result = filtersText[0];\n  }\n  return result;\n}\n\nexport function keyFilterToText(translate: TranslateService, datePipe: DatePipe, keyFilter: KeyFilter,\n                                parentComplexOperation?: ComplexOperation): string {\n  const keyFilterPredicate = keyFilter.predicate;\n  return keyFilterPredicateToText(translate, datePipe, keyFilter, keyFilterPredicate, parentComplexOperation);\n}\n\nexport function keyFilterPredicateToText(translate: TranslateService,\n                                         datePipe: DatePipe,\n                                         keyFilter: KeyFilter,\n                                         keyFilterPredicate: KeyFilterPredicate,\n                                         parentComplexOperation?: ComplexOperation): string {\n  if (keyFilterPredicate.type === FilterPredicateType.COMPLEX) {\n    const complexPredicate = keyFilterPredicate as ComplexFilterPredicate;\n    const complexOperation = complexPredicate.operation;\n    const complexPredicatesText =\n      complexPredicate.predicates.map(predicate => keyFilterPredicateToText(translate, datePipe, keyFilter, predicate, complexOperation));\n    if (complexPredicatesText.length > 1) {\n      const operationText = translate.instant(complexOperationTranslationMap.get(complexOperation));\n      let result = complexPredicatesText.join(' <span class=\"tb-filter-complex-operation\">' + operationText + '</span> ');\n      if (complexOperation === ComplexOperation.OR && parentComplexOperation && ComplexOperation.OR !== parentComplexOperation) {\n        result = `<span class=\"tb-filter-bracket\"><span class=\"tb-left-bracket\">(</span>${result}<span class=\"tb-right-bracket\">)</span></span>`;\n      }\n      return result;\n    } else {\n      return complexPredicatesText[0];\n    }\n  } else {\n    return simpleKeyFilterPredicateToText(translate, datePipe, keyFilter, keyFilterPredicate);\n  }\n}\n\nfunction simpleKeyFilterPredicateToText(translate: TranslateService,\n                                        datePipe: DatePipe,\n                                        keyFilter: KeyFilter,\n                                        keyFilterPredicate: StringFilterPredicate |\n                                                            NumericFilterPredicate |\n                                                            BooleanFilterPredicate): string {\n  const key = keyFilter.key.key;\n  let operation: string;\n  let value: string;\n  const val = keyFilterPredicate.value;\n  const dynamicValue = !!val.dynamicValue && !!val.dynamicValue.sourceType;\n  if (dynamicValue) {\n    value = '<span class=\"tb-filter-dynamic-value\"><span class=\"tb-filter-dynamic-source\">' +\n    translate.instant(dynamicValueSourceTypeTranslationMap.get(val.dynamicValue.sourceType)) + '</span>';\n    value += '.<span class=\"tb-filter-value\">' + val.dynamicValue.sourceAttribute + '</span></span>';\n  }\n  switch (keyFilterPredicate.type) {\n    case FilterPredicateType.STRING:\n      operation = translate.instant(stringOperationTranslationMap.get(keyFilterPredicate.operation));\n      if (keyFilterPredicate.ignoreCase) {\n        operation += ' ' + translate.instant('filter.ignore-case');\n      }\n      if (!dynamicValue) {\n        value = `'${keyFilterPredicate.value.defaultValue}'`;\n      }\n      break;\n    case FilterPredicateType.NUMERIC:\n      operation = translate.instant(numericOperationTranslationMap.get(keyFilterPredicate.operation));\n      if (!dynamicValue) {\n        if (keyFilter.valueType === EntityKeyValueType.DATE_TIME) {\n          value = datePipe.transform(keyFilterPredicate.value.defaultValue, 'yyyy-MM-dd HH:mm');\n        } else {\n          value = keyFilterPredicate.value.defaultValue + '';\n        }\n      }\n      break;\n    case FilterPredicateType.BOOLEAN:\n      operation = translate.instant(booleanOperationTranslationMap.get(keyFilterPredicate.operation));\n      if (!dynamicValue) {\n        value = translate.instant(keyFilterPredicate.value.defaultValue ? 'value.true' : 'value.false');\n      }\n      break;\n  }\n  if (!dynamicValue) {\n    value = `<span class=\"tb-filter-value\">${value}</span>`;\n  }\n  return `<span class=\"tb-filter-predicate\"><span class=\"tb-filter-entity-key\">${key}</span> <span class=\"tb-filter-simple-operation\">${operation}</span> ${value}</span>`;\n}\n\nexport function keyFilterInfosToKeyFilters(keyFilterInfos: Array<KeyFilterInfo>): Array<KeyFilter> {\n  if (!keyFilterInfos) {\n    return [];\n  }\n  const keyFilters: Array<KeyFilter> = [];\n  for (const keyFilterInfo of keyFilterInfos) {\n    const key = keyFilterInfo.key;\n    for (const predicate of keyFilterInfo.predicates) {\n      const keyFilter: KeyFilter = {\n        key,\n        valueType: keyFilterInfo.valueType,\n        value: keyFilterInfo.value,\n        predicate: keyFilterPredicateInfoToKeyFilterPredicate(predicate)\n      };\n      keyFilters.push(keyFilter);\n    }\n  }\n  return keyFilters;\n}\n\nexport function keyFiltersToKeyFilterInfos(keyFilters: Array<KeyFilter>): Array<KeyFilterInfo> {\n  const keyFilterInfos: Array<KeyFilterInfo> = [];\n  const keyFilterInfoMap: {[infoKey: string]: KeyFilterInfo} = {};\n  if (keyFilters) {\n    for (const keyFilter of keyFilters) {\n      const key = keyFilter.key;\n      const infoKey = key.key + key.type + keyFilter.valueType;\n      let keyFilterInfo = keyFilterInfoMap[infoKey];\n      if (!keyFilterInfo) {\n        keyFilterInfo = {\n          key,\n          valueType: keyFilter.valueType,\n          value: keyFilter.value,\n          predicates: []\n        };\n        keyFilterInfoMap[infoKey] = keyFilterInfo;\n        keyFilterInfos.push(keyFilterInfo);\n      }\n      if (keyFilter.predicate) {\n        keyFilterInfo.predicates.push(keyFilterPredicateToKeyFilterPredicateInfo(keyFilter.predicate));\n      }\n    }\n  }\n  return keyFilterInfos;\n}\n\nexport function filterInfoToKeyFilters(filter: FilterInfo): Array<KeyFilter> {\n  const keyFilterInfos = filter.keyFilters;\n  const keyFilters: Array<KeyFilter> = [];\n  for (const keyFilterInfo of keyFilterInfos) {\n    const key = keyFilterInfo.key;\n    for (const predicate of keyFilterInfo.predicates) {\n      const keyFilter: KeyFilter = {\n        key,\n        valueType: keyFilterInfo.valueType,\n        value: keyFilterInfo.value,\n        predicate: keyFilterPredicateInfoToKeyFilterPredicate(predicate)\n      };\n      keyFilters.push(keyFilter);\n    }\n  }\n  return keyFilters;\n}\n\nexport function keyFilterPredicateInfoToKeyFilterPredicate(keyFilterPredicateInfo: KeyFilterPredicateInfo): KeyFilterPredicate {\n  let keyFilterPredicate = keyFilterPredicateInfo.keyFilterPredicate;\n  if (keyFilterPredicate.type === FilterPredicateType.COMPLEX) {\n    const complexInfo = keyFilterPredicate as ComplexFilterPredicateInfo;\n    const predicates = complexInfo.predicates.map((predicateInfo => keyFilterPredicateInfoToKeyFilterPredicate(predicateInfo)));\n    keyFilterPredicate = {\n      type: FilterPredicateType.COMPLEX,\n      operation: complexInfo.operation,\n      predicates\n    } as ComplexFilterPredicate;\n  }\n  return keyFilterPredicate;\n}\n\nexport function keyFilterPredicateToKeyFilterPredicateInfo(keyFilterPredicate: KeyFilterPredicate): KeyFilterPredicateInfo {\n  const keyFilterPredicateInfo: KeyFilterPredicateInfo = {\n    keyFilterPredicate: null,\n    userInfo: null\n  };\n  if (keyFilterPredicate.type === FilterPredicateType.COMPLEX) {\n    const complexPredicate = keyFilterPredicate as ComplexFilterPredicate;\n    const predicateInfos = complexPredicate.predicates.map(\n      predicate => keyFilterPredicateToKeyFilterPredicateInfo(predicate));\n    keyFilterPredicateInfo.keyFilterPredicate = {\n      predicates: predicateInfos,\n      operation: complexPredicate.operation,\n      type: FilterPredicateType.COMPLEX\n    } as ComplexFilterPredicateInfo;\n  } else {\n    keyFilterPredicateInfo.keyFilterPredicate = keyFilterPredicate;\n  }\n  return keyFilterPredicateInfo;\n}\n\nexport function isFilterEditable(filter: FilterInfo): boolean {\n  if (filter.editable) {\n    return filter.keyFilters.some(value => isKeyFilterInfoEditable(value));\n  } else {\n    return false;\n  }\n}\n\nexport function isKeyFilterInfoEditable(keyFilterInfo: KeyFilterInfo): boolean {\n  return keyFilterInfo.predicates.some(value => isPredicateInfoEditable(value));\n}\n\nexport function isPredicateInfoEditable(predicateInfo: KeyFilterPredicateInfo): boolean {\n  if (predicateInfo.keyFilterPredicate.type === FilterPredicateType.COMPLEX) {\n    const complexFilterPredicateInfo: ComplexFilterPredicateInfo = predicateInfo.keyFilterPredicate as ComplexFilterPredicateInfo;\n    return complexFilterPredicateInfo.predicates.some(value => isPredicateInfoEditable(value));\n  } else {\n    return predicateInfo.userInfo.editable;\n  }\n}\n\nexport interface UserFilterInputInfo {\n  label: string;\n  valueType: EntityKeyValueType;\n  info: KeyFilterPredicateInfo;\n}\n\nexport function filterToUserFilterInfoList(filter: Filter, translate: TranslateService): Array<UserFilterInputInfo> {\n  const result = filter.keyFilters.map((keyFilterInfo => keyFilterInfoToUserFilterInfoList(keyFilterInfo, translate)));\n  let userInputs: Array<UserFilterInputInfo> = [].concat.apply([], result);\n  userInputs = userInputs.sort((input1, input2) => {\n    const order1 = isDefined(input1.info.userInfo.order) ? input1.info.userInfo.order : 0;\n    const order2 = isDefined(input2.info.userInfo.order) ? input2.info.userInfo.order : 0;\n    return order1 - order2;\n  });\n  return userInputs;\n}\n\nexport function keyFilterInfoToUserFilterInfoList(keyFilterInfo: KeyFilterInfo, translate: TranslateService): Array<UserFilterInputInfo> {\n  const result = keyFilterInfo.predicates.map((predicateInfo => predicateInfoToUserFilterInfoList(keyFilterInfo.key,\n    keyFilterInfo.valueType, predicateInfo, translate)));\n  return [].concat.apply([], result);\n}\n\nexport function predicateInfoToUserFilterInfoList(key: EntityKey,\n                                                  valueType: EntityKeyValueType,\n                                                  predicateInfo: KeyFilterPredicateInfo,\n                                                  translate: TranslateService): Array<UserFilterInputInfo> {\n  if (predicateInfo.keyFilterPredicate.type === FilterPredicateType.COMPLEX) {\n    const complexFilterPredicateInfo: ComplexFilterPredicateInfo = predicateInfo.keyFilterPredicate as ComplexFilterPredicateInfo;\n    const result = complexFilterPredicateInfo.predicates.map((predicateInfo1 =>\n      predicateInfoToUserFilterInfoList(key, valueType, predicateInfo1, translate)));\n    return [].concat.apply([], result);\n  } else {\n    if (predicateInfo.userInfo.editable) {\n      const userInput: UserFilterInputInfo = {\n        info: predicateInfo,\n        label: predicateInfo.userInfo.label,\n        valueType\n      };\n      if (predicateInfo.userInfo.autogeneratedLabel) {\n        userInput.label = generateUserFilterValueLabel(key.key, valueType,\n          predicateInfo.keyFilterPredicate.operation, translate);\n      }\n      return [userInput];\n    } else {\n      return [];\n    }\n  }\n}\n\nexport function generateUserFilterValueLabel(key: string, valueType: EntityKeyValueType,\n                                             operation: StringOperation | BooleanOperation | NumericOperation,\n                                             translate: TranslateService) {\n  let label = key;\n  let operationTranslationKey: string;\n  switch (valueType) {\n    case EntityKeyValueType.STRING:\n      operationTranslationKey = stringOperationTranslationMap.get(operation as StringOperation);\n      break;\n    case EntityKeyValueType.NUMERIC:\n    case EntityKeyValueType.DATE_TIME:\n      operationTranslationKey = numericOperationTranslationMap.get(operation as NumericOperation);\n      break;\n    case EntityKeyValueType.BOOLEAN:\n      operationTranslationKey = booleanOperationTranslationMap.get(operation as BooleanOperation);\n      break;\n  }\n  label += ' ' + translate.instant(operationTranslationKey);\n  return label;\n}\n\nexport interface Filter extends FilterInfo {\n  id: string;\n}\n\nexport interface Filters {\n  [id: string]: Filter;\n}\n\nexport interface EntityFilter extends EntityFilters {\n  type?: AliasFilterType;\n}\n\nexport enum Direction {\n  ASC = 'ASC',\n  DESC = 'DESC'\n}\n\nexport interface EntityDataSortOrder {\n  key: EntityKey;\n  direction: Direction;\n}\n\nexport interface EntityDataPageLink {\n  pageSize: number;\n  page: number;\n  textSearch?: string;\n  sortOrder?: EntityDataSortOrder;\n  dynamic?: boolean;\n}\n\nexport interface AlarmDataPageLink extends EntityDataPageLink {\n  startTs?: number;\n  endTs?: number;\n  timeWindow?: number;\n  typeList?: Array<string>;\n  statusList?: Array<AlarmSearchStatus>;\n  severityList?: Array<AlarmSeverity>;\n  searchPropagatedAlarms?: boolean;\n}\n\nexport function entityDataPageLinkSortDirection(pageLink: EntityDataPageLink): SortDirection {\n  if (pageLink.sortOrder) {\n    return (pageLink.sortOrder.direction + '').toLowerCase() as SortDirection;\n  } else {\n    return '' as SortDirection;\n  }\n}\n\nexport function createDefaultEntityDataPageLink(pageSize: number): EntityDataPageLink {\n  return {\n    pageSize,\n    page: 0,\n    sortOrder: {\n      key: {\n        type: EntityKeyType.ENTITY_FIELD,\n        key: 'createdTime'\n      },\n      direction: Direction.DESC\n    }\n  };\n}\n\nexport const singleEntityDataPageLink: EntityDataPageLink = createDefaultEntityDataPageLink(1);\nexport const defaultEntityDataPageLink: EntityDataPageLink = createDefaultEntityDataPageLink(1024);\n\nexport interface EntityCountQuery {\n  entityFilter: EntityFilter;\n  keyFilters?: Array<KeyFilter>;\n}\n\nexport interface AbstractDataQuery<T extends EntityDataPageLink> extends EntityCountQuery {\n  pageLink: T;\n  entityFields?: Array<EntityKey>;\n  latestValues?: Array<EntityKey>;\n}\n\nexport interface EntityDataQuery extends AbstractDataQuery<EntityDataPageLink> {\n}\n\nexport interface AlarmDataQuery extends AbstractDataQuery<AlarmDataPageLink> {\n  alarmFields?: Array<EntityKey>;\n}\n\nexport interface TsValue {\n  ts: number;\n  value: string;\n}\n\nexport interface EntityData {\n  entityId: EntityId;\n  latest: {[entityKeyType: string]: {[key: string]: TsValue}};\n  timeseries: {[key: string]: Array<TsValue>};\n}\n\nexport interface AlarmData extends AlarmInfo {\n  entityId: string;\n  latest: {[entityKeyType: string]: {[key: string]: TsValue}};\n}\n\nexport function entityPageDataChanged(prevPageData: PageData<EntityData>, nextPageData: PageData<EntityData>): boolean {\n  const prevIds = prevPageData.data.map((entityData) => entityData.entityId.id);\n  const nextIds = nextPageData.data.map((entityData) => entityData.entityId.id);\n  return !isEqual(prevIds, nextIds);\n}\n\nexport const entityInfoFields: EntityKey[] = [\n  {\n    type: EntityKeyType.ENTITY_FIELD,\n    key: 'name'\n  },\n  {\n    type: EntityKeyType.ENTITY_FIELD,\n    key: 'label'\n  },\n  {\n    type: EntityKeyType.ENTITY_FIELD,\n    key: 'additionalInfo'\n  }\n];\n\nexport function entityDataToEntityInfo(entityData: EntityData): EntityInfo {\n  const entityInfo: EntityInfo = {\n    id: entityData.entityId.id,\n    entityType: entityData.entityId.entityType as EntityType\n  };\n  if (entityData.latest && entityData.latest[EntityKeyType.ENTITY_FIELD]) {\n    const fields = entityData.latest[EntityKeyType.ENTITY_FIELD];\n    if (fields.name) {\n      entityInfo.name = fields.name.value;\n    } else {\n      entityInfo.name = '';\n    }\n    if (fields.label) {\n      entityInfo.label = fields.label.value;\n    } else {\n      entityInfo.label = '';\n    }\n    entityInfo.entityDescription = '';\n    if (fields.additionalInfo) {\n      const additionalInfo = fields.additionalInfo.value;\n      if (additionalInfo && additionalInfo.length) {\n        try {\n          const additionalInfoJson = JSON.parse(additionalInfo);\n          if (additionalInfoJson && additionalInfoJson.description) {\n            entityInfo.entityDescription = additionalInfoJson.description;\n          }\n        } catch (e) {}\n      }\n    }\n  }\n  return entityInfo;\n}\n\nexport function updateDatasourceFromEntityInfo(datasource: Datasource, entity: EntityInfo, createFilter = false) {\n  datasource.entity = {\n    id: {\n      entityType: entity.entityType,\n      id: entity.id\n    }\n  };\n  datasource.entityId = entity.id;\n  datasource.entityType = entity.entityType;\n  if (datasource.type === DatasourceType.entity || datasource.type === DatasourceType.entityCount) {\n    if (datasource.type === DatasourceType.entity) {\n      datasource.entityName = entity.name;\n      datasource.entityLabel = entity.label;\n      datasource.name = entity.name;\n      datasource.entityDescription = entity.entityDescription;\n      datasource.entity.label = entity.label;\n      datasource.entity.name = entity.name;\n    }\n    if (createFilter) {\n      datasource.entityFilter = {\n        type: AliasFilterType.singleEntity,\n        singleEntity: {\n          id: entity.id,\n          entityType: entity.entityType\n        }\n      };\n    }\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Injectable } from '@angular/core';\nimport { defaultHttpOptionsFromConfig, RequestConfig } from './http-utils';\nimport { Observable } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\nimport { PageLink, TimePageLink } from '@shared/models/page/page-link';\nimport { PageData } from '@shared/models/page/page-data';\nimport { EntitySubtype } from '@app/shared/models/entity-type.models';\nimport { Edge, EdgeEvent, EdgeInfo, EdgeSearchQuery } from '@shared/models/edge.models';\nimport { EntityId } from '@shared/models/id/entity-id';\nimport { BulkImportRequest, BulkImportResult } from '@home/components/import-export/import-export.models';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EdgeService {\n\n  constructor(\n    private http: HttpClient\n  ) { }\n\n  public getEdges(edgeIds: Array<string>, config?: RequestConfig): Observable<Array<Edge>> {\n    return this.http.get<Array<Edge>>(`/api/edges?edgeIds=${edgeIds.join(',')}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getEdge(edgeId: string, config?: RequestConfig): Observable<Edge> {\n    return this.http.get<Edge>(`/api/edge/${edgeId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getEdgeInfo(edgeId: string, config?: RequestConfig): Observable<EdgeInfo> {\n    return this.http.get<EdgeInfo>(`/api/edge/info/${edgeId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public saveEdge(edge: Edge, config?: RequestConfig): Observable<Edge> {\n    return this.http.post<Edge>('/api/edge', edge, defaultHttpOptionsFromConfig(config));\n  }\n\n  public deleteEdge(edgeId: string, config?: RequestConfig) {\n    return this.http.delete(`/api/edge/${edgeId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public getEdgeTypes(config?: RequestConfig): Observable<Array<EntitySubtype>> {\n    return this.http.get<Array<EntitySubtype>>('/api/edge/types', defaultHttpOptionsFromConfig(config));\n  }\n\n  public getCustomerEdgeInfos(customerId: string, pageLink: PageLink, type: string = '',\n                              config?: RequestConfig): Observable<PageData<EdgeInfo>> {\n    return this.http.get<PageData<EdgeInfo>>(`/api/customer/${customerId}/edgeInfos${pageLink.toQuery()}&type=${type}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public assignEdgeToCustomer(customerId: string, edgeId: string,\n                              config?: RequestConfig): Observable<Edge> {\n    return this.http.post<Edge>(`/api/customer/${customerId}/edge/${edgeId}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public unassignEdgeFromCustomer(edgeId: string, config?: RequestConfig) {\n    return this.http.delete(`/api/customer/edge/${edgeId}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public makeEdgePublic(edgeId: string, config?: RequestConfig): Observable<Edge> {\n    return this.http.post<Edge>(`/api/customer/public/edge/${edgeId}`, null,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getTenantEdgeInfos(pageLink: PageLink, type: string = '',\n                            config?: RequestConfig): Observable<PageData<EdgeInfo>> {\n    return this.http.get<PageData<EdgeInfo>>(`/api/tenant/edgeInfos${pageLink.toQuery()}&type=${type}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public findByQuery(query: EdgeSearchQuery, config?: RequestConfig): Observable<Array<Edge>> {\n    return this.http.post<Array<Edge>>('/api/edges', query,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public getEdgeEvents(entityId: EntityId, pageLink: TimePageLink,\n                       config?: RequestConfig): Observable<PageData<EdgeEvent>> {\n    return this.http.get<PageData<EdgeEvent>>(`/api/edge/${entityId.id}/events` + `${pageLink.toQuery()}`,\n      defaultHttpOptionsFromConfig(config));\n  }\n\n  public syncEdge(edgeId: string, config?: RequestConfig) {\n    return this.http.post(`/api/edge/sync/${edgeId}`, edgeId, defaultHttpOptionsFromConfig(config));\n  }\n\n  public findMissingToRelatedRuleChains(edgeId: string, config?: RequestConfig): Observable<string> {\n    return this.http.get<string>(`/api/edge/missingToRelatedRuleChains/${edgeId}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public findByName(edgeName: string, config?: RequestConfig): Observable<Edge> {\n    return this.http.get<Edge>(`/api/tenant/edges?edgeName=${edgeName}`, defaultHttpOptionsFromConfig(config));\n  }\n\n  public bulkImportEdges(entitiesData: BulkImportRequest, config?: RequestConfig): Observable<BulkImportResult> {\n    return this.http.post<BulkImportResult>('/api/edge/bulk_import', entitiesData, defaultHttpOptionsFromConfig(config));\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport {\n  Component,\n  ElementRef,\n  forwardRef,\n  Input,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport { ControlValueAccessor, FormControl, NG_VALIDATORS, NG_VALUE_ACCESSOR, Validator } from '@angular/forms';\nimport { Ace } from 'ace-builds';\nimport { getAce, Range } from '@shared/models/ace/ace.models';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { ActionNotificationHide, ActionNotificationShow } from '@core/notification/notification.actions';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@core/core.state';\nimport { UtilsService } from '@core/services/utils.service';\nimport { guid, isUndefined } from '@app/core/utils';\nimport { TranslateService } from '@ngx-translate/core';\nimport { CancelAnimationFrame, RafService } from '@core/services/raf.service';\nimport { ResizeObserver } from '@juggle/resize-observer';\nimport { TbEditorCompleter } from '@shared/models/ace/completion.models';\nimport { beautifyJs } from '@shared/models/beautify.models';\n\n@Component({\n  selector: 'tb-js-func',\n  templateUrl: './js-func.component.html',\n  styleUrls: ['./js-func.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => JsFuncComponent),\n      multi: true\n    },\n    {\n      provide: NG_VALIDATORS,\n      useExisting: forwardRef(() => JsFuncComponent),\n      multi: true,\n    }\n  ],\n  encapsulation: ViewEncapsulation.None\n})\nexport class JsFuncComponent implements OnInit, OnDestroy, ControlValueAccessor, Validator {\n\n  @ViewChild('javascriptEditor', {static: true})\n  javascriptEditorElmRef: ElementRef;\n\n  private jsEditor: Ace.Editor;\n  private editorsResizeCaf: CancelAnimationFrame;\n  private editorResize$: ResizeObserver;\n  private ignoreChange = false;\n\n  toastTargetId = `jsFuncEditor-${guid()}`;\n\n  @Input() functionName: string;\n\n  @Input() functionArgs: Array<string>;\n\n  @Input() validationArgs: Array<any>;\n\n  @Input() resultType: string;\n\n  @Input() disabled: boolean;\n\n  @Input() fillHeight: boolean;\n\n  @Input() editorCompleter: TbEditorCompleter;\n\n  @Input() globalVariables: Array<string>;\n\n  @Input() disableUndefinedCheck = false;\n\n  @Input() helpId: string;\n\n  private noValidateValue: boolean;\n  get noValidate(): boolean {\n    return this.noValidateValue;\n  }\n  @Input()\n  set noValidate(value: boolean) {\n    this.noValidateValue = coerceBooleanProperty(value);\n  }\n\n  private requiredValue: boolean;\n  get required(): boolean {\n    return this.requiredValue;\n  }\n  @Input()\n  set required(value: boolean) {\n    this.requiredValue = coerceBooleanProperty(value);\n  }\n\n  functionArgsString = '';\n\n  fullscreen = false;\n\n  modelValue: string;\n\n  functionValid = true;\n\n  validationError: string;\n\n  errorShowed = false;\n\n  errorMarkers: number[] = [];\n  errorAnnotationId = -1;\n\n  private propagateChange = null;\n  private hasErrors = false;\n\n  constructor(public elementRef: ElementRef,\n              private utils: UtilsService,\n              private translate: TranslateService,\n              protected store: Store<AppState>,\n              private raf: RafService) {\n  }\n\n  ngOnInit(): void {\n    if (!this.resultType || this.resultType.length === 0) {\n      this.resultType = 'nocheck';\n    }\n    if (this.functionArgs) {\n      this.functionArgs.forEach((functionArg) => {\n        if (this.functionArgsString.length > 0) {\n          this.functionArgsString += ', ';\n        }\n        this.functionArgsString += functionArg;\n      });\n    }\n    const editorElement = this.javascriptEditorElmRef.nativeElement;\n    let editorOptions: Partial<Ace.EditorOptions> = {\n      mode: 'ace/mode/javascript',\n      showGutter: true,\n      showPrintMargin: true,\n      readOnly: this.disabled\n    };\n\n    const advancedOptions = {\n      enableSnippets: true,\n      enableBasicAutocompletion: true,\n      enableLiveAutocompletion: true\n    };\n\n    editorOptions = {...editorOptions, ...advancedOptions};\n    getAce().subscribe(\n      (ace) => {\n        this.jsEditor = ace.edit(editorElement, editorOptions);\n        this.jsEditor.session.setUseWrapMode(true);\n        this.jsEditor.setValue(this.modelValue ? this.modelValue : '', -1);\n        this.jsEditor.setReadOnly(this.disabled);\n        this.jsEditor.on('change', () => {\n          if (!this.ignoreChange) {\n            this.cleanupJsErrors();\n            this.updateView();\n          }\n        });\n        if (!this.disableUndefinedCheck) {\n          // @ts-ignore\n          this.jsEditor.session.on('changeAnnotation', () => {\n            const annotations = this.jsEditor.session.getAnnotations();\n            annotations.filter(annotation => annotation.text.includes('is not defined')).forEach(annotation => {\n              annotation.type = 'error';\n            });\n            this.jsEditor.renderer.setAnnotations(annotations);\n            const hasErrors = annotations.filter(annotation => annotation.type === 'error').length > 0;\n            if (this.hasErrors !== hasErrors) {\n              this.hasErrors = hasErrors;\n              this.propagateChange(this.modelValue);\n            }\n          });\n        }\n        // @ts-ignore\n        if (!!this.jsEditor.session.$worker) {\n          const jsWorkerOptions = {\n            undef: !this.disableUndefinedCheck,\n            unused: true,\n            globals: {}\n          };\n          if (!this.disableUndefinedCheck && this.functionArgs) {\n            this.functionArgs.forEach(arg => {\n              jsWorkerOptions.globals[arg] = false;\n            });\n          }\n          if (!this.disableUndefinedCheck && this.globalVariables) {\n            this.globalVariables.forEach(arg => {\n              jsWorkerOptions.globals[arg] = false;\n            });\n          }\n          // @ts-ignore\n          this.jsEditor.session.$worker.send('changeOptions', [jsWorkerOptions]);\n        }\n        if (this.editorCompleter) {\n          this.jsEditor.completers = [this.editorCompleter, ...(this.jsEditor.completers || [])];\n        }\n        this.editorResize$ = new ResizeObserver(() => {\n          this.onAceEditorResize();\n        });\n        this.editorResize$.observe(editorElement);\n      }\n    );\n  }\n\n  ngOnDestroy(): void {\n    if (this.editorResize$) {\n      this.editorResize$.disconnect();\n    }\n  }\n\n  private onAceEditorResize() {\n    if (this.editorsResizeCaf) {\n      this.editorsResizeCaf();\n      this.editorsResizeCaf = null;\n    }\n    this.editorsResizeCaf = this.raf.raf(() => {\n      this.jsEditor.resize();\n      this.jsEditor.renderer.updateFull();\n    });\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    if (this.jsEditor) {\n      this.jsEditor.setReadOnly(this.disabled);\n    }\n  }\n\n  public validate(c: FormControl) {\n    return (this.functionValid && !this.hasErrors) ? null : {\n      jsFunc: {\n        valid: false,\n      },\n    };\n  }\n\n  beautifyJs() {\n    beautifyJs(this.modelValue, {indent_size: 4, wrap_line_length: 60}).subscribe(\n      (res) => {\n        this.jsEditor.setValue(res ? res : '', -1);\n        this.updateView();\n      }\n    );\n  }\n\n  validateOnSubmit(): void {\n    if (!this.disabled) {\n      this.cleanupJsErrors();\n      this.functionValid = this.validateJsFunc();\n      if (!this.functionValid) {\n        this.propagateChange(this.modelValue);\n        this.store.dispatch(new ActionNotificationShow(\n          {\n            message: this.validationError,\n            type: 'error',\n            target: this.toastTargetId,\n            verticalPosition: 'bottom',\n            horizontalPosition: 'left'\n          }));\n        this.errorShowed = true;\n      }\n    }\n  }\n\n  private validateJsFunc(): boolean {\n    try {\n      const toValidate = new Function(this.functionArgsString, this.modelValue);\n      if (this.noValidate) {\n        return true;\n      }\n      if (this.validationArgs) {\n        let res: any;\n        let validationError: any;\n        for (const validationArg of this.validationArgs) {\n          try {\n            res = toValidate.apply(this, validationArg);\n            validationError = null;\n            break;\n          } catch (e) {\n            validationError = e;\n          }\n        }\n        if (validationError) {\n          throw validationError;\n        }\n        if (this.resultType !== 'nocheck') {\n          if (this.resultType === 'any') {\n            if (isUndefined(res)) {\n              this.validationError = this.translate.instant('js-func.no-return-error');\n              return false;\n            }\n          } else {\n            const resType = typeof res;\n            if (resType !== this.resultType) {\n              this.validationError = this.translate.instant('js-func.return-type-mismatch', {type: this.resultType});\n              return false;\n            }\n          }\n        }\n        return true;\n      } else {\n        return true;\n      }\n    } catch (e) {\n      const details = this.utils.parseException(e);\n      let errorInfo = 'Error:';\n      if (details.name) {\n        errorInfo += ' ' + details.name + ':';\n      }\n      if (details.message) {\n        errorInfo += ' ' + details.message;\n      }\n      if (details.lineNumber) {\n        errorInfo += '<br>Line ' + details.lineNumber;\n        if (details.columnNumber) {\n          errorInfo += ' column ' + details.columnNumber;\n        }\n        errorInfo += ' of script.';\n      }\n      this.validationError = errorInfo;\n      if (details.lineNumber) {\n        const line = details.lineNumber - 1;\n        let column = 0;\n        if (details.columnNumber) {\n          column = details.columnNumber;\n        }\n        const errorMarkerId = this.jsEditor.session.addMarker(new Range(line, 0, line, Infinity),\n          'ace_active-line', 'screenLine');\n        this.errorMarkers.push(errorMarkerId);\n        const annotations = this.jsEditor.session.getAnnotations();\n        const errorAnnotation: Ace.Annotation = {\n          row: line,\n          column,\n          text: details.message,\n          type: 'error'\n        };\n        this.errorAnnotationId = annotations.push(errorAnnotation) - 1;\n        this.jsEditor.session.setAnnotations(annotations);\n      }\n      return false;\n    }\n  }\n\n  private cleanupJsErrors(): void {\n    if (this.errorShowed) {\n      this.store.dispatch(new ActionNotificationHide(\n        {\n          target: this.toastTargetId\n        }));\n      this.errorShowed = false;\n    }\n    this.errorMarkers.forEach((errorMarker) => {\n      this.jsEditor.session.removeMarker(errorMarker);\n    });\n    this.errorMarkers.length = 0;\n    if (this.errorAnnotationId > -1) {\n      const annotations = this.jsEditor.session.getAnnotations();\n      annotations.splice(this.errorAnnotationId, 1);\n      this.jsEditor.session.setAnnotations(annotations);\n      this.errorAnnotationId = -1;\n    }\n  }\n\n  writeValue(value: string): void {\n    this.modelValue = value;\n    if (this.jsEditor) {\n      this.ignoreChange = true;\n      this.jsEditor.setValue(this.modelValue ? this.modelValue : '', -1);\n      this.ignoreChange = false;\n    }\n  }\n\n  updateView() {\n    const editorValue = this.jsEditor.getValue();\n    if (this.modelValue !== editorValue) {\n      this.modelValue = editorValue;\n      this.functionValid = true;\n      this.propagateChange(this.modelValue);\n    }\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<div class=\"tb-js-func\" style=\"background: #fff;\" [ngClass]=\"{'tb-disabled': disabled, 'fill-height': fillHeight}\"\n     tb-fullscreen\n     [fullscreen]=\"fullscreen\" fxLayout=\"column\">\n  <div fxLayout=\"row\" fxLayoutAlign=\"start center\" style=\"height: 40px;\" class=\"tb-js-func-toolbar\">\n    <label class=\"tb-title no-padding\">{{'function ' + (functionName ? functionName : '') + '(' + functionArgsString + ') {'}}</label>\n    <span fxFlex></span>\n    <button type='button' *ngIf=\"!disabled\" mat-button class=\"tidy\" (click)=\"beautifyJs()\">\n      {{'js-func.tidy' | translate }}\n    </button>\n    <div *ngIf=\"helpId\" [tb-help-popup]=\"helpId\"></div>\n    <fieldset style=\"width: initial\">\n      <div matTooltip=\"{{(fullscreen ? 'fullscreen.exit' : 'fullscreen.expand') | translate}}\"\n           matTooltipPosition=\"above\"\n           style=\"border-radius: 50%\"\n           (click)=\"fullscreen = !fullscreen\">\n        <button type='button' mat-button mat-icon-button class=\"tb-mat-32\">\n          <mat-icon class=\"material-icons\">{{ fullscreen ? 'fullscreen_exit' : 'fullscreen' }}</mat-icon>\n        </button>\n      </div>\n    </fieldset>\n  </div>\n  <div id=\"tb-javascript-panel\" class=\"tb-js-func-panel\" fxLayout=\"column\" tb-toast toastTarget=\"{{toastTargetId}}\">\n    <div #javascriptEditor id=\"tb-javascript-input\" [ngClass]=\"{'fill-height': fillHeight}\"></div>\n  </div>\n  <div fxLayout=\"row\" fxLayoutAlign=\"start center\" style=\"height: 40px;\">\n    <label class=\"tb-title no-padding\">}</label>\n  </div>\n</div>\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Pipe, PipeTransform } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Pipe({\n  name: 'milliSecondsToTimeString'\n})\nexport class MillisecondsToTimeStringPipe implements PipeTransform {\n\n  constructor(private translate: TranslateService) {\n  }\n\n  transform(millseconds: number, args?: any): string {\n    let seconds = Math.floor(millseconds / 1000);\n    const days = Math.floor(seconds / 86400);\n    let hours = Math.floor((seconds % 86400) / 3600);\n    let minutes = Math.floor(((seconds % 86400) % 3600) / 60);\n    seconds = seconds % 60;\n    let timeString = '';\n    if (days > 0) {\n      timeString += this.translate.instant('timewindow.days', {days});\n    }\n    if (hours > 0) {\n      if (timeString.length === 0 && hours === 1) {\n        hours = 0;\n      }\n      timeString += this.translate.instant('timewindow.hours', {hours});\n    }\n    if (minutes > 0) {\n      if (timeString.length === 0 && minutes === 1) {\n        minutes = 0;\n      }\n      timeString += this.translate.instant('timewindow.minutes', {minutes});\n    }\n    if (seconds > 0) {\n      if (timeString.length === 0 && seconds === 1) {\n        seconds = 0;\n      }\n      timeString += this.translate.instant('timewindow.seconds', {seconds});\n    }\n    return timeString;\n  }\n}\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\n\n\nimport { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from '@app/app.module';\nimport { environment } from '@env/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nimport { Component, forwardRef, Input, OnInit } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { QuickTimeInterval, QuickTimeIntervalTranslationMap } from '@shared/models/time/time.models';\n\n@Component({\n  selector: 'tb-quick-time-interval',\n  templateUrl: './quick-time-interval.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => QuickTimeIntervalComponent),\n      multi: true\n    }\n  ]\n})\nexport class QuickTimeIntervalComponent implements OnInit, ControlValueAccessor {\n\n  private allIntervals = Object.values(QuickTimeInterval);\n\n  modelValue: QuickTimeInterval;\n  timeIntervalTranslationMap = QuickTimeIntervalTranslationMap;\n\n  rendered = false;\n\n  @Input() disabled: boolean;\n\n  @Input() onlyCurrentInterval = false;\n\n  private propagateChange = (_: any) => {};\n\n  constructor() {\n  }\n\n  get intervals() {\n    if (this.onlyCurrentInterval) {\n      return this.allIntervals.filter(interval => interval.startsWith('CURRENT_'));\n    }\n    return this.allIntervals;\n  }\n\n  ngOnInit(): void {\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n  }\n\n  writeValue(interval: QuickTimeInterval): void {\n    this.modelValue = interval;\n  }\n\n  onIntervalChange() {\n    this.propagateChange(this.modelValue);\n  }\n}\n","<!--\n\n    Copyright © 2016-2021 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n-->\n<section class=\"interval-section\" fxLayout=\"row\" fxFlex>\n  <mat-form-field fxFlex>\n    <mat-label translate>timewindow.interval</mat-label>\n    <mat-select [disabled]=\"disabled\" [(ngModel)]=\"modelValue\" (ngModelChange)=\"onIntervalChange()\">\n      <mat-option *ngFor=\"let interval of intervals\" [value]=\"interval\">\n        {{ timeIntervalTranslationMap.get(interval) | translate}}\n      </mat-option>\n    </mat-select>\n  </mat-form-field>\n</section>\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";","///\n/// Copyright © 2016-2021 The Thingsboard Authors\n///\n/// Licensed under the Apache License, Version 2.0 (the \"License\");\n/// you may not use this file except in compliance with the License.\n/// You may obtain a copy of the License at\n///\n///     http://www.apache.org/licenses/LICENSE-2.0\n///\n/// Unless required by applicable law or agreed to in writing, software\n/// distributed under the License is distributed on an \"AS IS\" BASIS,\n/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n/// See the License for the specific language governing permissions and\n/// limitations under the License.\n///\n\nexport enum Authority {\n  SYS_ADMIN = 'SYS_ADMIN',\n  TENANT_ADMIN = 'TENANT_ADMIN',\n  CUSTOMER_USER = 'CUSTOMER_USER',\n  REFRESH_TOKEN = 'REFRESH_TOKEN',\n  ANONYMOUS = 'ANONYMOUS'\n}\n"],"sourceRoot":"webpack:///"}